var EZ=Object.defineProperty;var TZ=(t,e,n)=>e in t?EZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ze=(t,e,n)=>TZ(t,typeof e!="symbol"?e+"":e,n);function IZ(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function ah(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _l(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var PC={exports:{}},Eb={},CC={exports:{}},Xn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IN;function PZ(){if(IN)return Xn;IN=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),d=Symbol.iterator;function h(Q){return Q===null||typeof Q!="object"?null:(Q=d&&Q[d]||Q["@@iterator"],typeof Q=="function"?Q:null)}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function m(Q,se,Z){this.props=Q,this.context=se,this.refs=g,this.updater=Z||f}m.prototype.isReactComponent={},m.prototype.setState=function(Q,se){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,se,"setState")},m.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function y(){}y.prototype=m.prototype;function b(Q,se,Z){this.props=Q,this.context=se,this.refs=g,this.updater=Z||f}var x=b.prototype=new y;x.constructor=b,p(x,m.prototype),x.isPureReactComponent=!0;var S=Array.isArray,P=Object.prototype.hasOwnProperty,_={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function C(Q,se,Z){var ie,pe={},ue=null,le=null;if(se!=null)for(ie in se.ref!==void 0&&(le=se.ref),se.key!==void 0&&(ue=""+se.key),se)P.call(se,ie)&&!I.hasOwnProperty(ie)&&(pe[ie]=se[ie]);var ae=arguments.length-2;if(ae===1)pe.children=Z;else if(1<ae){for(var _e=Array(ae),ye=0;ye<ae;ye++)_e[ye]=arguments[ye+2];pe.children=_e}if(Q&&Q.defaultProps)for(ie in ae=Q.defaultProps,ae)pe[ie]===void 0&&(pe[ie]=ae[ie]);return{$$typeof:t,type:Q,key:ue,ref:le,props:pe,_owner:_.current}}function A(Q,se){return{$$typeof:t,type:Q.type,key:se,ref:Q.ref,props:Q.props,_owner:Q._owner}}function M(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===t}function k(Q){var se={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(Z){return se[Z]})}var O=/\/+/g;function B(Q,se){return typeof Q=="object"&&Q!==null&&Q.key!=null?k(""+Q.key):se.toString(36)}function $(Q,se,Z,ie,pe){var ue=typeof Q;(ue==="undefined"||ue==="boolean")&&(Q=null);var le=!1;if(Q===null)le=!0;else switch(ue){case"string":case"number":le=!0;break;case"object":switch(Q.$$typeof){case t:case e:le=!0}}if(le)return le=Q,pe=pe(le),Q=ie===""?"."+B(le,0):ie,S(pe)?(Z="",Q!=null&&(Z=Q.replace(O,"$&/")+"/"),$(pe,se,Z,"",function(ye){return ye})):pe!=null&&(M(pe)&&(pe=A(pe,Z+(!pe.key||le&&le.key===pe.key?"":(""+pe.key).replace(O,"$&/")+"/")+Q)),se.push(pe)),1;if(le=0,ie=ie===""?".":ie+":",S(Q))for(var ae=0;ae<Q.length;ae++){ue=Q[ae];var _e=ie+B(ue,ae);le+=$(ue,se,Z,_e,pe)}else if(_e=h(Q),typeof _e=="function")for(Q=_e.call(Q),ae=0;!(ue=Q.next()).done;)ue=ue.value,_e=ie+B(ue,ae++),le+=$(ue,se,Z,_e,pe);else if(ue==="object")throw se=String(Q),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.");return le}function U(Q,se,Z){if(Q==null)return Q;var ie=[],pe=0;return $(Q,ie,"","",function(ue){return se.call(Z,ue,pe++)}),ie}function q(Q){if(Q._status===-1){var se=Q._result;se=se(),se.then(function(Z){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=Z)},function(Z){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=Z)}),Q._status===-1&&(Q._status=0,Q._result=se)}if(Q._status===1)return Q._result.default;throw Q._result}var K={current:null},V={transition:null},G={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:V,ReactCurrentOwner:_};function j(){throw Error("act(...) is not supported in production builds of React.")}return Xn.Children={map:U,forEach:function(Q,se,Z){U(Q,function(){se.apply(this,arguments)},Z)},count:function(Q){var se=0;return U(Q,function(){se++}),se},toArray:function(Q){return U(Q,function(se){return se})||[]},only:function(Q){if(!M(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}},Xn.Component=m,Xn.Fragment=n,Xn.Profiler=i,Xn.PureComponent=b,Xn.StrictMode=r,Xn.Suspense=c,Xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,Xn.act=j,Xn.cloneElement=function(Q,se,Z){if(Q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Q+".");var ie=p({},Q.props),pe=Q.key,ue=Q.ref,le=Q._owner;if(se!=null){if(se.ref!==void 0&&(ue=se.ref,le=_.current),se.key!==void 0&&(pe=""+se.key),Q.type&&Q.type.defaultProps)var ae=Q.type.defaultProps;for(_e in se)P.call(se,_e)&&!I.hasOwnProperty(_e)&&(ie[_e]=se[_e]===void 0&&ae!==void 0?ae[_e]:se[_e])}var _e=arguments.length-2;if(_e===1)ie.children=Z;else if(1<_e){ae=Array(_e);for(var ye=0;ye<_e;ye++)ae[ye]=arguments[ye+2];ie.children=ae}return{$$typeof:t,type:Q.type,key:pe,ref:ue,props:ie,_owner:le}},Xn.createContext=function(Q){return Q={$$typeof:o,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Q.Provider={$$typeof:s,_context:Q},Q.Consumer=Q},Xn.createElement=C,Xn.createFactory=function(Q){var se=C.bind(null,Q);return se.type=Q,se},Xn.createRef=function(){return{current:null}},Xn.forwardRef=function(Q){return{$$typeof:a,render:Q}},Xn.isValidElement=M,Xn.lazy=function(Q){return{$$typeof:u,_payload:{_status:-1,_result:Q},_init:q}},Xn.memo=function(Q,se){return{$$typeof:l,type:Q,compare:se===void 0?null:se}},Xn.startTransition=function(Q){var se=V.transition;V.transition={};try{Q()}finally{V.transition=se}},Xn.unstable_act=j,Xn.useCallback=function(Q,se){return K.current.useCallback(Q,se)},Xn.useContext=function(Q){return K.current.useContext(Q)},Xn.useDebugValue=function(){},Xn.useDeferredValue=function(Q){return K.current.useDeferredValue(Q)},Xn.useEffect=function(Q,se){return K.current.useEffect(Q,se)},Xn.useId=function(){return K.current.useId()},Xn.useImperativeHandle=function(Q,se,Z){return K.current.useImperativeHandle(Q,se,Z)},Xn.useInsertionEffect=function(Q,se){return K.current.useInsertionEffect(Q,se)},Xn.useLayoutEffect=function(Q,se){return K.current.useLayoutEffect(Q,se)},Xn.useMemo=function(Q,se){return K.current.useMemo(Q,se)},Xn.useReducer=function(Q,se,Z){return K.current.useReducer(Q,se,Z)},Xn.useRef=function(Q){return K.current.useRef(Q)},Xn.useState=function(Q){return K.current.useState(Q)},Xn.useSyncExternalStore=function(Q,se,Z){return K.current.useSyncExternalStore(Q,se,Z)},Xn.useTransition=function(){return K.current.useTransition()},Xn.version="18.3.1",Xn}var PN;function uu(){return PN||(PN=1,CC.exports=PZ()),CC.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CN;function CZ(){if(CN)return Eb;CN=1;var t=uu(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,c,l){var u,d={},h=null,f=null;l!==void 0&&(h=""+l),c.key!==void 0&&(h=""+c.key),c.ref!==void 0&&(f=c.ref);for(u in c)r.call(c,u)&&!s.hasOwnProperty(u)&&(d[u]=c[u]);if(a&&a.defaultProps)for(u in c=a.defaultProps,c)d[u]===void 0&&(d[u]=c[u]);return{$$typeof:e,type:a,key:h,ref:f,props:d,_owner:i.current}}return Eb.Fragment=n,Eb.jsx=o,Eb.jsxs=o,Eb}var MN;function jk(){return MN||(MN=1,PC.exports=CZ()),PC.exports}var H=jk(),xS={},MC={exports:{}},Ho={},AC={exports:{}},RC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AN;function MZ(){return AN||(AN=1,function(t){function e(V,G){var j=V.length;V.push(G);e:for(;0<j;){var Q=j-1>>>1,se=V[Q];if(0<i(se,G))V[Q]=G,V[j]=se,j=Q;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var G=V[0],j=V.pop();if(j!==G){V[0]=j;e:for(var Q=0,se=V.length,Z=se>>>1;Q<Z;){var ie=2*(Q+1)-1,pe=V[ie],ue=ie+1,le=V[ue];if(0>i(pe,j))ue<se&&0>i(le,pe)?(V[Q]=le,V[ue]=j,Q=ue):(V[Q]=pe,V[ie]=j,Q=ie);else if(ue<se&&0>i(le,j))V[Q]=le,V[ue]=j,Q=ue;else break e}}return G}function i(V,G){var j=V.sortIndex-G.sortIndex;return j!==0?j:V.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,m=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(V){for(var G=n(l);G!==null;){if(G.callback===null)r(l);else if(G.startTime<=V)r(l),G.sortIndex=G.expirationTime,e(c,G);else break;G=n(l)}}function S(V){if(g=!1,x(V),!p)if(n(c)!==null)p=!0,q(P);else{var G=n(l);G!==null&&K(S,G.startTime-V)}}function P(V,G){p=!1,g&&(g=!1,y(C),C=-1),f=!0;var j=h;try{for(x(G),d=n(c);d!==null&&(!(d.expirationTime>G)||V&&!k());){var Q=d.callback;if(typeof Q=="function"){d.callback=null,h=d.priorityLevel;var se=Q(d.expirationTime<=G);G=t.unstable_now(),typeof se=="function"?d.callback=se:d===n(c)&&r(c),x(G)}else r(c);d=n(c)}if(d!==null)var Z=!0;else{var ie=n(l);ie!==null&&K(S,ie.startTime-G),Z=!1}return Z}finally{d=null,h=j,f=!1}}var _=!1,I=null,C=-1,A=5,M=-1;function k(){return!(t.unstable_now()-M<A)}function O(){if(I!==null){var V=t.unstable_now();M=V;var G=!0;try{G=I(!0,V)}finally{G?B():(_=!1,I=null)}}else _=!1}var B;if(typeof b=="function")B=function(){b(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,U=$.port2;$.port1.onmessage=O,B=function(){U.postMessage(null)}}else B=function(){m(O,0)};function q(V){I=V,_||(_=!0,B())}function K(V,G){C=m(function(){V(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,q(P))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(V){switch(h){case 1:case 2:case 3:var G=3;break;default:G=h}var j=h;h=G;try{return V()}finally{h=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,G){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var j=h;h=V;try{return G()}finally{h=j}},t.unstable_scheduleCallback=function(V,G,j){var Q=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?Q+j:Q):j=Q,V){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=j+se,V={id:u++,callback:G,priorityLevel:V,startTime:j,expirationTime:se,sortIndex:-1},j>Q?(V.sortIndex=j,e(l,V),n(c)===null&&V===n(l)&&(g?(y(C),C=-1):g=!0,K(S,j-Q))):(V.sortIndex=se,e(c,V),p||f||(p=!0,q(P))),V},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(V){var G=h;return function(){var j=h;h=G;try{return V.apply(this,arguments)}finally{h=j}}}}(RC)),RC}var RN;function AZ(){return RN||(RN=1,AC.exports=MZ()),AC.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kN;function RZ(){if(kN)return Ho;kN=1;var t=uu(),e=AZ();function n(v){for(var w="https://reactjs.org/docs/error-decoder.html?invariant="+v,R=1;R<arguments.length;R++)w+="&args[]="+encodeURIComponent(arguments[R]);return"Minified React error #"+v+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(v,w){o(v,w),o(v+"Capture",w)}function o(v,w){for(i[v]=w,v=0;v<w.length;v++)r.add(w[v])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,l=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},d={};function h(v){return c.call(d,v)?!0:c.call(u,v)?!1:l.test(v)?d[v]=!0:(u[v]=!0,!1)}function f(v,w,R,D){if(R!==null&&R.type===0)return!1;switch(typeof w){case"function":case"symbol":return!0;case"boolean":return D?!1:R!==null?!R.acceptsBooleans:(v=v.toLowerCase().slice(0,5),v!=="data-"&&v!=="aria-");default:return!1}}function p(v,w,R,D){if(w===null||typeof w>"u"||f(v,w,R,D))return!0;if(D)return!1;if(R!==null)switch(R.type){case 3:return!w;case 4:return w===!1;case 5:return isNaN(w);case 6:return isNaN(w)||1>w}return!1}function g(v,w,R,D,W,J,fe){this.acceptsBooleans=w===2||w===3||w===4,this.attributeName=D,this.attributeNamespace=W,this.mustUseProperty=R,this.propertyName=v,this.type=w,this.sanitizeURL=J,this.removeEmptyString=fe}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(v){m[v]=new g(v,0,!1,v,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(v){var w=v[0];m[w]=new g(w,1,!1,v[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(v){m[v]=new g(v,2,!1,v.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(v){m[v]=new g(v,2,!1,v,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(v){m[v]=new g(v,3,!1,v.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(v){m[v]=new g(v,3,!0,v,null,!1,!1)}),["capture","download"].forEach(function(v){m[v]=new g(v,4,!1,v,null,!1,!1)}),["cols","rows","size","span"].forEach(function(v){m[v]=new g(v,6,!1,v,null,!1,!1)}),["rowSpan","start"].forEach(function(v){m[v]=new g(v,5,!1,v.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function b(v){return v[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(v){var w=v.replace(y,b);m[w]=new g(w,1,!1,v,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(v){var w=v.replace(y,b);m[w]=new g(w,1,!1,v,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(v){var w=v.replace(y,b);m[w]=new g(w,1,!1,v,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(v){m[v]=new g(v,1,!1,v.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(v){m[v]=new g(v,1,!1,v.toLowerCase(),null,!0,!0)});function x(v,w,R,D){var W=m.hasOwnProperty(w)?m[w]:null;(W!==null?W.type!==0:D||!(2<w.length)||w[0]!=="o"&&w[0]!=="O"||w[1]!=="n"&&w[1]!=="N")&&(p(w,R,W,D)&&(R=null),D||W===null?h(w)&&(R===null?v.removeAttribute(w):v.setAttribute(w,""+R)):W.mustUseProperty?v[W.propertyName]=R===null?W.type===3?!1:"":R:(w=W.attributeName,D=W.attributeNamespace,R===null?v.removeAttribute(w):(W=W.type,R=W===3||W===4&&R===!0?"":""+R,D?v.setAttributeNS(D,w,R):v.setAttribute(w,R))))}var S=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),_=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),k=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),V=Symbol.iterator;function G(v){return v===null||typeof v!="object"?null:(v=V&&v[V]||v["@@iterator"],typeof v=="function"?v:null)}var j=Object.assign,Q;function se(v){if(Q===void 0)try{throw Error()}catch(R){var w=R.stack.trim().match(/\n( *(at )?)/);Q=w&&w[1]||""}return`
`+Q+v}var Z=!1;function ie(v,w){if(!v||Z)return"";Z=!0;var R=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(w)if(w=function(){throw Error()},Object.defineProperty(w.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(w,[])}catch(ht){var D=ht}Reflect.construct(v,[],w)}else{try{w.call()}catch(ht){D=ht}v.call(w.prototype)}else{try{throw Error()}catch(ht){D=ht}v()}}catch(ht){if(ht&&D&&typeof ht.stack=="string"){for(var W=ht.stack.split(`
`),J=D.stack.split(`
`),fe=W.length-1,De=J.length-1;1<=fe&&0<=De&&W[fe]!==J[De];)De--;for(;1<=fe&&0<=De;fe--,De--)if(W[fe]!==J[De]){if(fe!==1||De!==1)do if(fe--,De--,0>De||W[fe]!==J[De]){var Ke=`
`+W[fe].replace(" at new "," at ");return v.displayName&&Ke.includes("<anonymous>")&&(Ke=Ke.replace("<anonymous>",v.displayName)),Ke}while(1<=fe&&0<=De);break}}}finally{Z=!1,Error.prepareStackTrace=R}return(v=v?v.displayName||v.name:"")?se(v):""}function pe(v){switch(v.tag){case 5:return se(v.type);case 16:return se("Lazy");case 13:return se("Suspense");case 19:return se("SuspenseList");case 0:case 2:case 15:return v=ie(v.type,!1),v;case 11:return v=ie(v.type.render,!1),v;case 1:return v=ie(v.type,!0),v;default:return""}}function ue(v){if(v==null)return null;if(typeof v=="function")return v.displayName||v.name||null;if(typeof v=="string")return v;switch(v){case I:return"Fragment";case _:return"Portal";case A:return"Profiler";case C:return"StrictMode";case B:return"Suspense";case $:return"SuspenseList"}if(typeof v=="object")switch(v.$$typeof){case k:return(v.displayName||"Context")+".Consumer";case M:return(v._context.displayName||"Context")+".Provider";case O:var w=v.render;return v=v.displayName,v||(v=w.displayName||w.name||"",v=v!==""?"ForwardRef("+v+")":"ForwardRef"),v;case U:return w=v.displayName||null,w!==null?w:ue(v.type)||"Memo";case q:w=v._payload,v=v._init;try{return ue(v(w))}catch{}}return null}function le(v){var w=v.type;switch(v.tag){case 24:return"Cache";case 9:return(w.displayName||"Context")+".Consumer";case 10:return(w._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return v=w.render,v=v.displayName||v.name||"",w.displayName||(v!==""?"ForwardRef("+v+")":"ForwardRef");case 7:return"Fragment";case 5:return w;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ue(w);case 8:return w===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w}return null}function ae(v){switch(typeof v){case"boolean":case"number":case"string":case"undefined":return v;case"object":return v;default:return""}}function _e(v){var w=v.type;return(v=v.nodeName)&&v.toLowerCase()==="input"&&(w==="checkbox"||w==="radio")}function ye(v){var w=_e(v)?"checked":"value",R=Object.getOwnPropertyDescriptor(v.constructor.prototype,w),D=""+v[w];if(!v.hasOwnProperty(w)&&typeof R<"u"&&typeof R.get=="function"&&typeof R.set=="function"){var W=R.get,J=R.set;return Object.defineProperty(v,w,{configurable:!0,get:function(){return W.call(this)},set:function(fe){D=""+fe,J.call(this,fe)}}),Object.defineProperty(v,w,{enumerable:R.enumerable}),{getValue:function(){return D},setValue:function(fe){D=""+fe},stopTracking:function(){v._valueTracker=null,delete v[w]}}}}function Ae(v){v._valueTracker||(v._valueTracker=ye(v))}function Oe(v){if(!v)return!1;var w=v._valueTracker;if(!w)return!0;var R=w.getValue(),D="";return v&&(D=_e(v)?v.checked?"true":"false":v.value),v=D,v!==R?(w.setValue(v),!0):!1}function Be(v){if(v=v||(typeof document<"u"?document:void 0),typeof v>"u")return null;try{return v.activeElement||v.body}catch{return v.body}}function ce(v,w){var R=w.checked;return j({},w,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:R??v._wrapperState.initialChecked})}function Ge(v,w){var R=w.defaultValue==null?"":w.defaultValue,D=w.checked!=null?w.checked:w.defaultChecked;R=ae(w.value!=null?w.value:R),v._wrapperState={initialChecked:D,initialValue:R,controlled:w.type==="checkbox"||w.type==="radio"?w.checked!=null:w.value!=null}}function Pe(v,w){w=w.checked,w!=null&&x(v,"checked",w,!1)}function He(v,w){Pe(v,w);var R=ae(w.value),D=w.type;if(R!=null)D==="number"?(R===0&&v.value===""||v.value!=R)&&(v.value=""+R):v.value!==""+R&&(v.value=""+R);else if(D==="submit"||D==="reset"){v.removeAttribute("value");return}w.hasOwnProperty("value")?je(v,w.type,R):w.hasOwnProperty("defaultValue")&&je(v,w.type,ae(w.defaultValue)),w.checked==null&&w.defaultChecked!=null&&(v.defaultChecked=!!w.defaultChecked)}function Re(v,w,R){if(w.hasOwnProperty("value")||w.hasOwnProperty("defaultValue")){var D=w.type;if(!(D!=="submit"&&D!=="reset"||w.value!==void 0&&w.value!==null))return;w=""+v._wrapperState.initialValue,R||w===v.value||(v.value=w),v.defaultValue=w}R=v.name,R!==""&&(v.name=""),v.defaultChecked=!!v._wrapperState.initialChecked,R!==""&&(v.name=R)}function je(v,w,R){(w!=="number"||Be(v.ownerDocument)!==v)&&(R==null?v.defaultValue=""+v._wrapperState.initialValue:v.defaultValue!==""+R&&(v.defaultValue=""+R))}var te=Array.isArray;function ee(v,w,R,D){if(v=v.options,w){w={};for(var W=0;W<R.length;W++)w["$"+R[W]]=!0;for(R=0;R<v.length;R++)W=w.hasOwnProperty("$"+v[R].value),v[R].selected!==W&&(v[R].selected=W),W&&D&&(v[R].defaultSelected=!0)}else{for(R=""+ae(R),w=null,W=0;W<v.length;W++){if(v[W].value===R){v[W].selected=!0,D&&(v[W].defaultSelected=!0);return}w!==null||v[W].disabled||(w=v[W])}w!==null&&(w.selected=!0)}}function X(v,w){if(w.dangerouslySetInnerHTML!=null)throw Error(n(91));return j({},w,{value:void 0,defaultValue:void 0,children:""+v._wrapperState.initialValue})}function we(v,w){var R=w.value;if(R==null){if(R=w.children,w=w.defaultValue,R!=null){if(w!=null)throw Error(n(92));if(te(R)){if(1<R.length)throw Error(n(93));R=R[0]}w=R}w==null&&(w=""),R=w}v._wrapperState={initialValue:ae(R)}}function Ne(v,w){var R=ae(w.value),D=ae(w.defaultValue);R!=null&&(R=""+R,R!==v.value&&(v.value=R),w.defaultValue==null&&v.defaultValue!==R&&(v.defaultValue=R)),D!=null&&(v.defaultValue=""+D)}function We(v){var w=v.textContent;w===v._wrapperState.initialValue&&w!==""&&w!==null&&(v.value=w)}function xe(v){switch(v){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ve(v,w){return v==null||v==="http://www.w3.org/1999/xhtml"?xe(w):v==="http://www.w3.org/2000/svg"&&w==="foreignObject"?"http://www.w3.org/1999/xhtml":v}var be,ge=function(v){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(w,R,D,W){MSApp.execUnsafeLocalFunction(function(){return v(w,R,D,W)})}:v}(function(v,w){if(v.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in v)v.innerHTML=w;else{for(be=be||document.createElement("div"),be.innerHTML="<svg>"+w.valueOf().toString()+"</svg>",w=be.firstChild;v.firstChild;)v.removeChild(v.firstChild);for(;w.firstChild;)v.appendChild(w.firstChild)}});function Se(v,w){if(w){var R=v.firstChild;if(R&&R===v.lastChild&&R.nodeType===3){R.nodeValue=w;return}}v.textContent=w}var Ie={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];Object.keys(Ie).forEach(function(v){me.forEach(function(w){w=w+v.charAt(0).toUpperCase()+v.substring(1),Ie[w]=Ie[v]})});function Ee(v,w,R){return w==null||typeof w=="boolean"||w===""?"":R||typeof w!="number"||w===0||Ie.hasOwnProperty(v)&&Ie[v]?(""+w).trim():w+"px"}function oe(v,w){v=v.style;for(var R in w)if(w.hasOwnProperty(R)){var D=R.indexOf("--")===0,W=Ee(R,w[R],D);R==="float"&&(R="cssFloat"),D?v.setProperty(R,W):v[R]=W}}var ne=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function de(v,w){if(w){if(ne[v]&&(w.children!=null||w.dangerouslySetInnerHTML!=null))throw Error(n(137,v));if(w.dangerouslySetInnerHTML!=null){if(w.children!=null)throw Error(n(60));if(typeof w.dangerouslySetInnerHTML!="object"||!("__html"in w.dangerouslySetInnerHTML))throw Error(n(61))}if(w.style!=null&&typeof w.style!="object")throw Error(n(62))}}function Te(v,w){if(v.indexOf("-")===-1)return typeof w.is=="string";switch(v){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ke=null;function he(v){return v=v.target||v.srcElement||window,v.correspondingUseElement&&(v=v.correspondingUseElement),v.nodeType===3?v.parentNode:v}var Xe=null,$e=null,Qe=null;function ut(v){if(v=Bl(v)){if(typeof Xe!="function")throw Error(n(280));var w=v.stateNode;w&&(w=E0(w),Xe(v.stateNode,v.type,w))}}function gt(v){$e?Qe?Qe.push(v):Qe=[v]:$e=v}function Tt(){if($e){var v=$e,w=Qe;if(Qe=$e=null,ut(v),w)for(v=0;v<w.length;v++)ut(w[v])}}function Kt(v,w){return v(w)}function Zt(){}var Bt=!1;function _n(v,w,R){if(Bt)return v(w,R);Bt=!0;try{return Kt(v,w,R)}finally{Bt=!1,($e!==null||Qe!==null)&&(Zt(),Tt())}}function hn(v,w){var R=v.stateNode;if(R===null)return null;var D=E0(R);if(D===null)return null;R=D[w];e:switch(w){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(D=!D.disabled)||(v=v.type,D=!(v==="button"||v==="input"||v==="select"||v==="textarea")),v=!D;break e;default:v=!1}if(v)return null;if(R&&typeof R!="function")throw Error(n(231,w,typeof R));return R}var bn=!1;if(a)try{var Wn={};Object.defineProperty(Wn,"passive",{get:function(){bn=!0}}),window.addEventListener("test",Wn,Wn),window.removeEventListener("test",Wn,Wn)}catch{bn=!1}function Un(v,w,R,D,W,J,fe,De,Ke){var ht=Array.prototype.slice.call(arguments,3);try{w.apply(R,ht)}catch(Pt){this.onError(Pt)}}var Jn=!1,ci=null,fr=!1,Ur=null,Zr={onError:function(v){Jn=!0,ci=v}};function jr(v,w,R,D,W,J,fe,De,Ke){Jn=!1,ci=null,Un.apply(Zr,arguments)}function Pi(v,w,R,D,W,J,fe,De,Ke){if(jr.apply(this,arguments),Jn){if(Jn){var ht=ci;Jn=!1,ci=null}else throw Error(n(198));fr||(fr=!0,Ur=ht)}}function at(v){var w=v,R=v;if(v.alternate)for(;w.return;)w=w.return;else{v=w;do w=v,(w.flags&4098)!==0&&(R=w.return),v=w.return;while(v)}return w.tag===3?R:null}function Je(v){if(v.tag===13){var w=v.memoizedState;if(w===null&&(v=v.alternate,v!==null&&(w=v.memoizedState)),w!==null)return w.dehydrated}return null}function At(v){if(at(v)!==v)throw Error(n(188))}function Ht(v){var w=v.alternate;if(!w){if(w=at(v),w===null)throw Error(n(188));return w!==v?null:v}for(var R=v,D=w;;){var W=R.return;if(W===null)break;var J=W.alternate;if(J===null){if(D=W.return,D!==null){R=D;continue}break}if(W.child===J.child){for(J=W.child;J;){if(J===R)return At(W),v;if(J===D)return At(W),w;J=J.sibling}throw Error(n(188))}if(R.return!==D.return)R=W,D=J;else{for(var fe=!1,De=W.child;De;){if(De===R){fe=!0,R=W,D=J;break}if(De===D){fe=!0,D=W,R=J;break}De=De.sibling}if(!fe){for(De=J.child;De;){if(De===R){fe=!0,R=J,D=W;break}if(De===D){fe=!0,D=J,R=W;break}De=De.sibling}if(!fe)throw Error(n(189))}}if(R.alternate!==D)throw Error(n(190))}if(R.tag!==3)throw Error(n(188));return R.stateNode.current===R?v:w}function nn(v){return v=Ht(v),v!==null?Vt(v):null}function Vt(v){if(v.tag===5||v.tag===6)return v;for(v=v.child;v!==null;){var w=Vt(v);if(w!==null)return w;v=v.sibling}return null}var Tn=e.unstable_scheduleCallback,ve=e.unstable_cancelCallback,tt=e.unstable_shouldYield,ft=e.unstable_requestPaint,st=e.unstable_now,it=e.unstable_getCurrentPriorityLevel,Ct=e.unstable_ImmediatePriority,Dt=e.unstable_UserBlockingPriority,zt=e.unstable_NormalPriority,Gt=e.unstable_LowPriority,un=e.unstable_IdlePriority,an=null,Ot=null;function rn(v){if(Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(an,v,void 0,(v.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:Nn,jn=Math.log,qn=Math.LN2;function Nn(v){return v>>>=0,v===0?32:31-(jn(v)/qn|0)|0}var en=64,Zn=4194304;function $n(v){switch(v&-v){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return v&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return v}}function Ji(v,w){var R=v.pendingLanes;if(R===0)return 0;var D=0,W=v.suspendedLanes,J=v.pingedLanes,fe=R&268435455;if(fe!==0){var De=fe&~W;De!==0?D=$n(De):(J&=fe,J!==0&&(D=$n(J)))}else fe=R&~W,fe!==0?D=$n(fe):J!==0&&(D=$n(J));if(D===0)return 0;if(w!==0&&w!==D&&(w&W)===0&&(W=D&-D,J=w&-w,W>=J||W===16&&(J&4194240)!==0))return w;if((D&4)!==0&&(D|=R&16),w=v.entangledLanes,w!==0)for(v=v.entanglements,w&=D;0<w;)R=31-yn(w),W=1<<R,D|=v[R],w&=~W;return D}function Cl(v,w){switch(v){case 1:case 2:case 4:return w+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fi(v,w){for(var R=v.suspendedLanes,D=v.pingedLanes,W=v.expirationTimes,J=v.pendingLanes;0<J;){var fe=31-yn(J),De=1<<fe,Ke=W[fe];Ke===-1?((De&R)===0||(De&D)!==0)&&(W[fe]=Cl(De,w)):Ke<=w&&(v.expiredLanes|=De),J&=~De}}function Ba(v){return v=v.pendingLanes&-1073741825,v!==0?v:v&1073741824?1073741824:0}function Kn(){var v=en;return en<<=1,(en&4194240)===0&&(en=64),v}function hs(v){for(var w=[],R=0;31>R;R++)w.push(v);return w}function Ui(v,w,R){v.pendingLanes|=w,w!==536870912&&(v.suspendedLanes=0,v.pingedLanes=0),v=v.eventTimes,w=31-yn(w),v[w]=R}function Qi(v,w){var R=v.pendingLanes&~w;v.pendingLanes=w,v.suspendedLanes=0,v.pingedLanes=0,v.expiredLanes&=w,v.mutableReadLanes&=w,v.entangledLanes&=w,w=v.entanglements;var D=v.eventTimes;for(v=v.expirationTimes;0<R;){var W=31-yn(R),J=1<<W;w[W]=0,D[W]=-1,v[W]=-1,R&=~J}}function ui(v,w){var R=v.entangledLanes|=w;for(v=v.entanglements;R;){var D=31-yn(R),W=1<<D;W&w|v[D]&w&&(v[D]|=w),R&=~W}}var Gn=0;function zs(v){return v&=-v,1<v?4<v?(v&268435455)!==0?16:536870912:4:1}var yh,Av,C_,qm,Km,gu=!1,Gm=[],Fa=null,zn=null,Ml=null,yu=new Map,Qd=new Map,Pc=[],JP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ci(v,w){switch(v){case"focusin":case"focusout":Fa=null;break;case"dragenter":case"dragleave":zn=null;break;case"mouseover":case"mouseout":Ml=null;break;case"pointerover":case"pointerout":yu.delete(w.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qd.delete(w.pointerId)}}function vu(v,w,R,D,W,J){return v===null||v.nativeEvent!==J?(v={blockedOn:w,domEventName:R,eventSystemFlags:D,nativeEvent:J,targetContainers:[W]},w!==null&&(w=Bl(w),w!==null&&Av(w)),v):(v.eventSystemFlags|=D,w=v.targetContainers,W!==null&&w.indexOf(W)===-1&&w.push(W),v)}function QP(v,w,R,D,W){switch(w){case"focusin":return Fa=vu(Fa,v,w,R,D,W),!0;case"dragenter":return zn=vu(zn,v,w,R,D,W),!0;case"mouseover":return Ml=vu(Ml,v,w,R,D,W),!0;case"pointerover":var J=W.pointerId;return yu.set(J,vu(yu.get(J)||null,v,w,R,D,W)),!0;case"gotpointercapture":return J=W.pointerId,Qd.set(J,vu(Qd.get(J)||null,v,w,R,D,W)),!0}return!1}function Xm(v){var w=Nc(v.target);if(w!==null){var R=at(w);if(R!==null){if(w=R.tag,w===13){if(w=Je(R),w!==null){v.blockedOn=w,Km(v.priority,function(){C_(R)});return}}else if(w===3&&R.stateNode.current.memoizedState.isDehydrated){v.blockedOn=R.tag===3?R.stateNode.containerInfo:null;return}}}v.blockedOn=null}function Ym(v){if(v.blockedOn!==null)return!1;for(var w=v.targetContainers;0<w.length;){var R=ko(v.domEventName,v.eventSystemFlags,w[0],v.nativeEvent);if(R===null){R=v.nativeEvent;var D=new R.constructor(R.type,R);ke=D,R.target.dispatchEvent(D),ke=null}else return w=Bl(R),w!==null&&Av(w),v.blockedOn=R,!1;w.shift()}return!0}function vh(v,w,R){Ym(v)&&R.delete(w)}function Ua(){gu=!1,Fa!==null&&Ym(Fa)&&(Fa=null),zn!==null&&Ym(zn)&&(zn=null),Ml!==null&&Ym(Ml)&&(Ml=null),yu.forEach(vh),Qd.forEach(vh)}function bh(v,w){v.blockedOn===w&&(v.blockedOn=null,gu||(gu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ua)))}function xh(v){function w(W){return bh(W,v)}if(0<Gm.length){bh(Gm[0],v);for(var R=1;R<Gm.length;R++){var D=Gm[R];D.blockedOn===v&&(D.blockedOn=null)}}for(Fa!==null&&bh(Fa,v),zn!==null&&bh(zn,v),Ml!==null&&bh(Ml,v),yu.forEach(w),Qd.forEach(w),R=0;R<Pc.length;R++)D=Pc[R],D.blockedOn===v&&(D.blockedOn=null);for(;0<Pc.length&&(R=Pc[0],R.blockedOn===null);)Xm(R),R.blockedOn===null&&Pc.shift()}var Ts=S.ReactCurrentBatchConfig,Ro=!0;function Zm(v,w,R,D){var W=Gn,J=Ts.transition;Ts.transition=null;try{Gn=1,Jm(v,w,R,D)}finally{Gn=W,Ts.transition=J}}function Rv(v,w,R,D){var W=Gn,J=Ts.transition;Ts.transition=null;try{Gn=4,Jm(v,w,R,D)}finally{Gn=W,Ts.transition=J}}function Jm(v,w,R,D){if(Ro){var W=ko(v,w,R,D);if(W===null)v0(v,w,D,Qm,R),Ci(v,D);else if(QP(W,v,w,R,D))D.stopPropagation();else if(Ci(v,D),w&4&&-1<JP.indexOf(v)){for(;W!==null;){var J=Bl(W);if(J!==null&&yh(J),J=ko(v,w,R,D),J===null&&v0(v,w,D,Qm,R),J===W)break;W=J}W!==null&&D.stopPropagation()}else v0(v,w,D,null,R)}}var Qm=null;function ko(v,w,R,D){if(Qm=null,v=he(D),v=Nc(v),v!==null)if(w=at(v),w===null)v=null;else if(R=w.tag,R===13){if(v=Je(w),v!==null)return v;v=null}else if(R===3){if(w.stateNode.current.memoizedState.isDehydrated)return w.tag===3?w.stateNode.containerInfo:null;v=null}else w!==v&&(v=null);return Qm=v,null}function M_(v){switch(v){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(it()){case Ct:return 1;case Dt:return 4;case zt:case Gt:return 16;case un:return 536870912;default:return 16}default:return 16}}var oa=null,kv=null,Hs=null;function wh(){if(Hs)return Hs;var v,w=kv,R=w.length,D,W="value"in oa?oa.value:oa.textContent,J=W.length;for(v=0;v<R&&w[v]===W[v];v++);var fe=R-v;for(D=1;D<=fe&&w[R-D]===W[J-D];D++);return Hs=W.slice(v,1<D?1-D:void 0)}function bu(v){var w=v.keyCode;return"charCode"in v?(v=v.charCode,v===0&&w===13&&(v=13)):v=w,v===10&&(v=13),32<=v||v===13?v:0}function Al(){return!0}function e0(){return!1}function Is(v){function w(R,D,W,J,fe){this._reactName=R,this._targetInst=W,this.type=D,this.nativeEvent=J,this.target=fe,this.currentTarget=null;for(var De in v)v.hasOwnProperty(De)&&(R=v[De],this[De]=R?R(J):J[De]);return this.isDefaultPrevented=(J.defaultPrevented!=null?J.defaultPrevented:J.returnValue===!1)?Al:e0,this.isPropagationStopped=e0,this}return j(w.prototype,{preventDefault:function(){this.defaultPrevented=!0;var R=this.nativeEvent;R&&(R.preventDefault?R.preventDefault():typeof R.returnValue!="unknown"&&(R.returnValue=!1),this.isDefaultPrevented=Al)},stopPropagation:function(){var R=this.nativeEvent;R&&(R.stopPropagation?R.stopPropagation():typeof R.cancelBubble!="unknown"&&(R.cancelBubble=!0),this.isPropagationStopped=Al)},persist:function(){},isPersistent:Al}),w}var xu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(v){return v.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_h=Is(xu),wu=j({},xu,{view:0,detail:0}),ef=Is(wu),Vs,Oo,No,tf=j({},wu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mc,button:0,buttons:0,relatedTarget:function(v){return v.relatedTarget===void 0?v.fromElement===v.srcElement?v.toElement:v.fromElement:v.relatedTarget},movementX:function(v){return"movementX"in v?v.movementX:(v!==No&&(No&&v.type==="mousemove"?(Vs=v.screenX-No.screenX,Oo=v.screenY-No.screenY):Oo=Vs=0,No=v),Vs)},movementY:function(v){return"movementY"in v?v.movementY:Oo}}),Ov=Is(tf),Rl=j({},tf,{dataTransfer:0}),Cc=Is(Rl),t0=j({},wu,{relatedTarget:0}),n0=Is(t0),r0=j({},xu,{animationName:0,elapsedTime:0,pseudoElement:0}),A_=Is(r0),R_=j({},xu,{clipboardData:function(v){return"clipboardData"in v?v.clipboardData:window.clipboardData}}),Nv=Is(R_),i0=j({},xu,{data:0}),Lv=Is(i0),k_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},O_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nf(v){var w=this.nativeEvent;return w.getModifierState?w.getModifierState(v):(v=Dv[v])?!!w[v]:!1}function Mc(){return nf}var s0=j({},wu,{key:function(v){if(v.key){var w=k_[v.key]||v.key;if(w!=="Unidentified")return w}return v.type==="keypress"?(v=bu(v),v===13?"Enter":String.fromCharCode(v)):v.type==="keydown"||v.type==="keyup"?O_[v.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mc,charCode:function(v){return v.type==="keypress"?bu(v):0},keyCode:function(v){return v.type==="keydown"||v.type==="keyup"?v.keyCode:0},which:function(v){return v.type==="keypress"?bu(v):v.type==="keydown"||v.type==="keyup"?v.keyCode:0}}),o0=Is(s0),Lo=j({},tf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),co=Is(Lo),_u=j({},wu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mc}),kl=Is(_u),Ol=j({},xu,{propertyName:0,elapsedTime:0,pseudoElement:0}),Su=Is(Ol),N_=j({},tf,{deltaX:function(v){return"deltaX"in v?v.deltaX:"wheelDeltaX"in v?-v.wheelDeltaX:0},deltaY:function(v){return"deltaY"in v?v.deltaY:"wheelDeltaY"in v?-v.wheelDeltaY:"wheelDelta"in v?-v.wheelDelta:0},deltaZ:0,deltaMode:0}),Bv=Is(N_),Fv=[9,13,27,32],Ps=a&&"CompositionEvent"in window,es=null;a&&"documentMode"in document&&(es=document.documentMode);var qr=a&&"TextEvent"in window&&!es,rf=a&&(!Ps||es&&8<es&&11>=es),Do=" ",Uv=!1;function $v(v,w){switch(v){case"keyup":return Fv.indexOf(w.keyCode)!==-1;case"keydown":return w.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function a0(v){return v=v.detail,typeof v=="object"&&"data"in v?v.data:null}var Ac=!1;function L_(v,w){switch(v){case"compositionend":return a0(w);case"keypress":return w.which!==32?null:(Uv=!0,Do);case"textInput":return v=w.data,v===Do&&Uv?null:v;default:return null}}function Sh(v,w){if(Ac)return v==="compositionend"||!Ps&&$v(v,w)?(v=wh(),Hs=kv=oa=null,Ac=!1,v):null;switch(v){case"paste":return null;case"keypress":if(!(w.ctrlKey||w.altKey||w.metaKey)||w.ctrlKey&&w.altKey){if(w.char&&1<w.char.length)return w.char;if(w.which)return String.fromCharCode(w.which)}return null;case"compositionend":return rf&&w.locale!=="ko"?null:w.data;default:return null}}var sf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function l0(v){var w=v&&v.nodeName&&v.nodeName.toLowerCase();return w==="input"?!!sf[v.type]:w==="textarea"}function of(v,w,R,D){gt(D),w=b0(w,"onChange"),0<w.length&&(R=new _h("onChange","change",null,R,D),v.push({event:R,listeners:w}))}var Rc=null,af=null;function D_(v){df(v,0)}function Nl(v){var w=di(v);if(Oe(w))return v}function B_(v,w){if(v==="change")return w}var lf=!1;if(a){var Ws;if(a){var Eu="oninput"in document;if(!Eu){var Tu=document.createElement("div");Tu.setAttribute("oninput","return;"),Eu=typeof Tu.oninput=="function"}Ws=Eu}else Ws=!1;lf=Ws&&(!document.documentMode||9<document.documentMode)}function aa(){Rc&&(Rc.detachEvent("onpropertychange",c0),af=Rc=null)}function c0(v){if(v.propertyName==="value"&&Nl(af)){var w=[];of(w,af,v,he(v)),_n(D_,w)}}function cf(v,w,R){v==="focusin"?(aa(),Rc=w,af=R,Rc.attachEvent("onpropertychange",c0)):v==="focusout"&&aa()}function F_(v){if(v==="selectionchange"||v==="keyup"||v==="keydown")return Nl(af)}function zv(v,w){if(v==="click")return Nl(w)}function Jr(v,w){if(v==="input"||v==="change")return Nl(w)}function u0(v,w){return v===w&&(v!==0||1/v===1/w)||v!==v&&w!==w}var uo=typeof Object.is=="function"?Object.is:u0;function Iu(v,w){if(uo(v,w))return!0;if(typeof v!="object"||v===null||typeof w!="object"||w===null)return!1;var R=Object.keys(v),D=Object.keys(w);if(R.length!==D.length)return!1;for(D=0;D<R.length;D++){var W=R[D];if(!c.call(w,W)||!uo(v[W],w[W]))return!1}return!0}function Eh(v){for(;v&&v.firstChild;)v=v.firstChild;return v}function fo(v,w){var R=Eh(v);v=0;for(var D;R;){if(R.nodeType===3){if(D=v+R.textContent.length,v<=w&&D>=w)return{node:R,offset:w-v};v=D}e:{for(;R;){if(R.nextSibling){R=R.nextSibling;break e}R=R.parentNode}R=void 0}R=Eh(R)}}function Pu(v,w){return v&&w?v===w?!0:v&&v.nodeType===3?!1:w&&w.nodeType===3?Pu(v,w.parentNode):"contains"in v?v.contains(w):v.compareDocumentPosition?!!(v.compareDocumentPosition(w)&16):!1:!1}function Qr(){for(var v=window,w=Be();w instanceof v.HTMLIFrameElement;){try{var R=typeof w.contentWindow.location.href=="string"}catch{R=!1}if(R)v=w.contentWindow;else break;w=Be(v.document)}return w}function $i(v){var w=v&&v.nodeName&&v.nodeName.toLowerCase();return w&&(w==="input"&&(v.type==="text"||v.type==="search"||v.type==="tel"||v.type==="url"||v.type==="password")||w==="textarea"||v.contentEditable==="true")}function zi(v){var w=Qr(),R=v.focusedElem,D=v.selectionRange;if(w!==R&&R&&R.ownerDocument&&Pu(R.ownerDocument.documentElement,R)){if(D!==null&&$i(R)){if(w=D.start,v=D.end,v===void 0&&(v=w),"selectionStart"in R)R.selectionStart=w,R.selectionEnd=Math.min(v,R.value.length);else if(v=(w=R.ownerDocument||document)&&w.defaultView||window,v.getSelection){v=v.getSelection();var W=R.textContent.length,J=Math.min(D.start,W);D=D.end===void 0?J:Math.min(D.end,W),!v.extend&&J>D&&(W=D,D=J,J=W),W=fo(R,J);var fe=fo(R,D);W&&fe&&(v.rangeCount!==1||v.anchorNode!==W.node||v.anchorOffset!==W.offset||v.focusNode!==fe.node||v.focusOffset!==fe.offset)&&(w=w.createRange(),w.setStart(W.node,W.offset),v.removeAllRanges(),J>D?(v.addRange(w),v.extend(fe.node,fe.offset)):(w.setEnd(fe.node,fe.offset),v.addRange(w)))}}for(w=[],v=R;v=v.parentNode;)v.nodeType===1&&w.push({element:v,left:v.scrollLeft,top:v.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<w.length;R++)v=w[R],v.element.scrollLeft=v.left,v.element.scrollTop=v.top}}var d0=a&&"documentMode"in document&&11>=document.documentMode,$a=null,Cu=null,Th=null,Hi=!1;function f0(v,w,R){var D=R.window===R?R.document:R.nodeType===9?R:R.ownerDocument;Hi||$a==null||$a!==Be(D)||(D=$a,"selectionStart"in D&&$i(D)?D={start:D.selectionStart,end:D.selectionEnd}:(D=(D.ownerDocument&&D.ownerDocument.defaultView||window).getSelection(),D={anchorNode:D.anchorNode,anchorOffset:D.anchorOffset,focusNode:D.focusNode,focusOffset:D.focusOffset}),Th&&Iu(Th,D)||(Th=D,D=b0(Cu,"onSelect"),0<D.length&&(w=new _h("onSelect","select",null,w,R),v.push({event:w,listeners:D}),w.target=$a)))}function uf(v,w){var R={};return R[v.toLowerCase()]=w.toLowerCase(),R["Webkit"+v]="webkit"+w,R["Moz"+v]="moz"+w,R}var kc={animationend:uf("Animation","AnimationEnd"),animationiteration:uf("Animation","AnimationIteration"),animationstart:uf("Animation","AnimationStart"),transitionend:uf("Transition","TransitionEnd")},la={},ca={};a&&(ca=document.createElement("div").style,"AnimationEvent"in window||(delete kc.animationend.animation,delete kc.animationiteration.animation,delete kc.animationstart.animation),"TransitionEvent"in window||delete kc.transitionend.transition);function za(v){if(la[v])return la[v];if(!kc[v])return v;var w=kc[v],R;for(R in w)if(w.hasOwnProperty(R)&&R in ca)return la[v]=w[R];return v}var Ih=za("animationend"),Ph=za("animationiteration"),Hv=za("animationstart"),Vv=za("transitionend"),Wv=new Map,jv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ll(v,w){Wv.set(v,w),s(w,[v])}for(var h0=0;h0<jv.length;h0++){var Ch=jv[h0],Mh=Ch.toLowerCase(),U_=Ch[0].toUpperCase()+Ch.slice(1);Ll(Mh,"on"+U_)}Ll(Ih,"onAnimationEnd"),Ll(Ph,"onAnimationIteration"),Ll(Hv,"onAnimationStart"),Ll("dblclick","onDoubleClick"),Ll("focusin","onFocus"),Ll("focusout","onBlur"),Ll(Vv,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oc));function m0(v,w,R){var D=v.type||"unknown-event";v.currentTarget=R,Pi(D,w,void 0,v),v.currentTarget=null}function df(v,w){w=(w&4)!==0;for(var R=0;R<v.length;R++){var D=v[R],W=D.event;D=D.listeners;e:{var J=void 0;if(w)for(var fe=D.length-1;0<=fe;fe--){var De=D[fe],Ke=De.instance,ht=De.currentTarget;if(De=De.listener,Ke!==J&&W.isPropagationStopped())break e;m0(W,De,ht),J=Ke}else for(fe=0;fe<D.length;fe++){if(De=D[fe],Ke=De.instance,ht=De.currentTarget,De=De.listener,Ke!==J&&W.isPropagationStopped())break e;m0(W,De,ht),J=Ke}}}if(fr)throw v=Ur,fr=!1,Ur=null,v}function kr(v,w){var R=w[Ru];R===void 0&&(R=w[Ru]=new Set);var D=v+"__bubble";R.has(D)||(y0(w,v,2,!1),R.add(D))}function g0(v,w,R){var D=0;w&&(D|=4),y0(R,v,D,w)}var Ah="_reactListening"+Math.random().toString(36).slice(2);function ff(v){if(!v[Ah]){v[Ah]=!0,r.forEach(function(R){R!=="selectionchange"&&(p0.has(R)||g0(R,!1,v),g0(R,!0,v))});var w=v.nodeType===9?v:v.ownerDocument;w===null||w[Ah]||(w[Ah]=!0,g0("selectionchange",!1,w))}}function y0(v,w,R,D){switch(M_(w)){case 1:var W=Zm;break;case 4:W=Rv;break;default:W=Jm}R=W.bind(null,w,R,v),W=void 0,!bn||w!=="touchstart"&&w!=="touchmove"&&w!=="wheel"||(W=!0),D?W!==void 0?v.addEventListener(w,R,{capture:!0,passive:W}):v.addEventListener(w,R,!0):W!==void 0?v.addEventListener(w,R,{passive:W}):v.addEventListener(w,R,!1)}function v0(v,w,R,D,W){var J=D;if((w&1)===0&&(w&2)===0&&D!==null)e:for(;;){if(D===null)return;var fe=D.tag;if(fe===3||fe===4){var De=D.stateNode.containerInfo;if(De===W||De.nodeType===8&&De.parentNode===W)break;if(fe===4)for(fe=D.return;fe!==null;){var Ke=fe.tag;if((Ke===3||Ke===4)&&(Ke=fe.stateNode.containerInfo,Ke===W||Ke.nodeType===8&&Ke.parentNode===W))return;fe=fe.return}for(;De!==null;){if(fe=Nc(De),fe===null)return;if(Ke=fe.tag,Ke===5||Ke===6){D=J=fe;continue e}De=De.parentNode}}D=D.return}_n(function(){var ht=J,Pt=he(R),Mt=[];e:{var It=Wv.get(v);if(It!==void 0){var jt=_h,Qt=v;switch(v){case"keypress":if(bu(R)===0)break e;case"keydown":case"keyup":jt=o0;break;case"focusin":Qt="focus",jt=n0;break;case"focusout":Qt="blur",jt=n0;break;case"beforeblur":case"afterblur":jt=n0;break;case"click":if(R.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":jt=Ov;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":jt=Cc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":jt=kl;break;case Ih:case Ph:case Hv:jt=A_;break;case Vv:jt=Su;break;case"scroll":jt=ef;break;case"wheel":jt=Bv;break;case"copy":case"cut":case"paste":jt=Nv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":jt=co}var sn=(w&4)!==0,Ai=!sn&&v==="scroll",ot=sn?It!==null?It+"Capture":null:It;sn=[];for(var Ye=ht,lt;Ye!==null;){lt=Ye;var Nt=lt.stateNode;if(lt.tag===5&&Nt!==null&&(lt=Nt,ot!==null&&(Nt=hn(Ye,ot),Nt!=null&&sn.push(hf(Ye,Nt,lt)))),Ai)break;Ye=Ye.return}0<sn.length&&(It=new jt(It,Qt,null,R,Pt),Mt.push({event:It,listeners:sn}))}}if((w&7)===0){e:{if(It=v==="mouseover"||v==="pointerover",jt=v==="mouseout"||v==="pointerout",It&&R!==ke&&(Qt=R.relatedTarget||R.fromElement)&&(Nc(Qt)||Qt[ho]))break e;if((jt||It)&&(It=Pt.window===Pt?Pt:(It=Pt.ownerDocument)?It.defaultView||It.parentWindow:window,jt?(Qt=R.relatedTarget||R.toElement,jt=ht,Qt=Qt?Nc(Qt):null,Qt!==null&&(Ai=at(Qt),Qt!==Ai||Qt.tag!==5&&Qt.tag!==6)&&(Qt=null)):(jt=null,Qt=ht),jt!==Qt)){if(sn=Ov,Nt="onMouseLeave",ot="onMouseEnter",Ye="mouse",(v==="pointerout"||v==="pointerover")&&(sn=co,Nt="onPointerLeave",ot="onPointerEnter",Ye="pointer"),Ai=jt==null?It:di(jt),lt=Qt==null?It:di(Qt),It=new sn(Nt,Ye+"leave",jt,R,Pt),It.target=Ai,It.relatedTarget=lt,Nt=null,Nc(Pt)===ht&&(sn=new sn(ot,Ye+"enter",Qt,R,Pt),sn.target=lt,sn.relatedTarget=Ai,Nt=sn),Ai=Nt,jt&&Qt)t:{for(sn=jt,ot=Qt,Ye=0,lt=sn;lt;lt=Mu(lt))Ye++;for(lt=0,Nt=ot;Nt;Nt=Mu(Nt))lt++;for(;0<Ye-lt;)sn=Mu(sn),Ye--;for(;0<lt-Ye;)ot=Mu(ot),lt--;for(;Ye--;){if(sn===ot||ot!==null&&sn===ot.alternate)break t;sn=Mu(sn),ot=Mu(ot)}sn=null}else sn=null;jt!==null&&$_(Mt,It,jt,sn,!1),Qt!==null&&Ai!==null&&$_(Mt,Ai,Qt,sn,!0)}}e:{if(It=ht?di(ht):window,jt=It.nodeName&&It.nodeName.toLowerCase(),jt==="select"||jt==="input"&&It.type==="file")var ln=B_;else if(l0(It))if(lf)ln=Jr;else{ln=F_;var pn=cf}else(jt=It.nodeName)&&jt.toLowerCase()==="input"&&(It.type==="checkbox"||It.type==="radio")&&(ln=zv);if(ln&&(ln=ln(v,ht))){of(Mt,ln,R,Pt);break e}pn&&pn(v,It,ht),v==="focusout"&&(pn=It._wrapperState)&&pn.controlled&&It.type==="number"&&je(It,"number",It.value)}switch(pn=ht?di(ht):window,v){case"focusin":(l0(pn)||pn.contentEditable==="true")&&($a=pn,Cu=ht,Th=null);break;case"focusout":Th=Cu=$a=null;break;case"mousedown":Hi=!0;break;case"contextmenu":case"mouseup":case"dragend":Hi=!1,f0(Mt,R,Pt);break;case"selectionchange":if(d0)break;case"keydown":case"keyup":f0(Mt,R,Pt)}var mn;if(Ps)e:{switch(v){case"compositionstart":var xn="onCompositionStart";break e;case"compositionend":xn="onCompositionEnd";break e;case"compositionupdate":xn="onCompositionUpdate";break e}xn=void 0}else Ac?$v(v,R)&&(xn="onCompositionEnd"):v==="keydown"&&R.keyCode===229&&(xn="onCompositionStart");xn&&(rf&&R.locale!=="ko"&&(Ac||xn!=="onCompositionStart"?xn==="onCompositionEnd"&&Ac&&(mn=wh()):(oa=Pt,kv="value"in oa?oa.value:oa.textContent,Ac=!0)),pn=b0(ht,xn),0<pn.length&&(xn=new Lv(xn,v,null,R,Pt),Mt.push({event:xn,listeners:pn}),mn?xn.data=mn:(mn=a0(R),mn!==null&&(xn.data=mn)))),(mn=qr?L_(v,R):Sh(v,R))&&(ht=b0(ht,"onBeforeInput"),0<ht.length&&(Pt=new Lv("onBeforeInput","beforeinput",null,R,Pt),Mt.push({event:Pt,listeners:ht}),Pt.data=mn))}df(Mt,w)})}function hf(v,w,R){return{instance:v,listener:w,currentTarget:R}}function b0(v,w){for(var R=w+"Capture",D=[];v!==null;){var W=v,J=W.stateNode;W.tag===5&&J!==null&&(W=J,J=hn(v,R),J!=null&&D.unshift(hf(v,J,W)),J=hn(v,w),J!=null&&D.push(hf(v,J,W))),v=v.return}return D}function Mu(v){if(v===null)return null;do v=v.return;while(v&&v.tag!==5);return v||null}function $_(v,w,R,D,W){for(var J=w._reactName,fe=[];R!==null&&R!==D;){var De=R,Ke=De.alternate,ht=De.stateNode;if(Ke!==null&&Ke===D)break;De.tag===5&&ht!==null&&(De=ht,W?(Ke=hn(R,J),Ke!=null&&fe.unshift(hf(R,Ke,De))):W||(Ke=hn(R,J),Ke!=null&&fe.push(hf(R,Ke,De)))),R=R.return}fe.length!==0&&v.push({event:w,listeners:fe})}var eC=/\r\n?/g,z_=/\u0000|\uFFFD/g;function qv(v){return(typeof v=="string"?v:""+v).replace(eC,`
`).replace(z_,"")}function Rh(v,w,R){if(w=qv(w),qv(v)!==w&&R)throw Error(n(425))}function kh(){}var pf=null,Kv=null;function Gv(v,w){return v==="textarea"||v==="noscript"||typeof w.children=="string"||typeof w.children=="number"||typeof w.dangerouslySetInnerHTML=="object"&&w.dangerouslySetInnerHTML!==null&&w.dangerouslySetInnerHTML.__html!=null}var Xv=typeof setTimeout=="function"?setTimeout:void 0,Yv=typeof clearTimeout=="function"?clearTimeout:void 0,x0=typeof Promise=="function"?Promise:void 0,tC=typeof queueMicrotask=="function"?queueMicrotask:typeof x0<"u"?function(v){return x0.resolve(null).then(v).catch(H_)}:Xv;function H_(v){setTimeout(function(){throw v})}function w0(v,w){var R=w,D=0;do{var W=R.nextSibling;if(v.removeChild(R),W&&W.nodeType===8)if(R=W.data,R==="/$"){if(D===0){v.removeChild(W),xh(w);return}D--}else R!=="$"&&R!=="$?"&&R!=="$!"||D++;R=W}while(R);xh(w)}function Dl(v){for(;v!=null;v=v.nextSibling){var w=v.nodeType;if(w===1||w===3)break;if(w===8){if(w=v.data,w==="$"||w==="$!"||w==="$?")break;if(w==="/$")return null}}return v}function Zv(v){v=v.previousSibling;for(var w=0;v;){if(v.nodeType===8){var R=v.data;if(R==="$"||R==="$!"||R==="$?"){if(w===0)return v;w--}else R==="/$"&&w++}v=v.previousSibling}return null}var Au=Math.random().toString(36).slice(2),Mi="__reactFiber$"+Au,mf="__reactProps$"+Au,ho="__reactContainer$"+Au,Ru="__reactEvents$"+Au,_0="__reactListeners$"+Au,S0="__reactHandles$"+Au;function Nc(v){var w=v[Mi];if(w)return w;for(var R=v.parentNode;R;){if(w=R[ho]||R[Mi]){if(R=w.alternate,w.child!==null||R!==null&&R.child!==null)for(v=Zv(v);v!==null;){if(R=v[Mi])return R;v=Zv(v)}return w}v=R,R=v.parentNode}return null}function Bl(v){return v=v[Mi]||v[ho],!v||v.tag!==5&&v.tag!==6&&v.tag!==13&&v.tag!==3?null:v}function di(v){if(v.tag===5||v.tag===6)return v.stateNode;throw Error(n(33))}function E0(v){return v[mf]||null}var Jv=[],Vi=-1;function ri(v){return{current:v}}function Or(v){0>Vi||(v.current=Jv[Vi],Jv[Vi]=null,Vi--)}function Pr(v,w){Vi++,Jv[Vi]=v.current,v.current=w}var Fl={},ts=ri(Fl),Cs=ri(!1),Ul=Fl;function ku(v,w){var R=v.type.contextTypes;if(!R)return Fl;var D=v.stateNode;if(D&&D.__reactInternalMemoizedUnmaskedChildContext===w)return D.__reactInternalMemoizedMaskedChildContext;var W={},J;for(J in R)W[J]=w[J];return D&&(v=v.stateNode,v.__reactInternalMemoizedUnmaskedChildContext=w,v.__reactInternalMemoizedMaskedChildContext=W),W}function ps(v){return v=v.childContextTypes,v!=null}function Oh(){Or(Cs),Or(ts)}function Qv(v,w,R){if(ts.current!==Fl)throw Error(n(168));Pr(ts,w),Pr(Cs,R)}function Nh(v,w,R){var D=v.stateNode;if(w=w.childContextTypes,typeof D.getChildContext!="function")return R;D=D.getChildContext();for(var W in D)if(!(W in w))throw Error(n(108,le(v)||"Unknown",W));return j({},R,D)}function Ou(v){return v=(v=v.stateNode)&&v.__reactInternalMemoizedMergedChildContext||Fl,Ul=ts.current,Pr(ts,v),Pr(Cs,Cs.current),!0}function eb(v,w,R){var D=v.stateNode;if(!D)throw Error(n(169));R?(v=Nh(v,w,Ul),D.__reactInternalMemoizedMergedChildContext=v,Or(Cs),Or(ts),Pr(ts,v)):Or(Cs),Pr(Cs,R)}var ua=null,Lh=!1,T0=!1;function Dh(v){ua===null?ua=[v]:ua.push(v)}function V_(v){Lh=!0,Dh(v)}function Ha(){if(!T0&&ua!==null){T0=!0;var v=0,w=Gn;try{var R=ua;for(Gn=1;v<R.length;v++){var D=R[v];do D=D(!0);while(D!==null)}ua=null,Lh=!1}catch(W){throw ua!==null&&(ua=ua.slice(v+1)),Tn(Ct,Ha),W}finally{Gn=w,T0=!1}}return null}var Nu=[],js=0,I0=null,P0=0,Ms=[],Wi=0,Lu=null,Lt=1,Bo="";function $l(v,w){Nu[js++]=P0,Nu[js++]=I0,I0=v,P0=w}function tb(v,w,R){Ms[Wi++]=Lt,Ms[Wi++]=Bo,Ms[Wi++]=Lu,Lu=v;var D=Lt;v=Bo;var W=32-yn(D)-1;D&=~(1<<W),R+=1;var J=32-yn(w)+W;if(30<J){var fe=W-W%5;J=(D&(1<<fe)-1).toString(32),D>>=fe,W-=fe,Lt=1<<32-yn(w)+W|R<<W|D,Bo=J+v}else Lt=1<<J|R<<W|D,Bo=v}function nb(v){v.return!==null&&($l(v,1),tb(v,1,0))}function zl(v){for(;v===I0;)I0=Nu[--js],Nu[js]=null,P0=Nu[--js],Nu[js]=null;for(;v===Lu;)Lu=Ms[--Wi],Ms[Wi]=null,Bo=Ms[--Wi],Ms[Wi]=null,Lt=Ms[--Wi],Ms[Wi]=null}var ns=null,As=null,$r=!1,Fo=null;function rb(v,w){var R=Ka(5,null,null,0);R.elementType="DELETED",R.stateNode=w,R.return=v,w=v.deletions,w===null?(v.deletions=[R],v.flags|=16):w.push(R)}function ib(v,w){switch(v.tag){case 5:var R=v.type;return w=w.nodeType!==1||R.toLowerCase()!==w.nodeName.toLowerCase()?null:w,w!==null?(v.stateNode=w,ns=v,As=Dl(w.firstChild),!0):!1;case 6:return w=v.pendingProps===""||w.nodeType!==3?null:w,w!==null?(v.stateNode=w,ns=v,As=null,!0):!1;case 13:return w=w.nodeType!==8?null:w,w!==null?(R=Lu!==null?{id:Lt,overflow:Bo}:null,v.memoizedState={dehydrated:w,treeContext:R,retryLane:1073741824},R=Ka(18,null,null,0),R.stateNode=w,R.return=v,v.child=R,ns=v,As=null,!0):!1;default:return!1}}function C0(v){return(v.mode&1)!==0&&(v.flags&128)===0}function M0(v){if($r){var w=As;if(w){var R=w;if(!ib(v,w)){if(C0(v))throw Error(n(418));w=Dl(R.nextSibling);var D=ns;w&&ib(v,w)?rb(D,R):(v.flags=v.flags&-4097|2,$r=!1,ns=v)}}else{if(C0(v))throw Error(n(418));v.flags=v.flags&-4097|2,$r=!1,ns=v}}}function A0(v){for(v=v.return;v!==null&&v.tag!==5&&v.tag!==3&&v.tag!==13;)v=v.return;ns=v}function gf(v){if(v!==ns)return!1;if(!$r)return A0(v),$r=!0,!1;var w;if((w=v.tag!==3)&&!(w=v.tag!==5)&&(w=v.type,w=w!=="head"&&w!=="body"&&!Gv(v.type,v.memoizedProps)),w&&(w=As)){if(C0(v))throw sb(),Error(n(418));for(;w;)rb(v,w),w=Dl(w.nextSibling)}if(A0(v),v.tag===13){if(v=v.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));e:{for(v=v.nextSibling,w=0;v;){if(v.nodeType===8){var R=v.data;if(R==="/$"){if(w===0){As=Dl(v.nextSibling);break e}w--}else R!=="$"&&R!=="$!"&&R!=="$?"||w++}v=v.nextSibling}As=null}}else As=ns?Dl(v.stateNode.nextSibling):null;return!0}function sb(){for(var v=As;v;)v=Dl(v.nextSibling)}function Lc(){As=ns=null,$r=!1}function yf(v){Fo===null?Fo=[v]:Fo.push(v)}var nC=S.ReactCurrentBatchConfig;function Bh(v,w,R){if(v=R.ref,v!==null&&typeof v!="function"&&typeof v!="object"){if(R._owner){if(R=R._owner,R){if(R.tag!==1)throw Error(n(309));var D=R.stateNode}if(!D)throw Error(n(147,v));var W=D,J=""+v;return w!==null&&w.ref!==null&&typeof w.ref=="function"&&w.ref._stringRef===J?w.ref:(w=function(fe){var De=W.refs;fe===null?delete De[J]:De[J]=fe},w._stringRef=J,w)}if(typeof v!="string")throw Error(n(284));if(!R._owner)throw Error(n(290,v))}return v}function Fh(v,w){throw v=Object.prototype.toString.call(w),Error(n(31,v==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":v))}function ob(v){var w=v._init;return w(v._payload)}function ab(v){function w(ot,Ye){if(v){var lt=ot.deletions;lt===null?(ot.deletions=[Ye],ot.flags|=16):lt.push(Ye)}}function R(ot,Ye){if(!v)return null;for(;Ye!==null;)w(ot,Ye),Ye=Ye.sibling;return null}function D(ot,Ye){for(ot=new Map;Ye!==null;)Ye.key!==null?ot.set(Ye.key,Ye):ot.set(Ye.index,Ye),Ye=Ye.sibling;return ot}function W(ot,Ye){return ot=Cf(ot,Ye),ot.index=0,ot.sibling=null,ot}function J(ot,Ye,lt){return ot.index=lt,v?(lt=ot.alternate,lt!==null?(lt=lt.index,lt<Ye?(ot.flags|=2,Ye):lt):(ot.flags|=2,Ye)):(ot.flags|=1048576,Ye)}function fe(ot){return v&&ot.alternate===null&&(ot.flags|=2),ot}function De(ot,Ye,lt,Nt){return Ye===null||Ye.tag!==6?(Ye=wC(lt,ot.mode,Nt),Ye.return=ot,Ye):(Ye=W(Ye,lt),Ye.return=ot,Ye)}function Ke(ot,Ye,lt,Nt){var ln=lt.type;return ln===I?Pt(ot,Ye,lt.props.children,Nt,lt.key):Ye!==null&&(Ye.elementType===ln||typeof ln=="object"&&ln!==null&&ln.$$typeof===q&&ob(ln)===Ye.type)?(Nt=W(Ye,lt.props),Nt.ref=Bh(ot,Ye,lt),Nt.return=ot,Nt):(Nt=fS(lt.type,lt.key,lt.props,null,ot.mode,Nt),Nt.ref=Bh(ot,Ye,lt),Nt.return=ot,Nt)}function ht(ot,Ye,lt,Nt){return Ye===null||Ye.tag!==4||Ye.stateNode.containerInfo!==lt.containerInfo||Ye.stateNode.implementation!==lt.implementation?(Ye=_C(lt,ot.mode,Nt),Ye.return=ot,Ye):(Ye=W(Ye,lt.children||[]),Ye.return=ot,Ye)}function Pt(ot,Ye,lt,Nt,ln){return Ye===null||Ye.tag!==7?(Ye=tp(lt,ot.mode,Nt,ln),Ye.return=ot,Ye):(Ye=W(Ye,lt),Ye.return=ot,Ye)}function Mt(ot,Ye,lt){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number")return Ye=wC(""+Ye,ot.mode,lt),Ye.return=ot,Ye;if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case P:return lt=fS(Ye.type,Ye.key,Ye.props,null,ot.mode,lt),lt.ref=Bh(ot,null,Ye),lt.return=ot,lt;case _:return Ye=_C(Ye,ot.mode,lt),Ye.return=ot,Ye;case q:var Nt=Ye._init;return Mt(ot,Nt(Ye._payload),lt)}if(te(Ye)||G(Ye))return Ye=tp(Ye,ot.mode,lt,null),Ye.return=ot,Ye;Fh(ot,Ye)}return null}function It(ot,Ye,lt,Nt){var ln=Ye!==null?Ye.key:null;if(typeof lt=="string"&&lt!==""||typeof lt=="number")return ln!==null?null:De(ot,Ye,""+lt,Nt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case P:return lt.key===ln?Ke(ot,Ye,lt,Nt):null;case _:return lt.key===ln?ht(ot,Ye,lt,Nt):null;case q:return ln=lt._init,It(ot,Ye,ln(lt._payload),Nt)}if(te(lt)||G(lt))return ln!==null?null:Pt(ot,Ye,lt,Nt,null);Fh(ot,lt)}return null}function jt(ot,Ye,lt,Nt,ln){if(typeof Nt=="string"&&Nt!==""||typeof Nt=="number")return ot=ot.get(lt)||null,De(Ye,ot,""+Nt,ln);if(typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case P:return ot=ot.get(Nt.key===null?lt:Nt.key)||null,Ke(Ye,ot,Nt,ln);case _:return ot=ot.get(Nt.key===null?lt:Nt.key)||null,ht(Ye,ot,Nt,ln);case q:var pn=Nt._init;return jt(ot,Ye,lt,pn(Nt._payload),ln)}if(te(Nt)||G(Nt))return ot=ot.get(lt)||null,Pt(Ye,ot,Nt,ln,null);Fh(Ye,Nt)}return null}function Qt(ot,Ye,lt,Nt){for(var ln=null,pn=null,mn=Ye,xn=Ye=0,vs=null;mn!==null&&xn<lt.length;xn++){mn.index>xn?(vs=mn,mn=null):vs=mn.sibling;var vr=It(ot,mn,lt[xn],Nt);if(vr===null){mn===null&&(mn=vs);break}v&&mn&&vr.alternate===null&&w(ot,mn),Ye=J(vr,Ye,xn),pn===null?ln=vr:pn.sibling=vr,pn=vr,mn=vs}if(xn===lt.length)return R(ot,mn),$r&&$l(ot,xn),ln;if(mn===null){for(;xn<lt.length;xn++)mn=Mt(ot,lt[xn],Nt),mn!==null&&(Ye=J(mn,Ye,xn),pn===null?ln=mn:pn.sibling=mn,pn=mn);return $r&&$l(ot,xn),ln}for(mn=D(ot,mn);xn<lt.length;xn++)vs=jt(mn,ot,xn,lt[xn],Nt),vs!==null&&(v&&vs.alternate!==null&&mn.delete(vs.key===null?xn:vs.key),Ye=J(vs,Ye,xn),pn===null?ln=vs:pn.sibling=vs,pn=vs);return v&&mn.forEach(function(Mf){return w(ot,Mf)}),$r&&$l(ot,xn),ln}function sn(ot,Ye,lt,Nt){var ln=G(lt);if(typeof ln!="function")throw Error(n(150));if(lt=ln.call(lt),lt==null)throw Error(n(151));for(var pn=ln=null,mn=Ye,xn=Ye=0,vs=null,vr=lt.next();mn!==null&&!vr.done;xn++,vr=lt.next()){mn.index>xn?(vs=mn,mn=null):vs=mn.sibling;var Mf=It(ot,mn,vr.value,Nt);if(Mf===null){mn===null&&(mn=vs);break}v&&mn&&Mf.alternate===null&&w(ot,mn),Ye=J(Mf,Ye,xn),pn===null?ln=Mf:pn.sibling=Mf,pn=Mf,mn=vs}if(vr.done)return R(ot,mn),$r&&$l(ot,xn),ln;if(mn===null){for(;!vr.done;xn++,vr=lt.next())vr=Mt(ot,vr.value,Nt),vr!==null&&(Ye=J(vr,Ye,xn),pn===null?ln=vr:pn.sibling=vr,pn=vr);return $r&&$l(ot,xn),ln}for(mn=D(ot,mn);!vr.done;xn++,vr=lt.next())vr=jt(mn,ot,xn,vr.value,Nt),vr!==null&&(v&&vr.alternate!==null&&mn.delete(vr.key===null?xn:vr.key),Ye=J(vr,Ye,xn),pn===null?ln=vr:pn.sibling=vr,pn=vr);return v&&mn.forEach(function(SZ){return w(ot,SZ)}),$r&&$l(ot,xn),ln}function Ai(ot,Ye,lt,Nt){if(typeof lt=="object"&&lt!==null&&lt.type===I&&lt.key===null&&(lt=lt.props.children),typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case P:e:{for(var ln=lt.key,pn=Ye;pn!==null;){if(pn.key===ln){if(ln=lt.type,ln===I){if(pn.tag===7){R(ot,pn.sibling),Ye=W(pn,lt.props.children),Ye.return=ot,ot=Ye;break e}}else if(pn.elementType===ln||typeof ln=="object"&&ln!==null&&ln.$$typeof===q&&ob(ln)===pn.type){R(ot,pn.sibling),Ye=W(pn,lt.props),Ye.ref=Bh(ot,pn,lt),Ye.return=ot,ot=Ye;break e}R(ot,pn);break}else w(ot,pn);pn=pn.sibling}lt.type===I?(Ye=tp(lt.props.children,ot.mode,Nt,lt.key),Ye.return=ot,ot=Ye):(Nt=fS(lt.type,lt.key,lt.props,null,ot.mode,Nt),Nt.ref=Bh(ot,Ye,lt),Nt.return=ot,ot=Nt)}return fe(ot);case _:e:{for(pn=lt.key;Ye!==null;){if(Ye.key===pn)if(Ye.tag===4&&Ye.stateNode.containerInfo===lt.containerInfo&&Ye.stateNode.implementation===lt.implementation){R(ot,Ye.sibling),Ye=W(Ye,lt.children||[]),Ye.return=ot,ot=Ye;break e}else{R(ot,Ye);break}else w(ot,Ye);Ye=Ye.sibling}Ye=_C(lt,ot.mode,Nt),Ye.return=ot,ot=Ye}return fe(ot);case q:return pn=lt._init,Ai(ot,Ye,pn(lt._payload),Nt)}if(te(lt))return Qt(ot,Ye,lt,Nt);if(G(lt))return sn(ot,Ye,lt,Nt);Fh(ot,lt)}return typeof lt=="string"&&lt!==""||typeof lt=="number"?(lt=""+lt,Ye!==null&&Ye.tag===6?(R(ot,Ye.sibling),Ye=W(Ye,lt),Ye.return=ot,ot=Ye):(R(ot,Ye),Ye=wC(lt,ot.mode,Nt),Ye.return=ot,ot=Ye),fe(ot)):R(ot,Ye)}return Ai}var Du=ab(!0),Uh=ab(!1),Bu=ri(null),Fu=null,Hl=null,vf=null;function Uu(){vf=Hl=Fu=null}function $h(v){var w=Bu.current;Or(Bu),v._currentValue=w}function zh(v,w,R){for(;v!==null;){var D=v.alternate;if((v.childLanes&w)!==w?(v.childLanes|=w,D!==null&&(D.childLanes|=w)):D!==null&&(D.childLanes&w)!==w&&(D.childLanes|=w),v===R)break;v=v.return}}function Dc(v,w){Fu=v,vf=Hl=null,v=v.dependencies,v!==null&&v.firstContext!==null&&((v.lanes&w)!==0&&(Ln=!0),v.firstContext=null)}function po(v){var w=v._currentValue;if(vf!==v)if(v={context:v,memoizedValue:w,next:null},Hl===null){if(Fu===null)throw Error(n(308));Hl=v,Fu.dependencies={lanes:0,firstContext:v}}else Hl=Hl.next=v;return w}var Vl=null;function lb(v){Vl===null?Vl=[v]:Vl.push(v)}function Hh(v,w,R,D){var W=w.interleaved;return W===null?(R.next=R,lb(w)):(R.next=W.next,W.next=R),w.interleaved=R,da(v,D)}function da(v,w){v.lanes|=w;var R=v.alternate;for(R!==null&&(R.lanes|=w),R=v,v=v.return;v!==null;)v.childLanes|=w,R=v.alternate,R!==null&&(R.childLanes|=w),R=v,v=v.return;return R.tag===3?R.stateNode:null}var Sr=!1;function An(v){v.updateQueue={baseState:v.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fi(v,w){v=v.updateQueue,w.updateQueue===v&&(w.updateQueue={baseState:v.baseState,firstBaseUpdate:v.firstBaseUpdate,lastBaseUpdate:v.lastBaseUpdate,shared:v.shared,effects:v.effects})}function Er(v,w){return{eventTime:v,lane:w,tag:0,payload:null,callback:null,next:null}}function Kr(v,w,R){var D=v.updateQueue;if(D===null)return null;if(D=D.shared,(hr&2)!==0){var W=D.pending;return W===null?w.next=w:(w.next=W.next,W.next=w),D.pending=w,da(v,R)}return W=D.interleaved,W===null?(w.next=w,lb(D)):(w.next=W.next,W.next=w),D.interleaved=w,da(v,R)}function ms(v,w,R){if(w=w.updateQueue,w!==null&&(w=w.shared,(R&4194240)!==0)){var D=w.lanes;D&=v.pendingLanes,R|=D,w.lanes=R,ui(v,R)}}function $u(v,w){var R=v.updateQueue,D=v.alternate;if(D!==null&&(D=D.updateQueue,R===D)){var W=null,J=null;if(R=R.firstBaseUpdate,R!==null){do{var fe={eventTime:R.eventTime,lane:R.lane,tag:R.tag,payload:R.payload,callback:R.callback,next:null};J===null?W=J=fe:J=J.next=fe,R=R.next}while(R!==null);J===null?W=J=w:J=J.next=w}else W=J=w;R={baseState:D.baseState,firstBaseUpdate:W,lastBaseUpdate:J,shared:D.shared,effects:D.effects},v.updateQueue=R;return}v=R.lastBaseUpdate,v===null?R.firstBaseUpdate=w:v.next=w,R.lastBaseUpdate=w}function ii(v,w,R,D){var W=v.updateQueue;Sr=!1;var J=W.firstBaseUpdate,fe=W.lastBaseUpdate,De=W.shared.pending;if(De!==null){W.shared.pending=null;var Ke=De,ht=Ke.next;Ke.next=null,fe===null?J=ht:fe.next=ht,fe=Ke;var Pt=v.alternate;Pt!==null&&(Pt=Pt.updateQueue,De=Pt.lastBaseUpdate,De!==fe&&(De===null?Pt.firstBaseUpdate=ht:De.next=ht,Pt.lastBaseUpdate=Ke))}if(J!==null){var Mt=W.baseState;fe=0,Pt=ht=Ke=null,De=J;do{var It=De.lane,jt=De.eventTime;if((D&It)===It){Pt!==null&&(Pt=Pt.next={eventTime:jt,lane:0,tag:De.tag,payload:De.payload,callback:De.callback,next:null});e:{var Qt=v,sn=De;switch(It=w,jt=R,sn.tag){case 1:if(Qt=sn.payload,typeof Qt=="function"){Mt=Qt.call(jt,Mt,It);break e}Mt=Qt;break e;case 3:Qt.flags=Qt.flags&-65537|128;case 0:if(Qt=sn.payload,It=typeof Qt=="function"?Qt.call(jt,Mt,It):Qt,It==null)break e;Mt=j({},Mt,It);break e;case 2:Sr=!0}}De.callback!==null&&De.lane!==0&&(v.flags|=64,It=W.effects,It===null?W.effects=[De]:It.push(De))}else jt={eventTime:jt,lane:It,tag:De.tag,payload:De.payload,callback:De.callback,next:null},Pt===null?(ht=Pt=jt,Ke=Mt):Pt=Pt.next=jt,fe|=It;if(De=De.next,De===null){if(De=W.shared.pending,De===null)break;It=De,De=It.next,It.next=null,W.lastBaseUpdate=It,W.shared.pending=null}}while(!0);if(Pt===null&&(Ke=Mt),W.baseState=Ke,W.firstBaseUpdate=ht,W.lastBaseUpdate=Pt,w=W.shared.interleaved,w!==null){W=w;do fe|=W.lane,W=W.next;while(W!==w)}else J===null&&(W.shared.lanes=0);Zh|=fe,v.lanes=fe,v.memoizedState=Mt}}function bf(v,w,R){if(v=w.effects,w.effects=null,v!==null)for(w=0;w<v.length;w++){var D=v[w],W=D.callback;if(W!==null){if(D.callback=null,D=R,typeof W!="function")throw Error(n(191,W));W.call(D)}}}var Va={},mo=ri(Va),zu=ri(Va),Wl=ri(Va);function bi(v){if(v===Va)throw Error(n(174));return v}function Vh(v,w){switch(Pr(Wl,w),Pr(zu,v),Pr(mo,Va),v=w.nodeType,v){case 9:case 11:w=(w=w.documentElement)?w.namespaceURI:Ve(null,"");break;default:v=v===8?w.parentNode:w,w=v.namespaceURI||null,v=v.tagName,w=Ve(w,v)}Or(mo),Pr(mo,w)}function Bc(){Or(mo),Or(zu),Or(Wl)}function Hu(v){bi(Wl.current);var w=bi(mo.current),R=Ve(w,v.type);w!==R&&(Pr(zu,v),Pr(mo,R))}function xf(v){zu.current===v&&(Or(mo),Or(zu))}var zr=ri(0);function fa(v){for(var w=v;w!==null;){if(w.tag===13){var R=w.memoizedState;if(R!==null&&(R=R.dehydrated,R===null||R.data==="$?"||R.data==="$!"))return w}else if(w.tag===19&&w.memoizedProps.revealOrder!==void 0){if((w.flags&128)!==0)return w}else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===v)break;for(;w.sibling===null;){if(w.return===null||w.return===v)return null;w=w.return}w.sibling.return=w.return,w=w.sibling}return null}var wf=[];function Wa(){for(var v=0;v<wf.length;v++)wf[v]._workInProgressVersionPrimary=null;wf.length=0}var Vu=S.ReactCurrentDispatcher,Wu=S.ReactCurrentBatchConfig,jl=0,Nr=null,si=null,ar=null,ha=!1,gs=!1,Fc=0,qs=0;function rs(){throw Error(n(321))}function Wh(v,w){if(w===null)return!1;for(var R=0;R<w.length&&R<v.length;R++)if(!uo(v[R],w[R]))return!1;return!0}function jh(v,w,R,D,W,J){if(jl=J,Nr=w,w.memoizedState=null,w.updateQueue=null,w.lanes=0,Vu.current=v===null||v.memoizedState===null?Y_:Z_,v=R(D,W),gs){J=0;do{if(gs=!1,Fc=0,25<=J)throw Error(n(301));J+=1,ar=si=null,w.updateQueue=null,Vu.current=J_,v=R(D,W)}while(gs)}if(Vu.current=B0,w=si!==null&&si.next!==null,jl=0,ar=si=Nr=null,ha=!1,w)throw Error(n(300));return v}function cb(){var v=Fc!==0;return Fc=0,v}function is(){var v={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ar===null?Nr.memoizedState=ar=v:ar=ar.next=v,ar}function go(){if(si===null){var v=Nr.alternate;v=v!==null?v.memoizedState:null}else v=si.next;var w=ar===null?Nr.memoizedState:ar.next;if(w!==null)ar=w,si=v;else{if(v===null)throw Error(n(310));si=v,v={memoizedState:si.memoizedState,baseState:si.baseState,baseQueue:si.baseQueue,queue:si.queue,next:null},ar===null?Nr.memoizedState=ar=v:ar=ar.next=v}return ar}function _f(v,w){return typeof w=="function"?w(v):w}function qh(v){var w=go(),R=w.queue;if(R===null)throw Error(n(311));R.lastRenderedReducer=v;var D=si,W=D.baseQueue,J=R.pending;if(J!==null){if(W!==null){var fe=W.next;W.next=J.next,J.next=fe}D.baseQueue=W=J,R.pending=null}if(W!==null){J=W.next,D=D.baseState;var De=fe=null,Ke=null,ht=J;do{var Pt=ht.lane;if((jl&Pt)===Pt)Ke!==null&&(Ke=Ke.next={lane:0,action:ht.action,hasEagerState:ht.hasEagerState,eagerState:ht.eagerState,next:null}),D=ht.hasEagerState?ht.eagerState:v(D,ht.action);else{var Mt={lane:Pt,action:ht.action,hasEagerState:ht.hasEagerState,eagerState:ht.eagerState,next:null};Ke===null?(De=Ke=Mt,fe=D):Ke=Ke.next=Mt,Nr.lanes|=Pt,Zh|=Pt}ht=ht.next}while(ht!==null&&ht!==J);Ke===null?fe=D:Ke.next=De,uo(D,w.memoizedState)||(Ln=!0),w.memoizedState=D,w.baseState=fe,w.baseQueue=Ke,R.lastRenderedState=D}if(v=R.interleaved,v!==null){W=v;do J=W.lane,Nr.lanes|=J,Zh|=J,W=W.next;while(W!==v)}else W===null&&(R.lanes=0);return[w.memoizedState,R.dispatch]}function ql(v){var w=go(),R=w.queue;if(R===null)throw Error(n(311));R.lastRenderedReducer=v;var D=R.dispatch,W=R.pending,J=w.memoizedState;if(W!==null){R.pending=null;var fe=W=W.next;do J=v(J,fe.action),fe=fe.next;while(fe!==W);uo(J,w.memoizedState)||(Ln=!0),w.memoizedState=J,w.baseQueue===null&&(w.baseState=J),R.lastRenderedState=J}return[J,D]}function ub(){}function db(v,w){var R=Nr,D=go(),W=w(),J=!uo(D.memoizedState,W);if(J&&(D.memoizedState=W,Ln=!0),D=D.queue,pb(W_.bind(null,R,D,v),[v]),D.getSnapshot!==w||J||ar!==null&&ar.memoizedState.tag&1){if(R.flags|=2048,pa(9,Kh.bind(null,R,D,W,w),void 0,null),ys===null)throw Error(n(349));(jl&30)!==0||R0(R,w,W)}return W}function R0(v,w,R){v.flags|=16384,v={getSnapshot:w,value:R},w=Nr.updateQueue,w===null?(w={lastEffect:null,stores:null},Nr.updateQueue=w,w.stores=[v]):(R=w.stores,R===null?w.stores=[v]:R.push(v))}function Kh(v,w,R,D){w.value=R,w.getSnapshot=D,j_(w)&&fb(v)}function W_(v,w,R){return R(function(){j_(w)&&fb(v)})}function j_(v){var w=v.getSnapshot;v=v.value;try{var R=w();return!uo(v,R)}catch{return!0}}function fb(v){var w=da(v,1);w!==null&&Zl(w,v,1,-1)}function hb(v){var w=is();return typeof v=="function"&&(v=v()),w.memoizedState=w.baseState=v,v={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_f,lastRenderedState:v},w.queue=v,v=v.dispatch=ju.bind(null,Nr,v),[w.memoizedState,v]}function pa(v,w,R,D){return v={tag:v,create:w,destroy:R,deps:D,next:null},w=Nr.updateQueue,w===null?(w={lastEffect:null,stores:null},Nr.updateQueue=w,w.lastEffect=v.next=v):(R=w.lastEffect,R===null?w.lastEffect=v.next=v:(D=R.next,R.next=v,v.next=D,w.lastEffect=v)),v}function q_(){return go().memoizedState}function ja(v,w,R,D){var W=is();Nr.flags|=v,W.memoizedState=pa(1|w,R,void 0,D===void 0?null:D)}function Gh(v,w,R,D){var W=go();D=D===void 0?null:D;var J=void 0;if(si!==null){var fe=si.memoizedState;if(J=fe.destroy,D!==null&&Wh(D,fe.deps)){W.memoizedState=pa(w,R,J,D);return}}Nr.flags|=v,W.memoizedState=pa(1|w,R,J,D)}function Rs(v,w){return ja(8390656,8,v,w)}function pb(v,w){return Gh(2048,8,v,w)}function mb(v,w){return Gh(4,2,v,w)}function K_(v,w){return Gh(4,4,v,w)}function G_(v,w){if(typeof w=="function")return v=v(),w(v),function(){w(null)};if(w!=null)return v=v(),w.current=v,function(){w.current=null}}function gb(v,w,R){return R=R!=null?R.concat([v]):null,Gh(4,4,G_.bind(null,w,v),R)}function k0(){}function X_(v,w){var R=go();w=w===void 0?null:w;var D=R.memoizedState;return D!==null&&w!==null&&Wh(w,D[1])?D[0]:(R.memoizedState=[v,w],v)}function yo(v,w){var R=go();w=w===void 0?null:w;var D=R.memoizedState;return D!==null&&w!==null&&Wh(w,D[1])?D[0]:(v=v(),R.memoizedState=[v,w],v)}function O0(v,w,R){return(jl&21)===0?(v.baseState&&(v.baseState=!1,Ln=!0),v.memoizedState=R):(uo(R,w)||(R=Kn(),Nr.lanes|=R,Zh|=R,v.baseState=!0),w)}function rC(v,w){var R=Gn;Gn=R!==0&&4>R?R:4,v(!0);var D=Wu.transition;Wu.transition={};try{v(!1),w()}finally{Gn=R,Wu.transition=D}}function Kl(){return go().memoizedState}function N0(v,w,R){var D=If(v);if(R={lane:D,action:R,hasEagerState:!1,eagerState:null,next:null},Xh(v))L0(w,R);else if(R=Hh(v,w,R,D),R!==null){var W=bo();Zl(R,v,D,W),D0(R,w,D)}}function ju(v,w,R){var D=If(v),W={lane:D,action:R,hasEagerState:!1,eagerState:null,next:null};if(Xh(v))L0(w,W);else{var J=v.alternate;if(v.lanes===0&&(J===null||J.lanes===0)&&(J=w.lastRenderedReducer,J!==null))try{var fe=w.lastRenderedState,De=J(fe,R);if(W.hasEagerState=!0,W.eagerState=De,uo(De,fe)){var Ke=w.interleaved;Ke===null?(W.next=W,lb(w)):(W.next=Ke.next,Ke.next=W),w.interleaved=W;return}}catch{}finally{}R=Hh(v,w,W,D),R!==null&&(W=bo(),Zl(R,v,D,W),D0(R,w,D))}}function Xh(v){var w=v.alternate;return v===Nr||w!==null&&w===Nr}function L0(v,w){gs=ha=!0;var R=v.pending;R===null?w.next=w:(w.next=R.next,R.next=w),v.pending=w}function D0(v,w,R){if((R&4194240)!==0){var D=w.lanes;D&=v.pendingLanes,R|=D,w.lanes=R,ui(v,R)}}var B0={readContext:po,useCallback:rs,useContext:rs,useEffect:rs,useImperativeHandle:rs,useInsertionEffect:rs,useLayoutEffect:rs,useMemo:rs,useReducer:rs,useRef:rs,useState:rs,useDebugValue:rs,useDeferredValue:rs,useTransition:rs,useMutableSource:rs,useSyncExternalStore:rs,useId:rs,unstable_isNewReconciler:!1},Y_={readContext:po,useCallback:function(v,w){return is().memoizedState=[v,w===void 0?null:w],v},useContext:po,useEffect:Rs,useImperativeHandle:function(v,w,R){return R=R!=null?R.concat([v]):null,ja(4194308,4,G_.bind(null,w,v),R)},useLayoutEffect:function(v,w){return ja(4194308,4,v,w)},useInsertionEffect:function(v,w){return ja(4,2,v,w)},useMemo:function(v,w){var R=is();return w=w===void 0?null:w,v=v(),R.memoizedState=[v,w],v},useReducer:function(v,w,R){var D=is();return w=R!==void 0?R(w):w,D.memoizedState=D.baseState=w,v={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:v,lastRenderedState:w},D.queue=v,v=v.dispatch=N0.bind(null,Nr,v),[D.memoizedState,v]},useRef:function(v){var w=is();return v={current:v},w.memoizedState=v},useState:hb,useDebugValue:k0,useDeferredValue:function(v){return is().memoizedState=v},useTransition:function(){var v=hb(!1),w=v[0];return v=rC.bind(null,v[1]),is().memoizedState=v,[w,v]},useMutableSource:function(){},useSyncExternalStore:function(v,w,R){var D=Nr,W=is();if($r){if(R===void 0)throw Error(n(407));R=R()}else{if(R=w(),ys===null)throw Error(n(349));(jl&30)!==0||R0(D,w,R)}W.memoizedState=R;var J={value:R,getSnapshot:w};return W.queue=J,Rs(W_.bind(null,D,J,v),[v]),D.flags|=2048,pa(9,Kh.bind(null,D,J,R,w),void 0,null),R},useId:function(){var v=is(),w=ys.identifierPrefix;if($r){var R=Bo,D=Lt;R=(D&~(1<<32-yn(D)-1)).toString(32)+R,w=":"+w+"R"+R,R=Fc++,0<R&&(w+="H"+R.toString(32)),w+=":"}else R=qs++,w=":"+w+"r"+R.toString(32)+":";return v.memoizedState=w},unstable_isNewReconciler:!1},Z_={readContext:po,useCallback:X_,useContext:po,useEffect:pb,useImperativeHandle:gb,useInsertionEffect:mb,useLayoutEffect:K_,useMemo:yo,useReducer:qh,useRef:q_,useState:function(){return qh(_f)},useDebugValue:k0,useDeferredValue:function(v){var w=go();return O0(w,si.memoizedState,v)},useTransition:function(){var v=qh(_f)[0],w=go().memoizedState;return[v,w]},useMutableSource:ub,useSyncExternalStore:db,useId:Kl,unstable_isNewReconciler:!1},J_={readContext:po,useCallback:X_,useContext:po,useEffect:pb,useImperativeHandle:gb,useInsertionEffect:mb,useLayoutEffect:K_,useMemo:yo,useReducer:ql,useRef:q_,useState:function(){return ql(_f)},useDebugValue:k0,useDeferredValue:function(v){var w=go();return si===null?w.memoizedState=v:O0(w,si.memoizedState,v)},useTransition:function(){var v=ql(_f)[0],w=go().memoizedState;return[v,w]},useMutableSource:ub,useSyncExternalStore:db,useId:Kl,unstable_isNewReconciler:!1};function Uo(v,w){if(v&&v.defaultProps){w=j({},w),v=v.defaultProps;for(var R in v)w[R]===void 0&&(w[R]=v[R]);return w}return w}function Yh(v,w,R,D){w=v.memoizedState,R=R(D,w),R=R==null?w:j({},w,R),v.memoizedState=R,v.lanes===0&&(v.updateQueue.baseState=R)}var F0={isMounted:function(v){return(v=v._reactInternals)?at(v)===v:!1},enqueueSetState:function(v,w,R){v=v._reactInternals;var D=bo(),W=If(v),J=Er(D,W);J.payload=w,R!=null&&(J.callback=R),w=Kr(v,J,W),w!==null&&(Zl(w,v,W,D),ms(w,v,W))},enqueueReplaceState:function(v,w,R){v=v._reactInternals;var D=bo(),W=If(v),J=Er(D,W);J.tag=1,J.payload=w,R!=null&&(J.callback=R),w=Kr(v,J,W),w!==null&&(Zl(w,v,W,D),ms(w,v,W))},enqueueForceUpdate:function(v,w){v=v._reactInternals;var R=bo(),D=If(v),W=Er(R,D);W.tag=2,w!=null&&(W.callback=w),w=Kr(v,W,D),w!==null&&(Zl(w,v,D,R),ms(w,v,D))}};function Q_(v,w,R,D,W,J,fe){return v=v.stateNode,typeof v.shouldComponentUpdate=="function"?v.shouldComponentUpdate(D,J,fe):w.prototype&&w.prototype.isPureReactComponent?!Iu(R,D)||!Iu(W,J):!0}function E(v,w,R){var D=!1,W=Fl,J=w.contextType;return typeof J=="object"&&J!==null?J=po(J):(W=ps(w)?Ul:ts.current,D=w.contextTypes,J=(D=D!=null)?ku(v,W):Fl),w=new w(R,J),v.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=F0,v.stateNode=w,w._reactInternals=v,D&&(v=v.stateNode,v.__reactInternalMemoizedUnmaskedChildContext=W,v.__reactInternalMemoizedMaskedChildContext=J),w}function T(v,w,R,D){v=w.state,typeof w.componentWillReceiveProps=="function"&&w.componentWillReceiveProps(R,D),typeof w.UNSAFE_componentWillReceiveProps=="function"&&w.UNSAFE_componentWillReceiveProps(R,D),w.state!==v&&F0.enqueueReplaceState(w,w.state,null)}function L(v,w,R,D){var W=v.stateNode;W.props=R,W.state=v.memoizedState,W.refs={},An(v);var J=w.contextType;typeof J=="object"&&J!==null?W.context=po(J):(J=ps(w)?Ul:ts.current,W.context=ku(v,J)),W.state=v.memoizedState,J=w.getDerivedStateFromProps,typeof J=="function"&&(Yh(v,w,J,R),W.state=v.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof W.getSnapshotBeforeUpdate=="function"||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(w=W.state,typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount(),w!==W.state&&F0.enqueueReplaceState(W,W.state,null),ii(v,R,W,D),W.state=v.memoizedState),typeof W.componentDidMount=="function"&&(v.flags|=4194308)}function F(v,w){try{var R="",D=w;do R+=pe(D),D=D.return;while(D);var W=R}catch(J){W=`
Error generating stack: `+J.message+`
`+J.stack}return{value:v,source:w,stack:W,digest:null}}function Y(v,w,R){return{value:v,source:null,stack:R??null,digest:w??null}}function re(v,w){try{console.error(w.value)}catch(R){setTimeout(function(){throw R})}}var Le=typeof WeakMap=="function"?WeakMap:Map;function Ze(v,w,R){R=Er(-1,R),R.tag=3,R.payload={element:null};var D=w.value;return R.callback=function(){oS||(oS=!0,hC=D),re(v,w)},R}function yt(v,w,R){R=Er(-1,R),R.tag=3;var D=v.type.getDerivedStateFromError;if(typeof D=="function"){var W=w.value;R.payload=function(){return D(W)},R.callback=function(){re(v,w)}}var J=v.stateNode;return J!==null&&typeof J.componentDidCatch=="function"&&(R.callback=function(){re(v,w),typeof D!="function"&&(Ef===null?Ef=new Set([this]):Ef.add(this));var fe=w.stack;this.componentDidCatch(w.value,{componentStack:fe!==null?fe:""})}),R}function Rt(v,w,R){var D=v.pingCache;if(D===null){D=v.pingCache=new Le;var W=new Set;D.set(w,W)}else W=D.get(w),W===void 0&&(W=new Set,D.set(w,W));W.has(R)||(W.add(R),v=fZ.bind(null,v,w,R),w.then(v,v))}function Xt(v){do{var w;if((w=v.tag===13)&&(w=v.memoizedState,w=w!==null?w.dehydrated!==null:!0),w)return v;v=v.return}while(v!==null);return null}function Sn(v,w,R,D,W){return(v.mode&1)===0?(v===w?v.flags|=65536:(v.flags|=128,R.flags|=131072,R.flags&=-52805,R.tag===1&&(R.alternate===null?R.tag=17:(w=Er(-1,1),w.tag=2,Kr(R,w,1))),R.lanes|=1),v):(v.flags|=65536,v.lanes=W,v)}var fn=S.ReactCurrentOwner,Ln=!1;function $t(v,w,R,D){w.child=v===null?Uh(w,null,R,D):Du(w,v.child,R,D)}function ss(v,w,R,D,W){R=R.render;var J=w.ref;return Dc(w,W),D=jh(v,w,R,D,J,W),R=cb(),v!==null&&!Ln?(w.updateQueue=v.updateQueue,w.flags&=-2053,v.lanes&=~W,qu(v,w,W)):($r&&R&&nb(w),w.flags|=1,$t(v,w,D,W),w.child)}function vo(v,w,R,D,W){if(v===null){var J=R.type;return typeof J=="function"&&!xC(J)&&J.defaultProps===void 0&&R.compare===null&&R.defaultProps===void 0?(w.tag=15,w.type=J,ct(v,w,J,D,W)):(v=fS(R.type,null,D,w,w.mode,W),v.ref=w.ref,v.return=w,w.child=v)}if(J=v.child,(v.lanes&W)===0){var fe=J.memoizedProps;if(R=R.compare,R=R!==null?R:Iu,R(fe,D)&&v.ref===w.ref)return qu(v,w,W)}return w.flags|=1,v=Cf(J,D),v.ref=w.ref,v.return=w,w.child=v}function ct(v,w,R,D,W){if(v!==null){var J=v.memoizedProps;if(Iu(J,D)&&v.ref===w.ref)if(Ln=!1,w.pendingProps=D=J,(v.lanes&W)!==0)(v.flags&131072)!==0&&(Ln=!0);else return w.lanes=v.lanes,qu(v,w,W)}return Ft(v,w,R,D,W)}function nt(v,w,R){var D=w.pendingProps,W=D.children,J=v!==null?v.memoizedState:null;if(D.mode==="hidden")if((w.mode&1)===0)w.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pr($0,ma),ma|=R;else{if((R&1073741824)===0)return v=J!==null?J.baseLanes|R:R,w.lanes=w.childLanes=1073741824,w.memoizedState={baseLanes:v,cachePool:null,transitions:null},w.updateQueue=null,Pr($0,ma),ma|=v,null;w.memoizedState={baseLanes:0,cachePool:null,transitions:null},D=J!==null?J.baseLanes:R,Pr($0,ma),ma|=D}else J!==null?(D=J.baseLanes|R,w.memoizedState=null):D=R,Pr($0,ma),ma|=D;return $t(v,w,W,R),w.child}function mt(v,w){var R=w.ref;(v===null&&R!==null||v!==null&&v.ref!==R)&&(w.flags|=512,w.flags|=2097152)}function Ft(v,w,R,D,W){var J=ps(R)?Ul:ts.current;return J=ku(w,J),Dc(w,W),R=jh(v,w,R,D,J,W),D=cb(),v!==null&&!Ln?(w.updateQueue=v.updateQueue,w.flags&=-2053,v.lanes&=~W,qu(v,w,W)):($r&&D&&nb(w),w.flags|=1,$t(v,w,R,W),w.child)}function on(v,w,R,D,W){if(ps(R)){var J=!0;Ou(w)}else J=!1;if(Dc(w,W),w.stateNode===null)tS(v,w),E(w,R,D),L(w,R,D,W),D=!0;else if(v===null){var fe=w.stateNode,De=w.memoizedProps;fe.props=De;var Ke=fe.context,ht=R.contextType;typeof ht=="object"&&ht!==null?ht=po(ht):(ht=ps(R)?Ul:ts.current,ht=ku(w,ht));var Pt=R.getDerivedStateFromProps,Mt=typeof Pt=="function"||typeof fe.getSnapshotBeforeUpdate=="function";Mt||typeof fe.UNSAFE_componentWillReceiveProps!="function"&&typeof fe.componentWillReceiveProps!="function"||(De!==D||Ke!==ht)&&T(w,fe,D,ht),Sr=!1;var It=w.memoizedState;fe.state=It,ii(w,D,fe,W),Ke=w.memoizedState,De!==D||It!==Ke||Cs.current||Sr?(typeof Pt=="function"&&(Yh(w,R,Pt,D),Ke=w.memoizedState),(De=Sr||Q_(w,R,De,D,It,Ke,ht))?(Mt||typeof fe.UNSAFE_componentWillMount!="function"&&typeof fe.componentWillMount!="function"||(typeof fe.componentWillMount=="function"&&fe.componentWillMount(),typeof fe.UNSAFE_componentWillMount=="function"&&fe.UNSAFE_componentWillMount()),typeof fe.componentDidMount=="function"&&(w.flags|=4194308)):(typeof fe.componentDidMount=="function"&&(w.flags|=4194308),w.memoizedProps=D,w.memoizedState=Ke),fe.props=D,fe.state=Ke,fe.context=ht,D=De):(typeof fe.componentDidMount=="function"&&(w.flags|=4194308),D=!1)}else{fe=w.stateNode,fi(v,w),De=w.memoizedProps,ht=w.type===w.elementType?De:Uo(w.type,De),fe.props=ht,Mt=w.pendingProps,It=fe.context,Ke=R.contextType,typeof Ke=="object"&&Ke!==null?Ke=po(Ke):(Ke=ps(R)?Ul:ts.current,Ke=ku(w,Ke));var jt=R.getDerivedStateFromProps;(Pt=typeof jt=="function"||typeof fe.getSnapshotBeforeUpdate=="function")||typeof fe.UNSAFE_componentWillReceiveProps!="function"&&typeof fe.componentWillReceiveProps!="function"||(De!==Mt||It!==Ke)&&T(w,fe,D,Ke),Sr=!1,It=w.memoizedState,fe.state=It,ii(w,D,fe,W);var Qt=w.memoizedState;De!==Mt||It!==Qt||Cs.current||Sr?(typeof jt=="function"&&(Yh(w,R,jt,D),Qt=w.memoizedState),(ht=Sr||Q_(w,R,ht,D,It,Qt,Ke)||!1)?(Pt||typeof fe.UNSAFE_componentWillUpdate!="function"&&typeof fe.componentWillUpdate!="function"||(typeof fe.componentWillUpdate=="function"&&fe.componentWillUpdate(D,Qt,Ke),typeof fe.UNSAFE_componentWillUpdate=="function"&&fe.UNSAFE_componentWillUpdate(D,Qt,Ke)),typeof fe.componentDidUpdate=="function"&&(w.flags|=4),typeof fe.getSnapshotBeforeUpdate=="function"&&(w.flags|=1024)):(typeof fe.componentDidUpdate!="function"||De===v.memoizedProps&&It===v.memoizedState||(w.flags|=4),typeof fe.getSnapshotBeforeUpdate!="function"||De===v.memoizedProps&&It===v.memoizedState||(w.flags|=1024),w.memoizedProps=D,w.memoizedState=Qt),fe.props=D,fe.state=Qt,fe.context=Ke,D=ht):(typeof fe.componentDidUpdate!="function"||De===v.memoizedProps&&It===v.memoizedState||(w.flags|=4),typeof fe.getSnapshotBeforeUpdate!="function"||De===v.memoizedProps&&It===v.memoizedState||(w.flags|=1024),D=!1)}return Pn(v,w,R,D,J,W)}function Pn(v,w,R,D,W,J){mt(v,w);var fe=(w.flags&128)!==0;if(!D&&!fe)return W&&eb(w,R,!1),qu(v,w,J);D=w.stateNode,fn.current=w;var De=fe&&typeof R.getDerivedStateFromError!="function"?null:D.render();return w.flags|=1,v!==null&&fe?(w.child=Du(w,v.child,null,J),w.child=Du(w,null,De,J)):$t(v,w,De,J),w.memoizedState=D.state,W&&eb(w,R,!0),w.child}function En(v){var w=v.stateNode;w.pendingContext?Qv(v,w.pendingContext,w.pendingContext!==w.context):w.context&&Qv(v,w.context,!1),Vh(v,w.containerInfo)}function tr(v,w,R,D,W){return Lc(),yf(W),w.flags|=256,$t(v,w,R,D),w.child}var xi={dehydrated:null,treeContext:null,retryLane:0};function Qn(v){return{baseLanes:v,cachePool:null,transitions:null}}function Gl(v,w,R){var D=w.pendingProps,W=zr.current,J=!1,fe=(w.flags&128)!==0,De;if((De=fe)||(De=v!==null&&v.memoizedState===null?!1:(W&2)!==0),De?(J=!0,w.flags&=-129):(v===null||v.memoizedState!==null)&&(W|=1),Pr(zr,W&1),v===null)return M0(w),v=w.memoizedState,v!==null&&(v=v.dehydrated,v!==null)?((w.mode&1)===0?w.lanes=1:v.data==="$!"?w.lanes=8:w.lanes=1073741824,null):(fe=D.children,v=D.fallback,J?(D=w.mode,J=w.child,fe={mode:"hidden",children:fe},(D&1)===0&&J!==null?(J.childLanes=0,J.pendingProps=fe):J=hS(fe,D,0,null),v=tp(v,D,R,null),J.return=w,v.return=w,J.sibling=v,w.child=J,w.child.memoizedState=Qn(R),w.memoizedState=xi,v):yb(w,fe));if(W=v.memoizedState,W!==null&&(De=W.dehydrated,De!==null))return eZ(v,w,fe,D,De,W,R);if(J){J=D.fallback,fe=w.mode,W=v.child,De=W.sibling;var Ke={mode:"hidden",children:D.children};return(fe&1)===0&&w.child!==W?(D=w.child,D.childLanes=0,D.pendingProps=Ke,w.deletions=null):(D=Cf(W,Ke),D.subtreeFlags=W.subtreeFlags&14680064),De!==null?J=Cf(De,J):(J=tp(J,fe,R,null),J.flags|=2),J.return=w,D.return=w,D.sibling=J,w.child=D,D=J,J=w.child,fe=v.child.memoizedState,fe=fe===null?Qn(R):{baseLanes:fe.baseLanes|R,cachePool:null,transitions:fe.transitions},J.memoizedState=fe,J.childLanes=v.childLanes&~R,w.memoizedState=xi,D}return J=v.child,v=J.sibling,D=Cf(J,{mode:"visible",children:D.children}),(w.mode&1)===0&&(D.lanes=R),D.return=w,D.sibling=null,v!==null&&(R=w.deletions,R===null?(w.deletions=[v],w.flags|=16):R.push(v)),w.child=D,w.memoizedState=null,D}function yb(v,w){return w=hS({mode:"visible",children:w},v.mode,0,null),w.return=v,v.child=w}function eS(v,w,R,D){return D!==null&&yf(D),Du(w,v.child,null,R),v=yb(w,w.pendingProps.children),v.flags|=2,w.memoizedState=null,v}function eZ(v,w,R,D,W,J,fe){if(R)return w.flags&256?(w.flags&=-257,D=Y(Error(n(422))),eS(v,w,fe,D)):w.memoizedState!==null?(w.child=v.child,w.flags|=128,null):(J=D.fallback,W=w.mode,D=hS({mode:"visible",children:D.children},W,0,null),J=tp(J,W,fe,null),J.flags|=2,D.return=w,J.return=w,D.sibling=J,w.child=D,(w.mode&1)!==0&&Du(w,v.child,null,fe),w.child.memoizedState=Qn(fe),w.memoizedState=xi,J);if((w.mode&1)===0)return eS(v,w,fe,null);if(W.data==="$!"){if(D=W.nextSibling&&W.nextSibling.dataset,D)var De=D.dgst;return D=De,J=Error(n(419)),D=Y(J,D,void 0),eS(v,w,fe,D)}if(De=(fe&v.childLanes)!==0,Ln||De){if(D=ys,D!==null){switch(fe&-fe){case 4:W=2;break;case 16:W=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:W=32;break;case 536870912:W=268435456;break;default:W=0}W=(W&(D.suspendedLanes|fe))!==0?0:W,W!==0&&W!==J.retryLane&&(J.retryLane=W,da(v,W),Zl(D,v,W,-1))}return bC(),D=Y(Error(n(421))),eS(v,w,fe,D)}return W.data==="$?"?(w.flags|=128,w.child=v.child,w=hZ.bind(null,v),W._reactRetry=w,null):(v=J.treeContext,As=Dl(W.nextSibling),ns=w,$r=!0,Fo=null,v!==null&&(Ms[Wi++]=Lt,Ms[Wi++]=Bo,Ms[Wi++]=Lu,Lt=v.id,Bo=v.overflow,Lu=w),w=yb(w,D.children),w.flags|=4096,w)}function X4(v,w,R){v.lanes|=w;var D=v.alternate;D!==null&&(D.lanes|=w),zh(v.return,w,R)}function iC(v,w,R,D,W){var J=v.memoizedState;J===null?v.memoizedState={isBackwards:w,rendering:null,renderingStartTime:0,last:D,tail:R,tailMode:W}:(J.isBackwards=w,J.rendering=null,J.renderingStartTime=0,J.last=D,J.tail=R,J.tailMode=W)}function Y4(v,w,R){var D=w.pendingProps,W=D.revealOrder,J=D.tail;if($t(v,w,D.children,R),D=zr.current,(D&2)!==0)D=D&1|2,w.flags|=128;else{if(v!==null&&(v.flags&128)!==0)e:for(v=w.child;v!==null;){if(v.tag===13)v.memoizedState!==null&&X4(v,R,w);else if(v.tag===19)X4(v,R,w);else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===w)break e;for(;v.sibling===null;){if(v.return===null||v.return===w)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}D&=1}if(Pr(zr,D),(w.mode&1)===0)w.memoizedState=null;else switch(W){case"forwards":for(R=w.child,W=null;R!==null;)v=R.alternate,v!==null&&fa(v)===null&&(W=R),R=R.sibling;R=W,R===null?(W=w.child,w.child=null):(W=R.sibling,R.sibling=null),iC(w,!1,W,R,J);break;case"backwards":for(R=null,W=w.child,w.child=null;W!==null;){if(v=W.alternate,v!==null&&fa(v)===null){w.child=W;break}v=W.sibling,W.sibling=R,R=W,W=v}iC(w,!0,R,null,J);break;case"together":iC(w,!1,null,null,void 0);break;default:w.memoizedState=null}return w.child}function tS(v,w){(w.mode&1)===0&&v!==null&&(v.alternate=null,w.alternate=null,w.flags|=2)}function qu(v,w,R){if(v!==null&&(w.dependencies=v.dependencies),Zh|=w.lanes,(R&w.childLanes)===0)return null;if(v!==null&&w.child!==v.child)throw Error(n(153));if(w.child!==null){for(v=w.child,R=Cf(v,v.pendingProps),w.child=R,R.return=w;v.sibling!==null;)v=v.sibling,R=R.sibling=Cf(v,v.pendingProps),R.return=w;R.sibling=null}return w.child}function tZ(v,w,R){switch(w.tag){case 3:En(w),Lc();break;case 5:Hu(w);break;case 1:ps(w.type)&&Ou(w);break;case 4:Vh(w,w.stateNode.containerInfo);break;case 10:var D=w.type._context,W=w.memoizedProps.value;Pr(Bu,D._currentValue),D._currentValue=W;break;case 13:if(D=w.memoizedState,D!==null)return D.dehydrated!==null?(Pr(zr,zr.current&1),w.flags|=128,null):(R&w.child.childLanes)!==0?Gl(v,w,R):(Pr(zr,zr.current&1),v=qu(v,w,R),v!==null?v.sibling:null);Pr(zr,zr.current&1);break;case 19:if(D=(R&w.childLanes)!==0,(v.flags&128)!==0){if(D)return Y4(v,w,R);w.flags|=128}if(W=w.memoizedState,W!==null&&(W.rendering=null,W.tail=null,W.lastEffect=null),Pr(zr,zr.current),D)break;return null;case 22:case 23:return w.lanes=0,nt(v,w,R)}return qu(v,w,R)}var Z4,sC,J4,Q4;Z4=function(v,w){for(var R=w.child;R!==null;){if(R.tag===5||R.tag===6)v.appendChild(R.stateNode);else if(R.tag!==4&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===w)break;for(;R.sibling===null;){if(R.return===null||R.return===w)return;R=R.return}R.sibling.return=R.return,R=R.sibling}},sC=function(){},J4=function(v,w,R,D){var W=v.memoizedProps;if(W!==D){v=w.stateNode,bi(mo.current);var J=null;switch(R){case"input":W=ce(v,W),D=ce(v,D),J=[];break;case"select":W=j({},W,{value:void 0}),D=j({},D,{value:void 0}),J=[];break;case"textarea":W=X(v,W),D=X(v,D),J=[];break;default:typeof W.onClick!="function"&&typeof D.onClick=="function"&&(v.onclick=kh)}de(R,D);var fe;R=null;for(ht in W)if(!D.hasOwnProperty(ht)&&W.hasOwnProperty(ht)&&W[ht]!=null)if(ht==="style"){var De=W[ht];for(fe in De)De.hasOwnProperty(fe)&&(R||(R={}),R[fe]="")}else ht!=="dangerouslySetInnerHTML"&&ht!=="children"&&ht!=="suppressContentEditableWarning"&&ht!=="suppressHydrationWarning"&&ht!=="autoFocus"&&(i.hasOwnProperty(ht)?J||(J=[]):(J=J||[]).push(ht,null));for(ht in D){var Ke=D[ht];if(De=W!=null?W[ht]:void 0,D.hasOwnProperty(ht)&&Ke!==De&&(Ke!=null||De!=null))if(ht==="style")if(De){for(fe in De)!De.hasOwnProperty(fe)||Ke&&Ke.hasOwnProperty(fe)||(R||(R={}),R[fe]="");for(fe in Ke)Ke.hasOwnProperty(fe)&&De[fe]!==Ke[fe]&&(R||(R={}),R[fe]=Ke[fe])}else R||(J||(J=[]),J.push(ht,R)),R=Ke;else ht==="dangerouslySetInnerHTML"?(Ke=Ke?Ke.__html:void 0,De=De?De.__html:void 0,Ke!=null&&De!==Ke&&(J=J||[]).push(ht,Ke)):ht==="children"?typeof Ke!="string"&&typeof Ke!="number"||(J=J||[]).push(ht,""+Ke):ht!=="suppressContentEditableWarning"&&ht!=="suppressHydrationWarning"&&(i.hasOwnProperty(ht)?(Ke!=null&&ht==="onScroll"&&kr("scroll",v),J||De===Ke||(J=[])):(J=J||[]).push(ht,Ke))}R&&(J=J||[]).push("style",R);var ht=J;(w.updateQueue=ht)&&(w.flags|=4)}},Q4=function(v,w,R,D){R!==D&&(w.flags|=4)};function vb(v,w){if(!$r)switch(v.tailMode){case"hidden":w=v.tail;for(var R=null;w!==null;)w.alternate!==null&&(R=w),w=w.sibling;R===null?v.tail=null:R.sibling=null;break;case"collapsed":R=v.tail;for(var D=null;R!==null;)R.alternate!==null&&(D=R),R=R.sibling;D===null?w||v.tail===null?v.tail=null:v.tail.sibling=null:D.sibling=null}}function Ks(v){var w=v.alternate!==null&&v.alternate.child===v.child,R=0,D=0;if(w)for(var W=v.child;W!==null;)R|=W.lanes|W.childLanes,D|=W.subtreeFlags&14680064,D|=W.flags&14680064,W.return=v,W=W.sibling;else for(W=v.child;W!==null;)R|=W.lanes|W.childLanes,D|=W.subtreeFlags,D|=W.flags,W.return=v,W=W.sibling;return v.subtreeFlags|=D,v.childLanes=R,w}function nZ(v,w,R){var D=w.pendingProps;switch(zl(w),w.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(w),null;case 1:return ps(w.type)&&Oh(),Ks(w),null;case 3:return D=w.stateNode,Bc(),Or(Cs),Or(ts),Wa(),D.pendingContext&&(D.context=D.pendingContext,D.pendingContext=null),(v===null||v.child===null)&&(gf(w)?w.flags|=4:v===null||v.memoizedState.isDehydrated&&(w.flags&256)===0||(w.flags|=1024,Fo!==null&&(gC(Fo),Fo=null))),sC(v,w),Ks(w),null;case 5:xf(w);var W=bi(Wl.current);if(R=w.type,v!==null&&w.stateNode!=null)J4(v,w,R,D,W),v.ref!==w.ref&&(w.flags|=512,w.flags|=2097152);else{if(!D){if(w.stateNode===null)throw Error(n(166));return Ks(w),null}if(v=bi(mo.current),gf(w)){D=w.stateNode,R=w.type;var J=w.memoizedProps;switch(D[Mi]=w,D[mf]=J,v=(w.mode&1)!==0,R){case"dialog":kr("cancel",D),kr("close",D);break;case"iframe":case"object":case"embed":kr("load",D);break;case"video":case"audio":for(W=0;W<Oc.length;W++)kr(Oc[W],D);break;case"source":kr("error",D);break;case"img":case"image":case"link":kr("error",D),kr("load",D);break;case"details":kr("toggle",D);break;case"input":Ge(D,J),kr("invalid",D);break;case"select":D._wrapperState={wasMultiple:!!J.multiple},kr("invalid",D);break;case"textarea":we(D,J),kr("invalid",D)}de(R,J),W=null;for(var fe in J)if(J.hasOwnProperty(fe)){var De=J[fe];fe==="children"?typeof De=="string"?D.textContent!==De&&(J.suppressHydrationWarning!==!0&&Rh(D.textContent,De,v),W=["children",De]):typeof De=="number"&&D.textContent!==""+De&&(J.suppressHydrationWarning!==!0&&Rh(D.textContent,De,v),W=["children",""+De]):i.hasOwnProperty(fe)&&De!=null&&fe==="onScroll"&&kr("scroll",D)}switch(R){case"input":Ae(D),Re(D,J,!0);break;case"textarea":Ae(D),We(D);break;case"select":case"option":break;default:typeof J.onClick=="function"&&(D.onclick=kh)}D=W,w.updateQueue=D,D!==null&&(w.flags|=4)}else{fe=W.nodeType===9?W:W.ownerDocument,v==="http://www.w3.org/1999/xhtml"&&(v=xe(R)),v==="http://www.w3.org/1999/xhtml"?R==="script"?(v=fe.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild)):typeof D.is=="string"?v=fe.createElement(R,{is:D.is}):(v=fe.createElement(R),R==="select"&&(fe=v,D.multiple?fe.multiple=!0:D.size&&(fe.size=D.size))):v=fe.createElementNS(v,R),v[Mi]=w,v[mf]=D,Z4(v,w,!1,!1),w.stateNode=v;e:{switch(fe=Te(R,D),R){case"dialog":kr("cancel",v),kr("close",v),W=D;break;case"iframe":case"object":case"embed":kr("load",v),W=D;break;case"video":case"audio":for(W=0;W<Oc.length;W++)kr(Oc[W],v);W=D;break;case"source":kr("error",v),W=D;break;case"img":case"image":case"link":kr("error",v),kr("load",v),W=D;break;case"details":kr("toggle",v),W=D;break;case"input":Ge(v,D),W=ce(v,D),kr("invalid",v);break;case"option":W=D;break;case"select":v._wrapperState={wasMultiple:!!D.multiple},W=j({},D,{value:void 0}),kr("invalid",v);break;case"textarea":we(v,D),W=X(v,D),kr("invalid",v);break;default:W=D}de(R,W),De=W;for(J in De)if(De.hasOwnProperty(J)){var Ke=De[J];J==="style"?oe(v,Ke):J==="dangerouslySetInnerHTML"?(Ke=Ke?Ke.__html:void 0,Ke!=null&&ge(v,Ke)):J==="children"?typeof Ke=="string"?(R!=="textarea"||Ke!=="")&&Se(v,Ke):typeof Ke=="number"&&Se(v,""+Ke):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(i.hasOwnProperty(J)?Ke!=null&&J==="onScroll"&&kr("scroll",v):Ke!=null&&x(v,J,Ke,fe))}switch(R){case"input":Ae(v),Re(v,D,!1);break;case"textarea":Ae(v),We(v);break;case"option":D.value!=null&&v.setAttribute("value",""+ae(D.value));break;case"select":v.multiple=!!D.multiple,J=D.value,J!=null?ee(v,!!D.multiple,J,!1):D.defaultValue!=null&&ee(v,!!D.multiple,D.defaultValue,!0);break;default:typeof W.onClick=="function"&&(v.onclick=kh)}switch(R){case"button":case"input":case"select":case"textarea":D=!!D.autoFocus;break e;case"img":D=!0;break e;default:D=!1}}D&&(w.flags|=4)}w.ref!==null&&(w.flags|=512,w.flags|=2097152)}return Ks(w),null;case 6:if(v&&w.stateNode!=null)Q4(v,w,v.memoizedProps,D);else{if(typeof D!="string"&&w.stateNode===null)throw Error(n(166));if(R=bi(Wl.current),bi(mo.current),gf(w)){if(D=w.stateNode,R=w.memoizedProps,D[Mi]=w,(J=D.nodeValue!==R)&&(v=ns,v!==null))switch(v.tag){case 3:Rh(D.nodeValue,R,(v.mode&1)!==0);break;case 5:v.memoizedProps.suppressHydrationWarning!==!0&&Rh(D.nodeValue,R,(v.mode&1)!==0)}J&&(w.flags|=4)}else D=(R.nodeType===9?R:R.ownerDocument).createTextNode(D),D[Mi]=w,w.stateNode=D}return Ks(w),null;case 13:if(Or(zr),D=w.memoizedState,v===null||v.memoizedState!==null&&v.memoizedState.dehydrated!==null){if($r&&As!==null&&(w.mode&1)!==0&&(w.flags&128)===0)sb(),Lc(),w.flags|=98560,J=!1;else if(J=gf(w),D!==null&&D.dehydrated!==null){if(v===null){if(!J)throw Error(n(318));if(J=w.memoizedState,J=J!==null?J.dehydrated:null,!J)throw Error(n(317));J[Mi]=w}else Lc(),(w.flags&128)===0&&(w.memoizedState=null),w.flags|=4;Ks(w),J=!1}else Fo!==null&&(gC(Fo),Fo=null),J=!0;if(!J)return w.flags&65536?w:null}return(w.flags&128)!==0?(w.lanes=R,w):(D=D!==null,D!==(v!==null&&v.memoizedState!==null)&&D&&(w.child.flags|=8192,(w.mode&1)!==0&&(v===null||(zr.current&1)!==0?os===0&&(os=3):bC())),w.updateQueue!==null&&(w.flags|=4),Ks(w),null);case 4:return Bc(),sC(v,w),v===null&&ff(w.stateNode.containerInfo),Ks(w),null;case 10:return $h(w.type._context),Ks(w),null;case 17:return ps(w.type)&&Oh(),Ks(w),null;case 19:if(Or(zr),J=w.memoizedState,J===null)return Ks(w),null;if(D=(w.flags&128)!==0,fe=J.rendering,fe===null)if(D)vb(J,!1);else{if(os!==0||v!==null&&(v.flags&128)!==0)for(v=w.child;v!==null;){if(fe=fa(v),fe!==null){for(w.flags|=128,vb(J,!1),D=fe.updateQueue,D!==null&&(w.updateQueue=D,w.flags|=4),w.subtreeFlags=0,D=R,R=w.child;R!==null;)J=R,v=D,J.flags&=14680066,fe=J.alternate,fe===null?(J.childLanes=0,J.lanes=v,J.child=null,J.subtreeFlags=0,J.memoizedProps=null,J.memoizedState=null,J.updateQueue=null,J.dependencies=null,J.stateNode=null):(J.childLanes=fe.childLanes,J.lanes=fe.lanes,J.child=fe.child,J.subtreeFlags=0,J.deletions=null,J.memoizedProps=fe.memoizedProps,J.memoizedState=fe.memoizedState,J.updateQueue=fe.updateQueue,J.type=fe.type,v=fe.dependencies,J.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext}),R=R.sibling;return Pr(zr,zr.current&1|2),w.child}v=v.sibling}J.tail!==null&&st()>z0&&(w.flags|=128,D=!0,vb(J,!1),w.lanes=4194304)}else{if(!D)if(v=fa(fe),v!==null){if(w.flags|=128,D=!0,R=v.updateQueue,R!==null&&(w.updateQueue=R,w.flags|=4),vb(J,!0),J.tail===null&&J.tailMode==="hidden"&&!fe.alternate&&!$r)return Ks(w),null}else 2*st()-J.renderingStartTime>z0&&R!==1073741824&&(w.flags|=128,D=!0,vb(J,!1),w.lanes=4194304);J.isBackwards?(fe.sibling=w.child,w.child=fe):(R=J.last,R!==null?R.sibling=fe:w.child=fe,J.last=fe)}return J.tail!==null?(w=J.tail,J.rendering=w,J.tail=w.sibling,J.renderingStartTime=st(),w.sibling=null,R=zr.current,Pr(zr,D?R&1|2:R&1),w):(Ks(w),null);case 22:case 23:return vC(),D=w.memoizedState!==null,v!==null&&v.memoizedState!==null!==D&&(w.flags|=8192),D&&(w.mode&1)!==0?(ma&1073741824)!==0&&(Ks(w),w.subtreeFlags&6&&(w.flags|=8192)):Ks(w),null;case 24:return null;case 25:return null}throw Error(n(156,w.tag))}function rZ(v,w){switch(zl(w),w.tag){case 1:return ps(w.type)&&Oh(),v=w.flags,v&65536?(w.flags=v&-65537|128,w):null;case 3:return Bc(),Or(Cs),Or(ts),Wa(),v=w.flags,(v&65536)!==0&&(v&128)===0?(w.flags=v&-65537|128,w):null;case 5:return xf(w),null;case 13:if(Or(zr),v=w.memoizedState,v!==null&&v.dehydrated!==null){if(w.alternate===null)throw Error(n(340));Lc()}return v=w.flags,v&65536?(w.flags=v&-65537|128,w):null;case 19:return Or(zr),null;case 4:return Bc(),null;case 10:return $h(w.type._context),null;case 22:case 23:return vC(),null;case 24:return null;default:return null}}var nS=!1,Gs=!1,iZ=typeof WeakSet=="function"?WeakSet:Set,Jt=null;function U0(v,w){var R=v.ref;if(R!==null)if(typeof R=="function")try{R(null)}catch(D){wi(v,w,D)}else R.current=null}function oC(v,w,R){try{R()}catch(D){wi(v,w,D)}}var eN=!1;function sZ(v,w){if(pf=Ro,v=Qr(),$i(v)){if("selectionStart"in v)var R={start:v.selectionStart,end:v.selectionEnd};else e:{R=(R=v.ownerDocument)&&R.defaultView||window;var D=R.getSelection&&R.getSelection();if(D&&D.rangeCount!==0){R=D.anchorNode;var W=D.anchorOffset,J=D.focusNode;D=D.focusOffset;try{R.nodeType,J.nodeType}catch{R=null;break e}var fe=0,De=-1,Ke=-1,ht=0,Pt=0,Mt=v,It=null;t:for(;;){for(var jt;Mt!==R||W!==0&&Mt.nodeType!==3||(De=fe+W),Mt!==J||D!==0&&Mt.nodeType!==3||(Ke=fe+D),Mt.nodeType===3&&(fe+=Mt.nodeValue.length),(jt=Mt.firstChild)!==null;)It=Mt,Mt=jt;for(;;){if(Mt===v)break t;if(It===R&&++ht===W&&(De=fe),It===J&&++Pt===D&&(Ke=fe),(jt=Mt.nextSibling)!==null)break;Mt=It,It=Mt.parentNode}Mt=jt}R=De===-1||Ke===-1?null:{start:De,end:Ke}}else R=null}R=R||{start:0,end:0}}else R=null;for(Kv={focusedElem:v,selectionRange:R},Ro=!1,Jt=w;Jt!==null;)if(w=Jt,v=w.child,(w.subtreeFlags&1028)!==0&&v!==null)v.return=w,Jt=v;else for(;Jt!==null;){w=Jt;try{var Qt=w.alternate;if((w.flags&1024)!==0)switch(w.tag){case 0:case 11:case 15:break;case 1:if(Qt!==null){var sn=Qt.memoizedProps,Ai=Qt.memoizedState,ot=w.stateNode,Ye=ot.getSnapshotBeforeUpdate(w.elementType===w.type?sn:Uo(w.type,sn),Ai);ot.__reactInternalSnapshotBeforeUpdate=Ye}break;case 3:var lt=w.stateNode.containerInfo;lt.nodeType===1?lt.textContent="":lt.nodeType===9&&lt.documentElement&&lt.removeChild(lt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Nt){wi(w,w.return,Nt)}if(v=w.sibling,v!==null){v.return=w.return,Jt=v;break}Jt=w.return}return Qt=eN,eN=!1,Qt}function bb(v,w,R){var D=w.updateQueue;if(D=D!==null?D.lastEffect:null,D!==null){var W=D=D.next;do{if((W.tag&v)===v){var J=W.destroy;W.destroy=void 0,J!==void 0&&oC(w,R,J)}W=W.next}while(W!==D)}}function rS(v,w){if(w=w.updateQueue,w=w!==null?w.lastEffect:null,w!==null){var R=w=w.next;do{if((R.tag&v)===v){var D=R.create;R.destroy=D()}R=R.next}while(R!==w)}}function aC(v){var w=v.ref;if(w!==null){var R=v.stateNode;switch(v.tag){case 5:v=R;break;default:v=R}typeof w=="function"?w(v):w.current=v}}function tN(v){var w=v.alternate;w!==null&&(v.alternate=null,tN(w)),v.child=null,v.deletions=null,v.sibling=null,v.tag===5&&(w=v.stateNode,w!==null&&(delete w[Mi],delete w[mf],delete w[Ru],delete w[_0],delete w[S0])),v.stateNode=null,v.return=null,v.dependencies=null,v.memoizedProps=null,v.memoizedState=null,v.pendingProps=null,v.stateNode=null,v.updateQueue=null}function nN(v){return v.tag===5||v.tag===3||v.tag===4}function rN(v){e:for(;;){for(;v.sibling===null;){if(v.return===null||nN(v.return))return null;v=v.return}for(v.sibling.return=v.return,v=v.sibling;v.tag!==5&&v.tag!==6&&v.tag!==18;){if(v.flags&2||v.child===null||v.tag===4)continue e;v.child.return=v,v=v.child}if(!(v.flags&2))return v.stateNode}}function lC(v,w,R){var D=v.tag;if(D===5||D===6)v=v.stateNode,w?R.nodeType===8?R.parentNode.insertBefore(v,w):R.insertBefore(v,w):(R.nodeType===8?(w=R.parentNode,w.insertBefore(v,R)):(w=R,w.appendChild(v)),R=R._reactRootContainer,R!=null||w.onclick!==null||(w.onclick=kh));else if(D!==4&&(v=v.child,v!==null))for(lC(v,w,R),v=v.sibling;v!==null;)lC(v,w,R),v=v.sibling}function cC(v,w,R){var D=v.tag;if(D===5||D===6)v=v.stateNode,w?R.insertBefore(v,w):R.appendChild(v);else if(D!==4&&(v=v.child,v!==null))for(cC(v,w,R),v=v.sibling;v!==null;)cC(v,w,R),v=v.sibling}var ks=null,Xl=!1;function Sf(v,w,R){for(R=R.child;R!==null;)iN(v,w,R),R=R.sibling}function iN(v,w,R){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(an,R)}catch{}switch(R.tag){case 5:Gs||U0(R,w);case 6:var D=ks,W=Xl;ks=null,Sf(v,w,R),ks=D,Xl=W,ks!==null&&(Xl?(v=ks,R=R.stateNode,v.nodeType===8?v.parentNode.removeChild(R):v.removeChild(R)):ks.removeChild(R.stateNode));break;case 18:ks!==null&&(Xl?(v=ks,R=R.stateNode,v.nodeType===8?w0(v.parentNode,R):v.nodeType===1&&w0(v,R),xh(v)):w0(ks,R.stateNode));break;case 4:D=ks,W=Xl,ks=R.stateNode.containerInfo,Xl=!0,Sf(v,w,R),ks=D,Xl=W;break;case 0:case 11:case 14:case 15:if(!Gs&&(D=R.updateQueue,D!==null&&(D=D.lastEffect,D!==null))){W=D=D.next;do{var J=W,fe=J.destroy;J=J.tag,fe!==void 0&&((J&2)!==0||(J&4)!==0)&&oC(R,w,fe),W=W.next}while(W!==D)}Sf(v,w,R);break;case 1:if(!Gs&&(U0(R,w),D=R.stateNode,typeof D.componentWillUnmount=="function"))try{D.props=R.memoizedProps,D.state=R.memoizedState,D.componentWillUnmount()}catch(De){wi(R,w,De)}Sf(v,w,R);break;case 21:Sf(v,w,R);break;case 22:R.mode&1?(Gs=(D=Gs)||R.memoizedState!==null,Sf(v,w,R),Gs=D):Sf(v,w,R);break;default:Sf(v,w,R)}}function sN(v){var w=v.updateQueue;if(w!==null){v.updateQueue=null;var R=v.stateNode;R===null&&(R=v.stateNode=new iZ),w.forEach(function(D){var W=pZ.bind(null,v,D);R.has(D)||(R.add(D),D.then(W,W))})}}function Yl(v,w){var R=w.deletions;if(R!==null)for(var D=0;D<R.length;D++){var W=R[D];try{var J=v,fe=w,De=fe;e:for(;De!==null;){switch(De.tag){case 5:ks=De.stateNode,Xl=!1;break e;case 3:ks=De.stateNode.containerInfo,Xl=!0;break e;case 4:ks=De.stateNode.containerInfo,Xl=!0;break e}De=De.return}if(ks===null)throw Error(n(160));iN(J,fe,W),ks=null,Xl=!1;var Ke=W.alternate;Ke!==null&&(Ke.return=null),W.return=null}catch(ht){wi(W,w,ht)}}if(w.subtreeFlags&12854)for(w=w.child;w!==null;)oN(w,v),w=w.sibling}function oN(v,w){var R=v.alternate,D=v.flags;switch(v.tag){case 0:case 11:case 14:case 15:if(Yl(w,v),Uc(v),D&4){try{bb(3,v,v.return),rS(3,v)}catch(sn){wi(v,v.return,sn)}try{bb(5,v,v.return)}catch(sn){wi(v,v.return,sn)}}break;case 1:Yl(w,v),Uc(v),D&512&&R!==null&&U0(R,R.return);break;case 5:if(Yl(w,v),Uc(v),D&512&&R!==null&&U0(R,R.return),v.flags&32){var W=v.stateNode;try{Se(W,"")}catch(sn){wi(v,v.return,sn)}}if(D&4&&(W=v.stateNode,W!=null)){var J=v.memoizedProps,fe=R!==null?R.memoizedProps:J,De=v.type,Ke=v.updateQueue;if(v.updateQueue=null,Ke!==null)try{De==="input"&&J.type==="radio"&&J.name!=null&&Pe(W,J),Te(De,fe);var ht=Te(De,J);for(fe=0;fe<Ke.length;fe+=2){var Pt=Ke[fe],Mt=Ke[fe+1];Pt==="style"?oe(W,Mt):Pt==="dangerouslySetInnerHTML"?ge(W,Mt):Pt==="children"?Se(W,Mt):x(W,Pt,Mt,ht)}switch(De){case"input":He(W,J);break;case"textarea":Ne(W,J);break;case"select":var It=W._wrapperState.wasMultiple;W._wrapperState.wasMultiple=!!J.multiple;var jt=J.value;jt!=null?ee(W,!!J.multiple,jt,!1):It!==!!J.multiple&&(J.defaultValue!=null?ee(W,!!J.multiple,J.defaultValue,!0):ee(W,!!J.multiple,J.multiple?[]:"",!1))}W[mf]=J}catch(sn){wi(v,v.return,sn)}}break;case 6:if(Yl(w,v),Uc(v),D&4){if(v.stateNode===null)throw Error(n(162));W=v.stateNode,J=v.memoizedProps;try{W.nodeValue=J}catch(sn){wi(v,v.return,sn)}}break;case 3:if(Yl(w,v),Uc(v),D&4&&R!==null&&R.memoizedState.isDehydrated)try{xh(w.containerInfo)}catch(sn){wi(v,v.return,sn)}break;case 4:Yl(w,v),Uc(v);break;case 13:Yl(w,v),Uc(v),W=v.child,W.flags&8192&&(J=W.memoizedState!==null,W.stateNode.isHidden=J,!J||W.alternate!==null&&W.alternate.memoizedState!==null||(fC=st())),D&4&&sN(v);break;case 22:if(Pt=R!==null&&R.memoizedState!==null,v.mode&1?(Gs=(ht=Gs)||Pt,Yl(w,v),Gs=ht):Yl(w,v),Uc(v),D&8192){if(ht=v.memoizedState!==null,(v.stateNode.isHidden=ht)&&!Pt&&(v.mode&1)!==0)for(Jt=v,Pt=v.child;Pt!==null;){for(Mt=Jt=Pt;Jt!==null;){switch(It=Jt,jt=It.child,It.tag){case 0:case 11:case 14:case 15:bb(4,It,It.return);break;case 1:U0(It,It.return);var Qt=It.stateNode;if(typeof Qt.componentWillUnmount=="function"){D=It,R=It.return;try{w=D,Qt.props=w.memoizedProps,Qt.state=w.memoizedState,Qt.componentWillUnmount()}catch(sn){wi(D,R,sn)}}break;case 5:U0(It,It.return);break;case 22:if(It.memoizedState!==null){cN(Mt);continue}}jt!==null?(jt.return=It,Jt=jt):cN(Mt)}Pt=Pt.sibling}e:for(Pt=null,Mt=v;;){if(Mt.tag===5){if(Pt===null){Pt=Mt;try{W=Mt.stateNode,ht?(J=W.style,typeof J.setProperty=="function"?J.setProperty("display","none","important"):J.display="none"):(De=Mt.stateNode,Ke=Mt.memoizedProps.style,fe=Ke!=null&&Ke.hasOwnProperty("display")?Ke.display:null,De.style.display=Ee("display",fe))}catch(sn){wi(v,v.return,sn)}}}else if(Mt.tag===6){if(Pt===null)try{Mt.stateNode.nodeValue=ht?"":Mt.memoizedProps}catch(sn){wi(v,v.return,sn)}}else if((Mt.tag!==22&&Mt.tag!==23||Mt.memoizedState===null||Mt===v)&&Mt.child!==null){Mt.child.return=Mt,Mt=Mt.child;continue}if(Mt===v)break e;for(;Mt.sibling===null;){if(Mt.return===null||Mt.return===v)break e;Pt===Mt&&(Pt=null),Mt=Mt.return}Pt===Mt&&(Pt=null),Mt.sibling.return=Mt.return,Mt=Mt.sibling}}break;case 19:Yl(w,v),Uc(v),D&4&&sN(v);break;case 21:break;default:Yl(w,v),Uc(v)}}function Uc(v){var w=v.flags;if(w&2){try{e:{for(var R=v.return;R!==null;){if(nN(R)){var D=R;break e}R=R.return}throw Error(n(160))}switch(D.tag){case 5:var W=D.stateNode;D.flags&32&&(Se(W,""),D.flags&=-33);var J=rN(v);cC(v,J,W);break;case 3:case 4:var fe=D.stateNode.containerInfo,De=rN(v);lC(v,De,fe);break;default:throw Error(n(161))}}catch(Ke){wi(v,v.return,Ke)}v.flags&=-3}w&4096&&(v.flags&=-4097)}function oZ(v,w,R){Jt=v,aN(v)}function aN(v,w,R){for(var D=(v.mode&1)!==0;Jt!==null;){var W=Jt,J=W.child;if(W.tag===22&&D){var fe=W.memoizedState!==null||nS;if(!fe){var De=W.alternate,Ke=De!==null&&De.memoizedState!==null||Gs;De=nS;var ht=Gs;if(nS=fe,(Gs=Ke)&&!ht)for(Jt=W;Jt!==null;)fe=Jt,Ke=fe.child,fe.tag===22&&fe.memoizedState!==null?uN(W):Ke!==null?(Ke.return=fe,Jt=Ke):uN(W);for(;J!==null;)Jt=J,aN(J),J=J.sibling;Jt=W,nS=De,Gs=ht}lN(v)}else(W.subtreeFlags&8772)!==0&&J!==null?(J.return=W,Jt=J):lN(v)}}function lN(v){for(;Jt!==null;){var w=Jt;if((w.flags&8772)!==0){var R=w.alternate;try{if((w.flags&8772)!==0)switch(w.tag){case 0:case 11:case 15:Gs||rS(5,w);break;case 1:var D=w.stateNode;if(w.flags&4&&!Gs)if(R===null)D.componentDidMount();else{var W=w.elementType===w.type?R.memoizedProps:Uo(w.type,R.memoizedProps);D.componentDidUpdate(W,R.memoizedState,D.__reactInternalSnapshotBeforeUpdate)}var J=w.updateQueue;J!==null&&bf(w,J,D);break;case 3:var fe=w.updateQueue;if(fe!==null){if(R=null,w.child!==null)switch(w.child.tag){case 5:R=w.child.stateNode;break;case 1:R=w.child.stateNode}bf(w,fe,R)}break;case 5:var De=w.stateNode;if(R===null&&w.flags&4){R=De;var Ke=w.memoizedProps;switch(w.type){case"button":case"input":case"select":case"textarea":Ke.autoFocus&&R.focus();break;case"img":Ke.src&&(R.src=Ke.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(w.memoizedState===null){var ht=w.alternate;if(ht!==null){var Pt=ht.memoizedState;if(Pt!==null){var Mt=Pt.dehydrated;Mt!==null&&xh(Mt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Gs||w.flags&512&&aC(w)}catch(It){wi(w,w.return,It)}}if(w===v){Jt=null;break}if(R=w.sibling,R!==null){R.return=w.return,Jt=R;break}Jt=w.return}}function cN(v){for(;Jt!==null;){var w=Jt;if(w===v){Jt=null;break}var R=w.sibling;if(R!==null){R.return=w.return,Jt=R;break}Jt=w.return}}function uN(v){for(;Jt!==null;){var w=Jt;try{switch(w.tag){case 0:case 11:case 15:var R=w.return;try{rS(4,w)}catch(Ke){wi(w,R,Ke)}break;case 1:var D=w.stateNode;if(typeof D.componentDidMount=="function"){var W=w.return;try{D.componentDidMount()}catch(Ke){wi(w,W,Ke)}}var J=w.return;try{aC(w)}catch(Ke){wi(w,J,Ke)}break;case 5:var fe=w.return;try{aC(w)}catch(Ke){wi(w,fe,Ke)}}}catch(Ke){wi(w,w.return,Ke)}if(w===v){Jt=null;break}var De=w.sibling;if(De!==null){De.return=w.return,Jt=De;break}Jt=w.return}}var aZ=Math.ceil,iS=S.ReactCurrentDispatcher,uC=S.ReactCurrentOwner,qa=S.ReactCurrentBatchConfig,hr=0,ys=null,ji=null,Os=0,ma=0,$0=ri(0),os=0,xb=null,Zh=0,sS=0,dC=0,wb=null,$o=null,fC=0,z0=1/0,Ku=null,oS=!1,hC=null,Ef=null,aS=!1,Tf=null,lS=0,_b=0,pC=null,cS=-1,uS=0;function bo(){return(hr&6)!==0?st():cS!==-1?cS:cS=st()}function If(v){return(v.mode&1)===0?1:(hr&2)!==0&&Os!==0?Os&-Os:nC.transition!==null?(uS===0&&(uS=Kn()),uS):(v=Gn,v!==0||(v=window.event,v=v===void 0?16:M_(v.type)),v)}function Zl(v,w,R,D){if(50<_b)throw _b=0,pC=null,Error(n(185));Ui(v,R,D),((hr&2)===0||v!==ys)&&(v===ys&&((hr&2)===0&&(sS|=R),os===4&&Pf(v,Os)),zo(v,D),R===1&&hr===0&&(w.mode&1)===0&&(z0=st()+500,Lh&&Ha()))}function zo(v,w){var R=v.callbackNode;Fi(v,w);var D=Ji(v,v===ys?Os:0);if(D===0)R!==null&&ve(R),v.callbackNode=null,v.callbackPriority=0;else if(w=D&-D,v.callbackPriority!==w){if(R!=null&&ve(R),w===1)v.tag===0?V_(fN.bind(null,v)):Dh(fN.bind(null,v)),tC(function(){(hr&6)===0&&Ha()}),R=null;else{switch(zs(D)){case 1:R=Ct;break;case 4:R=Dt;break;case 16:R=zt;break;case 536870912:R=un;break;default:R=zt}R=xN(R,dN.bind(null,v))}v.callbackPriority=w,v.callbackNode=R}}function dN(v,w){if(cS=-1,uS=0,(hr&6)!==0)throw Error(n(327));var R=v.callbackNode;if(H0()&&v.callbackNode!==R)return null;var D=Ji(v,v===ys?Os:0);if(D===0)return null;if((D&30)!==0||(D&v.expiredLanes)!==0||w)w=dS(v,D);else{w=D;var W=hr;hr|=2;var J=pN();(ys!==v||Os!==w)&&(Ku=null,z0=st()+500,Qh(v,w));do try{uZ();break}catch(De){hN(v,De)}while(!0);Uu(),iS.current=J,hr=W,ji!==null?w=0:(ys=null,Os=0,w=os)}if(w!==0){if(w===2&&(W=Ba(v),W!==0&&(D=W,w=mC(v,W))),w===1)throw R=xb,Qh(v,0),Pf(v,D),zo(v,st()),R;if(w===6)Pf(v,D);else{if(W=v.current.alternate,(D&30)===0&&!lZ(W)&&(w=dS(v,D),w===2&&(J=Ba(v),J!==0&&(D=J,w=mC(v,J))),w===1))throw R=xb,Qh(v,0),Pf(v,D),zo(v,st()),R;switch(v.finishedWork=W,v.finishedLanes=D,w){case 0:case 1:throw Error(n(345));case 2:ep(v,$o,Ku);break;case 3:if(Pf(v,D),(D&130023424)===D&&(w=fC+500-st(),10<w)){if(Ji(v,0)!==0)break;if(W=v.suspendedLanes,(W&D)!==D){bo(),v.pingedLanes|=v.suspendedLanes&W;break}v.timeoutHandle=Xv(ep.bind(null,v,$o,Ku),w);break}ep(v,$o,Ku);break;case 4:if(Pf(v,D),(D&4194240)===D)break;for(w=v.eventTimes,W=-1;0<D;){var fe=31-yn(D);J=1<<fe,fe=w[fe],fe>W&&(W=fe),D&=~J}if(D=W,D=st()-D,D=(120>D?120:480>D?480:1080>D?1080:1920>D?1920:3e3>D?3e3:4320>D?4320:1960*aZ(D/1960))-D,10<D){v.timeoutHandle=Xv(ep.bind(null,v,$o,Ku),D);break}ep(v,$o,Ku);break;case 5:ep(v,$o,Ku);break;default:throw Error(n(329))}}}return zo(v,st()),v.callbackNode===R?dN.bind(null,v):null}function mC(v,w){var R=wb;return v.current.memoizedState.isDehydrated&&(Qh(v,w).flags|=256),v=dS(v,w),v!==2&&(w=$o,$o=R,w!==null&&gC(w)),v}function gC(v){$o===null?$o=v:$o.push.apply($o,v)}function lZ(v){for(var w=v;;){if(w.flags&16384){var R=w.updateQueue;if(R!==null&&(R=R.stores,R!==null))for(var D=0;D<R.length;D++){var W=R[D],J=W.getSnapshot;W=W.value;try{if(!uo(J(),W))return!1}catch{return!1}}}if(R=w.child,w.subtreeFlags&16384&&R!==null)R.return=w,w=R;else{if(w===v)break;for(;w.sibling===null;){if(w.return===null||w.return===v)return!0;w=w.return}w.sibling.return=w.return,w=w.sibling}}return!0}function Pf(v,w){for(w&=~dC,w&=~sS,v.suspendedLanes|=w,v.pingedLanes&=~w,v=v.expirationTimes;0<w;){var R=31-yn(w),D=1<<R;v[R]=-1,w&=~D}}function fN(v){if((hr&6)!==0)throw Error(n(327));H0();var w=Ji(v,0);if((w&1)===0)return zo(v,st()),null;var R=dS(v,w);if(v.tag!==0&&R===2){var D=Ba(v);D!==0&&(w=D,R=mC(v,D))}if(R===1)throw R=xb,Qh(v,0),Pf(v,w),zo(v,st()),R;if(R===6)throw Error(n(345));return v.finishedWork=v.current.alternate,v.finishedLanes=w,ep(v,$o,Ku),zo(v,st()),null}function yC(v,w){var R=hr;hr|=1;try{return v(w)}finally{hr=R,hr===0&&(z0=st()+500,Lh&&Ha())}}function Jh(v){Tf!==null&&Tf.tag===0&&(hr&6)===0&&H0();var w=hr;hr|=1;var R=qa.transition,D=Gn;try{if(qa.transition=null,Gn=1,v)return v()}finally{Gn=D,qa.transition=R,hr=w,(hr&6)===0&&Ha()}}function vC(){ma=$0.current,Or($0)}function Qh(v,w){v.finishedWork=null,v.finishedLanes=0;var R=v.timeoutHandle;if(R!==-1&&(v.timeoutHandle=-1,Yv(R)),ji!==null)for(R=ji.return;R!==null;){var D=R;switch(zl(D),D.tag){case 1:D=D.type.childContextTypes,D!=null&&Oh();break;case 3:Bc(),Or(Cs),Or(ts),Wa();break;case 5:xf(D);break;case 4:Bc();break;case 13:Or(zr);break;case 19:Or(zr);break;case 10:$h(D.type._context);break;case 22:case 23:vC()}R=R.return}if(ys=v,ji=v=Cf(v.current,null),Os=ma=w,os=0,xb=null,dC=sS=Zh=0,$o=wb=null,Vl!==null){for(w=0;w<Vl.length;w++)if(R=Vl[w],D=R.interleaved,D!==null){R.interleaved=null;var W=D.next,J=R.pending;if(J!==null){var fe=J.next;J.next=W,D.next=fe}R.pending=D}Vl=null}return v}function hN(v,w){do{var R=ji;try{if(Uu(),Vu.current=B0,ha){for(var D=Nr.memoizedState;D!==null;){var W=D.queue;W!==null&&(W.pending=null),D=D.next}ha=!1}if(jl=0,ar=si=Nr=null,gs=!1,Fc=0,uC.current=null,R===null||R.return===null){os=1,xb=w,ji=null;break}e:{var J=v,fe=R.return,De=R,Ke=w;if(w=Os,De.flags|=32768,Ke!==null&&typeof Ke=="object"&&typeof Ke.then=="function"){var ht=Ke,Pt=De,Mt=Pt.tag;if((Pt.mode&1)===0&&(Mt===0||Mt===11||Mt===15)){var It=Pt.alternate;It?(Pt.updateQueue=It.updateQueue,Pt.memoizedState=It.memoizedState,Pt.lanes=It.lanes):(Pt.updateQueue=null,Pt.memoizedState=null)}var jt=Xt(fe);if(jt!==null){jt.flags&=-257,Sn(jt,fe,De,J,w),jt.mode&1&&Rt(J,ht,w),w=jt,Ke=ht;var Qt=w.updateQueue;if(Qt===null){var sn=new Set;sn.add(Ke),w.updateQueue=sn}else Qt.add(Ke);break e}else{if((w&1)===0){Rt(J,ht,w),bC();break e}Ke=Error(n(426))}}else if($r&&De.mode&1){var Ai=Xt(fe);if(Ai!==null){(Ai.flags&65536)===0&&(Ai.flags|=256),Sn(Ai,fe,De,J,w),yf(F(Ke,De));break e}}J=Ke=F(Ke,De),os!==4&&(os=2),wb===null?wb=[J]:wb.push(J),J=fe;do{switch(J.tag){case 3:J.flags|=65536,w&=-w,J.lanes|=w;var ot=Ze(J,Ke,w);$u(J,ot);break e;case 1:De=Ke;var Ye=J.type,lt=J.stateNode;if((J.flags&128)===0&&(typeof Ye.getDerivedStateFromError=="function"||lt!==null&&typeof lt.componentDidCatch=="function"&&(Ef===null||!Ef.has(lt)))){J.flags|=65536,w&=-w,J.lanes|=w;var Nt=yt(J,De,w);$u(J,Nt);break e}}J=J.return}while(J!==null)}gN(R)}catch(ln){w=ln,ji===R&&R!==null&&(ji=R=R.return);continue}break}while(!0)}function pN(){var v=iS.current;return iS.current=B0,v===null?B0:v}function bC(){(os===0||os===3||os===2)&&(os=4),ys===null||(Zh&268435455)===0&&(sS&268435455)===0||Pf(ys,Os)}function dS(v,w){var R=hr;hr|=2;var D=pN();(ys!==v||Os!==w)&&(Ku=null,Qh(v,w));do try{cZ();break}catch(W){hN(v,W)}while(!0);if(Uu(),hr=R,iS.current=D,ji!==null)throw Error(n(261));return ys=null,Os=0,os}function cZ(){for(;ji!==null;)mN(ji)}function uZ(){for(;ji!==null&&!tt();)mN(ji)}function mN(v){var w=bN(v.alternate,v,ma);v.memoizedProps=v.pendingProps,w===null?gN(v):ji=w,uC.current=null}function gN(v){var w=v;do{var R=w.alternate;if(v=w.return,(w.flags&32768)===0){if(R=nZ(R,w,ma),R!==null){ji=R;return}}else{if(R=rZ(R,w),R!==null){R.flags&=32767,ji=R;return}if(v!==null)v.flags|=32768,v.subtreeFlags=0,v.deletions=null;else{os=6,ji=null;return}}if(w=w.sibling,w!==null){ji=w;return}ji=w=v}while(w!==null);os===0&&(os=5)}function ep(v,w,R){var D=Gn,W=qa.transition;try{qa.transition=null,Gn=1,dZ(v,w,R,D)}finally{qa.transition=W,Gn=D}return null}function dZ(v,w,R,D){do H0();while(Tf!==null);if((hr&6)!==0)throw Error(n(327));R=v.finishedWork;var W=v.finishedLanes;if(R===null)return null;if(v.finishedWork=null,v.finishedLanes=0,R===v.current)throw Error(n(177));v.callbackNode=null,v.callbackPriority=0;var J=R.lanes|R.childLanes;if(Qi(v,J),v===ys&&(ji=ys=null,Os=0),(R.subtreeFlags&2064)===0&&(R.flags&2064)===0||aS||(aS=!0,xN(zt,function(){return H0(),null})),J=(R.flags&15990)!==0,(R.subtreeFlags&15990)!==0||J){J=qa.transition,qa.transition=null;var fe=Gn;Gn=1;var De=hr;hr|=4,uC.current=null,sZ(v,R),oN(R,v),zi(Kv),Ro=!!pf,Kv=pf=null,v.current=R,oZ(R),ft(),hr=De,Gn=fe,qa.transition=J}else v.current=R;if(aS&&(aS=!1,Tf=v,lS=W),J=v.pendingLanes,J===0&&(Ef=null),rn(R.stateNode),zo(v,st()),w!==null)for(D=v.onRecoverableError,R=0;R<w.length;R++)W=w[R],D(W.value,{componentStack:W.stack,digest:W.digest});if(oS)throw oS=!1,v=hC,hC=null,v;return(lS&1)!==0&&v.tag!==0&&H0(),J=v.pendingLanes,(J&1)!==0?v===pC?_b++:(_b=0,pC=v):_b=0,Ha(),null}function H0(){if(Tf!==null){var v=zs(lS),w=qa.transition,R=Gn;try{if(qa.transition=null,Gn=16>v?16:v,Tf===null)var D=!1;else{if(v=Tf,Tf=null,lS=0,(hr&6)!==0)throw Error(n(331));var W=hr;for(hr|=4,Jt=v.current;Jt!==null;){var J=Jt,fe=J.child;if((Jt.flags&16)!==0){var De=J.deletions;if(De!==null){for(var Ke=0;Ke<De.length;Ke++){var ht=De[Ke];for(Jt=ht;Jt!==null;){var Pt=Jt;switch(Pt.tag){case 0:case 11:case 15:bb(8,Pt,J)}var Mt=Pt.child;if(Mt!==null)Mt.return=Pt,Jt=Mt;else for(;Jt!==null;){Pt=Jt;var It=Pt.sibling,jt=Pt.return;if(tN(Pt),Pt===ht){Jt=null;break}if(It!==null){It.return=jt,Jt=It;break}Jt=jt}}}var Qt=J.alternate;if(Qt!==null){var sn=Qt.child;if(sn!==null){Qt.child=null;do{var Ai=sn.sibling;sn.sibling=null,sn=Ai}while(sn!==null)}}Jt=J}}if((J.subtreeFlags&2064)!==0&&fe!==null)fe.return=J,Jt=fe;else e:for(;Jt!==null;){if(J=Jt,(J.flags&2048)!==0)switch(J.tag){case 0:case 11:case 15:bb(9,J,J.return)}var ot=J.sibling;if(ot!==null){ot.return=J.return,Jt=ot;break e}Jt=J.return}}var Ye=v.current;for(Jt=Ye;Jt!==null;){fe=Jt;var lt=fe.child;if((fe.subtreeFlags&2064)!==0&&lt!==null)lt.return=fe,Jt=lt;else e:for(fe=Ye;Jt!==null;){if(De=Jt,(De.flags&2048)!==0)try{switch(De.tag){case 0:case 11:case 15:rS(9,De)}}catch(ln){wi(De,De.return,ln)}if(De===fe){Jt=null;break e}var Nt=De.sibling;if(Nt!==null){Nt.return=De.return,Jt=Nt;break e}Jt=De.return}}if(hr=W,Ha(),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(an,v)}catch{}D=!0}return D}finally{Gn=R,qa.transition=w}}return!1}function yN(v,w,R){w=F(R,w),w=Ze(v,w,1),v=Kr(v,w,1),w=bo(),v!==null&&(Ui(v,1,w),zo(v,w))}function wi(v,w,R){if(v.tag===3)yN(v,v,R);else for(;w!==null;){if(w.tag===3){yN(w,v,R);break}else if(w.tag===1){var D=w.stateNode;if(typeof w.type.getDerivedStateFromError=="function"||typeof D.componentDidCatch=="function"&&(Ef===null||!Ef.has(D))){v=F(R,v),v=yt(w,v,1),w=Kr(w,v,1),v=bo(),w!==null&&(Ui(w,1,v),zo(w,v));break}}w=w.return}}function fZ(v,w,R){var D=v.pingCache;D!==null&&D.delete(w),w=bo(),v.pingedLanes|=v.suspendedLanes&R,ys===v&&(Os&R)===R&&(os===4||os===3&&(Os&130023424)===Os&&500>st()-fC?Qh(v,0):dC|=R),zo(v,w)}function vN(v,w){w===0&&((v.mode&1)===0?w=1:(w=Zn,Zn<<=1,(Zn&130023424)===0&&(Zn=4194304)));var R=bo();v=da(v,w),v!==null&&(Ui(v,w,R),zo(v,R))}function hZ(v){var w=v.memoizedState,R=0;w!==null&&(R=w.retryLane),vN(v,R)}function pZ(v,w){var R=0;switch(v.tag){case 13:var D=v.stateNode,W=v.memoizedState;W!==null&&(R=W.retryLane);break;case 19:D=v.stateNode;break;default:throw Error(n(314))}D!==null&&D.delete(w),vN(v,R)}var bN;bN=function(v,w,R){if(v!==null)if(v.memoizedProps!==w.pendingProps||Cs.current)Ln=!0;else{if((v.lanes&R)===0&&(w.flags&128)===0)return Ln=!1,tZ(v,w,R);Ln=(v.flags&131072)!==0}else Ln=!1,$r&&(w.flags&1048576)!==0&&tb(w,P0,w.index);switch(w.lanes=0,w.tag){case 2:var D=w.type;tS(v,w),v=w.pendingProps;var W=ku(w,ts.current);Dc(w,R),W=jh(null,w,D,v,W,R);var J=cb();return w.flags|=1,typeof W=="object"&&W!==null&&typeof W.render=="function"&&W.$$typeof===void 0?(w.tag=1,w.memoizedState=null,w.updateQueue=null,ps(D)?(J=!0,Ou(w)):J=!1,w.memoizedState=W.state!==null&&W.state!==void 0?W.state:null,An(w),W.updater=F0,w.stateNode=W,W._reactInternals=w,L(w,D,v,R),w=Pn(null,w,D,!0,J,R)):(w.tag=0,$r&&J&&nb(w),$t(null,w,W,R),w=w.child),w;case 16:D=w.elementType;e:{switch(tS(v,w),v=w.pendingProps,W=D._init,D=W(D._payload),w.type=D,W=w.tag=gZ(D),v=Uo(D,v),W){case 0:w=Ft(null,w,D,v,R);break e;case 1:w=on(null,w,D,v,R);break e;case 11:w=ss(null,w,D,v,R);break e;case 14:w=vo(null,w,D,Uo(D.type,v),R);break e}throw Error(n(306,D,""))}return w;case 0:return D=w.type,W=w.pendingProps,W=w.elementType===D?W:Uo(D,W),Ft(v,w,D,W,R);case 1:return D=w.type,W=w.pendingProps,W=w.elementType===D?W:Uo(D,W),on(v,w,D,W,R);case 3:e:{if(En(w),v===null)throw Error(n(387));D=w.pendingProps,J=w.memoizedState,W=J.element,fi(v,w),ii(w,D,null,R);var fe=w.memoizedState;if(D=fe.element,J.isDehydrated)if(J={element:D,isDehydrated:!1,cache:fe.cache,pendingSuspenseBoundaries:fe.pendingSuspenseBoundaries,transitions:fe.transitions},w.updateQueue.baseState=J,w.memoizedState=J,w.flags&256){W=F(Error(n(423)),w),w=tr(v,w,D,R,W);break e}else if(D!==W){W=F(Error(n(424)),w),w=tr(v,w,D,R,W);break e}else for(As=Dl(w.stateNode.containerInfo.firstChild),ns=w,$r=!0,Fo=null,R=Uh(w,null,D,R),w.child=R;R;)R.flags=R.flags&-3|4096,R=R.sibling;else{if(Lc(),D===W){w=qu(v,w,R);break e}$t(v,w,D,R)}w=w.child}return w;case 5:return Hu(w),v===null&&M0(w),D=w.type,W=w.pendingProps,J=v!==null?v.memoizedProps:null,fe=W.children,Gv(D,W)?fe=null:J!==null&&Gv(D,J)&&(w.flags|=32),mt(v,w),$t(v,w,fe,R),w.child;case 6:return v===null&&M0(w),null;case 13:return Gl(v,w,R);case 4:return Vh(w,w.stateNode.containerInfo),D=w.pendingProps,v===null?w.child=Du(w,null,D,R):$t(v,w,D,R),w.child;case 11:return D=w.type,W=w.pendingProps,W=w.elementType===D?W:Uo(D,W),ss(v,w,D,W,R);case 7:return $t(v,w,w.pendingProps,R),w.child;case 8:return $t(v,w,w.pendingProps.children,R),w.child;case 12:return $t(v,w,w.pendingProps.children,R),w.child;case 10:e:{if(D=w.type._context,W=w.pendingProps,J=w.memoizedProps,fe=W.value,Pr(Bu,D._currentValue),D._currentValue=fe,J!==null)if(uo(J.value,fe)){if(J.children===W.children&&!Cs.current){w=qu(v,w,R);break e}}else for(J=w.child,J!==null&&(J.return=w);J!==null;){var De=J.dependencies;if(De!==null){fe=J.child;for(var Ke=De.firstContext;Ke!==null;){if(Ke.context===D){if(J.tag===1){Ke=Er(-1,R&-R),Ke.tag=2;var ht=J.updateQueue;if(ht!==null){ht=ht.shared;var Pt=ht.pending;Pt===null?Ke.next=Ke:(Ke.next=Pt.next,Pt.next=Ke),ht.pending=Ke}}J.lanes|=R,Ke=J.alternate,Ke!==null&&(Ke.lanes|=R),zh(J.return,R,w),De.lanes|=R;break}Ke=Ke.next}}else if(J.tag===10)fe=J.type===w.type?null:J.child;else if(J.tag===18){if(fe=J.return,fe===null)throw Error(n(341));fe.lanes|=R,De=fe.alternate,De!==null&&(De.lanes|=R),zh(fe,R,w),fe=J.sibling}else fe=J.child;if(fe!==null)fe.return=J;else for(fe=J;fe!==null;){if(fe===w){fe=null;break}if(J=fe.sibling,J!==null){J.return=fe.return,fe=J;break}fe=fe.return}J=fe}$t(v,w,W.children,R),w=w.child}return w;case 9:return W=w.type,D=w.pendingProps.children,Dc(w,R),W=po(W),D=D(W),w.flags|=1,$t(v,w,D,R),w.child;case 14:return D=w.type,W=Uo(D,w.pendingProps),W=Uo(D.type,W),vo(v,w,D,W,R);case 15:return ct(v,w,w.type,w.pendingProps,R);case 17:return D=w.type,W=w.pendingProps,W=w.elementType===D?W:Uo(D,W),tS(v,w),w.tag=1,ps(D)?(v=!0,Ou(w)):v=!1,Dc(w,R),E(w,D,W),L(w,D,W,R),Pn(null,w,D,!0,v,R);case 19:return Y4(v,w,R);case 22:return nt(v,w,R)}throw Error(n(156,w.tag))};function xN(v,w){return Tn(v,w)}function mZ(v,w,R,D){this.tag=v,this.key=R,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=w,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=D,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ka(v,w,R,D){return new mZ(v,w,R,D)}function xC(v){return v=v.prototype,!(!v||!v.isReactComponent)}function gZ(v){if(typeof v=="function")return xC(v)?1:0;if(v!=null){if(v=v.$$typeof,v===O)return 11;if(v===U)return 14}return 2}function Cf(v,w){var R=v.alternate;return R===null?(R=Ka(v.tag,w,v.key,v.mode),R.elementType=v.elementType,R.type=v.type,R.stateNode=v.stateNode,R.alternate=v,v.alternate=R):(R.pendingProps=w,R.type=v.type,R.flags=0,R.subtreeFlags=0,R.deletions=null),R.flags=v.flags&14680064,R.childLanes=v.childLanes,R.lanes=v.lanes,R.child=v.child,R.memoizedProps=v.memoizedProps,R.memoizedState=v.memoizedState,R.updateQueue=v.updateQueue,w=v.dependencies,R.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext},R.sibling=v.sibling,R.index=v.index,R.ref=v.ref,R}function fS(v,w,R,D,W,J){var fe=2;if(D=v,typeof v=="function")xC(v)&&(fe=1);else if(typeof v=="string")fe=5;else e:switch(v){case I:return tp(R.children,W,J,w);case C:fe=8,W|=8;break;case A:return v=Ka(12,R,w,W|2),v.elementType=A,v.lanes=J,v;case B:return v=Ka(13,R,w,W),v.elementType=B,v.lanes=J,v;case $:return v=Ka(19,R,w,W),v.elementType=$,v.lanes=J,v;case K:return hS(R,W,J,w);default:if(typeof v=="object"&&v!==null)switch(v.$$typeof){case M:fe=10;break e;case k:fe=9;break e;case O:fe=11;break e;case U:fe=14;break e;case q:fe=16,D=null;break e}throw Error(n(130,v==null?v:typeof v,""))}return w=Ka(fe,R,w,W),w.elementType=v,w.type=D,w.lanes=J,w}function tp(v,w,R,D){return v=Ka(7,v,D,w),v.lanes=R,v}function hS(v,w,R,D){return v=Ka(22,v,D,w),v.elementType=K,v.lanes=R,v.stateNode={isHidden:!1},v}function wC(v,w,R){return v=Ka(6,v,null,w),v.lanes=R,v}function _C(v,w,R){return w=Ka(4,v.children!==null?v.children:[],v.key,w),w.lanes=R,w.stateNode={containerInfo:v.containerInfo,pendingChildren:null,implementation:v.implementation},w}function yZ(v,w,R,D,W){this.tag=w,this.containerInfo=v,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hs(0),this.expirationTimes=hs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hs(0),this.identifierPrefix=D,this.onRecoverableError=W,this.mutableSourceEagerHydrationData=null}function SC(v,w,R,D,W,J,fe,De,Ke){return v=new yZ(v,w,R,De,Ke),w===1?(w=1,J===!0&&(w|=8)):w=0,J=Ka(3,null,null,w),v.current=J,J.stateNode=v,J.memoizedState={element:D,isDehydrated:R,cache:null,transitions:null,pendingSuspenseBoundaries:null},An(J),v}function vZ(v,w,R){var D=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_,key:D==null?null:""+D,children:v,containerInfo:w,implementation:R}}function wN(v){if(!v)return Fl;v=v._reactInternals;e:{if(at(v)!==v||v.tag!==1)throw Error(n(170));var w=v;do{switch(w.tag){case 3:w=w.stateNode.context;break e;case 1:if(ps(w.type)){w=w.stateNode.__reactInternalMemoizedMergedChildContext;break e}}w=w.return}while(w!==null);throw Error(n(171))}if(v.tag===1){var R=v.type;if(ps(R))return Nh(v,R,w)}return w}function _N(v,w,R,D,W,J,fe,De,Ke){return v=SC(R,D,!0,v,W,J,fe,De,Ke),v.context=wN(null),R=v.current,D=bo(),W=If(R),J=Er(D,W),J.callback=w??null,Kr(R,J,W),v.current.lanes=W,Ui(v,W,D),zo(v,D),v}function pS(v,w,R,D){var W=w.current,J=bo(),fe=If(W);return R=wN(R),w.context===null?w.context=R:w.pendingContext=R,w=Er(J,fe),w.payload={element:v},D=D===void 0?null:D,D!==null&&(w.callback=D),v=Kr(W,w,fe),v!==null&&(Zl(v,W,fe,J),ms(v,W,fe)),fe}function mS(v){if(v=v.current,!v.child)return null;switch(v.child.tag){case 5:return v.child.stateNode;default:return v.child.stateNode}}function SN(v,w){if(v=v.memoizedState,v!==null&&v.dehydrated!==null){var R=v.retryLane;v.retryLane=R!==0&&R<w?R:w}}function EC(v,w){SN(v,w),(v=v.alternate)&&SN(v,w)}function bZ(){return null}var EN=typeof reportError=="function"?reportError:function(v){console.error(v)};function TC(v){this._internalRoot=v}gS.prototype.render=TC.prototype.render=function(v){var w=this._internalRoot;if(w===null)throw Error(n(409));pS(v,w,null,null)},gS.prototype.unmount=TC.prototype.unmount=function(){var v=this._internalRoot;if(v!==null){this._internalRoot=null;var w=v.containerInfo;Jh(function(){pS(null,v,null,null)}),w[ho]=null}};function gS(v){this._internalRoot=v}gS.prototype.unstable_scheduleHydration=function(v){if(v){var w=qm();v={blockedOn:null,target:v,priority:w};for(var R=0;R<Pc.length&&w!==0&&w<Pc[R].priority;R++);Pc.splice(R,0,v),R===0&&Xm(v)}};function IC(v){return!(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)}function yS(v){return!(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11&&(v.nodeType!==8||v.nodeValue!==" react-mount-point-unstable "))}function TN(){}function xZ(v,w,R,D,W){if(W){if(typeof D=="function"){var J=D;D=function(){var ht=mS(fe);J.call(ht)}}var fe=_N(w,D,v,0,null,!1,!1,"",TN);return v._reactRootContainer=fe,v[ho]=fe.current,ff(v.nodeType===8?v.parentNode:v),Jh(),fe}for(;W=v.lastChild;)v.removeChild(W);if(typeof D=="function"){var De=D;D=function(){var ht=mS(Ke);De.call(ht)}}var Ke=SC(v,0,!1,null,null,!1,!1,"",TN);return v._reactRootContainer=Ke,v[ho]=Ke.current,ff(v.nodeType===8?v.parentNode:v),Jh(function(){pS(w,Ke,R,D)}),Ke}function vS(v,w,R,D,W){var J=R._reactRootContainer;if(J){var fe=J;if(typeof W=="function"){var De=W;W=function(){var Ke=mS(fe);De.call(Ke)}}pS(w,fe,v,W)}else fe=xZ(R,w,v,W,D);return mS(fe)}yh=function(v){switch(v.tag){case 3:var w=v.stateNode;if(w.current.memoizedState.isDehydrated){var R=$n(w.pendingLanes);R!==0&&(ui(w,R|1),zo(w,st()),(hr&6)===0&&(z0=st()+500,Ha()))}break;case 13:Jh(function(){var D=da(v,1);if(D!==null){var W=bo();Zl(D,v,1,W)}}),EC(v,1)}},Av=function(v){if(v.tag===13){var w=da(v,134217728);if(w!==null){var R=bo();Zl(w,v,134217728,R)}EC(v,134217728)}},C_=function(v){if(v.tag===13){var w=If(v),R=da(v,w);if(R!==null){var D=bo();Zl(R,v,w,D)}EC(v,w)}},qm=function(){return Gn},Km=function(v,w){var R=Gn;try{return Gn=v,w()}finally{Gn=R}},Xe=function(v,w,R){switch(w){case"input":if(He(v,R),w=R.name,R.type==="radio"&&w!=null){for(R=v;R.parentNode;)R=R.parentNode;for(R=R.querySelectorAll("input[name="+JSON.stringify(""+w)+'][type="radio"]'),w=0;w<R.length;w++){var D=R[w];if(D!==v&&D.form===v.form){var W=E0(D);if(!W)throw Error(n(90));Oe(D),He(D,W)}}}break;case"textarea":Ne(v,R);break;case"select":w=R.value,w!=null&&ee(v,!!R.multiple,w,!1)}},Kt=yC,Zt=Jh;var wZ={usingClientEntryPoint:!1,Events:[Bl,di,E0,gt,Tt,yC]},Sb={findFiberByHostInstance:Nc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_Z={bundleType:Sb.bundleType,version:Sb.version,rendererPackageName:Sb.rendererPackageName,rendererConfig:Sb.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:S.ReactCurrentDispatcher,findHostInstanceByFiber:function(v){return v=nn(v),v===null?null:v.stateNode},findFiberByHostInstance:Sb.findFiberByHostInstance||bZ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bS.isDisabled&&bS.supportsFiber)try{an=bS.inject(_Z),Ot=bS}catch{}}return Ho.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wZ,Ho.createPortal=function(v,w){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!IC(w))throw Error(n(200));return vZ(v,w,null,R)},Ho.createRoot=function(v,w){if(!IC(v))throw Error(n(299));var R=!1,D="",W=EN;return w!=null&&(w.unstable_strictMode===!0&&(R=!0),w.identifierPrefix!==void 0&&(D=w.identifierPrefix),w.onRecoverableError!==void 0&&(W=w.onRecoverableError)),w=SC(v,1,!1,null,null,R,!1,D,W),v[ho]=w.current,ff(v.nodeType===8?v.parentNode:v),new TC(w)},Ho.findDOMNode=function(v){if(v==null)return null;if(v.nodeType===1)return v;var w=v._reactInternals;if(w===void 0)throw typeof v.render=="function"?Error(n(188)):(v=Object.keys(v).join(","),Error(n(268,v)));return v=nn(w),v=v===null?null:v.stateNode,v},Ho.flushSync=function(v){return Jh(v)},Ho.hydrate=function(v,w,R){if(!yS(w))throw Error(n(200));return vS(null,v,w,!0,R)},Ho.hydrateRoot=function(v,w,R){if(!IC(v))throw Error(n(405));var D=R!=null&&R.hydratedSources||null,W=!1,J="",fe=EN;if(R!=null&&(R.unstable_strictMode===!0&&(W=!0),R.identifierPrefix!==void 0&&(J=R.identifierPrefix),R.onRecoverableError!==void 0&&(fe=R.onRecoverableError)),w=_N(w,null,v,1,R??null,W,!1,J,fe),v[ho]=w.current,ff(v),D)for(v=0;v<D.length;v++)R=D[v],W=R._getVersion,W=W(R._source),w.mutableSourceEagerHydrationData==null?w.mutableSourceEagerHydrationData=[R,W]:w.mutableSourceEagerHydrationData.push(R,W);return new gS(w)},Ho.render=function(v,w,R){if(!yS(w))throw Error(n(200));return vS(null,v,w,!1,R)},Ho.unmountComponentAtNode=function(v){if(!yS(v))throw Error(n(40));return v._reactRootContainer?(Jh(function(){vS(null,null,v,!1,function(){v._reactRootContainer=null,v[ho]=null})}),!0):!1},Ho.unstable_batchedUpdates=yC,Ho.unstable_renderSubtreeIntoContainer=function(v,w,R,D){if(!yS(R))throw Error(n(200));if(v==null||v._reactInternals===void 0)throw Error(n(38));return vS(v,w,R,!1,D)},Ho.version="18.3.1-next-f1338f8080-20240426",Ho}var ON;function u$(){if(ON)return MC.exports;ON=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),MC.exports=RZ(),MC.exports}var NN;function kZ(){if(NN)return xS;NN=1;var t=u$();return xS.createRoot=t.createRoot,xS.hydrateRoot=t.hydrateRoot,xS}var OZ=kZ();const NZ=ah(OZ),Yx={black:"#000",white:"#fff"},V0={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},W0={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},j0={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},q0={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},K0={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},Tb={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},LZ={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function Bd(t,...e){const n=new URL(`https://mui.com/production-error/?code=${t}`);return e.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${t}; visit ${n} for the full message.`}const Zc="$$material";function z(){return z=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},z.apply(null,arguments)}var N=uu();const qt=ah(N),HT=IZ({__proto__:null,default:qt},[N]);function DZ(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function BZ(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var FZ=function(){function t(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(BZ(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=DZ(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t}(),Js="-ms-",VT="-moz-",br="-webkit-",d$="comm",qk="rule",Kk="decl",UZ="@import",f$="@keyframes",$Z="@layer",zZ=Math.abs,fI=String.fromCharCode,HZ=Object.assign;function VZ(t,e){return Ls(t,0)^45?(((e<<2^Ls(t,0))<<2^Ls(t,1))<<2^Ls(t,2))<<2^Ls(t,3):0}function h$(t){return t.trim()}function WZ(t,e){return(t=e.exec(t))?t[0]:t}function xr(t,e,n){return t.replace(e,n)}function sR(t,e){return t.indexOf(e)}function Ls(t,e){return t.charCodeAt(e)|0}function Zx(t,e,n){return t.slice(e,n)}function qc(t){return t.length}function Gk(t){return t.length}function wS(t,e){return e.push(t),t}function jZ(t,e){return t.map(e).join("")}var hI=1,Ny=1,p$=0,ra=0,Gi=0,rv="";function pI(t,e,n,r,i,s,o){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:hI,column:Ny,length:o,return:""}}function Ib(t,e){return HZ(pI("",null,null,"",null,null,0),t,{length:-t.length},e)}function qZ(){return Gi}function KZ(){return Gi=ra>0?Ls(rv,--ra):0,Ny--,Gi===10&&(Ny=1,hI--),Gi}function Ra(){return Gi=ra<p$?Ls(rv,ra++):0,Ny++,Gi===10&&(Ny=1,hI++),Gi}function Jc(){return Ls(rv,ra)}function vT(){return ra}function Nw(t,e){return Zx(rv,t,e)}function Jx(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function m$(t){return hI=Ny=1,p$=qc(rv=t),ra=0,[]}function g$(t){return rv="",t}function bT(t){return h$(Nw(ra-1,oR(t===91?t+2:t===40?t+1:t)))}function GZ(t){for(;(Gi=Jc())&&Gi<33;)Ra();return Jx(t)>2||Jx(Gi)>3?"":" "}function XZ(t,e){for(;--e&&Ra()&&!(Gi<48||Gi>102||Gi>57&&Gi<65||Gi>70&&Gi<97););return Nw(t,vT()+(e<6&&Jc()==32&&Ra()==32))}function oR(t){for(;Ra();)switch(Gi){case t:return ra;case 34:case 39:t!==34&&t!==39&&oR(Gi);break;case 40:t===41&&oR(t);break;case 92:Ra();break}return ra}function YZ(t,e){for(;Ra()&&t+Gi!==57;)if(t+Gi===84&&Jc()===47)break;return"/*"+Nw(e,ra-1)+"*"+fI(t===47?t:Ra())}function ZZ(t){for(;!Jx(Jc());)Ra();return Nw(t,ra)}function JZ(t){return g$(xT("",null,null,null,[""],t=m$(t),0,[0],t))}function xT(t,e,n,r,i,s,o,a,c){for(var l=0,u=0,d=o,h=0,f=0,p=0,g=1,m=1,y=1,b=0,x="",S=i,P=s,_=r,I=x;m;)switch(p=b,b=Ra()){case 40:if(p!=108&&Ls(I,d-1)==58){sR(I+=xr(bT(b),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:I+=bT(b);break;case 9:case 10:case 13:case 32:I+=GZ(p);break;case 92:I+=XZ(vT()-1,7);continue;case 47:switch(Jc()){case 42:case 47:wS(QZ(YZ(Ra(),vT()),e,n),c);break;default:I+="/"}break;case 123*g:a[l++]=qc(I)*y;case 125*g:case 59:case 0:switch(b){case 0:case 125:m=0;case 59+u:y==-1&&(I=xr(I,/\f/g,"")),f>0&&qc(I)-d&&wS(f>32?DN(I+";",r,n,d-1):DN(xr(I," ","")+";",r,n,d-2),c);break;case 59:I+=";";default:if(wS(_=LN(I,e,n,l,u,i,a,x,S=[],P=[],d),s),b===123)if(u===0)xT(I,e,_,_,S,s,d,a,P);else switch(h===99&&Ls(I,3)===110?100:h){case 100:case 108:case 109:case 115:xT(t,_,_,r&&wS(LN(t,_,_,0,0,i,a,x,i,S=[],d),P),i,P,d,a,r?S:P);break;default:xT(I,_,_,_,[""],P,0,a,P)}}l=u=f=0,g=y=1,x=I="",d=o;break;case 58:d=1+qc(I),f=p;default:if(g<1){if(b==123)--g;else if(b==125&&g++==0&&KZ()==125)continue}switch(I+=fI(b),b*g){case 38:y=u>0?1:(I+="\f",-1);break;case 44:a[l++]=(qc(I)-1)*y,y=1;break;case 64:Jc()===45&&(I+=bT(Ra())),h=Jc(),u=d=qc(x=I+=ZZ(vT())),b++;break;case 45:p===45&&qc(I)==2&&(g=0)}}return s}function LN(t,e,n,r,i,s,o,a,c,l,u){for(var d=i-1,h=i===0?s:[""],f=Gk(h),p=0,g=0,m=0;p<r;++p)for(var y=0,b=Zx(t,d+1,d=zZ(g=o[p])),x=t;y<f;++y)(x=h$(g>0?h[y]+" "+b:xr(b,/&\f/g,h[y])))&&(c[m++]=x);return pI(t,e,n,i===0?qk:a,c,l,u)}function QZ(t,e,n){return pI(t,e,n,d$,fI(qZ()),Zx(t,2,-2),0)}function DN(t,e,n,r){return pI(t,e,n,Kk,Zx(t,0,r),Zx(t,r+1,-1),r)}function xy(t,e){for(var n="",r=Gk(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function eJ(t,e,n,r){switch(t.type){case $Z:if(t.children.length)break;case UZ:case Kk:return t.return=t.return||t.value;case d$:return"";case f$:return t.return=t.value+"{"+xy(t.children,r)+"}";case qk:t.value=t.props.join(",")}return qc(n=xy(t.children,r))?t.return=t.value+"{"+n+"}":""}function tJ(t){var e=Gk(t);return function(n,r,i,s){for(var o="",a=0;a<e;a++)o+=t[a](n,r,i,s)||"";return o}}function nJ(t){return function(e){e.root||(e=e.return)&&t(e)}}function y$(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var rJ=function(e,n,r){for(var i=0,s=0;i=s,s=Jc(),i===38&&s===12&&(n[r]=1),!Jx(s);)Ra();return Nw(e,ra)},iJ=function(e,n){var r=-1,i=44;do switch(Jx(i)){case 0:i===38&&Jc()===12&&(n[r]=1),e[r]+=rJ(ra-1,n,r);break;case 2:e[r]+=bT(i);break;case 4:if(i===44){e[++r]=Jc()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=fI(i)}while(i=Ra());return e},sJ=function(e,n){return g$(iJ(m$(e),n))},BN=new WeakMap,oJ=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!BN.get(r))&&!i){BN.set(e,!0);for(var s=[],o=sJ(n,s),a=r.props,c=0,l=0;c<o.length;c++)for(var u=0;u<a.length;u++,l++)e.props[l]=s[c]?o[c].replace(/&\f/g,a[u]):a[u]+" "+o[c]}}},aJ=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function v$(t,e){switch(VZ(t,e)){case 5103:return br+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return br+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return br+t+VT+t+Js+t+t;case 6828:case 4268:return br+t+Js+t+t;case 6165:return br+t+Js+"flex-"+t+t;case 5187:return br+t+xr(t,/(\w+).+(:[^]+)/,br+"box-$1$2"+Js+"flex-$1$2")+t;case 5443:return br+t+Js+"flex-item-"+xr(t,/flex-|-self/,"")+t;case 4675:return br+t+Js+"flex-line-pack"+xr(t,/align-content|flex-|-self/,"")+t;case 5548:return br+t+Js+xr(t,"shrink","negative")+t;case 5292:return br+t+Js+xr(t,"basis","preferred-size")+t;case 6060:return br+"box-"+xr(t,"-grow","")+br+t+Js+xr(t,"grow","positive")+t;case 4554:return br+xr(t,/([^-])(transform)/g,"$1"+br+"$2")+t;case 6187:return xr(xr(xr(t,/(zoom-|grab)/,br+"$1"),/(image-set)/,br+"$1"),t,"")+t;case 5495:case 3959:return xr(t,/(image-set\([^]*)/,br+"$1$`$1");case 4968:return xr(xr(t,/(.+:)(flex-)?(.*)/,br+"box-pack:$3"+Js+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+br+t+t;case 4095:case 3583:case 4068:case 2532:return xr(t,/(.+)-inline(.+)/,br+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(qc(t)-1-e>6)switch(Ls(t,e+1)){case 109:if(Ls(t,e+4)!==45)break;case 102:return xr(t,/(.+:)(.+)-([^]+)/,"$1"+br+"$2-$3$1"+VT+(Ls(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~sR(t,"stretch")?v$(xr(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Ls(t,e+1)!==115)break;case 6444:switch(Ls(t,qc(t)-3-(~sR(t,"!important")&&10))){case 107:return xr(t,":",":"+br)+t;case 101:return xr(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+br+(Ls(t,14)===45?"inline-":"")+"box$3$1"+br+"$2$3$1"+Js+"$2box$3")+t}break;case 5936:switch(Ls(t,e+11)){case 114:return br+t+Js+xr(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return br+t+Js+xr(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return br+t+Js+xr(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return br+t+Js+t+t}return t}var lJ=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case Kk:e.return=v$(e.value,e.length);break;case f$:return xy([Ib(e,{value:xr(e.value,"@","@"+br)})],i);case qk:if(e.length)return jZ(e.props,function(s){switch(WZ(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return xy([Ib(e,{props:[xr(s,/:(read-\w+)/,":"+VT+"$1")]})],i);case"::placeholder":return xy([Ib(e,{props:[xr(s,/:(plac\w+)/,":"+br+"input-$1")]}),Ib(e,{props:[xr(s,/:(plac\w+)/,":"+VT+"$1")]}),Ib(e,{props:[xr(s,/:(plac\w+)/,Js+"input-$1")]})],i)}return""})}},cJ=[lJ],b$=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(g){var m=g.getAttribute("data-emotion");m.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var i=e.stylisPlugins||cJ,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(g){for(var m=g.getAttribute("data-emotion").split(" "),y=1;y<m.length;y++)s[m[y]]=!0;a.push(g)});var c,l=[oJ,aJ];{var u,d=[eJ,nJ(function(g){u.insert(g)})],h=tJ(l.concat(i,d)),f=function(m){return xy(JZ(m),h)};c=function(m,y,b,x){u=b,f(m?m+"{"+y.styles+"}":y.styles),x&&(p.inserted[y.name]=!0)}}var p={key:n,sheet:new FZ({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:c};return p.sheet.hydrate(a),p},kC={exports:{}},Tr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FN;function uJ(){if(FN)return Tr;FN=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,s=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,a=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.async_mode"):60111,l=t?Symbol.for("react.concurrent_mode"):60111,u=t?Symbol.for("react.forward_ref"):60112,d=t?Symbol.for("react.suspense"):60113,h=t?Symbol.for("react.suspense_list"):60120,f=t?Symbol.for("react.memo"):60115,p=t?Symbol.for("react.lazy"):60116,g=t?Symbol.for("react.block"):60121,m=t?Symbol.for("react.fundamental"):60117,y=t?Symbol.for("react.responder"):60118,b=t?Symbol.for("react.scope"):60119;function x(P){if(typeof P=="object"&&P!==null){var _=P.$$typeof;switch(_){case e:switch(P=P.type,P){case c:case l:case r:case s:case i:case d:return P;default:switch(P=P&&P.$$typeof,P){case a:case u:case p:case f:case o:return P;default:return _}}case n:return _}}}function S(P){return x(P)===l}return Tr.AsyncMode=c,Tr.ConcurrentMode=l,Tr.ContextConsumer=a,Tr.ContextProvider=o,Tr.Element=e,Tr.ForwardRef=u,Tr.Fragment=r,Tr.Lazy=p,Tr.Memo=f,Tr.Portal=n,Tr.Profiler=s,Tr.StrictMode=i,Tr.Suspense=d,Tr.isAsyncMode=function(P){return S(P)||x(P)===c},Tr.isConcurrentMode=S,Tr.isContextConsumer=function(P){return x(P)===a},Tr.isContextProvider=function(P){return x(P)===o},Tr.isElement=function(P){return typeof P=="object"&&P!==null&&P.$$typeof===e},Tr.isForwardRef=function(P){return x(P)===u},Tr.isFragment=function(P){return x(P)===r},Tr.isLazy=function(P){return x(P)===p},Tr.isMemo=function(P){return x(P)===f},Tr.isPortal=function(P){return x(P)===n},Tr.isProfiler=function(P){return x(P)===s},Tr.isStrictMode=function(P){return x(P)===i},Tr.isSuspense=function(P){return x(P)===d},Tr.isValidElementType=function(P){return typeof P=="string"||typeof P=="function"||P===r||P===l||P===s||P===i||P===d||P===h||typeof P=="object"&&P!==null&&(P.$$typeof===p||P.$$typeof===f||P.$$typeof===o||P.$$typeof===a||P.$$typeof===u||P.$$typeof===m||P.$$typeof===y||P.$$typeof===b||P.$$typeof===g)},Tr.typeOf=x,Tr}var UN;function dJ(){return UN||(UN=1,kC.exports=uJ()),kC.exports}var OC,$N;function fJ(){if($N)return OC;$N=1;var t=dJ(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[t.ForwardRef]=r,s[t.Memo]=i;function o(p){return t.isMemo(p)?i:s[p.$$typeof]||e}var a=Object.defineProperty,c=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,h=Object.prototype;function f(p,g,m){if(typeof g!="string"){if(h){var y=d(g);y&&y!==h&&f(p,y,m)}var b=c(g);l&&(b=b.concat(l(g)));for(var x=o(p),S=o(g),P=0;P<b.length;++P){var _=b[P];if(!n[_]&&!(m&&m[_])&&!(S&&S[_])&&!(x&&x[_])){var I=u(g,_);try{a(p,_,I)}catch{}}}}return p}return OC=f,OC}fJ();var hJ=!0;function x$(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(r+=i+" ")}),r}var Xk=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||hJ===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},Yk=function(e,n,r){Xk(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function pJ(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var mJ={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},gJ=/[A-Z]|^ms/g,yJ=/_EMO_([^_]+?)_([^]*?)_EMO_/g,w$=function(e){return e.charCodeAt(1)===45},zN=function(e){return e!=null&&typeof e!="boolean"},NC=y$(function(t){return w$(t)?t:t.replace(gJ,"-$&").toLowerCase()}),HN=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(yJ,function(r,i,s){return Kc={name:i,styles:s,next:Kc},i})}return mJ[e]!==1&&!w$(e)&&typeof n=="number"&&n!==0?n+"px":n};function Qx(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Kc={name:i.name,styles:i.styles,next:Kc},i.name;var s=n;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)Kc={name:o.name,styles:o.styles,next:Kc},o=o.next;var a=s.styles+";";return a}return vJ(t,e,n)}case"function":{if(t!==void 0){var c=Kc,l=n(t);return Kc=c,Qx(t,e,l)}break}}var u=n;if(e==null)return u;var d=e[u];return d!==void 0?d:u}function vJ(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Qx(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object"){var a=o;e!=null&&e[a]!==void 0?r+=s+"{"+e[a]+"}":zN(a)&&(r+=NC(s)+":"+HN(s,a)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var c=0;c<o.length;c++)zN(o[c])&&(r+=NC(s)+":"+HN(s,o[c])+";");else{var l=Qx(t,e,o);switch(s){case"animation":case"animationName":{r+=NC(s)+":"+l+";";break}default:r+=s+"{"+l+"}"}}}return r}var VN=/label:\s*([^\s;{]+)\s*(;|$)/g,Kc;function Lw(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";Kc=void 0;var s=t[0];if(s==null||s.raw===void 0)r=!1,i+=Qx(n,e,s);else{var o=s;i+=o[0]}for(var a=1;a<t.length;a++)if(i+=Qx(n,e,t[a]),r){var c=s;i+=c[a]}VN.lastIndex=0;for(var l="",u;(u=VN.exec(i))!==null;)l+="-"+u[1];var d=pJ(i)+l;return{name:d,styles:i,next:Kc}}var bJ=function(e){return e()},_$=HT.useInsertionEffect?HT.useInsertionEffect:!1,S$=_$||bJ,WN=_$||N.useLayoutEffect,E$=N.createContext(typeof HTMLElement<"u"?b$({key:"css"}):null),xJ=E$.Provider,Zk=function(e){return N.forwardRef(function(n,r){var i=N.useContext(E$);return e(n,i,r)})},lh=N.createContext({}),Jk={}.hasOwnProperty,aR="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",wJ=function(e,n){var r={};for(var i in n)Jk.call(n,i)&&(r[i]=n[i]);return r[aR]=e,r},_J=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return Xk(n,r,i),S$(function(){return Yk(n,r,i)}),null},SJ=Zk(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=t[aR],s=[r],o="";typeof t.className=="string"?o=x$(e.registered,s,t.className):t.className!=null&&(o=t.className+" ");var a=Lw(s,void 0,N.useContext(lh));o+=e.key+"-"+a.name;var c={};for(var l in t)Jk.call(t,l)&&l!=="css"&&l!==aR&&(c[l]=t[l]);return c.className=o,n&&(c.ref=n),N.createElement(N.Fragment,null,N.createElement(_J,{cache:e,serialized:a,isStringTag:typeof i=="string"}),N.createElement(i,c))}),EJ=SJ,jN=function(e,n){var r=arguments;if(n==null||!Jk.call(n,"css"))return N.createElement.apply(void 0,r);var i=r.length,s=new Array(i);s[0]=EJ,s[1]=wJ(e,n);for(var o=2;o<i;o++)s[o]=r[o];return N.createElement.apply(null,s)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(jN||(jN={}));var T$=Zk(function(t,e){var n=t.styles,r=Lw([n],void 0,N.useContext(lh)),i=N.useRef();return WN(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,c=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),c!==null&&(a=!0,c.setAttribute("data-emotion",s),o.hydrate([c])),i.current=[o,a],function(){o.flush()}},[e]),WN(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&Yk(e,r.next,!0),o.tags.length){var c=o.tags[o.tags.length-1].nextElementSibling;o.before=c,o.flush()}e.insert("",r,o,!1)},[e,r.name]),null});function Io(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Lw(e)}function Zi(){var t=Io.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var TJ=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,IJ=y$(function(t){return TJ.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),PJ=IJ,CJ=function(e){return e!=="theme"},qN=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?PJ:CJ},KN=function(e,n,r){var i;if(n){var s=n.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},MJ=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return Xk(n,r,i),S$(function(){return Yk(n,r,i)}),null},AJ=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,o;n!==void 0&&(s=n.label,o=n.target);var a=KN(e,n,r),c=a||qN(i),l=!c("as");return function(){var u=arguments,d=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&d.push("label:"+s+";"),u[0]==null||u[0].raw===void 0)d.push.apply(d,u);else{var h=u[0];d.push(h[0]);for(var f=u.length,p=1;p<f;p++)d.push(u[p],h[p])}var g=Zk(function(m,y,b){var x=l&&m.as||i,S="",P=[],_=m;if(m.theme==null){_={};for(var I in m)_[I]=m[I];_.theme=N.useContext(lh)}typeof m.className=="string"?S=x$(y.registered,P,m.className):m.className!=null&&(S=m.className+" ");var C=Lw(d.concat(P),y.registered,_);S+=y.key+"-"+C.name,o!==void 0&&(S+=" "+o);var A=l&&a===void 0?qN(x):c,M={};for(var k in m)l&&k==="as"||A(k)&&(M[k]=m[k]);return M.className=S,b&&(M.ref=b),N.createElement(N.Fragment,null,N.createElement(MJ,{cache:y,serialized:C,isStringTag:typeof x=="string"}),N.createElement(x,M))});return g.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",g.defaultProps=e.defaultProps,g.__emotion_real=g,g.__emotion_base=i,g.__emotion_styles=d,g.__emotion_forwardProp=a,Object.defineProperty(g,"toString",{value:function(){return"."+o}}),g.withComponent=function(m,y){var b=t(m,z({},n,y,{shouldForwardProp:KN(g,y,!0)}));return b.apply(void 0,d)},g}},RJ=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],WT=AJ.bind(null);RJ.forEach(function(t){WT[t]=WT(t)});function kJ(t){return t==null||Object.keys(t).length===0}function I$(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(kJ(i)?n:i):e;return H.jsx(T$,{styles:r})}function P$(t,e){return WT(t,e)}function OJ(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}const GN=[];function XN(t){return GN[0]=t,Lw(GN)}var LC={exports:{}},Lr={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YN;function NJ(){if(YN)return Lr;YN=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),l=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.for("react.view_transition"),f=Symbol.for("react.client.reference");function p(g){if(typeof g=="object"&&g!==null){var m=g.$$typeof;switch(m){case t:switch(g=g.type,g){case n:case i:case r:case c:case l:case h:return g;default:switch(g=g&&g.$$typeof,g){case o:case a:case d:case u:return g;case s:return g;default:return m}}case e:return m}}}return Lr.ContextConsumer=s,Lr.ContextProvider=o,Lr.Element=t,Lr.ForwardRef=a,Lr.Fragment=n,Lr.Lazy=d,Lr.Memo=u,Lr.Portal=e,Lr.Profiler=i,Lr.StrictMode=r,Lr.Suspense=c,Lr.SuspenseList=l,Lr.isContextConsumer=function(g){return p(g)===s},Lr.isContextProvider=function(g){return p(g)===o},Lr.isElement=function(g){return typeof g=="object"&&g!==null&&g.$$typeof===t},Lr.isForwardRef=function(g){return p(g)===a},Lr.isFragment=function(g){return p(g)===n},Lr.isLazy=function(g){return p(g)===d},Lr.isMemo=function(g){return p(g)===u},Lr.isPortal=function(g){return p(g)===e},Lr.isProfiler=function(g){return p(g)===i},Lr.isStrictMode=function(g){return p(g)===r},Lr.isSuspense=function(g){return p(g)===c},Lr.isSuspenseList=function(g){return p(g)===l},Lr.isValidElementType=function(g){return typeof g=="string"||typeof g=="function"||g===n||g===i||g===r||g===c||g===l||typeof g=="object"&&g!==null&&(g.$$typeof===d||g.$$typeof===u||g.$$typeof===o||g.$$typeof===s||g.$$typeof===a||g.$$typeof===f||g.getModuleId!==void 0)},Lr.typeOf=p,Lr}var ZN;function LJ(){return ZN||(ZN=1,LC.exports=NJ()),LC.exports}var C$=LJ();function Gc(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function M$(t){if(N.isValidElement(t)||C$.isValidElementType(t)||!Gc(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=M$(t[n])}),e}function no(t,e,n={clone:!0}){const r=n.clone?{...t}:t;return Gc(t)&&Gc(e)&&Object.keys(e).forEach(i=>{N.isValidElement(e[i])||C$.isValidElementType(e[i])?r[i]=e[i]:Gc(e[i])&&Object.prototype.hasOwnProperty.call(t,i)&&Gc(t[i])?r[i]=no(t[i],e[i],n):n.clone?r[i]=Gc(e[i])?M$(e[i]):e[i]:r[i]=e[i]}),r}const DJ=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function BJ(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...i}=t,s=DJ(e),o=Object.keys(s);function a(h){return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n})`}function c(h){return`@media (max-width:${(typeof e[h]=="number"?e[h]:h)-r/100}${n})`}function l(h,f){const p=o.indexOf(f);return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n}) and (max-width:${(p!==-1&&typeof e[o[p]]=="number"?e[o[p]]:f)-r/100}${n})`}function u(h){return o.indexOf(h)+1<o.length?l(h,o[o.indexOf(h)+1]):a(h)}function d(h){const f=o.indexOf(h);return f===0?a(o[1]):f===o.length-1?c(o[f]):l(h,o[o.indexOf(h)+1]).replace("@media","@media not all and")}return{keys:o,values:s,up:a,down:c,between:l,only:u,not:d,unit:n,...i}}function FJ(t,e){if(!t.containerQueries)return e;const n=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,i)=>{var o,a;const s=/min-width:\s*([0-9.]+)/;return+(((o=r.match(s))==null?void 0:o[1])||0)-+(((a=i.match(s))==null?void 0:a[1])||0)});return n.length?n.reduce((r,i)=>{const s=e[i];return delete r[i],r[i]=s,r},{...e}):e}function UJ(t,e){return e==="@"||e.startsWith("@")&&(t.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function $J(t,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,s=Number.isNaN(+r)?r||0:+r;return t.containerQueries(i).up(s)}function zJ(t){const e=(s,o)=>s.replace("@media",o?`@container ${o}`:"@container");function n(s,o){s.up=(...a)=>e(t.breakpoints.up(...a),o),s.down=(...a)=>e(t.breakpoints.down(...a),o),s.between=(...a)=>e(t.breakpoints.between(...a),o),s.only=(...a)=>e(t.breakpoints.only(...a),o),s.not=(...a)=>{const c=e(t.breakpoints.not(...a),o);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const r={},i=s=>(n(r,s),r);return n(i),{...t,containerQueries:i}}const HJ={borderRadius:4};function Cx(t,e){return e?no(t,e,{clone:!1}):t}const mI={xs:0,sm:600,md:900,lg:1200,xl:1536},JN={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${mI[t]}px)`},VJ={containerQueries:t=>({up:e=>{let n=typeof e=="number"?e:mI[e]||e;return typeof n=="number"&&(n=`${n}px`),t?`@container ${t} (min-width:${n})`:`@container (min-width:${n})`}})};function Fd(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const s=r.breakpoints||JN;return e.reduce((o,a,c)=>(o[s.up(s.keys[c])]=n(e[c]),o),{})}if(typeof e=="object"){const s=r.breakpoints||JN;return Object.keys(e).reduce((o,a)=>{if(UJ(s.keys,a)){const c=$J(r.containerQueries?r:VJ,a);c&&(o[c]=n(e[a],a))}else if(Object.keys(s.values||mI).includes(a)){const c=s.up(a);o[c]=n(e[a],a)}else{const c=a;o[c]=e[c]}return o},{})}return n(e)}function WJ(t={}){var n;return((n=t.keys)==null?void 0:n.reduce((r,i)=>{const s=t.up(i);return r[s]={},r},{}))||{}}function jJ(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function dn(t){if(typeof t!="string")throw new Error(Bd(7));return t.charAt(0).toUpperCase()+t.slice(1)}function gI(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function jT(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=gI(t,n)||r,e&&(i=e(i,r,t)),i}function Oi(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,s=o=>{if(o[e]==null)return null;const a=o[e],c=o.theme,l=gI(c,r)||{};return Fd(o,a,d=>{let h=jT(l,i,d);return d===h&&typeof d=="string"&&(h=jT(l,i,`${e}${d==="default"?"":dn(d)}`,d)),n===!1?h:{[n]:h}})};return s.propTypes={},s.filterProps=[e],s}function qJ(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const KJ={m:"margin",p:"padding"},GJ={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},QN={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},XJ=qJ(t=>{if(t.length>2)if(QN[t])t=QN[t];else return[t];const[e,n]=t.split(""),r=KJ[e],i=GJ[n]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),Qk=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],e3=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Qk,...e3];function Dw(t,e,n,r){const i=gI(t,e,!0)??n;return typeof i=="number"||typeof i=="string"?s=>typeof s=="string"?s:typeof i=="string"?i.startsWith("var(")&&s===0?0:i.startsWith("var(")&&s===1?i:`calc(${s} * ${i})`:i*s:Array.isArray(i)?s=>{if(typeof s=="string")return s;const o=Math.abs(s),a=i[o];return s>=0?a:typeof a=="number"?-a:typeof a=="string"&&a.startsWith("var(")?`calc(-1 * ${a})`:`-${a}`}:typeof i=="function"?i:()=>{}}function t3(t){return Dw(t,"spacing",8)}function Bw(t,e){return typeof e=="string"||e==null?e:t(e)}function YJ(t,e){return n=>t.reduce((r,i)=>(r[i]=Bw(e,n),r),{})}function ZJ(t,e,n,r){if(!e.includes(n))return null;const i=XJ(n),s=YJ(i,r),o=t[n];return Fd(t,o,s)}function A$(t,e){const n=t3(t.theme);return Object.keys(t).map(r=>ZJ(t,e,r,n)).reduce(Cx,{})}function Si(t){return A$(t,Qk)}Si.propTypes={};Si.filterProps=Qk;function Ei(t){return A$(t,e3)}Ei.propTypes={};Ei.filterProps=e3;function R$(t=8,e=t3({spacing:t})){if(t.mui)return t;const n=(...r)=>(r.length===0?[1]:r).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function yI(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),n=r=>Object.keys(r).reduce((i,s)=>e[s]?Cx(i,e[s](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function ll(t){return typeof t!="number"?t:`${t}px solid`}function Sl(t,e){return Oi({prop:t,themeKey:"borders",transform:e})}const JJ=Sl("border",ll),QJ=Sl("borderTop",ll),eQ=Sl("borderRight",ll),tQ=Sl("borderBottom",ll),nQ=Sl("borderLeft",ll),rQ=Sl("borderColor"),iQ=Sl("borderTopColor"),sQ=Sl("borderRightColor"),oQ=Sl("borderBottomColor"),aQ=Sl("borderLeftColor"),lQ=Sl("outline",ll),cQ=Sl("outlineColor"),vI=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=Dw(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:Bw(e,r)});return Fd(t,t.borderRadius,n)}return null};vI.propTypes={};vI.filterProps=["borderRadius"];yI(JJ,QJ,eQ,tQ,nQ,rQ,iQ,sQ,oQ,aQ,vI,lQ,cQ);const bI=t=>{if(t.gap!==void 0&&t.gap!==null){const e=Dw(t.theme,"spacing",8),n=r=>({gap:Bw(e,r)});return Fd(t,t.gap,n)}return null};bI.propTypes={};bI.filterProps=["gap"];const xI=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=Dw(t.theme,"spacing",8),n=r=>({columnGap:Bw(e,r)});return Fd(t,t.columnGap,n)}return null};xI.propTypes={};xI.filterProps=["columnGap"];const wI=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=Dw(t.theme,"spacing",8),n=r=>({rowGap:Bw(e,r)});return Fd(t,t.rowGap,n)}return null};wI.propTypes={};wI.filterProps=["rowGap"];const uQ=Oi({prop:"gridColumn"}),dQ=Oi({prop:"gridRow"}),fQ=Oi({prop:"gridAutoFlow"}),hQ=Oi({prop:"gridAutoColumns"}),pQ=Oi({prop:"gridAutoRows"}),mQ=Oi({prop:"gridTemplateColumns"}),gQ=Oi({prop:"gridTemplateRows"}),yQ=Oi({prop:"gridTemplateAreas"}),vQ=Oi({prop:"gridArea"});yI(bI,xI,wI,uQ,dQ,fQ,hQ,pQ,mQ,gQ,yQ,vQ);function wy(t,e){return e==="grey"?e:t}const bQ=Oi({prop:"color",themeKey:"palette",transform:wy}),xQ=Oi({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:wy}),wQ=Oi({prop:"backgroundColor",themeKey:"palette",transform:wy});yI(bQ,xQ,wQ);function Pa(t){return t<=1&&t!==0?`${t*100}%`:t}const _Q=Oi({prop:"width",transform:Pa}),n3=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var i,s,o,a,c;const r=((o=(s=(i=t.theme)==null?void 0:i.breakpoints)==null?void 0:s.values)==null?void 0:o[n])||mI[n];return r?((c=(a=t.theme)==null?void 0:a.breakpoints)==null?void 0:c.unit)!=="px"?{maxWidth:`${r}${t.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:Pa(n)}};return Fd(t,t.maxWidth,e)}return null};n3.filterProps=["maxWidth"];const SQ=Oi({prop:"minWidth",transform:Pa}),EQ=Oi({prop:"height",transform:Pa}),TQ=Oi({prop:"maxHeight",transform:Pa}),IQ=Oi({prop:"minHeight",transform:Pa});Oi({prop:"size",cssProperty:"width",transform:Pa});Oi({prop:"size",cssProperty:"height",transform:Pa});const PQ=Oi({prop:"boxSizing"});yI(_Q,n3,SQ,EQ,TQ,IQ,PQ);const Fw={border:{themeKey:"borders",transform:ll},borderTop:{themeKey:"borders",transform:ll},borderRight:{themeKey:"borders",transform:ll},borderBottom:{themeKey:"borders",transform:ll},borderLeft:{themeKey:"borders",transform:ll},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ll},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:vI},color:{themeKey:"palette",transform:wy},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:wy},backgroundColor:{themeKey:"palette",transform:wy},p:{style:Ei},pt:{style:Ei},pr:{style:Ei},pb:{style:Ei},pl:{style:Ei},px:{style:Ei},py:{style:Ei},padding:{style:Ei},paddingTop:{style:Ei},paddingRight:{style:Ei},paddingBottom:{style:Ei},paddingLeft:{style:Ei},paddingX:{style:Ei},paddingY:{style:Ei},paddingInline:{style:Ei},paddingInlineStart:{style:Ei},paddingInlineEnd:{style:Ei},paddingBlock:{style:Ei},paddingBlockStart:{style:Ei},paddingBlockEnd:{style:Ei},m:{style:Si},mt:{style:Si},mr:{style:Si},mb:{style:Si},ml:{style:Si},mx:{style:Si},my:{style:Si},margin:{style:Si},marginTop:{style:Si},marginRight:{style:Si},marginBottom:{style:Si},marginLeft:{style:Si},marginX:{style:Si},marginY:{style:Si},marginInline:{style:Si},marginInlineStart:{style:Si},marginInlineEnd:{style:Si},marginBlock:{style:Si},marginBlockStart:{style:Si},marginBlockEnd:{style:Si},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:bI},rowGap:{style:wI},columnGap:{style:xI},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Pa},maxWidth:{style:n3},minWidth:{transform:Pa},height:{transform:Pa},maxHeight:{transform:Pa},minHeight:{transform:Pa},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function CQ(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function MQ(t,e){return typeof t=="function"?t(e):t}function AQ(){function t(n,r,i,s){const o={[n]:r,theme:i},a=s[n];if(!a)return{[n]:r};const{cssProperty:c=n,themeKey:l,transform:u,style:d}=a;if(r==null)return null;if(l==="typography"&&r==="inherit")return{[n]:r};const h=gI(i,l)||{};return d?d(o):Fd(o,r,p=>{let g=jT(h,u,p);return p===g&&typeof p=="string"&&(g=jT(h,u,`${n}${p==="default"?"":dn(p)}`,p)),c===!1?g:{[c]:g}})}function e(n){const{sx:r,theme:i={}}=n||{};if(!r)return null;const s=i.unstable_sxConfig??Fw;function o(a){let c=a;if(typeof a=="function")c=a(i);else if(typeof a!="object")return a;if(!c)return null;const l=WJ(i.breakpoints),u=Object.keys(l);let d=l;return Object.keys(c).forEach(h=>{const f=MQ(c[h],i);if(f!=null)if(typeof f=="object")if(s[h])d=Cx(d,t(h,f,i,s));else{const p=Fd({theme:i},f,g=>({[h]:g}));CQ(p,f)?d[h]=e({sx:f,theme:i}):d=Cx(d,p)}else d=Cx(d,t(h,f,i,s))}),FJ(i,jJ(u,d))}return Array.isArray(r)?r.map(o):o(r)}return e}const eh=AQ();eh.filterProps=["sx"];function RQ(t,e){var r;const n=this;if(n.vars){if(!((r=n.colorSchemes)!=null&&r[t])||typeof n.getColorSchemeSelector!="function")return{};let i=n.getColorSchemeSelector(t);return i==="&"?e:((i.includes("data-")||i.includes("."))&&(i=`*:where(${i.replace(/\s*&$/,"")}) &`),{[i]:e})}return n.palette.mode===t?e:{}}function Uw(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:s={},...o}=t,a=BJ(n),c=R$(i);let l=no({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:c,shape:{...HJ,...s}},o);return l=zJ(l),l.applyStyles=RQ,l=e.reduce((u,d)=>no(u,d),l),l.unstable_sxConfig={...Fw,...o==null?void 0:o.unstable_sxConfig},l.unstable_sx=function(d){return eh({sx:d,theme:this})},l}function kQ(t){return Object.keys(t).length===0}function k$(t=null){const e=N.useContext(lh);return!e||kQ(e)?t:e}const OQ=Uw();function $w(t=OQ){return k$(t)}function NQ({styles:t,themeId:e,defaultTheme:n={}}){const r=$w(n),i=typeof t=="function"?t(e&&r[e]||r):t;return H.jsx(I$,{styles:i})}const LQ=t=>{var r;const e={systemProps:{},otherProps:{}},n=((r=t==null?void 0:t.theme)==null?void 0:r.unstable_sxConfig)??Fw;return Object.keys(t).forEach(i=>{n[i]?e.systemProps[i]=t[i]:e.otherProps[i]=t[i]}),e};function r3(t){const{sx:e,...n}=t,{systemProps:r,otherProps:i}=LQ(n);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...o)=>{const a=e(...o);return Gc(a)?{...r,...a}:r}:s={...r,...e},{...i,sx:s}}const e5=t=>t,DQ=()=>{let t=e5;return{configure(e){t=e},generate(e){return t(e)},reset(){t=e5}}},O$=DQ();function N$(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=N$(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Fe(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=N$(t))&&(r&&(r+=" "),r+=e);return r}function BQ(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,s=P$("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(eh);return N.forwardRef(function(c,l){const u=$w(n),{className:d,component:h="div",...f}=r3(c);return H.jsx(s,{as:h,ref:l,className:Fe(d,i?i(r):r),theme:e&&u[e]||u,...f})})}const FQ={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function cr(t,e,n="Mui"){const r=FQ[e];return r?`${n}-${r}`:`${O$.generate(t)}-${e}`}function er(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=cr(t,i,n)}),r}function L$(t){const{variants:e,...n}=t,r={variants:e,style:XN(n),isProcessed:!0};return r.style===n||e&&e.forEach(i=>{typeof i.style!="function"&&(i.style=XN(i.style))}),r}const UQ=Uw();function DC(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function $Q(t){return t?(e,n)=>n[t]:null}function zQ(t,e,n){t.theme=VQ(t.theme)?n:t.theme[e]||t.theme}function wT(t,e){const n=typeof e=="function"?e(t):e;if(Array.isArray(n))return n.flatMap(r=>wT(t,r));if(Array.isArray(n==null?void 0:n.variants)){let r;if(n.isProcessed)r=n.style;else{const{variants:i,...s}=n;r=s}return D$(t,n.variants,[r])}return n!=null&&n.isProcessed?n.style:n}function D$(t,e,n=[]){var i;let r;e:for(let s=0;s<e.length;s+=1){const o=e[s];if(typeof o.props=="function"){if(r??(r={...t,...t.ownerState,ownerState:t.ownerState}),!o.props(r))continue}else for(const a in o.props)if(t[a]!==o.props[a]&&((i=t.ownerState)==null?void 0:i[a])!==o.props[a])continue e;typeof o.style=="function"?(r??(r={...t,...t.ownerState,ownerState:t.ownerState}),n.push(o.style(r))):n.push(o.style)}return n}function B$(t={}){const{themeId:e,defaultTheme:n=UQ,rootShouldForwardProp:r=DC,slotShouldForwardProp:i=DC}=t;function s(a){zQ(a,e,n)}return(a,c={})=>{OJ(a,P=>P.filter(_=>_!==eh));const{name:l,slot:u,skipVariantsResolver:d,skipSx:h,overridesResolver:f=$Q(jQ(u)),...p}=c,g=d!==void 0?d:u&&u!=="Root"&&u!=="root"||!1,m=h||!1;let y=DC;u==="Root"||u==="root"?y=r:u?y=i:WQ(a)&&(y=void 0);const b=P$(a,{shouldForwardProp:y,label:HQ(),...p}),x=P=>{if(typeof P=="function"&&P.__emotion_real!==P)return function(I){return wT(I,P)};if(Gc(P)){const _=L$(P);return _.variants?function(C){return wT(C,_)}:_.style}return P},S=(...P)=>{const _=[],I=P.map(x),C=[];if(_.push(s),l&&f&&C.push(function(O){var q,K;const $=(K=(q=O.theme.components)==null?void 0:q[l])==null?void 0:K.styleOverrides;if(!$)return null;const U={};for(const V in $)U[V]=wT(O,$[V]);return f(O,U)}),l&&!g&&C.push(function(O){var U,q;const B=O.theme,$=(q=(U=B==null?void 0:B.components)==null?void 0:U[l])==null?void 0:q.variants;return $?D$(O,$):null}),m||C.push(eh),Array.isArray(I[0])){const k=I.shift(),O=new Array(_.length).fill(""),B=new Array(C.length).fill("");let $;$=[...O,...k,...B],$.raw=[...O,...k.raw,...B],_.unshift($)}const A=[..._,...I,...C],M=b(...A);return a.muiName&&(M.muiName=a.muiName),M};return b.withConfig&&(S.withConfig=b.withConfig),S}}function HQ(t,e){return void 0}function VQ(t){for(const e in t)return!1;return!0}function WQ(t){return typeof t=="string"&&t.charCodeAt(0)>96}function jQ(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}const F$=B$();function ew(t,e){const n={...e};for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const i=r;if(i==="components"||i==="slots")n[i]={...t[i],...n[i]};else if(i==="componentsProps"||i==="slotProps"){const s=t[i],o=e[i];if(!o)n[i]=s||{};else if(!s)n[i]=o;else{n[i]={...o};for(const a in s)if(Object.prototype.hasOwnProperty.call(s,a)){const c=a;n[i][c]=ew(s[c],o[c])}}}else n[i]===void 0&&(n[i]=t[i])}return n}function qQ(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:ew(e.components[n].defaultProps,r)}function U$({props:t,name:e,defaultTheme:n,themeId:r}){let i=$w(n);return r&&(i=i[r]||i),qQ({theme:i,name:e,props:t})}const Ud=typeof window<"u"?N.useLayoutEffect:N.useEffect;function KQ(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}function i3(t,e=0,n=1){return KQ(t,e,n)}function GQ(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function th(t){if(t.type)return t;if(t.charAt(0)==="#")return th(GQ(t));const e=t.indexOf("("),n=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(Bd(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(Bd(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:n,values:r,colorSpace:i}}const XQ=t=>{const e=th(t);return e.values.slice(0,3).map((n,r)=>e.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},fx=(t,e)=>{try{return XQ(t)}catch{return t}};function _I(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.includes("rgb")?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function $$(t){t=th(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),o=(l,u=(l+n/30)%12)=>i-s*Math.max(Math.min(u-3,9-u,1),-1);let a="rgb";const c=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return t.type==="hsla"&&(a+="a",c.push(e[3])),_I({type:a,values:c})}function lR(t){t=th(t);let e=t.type==="hsl"||t.type==="hsla"?th($$(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function YQ(t,e){const n=lR(t),r=lR(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function dl(t,e){return t=th(t),e=i3(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,_I(t)}function _S(t,e,n){try{return dl(t,e)}catch{return t}}function SI(t,e){if(t=th(t),e=i3(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return _I(t)}function Hr(t,e,n){try{return SI(t,e)}catch{return t}}function EI(t,e){if(t=th(t),e=i3(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return _I(t)}function Vr(t,e,n){try{return EI(t,e)}catch{return t}}function ZQ(t,e=.15){return lR(t)>.5?SI(t,e):EI(t,e)}function SS(t,e,n){try{return ZQ(t,e)}catch{return t}}const z$=N.createContext(null);function s3(){return N.useContext(z$)}const JQ=typeof Symbol=="function"&&Symbol.for,QQ=JQ?Symbol.for("mui.nested"):"__THEME_NESTED__";function eee(t,e){return typeof e=="function"?e(t):{...t,...e}}function tee(t){const{children:e,theme:n}=t,r=s3(),i=N.useMemo(()=>{const s=r===null?{...n}:eee(r,n);return s!=null&&(s[QQ]=r!==null),s},[n,r]);return H.jsx(z$.Provider,{value:i,children:e})}const H$=N.createContext();function nee({value:t,...e}){return H.jsx(H$.Provider,{value:t??!0,...e})}const V$=()=>N.useContext(H$)??!1,W$=N.createContext(void 0);function ree({value:t,children:e}){return H.jsx(W$.Provider,{value:t,children:e})}function iee(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const i=e.components[n];return i.defaultProps?ew(i.defaultProps,r):!i.styleOverrides&&!i.variants?ew(i,r):r}function see({props:t,name:e}){const n=N.useContext(W$);return iee({props:t,name:e,theme:{components:n}})}const t5={};function n5(t,e,n,r=!1){return N.useMemo(()=>{const i=t&&e[t]||e;if(typeof n=="function"){const s=n(i),o=t?{...e,[t]:s}:s;return r?()=>o:o}return t?{...e,[t]:n}:{...e,...n}},[t,e,n,r])}function j$(t){const{children:e,theme:n,themeId:r}=t,i=k$(t5),s=s3()||t5,o=n5(r,i,n),a=n5(r,s,n,!0),c=(r?o[r]:o).direction==="rtl";return H.jsx(tee,{theme:a,children:H.jsx(lh.Provider,{value:o,children:H.jsx(nee,{value:c,children:H.jsx(ree,{value:r?o[r].components:o.components,children:e})})})})}const r5={theme:void 0};function oee(t){let e,n;return function(i){let s=e;return(s===void 0||i.theme!==n)&&(r5.theme=i.theme,s=L$(t(r5)),e=s,n=i.theme),s}}const o3="mode",a3="color-scheme",aee="data-color-scheme";function lee(t){const{defaultMode:e="system",defaultLightColorScheme:n="light",defaultDarkColorScheme:r="dark",modeStorageKey:i=o3,colorSchemeStorageKey:s=a3,attribute:o=aee,colorSchemeNode:a="document.documentElement",nonce:c}=t||{};let l="",u=o;if(o==="class"&&(u=".%s"),o==="data"&&(u="[data-%s]"),u.startsWith(".")){const h=u.substring(1);l+=`${a}.classList.remove('${h}'.replace('%s', light), '${h}'.replace('%s', dark));
      ${a}.classList.add('${h}'.replace('%s', colorScheme));`}const d=u.match(/\[([^\]]+)\]/);if(d){const[h,f]=d[1].split("=");f||(l+=`${a}.removeAttribute('${h}'.replace('%s', light));
      ${a}.removeAttribute('${h}'.replace('%s', dark));`),l+=`
      ${a}.setAttribute('${h}'.replace('%s', colorScheme), ${f?`${f}.replace('%s', colorScheme)`:'""'});`}else l+=`${a}.setAttribute('${u}', colorScheme);`;return H.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?c:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${i}') || '${e}';
  const dark = localStorage.getItem('${s}-dark') || '${r}';
  const light = localStorage.getItem('${s}-light') || '${n}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${l}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function cee(){}const uee=({key:t,storageWindow:e})=>(!e&&typeof window<"u"&&(e=window),{get(n){if(typeof window>"u")return;if(!e)return n;let r;try{r=e.localStorage.getItem(t)}catch{}return r||n},set:n=>{if(e)try{e.localStorage.setItem(t,n)}catch{}},subscribe:n=>{if(!e)return cee;const r=i=>{const s=i.newValue;i.key===t&&n(s)};return e.addEventListener("storage",r),()=>{e.removeEventListener("storage",r)}}});function BC(){}function i5(t){if(typeof window<"u"&&typeof window.matchMedia=="function"&&t==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function q$(t,e){if(t.mode==="light"||t.mode==="system"&&t.systemMode==="light")return e("light");if(t.mode==="dark"||t.mode==="system"&&t.systemMode==="dark")return e("dark")}function dee(t){return q$(t,e=>{if(e==="light")return t.lightColorScheme;if(e==="dark")return t.darkColorScheme})}function fee(t){const{defaultMode:e="light",defaultLightColorScheme:n,defaultDarkColorScheme:r,supportedColorSchemes:i=[],modeStorageKey:s=o3,colorSchemeStorageKey:o=a3,storageWindow:a=typeof window>"u"?void 0:window,storageManager:c=uee,noSsr:l=!1}=t,u=i.join(","),d=i.length>1,h=N.useMemo(()=>c==null?void 0:c({key:s,storageWindow:a}),[c,s,a]),f=N.useMemo(()=>c==null?void 0:c({key:`${o}-light`,storageWindow:a}),[c,o,a]),p=N.useMemo(()=>c==null?void 0:c({key:`${o}-dark`,storageWindow:a}),[c,o,a]),[g,m]=N.useState(()=>{const C=(h==null?void 0:h.get(e))||e,A=(f==null?void 0:f.get(n))||n,M=(p==null?void 0:p.get(r))||r;return{mode:C,systemMode:i5(C),lightColorScheme:A,darkColorScheme:M}}),[y,b]=N.useState(l||!d);N.useEffect(()=>{b(!0)},[]);const x=dee(g),S=N.useCallback(C=>{m(A=>{if(C===A.mode)return A;const M=C??e;return h==null||h.set(M),{...A,mode:M,systemMode:i5(M)}})},[h,e]),P=N.useCallback(C=>{C?typeof C=="string"?C&&!u.includes(C)?console.error(`\`${C}\` does not exist in \`theme.colorSchemes\`.`):m(A=>{const M={...A};return q$(A,k=>{k==="light"&&(f==null||f.set(C),M.lightColorScheme=C),k==="dark"&&(p==null||p.set(C),M.darkColorScheme=C)}),M}):m(A=>{const M={...A},k=C.light===null?n:C.light,O=C.dark===null?r:C.dark;return k&&(u.includes(k)?(M.lightColorScheme=k,f==null||f.set(k)):console.error(`\`${k}\` does not exist in \`theme.colorSchemes\`.`)),O&&(u.includes(O)?(M.darkColorScheme=O,p==null||p.set(O)):console.error(`\`${O}\` does not exist in \`theme.colorSchemes\`.`)),M}):m(A=>(f==null||f.set(n),p==null||p.set(r),{...A,lightColorScheme:n,darkColorScheme:r}))},[u,f,p,n,r]),_=N.useCallback(C=>{g.mode==="system"&&m(A=>{const M=C!=null&&C.matches?"dark":"light";return A.systemMode===M?A:{...A,systemMode:M}})},[g.mode]),I=N.useRef(_);return I.current=_,N.useEffect(()=>{if(typeof window.matchMedia!="function"||!d)return;const C=(...M)=>I.current(...M),A=window.matchMedia("(prefers-color-scheme: dark)");return A.addListener(C),C(A),()=>{A.removeListener(C)}},[d]),N.useEffect(()=>{if(d){const C=(h==null?void 0:h.subscribe(k=>{(!k||["light","dark","system"].includes(k))&&S(k||e)}))||BC,A=(f==null?void 0:f.subscribe(k=>{(!k||u.match(k))&&P({light:k})}))||BC,M=(p==null?void 0:p.subscribe(k=>{(!k||u.match(k))&&P({dark:k})}))||BC;return()=>{C(),A(),M()}}},[P,S,u,e,a,d,h,f,p]),{...g,mode:y?g.mode:void 0,systemMode:y?g.systemMode:void 0,colorScheme:y?x:void 0,setMode:S,setColorScheme:P}}const hee="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function pee(t){const{themeId:e,theme:n={},modeStorageKey:r=o3,colorSchemeStorageKey:i=a3,disableTransitionOnChange:s=!1,defaultColorScheme:o,resolveTheme:a}=t,c={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},l=N.createContext(void 0),u=()=>N.useContext(l)||c,d={},h={};function f(y){var xe,Ve,be,ge;const{children:b,theme:x,modeStorageKey:S=r,colorSchemeStorageKey:P=i,disableTransitionOnChange:_=s,storageManager:I,storageWindow:C=typeof window>"u"?void 0:window,documentNode:A=typeof document>"u"?void 0:document,colorSchemeNode:M=typeof document>"u"?void 0:document.documentElement,disableNestedContext:k=!1,disableStyleSheetGeneration:O=!1,defaultMode:B="system",forceThemeRerender:$=!1,noSsr:U}=y,q=N.useRef(!1),K=s3(),V=N.useContext(l),G=!!V&&!k,j=N.useMemo(()=>x||(typeof n=="function"?n():n),[x]),Q=j[e],se=Q||j,{colorSchemes:Z=d,components:ie=h,cssVarPrefix:pe}=se,ue=Object.keys(Z).filter(Se=>!!Z[Se]).join(","),le=N.useMemo(()=>ue.split(","),[ue]),ae=typeof o=="string"?o:o.light,_e=typeof o=="string"?o:o.dark,ye=Z[ae]&&Z[_e]?B:((Ve=(xe=Z[se.defaultColorScheme])==null?void 0:xe.palette)==null?void 0:Ve.mode)||((be=se.palette)==null?void 0:be.mode),{mode:Ae,setMode:Oe,systemMode:Be,lightColorScheme:ce,darkColorScheme:Ge,colorScheme:Pe,setColorScheme:He}=fee({supportedColorSchemes:le,defaultLightColorScheme:ae,defaultDarkColorScheme:_e,modeStorageKey:S,colorSchemeStorageKey:P,defaultMode:ye,storageManager:I,storageWindow:C,noSsr:U});let Re=Ae,je=Pe;G&&(Re=V.mode,je=V.colorScheme);let te=je||se.defaultColorScheme;se.vars&&!$&&(te=se.defaultColorScheme);const ee=N.useMemo(()=>{var me;const Se=((me=se.generateThemeVars)==null?void 0:me.call(se))||se.vars,Ie={...se,components:ie,colorSchemes:Z,cssVarPrefix:pe,vars:Se};if(typeof Ie.generateSpacing=="function"&&(Ie.spacing=Ie.generateSpacing()),te){const Ee=Z[te];Ee&&typeof Ee=="object"&&Object.keys(Ee).forEach(oe=>{Ee[oe]&&typeof Ee[oe]=="object"?Ie[oe]={...Ie[oe],...Ee[oe]}:Ie[oe]=Ee[oe]})}return a?a(Ie):Ie},[se,te,ie,Z,pe]),X=se.colorSchemeSelector;Ud(()=>{if(je&&M&&X&&X!=="media"){const Se=X;let Ie=X;if(Se==="class"&&(Ie=".%s"),Se==="data"&&(Ie="[data-%s]"),Se!=null&&Se.startsWith("data-")&&!Se.includes("%s")&&(Ie=`[${Se}="%s"]`),Ie.startsWith("."))M.classList.remove(...le.map(me=>Ie.substring(1).replace("%s",me))),M.classList.add(Ie.substring(1).replace("%s",je));else{const me=Ie.replace("%s",je).match(/\[([^\]]+)\]/);if(me){const[Ee,oe]=me[1].split("=");oe||le.forEach(ne=>{M.removeAttribute(Ee.replace(je,ne))}),M.setAttribute(Ee,oe?oe.replace(/"|'/g,""):"")}else M.setAttribute(Ie,je)}}},[je,X,M,le]),N.useEffect(()=>{let Se;if(_&&q.current&&A){const Ie=A.createElement("style");Ie.appendChild(A.createTextNode(hee)),A.head.appendChild(Ie),window.getComputedStyle(A.body),Se=setTimeout(()=>{A.head.removeChild(Ie)},1)}return()=>{clearTimeout(Se)}},[je,_,A]),N.useEffect(()=>(q.current=!0,()=>{q.current=!1}),[]);const we=N.useMemo(()=>({allColorSchemes:le,colorScheme:je,darkColorScheme:Ge,lightColorScheme:ce,mode:Re,setColorScheme:He,setMode:Oe,systemMode:Be}),[le,je,Ge,ce,Re,He,Oe,Be,ee.colorSchemeSelector]);let Ne=!0;(O||se.cssVariables===!1||G&&(K==null?void 0:K.cssVarPrefix)===pe)&&(Ne=!1);const We=H.jsxs(N.Fragment,{children:[H.jsx(j$,{themeId:Q?e:void 0,theme:ee,children:b}),Ne&&H.jsx(I$,{styles:((ge=ee.generateStyleSheets)==null?void 0:ge.call(ee))||[]})]});return G?We:H.jsx(l.Provider,{value:we,children:We})}const p=typeof o=="string"?o:o.light,g=typeof o=="string"?o:o.dark;return{CssVarsProvider:f,useColorScheme:u,getInitColorSchemeScript:y=>lee({colorSchemeStorageKey:i,defaultLightColorScheme:p,defaultDarkColorScheme:g,modeStorageKey:r,...y})}}function mee(t=""){function e(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${i}${e(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${t?`${t}-`:""}${r}${e(...i)})`}const s5=(t,e,n,r=[])=>{let i=t;e.forEach((s,o)=>{o===e.length-1?Array.isArray(i)?i[Number(s)]=n:i&&typeof i=="object"&&(i[s]=n):i&&typeof i=="object"&&(i[s]||(i[s]=r.includes(s)?[]:{}),i=i[s])})},gee=(t,e,n)=>{function r(i,s=[],o=[]){Object.entries(i).forEach(([a,c])=>{(!n||n&&!n([...s,a]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?r(c,[...s,a],Array.isArray(c)?[...o,a]:o):e([...s,a],c,o))})}r(t)},yee=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>t.includes(r))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function FC(t,e){const{prefix:n,shouldSkipGeneratingVar:r}=e||{},i={},s={},o={};return gee(t,(a,c,l)=>{if((typeof c=="string"||typeof c=="number")&&(!r||!r(a,c))){const u=`--${n?`${n}-`:""}${a.join("-")}`,d=yee(a,c);Object.assign(i,{[u]:d}),s5(s,a,`var(${u})`,l),s5(o,a,`var(${u}, ${d})`,l)}},a=>a[0]==="vars"),{css:i,vars:s,varsWithDefaults:o}}function vee(t,e={}){const{getSelector:n=m,disableCssColorScheme:r,colorSchemeSelector:i}=e,{colorSchemes:s={},components:o,defaultColorScheme:a="light",...c}=t,{vars:l,css:u,varsWithDefaults:d}=FC(c,e);let h=d;const f={},{[a]:p,...g}=s;if(Object.entries(g||{}).forEach(([x,S])=>{const{vars:P,css:_,varsWithDefaults:I}=FC(S,e);h=no(h,I),f[x]={css:_,vars:P}}),p){const{css:x,vars:S,varsWithDefaults:P}=FC(p,e);h=no(h,P),f[a]={css:x,vars:S}}function m(x,S){var _,I;let P=i;if(i==="class"&&(P=".%s"),i==="data"&&(P="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(P=`[${i}="%s"]`),x){if(P==="media")return t.defaultColorScheme===x?":root":{[`@media (prefers-color-scheme: ${((I=(_=s[x])==null?void 0:_.palette)==null?void 0:I.mode)||x})`]:{":root":S}};if(P)return t.defaultColorScheme===x?`:root, ${P.replace("%s",String(x))}`:P.replace("%s",String(x))}return":root"}return{vars:h,generateThemeVars:()=>{let x={...l};return Object.entries(f).forEach(([,{vars:S}])=>{x=no(x,S)}),x},generateStyleSheets:()=>{var C,A;const x=[],S=t.defaultColorScheme||"light";function P(M,k){Object.keys(k).length&&x.push(typeof M=="string"?{[M]:{...k}}:M)}P(n(void 0,{...u}),u);const{[S]:_,...I}=f;if(_){const{css:M}=_,k=(A=(C=s[S])==null?void 0:C.palette)==null?void 0:A.mode,O=!r&&k?{colorScheme:k,...M}:{...M};P(n(S,{...O}),O)}return Object.entries(I).forEach(([M,{css:k}])=>{var $,U;const O=(U=($=s[M])==null?void 0:$.palette)==null?void 0:U.mode,B=!r&&O?{colorScheme:O,...k}:{...k};P(n(M,{...B}),B)}),x}}}function bee(t){return function(n){return t==="media"?`@media (prefers-color-scheme: ${n})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${n}"] &`:t==="class"?`.${n} &`:t==="data"?`[data-${n}] &`:`${t.replace("%s",n)} &`:"&"}}function ur(t,e,n=void 0){const r={};for(const i in t){const s=t[i];let o="",a=!0;for(let c=0;c<s.length;c+=1){const l=s[c];l&&(o+=(a===!0?"":" ")+e(l),a=!1,n&&n[l]&&(o+=" "+n[l]))}r[i]=o}return r}const xee=Uw(),wee=F$("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${dn(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),_ee=t=>U$({props:t,name:"MuiContainer",defaultTheme:xee}),See=(t,e)=>{const n=c=>cr(e,c),{classes:r,fixed:i,disableGutters:s,maxWidth:o}=t,a={root:["root",o&&`maxWidth${dn(String(o))}`,i&&"fixed",s&&"disableGutters"]};return ur(a,n,r)};function Eee(t={}){const{createStyledComponent:e=wee,useThemeProps:n=_ee,componentName:r="MuiContainer"}=t,i=e(({theme:o,ownerState:a})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!a.disableGutters&&{paddingLeft:o.spacing(2),paddingRight:o.spacing(2),[o.breakpoints.up("sm")]:{paddingLeft:o.spacing(3),paddingRight:o.spacing(3)}}}),({theme:o,ownerState:a})=>a.fixed&&Object.keys(o.breakpoints.values).reduce((c,l)=>{const u=l,d=o.breakpoints.values[u];return d!==0&&(c[o.breakpoints.up(u)]={maxWidth:`${d}${o.breakpoints.unit}`}),c},{}),({theme:o,ownerState:a})=>({...a.maxWidth==="xs"&&{[o.breakpoints.up("xs")]:{maxWidth:Math.max(o.breakpoints.values.xs,444)}},...a.maxWidth&&a.maxWidth!=="xs"&&{[o.breakpoints.up(a.maxWidth)]:{maxWidth:`${o.breakpoints.values[a.maxWidth]}${o.breakpoints.unit}`}}}));return N.forwardRef(function(a,c){const l=n(a),{className:u,component:d="div",disableGutters:h=!1,fixed:f=!1,maxWidth:p="lg",classes:g,...m}=l,y={...l,component:d,disableGutters:h,fixed:f,maxWidth:p},b=See(y,r);return H.jsx(i,{as:d,ownerState:y,className:Fe(b.root,u),ref:c,...m})})}function _T(t,e){var n,r,i;return N.isValidElement(t)&&e.indexOf(t.type.muiName??((i=(r=(n=t.type)==null?void 0:n._payload)==null?void 0:r.value)==null?void 0:i.muiName))!==-1}const Tee=(t,e)=>t.filter(n=>e.includes(n)),iv=(t,e,n)=>{const r=t.keys[0];Array.isArray(e)?e.forEach((i,s)=>{n((o,a)=>{s<=t.keys.length-1&&(s===0?Object.assign(o,a):o[t.up(t.keys[s])]=a)},i)}):e&&typeof e=="object"?(Object.keys(e).length>t.keys.length?t.keys:Tee(t.keys,Object.keys(e))).forEach(s=>{if(t.keys.includes(s)){const o=e[s];o!==void 0&&n((a,c)=>{r===s?Object.assign(a,c):a[t.up(s)]=c},o)}}):(typeof e=="number"||typeof e=="string")&&n((i,s)=>{Object.assign(i,s)},e)};function qT(t){return`--Grid-${t}Spacing`}function TI(t){return`--Grid-parent-${t}Spacing`}const o5="--Grid-columns",_y="--Grid-parent-columns",Iee=({theme:t,ownerState:e})=>{const n={};return iv(t.breakpoints,e.size,(r,i)=>{let s={};i==="grow"&&(s={flexBasis:0,flexGrow:1,maxWidth:"100%"}),i==="auto"&&(s={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof i=="number"&&(s={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${i} / var(${_y}) - (var(${_y}) - ${i}) * (var(${TI("column")}) / var(${_y})))`}),r(n,s)}),n},Pee=({theme:t,ownerState:e})=>{const n={};return iv(t.breakpoints,e.offset,(r,i)=>{let s={};i==="auto"&&(s={marginLeft:"auto"}),typeof i=="number"&&(s={marginLeft:i===0?"0px":`calc(100% * ${i} / var(${_y}) + var(${TI("column")}) * ${i} / var(${_y}))`}),r(n,s)}),n},Cee=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={[o5]:12};return iv(t.breakpoints,e.columns,(r,i)=>{const s=i??12;r(n,{[o5]:s,"> *":{[_y]:s}})}),n},Mee=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={};return iv(t.breakpoints,e.rowSpacing,(r,i)=>{var o;const s=typeof i=="string"?i:(o=t.spacing)==null?void 0:o.call(t,i);r(n,{[qT("row")]:s,"> *":{[TI("row")]:s}})}),n},Aee=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={};return iv(t.breakpoints,e.columnSpacing,(r,i)=>{var o;const s=typeof i=="string"?i:(o=t.spacing)==null?void 0:o.call(t,i);r(n,{[qT("column")]:s,"> *":{[TI("column")]:s}})}),n},Ree=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={};return iv(t.breakpoints,e.direction,(r,i)=>{r(n,{flexDirection:i})}),n},kee=({ownerState:t})=>({minWidth:0,boxSizing:"border-box",...t.container&&{display:"flex",flexWrap:"wrap",...t.wrap&&t.wrap!=="wrap"&&{flexWrap:t.wrap},gap:`var(${qT("row")}) var(${qT("column")})`}}),Oee=t=>{const e=[];return Object.entries(t).forEach(([n,r])=>{r!==!1&&r!==void 0&&e.push(`grid-${n}-${String(r)}`)}),e},Nee=(t,e="xs")=>{function n(r){return r===void 0?!1:typeof r=="string"&&!Number.isNaN(Number(r))||typeof r=="number"&&r>0}if(n(t))return[`spacing-${e}-${String(t)}`];if(typeof t=="object"&&!Array.isArray(t)){const r=[];return Object.entries(t).forEach(([i,s])=>{n(s)&&r.push(`spacing-${i}-${String(s)}`)}),r}return[]},Lee=t=>t===void 0?[]:typeof t=="object"?Object.entries(t).map(([e,n])=>`direction-${e}-${n}`):[`direction-xs-${String(t)}`];function Dee(t,e){t.item!==void 0&&delete t.item,t.zeroMinWidth!==void 0&&delete t.zeroMinWidth,e.keys.forEach(n=>{t[n]!==void 0&&delete t[n]})}const Bee=Uw(),Fee=F$("div",{name:"MuiGrid",slot:"Root"});function Uee(t){return U$({props:t,name:"MuiGrid",defaultTheme:Bee})}function $ee(t={}){const{createStyledComponent:e=Fee,useThemeProps:n=Uee,useTheme:r=$w,componentName:i="MuiGrid"}=t,s=(l,u)=>{const{container:d,direction:h,spacing:f,wrap:p,size:g}=l,m={root:["root",d&&"container",p!=="wrap"&&`wrap-xs-${String(p)}`,...Lee(h),...Oee(g),...d?Nee(f,u.breakpoints.keys[0]):[]]};return ur(m,y=>cr(i,y),{})};function o(l,u,d=()=>!0){const h={};return l===null||(Array.isArray(l)?l.forEach((f,p)=>{f!==null&&d(f)&&u.keys[p]&&(h[u.keys[p]]=f)}):typeof l=="object"?Object.keys(l).forEach(f=>{const p=l[f];p!=null&&d(p)&&(h[f]=p)}):h[u.keys[0]]=l),h}const a=e(Cee,Aee,Mee,Iee,Ree,kee,Pee),c=N.forwardRef(function(u,d){const h=r(),f=n(u),p=r3(f);Dee(p,h.breakpoints);const{className:g,children:m,columns:y=12,container:b=!1,component:x="div",direction:S="row",wrap:P="wrap",size:_={},offset:I={},spacing:C=0,rowSpacing:A=C,columnSpacing:M=C,unstable_level:k=0,...O}=p,B=o(_,h.breakpoints,Q=>Q!==!1),$=o(I,h.breakpoints),U=u.columns??(k?void 0:y),q=u.spacing??(k?void 0:C),K=u.rowSpacing??u.spacing??(k?void 0:A),V=u.columnSpacing??u.spacing??(k?void 0:M),G={...p,level:k,columns:U,container:b,direction:S,wrap:P,spacing:q,rowSpacing:K,columnSpacing:V,size:B,offset:$},j=s(G,h);return H.jsx(a,{ref:d,as:x,ownerState:G,className:Fe(j.root,g),...O,children:N.Children.map(m,Q=>{var se;return N.isValidElement(Q)&&_T(Q,["Grid"])&&b&&Q.props.container?N.cloneElement(Q,{unstable_level:((se=Q.props)==null?void 0:se.unstable_level)??k+1}):Q})})});return c.muiName="Grid",c}function K$(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Yx.white,default:Yx.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const zee=K$();function G$(){return{text:{primary:Yx.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Yx.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const a5=G$();function l5(t,e,n,r){const i=r.light||r,s=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=EI(t.main,i):e==="dark"&&(t.dark=SI(t.main,s)))}function Hee(t="light"){return t==="dark"?{main:j0[200],light:j0[50],dark:j0[400]}:{main:j0[700],light:j0[400],dark:j0[800]}}function Vee(t="light"){return t==="dark"?{main:W0[200],light:W0[50],dark:W0[400]}:{main:W0[500],light:W0[300],dark:W0[700]}}function Wee(t="light"){return t==="dark"?{main:V0[500],light:V0[300],dark:V0[700]}:{main:V0[700],light:V0[400],dark:V0[800]}}function jee(t="light"){return t==="dark"?{main:q0[400],light:q0[300],dark:q0[700]}:{main:q0[700],light:q0[500],dark:q0[900]}}function qee(t="light"){return t==="dark"?{main:K0[400],light:K0[300],dark:K0[700]}:{main:K0[800],light:K0[500],dark:K0[900]}}function Kee(t="light"){return t==="dark"?{main:Tb[400],light:Tb[300],dark:Tb[700]}:{main:"#ed6c02",light:Tb[500],dark:Tb[900]}}function l3(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2,...i}=t,s=t.primary||Hee(e),o=t.secondary||Vee(e),a=t.error||Wee(e),c=t.info||jee(e),l=t.success||qee(e),u=t.warning||Kee(e);function d(g){return YQ(g,a5.text.primary)>=n?a5.text.primary:zee.text.primary}const h=({color:g,name:m,mainShade:y=500,lightShade:b=300,darkShade:x=700})=>{if(g={...g},!g.main&&g[y]&&(g.main=g[y]),!g.hasOwnProperty("main"))throw new Error(Bd(11,m?` (${m})`:"",y));if(typeof g.main!="string")throw new Error(Bd(12,m?` (${m})`:"",JSON.stringify(g.main)));return l5(g,"light",b,r),l5(g,"dark",x,r),g.contrastText||(g.contrastText=d(g.main)),g};let f;return e==="light"?f=K$():e==="dark"&&(f=G$()),no({common:{...Yx},mode:e,primary:h({color:s,name:"primary"}),secondary:h({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:h({color:a,name:"error"}),warning:h({color:u,name:"warning"}),info:h({color:c,name:"info"}),success:h({color:l,name:"success"}),grey:LZ,contrastThreshold:n,getContrastText:d,augmentColor:h,tonalOffset:r,...f},i)}function Gee(t){const e={};return Object.entries(t).forEach(r=>{const[i,s]=r;typeof s=="object"&&(e[i]=`${s.fontStyle?`${s.fontStyle} `:""}${s.fontVariant?`${s.fontVariant} `:""}${s.fontWeight?`${s.fontWeight} `:""}${s.fontStretch?`${s.fontStretch} `:""}${s.fontSize||""}${s.lineHeight?`/${s.lineHeight} `:""}${s.fontFamily||""}`)}),e}function Xee(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function Yee(t){return Math.round(t*1e5)/1e5}const c5={textTransform:"uppercase"},u5='"Roboto", "Helvetica", "Arial", sans-serif';function X$(t,e){const{fontFamily:n=u5,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:s=400,fontWeightMedium:o=500,fontWeightBold:a=700,htmlFontSize:c=16,allVariants:l,pxToRem:u,...d}=typeof e=="function"?e(t):e,h=r/14,f=u||(m=>`${m/c*h}rem`),p=(m,y,b,x,S)=>({fontFamily:n,fontWeight:m,fontSize:f(y),lineHeight:b,...n===u5?{letterSpacing:`${Yee(x/y)}em`}:{},...S,...l}),g={h1:p(i,96,1.167,-1.5),h2:p(i,60,1.2,-.5),h3:p(s,48,1.167,0),h4:p(s,34,1.235,.25),h5:p(s,24,1.334,0),h6:p(o,20,1.6,.15),subtitle1:p(s,16,1.75,.15),subtitle2:p(o,14,1.57,.1),body1:p(s,16,1.5,.15),body2:p(s,14,1.43,.15),button:p(o,14,1.75,.4,c5),caption:p(s,12,1.66,.4),overline:p(s,12,2.66,1,c5),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return no({htmlFontSize:c,pxToRem:f,fontFamily:n,fontSize:r,fontWeightLight:i,fontWeightRegular:s,fontWeightMedium:o,fontWeightBold:a,...g},d,{clone:!1})}const Zee=.2,Jee=.14,Qee=.12;function oi(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${Zee})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${Jee})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${Qee})`].join(",")}const ete=["none",oi(0,2,1,-1,0,1,1,0,0,1,3,0),oi(0,3,1,-2,0,2,2,0,0,1,5,0),oi(0,3,3,-2,0,3,4,0,0,1,8,0),oi(0,2,4,-1,0,4,5,0,0,1,10,0),oi(0,3,5,-1,0,5,8,0,0,1,14,0),oi(0,3,5,-1,0,6,10,0,0,1,18,0),oi(0,4,5,-2,0,7,10,1,0,2,16,1),oi(0,5,5,-3,0,8,10,1,0,3,14,2),oi(0,5,6,-3,0,9,12,1,0,3,16,2),oi(0,6,6,-3,0,10,14,1,0,4,18,3),oi(0,6,7,-4,0,11,15,1,0,4,20,3),oi(0,7,8,-4,0,12,17,2,0,5,22,4),oi(0,7,8,-4,0,13,19,2,0,5,24,4),oi(0,7,9,-4,0,14,21,2,0,5,26,4),oi(0,8,9,-5,0,15,22,2,0,6,28,5),oi(0,8,10,-5,0,16,24,2,0,6,30,5),oi(0,8,11,-5,0,17,26,2,0,6,32,5),oi(0,9,11,-5,0,18,28,2,0,7,34,6),oi(0,9,12,-6,0,19,29,2,0,7,36,6),oi(0,10,13,-6,0,20,31,3,0,8,38,7),oi(0,10,13,-6,0,21,33,3,0,8,40,7),oi(0,10,14,-6,0,22,35,3,0,8,42,7),oi(0,11,14,-7,0,23,36,3,0,9,44,8),oi(0,11,15,-7,0,24,38,3,0,9,46,8)],tte={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Y$={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function d5(t){return`${Math.round(t)}ms`}function nte(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function rte(t){const e={...tte,...t.easing},n={...Y$,...t.duration};return{getAutoHeightDuration:nte,create:(i=["all"],s={})=>{const{duration:o=n.standard,easing:a=e.easeInOut,delay:c=0,...l}=s;return(Array.isArray(i)?i:[i]).map(u=>`${u} ${typeof o=="string"?o:d5(o)} ${a} ${typeof c=="string"?c:d5(c)}`).join(",")},...t,easing:e,duration:n}}const ite={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function ste(t){return Gc(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function Z$(t={}){const e={...t};function n(r){const i=Object.entries(r);for(let s=0;s<i.length;s++){const[o,a]=i[s];!ste(a)||o.startsWith("unstable_")?delete r[o]:Gc(a)&&(r[o]={...a},n(r[o]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function cR(t={},...e){const{breakpoints:n,mixins:r={},spacing:i,palette:s={},transitions:o={},typography:a={},shape:c,...l}=t;if(t.vars&&t.generateThemeVars===void 0)throw new Error(Bd(20));const u=l3(s),d=Uw(t);let h=no(d,{mixins:Xee(d.breakpoints,r),palette:u,shadows:ete.slice(),typography:X$(u,a),transitions:rte(o),zIndex:{...ite}});return h=no(h,l),h=e.reduce((f,p)=>no(f,p),h),h.unstable_sxConfig={...Fw,...l==null?void 0:l.unstable_sxConfig},h.unstable_sx=function(p){return eh({sx:p,theme:this})},h.toRuntimeSource=Z$,h}function uR(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const ote=[...Array(25)].map((t,e)=>{if(e===0)return"none";const n=uR(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function J$(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function Q$(t){return t==="dark"?ote:[]}function ate(t){const{palette:e={mode:"light"},opacity:n,overlays:r,...i}=t,s=l3(e);return{palette:s,opacity:{...J$(s.mode),...n},overlays:r||Q$(s.mode),...i}}function lte(t){var e;return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!((e=t[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const cte=t=>[...[...Array(25)].map((e,n)=>`--${t?`${t}-`:""}overlays-${n}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],ute=t=>(e,n)=>{const r=t.rootSelector||":root",i=t.colorSchemeSelector;let s=i;if(i==="class"&&(s=".%s"),i==="data"&&(s="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(s=`[${i}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const o={};return cte(t.cssVarPrefix).forEach(a=>{o[a]=n[a],delete n[a]}),s==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:o}}:s?{[s.replace("%s",e)]:o,[`${r}, ${s.replace("%s",e)}`]:n}:{[r]:{...n,...o}}}if(s&&s!=="media")return`${r}, ${s.replace("%s",String(e))}`}else if(e){if(s==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:n}};if(s)return s.replace("%s",String(e))}return r};function dte(t,e){e.forEach(n=>{t[n]||(t[n]={})})}function vt(t,e,n){!t[e]&&n&&(t[e]=n)}function hx(t){return typeof t!="string"||!t.startsWith("hsl")?t:$$(t)}function Gu(t,e){`${e}Channel`in t||(t[`${e}Channel`]=fx(hx(t[e])))}function fte(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const $c=t=>{try{return t()}catch{}},hte=(t="mui")=>mee(t);function UC(t,e,n,r){if(!e)return;e=e===!0?{}:e;const i=r==="dark"?"dark":"light";if(!n){t[r]=ate({...e,palette:{mode:i,...e==null?void 0:e.palette}});return}const{palette:s,...o}=cR({...n,palette:{mode:i,...e==null?void 0:e.palette}});return t[r]={...e,palette:s,opacity:{...J$(i),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||Q$(i)},o}function pte(t={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:i=!1,cssVarPrefix:s="mui",shouldSkipGeneratingVar:o=lte,colorSchemeSelector:a=n.light&&n.dark?"media":void 0,rootSelector:c=":root",...l}=t,u=Object.keys(n)[0],d=r||(n.light&&u!=="light"?"light":u),h=hte(s),{[d]:f,light:p,dark:g,...m}=n,y={...m};let b=f;if((d==="dark"&&!("dark"in n)||d==="light"&&!("light"in n))&&(b=!0),!b)throw new Error(Bd(21,d));const x=UC(y,b,l,d);p&&!y.light&&UC(y,p,void 0,"light"),g&&!y.dark&&UC(y,g,void 0,"dark");let S={defaultColorScheme:d,...x,cssVarPrefix:s,colorSchemeSelector:a,rootSelector:c,getCssVar:h,colorSchemes:y,font:{...Gee(x.typography),...x.font},spacing:fte(l.spacing)};Object.keys(S.colorSchemes).forEach(A=>{const M=S.colorSchemes[A].palette,k=O=>{const B=O.split("-"),$=B[1],U=B[2];return h(O,M[$][U])};if(M.mode==="light"&&(vt(M.common,"background","#fff"),vt(M.common,"onBackground","#000")),M.mode==="dark"&&(vt(M.common,"background","#000"),vt(M.common,"onBackground","#fff")),dte(M,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),M.mode==="light"){vt(M.Alert,"errorColor",Hr(M.error.light,.6)),vt(M.Alert,"infoColor",Hr(M.info.light,.6)),vt(M.Alert,"successColor",Hr(M.success.light,.6)),vt(M.Alert,"warningColor",Hr(M.warning.light,.6)),vt(M.Alert,"errorFilledBg",k("palette-error-main")),vt(M.Alert,"infoFilledBg",k("palette-info-main")),vt(M.Alert,"successFilledBg",k("palette-success-main")),vt(M.Alert,"warningFilledBg",k("palette-warning-main")),vt(M.Alert,"errorFilledColor",$c(()=>M.getContrastText(M.error.main))),vt(M.Alert,"infoFilledColor",$c(()=>M.getContrastText(M.info.main))),vt(M.Alert,"successFilledColor",$c(()=>M.getContrastText(M.success.main))),vt(M.Alert,"warningFilledColor",$c(()=>M.getContrastText(M.warning.main))),vt(M.Alert,"errorStandardBg",Vr(M.error.light,.9)),vt(M.Alert,"infoStandardBg",Vr(M.info.light,.9)),vt(M.Alert,"successStandardBg",Vr(M.success.light,.9)),vt(M.Alert,"warningStandardBg",Vr(M.warning.light,.9)),vt(M.Alert,"errorIconColor",k("palette-error-main")),vt(M.Alert,"infoIconColor",k("palette-info-main")),vt(M.Alert,"successIconColor",k("palette-success-main")),vt(M.Alert,"warningIconColor",k("palette-warning-main")),vt(M.AppBar,"defaultBg",k("palette-grey-100")),vt(M.Avatar,"defaultBg",k("palette-grey-400")),vt(M.Button,"inheritContainedBg",k("palette-grey-300")),vt(M.Button,"inheritContainedHoverBg",k("palette-grey-A100")),vt(M.Chip,"defaultBorder",k("palette-grey-400")),vt(M.Chip,"defaultAvatarColor",k("palette-grey-700")),vt(M.Chip,"defaultIconColor",k("palette-grey-700")),vt(M.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),vt(M.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),vt(M.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),vt(M.LinearProgress,"primaryBg",Vr(M.primary.main,.62)),vt(M.LinearProgress,"secondaryBg",Vr(M.secondary.main,.62)),vt(M.LinearProgress,"errorBg",Vr(M.error.main,.62)),vt(M.LinearProgress,"infoBg",Vr(M.info.main,.62)),vt(M.LinearProgress,"successBg",Vr(M.success.main,.62)),vt(M.LinearProgress,"warningBg",Vr(M.warning.main,.62)),vt(M.Skeleton,"bg",`rgba(${k("palette-text-primaryChannel")} / 0.11)`),vt(M.Slider,"primaryTrack",Vr(M.primary.main,.62)),vt(M.Slider,"secondaryTrack",Vr(M.secondary.main,.62)),vt(M.Slider,"errorTrack",Vr(M.error.main,.62)),vt(M.Slider,"infoTrack",Vr(M.info.main,.62)),vt(M.Slider,"successTrack",Vr(M.success.main,.62)),vt(M.Slider,"warningTrack",Vr(M.warning.main,.62));const O=SS(M.background.default,.8);vt(M.SnackbarContent,"bg",O),vt(M.SnackbarContent,"color",$c(()=>M.getContrastText(O))),vt(M.SpeedDialAction,"fabHoverBg",SS(M.background.paper,.15)),vt(M.StepConnector,"border",k("palette-grey-400")),vt(M.StepContent,"border",k("palette-grey-400")),vt(M.Switch,"defaultColor",k("palette-common-white")),vt(M.Switch,"defaultDisabledColor",k("palette-grey-100")),vt(M.Switch,"primaryDisabledColor",Vr(M.primary.main,.62)),vt(M.Switch,"secondaryDisabledColor",Vr(M.secondary.main,.62)),vt(M.Switch,"errorDisabledColor",Vr(M.error.main,.62)),vt(M.Switch,"infoDisabledColor",Vr(M.info.main,.62)),vt(M.Switch,"successDisabledColor",Vr(M.success.main,.62)),vt(M.Switch,"warningDisabledColor",Vr(M.warning.main,.62)),vt(M.TableCell,"border",Vr(_S(M.divider,1),.88)),vt(M.Tooltip,"bg",_S(M.grey[700],.92))}if(M.mode==="dark"){vt(M.Alert,"errorColor",Vr(M.error.light,.6)),vt(M.Alert,"infoColor",Vr(M.info.light,.6)),vt(M.Alert,"successColor",Vr(M.success.light,.6)),vt(M.Alert,"warningColor",Vr(M.warning.light,.6)),vt(M.Alert,"errorFilledBg",k("palette-error-dark")),vt(M.Alert,"infoFilledBg",k("palette-info-dark")),vt(M.Alert,"successFilledBg",k("palette-success-dark")),vt(M.Alert,"warningFilledBg",k("palette-warning-dark")),vt(M.Alert,"errorFilledColor",$c(()=>M.getContrastText(M.error.dark))),vt(M.Alert,"infoFilledColor",$c(()=>M.getContrastText(M.info.dark))),vt(M.Alert,"successFilledColor",$c(()=>M.getContrastText(M.success.dark))),vt(M.Alert,"warningFilledColor",$c(()=>M.getContrastText(M.warning.dark))),vt(M.Alert,"errorStandardBg",Hr(M.error.light,.9)),vt(M.Alert,"infoStandardBg",Hr(M.info.light,.9)),vt(M.Alert,"successStandardBg",Hr(M.success.light,.9)),vt(M.Alert,"warningStandardBg",Hr(M.warning.light,.9)),vt(M.Alert,"errorIconColor",k("palette-error-main")),vt(M.Alert,"infoIconColor",k("palette-info-main")),vt(M.Alert,"successIconColor",k("palette-success-main")),vt(M.Alert,"warningIconColor",k("palette-warning-main")),vt(M.AppBar,"defaultBg",k("palette-grey-900")),vt(M.AppBar,"darkBg",k("palette-background-paper")),vt(M.AppBar,"darkColor",k("palette-text-primary")),vt(M.Avatar,"defaultBg",k("palette-grey-600")),vt(M.Button,"inheritContainedBg",k("palette-grey-800")),vt(M.Button,"inheritContainedHoverBg",k("palette-grey-700")),vt(M.Chip,"defaultBorder",k("palette-grey-700")),vt(M.Chip,"defaultAvatarColor",k("palette-grey-300")),vt(M.Chip,"defaultIconColor",k("palette-grey-300")),vt(M.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),vt(M.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),vt(M.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),vt(M.LinearProgress,"primaryBg",Hr(M.primary.main,.5)),vt(M.LinearProgress,"secondaryBg",Hr(M.secondary.main,.5)),vt(M.LinearProgress,"errorBg",Hr(M.error.main,.5)),vt(M.LinearProgress,"infoBg",Hr(M.info.main,.5)),vt(M.LinearProgress,"successBg",Hr(M.success.main,.5)),vt(M.LinearProgress,"warningBg",Hr(M.warning.main,.5)),vt(M.Skeleton,"bg",`rgba(${k("palette-text-primaryChannel")} / 0.13)`),vt(M.Slider,"primaryTrack",Hr(M.primary.main,.5)),vt(M.Slider,"secondaryTrack",Hr(M.secondary.main,.5)),vt(M.Slider,"errorTrack",Hr(M.error.main,.5)),vt(M.Slider,"infoTrack",Hr(M.info.main,.5)),vt(M.Slider,"successTrack",Hr(M.success.main,.5)),vt(M.Slider,"warningTrack",Hr(M.warning.main,.5));const O=SS(M.background.default,.98);vt(M.SnackbarContent,"bg",O),vt(M.SnackbarContent,"color",$c(()=>M.getContrastText(O))),vt(M.SpeedDialAction,"fabHoverBg",SS(M.background.paper,.15)),vt(M.StepConnector,"border",k("palette-grey-600")),vt(M.StepContent,"border",k("palette-grey-600")),vt(M.Switch,"defaultColor",k("palette-grey-300")),vt(M.Switch,"defaultDisabledColor",k("palette-grey-600")),vt(M.Switch,"primaryDisabledColor",Hr(M.primary.main,.55)),vt(M.Switch,"secondaryDisabledColor",Hr(M.secondary.main,.55)),vt(M.Switch,"errorDisabledColor",Hr(M.error.main,.55)),vt(M.Switch,"infoDisabledColor",Hr(M.info.main,.55)),vt(M.Switch,"successDisabledColor",Hr(M.success.main,.55)),vt(M.Switch,"warningDisabledColor",Hr(M.warning.main,.55)),vt(M.TableCell,"border",Hr(_S(M.divider,1),.68)),vt(M.Tooltip,"bg",_S(M.grey[700],.92))}Gu(M.background,"default"),Gu(M.background,"paper"),Gu(M.common,"background"),Gu(M.common,"onBackground"),Gu(M,"divider"),Object.keys(M).forEach(O=>{const B=M[O];O!=="tonalOffset"&&B&&typeof B=="object"&&(B.main&&vt(M[O],"mainChannel",fx(hx(B.main))),B.light&&vt(M[O],"lightChannel",fx(hx(B.light))),B.dark&&vt(M[O],"darkChannel",fx(hx(B.dark))),B.contrastText&&vt(M[O],"contrastTextChannel",fx(hx(B.contrastText))),O==="text"&&(Gu(M[O],"primary"),Gu(M[O],"secondary")),O==="action"&&(B.active&&Gu(M[O],"active"),B.selected&&Gu(M[O],"selected")))})}),S=e.reduce((A,M)=>no(A,M),S);const P={prefix:s,disableCssColorScheme:i,shouldSkipGeneratingVar:o,getSelector:ute(S)},{vars:_,generateThemeVars:I,generateStyleSheets:C}=vee(S,P);return S.vars=_,Object.entries(S.colorSchemes[S.defaultColorScheme]).forEach(([A,M])=>{S[A]=M}),S.generateThemeVars=I,S.generateStyleSheets=C,S.generateSpacing=function(){return R$(l.spacing,t3(this))},S.getColorSchemeSelector=bee(a),S.spacing=S.generateSpacing(),S.shouldSkipGeneratingVar=o,S.unstable_sxConfig={...Fw,...l==null?void 0:l.unstable_sxConfig},S.unstable_sx=function(M){return eh({sx:M,theme:this})},S.toRuntimeSource=Z$,S}function f5(t,e,n){t.colorSchemes&&n&&(t.colorSchemes[e]={...n!==!0&&n,palette:l3({...n===!0?{}:n.palette,mode:e})})}function II(t={},...e){const{palette:n,cssVariables:r=!1,colorSchemes:i=n?void 0:{light:!0},defaultColorScheme:s=n==null?void 0:n.mode,...o}=t,a=s||"light",c=i==null?void 0:i[a],l={...i,...n?{[a]:{...typeof c!="boolean"&&c,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in t))return cR(t,...e);let u=n;"palette"in t||l[a]&&(l[a]!==!0?u=l[a].palette:a==="dark"&&(u={mode:"dark"}));const d=cR({...t,palette:u},...e);return d.defaultColorScheme=a,d.colorSchemes=l,d.palette.mode==="light"&&(d.colorSchemes.light={...l.light!==!0&&l.light,palette:d.palette},f5(d,"dark",l.dark)),d.palette.mode==="dark"&&(d.colorSchemes.dark={...l.dark!==!0&&l.dark,palette:d.palette},f5(d,"light",l.light)),d}return!n&&!("light"in l)&&a==="light"&&(l.light=!0),pte({...o,colorSchemes:l,defaultColorScheme:a,...typeof r!="boolean"&&r},...e)}const c3=II();function zw(){const t=$w(c3);return t[Zc]||t}function ez(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const El=t=>ez(t)&&t!=="classes",Yt=B$({themeId:Zc,defaultTheme:c3,rootShouldForwardProp:El});function mte({theme:t,...e}){const n=Zc in t?t[Zc]:void 0;return H.jsx(j$,{...e,themeId:n?Zc:void 0,theme:n||t})}const ES={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:gte}=pee({themeId:Zc,theme:()=>II({cssVariables:!0}),colorSchemeStorageKey:ES.colorSchemeStorageKey,modeStorageKey:ES.modeStorageKey,defaultColorScheme:{light:ES.defaultLightColorScheme,dark:ES.defaultDarkColorScheme},resolveTheme:t=>{const e={...t,typography:X$(t.palette,t.typography)};return e.unstable_sx=function(r){return eh({sx:r,theme:this})},e}}),yte=gte;function vte({theme:t,...e}){const n=N.useMemo(()=>{if(typeof t=="function")return t;const r=Zc in t?t[Zc]:t;return"colorSchemes"in r?null:"vars"in r?t:{...t,vars:null}},[t]);return n?H.jsx(mte,{theme:n,...e}):H.jsx(yte,{theme:t,...e})}function h5(...t){return t.reduce((e,n)=>n==null?e:function(...i){e.apply(this,i),n.apply(this,i)},()=>{})}function bte(t){return H.jsx(NQ,{...t,defaultTheme:c3,themeId:Zc})}function u3(t){return function(n){return H.jsx(bte,{styles:typeof t=="function"?r=>t({theme:r,...n}):t})}}function xte(){return r3}const Ir=oee;function dr(t){return see(t)}function wte(t){return cr("MuiSvgIcon",t)}er("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const _te=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${dn(e)}`,`fontSize${dn(n)}`]};return ur(i,wte,r)},Ste=Yt("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${dn(n.color)}`],e[`fontSize${dn(n.fontSize)}`]]}})(Ir(({theme:t})=>{var e,n,r,i,s,o,a,c,l,u,d,h,f,p;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(i=(e=t.transitions)==null?void 0:e.create)==null?void 0:i.call(e,"fill",{duration:(r=(n=(t.vars??t).transitions)==null?void 0:n.duration)==null?void 0:r.shorter}),variants:[{props:g=>!g.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((o=(s=t.typography)==null?void 0:s.pxToRem)==null?void 0:o.call(s,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((c=(a=t.typography)==null?void 0:a.pxToRem)==null?void 0:c.call(a,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((u=(l=t.typography)==null?void 0:l.pxToRem)==null?void 0:u.call(l,35))||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter(([,g])=>g&&g.main).map(([g])=>{var m,y;return{props:{color:g},style:{color:(y=(m=(t.vars??t).palette)==null?void 0:m[g])==null?void 0:y.main}}}),{props:{color:"action"},style:{color:(h=(d=(t.vars??t).palette)==null?void 0:d.action)==null?void 0:h.active}},{props:{color:"disabled"},style:{color:(p=(f=(t.vars??t).palette)==null?void 0:f.action)==null?void 0:p.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),dR=N.forwardRef(function(e,n){const r=dr({props:e,name:"MuiSvgIcon"}),{children:i,className:s,color:o="inherit",component:a="svg",fontSize:c="medium",htmlColor:l,inheritViewBox:u=!1,titleAccess:d,viewBox:h="0 0 24 24",...f}=r,p=N.isValidElement(i)&&i.type==="svg",g={...r,color:o,component:a,fontSize:c,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:h,hasSvgAsChild:p},m={};u||(m.viewBox=h);const y=_te(g);return H.jsxs(Ste,{as:a,className:Fe(y.root,s),focusable:"false",color:l,"aria-hidden":d?void 0:!0,role:d?"img":void 0,ref:n,...m,...f,...p&&i.props,ownerState:g,children:[p?i.props.children:i,d?H.jsx("title",{children:d}):null]})});dR.muiName="SvgIcon";function tz(t,e){function n(r,i){return H.jsx(dR,{"data-testid":void 0,ref:i,...r,children:t})}return n.muiName=dR.muiName,N.memo(N.forwardRef(n))}function nz(t,e=166){let n;function r(...i){const s=()=>{t.apply(this,i)};clearTimeout(n),n=setTimeout(s,e)}return r.clear=()=>{clearTimeout(n)},r}function bc(t){return t&&t.ownerDocument||document}function $d(t){return bc(t).defaultView||window}function p5(t,e){typeof t=="function"?t(e):t&&(t.current=e)}let m5=0;function Ete(t){const[e,n]=N.useState(t),r=t||e;return N.useEffect(()=>{e==null&&(m5+=1,n(`mui-${m5}`))},[e]),r}const Tte={...HT},g5=Tte.useId;function d3(t){if(g5!==void 0){const e=g5();return t??e}return Ete(t)}function y5(t){const{controlled:e,default:n,name:r,state:i="value"}=t,{current:s}=N.useRef(e!==void 0),[o,a]=N.useState(n),c=s?e:o,l=N.useCallback(u=>{s||a(u)},[]);return[c,l]}function _m(t){const e=N.useRef(t);return Ud(()=>{e.current=t}),N.useRef((...n)=>(0,e.current)(...n)).current}function oo(...t){const e=N.useRef(void 0),n=N.useCallback(r=>{const i=t.map(s=>{if(s==null)return null;if(typeof s=="function"){const o=s,a=o(r);return typeof a=="function"?a:()=>{o(null)}}return s.current=r,()=>{s.current=null}});return()=>{i.forEach(s=>s==null?void 0:s())}},t);return N.useMemo(()=>t.every(r=>r==null)?null:r=>{e.current&&(e.current(),e.current=void 0),r!=null&&(e.current=n(r))},t)}function Ite(t,e){const n=t.charCodeAt(2);return t[0]==="o"&&t[1]==="n"&&n>=65&&n<=90&&typeof e=="function"}function Pte(t,e){if(!t)return e;function n(o,a){const c={};return Object.keys(a).forEach(l=>{Ite(l,a[l])&&typeof o[l]=="function"&&(c[l]=(...u)=>{o[l](...u),a[l](...u)})}),c}if(typeof t=="function"||typeof e=="function")return o=>{const a=typeof e=="function"?e(o):e,c=typeof t=="function"?t({...o,...a}):t,l=Fe(o==null?void 0:o.className,a==null?void 0:a.className,c==null?void 0:c.className),u=n(c,a);return{...a,...c,...u,...!!l&&{className:l},...(a==null?void 0:a.style)&&(c==null?void 0:c.style)&&{style:{...a.style,...c.style}},...(a==null?void 0:a.sx)&&(c==null?void 0:c.sx)&&{sx:[...Array.isArray(a.sx)?a.sx:[a.sx],...Array.isArray(c.sx)?c.sx:[c.sx]]}}};const r=e,i=n(t,r),s=Fe(r==null?void 0:r.className,t==null?void 0:t.className);return{...e,...t,...i,...!!s&&{className:s},...(r==null?void 0:r.style)&&(t==null?void 0:t.style)&&{style:{...r.style,...t.style}},...(r==null?void 0:r.sx)&&(t==null?void 0:t.sx)&&{sx:[...Array.isArray(r.sx)?r.sx:[r.sx],...Array.isArray(t.sx)?t.sx:[t.sx]]}}}function rt(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function fR(t,e){return fR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},fR(t,e)}function rz(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,fR(t,e)}var tw=u$();const TS=ah(tw),v5={disabled:!1},KT=qt.createContext(null);var Cte=function(e){return e.scrollTop},px="unmounted",Kp="exited",Gp="entering",Qg="entered",hR="exiting",ao=function(t){rz(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,c;return s.appearStatus=null,r.in?a?(c=Kp,s.appearStatus=Gp):c=Qg:r.unmountOnExit||r.mountOnEnter?c=px:c=Kp,s.state={status:c},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===px?{status:Kp}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Gp&&o!==Qg&&(s=Gp):(o===Gp||o===Qg)&&(s=hR)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Gp){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:TS.findDOMNode(this);o&&Cte(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Kp&&this.setState({status:px})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,c=this.props.nodeRef?[a]:[TS.findDOMNode(this),a],l=c[0],u=c[1],d=this.getTimeouts(),h=a?d.appear:d.enter;if(!i&&!o||v5.disabled){this.safeSetState({status:Qg},function(){s.props.onEntered(l)});return}this.props.onEnter(l,u),this.safeSetState({status:Gp},function(){s.props.onEntering(l,u),s.onTransitionEnd(h,function(){s.safeSetState({status:Qg},function(){s.props.onEntered(l,u)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:TS.findDOMNode(this);if(!s||v5.disabled){this.safeSetState({status:Kp},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:hR},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Kp},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:TS.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=c[0],u=c[1];this.props.addEndListener(l,u)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===px)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=rt(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return qt.createElement(KT.Provider,{value:null},typeof o=="function"?o(i,a):qt.cloneElement(qt.Children.only(o),a))},e}(qt.Component);ao.contextType=KT;ao.propTypes={};function G0(){}ao.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:G0,onEntering:G0,onEntered:G0,onExit:G0,onExiting:G0,onExited:G0};ao.UNMOUNTED=px;ao.EXITED=Kp;ao.ENTERING=Gp;ao.ENTERED=Qg;ao.EXITING=hR;function Mte(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f3(t,e){var n=function(s){return e&&N.isValidElement(s)?e(s):s},r=Object.create(null);return t&&N.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function Ate(t,e){t=t||{},e=e||{};function n(u){return u in e?e[u]:t[u]}var r=Object.create(null),i=[];for(var s in t)s in e?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var c in e){if(r[c])for(o=0;o<r[c].length;o++){var l=r[c][o];a[r[c][o]]=n(l)}a[c]=n(c)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function hm(t,e,n){return n[e]!=null?n[e]:t.props[e]}function Rte(t,e){return f3(t.children,function(n){return N.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:hm(n,"appear",t),enter:hm(n,"enter",t),exit:hm(n,"exit",t)})})}function kte(t,e,n){var r=f3(t.children),i=Ate(e,r);return Object.keys(i).forEach(function(s){var o=i[s];if(N.isValidElement(o)){var a=s in e,c=s in r,l=e[s],u=N.isValidElement(l)&&!l.props.in;c&&(!a||u)?i[s]=N.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:hm(o,"exit",t),enter:hm(o,"enter",t)}):!c&&a&&!u?i[s]=N.cloneElement(o,{in:!1}):c&&a&&N.isValidElement(l)&&(i[s]=N.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:hm(o,"exit",t),enter:hm(o,"enter",t)}))}}),i}var Ote=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},Nte={component:"div",childFactory:function(e){return e}},PI=function(t){rz(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=s.handleExited.bind(Mte(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,c=s.firstRender;return{children:c?Rte(i,a):kte(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=f3(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var c=z({},a.children);return delete c[i.key],{children:c}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=rt(i,["component","childFactory"]),c=this.state.contextValue,l=Ote(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?qt.createElement(KT.Provider,{value:c},l):qt.createElement(KT.Provider,{value:c},qt.createElement(s,a,l))},e}(qt.Component);PI.propTypes={};PI.defaultProps=Nte;const b5={};function iz(t,e){const n=N.useRef(b5);return n.current===b5&&(n.current=t(e)),n}const Lte=[];function Dte(t){N.useEffect(t,Lte)}let Bte=class sz{constructor(){ze(this,"currentId",null);ze(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});ze(this,"disposeEffect",()=>this.clear)}static create(){return new sz}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}};function h3(){const t=iz(Bte.create).current;return Dte(t.disposeEffect),t}const oz=t=>t.scrollTop;function Ly(t,e){const{timeout:n,easing:r,style:i={}}=t;return{duration:i.transitionDuration??(typeof n=="number"?n:n[e.mode]||0),easing:i.transitionTimingFunction??(typeof r=="object"?r[e.mode]:r),delay:i.transitionDelay}}function Fte(t){return cr("MuiCollapse",t)}er("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Ute=t=>{const{orientation:e,classes:n}=t,r={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return ur(r,Fte,n)},$te=Yt("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],n.state==="entered"&&e.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&e.hidden]}})(Ir(({theme:t})=>({height:0,overflow:"hidden",transition:t.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:t.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:e})=>e.state==="exited"&&!e.in&&e.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),zte=Yt("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),Hte=Yt("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),pR=N.forwardRef(function(e,n){const r=dr({props:e,name:"MuiCollapse"}),{addEndListener:i,children:s,className:o,collapsedSize:a="0px",component:c,easing:l,in:u,onEnter:d,onEntered:h,onEntering:f,onExit:p,onExited:g,onExiting:m,orientation:y="vertical",style:b,timeout:x=Y$.standard,TransitionComponent:S=ao,...P}=r,_={...r,orientation:y,collapsedSize:a},I=Ute(_),C=zw(),A=h3(),M=N.useRef(null),k=N.useRef(),O=typeof a=="number"?`${a}px`:a,B=y==="horizontal",$=B?"width":"height",U=N.useRef(null),q=oo(n,U),K=ue=>le=>{if(ue){const ae=U.current;le===void 0?ue(ae):ue(ae,le)}},V=()=>M.current?M.current[B?"clientWidth":"clientHeight"]:0,G=K((ue,le)=>{M.current&&B&&(M.current.style.position="absolute"),ue.style[$]=O,d&&d(ue,le)}),j=K((ue,le)=>{const ae=V();M.current&&B&&(M.current.style.position="");const{duration:_e,easing:ye}=Ly({style:b,timeout:x,easing:l},{mode:"enter"});if(x==="auto"){const Ae=C.transitions.getAutoHeightDuration(ae);ue.style.transitionDuration=`${Ae}ms`,k.current=Ae}else ue.style.transitionDuration=typeof _e=="string"?_e:`${_e}ms`;ue.style[$]=`${ae}px`,ue.style.transitionTimingFunction=ye,f&&f(ue,le)}),Q=K((ue,le)=>{ue.style[$]="auto",h&&h(ue,le)}),se=K(ue=>{ue.style[$]=`${V()}px`,p&&p(ue)}),Z=K(g),ie=K(ue=>{const le=V(),{duration:ae,easing:_e}=Ly({style:b,timeout:x,easing:l},{mode:"exit"});if(x==="auto"){const ye=C.transitions.getAutoHeightDuration(le);ue.style.transitionDuration=`${ye}ms`,k.current=ye}else ue.style.transitionDuration=typeof ae=="string"?ae:`${ae}ms`;ue.style[$]=O,ue.style.transitionTimingFunction=_e,m&&m(ue)}),pe=ue=>{x==="auto"&&A.start(k.current||0,ue),i&&i(U.current,ue)};return H.jsx(S,{in:u,onEnter:G,onEntered:Q,onEntering:j,onExit:se,onExited:Z,onExiting:ie,addEndListener:pe,nodeRef:U,timeout:x==="auto"?null:x,...P,children:(ue,{ownerState:le,...ae})=>H.jsx($te,{as:c,className:Fe(I.root,o,{entered:I.entered,exited:!u&&O==="0px"&&I.hidden}[ue]),style:{[B?"minWidth":"minHeight"]:O,...b},ref:q,ownerState:{..._,state:ue},...ae,children:H.jsx(zte,{ownerState:{..._,state:ue},className:I.wrapper,ref:M,children:H.jsx(Hte,{ownerState:{..._,state:ue},className:I.wrapperInner,children:s})})})})});pR&&(pR.muiSupportAuto=!0);function Vte(t){return cr("MuiPaper",t)}er("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Wte=t=>{const{square:e,elevation:n,variant:r,classes:i}=t,s={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return ur(s,Vte,i)},jte=Yt("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(Ir(({theme:t})=>({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(t.vars||t).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),iu=N.forwardRef(function(e,n){var f;const r=dr({props:e,name:"MuiPaper"}),i=zw(),{className:s,component:o="div",elevation:a=1,square:c=!1,variant:l="elevation",...u}=r,d={...r,component:o,elevation:a,square:c,variant:l},h=Wte(d);return H.jsx(jte,{as:o,ownerState:d,className:Fe(h.root,s),ref:n,...u,style:{...l==="elevation"&&{"--Paper-shadow":(i.vars||i).shadows[a],...i.vars&&{"--Paper-overlay":(f=i.vars.overlays)==null?void 0:f[a]},...!i.vars&&i.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${dl("#fff",uR(a))}, ${dl("#fff",uR(a))})`}},...u.style}})});function qte(t){return typeof t=="string"}function az(t,e,n){return t===void 0||qte(t)?e:{...e,ownerState:{...e.ownerState,...n}}}function lz(t,e,n){return typeof t=="function"?t(e,n):t}function cz(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function x5(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function uz(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:s}=t;if(!e){const f=Fe(n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),p={...n==null?void 0:n.style,...i==null?void 0:i.style,...r==null?void 0:r.style},g={...n,...i,...r};return f.length>0&&(g.className=f),Object.keys(p).length>0&&(g.style=p),{props:g,internalRef:void 0}}const o=cz({...i,...r}),a=x5(r),c=x5(i),l=e(o),u=Fe(l==null?void 0:l.className,n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),d={...l==null?void 0:l.style,...n==null?void 0:n.style,...i==null?void 0:i.style,...r==null?void 0:r.style},h={...l,...n,...c,...a};return u.length>0&&(h.className=u),Object.keys(d).length>0&&(h.style=d),{props:h,internalRef:l.ref}}function Ss(t,e){const{className:n,elementType:r,ownerState:i,externalForwardedProps:s,internalForwardedProps:o,shouldForwardComponentProp:a=!1,...c}=e,{component:l,slots:u={[t]:void 0},slotProps:d={[t]:void 0},...h}=s,f=u[t]||r,p=lz(d[t],i),{props:{component:g,...m},internalRef:y}=uz({className:n,...c,externalForwardedProps:t==="root"?h:void 0,externalSlotProps:p}),b=oo(y,p==null?void 0:p.ref,e.ref),x=t==="root"?g||l:g,S=az(f,{...t==="root"&&!l&&!u[t]&&o,...t!=="root"&&!u[t]&&o,...m,...x&&!a&&{as:x},...x&&a&&{component:x},ref:b},i);return[f,S]}function w5(t){try{return t.matches(":focus-visible")}catch{}return!1}class GT{constructor(){ze(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new GT}static use(){const e=iz(GT.create).current,[n,r]=N.useState(!1);return e.shouldMount=n,e.setShouldMount=r,N.useEffect(e.mountEffect,[n]),e}mount(){return this.mounted||(this.mounted=Gte(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.start(...e)})}stop(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.stop(...e)})}pulsate(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.pulsate(...e)})}}function Kte(){return GT.use()}function Gte(){let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n}function Xte(t){const{className:e,classes:n,pulsate:r=!1,rippleX:i,rippleY:s,rippleSize:o,in:a,onExited:c,timeout:l}=t,[u,d]=N.useState(!1),h=Fe(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),f={width:o,height:o,top:-(o/2)+s,left:-(o/2)+i},p=Fe(n.child,u&&n.childLeaving,r&&n.childPulsate);return!a&&!u&&d(!0),N.useEffect(()=>{if(!a&&c!=null){const g=setTimeout(c,l);return()=>{clearTimeout(g)}}},[c,a,l]),H.jsx("span",{className:h,style:f,children:H.jsx("span",{className:p})})}const al=er("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),mR=550,Yte=80,Zte=Zi`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,Jte=Zi`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,Qte=Zi`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,ene=Yt("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),tne=Yt(Xte,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${al.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${Zte};
    animation-duration: ${mR}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  &.${al.ripplePulsate} {
    animation-duration: ${({theme:t})=>t.transitions.duration.shorter}ms;
  }

  & .${al.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${al.childLeaving} {
    opacity: 0;
    animation-name: ${Jte};
    animation-duration: ${mR}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  & .${al.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${Qte};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,nne=N.forwardRef(function(e,n){const r=dr({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:o,...a}=r,[c,l]=N.useState([]),u=N.useRef(0),d=N.useRef(null);N.useEffect(()=>{d.current&&(d.current(),d.current=null)},[c]);const h=N.useRef(!1),f=h3(),p=N.useRef(null),g=N.useRef(null),m=N.useCallback(S=>{const{pulsate:P,rippleX:_,rippleY:I,rippleSize:C,cb:A}=S;l(M=>[...M,H.jsx(tne,{classes:{ripple:Fe(s.ripple,al.ripple),rippleVisible:Fe(s.rippleVisible,al.rippleVisible),ripplePulsate:Fe(s.ripplePulsate,al.ripplePulsate),child:Fe(s.child,al.child),childLeaving:Fe(s.childLeaving,al.childLeaving),childPulsate:Fe(s.childPulsate,al.childPulsate)},timeout:mR,pulsate:P,rippleX:_,rippleY:I,rippleSize:C},u.current)]),u.current+=1,d.current=A},[s]),y=N.useCallback((S={},P={},_=()=>{})=>{const{pulsate:I=!1,center:C=i||P.pulsate,fakeElement:A=!1}=P;if((S==null?void 0:S.type)==="mousedown"&&h.current){h.current=!1;return}(S==null?void 0:S.type)==="touchstart"&&(h.current=!0);const M=A?null:g.current,k=M?M.getBoundingClientRect():{width:0,height:0,left:0,top:0};let O,B,$;if(C||S===void 0||S.clientX===0&&S.clientY===0||!S.clientX&&!S.touches)O=Math.round(k.width/2),B=Math.round(k.height/2);else{const{clientX:U,clientY:q}=S.touches&&S.touches.length>0?S.touches[0]:S;O=Math.round(U-k.left),B=Math.round(q-k.top)}if(C)$=Math.sqrt((2*k.width**2+k.height**2)/3),$%2===0&&($+=1);else{const U=Math.max(Math.abs((M?M.clientWidth:0)-O),O)*2+2,q=Math.max(Math.abs((M?M.clientHeight:0)-B),B)*2+2;$=Math.sqrt(U**2+q**2)}S!=null&&S.touches?p.current===null&&(p.current=()=>{m({pulsate:I,rippleX:O,rippleY:B,rippleSize:$,cb:_})},f.start(Yte,()=>{p.current&&(p.current(),p.current=null)})):m({pulsate:I,rippleX:O,rippleY:B,rippleSize:$,cb:_})},[i,m,f]),b=N.useCallback(()=>{y({},{pulsate:!0})},[y]),x=N.useCallback((S,P)=>{if(f.clear(),(S==null?void 0:S.type)==="touchend"&&p.current){p.current(),p.current=null,f.start(0,()=>{x(S,P)});return}p.current=null,l(_=>_.length>0?_.slice(1):_),d.current=P},[f]);return N.useImperativeHandle(n,()=>({pulsate:b,start:y,stop:x}),[b,y,x]),H.jsx(ene,{className:Fe(al.root,s.root,o),ref:g,...a,children:H.jsx(PI,{component:null,exit:!0,children:c})})});function rne(t){return cr("MuiButtonBase",t)}const ine=er("MuiButtonBase",["root","disabled","focusVisible"]),sne=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,o=ur({root:["root",e&&"disabled",n&&"focusVisible"]},rne,i);return n&&r&&(o.root+=` ${r}`),o},one=Yt("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${ine.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),p3=N.forwardRef(function(e,n){const r=dr({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:o,className:a,component:c="button",disabled:l=!1,disableRipple:u=!1,disableTouchRipple:d=!1,focusRipple:h=!1,focusVisibleClassName:f,LinkComponent:p="a",onBlur:g,onClick:m,onContextMenu:y,onDragLeave:b,onFocus:x,onFocusVisible:S,onKeyDown:P,onKeyUp:_,onMouseDown:I,onMouseLeave:C,onMouseUp:A,onTouchEnd:M,onTouchMove:k,onTouchStart:O,tabIndex:B=0,TouchRippleProps:$,touchRippleRef:U,type:q,...K}=r,V=N.useRef(null),G=Kte(),j=oo(G.ref,U),[Q,se]=N.useState(!1);l&&Q&&se(!1),N.useImperativeHandle(i,()=>({focusVisible:()=>{se(!0),V.current.focus()}}),[]);const Z=G.shouldMount&&!u&&!l;N.useEffect(()=>{Q&&h&&!u&&G.pulsate()},[u,h,Q,G]);const ie=Xu(G,"start",I,d),pe=Xu(G,"stop",y,d),ue=Xu(G,"stop",b,d),le=Xu(G,"stop",A,d),ae=Xu(G,"stop",X=>{Q&&X.preventDefault(),C&&C(X)},d),_e=Xu(G,"start",O,d),ye=Xu(G,"stop",M,d),Ae=Xu(G,"stop",k,d),Oe=Xu(G,"stop",X=>{w5(X.target)||se(!1),g&&g(X)},!1),Be=_m(X=>{V.current||(V.current=X.currentTarget),w5(X.target)&&(se(!0),S&&S(X)),x&&x(X)}),ce=()=>{const X=V.current;return c&&c!=="button"&&!(X.tagName==="A"&&X.href)},Ge=_m(X=>{h&&!X.repeat&&Q&&X.key===" "&&G.stop(X,()=>{G.start(X)}),X.target===X.currentTarget&&ce()&&X.key===" "&&X.preventDefault(),P&&P(X),X.target===X.currentTarget&&ce()&&X.key==="Enter"&&!l&&(X.preventDefault(),m&&m(X))}),Pe=_m(X=>{h&&X.key===" "&&Q&&!X.defaultPrevented&&G.stop(X,()=>{G.pulsate(X)}),_&&_(X),m&&X.target===X.currentTarget&&ce()&&X.key===" "&&!X.defaultPrevented&&m(X)});let He=c;He==="button"&&(K.href||K.to)&&(He=p);const Re={};He==="button"?(Re.type=q===void 0?"button":q,Re.disabled=l):(!K.href&&!K.to&&(Re.role="button"),l&&(Re["aria-disabled"]=l));const je=oo(n,V),te={...r,centerRipple:s,component:c,disabled:l,disableRipple:u,disableTouchRipple:d,focusRipple:h,tabIndex:B,focusVisible:Q},ee=sne(te);return H.jsxs(one,{as:He,className:Fe(ee.root,a),ownerState:te,onBlur:Oe,onClick:m,onContextMenu:pe,onFocus:Be,onKeyDown:Ge,onKeyUp:Pe,onMouseDown:ie,onMouseLeave:ae,onMouseUp:le,onDragLeave:ue,onTouchEnd:ye,onTouchMove:Ae,onTouchStart:_e,ref:je,tabIndex:l?-1:B,type:q,...Re,...K,children:[o,Z?H.jsx(nne,{ref:j,center:s,...$}):null]})});function Xu(t,e,n,r=!1){return _m(i=>(n&&n(i),r||t[e](i),!0))}function ane(t){return typeof t.main=="string"}function lne(t,e=[]){if(!ane(t))return!1;for(const n of e)if(!t.hasOwnProperty(n)||typeof t[n]!="string")return!1;return!0}function Oa(t=[]){return([,e])=>e&&lne(e,t)}function cne(t){return cr("MuiCircularProgress",t)}er("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Af=44,gR=Zi`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,yR=Zi`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,une=typeof gR!="string"?Io`
        animation: ${gR} 1.4s linear infinite;
      `:null,dne=typeof yR!="string"?Io`
        animation: ${yR} 1.4s ease-in-out infinite;
      `:null,fne=t=>{const{classes:e,variant:n,color:r,disableShrink:i}=t,s={root:["root",n,`color${dn(r)}`],svg:["svg"],circle:["circle",`circle${dn(n)}`,i&&"circleDisableShrink"]};return ur(s,cne,e)},hne=Yt("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`color${dn(n.color)}`]]}})(Ir(({theme:t})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:une||{animation:`${gR} 1.4s linear infinite`}},...Object.entries(t.palette).filter(Oa()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}}))]}))),pne=Yt("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),mne=Yt("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.circle,e[`circle${dn(n.variant)}`],n.disableShrink&&e.circleDisableShrink]}})(Ir(({theme:t})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink,style:dne||{animation:`${yR} 1.4s ease-in-out infinite`}}]}))),XT=N.forwardRef(function(e,n){const r=dr({props:e,name:"MuiCircularProgress"}),{className:i,color:s="primary",disableShrink:o=!1,size:a=40,style:c,thickness:l=3.6,value:u=0,variant:d="indeterminate",...h}=r,f={...r,color:s,disableShrink:o,size:a,thickness:l,value:u,variant:d},p=fne(f),g={},m={},y={};if(d==="determinate"){const b=2*Math.PI*((Af-l)/2);g.strokeDasharray=b.toFixed(3),y["aria-valuenow"]=Math.round(u),g.strokeDashoffset=`${((100-u)/100*b).toFixed(3)}px`,m.transform="rotate(-90deg)"}return H.jsx(hne,{className:Fe(p.root,i),style:{width:a,height:a,...m,...c},ownerState:f,ref:n,role:"progressbar",...y,...h,children:H.jsx(pne,{className:p.svg,ownerState:f,viewBox:`${Af/2} ${Af/2} ${Af} ${Af}`,children:H.jsx(mne,{className:p.circle,style:g,ownerState:f,cx:Af,cy:Af,r:(Af-l)/2,fill:"none",strokeWidth:l})})})});function gne(t){return cr("MuiTypography",t)}er("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const yne={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},vne=xte(),bne=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:s,classes:o}=t,a={root:["root",s,t.align!=="inherit"&&`align${dn(e)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return ur(a,gne,o)},xne=Yt("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${dn(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(Ir(({theme:t})=>{var e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter(([n,r])=>n!=="inherit"&&r&&typeof r=="object").map(([n,r])=>({props:{variant:n},style:r})),...Object.entries(t.palette).filter(Oa()).map(([n])=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}})),...Object.entries(((e=t.palette)==null?void 0:e.text)||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${dn(n)}`},style:{color:(t.vars||t).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}})),_5={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},ir=N.forwardRef(function(e,n){const{color:r,...i}=dr({props:e,name:"MuiTypography"}),s=!yne[r],o=vne({...i,...s&&{color:r}}),{align:a="inherit",className:c,component:l,gutterBottom:u=!1,noWrap:d=!1,paragraph:h=!1,variant:f="body1",variantMapping:p=_5,...g}=o,m={...o,align:a,color:r,className:c,component:l,gutterBottom:u,noWrap:d,paragraph:h,variant:f,variantMapping:p},y=l||(h?"p":p[f]||_5[f])||"span",b=bne(m);return H.jsx(xne,{as:y,ref:n,className:Fe(b.root,c),...g,ownerState:m,style:{...a!=="inherit"&&{"--Typography-textAlign":a},...g.style}})});function wne(t){return cr("MuiAppBar",t)}er("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const _ne=t=>{const{color:e,position:n,classes:r}=t,i={root:["root",`color${dn(e)}`,`position${dn(n)}`]};return ur(i,wne,r)},S5=(t,e)=>t?`${t==null?void 0:t.replace(")","")}, ${e})`:e,Sne=Yt(iu,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${dn(n.position)}`],e[`color${dn(n.color)}`]]}})(Ir(({theme:t})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[100],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[100]),...t.applyStyles("dark",{"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[900],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[900])})}},...Object.entries(t.palette).filter(Oa(["contrastText"])).map(([e])=>({props:{color:e},style:{"--AppBar-background":(t.vars??t).palette[e].main,"--AppBar-color":(t.vars??t).palette[e].contrastText}})),{props:e=>e.enableColorOnDark===!0&&!["inherit","transparent"].includes(e.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:e=>e.enableColorOnDark===!1&&!["inherit","transparent"].includes(e.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...t.applyStyles("dark",{backgroundColor:t.vars?S5(t.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:t.vars?S5(t.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...t.applyStyles("dark",{backgroundImage:"none"})}}]}))),Ene=N.forwardRef(function(e,n){const r=dr({props:e,name:"MuiAppBar"}),{className:i,color:s="primary",enableColorOnDark:o=!1,position:a="fixed",...c}=r,l={...r,color:s,position:a,enableColorOnDark:o},u=_ne(l);return H.jsx(Sne,{square:!0,component:"header",ownerState:l,elevation:4,className:Fe(u.root,i,a==="fixed"&&"mui-fixed"),ref:n,...c})});var Jo="top",bl="bottom",xl="right",Qo="left",m3="auto",Hw=[Jo,bl,xl,Qo],Dy="start",nw="end",Tne="clippingParents",dz="viewport",Pb="popper",Ine="reference",E5=Hw.reduce(function(t,e){return t.concat([e+"-"+Dy,e+"-"+nw])},[]),fz=[].concat(Hw,[m3]).reduce(function(t,e){return t.concat([e,e+"-"+Dy,e+"-"+nw])},[]),Pne="beforeRead",Cne="read",Mne="afterRead",Ane="beforeMain",Rne="main",kne="afterMain",One="beforeWrite",Nne="write",Lne="afterWrite",Dne=[Pne,Cne,Mne,Ane,Rne,kne,One,Nne,Lne];function su(t){return t?(t.nodeName||"").toLowerCase():null}function Na(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Rm(t){var e=Na(t).Element;return t instanceof e||t instanceof Element}function ml(t){var e=Na(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function g3(t){if(typeof ShadowRoot>"u")return!1;var e=Na(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Bne(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!ml(s)||!su(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function Fne(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(c,l){return c[l]="",c},{});!ml(i)||!su(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(c){i.removeAttribute(c)}))})}}const Une={name:"applyStyles",enabled:!0,phase:"write",fn:Bne,effect:Fne,requires:["computeStyles"]};function Qc(t){return t.split("-")[0]}var Sm=Math.max,YT=Math.min,By=Math.round;function vR(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function hz(){return!/^((?!chrome|android).)*safari/i.test(vR())}function Fy(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&ml(t)&&(i=t.offsetWidth>0&&By(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&By(r.height)/t.offsetHeight||1);var o=Rm(t)?Na(t):window,a=o.visualViewport,c=!hz()&&n,l=(r.left+(c&&a?a.offsetLeft:0))/i,u=(r.top+(c&&a?a.offsetTop:0))/s,d=r.width/i,h=r.height/s;return{width:d,height:h,top:u,right:l+d,bottom:u+h,left:l,x:l,y:u}}function y3(t){var e=Fy(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function pz(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&g3(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function zd(t){return Na(t).getComputedStyle(t)}function $ne(t){return["table","td","th"].indexOf(su(t))>=0}function ch(t){return((Rm(t)?t.ownerDocument:t.document)||window.document).documentElement}function CI(t){return su(t)==="html"?t:t.assignedSlot||t.parentNode||(g3(t)?t.host:null)||ch(t)}function T5(t){return!ml(t)||zd(t).position==="fixed"?null:t.offsetParent}function zne(t){var e=/firefox/i.test(vR()),n=/Trident/i.test(vR());if(n&&ml(t)){var r=zd(t);if(r.position==="fixed")return null}var i=CI(t);for(g3(i)&&(i=i.host);ml(i)&&["html","body"].indexOf(su(i))<0;){var s=zd(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function Vw(t){for(var e=Na(t),n=T5(t);n&&$ne(n)&&zd(n).position==="static";)n=T5(n);return n&&(su(n)==="html"||su(n)==="body"&&zd(n).position==="static")?e:n||zne(t)||e}function v3(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Mx(t,e,n){return Sm(t,YT(e,n))}function Hne(t,e,n){var r=Mx(t,e,n);return r>n?n:r}function mz(){return{top:0,right:0,bottom:0,left:0}}function gz(t){return Object.assign({},mz(),t)}function yz(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var Vne=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,gz(typeof e!="number"?e:yz(e,Hw))};function Wne(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Qc(n.placement),c=v3(a),l=[Qo,xl].indexOf(a)>=0,u=l?"height":"width";if(!(!s||!o)){var d=Vne(i.padding,n),h=y3(s),f=c==="y"?Jo:Qo,p=c==="y"?bl:xl,g=n.rects.reference[u]+n.rects.reference[c]-o[c]-n.rects.popper[u],m=o[c]-n.rects.reference[c],y=Vw(s),b=y?c==="y"?y.clientHeight||0:y.clientWidth||0:0,x=g/2-m/2,S=d[f],P=b-h[u]-d[p],_=b/2-h[u]/2+x,I=Mx(S,_,P),C=c;n.modifiersData[r]=(e={},e[C]=I,e.centerOffset=I-_,e)}}function jne(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||pz(e.elements.popper,i)&&(e.elements.arrow=i))}const qne={name:"arrow",enabled:!0,phase:"main",fn:Wne,effect:jne,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Uy(t){return t.split("-")[1]}var Kne={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Gne(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:By(n*i)/i||0,y:By(r*i)/i||0}}function I5(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,c=t.gpuAcceleration,l=t.adaptive,u=t.roundOffsets,d=t.isFixed,h=o.x,f=h===void 0?0:h,p=o.y,g=p===void 0?0:p,m=typeof u=="function"?u({x:f,y:g}):{x:f,y:g};f=m.x,g=m.y;var y=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),x=Qo,S=Jo,P=window;if(l){var _=Vw(n),I="clientHeight",C="clientWidth";if(_===Na(n)&&(_=ch(n),zd(_).position!=="static"&&a==="absolute"&&(I="scrollHeight",C="scrollWidth")),_=_,i===Jo||(i===Qo||i===xl)&&s===nw){S=bl;var A=d&&_===P&&P.visualViewport?P.visualViewport.height:_[I];g-=A-r.height,g*=c?1:-1}if(i===Qo||(i===Jo||i===bl)&&s===nw){x=xl;var M=d&&_===P&&P.visualViewport?P.visualViewport.width:_[C];f-=M-r.width,f*=c?1:-1}}var k=Object.assign({position:a},l&&Kne),O=u===!0?Gne({x:f,y:g},Na(n)):{x:f,y:g};if(f=O.x,g=O.y,c){var B;return Object.assign({},k,(B={},B[S]=b?"0":"",B[x]=y?"0":"",B.transform=(P.devicePixelRatio||1)<=1?"translate("+f+"px, "+g+"px)":"translate3d("+f+"px, "+g+"px, 0)",B))}return Object.assign({},k,(e={},e[S]=b?g+"px":"",e[x]=y?f+"px":"",e.transform="",e))}function Xne(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,c=a===void 0?!0:a,l={placement:Qc(e.placement),variation:Uy(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,I5(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:c})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,I5(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Yne={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Xne,data:{}};var IS={passive:!0};function Zne(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,c=Na(e.elements.popper),l=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&l.forEach(function(u){u.addEventListener("scroll",n.update,IS)}),a&&c.addEventListener("resize",n.update,IS),function(){s&&l.forEach(function(u){u.removeEventListener("scroll",n.update,IS)}),a&&c.removeEventListener("resize",n.update,IS)}}const Jne={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Zne,data:{}};var Qne={left:"right",right:"left",bottom:"top",top:"bottom"};function ST(t){return t.replace(/left|right|bottom|top/g,function(e){return Qne[e]})}var ere={start:"end",end:"start"};function P5(t){return t.replace(/start|end/g,function(e){return ere[e]})}function b3(t){var e=Na(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function x3(t){return Fy(ch(t)).left+b3(t).scrollLeft}function tre(t,e){var n=Na(t),r=ch(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,c=0;if(i){s=i.width,o=i.height;var l=hz();(l||!l&&e==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}return{width:s,height:o,x:a+x3(t),y:c}}function nre(t){var e,n=ch(t),r=b3(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=Sm(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Sm(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+x3(t),c=-r.scrollTop;return zd(i||n).direction==="rtl"&&(a+=Sm(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:c}}function w3(t){var e=zd(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function vz(t){return["html","body","#document"].indexOf(su(t))>=0?t.ownerDocument.body:ml(t)&&w3(t)?t:vz(CI(t))}function Ax(t,e){var n;e===void 0&&(e=[]);var r=vz(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=Na(r),o=i?[s].concat(s.visualViewport||[],w3(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(Ax(CI(o)))}function bR(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function rre(t,e){var n=Fy(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function C5(t,e,n){return e===dz?bR(tre(t,n)):Rm(e)?rre(e,n):bR(nre(ch(t)))}function ire(t){var e=Ax(CI(t)),n=["absolute","fixed"].indexOf(zd(t).position)>=0,r=n&&ml(t)?Vw(t):t;return Rm(r)?e.filter(function(i){return Rm(i)&&pz(i,r)&&su(i)!=="body"}):[]}function sre(t,e,n,r){var i=e==="clippingParents"?ire(t):[].concat(e),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(c,l){var u=C5(t,l,r);return c.top=Sm(u.top,c.top),c.right=YT(u.right,c.right),c.bottom=YT(u.bottom,c.bottom),c.left=Sm(u.left,c.left),c},C5(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function bz(t){var e=t.reference,n=t.element,r=t.placement,i=r?Qc(r):null,s=r?Uy(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,c;switch(i){case Jo:c={x:o,y:e.y-n.height};break;case bl:c={x:o,y:e.y+e.height};break;case xl:c={x:e.x+e.width,y:a};break;case Qo:c={x:e.x-n.width,y:a};break;default:c={x:e.x,y:e.y}}var l=i?v3(i):null;if(l!=null){var u=l==="y"?"height":"width";switch(s){case Dy:c[l]=c[l]-(e[u]/2-n[u]/2);break;case nw:c[l]=c[l]+(e[u]/2-n[u]/2);break}}return c}function rw(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,c=a===void 0?Tne:a,l=n.rootBoundary,u=l===void 0?dz:l,d=n.elementContext,h=d===void 0?Pb:d,f=n.altBoundary,p=f===void 0?!1:f,g=n.padding,m=g===void 0?0:g,y=gz(typeof m!="number"?m:yz(m,Hw)),b=h===Pb?Ine:Pb,x=t.rects.popper,S=t.elements[p?b:h],P=sre(Rm(S)?S:S.contextElement||ch(t.elements.popper),c,u,o),_=Fy(t.elements.reference),I=bz({reference:_,element:x,placement:i}),C=bR(Object.assign({},x,I)),A=h===Pb?C:_,M={top:P.top-A.top+y.top,bottom:A.bottom-P.bottom+y.bottom,left:P.left-A.left+y.left,right:A.right-P.right+y.right},k=t.modifiersData.offset;if(h===Pb&&k){var O=k[i];Object.keys(M).forEach(function(B){var $=[xl,bl].indexOf(B)>=0?1:-1,U=[Jo,bl].indexOf(B)>=0?"y":"x";M[B]+=O[U]*$})}return M}function ore(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,l=c===void 0?fz:c,u=Uy(r),d=u?a?E5:E5.filter(function(p){return Uy(p)===u}):Hw,h=d.filter(function(p){return l.indexOf(p)>=0});h.length===0&&(h=d);var f=h.reduce(function(p,g){return p[g]=rw(t,{placement:g,boundary:i,rootBoundary:s,padding:o})[Qc(g)],p},{});return Object.keys(f).sort(function(p,g){return f[p]-f[g]})}function are(t){if(Qc(t)===m3)return[];var e=ST(t);return[P5(t),e,P5(e)]}function lre(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,c=n.fallbackPlacements,l=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,p=f===void 0?!0:f,g=n.allowedAutoPlacements,m=e.options.placement,y=Qc(m),b=y===m,x=c||(b||!p?[ST(m)]:are(m)),S=[m].concat(x).reduce(function(ie,pe){return ie.concat(Qc(pe)===m3?ore(e,{placement:pe,boundary:u,rootBoundary:d,padding:l,flipVariations:p,allowedAutoPlacements:g}):pe)},[]),P=e.rects.reference,_=e.rects.popper,I=new Map,C=!0,A=S[0],M=0;M<S.length;M++){var k=S[M],O=Qc(k),B=Uy(k)===Dy,$=[Jo,bl].indexOf(O)>=0,U=$?"width":"height",q=rw(e,{placement:k,boundary:u,rootBoundary:d,altBoundary:h,padding:l}),K=$?B?xl:Qo:B?bl:Jo;P[U]>_[U]&&(K=ST(K));var V=ST(K),G=[];if(s&&G.push(q[O]<=0),a&&G.push(q[K]<=0,q[V]<=0),G.every(function(ie){return ie})){A=k,C=!1;break}I.set(k,G)}if(C)for(var j=p?3:1,Q=function(pe){var ue=S.find(function(le){var ae=I.get(le);if(ae)return ae.slice(0,pe).every(function(_e){return _e})});if(ue)return A=ue,"break"},se=j;se>0;se--){var Z=Q(se);if(Z==="break")break}e.placement!==A&&(e.modifiersData[r]._skip=!0,e.placement=A,e.reset=!0)}}const cre={name:"flip",enabled:!0,phase:"main",fn:lre,requiresIfExists:["offset"],data:{_skip:!1}};function M5(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function A5(t){return[Jo,xl,bl,Qo].some(function(e){return t[e]>=0})}function ure(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=rw(e,{elementContext:"reference"}),a=rw(e,{altBoundary:!0}),c=M5(o,r),l=M5(a,i,s),u=A5(c),d=A5(l);e.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const dre={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:ure};function fre(t,e,n){var r=Qc(t),i=[Qo,Jo].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[Qo,xl].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function hre(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=fz.reduce(function(u,d){return u[d]=fre(d,e.rects,s),u},{}),a=o[e.placement],c=a.x,l=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=l),e.modifiersData[r]=o}const pre={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:hre};function mre(t){var e=t.state,n=t.name;e.modifiersData[n]=bz({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const gre={name:"popperOffsets",enabled:!0,phase:"read",fn:mre,data:{}};function yre(t){return t==="x"?"y":"x"}function vre(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,c=n.boundary,l=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,f=h===void 0?!0:h,p=n.tetherOffset,g=p===void 0?0:p,m=rw(e,{boundary:c,rootBoundary:l,padding:d,altBoundary:u}),y=Qc(e.placement),b=Uy(e.placement),x=!b,S=v3(y),P=yre(S),_=e.modifiersData.popperOffsets,I=e.rects.reference,C=e.rects.popper,A=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,M=typeof A=="number"?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),k=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,O={x:0,y:0};if(_){if(s){var B,$=S==="y"?Jo:Qo,U=S==="y"?bl:xl,q=S==="y"?"height":"width",K=_[S],V=K+m[$],G=K-m[U],j=f?-C[q]/2:0,Q=b===Dy?I[q]:C[q],se=b===Dy?-C[q]:-I[q],Z=e.elements.arrow,ie=f&&Z?y3(Z):{width:0,height:0},pe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:mz(),ue=pe[$],le=pe[U],ae=Mx(0,I[q],ie[q]),_e=x?I[q]/2-j-ae-ue-M.mainAxis:Q-ae-ue-M.mainAxis,ye=x?-I[q]/2+j+ae+le+M.mainAxis:se+ae+le+M.mainAxis,Ae=e.elements.arrow&&Vw(e.elements.arrow),Oe=Ae?S==="y"?Ae.clientTop||0:Ae.clientLeft||0:0,Be=(B=k==null?void 0:k[S])!=null?B:0,ce=K+_e-Be-Oe,Ge=K+ye-Be,Pe=Mx(f?YT(V,ce):V,K,f?Sm(G,Ge):G);_[S]=Pe,O[S]=Pe-K}if(a){var He,Re=S==="x"?Jo:Qo,je=S==="x"?bl:xl,te=_[P],ee=P==="y"?"height":"width",X=te+m[Re],we=te-m[je],Ne=[Jo,Qo].indexOf(y)!==-1,We=(He=k==null?void 0:k[P])!=null?He:0,xe=Ne?X:te-I[ee]-C[ee]-We+M.altAxis,Ve=Ne?te+I[ee]+C[ee]-We-M.altAxis:we,be=f&&Ne?Hne(xe,te,Ve):Mx(f?xe:X,te,f?Ve:we);_[P]=be,O[P]=be-te}e.modifiersData[r]=O}}const bre={name:"preventOverflow",enabled:!0,phase:"main",fn:vre,requiresIfExists:["offset"]};function xre(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function wre(t){return t===Na(t)||!ml(t)?b3(t):xre(t)}function _re(t){var e=t.getBoundingClientRect(),n=By(e.width)/t.offsetWidth||1,r=By(e.height)/t.offsetHeight||1;return n!==1||r!==1}function Sre(t,e,n){n===void 0&&(n=!1);var r=ml(e),i=ml(e)&&_re(e),s=ch(e),o=Fy(t,i,n),a={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!n)&&((su(e)!=="body"||w3(s))&&(a=wre(e)),ml(e)?(c=Fy(e,!0),c.x+=e.clientLeft,c.y+=e.clientTop):s&&(c.x=x3(s))),{x:o.left+a.scrollLeft-c.x,y:o.top+a.scrollTop-c.y,width:o.width,height:o.height}}function Ere(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var c=e.get(a);c&&i(c)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function Tre(t){var e=Ere(t);return Dne.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function Ire(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Pre(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var R5={placement:"bottom",modifiers:[],strategy:"absolute"};function k5(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Cre(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?R5:i;return function(a,c,l){l===void 0&&(l=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},R5,s),modifiersData:{},elements:{reference:a,popper:c},attributes:{},styles:{}},d=[],h=!1,f={state:u,setOptions:function(y){var b=typeof y=="function"?y(u.options):y;g(),u.options=Object.assign({},s,u.options,b),u.scrollParents={reference:Rm(a)?Ax(a):a.contextElement?Ax(a.contextElement):[],popper:Ax(c)};var x=Tre(Pre([].concat(r,u.options.modifiers)));return u.orderedModifiers=x.filter(function(S){return S.enabled}),p(),f.update()},forceUpdate:function(){if(!h){var y=u.elements,b=y.reference,x=y.popper;if(k5(b,x)){u.rects={reference:Sre(b,Vw(x),u.options.strategy==="fixed"),popper:y3(x)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(M){return u.modifiersData[M.name]=Object.assign({},M.data)});for(var S=0;S<u.orderedModifiers.length;S++){if(u.reset===!0){u.reset=!1,S=-1;continue}var P=u.orderedModifiers[S],_=P.fn,I=P.options,C=I===void 0?{}:I,A=P.name;typeof _=="function"&&(u=_({state:u,options:C,name:A,instance:f})||u)}}}},update:Ire(function(){return new Promise(function(m){f.forceUpdate(),m(u)})}),destroy:function(){g(),h=!0}};if(!k5(a,c))return f;f.setOptions(l).then(function(m){!h&&l.onFirstUpdate&&l.onFirstUpdate(m)});function p(){u.orderedModifiers.forEach(function(m){var y=m.name,b=m.options,x=b===void 0?{}:b,S=m.effect;if(typeof S=="function"){var P=S({state:u,name:y,instance:f,options:x}),_=function(){};d.push(P||_)}})}function g(){d.forEach(function(m){return m()}),d=[]}return f}}var Mre=[Jne,gre,Yne,Une,pre,cre,bre,qne,dre],Are=Cre({defaultModifiers:Mre});function Rre(t){var d;const{elementType:e,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:i=!1,...s}=t,o=i?{}:lz(n,r),{props:a,internalRef:c}=uz({...s,externalSlotProps:o}),l=oo(c,o==null?void 0:o.ref,(d=t.additionalProps)==null?void 0:d.ref);return az(e,{...a,ref:l},r)}function Ww(t){var e;return parseInt(N.version,10)>=19?((e=t==null?void 0:t.props)==null?void 0:e.ref)||null:(t==null?void 0:t.ref)||null}function kre(t){return typeof t=="function"?t():t}const Ore=N.forwardRef(function(e,n){const{children:r,container:i,disablePortal:s=!1}=e,[o,a]=N.useState(null),c=oo(N.isValidElement(r)?Ww(r):null,n);if(Ud(()=>{s||a(kre(i)||document.body)},[i,s]),Ud(()=>{if(o&&!s)return p5(n,o),()=>{p5(n,null)}},[n,o,s]),s){if(N.isValidElement(r)){const l={ref:c};return N.cloneElement(r,l)}return r}return o&&tw.createPortal(r,o)});function PS(t){return parseInt(t,10)||0}const Nre={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function Lre(t){for(const e in t)return!1;return!0}function O5(t){return Lre(t)||t.outerHeightStyle===0&&!t.overflowing}const Dre=N.forwardRef(function(e,n){const{onChange:r,maxRows:i,minRows:s=1,style:o,value:a,...c}=e,{current:l}=N.useRef(a!=null),u=N.useRef(null),d=oo(n,u),h=N.useRef(null),f=N.useRef(null),p=N.useCallback(()=>{const x=u.current,S=f.current;if(!x||!S)return;const _=$d(x).getComputedStyle(x);if(_.width==="0px")return{outerHeightStyle:0,overflowing:!1};S.style.width=_.width,S.value=x.value||e.placeholder||"x",S.value.slice(-1)===`
`&&(S.value+=" ");const I=_.boxSizing,C=PS(_.paddingBottom)+PS(_.paddingTop),A=PS(_.borderBottomWidth)+PS(_.borderTopWidth),M=S.scrollHeight;S.value="x";const k=S.scrollHeight;let O=M;s&&(O=Math.max(Number(s)*k,O)),i&&(O=Math.min(Number(i)*k,O)),O=Math.max(O,k);const B=O+(I==="border-box"?C+A:0),$=Math.abs(O-M)<=1;return{outerHeightStyle:B,overflowing:$}},[i,s,e.placeholder]),g=_m(()=>{const x=u.current,S=p();if(!x||!S||O5(S))return!1;const P=S.outerHeightStyle;return h.current!=null&&h.current!==P}),m=N.useCallback(()=>{const x=u.current,S=p();if(!x||!S||O5(S))return;const P=S.outerHeightStyle;h.current!==P&&(h.current=P,x.style.height=`${P}px`),x.style.overflow=S.overflowing?"hidden":""},[p]),y=N.useRef(-1);Ud(()=>{const x=nz(m),S=u==null?void 0:u.current;if(!S)return;const P=$d(S);P.addEventListener("resize",x);let _;return typeof ResizeObserver<"u"&&(_=new ResizeObserver(()=>{g()&&(_.unobserve(S),cancelAnimationFrame(y.current),m(),y.current=requestAnimationFrame(()=>{_.observe(S)}))}),_.observe(S)),()=>{x.clear(),cancelAnimationFrame(y.current),P.removeEventListener("resize",x),_&&_.disconnect()}},[p,m,g]),Ud(()=>{m()});const b=x=>{l||m();const S=x.target,P=S.value.length,_=S.value.endsWith(`
`),I=S.selectionStart===P;_&&I&&S.setSelectionRange(P,P),r&&r(x)};return H.jsxs(N.Fragment,{children:[H.jsx("textarea",{value:a,onChange:b,ref:d,rows:s,style:o,...c}),H.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:f,tabIndex:-1,style:{...Nre.shadow,...o,paddingTop:0,paddingBottom:0}})]})});function xR(t){return typeof t=="string"}function sv({props:t,states:e,muiFormControl:n}){return e.reduce((r,i)=>(r[i]=t[i],n&&typeof t[i]>"u"&&(r[i]=n[i]),r),{})}const _3=N.createContext(void 0);function ov(){return N.useContext(_3)}function N5(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function ZT(t,e=!1){return t&&(N5(t.value)&&t.value!==""||e&&N5(t.defaultValue)&&t.defaultValue!=="")}function Bre(t){return t.startAdornment}function Fre(t){return cr("MuiInputBase",t)}const $y=er("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var L5;const MI=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,n.size==="small"&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e[`color${dn(n.color)}`],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},AI=(t,e)=>{const{ownerState:n}=t;return[e.input,n.size==="small"&&e.inputSizeSmall,n.multiline&&e.inputMultiline,n.type==="search"&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},Ure=t=>{const{classes:e,color:n,disabled:r,error:i,endAdornment:s,focused:o,formControl:a,fullWidth:c,hiddenLabel:l,multiline:u,readOnly:d,size:h,startAdornment:f,type:p}=t,g={root:["root",`color${dn(n)}`,r&&"disabled",i&&"error",c&&"fullWidth",o&&"focused",a&&"formControl",h&&h!=="medium"&&`size${dn(h)}`,u&&"multiline",f&&"adornedStart",s&&"adornedEnd",l&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled",p==="search"&&"inputTypeSearch",u&&"inputMultiline",h==="small"&&"inputSizeSmall",l&&"inputHiddenLabel",f&&"inputAdornedStart",s&&"inputAdornedEnd",d&&"readOnly"]};return ur(g,Fre,e)},RI=Yt("div",{name:"MuiInputBase",slot:"Root",overridesResolver:MI})(Ir(({theme:t})=>({...t.typography.body1,color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${$y.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:e})=>e.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:e,size:n})=>e.multiline&&n==="small",style:{paddingTop:1}},{props:({ownerState:e})=>e.fullWidth,style:{width:"100%"}}]}))),kI=Yt("input",{name:"MuiInputBase",slot:"Input",overridesResolver:AI})(Ir(({theme:t})=>{const e=t.palette.mode==="light",n={color:"currentColor",...t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5},transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})},r={opacity:"0 !important"},i=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${$y.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus::-ms-input-placeholder":i},[`&.${$y.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},variants:[{props:({ownerState:s})=>!s.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:s})=>s.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),D5=u3({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),S3=N.forwardRef(function(e,n){const r=dr({props:e,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:s,autoFocus:o,className:a,color:c,components:l={},componentsProps:u={},defaultValue:d,disabled:h,disableInjectingGlobalStyles:f,endAdornment:p,error:g,fullWidth:m=!1,id:y,inputComponent:b="input",inputProps:x={},inputRef:S,margin:P,maxRows:_,minRows:I,multiline:C=!1,name:A,onBlur:M,onChange:k,onClick:O,onFocus:B,onKeyDown:$,onKeyUp:U,placeholder:q,readOnly:K,renderSuffix:V,rows:G,size:j,slotProps:Q={},slots:se={},startAdornment:Z,type:ie="text",value:pe,...ue}=r,le=x.value!=null?x.value:pe,{current:ae}=N.useRef(le!=null),_e=N.useRef(),ye=N.useCallback(Ie=>{},[]),Ae=oo(_e,S,x.ref,ye),[Oe,Be]=N.useState(!1),ce=ov(),Ge=sv({props:r,muiFormControl:ce,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Ge.focused=ce?ce.focused:Oe,N.useEffect(()=>{!ce&&h&&Oe&&(Be(!1),M&&M())},[ce,h,Oe,M]);const Pe=ce&&ce.onFilled,He=ce&&ce.onEmpty,Re=N.useCallback(Ie=>{ZT(Ie)?Pe&&Pe():He&&He()},[Pe,He]);Ud(()=>{ae&&Re({value:le})},[le,Re,ae]);const je=Ie=>{B&&B(Ie),x.onFocus&&x.onFocus(Ie),ce&&ce.onFocus?ce.onFocus(Ie):Be(!0)},te=Ie=>{M&&M(Ie),x.onBlur&&x.onBlur(Ie),ce&&ce.onBlur?ce.onBlur(Ie):Be(!1)},ee=(Ie,...me)=>{if(!ae){const Ee=Ie.target||_e.current;if(Ee==null)throw new Error(Bd(1));Re({value:Ee.value})}x.onChange&&x.onChange(Ie,...me),k&&k(Ie,...me)};N.useEffect(()=>{Re(_e.current)},[]);const X=Ie=>{_e.current&&Ie.currentTarget===Ie.target&&_e.current.focus(),O&&O(Ie)};let we=b,Ne=x;C&&we==="input"&&(G?Ne={type:void 0,minRows:G,maxRows:G,...Ne}:Ne={type:void 0,maxRows:_,minRows:I,...Ne},we=Dre);const We=Ie=>{Re(Ie.animationName==="mui-auto-fill-cancel"?_e.current:{value:"x"})};N.useEffect(()=>{ce&&ce.setAdornedStart(!!Z)},[ce,Z]);const xe={...r,color:Ge.color||"primary",disabled:Ge.disabled,endAdornment:p,error:Ge.error,focused:Ge.focused,formControl:ce,fullWidth:m,hiddenLabel:Ge.hiddenLabel,multiline:C,size:Ge.size,startAdornment:Z,type:ie},Ve=Ure(xe),be=se.root||l.Root||RI,ge=Q.root||u.root||{},Se=se.input||l.Input||kI;return Ne={...Ne,...Q.input??u.input},H.jsxs(N.Fragment,{children:[!f&&typeof D5=="function"&&(L5||(L5=H.jsx(D5,{}))),H.jsxs(be,{...ge,ref:n,onClick:X,...ue,...!xR(be)&&{ownerState:{...xe,...ge.ownerState}},className:Fe(Ve.root,ge.className,a,K&&"MuiInputBase-readOnly"),children:[Z,H.jsx(_3.Provider,{value:null,children:H.jsx(Se,{"aria-invalid":Ge.error,"aria-describedby":i,autoComplete:s,autoFocus:o,defaultValue:d,disabled:Ge.disabled,id:y,onAnimationStart:We,name:A,placeholder:q,readOnly:K,required:Ge.required,rows:G,value:le,onKeyDown:$,onKeyUp:U,type:ie,...Ne,...!xR(Se)&&{as:we,ownerState:{...xe,...Ne.ownerState}},ref:Ae,className:Fe(Ve.input,Ne.className,K&&"MuiInputBase-readOnly"),onBlur:te,onChange:ee,onFocus:je})}),p,V?V({...Ge,startAdornment:Z}):null]})]})});function $re(t){return cr("MuiInput",t)}const Cb={...$y,...er("MuiInput",["root","underline","input"])};function zre(t){return cr("MuiOutlinedInput",t)}const zc={...$y,...er("MuiOutlinedInput",["root","notchedOutline","input"])};function Hre(t){return cr("MuiFilledInput",t)}const np={...$y,...er("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},Vre=tz(H.jsx("path",{d:"M7 10l5 5 5-5z"})),Wre={entering:{opacity:1},entered:{opacity:1}},jre=N.forwardRef(function(e,n){const r=zw(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:o=!0,children:a,easing:c,in:l,onEnter:u,onEntered:d,onEntering:h,onExit:f,onExited:p,onExiting:g,style:m,timeout:y=i,TransitionComponent:b=ao,...x}=e,S=N.useRef(null),P=oo(S,Ww(a),n),_=$=>U=>{if($){const q=S.current;U===void 0?$(q):$(q,U)}},I=_(h),C=_(($,U)=>{oz($);const q=Ly({style:m,timeout:y,easing:c},{mode:"enter"});$.style.webkitTransition=r.transitions.create("opacity",q),$.style.transition=r.transitions.create("opacity",q),u&&u($,U)}),A=_(d),M=_(g),k=_($=>{const U=Ly({style:m,timeout:y,easing:c},{mode:"exit"});$.style.webkitTransition=r.transitions.create("opacity",U),$.style.transition=r.transitions.create("opacity",U),f&&f($)}),O=_(p),B=$=>{s&&s(S.current,$)};return H.jsx(b,{appear:o,in:l,nodeRef:S,onEnter:C,onEntered:A,onEntering:I,onExit:k,onExited:O,onExiting:M,addEndListener:B,timeout:y,...x,children:($,{ownerState:U,...q})=>N.cloneElement(a,{style:{opacity:0,visibility:$==="exited"&&!l?"hidden":void 0,...Wre[$],...m,...a.props.style},ref:P,...q})})});function qre(t){return cr("MuiBackdrop",t)}er("MuiBackdrop",["root","invisible"]);const Kre=t=>{const{classes:e,invisible:n}=t;return ur({root:["root",n&&"invisible"]},qre,e)},Gre=Yt("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),JT=N.forwardRef(function(e,n){const r=dr({props:e,name:"MuiBackdrop"}),{children:i,className:s,component:o="div",invisible:a=!1,open:c,components:l={},componentsProps:u={},slotProps:d={},slots:h={},TransitionComponent:f,transitionDuration:p,...g}=r,m={...r,component:o,invisible:a},y=Kre(m),b={transition:f,root:l.Root,...h},x={...u,...d},S={slots:b,slotProps:x},[P,_]=Ss("root",{elementType:Gre,externalForwardedProps:S,className:Fe(y.root,s),ownerState:m}),[I,C]=Ss("transition",{elementType:jre,externalForwardedProps:S,ownerState:m});return H.jsx(I,{in:c,timeout:p,...g,...C,children:H.jsx(P,{"aria-hidden":!0,..._,classes:y,ref:n,children:i})})}),Xre=er("MuiBox",["root"]),Yre=II(),Ns=BQ({themeId:Zc,defaultTheme:Yre,defaultClassName:Xre.root,generateClassName:O$.generate});function Zre(t){return cr("MuiButton",t)}const rp=er("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),Jre=N.createContext({}),Qre=N.createContext(void 0),eie=t=>{const{color:e,disableElevation:n,fullWidth:r,size:i,variant:s,loading:o,loadingPosition:a,classes:c}=t,l={root:["root",o&&"loading",s,`${s}${dn(e)}`,`size${dn(i)}`,`${s}Size${dn(i)}`,`color${dn(e)}`,n&&"disableElevation",r&&"fullWidth",o&&`loadingPosition${dn(a)}`],startIcon:["icon","startIcon",`iconSize${dn(i)}`],endIcon:["icon","endIcon",`iconSize${dn(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},u=ur(l,Zre,c);return{...c,...u}},xz=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],tie=Yt(p3,{shouldForwardProp:t=>El(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${dn(n.color)}`],e[`size${dn(n.size)}`],e[`${n.variant}Size${dn(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth,n.loading&&e.loading]}})(Ir(({theme:t})=>{const e=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],n=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return{...t.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${rp.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},[`&.${rp.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},[`&.${rp.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${rp.disabled}`]:{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(Oa()).map(([r])=>({props:{color:r},style:{"--variant-textColor":(t.vars||t).palette[r].main,"--variant-outlinedColor":(t.vars||t).palette[r].main,"--variant-outlinedBorder":t.vars?`rgba(${t.vars.palette[r].mainChannel} / 0.5)`:dl(t.palette[r].main,.5),"--variant-containedColor":(t.vars||t).palette[r].contrastText,"--variant-containedBg":(t.vars||t).palette[r].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[r].dark,"--variant-textBg":t.vars?`rgba(${t.vars.palette[r].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:dl(t.palette[r].main,t.palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[r].main,"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette[r].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:dl(t.palette[r].main,t.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:e,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:dl(t.palette.text.primary,t.palette.action.hoverOpacity),"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:dl(t.palette.text.primary,t.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${rp.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${rp.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${rp.loading}`]:{color:"transparent"}}}]}})),nie=Yt("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,n.loading&&e.startIconLoadingStart,e[`iconSize${dn(n.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...xz]})),rie=Yt("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,n.loading&&e.endIconLoadingEnd,e[`iconSize${dn(n.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...xz]})),iie=Yt("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),B5=Yt("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),hl=N.forwardRef(function(e,n){const r=N.useContext(Jre),i=N.useContext(Qre),s=ew(r,e),o=dr({props:s,name:"MuiButton"}),{children:a,color:c="primary",component:l="button",className:u,disabled:d=!1,disableElevation:h=!1,disableFocusRipple:f=!1,endIcon:p,focusVisibleClassName:g,fullWidth:m=!1,id:y,loading:b=null,loadingIndicator:x,loadingPosition:S="center",size:P="medium",startIcon:_,type:I,variant:C="text",...A}=o,M=d3(y),k=x??H.jsx(XT,{"aria-labelledby":M,color:"inherit",size:16}),O={...o,color:c,component:l,disabled:d,disableElevation:h,disableFocusRipple:f,fullWidth:m,loading:b,loadingIndicator:k,loadingPosition:S,size:P,type:I,variant:C},B=eie(O),$=(_||b&&S==="start")&&H.jsx(nie,{className:B.startIcon,ownerState:O,children:_||H.jsx(B5,{className:B.loadingIconPlaceholder,ownerState:O})}),U=(p||b&&S==="end")&&H.jsx(rie,{className:B.endIcon,ownerState:O,children:p||H.jsx(B5,{className:B.loadingIconPlaceholder,ownerState:O})}),q=i||"",K=typeof b=="boolean"?H.jsx("span",{className:B.loadingWrapper,style:{display:"contents"},children:b&&H.jsx(iie,{className:B.loadingIndicator,ownerState:O,children:k})}):null;return H.jsxs(tie,{ownerState:O,className:Fe(r.className,B.root,u,q),component:l,disabled:d||b,focusRipple:!f,focusVisibleClassName:Fe(B.focusVisible,g),ref:n,type:I,id:b?M:y,...A,classes:B,children:[$,S!=="end"&&K,a,S==="end"&&K,U]})});function sie(t){return cr("MuiCard",t)}er("MuiCard",["root"]);const oie=t=>{const{classes:e}=t;return ur({root:["root"]},sie,e)},aie=Yt(iu,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),wz=N.forwardRef(function(e,n){const r=dr({props:e,name:"MuiCard"}),{className:i,raised:s=!1,...o}=r,a={...r,raised:s},c=oie(a);return H.jsx(aie,{className:Fe(c.root,i),elevation:s?8:void 0,ref:n,ownerState:a,...o})});function lie(t){return cr("MuiCardActionArea",t)}const $C=er("MuiCardActionArea",["root","focusVisible","focusHighlight"]),cie=t=>{const{classes:e}=t;return ur({root:["root"],focusHighlight:["focusHighlight"]},lie,e)},uie=Yt(p3,{name:"MuiCardActionArea",slot:"Root"})(Ir(({theme:t})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${$C.focusHighlight}`]:{opacity:(t.vars||t).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${$C.focusVisible} .${$C.focusHighlight}`]:{opacity:(t.vars||t).palette.action.focusOpacity}}))),die=Yt("span",{name:"MuiCardActionArea",slot:"FocusHighlight"})(Ir(({theme:t})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:t.transitions.create("opacity",{duration:t.transitions.duration.short})}))),fie=N.forwardRef(function(e,n){const r=dr({props:e,name:"MuiCardActionArea"}),{children:i,className:s,focusVisibleClassName:o,slots:a={},slotProps:c={},...l}=r,u=r,d=cie(u),h={slots:a,slotProps:c},[f,p]=Ss("root",{elementType:uie,externalForwardedProps:{...h,...l},shouldForwardComponentProp:!0,ownerState:u,ref:n,className:Fe(d.root,s),additionalProps:{focusVisibleClassName:Fe(o,d.focusVisible)}}),[g,m]=Ss("focusHighlight",{elementType:die,externalForwardedProps:h,ownerState:u,ref:n,className:d.focusHighlight});return H.jsxs(f,{...p,children:[i,H.jsx(g,{...m})]})});function hie(t){return cr("MuiCardActions",t)}er("MuiCardActions",["root","spacing"]);const pie=t=>{const{classes:e,disableSpacing:n}=t;return ur({root:["root",!n&&"spacing"]},hie,e)},mie=Yt("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})({display:"flex",alignItems:"center",padding:8,variants:[{props:{disableSpacing:!1},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),gie=N.forwardRef(function(e,n){const r=dr({props:e,name:"MuiCardActions"}),{disableSpacing:i=!1,className:s,...o}=r,a={...r,disableSpacing:i},c=pie(a);return H.jsx(mie,{className:Fe(c.root,s),ownerState:a,ref:n,...o})});function yie(t){return cr("MuiCardContent",t)}er("MuiCardContent",["root"]);const vie=t=>{const{classes:e}=t;return ur({root:["root"]},yie,e)},bie=Yt("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),_z=N.forwardRef(function(e,n){const r=dr({props:e,name:"MuiCardContent"}),{className:i,component:s="div",...o}=r,a={...r,component:s},c=vie(a);return H.jsx(bie,{as:s,className:Fe(c.root,i),ownerState:a,ref:n,...o})}),jw=Eee({createStyledComponent:Yt("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${dn(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),useThemeProps:t=>dr({props:t,name:"MuiContainer"})}),wR=typeof u3({})=="function",xie=(t,e)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...e&&!t.vars&&{colorScheme:t.palette.mode}}),wie=t=>({color:(t.vars||t).palette.text.primary,...t.typography.body1,backgroundColor:(t.vars||t).palette.background.default,"@media print":{backgroundColor:(t.vars||t).palette.common.white}}),Sz=(t,e=!1)=>{var s,o;const n={};e&&t.colorSchemes&&typeof t.getColorSchemeSelector=="function"&&Object.entries(t.colorSchemes).forEach(([a,c])=>{var u,d;const l=t.getColorSchemeSelector(a);l.startsWith("@")?n[l]={":root":{colorScheme:(u=c.palette)==null?void 0:u.mode}}:n[l.replace(/\s*&/,"")]={colorScheme:(d=c.palette)==null?void 0:d.mode}});let r={html:xie(t,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:t.typography.fontWeightBold},body:{margin:0,...wie(t),"&::backdrop":{backgroundColor:(t.vars||t).palette.background.default}},...n};const i=(o=(s=t.components)==null?void 0:s.MuiCssBaseline)==null?void 0:o.styleOverrides;return i&&(r=[r,i]),r},ET="mui-ecs",_ie=t=>{const e=Sz(t,!1),n=Array.isArray(e)?e[0]:e;return!t.vars&&n&&(n.html[`:root:has(${ET})`]={colorScheme:t.palette.mode}),t.colorSchemes&&Object.entries(t.colorSchemes).forEach(([r,i])=>{var o,a;const s=t.getColorSchemeSelector(r);s.startsWith("@")?n[s]={[`:root:not(:has(.${ET}))`]:{colorScheme:(o=i.palette)==null?void 0:o.mode}}:n[s.replace(/\s*&/,"")]={[`&:not(:has(.${ET}))`]:{colorScheme:(a=i.palette)==null?void 0:a.mode}}}),e},Sie=u3(wR?({theme:t,enableColorScheme:e})=>Sz(t,e):({theme:t})=>_ie(t));function Eie(t){const e=dr({props:t,name:"MuiCssBaseline"}),{children:n,enableColorScheme:r=!1}=e;return H.jsxs(N.Fragment,{children:[wR&&H.jsx(Sie,{enableColorScheme:r}),!wR&&!r&&H.jsx("span",{className:ET,style:{display:"none"}}),n]})}function Ez(t=window){const e=t.document.documentElement.clientWidth;return t.innerWidth-e}function Tie(t){const e=bc(t);return e.body===t?$d(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function Rx(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function F5(t){return parseInt($d(t).getComputedStyle(t).paddingRight,10)||0}function Iie(t){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(t.tagName),r=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return n||r}function U5(t,e,n,r,i){const s=[e,n,...r];[].forEach.call(t.children,o=>{const a=!s.includes(o),c=!Iie(o);a&&c&&Rx(o,i)})}function zC(t,e){let n=-1;return t.some((r,i)=>e(r)?(n=i,!0):!1),n}function Pie(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(Tie(r)){const o=Ez($d(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${F5(r)+o}px`;const a=bc(r).querySelectorAll(".mui-fixed");[].forEach.call(a,c=>{n.push({value:c.style.paddingRight,property:"padding-right",el:c}),c.style.paddingRight=`${F5(c)+o}px`})}let s;if(r.parentNode instanceof DocumentFragment)s=bc(r).body;else{const o=r.parentElement,a=$d(r);s=(o==null?void 0:o.nodeName)==="HTML"&&a.getComputedStyle(o).overflowY==="scroll"?o:r}n.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{n.forEach(({value:s,el:o,property:a})=>{s?o.style.setProperty(a,s):o.style.removeProperty(a)})}}function Cie(t){const e=[];return[].forEach.call(t.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}let Mie=class{constructor(){this.modals=[],this.containers=[]}add(e,n){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&Rx(e.modalRef,!1);const i=Cie(n);U5(n,e.mount,e.modalRef,i,!0);const s=zC(this.containers,o=>o.container===n);return s!==-1?(this.containers[s].modals.push(e),r):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:i}),r)}mount(e,n){const r=zC(this.containers,s=>s.modals.includes(e)),i=this.containers[r];i.restore||(i.restore=Pie(i,n))}remove(e,n=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const i=zC(this.containers,o=>o.modals.includes(e)),s=this.containers[i];if(s.modals.splice(s.modals.indexOf(e),1),this.modals.splice(r,1),s.modals.length===0)s.restore&&s.restore(),e.modalRef&&Rx(e.modalRef,n),U5(s.container,e.mount,e.modalRef,s.hiddenSiblings,!1),this.containers.splice(i,1);else{const o=s.modals[s.modals.length-1];o.modalRef&&Rx(o.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}};const Aie=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Rie(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:e}function kie(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const e=r=>t.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=e(`[name="${t.name}"]:checked`);return n||(n=e(`[name="${t.name}"]`)),n!==t}function Oie(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||kie(t))}function Nie(t){const e=[],n=[];return Array.from(t.querySelectorAll(Aie)).forEach((r,i)=>{const s=Rie(r);s===-1||!Oie(r)||(s===0?e.push(r):n.push({documentOrder:i,tabIndex:s,node:r}))}),n.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(e)}function Lie(){return!0}function Die(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:s=Nie,isEnabled:o=Lie,open:a}=t,c=N.useRef(!1),l=N.useRef(null),u=N.useRef(null),d=N.useRef(null),h=N.useRef(null),f=N.useRef(!1),p=N.useRef(null),g=oo(Ww(e),p),m=N.useRef(null);N.useEffect(()=>{!a||!p.current||(f.current=!n)},[n,a]),N.useEffect(()=>{if(!a||!p.current)return;const x=bc(p.current);return p.current.contains(x.activeElement)||(p.current.hasAttribute("tabIndex")||p.current.setAttribute("tabIndex","-1"),f.current&&p.current.focus()),()=>{i||(d.current&&d.current.focus&&(c.current=!0,d.current.focus()),d.current=null)}},[a]),N.useEffect(()=>{if(!a||!p.current)return;const x=bc(p.current),S=I=>{m.current=I,!(r||!o()||I.key!=="Tab")&&x.activeElement===p.current&&I.shiftKey&&(c.current=!0,u.current&&u.current.focus())},P=()=>{var A,M;const I=p.current;if(I===null)return;if(!x.hasFocus()||!o()||c.current){c.current=!1;return}if(I.contains(x.activeElement)||r&&x.activeElement!==l.current&&x.activeElement!==u.current)return;if(x.activeElement!==h.current)h.current=null;else if(h.current!==null)return;if(!f.current)return;let C=[];if((x.activeElement===l.current||x.activeElement===u.current)&&(C=s(p.current)),C.length>0){const k=!!((A=m.current)!=null&&A.shiftKey&&((M=m.current)==null?void 0:M.key)==="Tab"),O=C[0],B=C[C.length-1];typeof O!="string"&&typeof B!="string"&&(k?B.focus():O.focus())}else I.focus()};x.addEventListener("focusin",P),x.addEventListener("keydown",S,!0);const _=setInterval(()=>{x.activeElement&&x.activeElement.tagName==="BODY"&&P()},50);return()=>{clearInterval(_),x.removeEventListener("focusin",P),x.removeEventListener("keydown",S,!0)}},[n,r,i,o,a,s]);const y=x=>{d.current===null&&(d.current=x.relatedTarget),f.current=!0,h.current=x.target;const S=e.props.onFocus;S&&S(x)},b=x=>{d.current===null&&(d.current=x.relatedTarget),f.current=!0};return H.jsxs(N.Fragment,{children:[H.jsx("div",{tabIndex:a?0:-1,onFocus:b,ref:l,"data-testid":"sentinelStart"}),N.cloneElement(e,{ref:g,onFocus:y}),H.jsx("div",{tabIndex:a?0:-1,onFocus:b,ref:u,"data-testid":"sentinelEnd"})]})}function Bie(t){return typeof t=="function"?t():t}function Fie(t){return t?t.props.hasOwnProperty("in"):!1}const $5=()=>{},CS=new Mie;function Uie(t){const{container:e,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,closeAfterTransition:i=!1,onTransitionEnter:s,onTransitionExited:o,children:a,onClose:c,open:l,rootRef:u}=t,d=N.useRef({}),h=N.useRef(null),f=N.useRef(null),p=oo(f,u),[g,m]=N.useState(!l),y=Fie(a);let b=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(b=!1);const x=()=>bc(h.current),S=()=>(d.current.modalRef=f.current,d.current.mount=h.current,d.current),P=()=>{CS.mount(S(),{disableScrollLock:r}),f.current&&(f.current.scrollTop=0)},_=_m(()=>{const U=Bie(e)||x().body;CS.add(S(),U),f.current&&P()}),I=()=>CS.isTopModal(S()),C=_m(U=>{h.current=U,U&&(l&&I()?P():f.current&&Rx(f.current,b))}),A=N.useCallback(()=>{CS.remove(S(),b)},[b]);N.useEffect(()=>()=>{A()},[A]),N.useEffect(()=>{l?_():(!y||!i)&&A()},[l,A,y,i,_]);const M=U=>q=>{var K;(K=U.onKeyDown)==null||K.call(U,q),!(q.key!=="Escape"||q.which===229||!I())&&(n||(q.stopPropagation(),c&&c(q,"escapeKeyDown")))},k=U=>q=>{var K;(K=U.onClick)==null||K.call(U,q),q.target===q.currentTarget&&c&&c(q,"backdropClick")};return{getRootProps:(U={})=>{const q=cz(t);delete q.onTransitionEnter,delete q.onTransitionExited;const K={...q,...U};return{role:"presentation",...K,onKeyDown:M(K),ref:p}},getBackdropProps:(U={})=>{const q=U;return{"aria-hidden":!0,...q,onClick:k(q),open:l}},getTransitionProps:()=>{const U=()=>{m(!1),s&&s()},q=()=>{m(!0),o&&o(),i&&A()};return{onEnter:h5(U,(a==null?void 0:a.props.onEnter)??$5),onExited:h5(q,(a==null?void 0:a.props.onExited)??$5)}},rootRef:p,portalRef:C,isTopModal:I,exited:g,hasTransition:y}}function $ie(t){return cr("MuiModal",t)}er("MuiModal",["root","hidden","backdrop"]);const zie=t=>{const{open:e,exited:n,classes:r}=t;return ur({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},$ie,r)},Hie=Yt("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})(Ir(({theme:t})=>({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:e})=>!e.open&&e.exited,style:{visibility:"hidden"}}]}))),Vie=Yt(JT,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),Wie=N.forwardRef(function(e,n){const r=dr({name:"MuiModal",props:e}),{BackdropComponent:i=Vie,BackdropProps:s,classes:o,className:a,closeAfterTransition:c=!1,children:l,container:u,component:d,components:h={},componentsProps:f={},disableAutoFocus:p=!1,disableEnforceFocus:g=!1,disableEscapeKeyDown:m=!1,disablePortal:y=!1,disableRestoreFocus:b=!1,disableScrollLock:x=!1,hideBackdrop:S=!1,keepMounted:P=!1,onClose:_,onTransitionEnter:I,onTransitionExited:C,open:A,slotProps:M={},slots:k={},theme:O,...B}=r,$={...r,closeAfterTransition:c,disableAutoFocus:p,disableEnforceFocus:g,disableEscapeKeyDown:m,disablePortal:y,disableRestoreFocus:b,disableScrollLock:x,hideBackdrop:S,keepMounted:P},{getRootProps:U,getBackdropProps:q,getTransitionProps:K,portalRef:V,isTopModal:G,exited:j,hasTransition:Q}=Uie({...$,rootRef:n}),se={...$,exited:j},Z=zie(se),ie={};if(l.props.tabIndex===void 0&&(ie.tabIndex="-1"),Q){const{onEnter:ye,onExited:Ae}=K();ie.onEnter=ye,ie.onExited=Ae}const pe={slots:{root:h.Root,backdrop:h.Backdrop,...k},slotProps:{...f,...M}},[ue,le]=Ss("root",{ref:n,elementType:Hie,externalForwardedProps:{...pe,...B,component:d},getSlotProps:U,ownerState:se,className:Fe(a,Z==null?void 0:Z.root,!se.open&&se.exited&&(Z==null?void 0:Z.hidden))}),[ae,_e]=Ss("backdrop",{ref:s==null?void 0:s.ref,elementType:i,externalForwardedProps:pe,shouldForwardComponentProp:!0,additionalProps:s,getSlotProps:ye=>q({...ye,onClick:Ae=>{ye!=null&&ye.onClick&&ye.onClick(Ae)}}),className:Fe(s==null?void 0:s.className,Z==null?void 0:Z.backdrop),ownerState:se});return!P&&!A&&(!Q||j)?null:H.jsx(Ore,{ref:V,container:u,disablePortal:y,children:H.jsxs(ue,{...le,children:[!S&&i?H.jsx(ae,{..._e}):null,H.jsx(Die,{disableEnforceFocus:g,disableAutoFocus:p,disableRestoreFocus:b,isEnabled:G,open:A,children:N.cloneElement(l,ie)})]})})}),z5=er("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),jie=t=>{const{classes:e,disableUnderline:n,startAdornment:r,endAdornment:i,size:s,hiddenLabel:o,multiline:a}=t,c={root:["root",!n&&"underline",r&&"adornedStart",i&&"adornedEnd",s==="small"&&`size${dn(s)}`,o&&"hiddenLabel",a&&"multiline"],input:["input"]},l=ur(c,Hre,e);return{...e,...l}},qie=Yt(RI,{shouldForwardProp:t=>El(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...MI(t,e),!n.disableUnderline&&e.underline]}})(Ir(({theme:t})=>{const e=t.palette.mode==="light",n=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",s=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r}},[`&.${np.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r},[`&.${np.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:s},variants:[{props:({ownerState:o})=>!o.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${np.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${np.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${np.disabled}, .${np.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${np.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(Oa()).map(([o])=>{var a;return{props:{disableUnderline:!1,color:o},style:{"&::after":{borderBottom:`2px solid ${(a=(t.vars||t).palette[o])==null?void 0:a.main}`}}}}),{props:({ownerState:o})=>o.startAdornment,style:{paddingLeft:12}},{props:({ownerState:o})=>o.endAdornment,style:{paddingRight:12}},{props:({ownerState:o})=>o.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:o,size:a})=>o.multiline&&a==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:o})=>o.multiline&&o.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:o})=>o.multiline&&o.hiddenLabel&&o.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),Kie=Yt(kI,{name:"MuiFilledInput",slot:"Input",overridesResolver:AI})(Ir(({theme:t})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:e})=>e.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}},{props:({ownerState:e})=>e.hiddenLabel&&e.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:e})=>e.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),E3=N.forwardRef(function(e,n){const r=dr({props:e,name:"MuiFilledInput"}),{disableUnderline:i=!1,components:s={},componentsProps:o,fullWidth:a=!1,hiddenLabel:c,inputComponent:l="input",multiline:u=!1,slotProps:d,slots:h={},type:f="text",...p}=r,g={...r,disableUnderline:i,fullWidth:a,inputComponent:l,multiline:u,type:f},m=jie(r),y={root:{ownerState:g},input:{ownerState:g}},b=d??o?no(y,d??o):y,x=h.root??s.Root??qie,S=h.input??s.Input??Kie;return H.jsx(S3,{slots:{root:x,input:S},slotProps:b,fullWidth:a,inputComponent:l,multiline:u,ref:n,type:f,...p,classes:m})});E3.muiName="Input";function Gie(t){return cr("MuiFormControl",t)}er("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Xie=t=>{const{classes:e,margin:n,fullWidth:r}=t,i={root:["root",n!=="none"&&`margin${dn(n)}`,r&&"fullWidth"]};return ur(i,Gie,e)},Yie=Yt("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`margin${dn(n.margin)}`],n.fullWidth&&e.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),Zie=N.forwardRef(function(e,n){const r=dr({props:e,name:"MuiFormControl"}),{children:i,className:s,color:o="primary",component:a="div",disabled:c=!1,error:l=!1,focused:u,fullWidth:d=!1,hiddenLabel:h=!1,margin:f="none",required:p=!1,size:g="medium",variant:m="outlined",...y}=r,b={...r,color:o,component:a,disabled:c,error:l,fullWidth:d,hiddenLabel:h,margin:f,required:p,size:g,variant:m},x=Xie(b),[S,P]=N.useState(()=>{let U=!1;return i&&N.Children.forEach(i,q=>{if(!_T(q,["Input","Select"]))return;const K=_T(q,["Select"])?q.props.input:q;K&&Bre(K.props)&&(U=!0)}),U}),[_,I]=N.useState(()=>{let U=!1;return i&&N.Children.forEach(i,q=>{_T(q,["Input","Select"])&&(ZT(q.props,!0)||ZT(q.props.inputProps,!0))&&(U=!0)}),U}),[C,A]=N.useState(!1);c&&C&&A(!1);const M=u!==void 0&&!c?u:C;let k;N.useRef(!1);const O=N.useCallback(()=>{I(!0)},[]),B=N.useCallback(()=>{I(!1)},[]),$=N.useMemo(()=>({adornedStart:S,setAdornedStart:P,color:o,disabled:c,error:l,filled:_,focused:M,fullWidth:d,hiddenLabel:h,size:g,onBlur:()=>{A(!1)},onFocus:()=>{A(!0)},onEmpty:B,onFilled:O,registerEffect:k,required:p,variant:m}),[S,o,c,l,_,M,d,h,k,B,O,p,g,m]);return H.jsx(_3.Provider,{value:$,children:H.jsx(Yie,{as:a,ownerState:b,className:Fe(x.root,s),ref:n,...y,children:i})})});function Jie(t){return cr("MuiFormHelperText",t)}const H5=er("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var V5;const Qie=t=>{const{classes:e,contained:n,size:r,disabled:i,error:s,filled:o,focused:a,required:c}=t,l={root:["root",i&&"disabled",s&&"error",r&&`size${dn(r)}`,n&&"contained",a&&"focused",o&&"filled",c&&"required"]};return ur(l,Jie,e)},ese=Yt("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e[`size${dn(n.size)}`],n.contained&&e.contained,n.filled&&e.filled]}})(Ir(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${H5.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${H5.error}`]:{color:(t.vars||t).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:e})=>e.contained,style:{marginLeft:14,marginRight:14}}]}))),tse=N.forwardRef(function(e,n){const r=dr({props:e,name:"MuiFormHelperText"}),{children:i,className:s,component:o="p",disabled:a,error:c,filled:l,focused:u,margin:d,required:h,variant:f,...p}=r,g=ov(),m=sv({props:r,muiFormControl:g,states:["variant","size","disabled","error","filled","focused","required"]}),y={...r,component:o,contained:m.variant==="filled"||m.variant==="outlined",variant:m.variant,size:m.size,disabled:m.disabled,error:m.error,filled:m.filled,focused:m.focused,required:m.required};delete y.ownerState;const b=Qie(y);return H.jsx(ese,{as:o,className:Fe(b.root,s),ref:n,...p,ownerState:y,children:i===" "?V5||(V5=H.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):i})});function nse(t){return cr("MuiFormLabel",t)}const kx=er("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),rse=t=>{const{classes:e,color:n,focused:r,disabled:i,error:s,filled:o,required:a}=t,c={root:["root",`color${dn(n)}`,i&&"disabled",s&&"error",o&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",s&&"error"]};return ur(c,nse,e)},ise=Yt("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color==="secondary"&&e.colorSecondary,n.filled&&e.filled]}})(Ir(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(t.palette).filter(Oa()).map(([e])=>({props:{color:e},style:{[`&.${kx.focused}`]:{color:(t.vars||t).palette[e].main}}})),{props:{},style:{[`&.${kx.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${kx.error}`]:{color:(t.vars||t).palette.error.main}}}]}))),sse=Yt("span",{name:"MuiFormLabel",slot:"Asterisk"})(Ir(({theme:t})=>({[`&.${kx.error}`]:{color:(t.vars||t).palette.error.main}}))),ose=N.forwardRef(function(e,n){const r=dr({props:e,name:"MuiFormLabel"}),{children:i,className:s,color:o,component:a="label",disabled:c,error:l,filled:u,focused:d,required:h,...f}=r,p=ov(),g=sv({props:r,muiFormControl:p,states:["color","required","focused","disabled","error","filled"]}),m={...r,color:g.color||"primary",component:a,disabled:g.disabled,error:g.error,filled:g.filled,focused:g.focused,required:g.required},y=rse(m);return H.jsxs(ise,{as:a,ownerState:m,className:Fe(y.root,s),ref:n,...f,children:[i,g.required&&H.jsxs(sse,{ownerState:m,"aria-hidden":!0,className:y.asterisk,children:["","*"]})]})}),eo=$ee({createStyledComponent:Yt("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.container&&e.container]}}),componentName:"MuiGrid",useThemeProps:t=>dr({props:t,name:"MuiGrid"}),useTheme:zw});function _R(t){return`scale(${t}, ${t**2})`}const ase={entering:{opacity:1,transform:_R(1)},entered:{opacity:1,transform:"none"}},HC=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),SR=N.forwardRef(function(e,n){const{addEndListener:r,appear:i=!0,children:s,easing:o,in:a,onEnter:c,onEntered:l,onEntering:u,onExit:d,onExited:h,onExiting:f,style:p,timeout:g="auto",TransitionComponent:m=ao,...y}=e,b=h3(),x=N.useRef(),S=zw(),P=N.useRef(null),_=oo(P,Ww(s),n),I=U=>q=>{if(U){const K=P.current;q===void 0?U(K):U(K,q)}},C=I(u),A=I((U,q)=>{oz(U);const{duration:K,delay:V,easing:G}=Ly({style:p,timeout:g,easing:o},{mode:"enter"});let j;g==="auto"?(j=S.transitions.getAutoHeightDuration(U.clientHeight),x.current=j):j=K,U.style.transition=[S.transitions.create("opacity",{duration:j,delay:V}),S.transitions.create("transform",{duration:HC?j:j*.666,delay:V,easing:G})].join(","),c&&c(U,q)}),M=I(l),k=I(f),O=I(U=>{const{duration:q,delay:K,easing:V}=Ly({style:p,timeout:g,easing:o},{mode:"exit"});let G;g==="auto"?(G=S.transitions.getAutoHeightDuration(U.clientHeight),x.current=G):G=q,U.style.transition=[S.transitions.create("opacity",{duration:G,delay:K}),S.transitions.create("transform",{duration:HC?G:G*.666,delay:HC?K:K||G*.333,easing:V})].join(","),U.style.opacity=0,U.style.transform=_R(.75),d&&d(U)}),B=I(h),$=U=>{g==="auto"&&b.start(x.current||0,U),r&&r(P.current,U)};return H.jsx(m,{appear:i,in:a,nodeRef:P,onEnter:A,onEntered:M,onEntering:C,onExit:O,onExited:B,onExiting:k,addEndListener:$,timeout:g==="auto"?null:g,...y,children:(U,{ownerState:q,...K})=>N.cloneElement(s,{style:{opacity:0,transform:_R(.75),visibility:U==="exited"&&!a?"hidden":void 0,...ase[U],...p,...s.props.style},ref:_,...K})})});SR&&(SR.muiSupportAuto=!0);const lse=t=>{const{classes:e,disableUnderline:n}=t,i=ur({root:["root",!n&&"underline"],input:["input"]},$re,e);return{...e,...i}},cse=Yt(RI,{shouldForwardProp:t=>El(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...MI(t,e),!n.disableUnderline&&e.underline]}})(Ir(({theme:t})=>{let n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(n=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:r})=>r.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:r})=>!r.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Cb.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Cb.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Cb.disabled}, .${Cb.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${Cb.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(Oa()).map(([r])=>({props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[r].main}`}}}))]}})),use=Yt(kI,{name:"MuiInput",slot:"Input",overridesResolver:AI})({}),T3=N.forwardRef(function(e,n){const r=dr({props:e,name:"MuiInput"}),{disableUnderline:i=!1,components:s={},componentsProps:o,fullWidth:a=!1,inputComponent:c="input",multiline:l=!1,slotProps:u,slots:d={},type:h="text",...f}=r,p=lse(r),m={root:{ownerState:{disableUnderline:i}}},y=u??o?no(u??o,m):m,b=d.root??s.Root??cse,x=d.input??s.Input??use;return H.jsx(S3,{slots:{root:b,input:x},slotProps:y,fullWidth:a,inputComponent:c,multiline:l,ref:n,type:h,...f,classes:p})});T3.muiName="Input";function dse(t){return cr("MuiInputLabel",t)}er("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const fse=t=>{const{classes:e,formControl:n,size:r,shrink:i,disableAnimation:s,variant:o,required:a}=t,c={root:["root",n&&"formControl",!s&&"animated",i&&"shrink",r&&r!=="medium"&&`size${dn(r)}`,o],asterisk:[a&&"asterisk"]},l=ur(c,dse,e);return{...e,...l}},hse=Yt(ose,{shouldForwardProp:t=>El(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${kx.asterisk}`]:e.asterisk},e.root,n.formControl&&e.formControl,n.size==="small"&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,n.focused&&e.focused,e[n.variant]]}})(Ir(({theme:t})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:e})=>e.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:e})=>e.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:e})=>!e.disableAnimation,style:{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:e,ownerState:n})=>e==="filled"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:e,ownerState:n,size:r})=>e==="filled"&&n.shrink&&r==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:e,ownerState:n})=>e==="outlined"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),pse=N.forwardRef(function(e,n){const r=dr({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,margin:s,shrink:o,variant:a,className:c,...l}=r,u=ov();let d=o;typeof d>"u"&&u&&(d=u.filled||u.focused||u.adornedStart);const h=sv({props:r,muiFormControl:u,states:["size","variant","required","focused"]}),f={...r,disableAnimation:i,formControl:u,shrink:d,size:h.size,variant:h.variant,required:h.required,focused:h.focused},p=fse(f);return H.jsx(hse,{"data-shrink":d,ref:n,className:Fe(p.root,c),...l,ownerState:f,classes:p})});function mse(t){return cr("MuiLinearProgress",t)}er("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","bar1","bar2","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const ER=4,TR=Zi`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`,gse=typeof TR!="string"?Io`
        animation: ${TR} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
      `:null,IR=Zi`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`,yse=typeof IR!="string"?Io`
        animation: ${IR} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
      `:null,PR=Zi`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`,vse=typeof PR!="string"?Io`
        animation: ${PR} 3s infinite linear;
      `:null,bse=t=>{const{classes:e,variant:n,color:r}=t,i={root:["root",`color${dn(r)}`,n],dashed:["dashed",`dashedColor${dn(r)}`],bar1:["bar","bar1",`barColor${dn(r)}`,(n==="indeterminate"||n==="query")&&"bar1Indeterminate",n==="determinate"&&"bar1Determinate",n==="buffer"&&"bar1Buffer"],bar2:["bar","bar2",n!=="buffer"&&`barColor${dn(r)}`,n==="buffer"&&`color${dn(r)}`,(n==="indeterminate"||n==="query")&&"bar2Indeterminate",n==="buffer"&&"bar2Buffer"]};return ur(i,mse,e)},I3=(t,e)=>t.vars?t.vars.palette.LinearProgress[`${e}Bg`]:t.palette.mode==="light"?EI(t.palette[e].main,.62):SI(t.palette[e].main,.5),xse=Yt("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${dn(n.color)}`],e[n.variant]]}})(Ir(({theme:t})=>({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},variants:[...Object.entries(t.palette).filter(Oa()).map(([e])=>({props:{color:e},style:{backgroundColor:I3(t,e)}})),{props:({ownerState:e})=>e.color==="inherit"&&e.variant!=="buffer",style:{"&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}}},{props:{variant:"buffer"},style:{backgroundColor:"transparent"}},{props:{variant:"query"},style:{transform:"rotate(180deg)"}}]}))),wse=Yt("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.dashed,e[`dashedColor${dn(n.color)}`]]}})(Ir(({theme:t})=>({position:"absolute",marginTop:0,height:"100%",width:"100%",backgroundSize:"10px 10px",backgroundPosition:"0 -23px",variants:[{props:{color:"inherit"},style:{opacity:.3,backgroundImage:"radial-gradient(currentColor 0%, currentColor 16%, transparent 42%)"}},...Object.entries(t.palette).filter(Oa()).map(([e])=>{const n=I3(t,e);return{props:{color:e},style:{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`}}})]})),vse||{animation:`${PR} 3s infinite linear`}),_se=Yt("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e.bar1,e[`barColor${dn(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar1Indeterminate,n.variant==="determinate"&&e.bar1Determinate,n.variant==="buffer"&&e.bar1Buffer]}})(Ir(({theme:t})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[{props:{color:"inherit"},style:{backgroundColor:"currentColor"}},...Object.entries(t.palette).filter(Oa()).map(([e])=>({props:{color:e},style:{backgroundColor:(t.vars||t).palette[e].main}})),{props:{variant:"determinate"},style:{transition:`transform .${ER}s linear`}},{props:{variant:"buffer"},style:{zIndex:1,transition:`transform .${ER}s linear`}},{props:({ownerState:e})=>e.variant==="indeterminate"||e.variant==="query",style:{width:"auto"}},{props:({ownerState:e})=>e.variant==="indeterminate"||e.variant==="query",style:gse||{animation:`${TR} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite`}}]}))),Sse=Yt("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e.bar2,e[`barColor${dn(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar2Indeterminate,n.variant==="buffer"&&e.bar2Buffer]}})(Ir(({theme:t})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[...Object.entries(t.palette).filter(Oa()).map(([e])=>({props:{color:e},style:{"--LinearProgressBar2-barColor":(t.vars||t).palette[e].main}})),{props:({ownerState:e})=>e.variant!=="buffer"&&e.color!=="inherit",style:{backgroundColor:"var(--LinearProgressBar2-barColor, currentColor)"}},{props:({ownerState:e})=>e.variant!=="buffer"&&e.color==="inherit",style:{backgroundColor:"currentColor"}},{props:{color:"inherit"},style:{opacity:.3}},...Object.entries(t.palette).filter(Oa()).map(([e])=>({props:{color:e,variant:"buffer"},style:{backgroundColor:I3(t,e),transition:`transform .${ER}s linear`}})),{props:({ownerState:e})=>e.variant==="indeterminate"||e.variant==="query",style:{width:"auto"}},{props:({ownerState:e})=>e.variant==="indeterminate"||e.variant==="query",style:yse||{animation:`${IR} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite`}}]}))),Ese=N.forwardRef(function(e,n){const r=dr({props:e,name:"MuiLinearProgress"}),{className:i,color:s="primary",value:o,valueBuffer:a,variant:c="indeterminate",...l}=r,u={...r,color:s,variant:c},d=bse(u),h=V$(),f={},p={bar1:{},bar2:{}};if((c==="determinate"||c==="buffer")&&o!==void 0){f["aria-valuenow"]=Math.round(o),f["aria-valuemin"]=0,f["aria-valuemax"]=100;let g=o-100;h&&(g=-g),p.bar1.transform=`translateX(${g}%)`}if(c==="buffer"&&a!==void 0){let g=(a||0)-100;h&&(g=-g),p.bar2.transform=`translateX(${g}%)`}return H.jsxs(xse,{className:Fe(d.root,i),ownerState:u,role:"progressbar",...f,ref:n,...l,children:[c==="buffer"?H.jsx(wse,{className:d.dashed,ownerState:u}):null,H.jsx(_se,{className:d.bar1,ownerState:u,style:p.bar1}),c==="determinate"?null:H.jsx(Sse,{className:d.bar2,ownerState:u,style:p.bar2})]})}),CR=N.createContext({});function Tse(t){return cr("MuiList",t)}er("MuiList",["root","padding","dense","subheader"]);const Ise=t=>{const{classes:e,disablePadding:n,dense:r,subheader:i}=t;return ur({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},Tse,e)},Pse=Yt("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>t.subheader,style:{paddingTop:0}}]}),Cse=N.forwardRef(function(e,n){const r=dr({props:e,name:"MuiList"}),{children:i,className:s,component:o="ul",dense:a=!1,disablePadding:c=!1,subheader:l,...u}=r,d=N.useMemo(()=>({dense:a}),[a]),h={...r,component:o,dense:a,disablePadding:c},f=Ise(h);return H.jsx(CR.Provider,{value:d,children:H.jsxs(Pse,{as:o,className:Fe(f.root,s),ref:n,ownerState:h,...u,children:[l,i]})})}),W5=er("MuiListItemIcon",["root","alignItemsFlexStart"]),j5=er("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function VC(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function q5(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function Tz(t,e){if(e===void 0)return!0;let n=t.innerText;return n===void 0&&(n=t.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.startsWith(e.keys.join(""))}function Mb(t,e,n,r,i,s){let o=!1,a=i(t,e,e?n:!1);for(;a;){if(a===t.firstChild){if(o)return!1;o=!0}const c=r?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!Tz(a,s)||c)a=i(t,a,n);else return a.focus(),!0}return!1}const Mse=N.forwardRef(function(e,n){const{actions:r,autoFocus:i=!1,autoFocusItem:s=!1,children:o,className:a,disabledItemsFocusable:c=!1,disableListWrap:l=!1,onKeyDown:u,variant:d="selectedMenu",...h}=e,f=N.useRef(null),p=N.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Ud(()=>{i&&f.current.focus()},[i]),N.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(x,{direction:S})=>{const P=!f.current.style.width;if(x.clientHeight<f.current.clientHeight&&P){const _=`${Ez($d(x))}px`;f.current.style[S==="rtl"?"paddingLeft":"paddingRight"]=_,f.current.style.width=`calc(100% + ${_})`}return f.current}}),[]);const g=x=>{const S=f.current,P=x.key;if(x.ctrlKey||x.metaKey||x.altKey){u&&u(x);return}const I=bc(S).activeElement;if(P==="ArrowDown")x.preventDefault(),Mb(S,I,l,c,VC);else if(P==="ArrowUp")x.preventDefault(),Mb(S,I,l,c,q5);else if(P==="Home")x.preventDefault(),Mb(S,null,l,c,VC);else if(P==="End")x.preventDefault(),Mb(S,null,l,c,q5);else if(P.length===1){const C=p.current,A=P.toLowerCase(),M=performance.now();C.keys.length>0&&(M-C.lastTime>500?(C.keys=[],C.repeating=!0,C.previousKeyMatched=!0):C.repeating&&A!==C.keys[0]&&(C.repeating=!1)),C.lastTime=M,C.keys.push(A);const k=I&&!C.repeating&&Tz(I,C);C.previousKeyMatched&&(k||Mb(S,I,!1,c,VC,C))?x.preventDefault():C.previousKeyMatched=!1}u&&u(x)},m=oo(f,n);let y=-1;N.Children.forEach(o,(x,S)=>{if(!N.isValidElement(x)){y===S&&(y+=1,y>=o.length&&(y=-1));return}x.props.disabled||(d==="selectedMenu"&&x.props.selected||y===-1)&&(y=S),y===S&&(x.props.disabled||x.props.muiSkipListHighlight||x.type.muiSkipListHighlight)&&(y+=1,y>=o.length&&(y=-1))});const b=N.Children.map(o,(x,S)=>{if(S===y){const P={};return s&&(P.autoFocus=!0),x.props.tabIndex===void 0&&d==="selectedMenu"&&(P.tabIndex=0),N.cloneElement(x,P)}return x});return H.jsx(Cse,{role:"menu",ref:m,className:a,onKeyDown:g,tabIndex:i?0:-1,...h,children:b})});function Ase(t){return cr("MuiPopover",t)}er("MuiPopover",["root","paper"]);function K5(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.height/2:e==="bottom"&&(n=t.height),n}function G5(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.width/2:e==="right"&&(n=t.width),n}function X5(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function MS(t){return typeof t=="function"?t():t}const Rse=t=>{const{classes:e}=t;return ur({root:["root"],paper:["paper"]},Ase,e)},kse=Yt(Wie,{name:"MuiPopover",slot:"Root"})({}),Iz=Yt(iu,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Ose=N.forwardRef(function(e,n){const r=dr({props:e,name:"MuiPopover"}),{action:i,anchorEl:s,anchorOrigin:o={vertical:"top",horizontal:"left"},anchorPosition:a,anchorReference:c="anchorEl",children:l,className:u,container:d,elevation:h=8,marginThreshold:f=16,open:p,PaperProps:g={},slots:m={},slotProps:y={},transformOrigin:b={vertical:"top",horizontal:"left"},TransitionComponent:x,transitionDuration:S="auto",TransitionProps:P={},disableScrollLock:_=!1,...I}=r,C=N.useRef(),A={...r,anchorOrigin:o,anchorReference:c,elevation:h,marginThreshold:f,transformOrigin:b,TransitionComponent:x,transitionDuration:S,TransitionProps:P},M=Rse(A),k=N.useCallback(()=>{if(c==="anchorPosition")return a;const ye=MS(s),Oe=(ye&&ye.nodeType===1?ye:bc(C.current).body).getBoundingClientRect();return{top:Oe.top+K5(Oe,o.vertical),left:Oe.left+G5(Oe,o.horizontal)}},[s,o.horizontal,o.vertical,a,c]),O=N.useCallback(ye=>({vertical:K5(ye,b.vertical),horizontal:G5(ye,b.horizontal)}),[b.horizontal,b.vertical]),B=N.useCallback(ye=>{const Ae={width:ye.offsetWidth,height:ye.offsetHeight},Oe=O(Ae);if(c==="none")return{top:null,left:null,transformOrigin:X5(Oe)};const Be=k();let ce=Be.top-Oe.vertical,Ge=Be.left-Oe.horizontal;const Pe=ce+Ae.height,He=Ge+Ae.width,Re=$d(MS(s)),je=Re.innerHeight-f,te=Re.innerWidth-f;if(f!==null&&ce<f){const ee=ce-f;ce-=ee,Oe.vertical+=ee}else if(f!==null&&Pe>je){const ee=Pe-je;ce-=ee,Oe.vertical+=ee}if(f!==null&&Ge<f){const ee=Ge-f;Ge-=ee,Oe.horizontal+=ee}else if(He>te){const ee=He-te;Ge-=ee,Oe.horizontal+=ee}return{top:`${Math.round(ce)}px`,left:`${Math.round(Ge)}px`,transformOrigin:X5(Oe)}},[s,c,k,O,f]),[$,U]=N.useState(p),q=N.useCallback(()=>{const ye=C.current;if(!ye)return;const Ae=B(ye);Ae.top!==null&&ye.style.setProperty("top",Ae.top),Ae.left!==null&&(ye.style.left=Ae.left),ye.style.transformOrigin=Ae.transformOrigin,U(!0)},[B]);N.useEffect(()=>(_&&window.addEventListener("scroll",q),()=>window.removeEventListener("scroll",q)),[s,_,q]);const K=()=>{q()},V=()=>{U(!1)};N.useEffect(()=>{p&&q()}),N.useImperativeHandle(i,()=>p?{updatePosition:()=>{q()}}:null,[p,q]),N.useEffect(()=>{if(!p)return;const ye=nz(()=>{q()}),Ae=$d(MS(s));return Ae.addEventListener("resize",ye),()=>{ye.clear(),Ae.removeEventListener("resize",ye)}},[s,p,q]);let G=S;const j={slots:{transition:x,...m},slotProps:{transition:P,paper:g,...y}},[Q,se]=Ss("transition",{elementType:SR,externalForwardedProps:j,ownerState:A,getSlotProps:ye=>({...ye,onEntering:(Ae,Oe)=>{var Be;(Be=ye.onEntering)==null||Be.call(ye,Ae,Oe),K()},onExited:Ae=>{var Oe;(Oe=ye.onExited)==null||Oe.call(ye,Ae),V()}}),additionalProps:{appear:!0,in:p}});S==="auto"&&!Q.muiSupportAuto&&(G=void 0);const Z=d||(s?bc(MS(s)).body:void 0),[ie,{slots:pe,slotProps:ue,...le}]=Ss("root",{ref:n,elementType:kse,externalForwardedProps:{...j,...I},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:m.backdrop},slotProps:{backdrop:Pte(typeof y.backdrop=="function"?y.backdrop(A):y.backdrop,{invisible:!0})},container:Z,open:p},ownerState:A,className:Fe(M.root,u)}),[ae,_e]=Ss("paper",{ref:C,className:M.paper,elementType:Iz,externalForwardedProps:j,shouldForwardComponentProp:!0,additionalProps:{elevation:h,style:$?void 0:{opacity:0}},ownerState:A});return H.jsx(ie,{...le,...!xR(ie)&&{slots:pe,slotProps:ue,disableScrollLock:_},children:H.jsx(Q,{...se,timeout:G,children:H.jsx(ae,{..._e,children:l})})})});function Nse(t){return cr("MuiMenu",t)}er("MuiMenu",["root","paper","list"]);const Lse={vertical:"top",horizontal:"right"},Dse={vertical:"top",horizontal:"left"},Bse=t=>{const{classes:e}=t;return ur({root:["root"],paper:["paper"],list:["list"]},Nse,e)},Fse=Yt(Ose,{shouldForwardProp:t=>El(t)||t==="classes",name:"MuiMenu",slot:"Root"})({}),Use=Yt(Iz,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),$se=Yt(Mse,{name:"MuiMenu",slot:"List"})({outline:0}),zse=N.forwardRef(function(e,n){const r=dr({props:e,name:"MuiMenu"}),{autoFocus:i=!0,children:s,className:o,disableAutoFocusItem:a=!1,MenuListProps:c={},onClose:l,open:u,PaperProps:d={},PopoverClasses:h,transitionDuration:f="auto",TransitionProps:{onEntering:p,...g}={},variant:m="selectedMenu",slots:y={},slotProps:b={},...x}=r,S=V$(),P={...r,autoFocus:i,disableAutoFocusItem:a,MenuListProps:c,onEntering:p,PaperProps:d,transitionDuration:f,TransitionProps:g,variant:m},_=Bse(P),I=i&&!a&&u,C=N.useRef(null),A=(G,j)=>{C.current&&C.current.adjustStyleForScrollbar(G,{direction:S?"rtl":"ltr"}),p&&p(G,j)},M=G=>{G.key==="Tab"&&(G.preventDefault(),l&&l(G,"tabKeyDown"))};let k=-1;N.Children.map(s,(G,j)=>{N.isValidElement(G)&&(G.props.disabled||(m==="selectedMenu"&&G.props.selected||k===-1)&&(k=j))});const O={slots:y,slotProps:{list:c,transition:g,paper:d,...b}},B=Rre({elementType:y.root,externalSlotProps:b.root,ownerState:P,className:[_.root,o]}),[$,U]=Ss("paper",{className:_.paper,elementType:Use,externalForwardedProps:O,shouldForwardComponentProp:!0,ownerState:P}),[q,K]=Ss("list",{className:Fe(_.list,c.className),elementType:$se,shouldForwardComponentProp:!0,externalForwardedProps:O,getSlotProps:G=>({...G,onKeyDown:j=>{var Q;M(j),(Q=G.onKeyDown)==null||Q.call(G,j)}}),ownerState:P}),V=typeof O.slotProps.transition=="function"?O.slotProps.transition(P):O.slotProps.transition;return H.jsx(Fse,{onClose:l,anchorOrigin:{vertical:"bottom",horizontal:S?"right":"left"},transformOrigin:S?Lse:Dse,slots:{root:y.root,paper:$,backdrop:y.backdrop,...y.transition&&{transition:y.transition}},slotProps:{root:B,paper:U,backdrop:typeof b.backdrop=="function"?b.backdrop(P):b.backdrop,transition:{...V,onEntering:(...G)=>{var j;A(...G),(j=V==null?void 0:V.onEntering)==null||j.call(V,...G)}}},open:u,ref:n,transitionDuration:f,ownerState:P,...x,classes:h,children:H.jsx(q,{actions:C,autoFocus:i&&(k===-1||a),autoFocusItem:I,variant:m,...K,children:s})})});function Hse(t){return cr("MuiMenuItem",t)}const Ab=er("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),Vse=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.divider&&e.divider,!n.disableGutters&&e.gutters]},Wse=t=>{const{disabled:e,dense:n,divider:r,disableGutters:i,selected:s,classes:o}=t,c=ur({root:["root",n&&"dense",e&&"disabled",!i&&"gutters",r&&"divider",s&&"selected"]},Hse,o);return{...o,...c}},jse=Yt(p3,{shouldForwardProp:t=>El(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:Vse})(Ir(({theme:t})=>({...t.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ab.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:dl(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${Ab.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:dl(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${Ab.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:dl(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:dl(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${Ab.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${Ab.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${z5.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${z5.inset}`]:{marginLeft:52},[`& .${j5.root}`]:{marginTop:0,marginBottom:0},[`& .${j5.inset}`]:{paddingLeft:36},[`& .${W5.root}`]:{minWidth:36},variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>!e.dense,style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:e})=>e.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...t.typography.body2,[`& .${W5.root} svg`]:{fontSize:"1.25rem"}}}]}))),qse=N.forwardRef(function(e,n){const r=dr({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:s="li",dense:o=!1,divider:a=!1,disableGutters:c=!1,focusVisibleClassName:l,role:u="menuitem",tabIndex:d,className:h,...f}=r,p=N.useContext(CR),g=N.useMemo(()=>({dense:o||p.dense||!1,disableGutters:c}),[p.dense,o,c]),m=N.useRef(null);Ud(()=>{i&&m.current&&m.current.focus()},[i]);const y={...r,dense:g.dense,divider:a,disableGutters:c},b=Wse(r),x=oo(m,n);let S;return r.disabled||(S=d!==void 0?d:-1),H.jsx(CR.Provider,{value:g,children:H.jsx(jse,{ref:x,role:u,tabIndex:S,component:s,focusVisibleClassName:Fe(b.focusVisible,l),className:Fe(b.root,h),...f,ownerState:y,classes:b})})});function Kse(t){return cr("MuiNativeSelect",t)}const P3=er("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Gse=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:s,error:o}=t,a={select:["select",n,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${dn(n)}`,s&&"iconOpen",r&&"disabled"]};return ur(a,Kse,e)},Pz=Yt("select")(({theme:t})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${P3.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},variants:[{props:({ownerState:e})=>e.variant!=="filled"&&e.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}}]})),Xse=Yt(Pz,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:El,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],n.error&&e.error,{[`&.${P3.multiple}`]:e.multiple}]}})({}),Cz=Yt("svg")(({theme:t})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${P3.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:({ownerState:e})=>e.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),Yse=Yt(Cz,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${dn(n.variant)}`],n.open&&e.iconOpen]}})({}),Zse=N.forwardRef(function(e,n){const{className:r,disabled:i,error:s,IconComponent:o,inputRef:a,variant:c="standard",...l}=e,u={...e,disabled:i,variant:c,error:s},d=Gse(u);return H.jsxs(N.Fragment,{children:[H.jsx(Xse,{ownerState:u,className:Fe(d.select,r),disabled:i,ref:a||n,...l}),e.multiple?null:H.jsx(Yse,{as:o,ownerState:u,className:d.icon})]})});var Y5;const Jse=Yt("fieldset",{shouldForwardProp:El})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Qse=Yt("legend",{shouldForwardProp:El})(Ir(({theme:t})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:e})=>!e.withLabel,style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:({ownerState:e})=>e.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:e})=>e.withLabel&&e.notched,style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]})));function eoe(t){const{children:e,classes:n,className:r,label:i,notched:s,...o}=t,a=i!=null&&i!=="",c={...t,notched:s,withLabel:a};return H.jsx(Jse,{"aria-hidden":!0,className:r,ownerState:c,...o,children:H.jsx(Qse,{ownerState:c,children:a?H.jsx("span",{children:i}):Y5||(Y5=H.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const toe=t=>{const{classes:e}=t,r=ur({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},zre,e);return{...e,...r}},noe=Yt(RI,{shouldForwardProp:t=>El(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:MI})(Ir(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${zc.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${zc.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}},[`&.${zc.focused} .${zc.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(t.palette).filter(Oa()).map(([n])=>({props:{color:n},style:{[`&.${zc.focused} .${zc.notchedOutline}`]:{borderColor:(t.vars||t).palette[n].main}}})),{props:{},style:{[`&.${zc.error} .${zc.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${zc.disabled} .${zc.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:14}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:14}},{props:({ownerState:n})=>n.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:n,size:r})=>n.multiline&&r==="small",style:{padding:"8.5px 14px"}}]}})),roe=Yt(eoe,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(Ir(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}})),ioe=Yt(kI,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:AI})(Ir(({theme:t})=>({padding:"16.5px 14px",...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:e})=>e.multiline,style:{padding:0}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}}]}))),C3=N.forwardRef(function(e,n){const r=dr({props:e,name:"MuiOutlinedInput"}),{components:i={},fullWidth:s=!1,inputComponent:o="input",label:a,multiline:c=!1,notched:l,slots:u={},slotProps:d={},type:h="text",...f}=r,p=toe(r),g=ov(),m=sv({props:r,muiFormControl:g,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),y={...r,color:m.color||"primary",disabled:m.disabled,error:m.error,focused:m.focused,formControl:g,fullWidth:s,hiddenLabel:m.hiddenLabel,multiline:c,size:m.size,type:h},b=u.root??i.Root??noe,x=u.input??i.Input??ioe,[S,P]=Ss("notchedOutline",{elementType:roe,className:p.notchedOutline,shouldForwardComponentProp:!0,ownerState:y,externalForwardedProps:{slots:u,slotProps:d},additionalProps:{label:a!=null&&a!==""&&m.required?H.jsxs(N.Fragment,{children:[a,"","*"]}):a}});return H.jsx(S3,{slots:{root:b,input:x},slotProps:d,renderSuffix:_=>H.jsx(S,{...P,notched:typeof l<"u"?l:!!(_.startAdornment||_.filled||_.focused)}),fullWidth:s,inputComponent:o,multiline:c,ref:n,type:h,...f,classes:{...p,notchedOutline:null}})});C3.muiName="Input";function Mz(t){return cr("MuiSelect",t)}const Rb=er("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var Z5;const soe=Yt(Pz,{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`&.${Rb.select}`]:e.select},{[`&.${Rb.select}`]:e[n.variant]},{[`&.${Rb.error}`]:e.error},{[`&.${Rb.multiple}`]:e.multiple}]}})({[`&.${Rb.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),ooe=Yt(Cz,{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${dn(n.variant)}`],n.open&&e.iconOpen]}})({}),aoe=Yt("input",{shouldForwardProp:t=>ez(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function J5(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}function loe(t){return t==null||typeof t=="string"&&!t.trim()}const coe=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:s,error:o}=t,a={select:["select",n,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${dn(n)}`,s&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return ur(a,Mz,e)},uoe=N.forwardRef(function(e,n){var oe;const{"aria-describedby":r,"aria-label":i,autoFocus:s,autoWidth:o,children:a,className:c,defaultOpen:l,defaultValue:u,disabled:d,displayEmpty:h,error:f=!1,IconComponent:p,inputRef:g,labelId:m,MenuProps:y={},multiple:b,name:x,onBlur:S,onChange:P,onClose:_,onFocus:I,onOpen:C,open:A,readOnly:M,renderValue:k,required:O,SelectDisplayProps:B={},tabIndex:$,type:U,value:q,variant:K="standard",...V}=e,[G,j]=y5({controlled:q,default:u,name:"Select"}),[Q,se]=y5({controlled:A,default:l,name:"Select"}),Z=N.useRef(null),ie=N.useRef(null),[pe,ue]=N.useState(null),{current:le}=N.useRef(A!=null),[ae,_e]=N.useState(),ye=oo(n,g),Ae=N.useCallback(ne=>{ie.current=ne,ne&&ue(ne)},[]),Oe=pe==null?void 0:pe.parentNode;N.useImperativeHandle(ye,()=>({focus:()=>{ie.current.focus()},node:Z.current,value:G}),[G]),N.useEffect(()=>{l&&Q&&pe&&!le&&(_e(o?null:Oe.clientWidth),ie.current.focus())},[pe,o]),N.useEffect(()=>{s&&ie.current.focus()},[s]),N.useEffect(()=>{if(!m)return;const ne=bc(ie.current).getElementById(m);if(ne){const de=()=>{getSelection().isCollapsed&&ie.current.focus()};return ne.addEventListener("click",de),()=>{ne.removeEventListener("click",de)}}},[m]);const Be=(ne,de)=>{ne?C&&C(de):_&&_(de),le||(_e(o?null:Oe.clientWidth),se(ne))},ce=ne=>{ne.button===0&&(ne.preventDefault(),ie.current.focus(),Be(!0,ne))},Ge=ne=>{Be(!1,ne)},Pe=N.Children.toArray(a),He=ne=>{const de=Pe.find(Te=>Te.props.value===ne.target.value);de!==void 0&&(j(de.props.value),P&&P(ne,de))},Re=ne=>de=>{let Te;if(de.currentTarget.hasAttribute("tabindex")){if(b){Te=Array.isArray(G)?G.slice():[];const ke=G.indexOf(ne.props.value);ke===-1?Te.push(ne.props.value):Te.splice(ke,1)}else Te=ne.props.value;if(ne.props.onClick&&ne.props.onClick(de),G!==Te&&(j(Te),P)){const ke=de.nativeEvent||de,he=new ke.constructor(ke.type,ke);Object.defineProperty(he,"target",{writable:!0,value:{value:Te,name:x}}),P(he,ne)}b||Be(!1,de)}},je=ne=>{M||[" ","ArrowUp","ArrowDown","Enter"].includes(ne.key)&&(ne.preventDefault(),Be(!0,ne))},te=pe!==null&&Q,ee=ne=>{!te&&S&&(Object.defineProperty(ne,"target",{writable:!0,value:{value:G,name:x}}),S(ne))};delete V["aria-invalid"];let X,we;const Ne=[];let We=!1;(ZT({value:G})||h)&&(k?X=k(G):We=!0);const xe=Pe.map(ne=>{if(!N.isValidElement(ne))return null;let de;if(b){if(!Array.isArray(G))throw new Error(Bd(2));de=G.some(Te=>J5(Te,ne.props.value)),de&&We&&Ne.push(ne.props.children)}else de=J5(G,ne.props.value),de&&We&&(we=ne.props.children);return N.cloneElement(ne,{"aria-selected":de?"true":"false",onClick:Re(ne),onKeyUp:Te=>{Te.key===" "&&Te.preventDefault(),ne.props.onKeyUp&&ne.props.onKeyUp(Te)},role:"option",selected:de,value:void 0,"data-value":ne.props.value})});We&&(b?Ne.length===0?X=null:X=Ne.reduce((ne,de,Te)=>(ne.push(de),Te<Ne.length-1&&ne.push(", "),ne),[]):X=we);let Ve=ae;!o&&le&&pe&&(Ve=Oe.clientWidth);let be;typeof $<"u"?be=$:be=d?null:0;const ge=B.id||(x?`mui-component-select-${x}`:void 0),Se={...e,variant:K,value:G,open:te,error:f},Ie=coe(Se),me={...y.PaperProps,...(oe=y.slotProps)==null?void 0:oe.paper},Ee=d3();return H.jsxs(N.Fragment,{children:[H.jsx(soe,{as:"div",ref:Ae,tabIndex:be,role:"combobox","aria-controls":te?Ee:void 0,"aria-disabled":d?"true":void 0,"aria-expanded":te?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[m,ge].filter(Boolean).join(" ")||void 0,"aria-describedby":r,"aria-required":O?"true":void 0,"aria-invalid":f?"true":void 0,onKeyDown:je,onMouseDown:d||M?null:ce,onBlur:ee,onFocus:I,...B,ownerState:Se,className:Fe(B.className,Ie.select,c),id:ge,children:loe(X)?Z5||(Z5=H.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):X}),H.jsx(aoe,{"aria-invalid":f,value:Array.isArray(G)?G.join(","):G,name:x,ref:Z,"aria-hidden":!0,onChange:He,tabIndex:-1,disabled:d,className:Ie.nativeInput,autoFocus:s,required:O,...V,ownerState:Se}),H.jsx(ooe,{as:p,className:Ie.icon,ownerState:Se}),H.jsx(zse,{id:`menu-${x||""}`,anchorEl:Oe,open:te,onClose:Ge,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...y,slotProps:{...y.slotProps,list:{"aria-labelledby":m,role:"listbox","aria-multiselectable":b?"true":void 0,disableListWrap:!0,id:Ee,...y.MenuListProps},paper:{...me,style:{minWidth:Ve,...me!=null?me.style:null}}},children:xe})]})}),doe=t=>{const{classes:e}=t,r=ur({root:["root"]},Mz,e);return{...e,...r}},M3={name:"MuiSelect",slot:"Root",shouldForwardProp:t=>El(t)&&t!=="variant"},foe=Yt(T3,M3)(""),hoe=Yt(C3,M3)(""),poe=Yt(E3,M3)(""),Az=N.forwardRef(function(e,n){const r=dr({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:s,classes:o={},className:a,defaultOpen:c=!1,displayEmpty:l=!1,IconComponent:u=Vre,id:d,input:h,inputProps:f,label:p,labelId:g,MenuProps:m,multiple:y=!1,native:b=!1,onClose:x,onOpen:S,open:P,renderValue:_,SelectDisplayProps:I,variant:C="outlined",...A}=r,M=b?Zse:uoe,k=ov(),O=sv({props:r,muiFormControl:k,states:["variant","error"]}),B=O.variant||C,$={...r,variant:B,classes:o},U=doe($),{root:q,...K}=U,V=h||{standard:H.jsx(foe,{ownerState:$}),outlined:H.jsx(hoe,{label:p,ownerState:$}),filled:H.jsx(poe,{ownerState:$})}[B],G=oo(n,Ww(V));return H.jsx(N.Fragment,{children:N.cloneElement(V,{inputComponent:M,inputProps:{children:s,error:O.error,IconComponent:u,variant:B,type:void 0,multiple:y,...b?{id:d}:{autoWidth:i,defaultOpen:c,displayEmpty:l,labelId:g,MenuProps:m,onClose:x,onOpen:S,open:P,renderValue:_,SelectDisplayProps:{id:d,...I}},...f,classes:f?no(K,f.classes):K,...h?h.props.inputProps:{}},...(y&&b||l)&&B==="outlined"?{notched:!0}:{},ref:G,className:Fe(V.props.className,a,U.root),...!h&&{variant:B},...A})})});Az.muiName="Select";function moe(t){return cr("MuiToolbar",t)}er("MuiToolbar",["root","gutters","regular","dense"]);const goe=t=>{const{classes:e,disableGutters:n,variant:r}=t;return ur({root:["root",!n&&"gutters",r]},moe,e)},yoe=Yt("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableGutters&&e.gutters,e[n.variant]]}})(Ir(({theme:t})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:t.mixins.toolbar}]}))),Q5=N.forwardRef(function(e,n){const r=dr({props:e,name:"MuiToolbar"}),{className:i,component:s="div",disableGutters:o=!1,variant:a="regular",...c}=r,l={...r,component:s,disableGutters:o,variant:a},u=goe(l);return H.jsx(yoe,{as:s,className:Fe(u.root,i),ref:n,ownerState:l,...c})});function voe(t){return cr("MuiTextField",t)}er("MuiTextField",["root"]);const boe={standard:T3,filled:E3,outlined:C3},xoe=t=>{const{classes:e}=t;return ur({root:["root"]},voe,e)},woe=Yt(Zie,{name:"MuiTextField",slot:"Root"})({}),dy=N.forwardRef(function(e,n){const r=dr({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:s=!1,children:o,className:a,color:c="primary",defaultValue:l,disabled:u=!1,error:d=!1,FormHelperTextProps:h,fullWidth:f=!1,helperText:p,id:g,InputLabelProps:m,inputProps:y,InputProps:b,inputRef:x,label:S,maxRows:P,minRows:_,multiline:I=!1,name:C,onBlur:A,onChange:M,onFocus:k,placeholder:O,required:B=!1,rows:$,select:U=!1,SelectProps:q,slots:K={},slotProps:V={},type:G,value:j,variant:Q="outlined",...se}=r,Z={...r,autoFocus:s,color:c,disabled:u,error:d,fullWidth:f,multiline:I,required:B,select:U,variant:Q},ie=xoe(Z),pe=d3(g),ue=p&&pe?`${pe}-helper-text`:void 0,le=S&&pe?`${pe}-label`:void 0,ae=boe[Q],_e={slots:K,slotProps:{input:b,inputLabel:m,htmlInput:y,formHelperText:h,select:q,...V}},ye={},Ae=_e.slotProps.inputLabel;Q==="outlined"&&(Ae&&typeof Ae.shrink<"u"&&(ye.notched=Ae.shrink),ye.label=S),U&&((!q||!q.native)&&(ye.id=void 0),ye["aria-describedby"]=void 0);const[Oe,Be]=Ss("root",{elementType:woe,shouldForwardComponentProp:!0,externalForwardedProps:{..._e,...se},ownerState:Z,className:Fe(ie.root,a),ref:n,additionalProps:{disabled:u,error:d,fullWidth:f,required:B,color:c,variant:Q}}),[ce,Ge]=Ss("input",{elementType:ae,externalForwardedProps:_e,additionalProps:ye,ownerState:Z}),[Pe,He]=Ss("inputLabel",{elementType:pse,externalForwardedProps:_e,ownerState:Z}),[Re,je]=Ss("htmlInput",{elementType:"input",externalForwardedProps:_e,ownerState:Z}),[te,ee]=Ss("formHelperText",{elementType:tse,externalForwardedProps:_e,ownerState:Z}),[X,we]=Ss("select",{elementType:Az,externalForwardedProps:_e,ownerState:Z}),Ne=H.jsx(ce,{"aria-describedby":ue,autoComplete:i,autoFocus:s,defaultValue:l,fullWidth:f,multiline:I,name:C,rows:$,maxRows:P,minRows:_,type:G,value:j,id:pe,inputRef:x,onBlur:A,onChange:M,onFocus:k,placeholder:O,inputProps:je,slots:{input:K.htmlInput?Re:void 0},...Ge});return H.jsxs(Oe,{...Be,children:[S!=null&&S!==""&&H.jsx(Pe,{htmlFor:pe,id:le,...He,children:S}),U?H.jsx(X,{"aria-describedby":ue,id:pe,labelId:le,value:j,input:Ne,...we,children:o}):Ne,p&&H.jsx(te,{id:ue,...ee,children:p})]})});var kb={},e6;function _oe(){if(e6)return kb;e6=1,Object.defineProperty(kb,"__esModule",{value:!0}),kb.parse=o,kb.serialize=l;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const h=function(){};return h.prototype=Object.create(null),h})();function o(h,f){const p=new s,g=h.length;if(g<2)return p;const m=(f==null?void 0:f.decode)||u;let y=0;do{const b=h.indexOf("=",y);if(b===-1)break;const x=h.indexOf(";",y),S=x===-1?g:x;if(b>S){y=h.lastIndexOf(";",b-1)+1;continue}const P=a(h,y,b),_=c(h,b,P),I=h.slice(P,_);if(p[I]===void 0){let C=a(h,b+1,S),A=c(h,S,C);const M=m(h.slice(C,A));p[I]=M}y=S+1}while(y<g);return p}function a(h,f,p){do{const g=h.charCodeAt(f);if(g!==32&&g!==9)return f}while(++f<p);return p}function c(h,f,p){for(;f>p;){const g=h.charCodeAt(--f);if(g!==32&&g!==9)return f+1}return p}function l(h,f,p){const g=(p==null?void 0:p.encode)||encodeURIComponent;if(!t.test(h))throw new TypeError(`argument name is invalid: ${h}`);const m=g(f);if(!e.test(m))throw new TypeError(`argument val is invalid: ${f}`);let y=h+"="+m;if(!p)return y;if(p.maxAge!==void 0){if(!Number.isInteger(p.maxAge))throw new TypeError(`option maxAge is invalid: ${p.maxAge}`);y+="; Max-Age="+p.maxAge}if(p.domain){if(!n.test(p.domain))throw new TypeError(`option domain is invalid: ${p.domain}`);y+="; Domain="+p.domain}if(p.path){if(!r.test(p.path))throw new TypeError(`option path is invalid: ${p.path}`);y+="; Path="+p.path}if(p.expires){if(!d(p.expires)||!Number.isFinite(p.expires.valueOf()))throw new TypeError(`option expires is invalid: ${p.expires}`);y+="; Expires="+p.expires.toUTCString()}if(p.httpOnly&&(y+="; HttpOnly"),p.secure&&(y+="; Secure"),p.partitioned&&(y+="; Partitioned"),p.priority)switch(typeof p.priority=="string"?p.priority.toLowerCase():void 0){case"low":y+="; Priority=Low";break;case"medium":y+="; Priority=Medium";break;case"high":y+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${p.priority}`)}if(p.sameSite)switch(typeof p.sameSite=="string"?p.sameSite.toLowerCase():p.sameSite){case!0:case"strict":y+="; SameSite=Strict";break;case"lax":y+="; SameSite=Lax";break;case"none":y+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${p.sameSite}`)}return y}function u(h){if(h.indexOf("%")===-1)return h;try{return decodeURIComponent(h)}catch{return h}}function d(h){return i.call(h)==="[object Date]"}return kb}_oe();/**
 * react-router v7.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var t6="popstate";function Soe(t={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return MR("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:iw(i)}return Toe(e,n,null,t)}function yi(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ou(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Eoe(){return Math.random().toString(36).substring(2,10)}function n6(t,e){return{usr:t.state,key:t.key,idx:e}}function MR(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?av(e):e,state:n,key:e&&e.key||r||Eoe()}}function iw({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function av(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Toe(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",c=null,l=u();l==null&&(l=0,o.replaceState({...o.state,idx:l},""));function u(){return(o.state||{idx:null}).idx}function d(){a="POP";let m=u(),y=m==null?null:m-l;l=m,c&&c({action:a,location:g.location,delta:y})}function h(m,y){a="PUSH";let b=MR(g.location,m,y);l=u()+1;let x=n6(b,l),S=g.createHref(b);try{o.pushState(x,"",S)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(S)}s&&c&&c({action:a,location:g.location,delta:1})}function f(m,y){a="REPLACE";let b=MR(g.location,m,y);l=u();let x=n6(b,l),S=g.createHref(b);o.replaceState(x,"",S),s&&c&&c({action:a,location:g.location,delta:0})}function p(m){let y=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof m=="string"?m:iw(m);return b=b.replace(/ $/,"%20"),yi(y,`No window.location.(origin|href) available to create URL for href: ${b}`),new URL(b,y)}let g={get action(){return a},get location(){return t(i,o)},listen(m){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(t6,d),c=m,()=>{i.removeEventListener(t6,d),c=null}},createHref(m){return e(i,m)},createURL:p,encodeLocation(m){let y=p(m);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(m){return o.go(m)}};return g}function Rz(t,e,n="/"){return Ioe(t,e,n,!1)}function Ioe(t,e,n,r){let i=typeof e=="string"?av(e):e,s=Hd(i.pathname||"/",n);if(s==null)return null;let o=kz(t);Poe(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=Foe(s);a=Doe(o[c],l,r)}return a}function kz(t,e=[],n=[],r=""){let i=(s,o,a)=>{let c={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(yi(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let l=Od([r,c.relativePath]),u=n.concat(c);s.children&&s.children.length>0&&(yi(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),kz(s.children,e,u,l)),!(s.path==null&&!s.index)&&e.push({path:l,score:Noe(l,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let c of Oz(s.path))i(s,o,c)}),e}function Oz(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Oz(r.join("/")),a=[];return a.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function Poe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Loe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Coe=/^:[\w-]+$/,Moe=3,Aoe=2,Roe=1,koe=10,Ooe=-2,r6=t=>t==="*";function Noe(t,e){let n=t.split("/"),r=n.length;return n.some(r6)&&(r+=Ooe),e&&(r+=Aoe),n.filter(i=>!r6(i)).reduce((i,s)=>i+(Coe.test(s)?Moe:s===""?Roe:koe),r)}function Loe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Doe(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=QT({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=QT({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Od([s,d.pathname]),pathnameBase:Hoe(Od([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=Od([s,d.pathnameBase]))}return o}function QT(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Boe(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,{paramName:u,isOptional:d},h)=>{if(u==="*"){let p=a[h]||"";o=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const f=a[h];return d&&!f?l[u]=void 0:l[u]=(f||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:t}}function Boe(t,e=!1,n=!0){ou(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Foe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ou(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Hd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Uoe(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?av(t):t;return{pathname:n?n.startsWith("/")?n:$oe(n,e):e,search:Voe(r),hash:Woe(i)}}function $oe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function WC(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zoe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Nz(t){let e=zoe(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Lz(t,e,n,r=!1){let i;typeof t=="string"?i=av(t):(i={...t},yi(!i.pathname||!i.pathname.includes("?"),WC("?","pathname","search",i)),yi(!i.pathname||!i.pathname.includes("#"),WC("#","pathname","hash",i)),yi(!i.search||!i.search.includes("#"),WC("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=Uoe(i,a),l=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}var Od=t=>t.join("/").replace(/\/\/+/g,"/"),Hoe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Voe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Woe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function joe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Dz=["POST","PUT","PATCH","DELETE"];new Set(Dz);var qoe=["GET",...Dz];new Set(qoe);var lv=N.createContext(null);lv.displayName="DataRouter";var OI=N.createContext(null);OI.displayName="DataRouterState";var Bz=N.createContext({isTransitioning:!1});Bz.displayName="ViewTransition";var Koe=N.createContext(new Map);Koe.displayName="Fetchers";var Goe=N.createContext(null);Goe.displayName="Await";var du=N.createContext(null);du.displayName="Navigation";var qw=N.createContext(null);qw.displayName="Location";var Ec=N.createContext({outlet:null,matches:[],isDataRoute:!1});Ec.displayName="Route";var A3=N.createContext(null);A3.displayName="RouteError";function Xoe(t,{relative:e}={}){yi(Kw(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=N.useContext(du),{hash:i,pathname:s,search:o}=Gw(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:Od([n,s])),r.createHref({pathname:a,search:o,hash:i})}function Kw(){return N.useContext(qw)!=null}function Um(){return yi(Kw(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(qw).location}var Fz="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Uz(t){N.useContext(du).static||N.useLayoutEffect(t)}function $z(){let{isDataRoute:t}=N.useContext(Ec);return t?dae():Yoe()}function Yoe(){yi(Kw(),"useNavigate() may be used only in the context of a <Router> component.");let t=N.useContext(lv),{basename:e,navigator:n}=N.useContext(du),{matches:r}=N.useContext(Ec),{pathname:i}=Um(),s=JSON.stringify(Nz(r)),o=N.useRef(!1);return Uz(()=>{o.current=!0}),N.useCallback((c,l={})=>{if(ou(o.current,Fz),!o.current)return;if(typeof c=="number"){n.go(c);return}let u=Lz(c,JSON.parse(s),i,l.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Od([e,u.pathname])),(l.replace?n.replace:n.push)(u,l.state,l)},[e,n,s,i,t])}var Zoe=N.createContext(null);function Joe(t){let e=N.useContext(Ec).outlet;return e&&N.createElement(Zoe.Provider,{value:t},e)}function Qoe(){let{matches:t}=N.useContext(Ec),e=t[t.length-1];return e?e.params:{}}function Gw(t,{relative:e}={}){let{matches:n}=N.useContext(Ec),{pathname:r}=Um(),i=JSON.stringify(Nz(n));return N.useMemo(()=>Lz(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function eae(t,e){return zz(t,e)}function zz(t,e,n,r){var b;yi(Kw(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=N.useContext(du),{matches:o}=N.useContext(Ec),a=o[o.length-1],c=a?a.params:{},l=a?a.pathname:"/",u=a?a.pathnameBase:"/",d=a&&a.route;{let x=d&&d.path||"";Hz(l,!d||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let h=Um(),f;if(e){let x=typeof e=="string"?av(e):e;yi(u==="/"||((b=x.pathname)==null?void 0:b.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${x.pathname}" was given in the \`location\` prop.`),f=x}else f=h;let p=f.pathname||"/",g=p;if(u!=="/"){let x=u.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(x.length).join("/")}let m=!s&&n&&n.matches&&n.matches.length>0?n.matches:Rz(t,{pathname:g});ou(d||m!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),ou(m==null||m[m.length-1].route.element!==void 0||m[m.length-1].route.Component!==void 0||m[m.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=sae(m&&m.map(x=>Object.assign({},x,{params:Object.assign({},c,x.params),pathname:Od([u,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?u:Od([u,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),o,n,r);return e&&y?N.createElement(qw.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},y):y}function tae(){let t=uae(),e=joe(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:s},"ErrorBoundary")," or"," ",N.createElement("code",{style:s},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:i},n):null,o)}var nae=N.createElement(tae,null),rae=class extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?N.createElement(Ec.Provider,{value:this.props.routeContext},N.createElement(A3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function iae({routeContext:t,match:e,children:n}){let r=N.useContext(lv);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(Ec.Provider,{value:t},n)}function sae(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,s=n==null?void 0:n.errors;if(s!=null){let c=i.findIndex(l=>l.route.id&&(s==null?void 0:s[l.route.id])!==void 0);yi(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let o=!1,a=-1;if(n)for(let c=0;c<i.length;c++){let l=i[c];if((l.route.HydrateFallback||l.route.hydrateFallbackElement)&&(a=c),l.route.id){let{loaderData:u,errors:d}=n,h=l.route.loader&&!u.hasOwnProperty(l.route.id)&&(!d||d[l.route.id]===void 0);if(l.route.lazy||h){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((c,l,u)=>{let d,h=!1,f=null,p=null;n&&(d=s&&l.route.id?s[l.route.id]:void 0,f=l.route.errorElement||nae,o&&(a<0&&u===0?(Hz("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):a===u&&(h=!0,p=l.route.hydrateFallbackElement||null)));let g=e.concat(i.slice(0,u+1)),m=()=>{let y;return d?y=f:h?y=p:l.route.Component?y=N.createElement(l.route.Component,null):l.route.element?y=l.route.element:y=c,N.createElement(iae,{match:l,routeContext:{outlet:c,matches:g,isDataRoute:n!=null},children:y})};return n&&(l.route.ErrorBoundary||l.route.errorElement||u===0)?N.createElement(rae,{location:n.location,revalidation:n.revalidation,component:f,error:d,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}function R3(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function oae(t){let e=N.useContext(lv);return yi(e,R3(t)),e}function aae(t){let e=N.useContext(OI);return yi(e,R3(t)),e}function lae(t){let e=N.useContext(Ec);return yi(e,R3(t)),e}function k3(t){let e=lae(t),n=e.matches[e.matches.length-1];return yi(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function cae(){return k3("useRouteId")}function uae(){var r;let t=N.useContext(A3),e=aae("useRouteError"),n=k3("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function dae(){let{router:t}=oae("useNavigate"),e=k3("useNavigate"),n=N.useRef(!1);return Uz(()=>{n.current=!0}),N.useCallback(async(i,s={})=>{ou(n.current,Fz),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var i6={};function Hz(t,e,n){!e&&!i6[t]&&(i6[t]=!0,ou(!1,n))}N.memo(fae);function fae({routes:t,future:e,state:n}){return zz(t,void 0,n,e)}function hae(t){return Joe(t.context)}function ey(t){yi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function pae({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){yi(!Kw(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=N.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=av(n));let{pathname:c="/",search:l="",hash:u="",state:d=null,key:h="default"}=n,f=N.useMemo(()=>{let p=Hd(c,o);return p==null?null:{location:{pathname:p,search:l,hash:u,state:d,key:h},navigationType:r}},[o,c,l,u,d,h,r]);return ou(f!=null,`<Router basename="${o}"> is not able to match the URL "${c}${l}${u}" because it does not start with the basename, so the <Router> won't render anything.`),f==null?null:N.createElement(du.Provider,{value:a},N.createElement(qw.Provider,{children:e,value:f}))}function mae({children:t,location:e}){return eae(AR(t),e)}function AR(t,e=[]){let n=[];return N.Children.forEach(t,(r,i)=>{if(!N.isValidElement(r))return;let s=[...e,i];if(r.type===N.Fragment){n.push.apply(n,AR(r.props.children,s));return}yi(r.type===ey,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),yi(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=AR(r.props.children,s)),n.push(o)}),n}var TT="get",IT="application/x-www-form-urlencoded";function NI(t){return t!=null&&typeof t.tagName=="string"}function gae(t){return NI(t)&&t.tagName.toLowerCase()==="button"}function yae(t){return NI(t)&&t.tagName.toLowerCase()==="form"}function vae(t){return NI(t)&&t.tagName.toLowerCase()==="input"}function bae(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function xae(t,e){return t.button===0&&(!e||e==="_self")&&!bae(t)}var AS=null;function wae(){if(AS===null)try{new FormData(document.createElement("form"),0),AS=!1}catch{AS=!0}return AS}var _ae=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jC(t){return t!=null&&!_ae.has(t)?(ou(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${IT}"`),null):t}function Sae(t,e){let n,r,i,s,o;if(yae(t)){let a=t.getAttribute("action");r=a?Hd(a,e):null,n=t.getAttribute("method")||TT,i=jC(t.getAttribute("enctype"))||IT,s=new FormData(t)}else if(gae(t)||vae(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||a.getAttribute("action");if(r=c?Hd(c,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||TT,i=jC(t.getAttribute("formenctype"))||jC(a.getAttribute("enctype"))||IT,s=new FormData(a,t),!wae()){let{name:l,type:u,value:d}=t;if(u==="image"){let h=l?`${l}.`:"";s.append(`${h}x`,"0"),s.append(`${h}y`,"0")}else l&&s.append(l,d)}}else{if(NI(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=TT,r=null,i=IT,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}function O3(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function Eae(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Tae(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Iae(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await Eae(s,n);return o.links?o.links():[]}return[]}));return Aae(r.flat(1).filter(Tae).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function s6(t,e,n,r,i,s){let o=(c,l)=>n[l]?c.route.id!==n[l].route.id:!0,a=(c,l)=>{var u;return n[l].pathname!==c.pathname||((u=n[l].route.path)==null?void 0:u.endsWith("*"))&&n[l].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,l)=>o(c,l)||a(c,l)):s==="data"?e.filter((c,l)=>{var d;let u=r.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(o(c,l)||a(c,l))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function Pae(t,e,{includeHydrateFallback:n}={}){return Cae(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function Cae(t){return[...new Set(t)]}function Mae(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function Aae(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(Mae(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function Rae(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Hd(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function Vz(){let t=N.useContext(lv);return O3(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function kae(){let t=N.useContext(OI);return O3(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var N3=N.createContext(void 0);N3.displayName="FrameworkContext";function Wz(){let t=N.useContext(N3);return O3(t,"You must render this element inside a <HydratedRouter> element"),t}function Oae(t,e){let n=N.useContext(N3),[r,i]=N.useState(!1),[s,o]=N.useState(!1),{onFocus:a,onBlur:c,onMouseEnter:l,onMouseLeave:u,onTouchStart:d}=e,h=N.useRef(null);N.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let g=y=>{y.forEach(b=>{o(b.isIntersecting)})},m=new IntersectionObserver(g,{threshold:.5});return h.current&&m.observe(h.current),()=>{m.disconnect()}}},[t]),N.useEffect(()=>{if(r){let g=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(g)}}},[r]);let f=()=>{i(!0)},p=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,h,{}]:[s,h,{onFocus:Ob(a,f),onBlur:Ob(c,p),onMouseEnter:Ob(l,f),onMouseLeave:Ob(u,p),onTouchStart:Ob(d,f)}]:[!1,h,{}]}function Ob(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Nae({page:t,...e}){let{router:n}=Vz(),r=N.useMemo(()=>Rz(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?N.createElement(Dae,{page:t,matches:r,...e}):null}function Lae(t){let{manifest:e,routeModules:n}=Wz(),[r,i]=N.useState([]);return N.useEffect(()=>{let s=!1;return Iae(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function Dae({page:t,matches:e,...n}){let r=Um(),{manifest:i,routeModules:s}=Wz(),{basename:o}=Vz(),{loaderData:a,matches:c}=kae(),l=N.useMemo(()=>s6(t,e,c,i,r,"data"),[t,e,c,i,r]),u=N.useMemo(()=>s6(t,e,c,i,r,"assets"),[t,e,c,i,r]),d=N.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let p=new Set,g=!1;if(e.forEach(y=>{var x;let b=i.routes[y.route.id];!b||!b.hasLoader||(!l.some(S=>S.route.id===y.route.id)&&y.route.id in a&&((x=s[y.route.id])!=null&&x.shouldRevalidate)||b.hasClientLoader?g=!0:p.add(y.route.id))}),p.size===0)return[];let m=Rae(t,o);return g&&p.size>0&&m.searchParams.set("_routes",e.filter(y=>p.has(y.route.id)).map(y=>y.route.id).join(",")),[m.pathname+m.search]},[o,a,r,i,l,e,t,s]),h=N.useMemo(()=>Pae(u,i),[u,i]),f=Lae(u);return N.createElement(N.Fragment,null,d.map(p=>N.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),h.map(p=>N.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),f.map(({key:p,link:g})=>N.createElement("link",{key:p,...g})))}function Bae(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var jz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{jz&&(window.__reactRouterVersion="7.5.0")}catch{}function Fae({basename:t,children:e,window:n}){let r=N.useRef();r.current==null&&(r.current=Soe({window:n,v5Compat:!0}));let i=r.current,[s,o]=N.useState({action:i.action,location:i.location}),a=N.useCallback(c=>{N.startTransition(()=>o(c))},[o]);return N.useLayoutEffect(()=>i.listen(a),[i,a]),N.createElement(pae,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var qz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sy=N.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:c,to:l,preventScrollReset:u,viewTransition:d,...h},f){let{basename:p}=N.useContext(du),g=typeof l=="string"&&qz.test(l),m,y=!1;if(typeof l=="string"&&g&&(m=l,jz))try{let A=new URL(window.location.href),M=l.startsWith("//")?new URL(A.protocol+l):new URL(l),k=Hd(M.pathname,p);M.origin===A.origin&&k!=null?l=k+M.search+M.hash:y=!0}catch{ou(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=Xoe(l,{relative:i}),[x,S,P]=Oae(r,h),_=Hae(l,{replace:o,state:a,target:c,preventScrollReset:u,relative:i,viewTransition:d});function I(A){e&&e(A),A.defaultPrevented||_(A)}let C=N.createElement("a",{...h,...P,href:m||b,onClick:y||s?e:I,ref:Bae(f,S),target:c,"data-discover":!g&&n==="render"?"true":void 0});return x&&!g?N.createElement(N.Fragment,null,C,N.createElement(Nae,{page:b})):C});Sy.displayName="Link";var Uae=N.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:c,...l},u){let d=Gw(o,{relative:l.relative}),h=Um(),f=N.useContext(OI),{navigator:p,basename:g}=N.useContext(du),m=f!=null&&Kae(d)&&a===!0,y=p.encodeLocation?p.encodeLocation(d).pathname:d.pathname,b=h.pathname,x=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;n||(b=b.toLowerCase(),x=x?x.toLowerCase():null,y=y.toLowerCase()),x&&g&&(x=Hd(x,g)||x);const S=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let P=b===y||!i&&b.startsWith(y)&&b.charAt(S)==="/",_=x!=null&&(x===y||!i&&x.startsWith(y)&&x.charAt(y.length)==="/"),I={isActive:P,isPending:_,isTransitioning:m},C=P?e:void 0,A;typeof r=="function"?A=r(I):A=[r,P?"active":null,_?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let M=typeof s=="function"?s(I):s;return N.createElement(Sy,{...l,"aria-current":C,className:A,ref:u,style:M,to:o,viewTransition:a},typeof c=="function"?c(I):c)});Uae.displayName="NavLink";var $ae=N.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=TT,action:a,onSubmit:c,relative:l,preventScrollReset:u,viewTransition:d,...h},f)=>{let p=jae(),g=qae(a,{relative:l}),m=o.toLowerCase()==="get"?"get":"post",y=typeof a=="string"&&qz.test(a),b=x=>{if(c&&c(x),x.defaultPrevented)return;x.preventDefault();let S=x.nativeEvent.submitter,P=(S==null?void 0:S.getAttribute("formmethod"))||o;p(S||x.currentTarget,{fetcherKey:e,method:P,navigate:n,replace:i,state:s,relative:l,preventScrollReset:u,viewTransition:d})};return N.createElement("form",{ref:f,method:m,action:g,onSubmit:r?c:b,...h,"data-discover":!y&&t==="render"?"true":void 0})});$ae.displayName="Form";function zae(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Kz(t){let e=N.useContext(lv);return yi(e,zae(t)),e}function Hae(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=$z(),c=Um(),l=Gw(t,{relative:s});return N.useCallback(u=>{if(xae(u,e)){u.preventDefault();let d=n!==void 0?n:iw(c)===iw(l);a(t,{replace:d,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[c,a,l,n,r,e,t,i,s,o])}var Vae=0,Wae=()=>`__${String(++Vae)}__`;function jae(){let{router:t}=Kz("useSubmit"),{basename:e}=N.useContext(du),n=cae();return N.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:c,body:l}=Sae(r,e);if(i.navigate===!1){let u=i.fetcherKey||Wae();await t.fetch(u,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:l,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:l,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function qae(t,{relative:e}={}){let{basename:n}=N.useContext(du),r=N.useContext(Ec);yi(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Gw(t||".",{relative:e})},o=Um();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),c=a.getAll("index");if(c.some(u=>u==="")){a.delete("index"),c.filter(d=>d).forEach(d=>a.append("index",d));let u=a.toString();s.search=u?`?${u}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Od([n,s.pathname])),iw(s)}function Kae(t,e={}){let n=N.useContext(Bz);yi(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Kz("useViewTransitionState"),i=Gw(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Hd(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Hd(n.nextLocation.pathname,r)||n.nextLocation.pathname;return QT(i.pathname,o)!=null||QT(i.pathname,s)!=null}new TextEncoder;const Gae=()=>H.jsxs(H.Fragment,{children:[H.jsx(Ene,{position:"fixed",children:H.jsxs(Q5,{children:[H.jsx(hl,{color:"inherit",component:Sy,to:"",children:H.jsx(ir,{variant:"h6",component:"div",children:"MetaMarket"})}),H.jsx("div",{style:{flexGrow:1}})," ",H.jsx(hl,{color:"inherit",component:Sy,to:"/upload-file",children:"Upload File"}),H.jsx(hl,{color:"inherit",component:Sy,to:"/account",children:"Account"})]})}),H.jsx(Q5,{}),H.jsxs(jw,{maxWidth:"lg",style:{marginTop:"2em"},children:[H.jsx(hae,{})," "]})]});function Xae(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}Xae(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Xw=t=>typeof t=="number"&&!isNaN(t),km=t=>typeof t=="string",Vd=t=>typeof t=="function",Yae=t=>km(t)||Xw(t),RR=t=>km(t)||Vd(t)?t:null,Zae=(t,e)=>t===!1||Xw(t)&&t>0?t:e,kR=t=>N.isValidElement(t)||km(t)||Vd(t)||Xw(t);function Jae(t,e,n=300){let{scrollHeight:r,style:i}=t;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,n)})})}function Qae({enter:t,exit:e,appendPosition:n=!1,collapse:r=!0,collapseDuration:i=300}){return function({children:s,position:o,preventExitTransition:a,done:c,nodeRef:l,isIn:u,playToast:d}){let h=n?`${t}--${o}`:t,f=n?`${e}--${o}`:e,p=N.useRef(0);return N.useLayoutEffect(()=>{let g=l.current,m=h.split(" "),y=b=>{b.target===l.current&&(d(),g.removeEventListener("animationend",y),g.removeEventListener("animationcancel",y),p.current===0&&b.type!=="animationcancel"&&g.classList.remove(...m))};g.classList.add(...m),g.addEventListener("animationend",y),g.addEventListener("animationcancel",y)},[]),N.useEffect(()=>{let g=l.current,m=()=>{g.removeEventListener("animationend",m),r?Jae(g,c,i):c()};u||(a?m():(p.current=1,g.className+=` ${f}`,g.addEventListener("animationend",m)))},[u]),qt.createElement(qt.Fragment,null,s)}}function o6(t,e){return{content:Gz(t.content,t.props),containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,reason:t.removalReason,status:e}}function Gz(t,e,n=!1){return N.isValidElement(t)&&!km(t.type)?N.cloneElement(t,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:n}):Vd(t)?t({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:n}):t}function ele({closeToast:t,theme:e,ariaLabel:n="close"}){return qt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:r=>{r.stopPropagation(),t(!0)},"aria-label":n},qt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},qt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function tle({delay:t,isRunning:e,closeToast:n,type:r="default",hide:i,className:s,controlledProgress:o,progress:a,rtl:c,isIn:l,theme:u}){let d=i||o&&a===0,h={animationDuration:`${t}ms`,animationPlayState:e?"running":"paused"};o&&(h.transform=`scaleX(${a})`);let f=Fe("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${u}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":c}),p=Vd(s)?s({rtl:c,type:r,defaultClassName:f}):Fe(f,s),g={[o&&a>=1?"onTransitionEnd":"onAnimationEnd"]:o&&a<1?null:()=>{l&&n()}};return qt.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":d},qt.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${u} Toastify__progress-bar--${r}`}),qt.createElement("div",{role:"progressbar","aria-hidden":d?"true":"false","aria-label":"notification timer",className:p,style:h,...g}))}var nle=1,Xz=()=>`${nle++}`;function rle(t,e,n){let r=1,i=0,s=[],o=[],a=e,c=new Map,l=new Set,u=b=>(l.add(b),()=>l.delete(b)),d=()=>{o=Array.from(c.values()),l.forEach(b=>b())},h=({containerId:b,toastId:x,updateId:S})=>{let P=b?b!==t:t!==1,_=c.has(x)&&S==null;return P||_},f=(b,x)=>{c.forEach(S=>{var P;(x==null||x===S.props.toastId)&&((P=S.toggle)==null||P.call(S,b))})},p=b=>{var x,S;(S=(x=b.props)==null?void 0:x.onClose)==null||S.call(x,b.removalReason),b.isActive=!1},g=b=>{if(b==null)c.forEach(p);else{let x=c.get(b);x&&p(x)}d()},m=()=>{i-=s.length,s=[]},y=b=>{var x,S;let{toastId:P,updateId:_}=b.props,I=_==null;b.staleId&&c.delete(b.staleId),b.isActive=!0,c.set(P,b),d(),n(o6(b,I?"added":"updated")),I&&((S=(x=b.props).onOpen)==null||S.call(x))};return{id:t,props:a,observe:u,toggle:f,removeToast:g,toasts:c,clearQueue:m,buildToast:(b,x)=>{if(h(x))return;let{toastId:S,updateId:P,data:_,staleId:I,delay:C}=x,A=P==null;A&&i++;let M={...a,style:a.toastStyle,key:r++,...Object.fromEntries(Object.entries(x).filter(([O,B])=>B!=null)),toastId:S,updateId:P,data:_,isIn:!1,className:RR(x.className||a.toastClassName),progressClassName:RR(x.progressClassName||a.progressClassName),autoClose:x.isLoading?!1:Zae(x.autoClose,a.autoClose),closeToast(O){c.get(S).removalReason=O,g(S)},deleteToast(){let O=c.get(S);if(O!=null){if(n(o6(O,"removed")),c.delete(S),i--,i<0&&(i=0),s.length>0){y(s.shift());return}d()}}};M.closeButton=a.closeButton,x.closeButton===!1||kR(x.closeButton)?M.closeButton=x.closeButton:x.closeButton===!0&&(M.closeButton=kR(a.closeButton)?a.closeButton:!0);let k={content:b,props:M,staleId:I};a.limit&&a.limit>0&&i>a.limit&&A?s.push(k):Xw(C)?setTimeout(()=>{y(k)},C):y(k)},setProps(b){a=b},setToggle:(b,x)=>{let S=c.get(b);S&&(S.toggle=x)},isToastActive:b=>{var x;return(x=c.get(b))==null?void 0:x.isActive},getSnapshot:()=>o}}var So=new Map,sw=[],OR=new Set,ile=t=>OR.forEach(e=>e(t)),Yz=()=>So.size>0;function sle(){sw.forEach(t=>Jz(t.content,t.options)),sw=[]}var ole=(t,{containerId:e})=>{var n;return(n=So.get(e||1))==null?void 0:n.toasts.get(t)};function Zz(t,e){var n;if(e)return!!((n=So.get(e))!=null&&n.isToastActive(t));let r=!1;return So.forEach(i=>{i.isToastActive(t)&&(r=!0)}),r}function ale(t){if(!Yz()){sw=sw.filter(e=>t!=null&&e.options.toastId!==t);return}if(t==null||Yae(t))So.forEach(e=>{e.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let e=So.get(t.containerId);e?e.removeToast(t.id):So.forEach(n=>{n.removeToast(t.id)})}}var lle=(t={})=>{So.forEach(e=>{e.props.limit&&(!t.containerId||e.id===t.containerId)&&e.clearQueue()})};function Jz(t,e){kR(t)&&(Yz()||sw.push({content:t,options:e}),So.forEach(n=>{n.buildToast(t,e)}))}function cle(t){var e;(e=So.get(t.containerId||1))==null||e.setToggle(t.id,t.fn)}function Qz(t,e){So.forEach(n=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===n.id)&&n.toggle(t,e==null?void 0:e.id)})}function ule(t){let e=t.containerId||1;return{subscribe(n){let r=rle(e,t,ile);So.set(e,r);let i=r.observe(n);return sle(),()=>{i(),So.delete(e)}},setProps(n){var r;(r=So.get(e))==null||r.setProps(n)},getSnapshot(){var n;return(n=So.get(e))==null?void 0:n.getSnapshot()}}}function dle(t){return OR.add(t),()=>{OR.delete(t)}}function fle(t){return t&&(km(t.toastId)||Xw(t.toastId))?t.toastId:Xz()}function Yw(t,e){return Jz(t,e),e.toastId}function LI(t,e){return{...e,type:e&&e.type||t,toastId:fle(e)}}function DI(t){return(e,n)=>Yw(e,LI(t,n))}function Br(t,e){return Yw(t,LI("default",e))}Br.loading=(t,e)=>Yw(t,LI("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function hle(t,{pending:e,error:n,success:r},i){let s;e&&(s=km(e)?Br.loading(e,i):Br.loading(e.render,{...i,...e}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},a=(l,u,d)=>{if(u==null){Br.dismiss(s);return}let h={type:l,...o,...i,data:d},f=km(u)?{render:u}:u;return s?Br.update(s,{...h,...f}):Br(f.render,{...h,...f}),d},c=Vd(t)?t():t;return c.then(l=>a("success",r,l)).catch(l=>a("error",n,l)),c}Br.promise=hle;Br.success=DI("success");Br.info=DI("info");Br.error=DI("error");Br.warning=DI("warning");Br.warn=Br.warning;Br.dark=(t,e)=>Yw(t,LI("default",{theme:"dark",...e}));function ple(t){ale(t)}Br.dismiss=ple;Br.clearWaitingQueue=lle;Br.isActive=Zz;Br.update=(t,e={})=>{let n=ole(t,e);if(n){let{props:r,content:i}=n,s={delay:100,...r,...e,toastId:e.toastId||t,updateId:Xz()};s.toastId!==t&&(s.staleId=t);let o=s.render||i;delete s.render,Yw(o,s)}};Br.done=t=>{Br.update(t,{progress:1})};Br.onChange=dle;Br.play=t=>Qz(!0,t);Br.pause=t=>Qz(!1,t);function mle(t){var e;let{subscribe:n,getSnapshot:r,setProps:i}=N.useRef(ule(t)).current;i(t);let s=(e=N.useSyncExternalStore(n,r,r))==null?void 0:e.slice();function o(a){if(!s)return[];let c=new Map;return t.newestOnTop&&s.reverse(),s.forEach(l=>{let{position:u}=l.props;c.has(u)||c.set(u,[]),c.get(u).push(l)}),Array.from(c,l=>a(l[0],l[1]))}return{getToastToRender:o,isToastActive:Zz,count:s==null?void 0:s.length}}function gle(t){let[e,n]=N.useState(!1),[r,i]=N.useState(!1),s=N.useRef(null),o=N.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:a,pauseOnHover:c,closeToast:l,onClick:u,closeOnClick:d}=t;cle({id:t.toastId,containerId:t.containerId,fn:n}),N.useEffect(()=>{if(t.pauseOnFocusLoss)return h(),()=>{f()}},[t.pauseOnFocusLoss]);function h(){document.hasFocus()||y(),window.addEventListener("focus",m),window.addEventListener("blur",y)}function f(){window.removeEventListener("focus",m),window.removeEventListener("blur",y)}function p(I){if(t.draggable===!0||t.draggable===I.pointerType){b();let C=s.current;o.canCloseOnClick=!0,o.canDrag=!0,C.style.transition="none",t.draggableDirection==="x"?(o.start=I.clientX,o.removalDistance=C.offsetWidth*(t.draggablePercent/100)):(o.start=I.clientY,o.removalDistance=C.offsetHeight*(t.draggablePercent===80?t.draggablePercent*1.5:t.draggablePercent)/100)}}function g(I){let{top:C,bottom:A,left:M,right:k}=s.current.getBoundingClientRect();I.nativeEvent.type!=="touchend"&&t.pauseOnHover&&I.clientX>=M&&I.clientX<=k&&I.clientY>=C&&I.clientY<=A?y():m()}function m(){n(!0)}function y(){n(!1)}function b(){o.didMove=!1,document.addEventListener("pointermove",S),document.addEventListener("pointerup",P)}function x(){document.removeEventListener("pointermove",S),document.removeEventListener("pointerup",P)}function S(I){let C=s.current;if(o.canDrag&&C){o.didMove=!0,e&&y(),t.draggableDirection==="x"?o.delta=I.clientX-o.start:o.delta=I.clientY-o.start,o.start!==I.clientX&&(o.canCloseOnClick=!1);let A=t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;C.style.transform=`translate3d(${A},0)`,C.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function P(){x();let I=s.current;if(o.canDrag&&o.didMove&&I){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){i(!0),t.closeToast(!0),t.collapseAll();return}I.style.transition="transform 0.2s, opacity 0.2s",I.style.removeProperty("transform"),I.style.removeProperty("opacity")}}let _={onPointerDown:p,onPointerUp:g};return a&&c&&(_.onMouseEnter=y,t.stacked||(_.onMouseLeave=m)),d&&(_.onClick=I=>{u&&u(I),o.canCloseOnClick&&l(!0)}),{playToast:m,pauseToast:y,isRunning:e,preventExitTransition:r,toastRef:s,eventHandlers:_}}var yle=typeof window<"u"?N.useLayoutEffect:N.useEffect,BI=({theme:t,type:e,isLoading:n,...r})=>qt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...r});function vle(t){return qt.createElement(BI,{...t},qt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function ble(t){return qt.createElement(BI,{...t},qt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function xle(t){return qt.createElement(BI,{...t},qt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function wle(t){return qt.createElement(BI,{...t},qt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function _le(){return qt.createElement("div",{className:"Toastify__spinner"})}var NR={info:ble,warning:vle,success:xle,error:wle,spinner:_le},Sle=t=>t in NR;function Ele({theme:t,type:e,isLoading:n,icon:r}){let i=null,s={theme:t,type:e};return r===!1||(Vd(r)?i=r({...s,isLoading:n}):N.isValidElement(r)?i=N.cloneElement(r,s):n?i=NR.spinner():Sle(e)&&(i=NR[e](s))),i}var Tle=t=>{let{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:i,playToast:s}=gle(t),{closeButton:o,children:a,autoClose:c,onClick:l,type:u,hideProgressBar:d,closeToast:h,transition:f,position:p,className:g,style:m,progressClassName:y,updateId:b,role:x,progress:S,rtl:P,toastId:_,deleteToast:I,isIn:C,isLoading:A,closeOnClick:M,theme:k,ariaLabel:O}=t,B=Fe("Toastify__toast",`Toastify__toast-theme--${k}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":P},{"Toastify__toast--close-on-click":M}),$=Vd(g)?g({rtl:P,position:p,type:u,defaultClassName:B}):Fe(B,g),U=Ele(t),q=!!S||!c,K={closeToast:h,type:u,theme:k},V=null;return o===!1||(Vd(o)?V=o(K):N.isValidElement(o)?V=N.cloneElement(o,K):V=ele(K)),qt.createElement(f,{isIn:C,done:I,position:p,preventExitTransition:n,nodeRef:r,playToast:s},qt.createElement("div",{id:_,tabIndex:0,onClick:l,"data-in":C,className:$,...i,style:m,ref:r,...C&&{role:x,"aria-label":O}},U!=null&&qt.createElement("div",{className:Fe("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!A})},U),Gz(a,t,!e),V,!t.customProgressBar&&qt.createElement(tle,{...b&&!q?{key:`p-${b}`}:{},rtl:P,theme:k,delay:c,isRunning:e,isIn:C,closeToast:h,hide:d,type:u,className:y,controlledProgress:q,progress:S||0})))},Ile=(t,e=!1)=>({enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}),Ple=Qae(Ile("bounce",!0)),Cle={position:"top-right",transition:Ple,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:t=>t.altKey&&t.code==="KeyT"};function Mle(t){let e={...Cle,...t},n=t.stacked,[r,i]=N.useState(!0),s=N.useRef(null),{getToastToRender:o,isToastActive:a,count:c}=mle(e),{className:l,style:u,rtl:d,containerId:h,hotKeys:f}=e;function p(m){let y=Fe("Toastify__toast-container",`Toastify__toast-container--${m}`,{"Toastify__toast-container--rtl":d});return Vd(l)?l({position:m,rtl:d,defaultClassName:y}):Fe(y,RR(l))}function g(){n&&(i(!0),Br.play())}return yle(()=>{var m;if(n){let y=s.current.querySelectorAll('[data-in="true"]'),b=12,x=(m=e.position)==null?void 0:m.includes("top"),S=0,P=0;Array.from(y).reverse().forEach((_,I)=>{let C=_;C.classList.add("Toastify__toast--stacked"),I>0&&(C.dataset.collapsed=`${r}`),C.dataset.pos||(C.dataset.pos=x?"top":"bot");let A=S*(r?.2:1)+(r?0:b*I);C.style.setProperty("--y",`${x?A:A*-1}px`),C.style.setProperty("--g",`${b}`),C.style.setProperty("--s",`${1-(r?P:0)}`),S+=C.offsetHeight,P+=.025})}},[r,c,n]),N.useEffect(()=>{function m(y){var b;let x=s.current;f(y)&&((b=x.querySelector('[tabIndex="0"]'))==null||b.focus(),i(!1),Br.pause()),y.key==="Escape"&&(document.activeElement===x||x!=null&&x.contains(document.activeElement))&&(i(!0),Br.play())}return document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)}},[f]),qt.createElement("section",{ref:s,className:"Toastify",id:h,onMouseEnter:()=>{n&&(i(!1),Br.pause())},onMouseLeave:g,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},o((m,y)=>{let b=y.length?{...u}:{...u,pointerEvents:"none"};return qt.createElement("div",{tabIndex:-1,className:p(m),"data-stacked":n,style:b,key:`c-${m}`},y.map(({content:x,props:S})=>qt.createElement(Tle,{...S,stacked:n,collapseAll:g,isIn:a(S.toastId,S.containerId),key:`t-${S.key}`},x)))}))}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const FI="175",Xp={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Yp={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},eH=0,LR=1,tH=2,Ale=3,nH=0,UI=1,Ey=2,fc=3,Wd=0,Eo=1,mc=2,Nd=0,Em=1,DR=2,BR=3,FR=4,rH=5,Xf=100,iH=101,sH=102,oH=103,aH=104,lH=200,cH=201,uH=202,dH=203,e2=204,t2=205,fH=206,hH=207,pH=208,mH=209,gH=210,yH=211,vH=212,bH=213,xH=214,n2=0,r2=1,i2=2,Om=3,s2=4,o2=5,a2=6,l2=7,Zw=0,wH=1,_H=2,eu=0,SH=1,EH=2,TH=3,L3=4,IH=5,PH=6,CH=7,UR="attached",MH="detached",$I=300,jd=301,nh=302,ow=303,aw=304,cv=306,lw=1e3,pl=1001,cw=1002,Bs=1003,D3=1004,Rle=1004,fy=1005,kle=1005,cs=1006,Ox=1007,Ole=1007,Yc=1008,Nle=1008,xc=1009,B3=1010,F3=1011,zy=1012,zI=1013,qd=1014,Zo=1015,uv=1016,HI=1017,VI=1018,Hy=1020,U3=35902,$3=1021,z3=1022,to=1023,H3=1024,V3=1025,Vy=1026,Wy=1027,WI=1028,Jw=1029,W3=1030,jI=1031,Lle=1032,qI=1033,Nx=33776,Lx=33777,Dx=33778,Bx=33779,c2=35840,u2=35841,d2=35842,f2=35843,h2=36196,p2=37492,m2=37496,g2=37808,y2=37809,v2=37810,b2=37811,x2=37812,w2=37813,_2=37814,S2=37815,E2=37816,T2=37817,I2=37818,P2=37819,C2=37820,M2=37821,Fx=36492,A2=36494,R2=36495,j3=36283,k2=36284,O2=36285,N2=36286,AH=2200,RH=2201,kH=2202,uw=2300,L2=2301,PT=2302,pm=2400,mm=2401,dw=2402,KI=2500,q3=2501,Dle=0,Ble=1,Fle=2,OH=3200,NH=3201,Ule=3202,$le=3203,uh=0,LH=1,Sd="",Ko="srgb",Nm="srgb-linear",fw="linear",Rr="srgb",zle=0,Zp=7680,Hle=7681,Vle=7682,Wle=7683,jle=34055,qle=34056,Kle=5386,Gle=512,Xle=513,Yle=514,Zle=515,Jle=516,Qle=517,ece=518,$R=519,DH=512,BH=513,FH=514,K3=515,UH=516,$H=517,zH=518,HH=519,hw=35044,tce=35048,nce=35040,rce=35045,ice=35049,sce=35041,oce=35046,ace=35050,lce=35042,cce="100",zR="300 es",gc=2e3,pw=2001,uce={COMPUTE:"compute",RENDER:"render"};class Tc{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){const r=this._listeners;return r===void 0?!1:r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){const r=this._listeners;if(r===void 0)return;const i=r[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){const n=this._listeners;if(n===void 0)return;const r=n[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Xs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let a6=1234567;const Tm=Math.PI/180,jy=180/Math.PI;function ka(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Xs[t&255]+Xs[t>>8&255]+Xs[t>>16&255]+Xs[t>>24&255]+"-"+Xs[e&255]+Xs[e>>8&255]+"-"+Xs[e>>16&15|64]+Xs[e>>24&255]+"-"+Xs[n&63|128]+Xs[n>>8&255]+"-"+Xs[n>>16&255]+Xs[n>>24&255]+Xs[r&255]+Xs[r>>8&255]+Xs[r>>16&255]+Xs[r>>24&255]).toLowerCase()}function Cn(t,e,n){return Math.max(e,Math.min(n,t))}function G3(t,e){return(t%e+e)%e}function dce(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function fce(t,e,n){return t!==e?(n-t)/(e-t):0}function Ux(t,e,n){return(1-n)*t+n*e}function hce(t,e,n,r){return Ux(t,e,1-Math.exp(-n*r))}function pce(t,e=1){return e-Math.abs(G3(t,e*2)-e)}function mce(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function gce(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function yce(t,e){return t+Math.floor(Math.random()*(e-t+1))}function vce(t,e){return t+Math.random()*(e-t)}function bce(t){return t*(.5-Math.random())}function xce(t){t!==void 0&&(a6=t);let e=a6+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function wce(t){return t*Tm}function _ce(t){return t*jy}function Sce(t){return(t&t-1)===0&&t!==0}function Ece(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function Tce(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function Ice(t,e,n,r,i){const s=Math.cos,o=Math.sin,a=s(n/2),c=o(n/2),l=s((e+r)/2),u=o((e+r)/2),d=s((e-r)/2),h=o((e-r)/2),f=s((r-e)/2),p=o((r-e)/2);switch(i){case"XYX":t.set(a*u,c*d,c*h,a*l);break;case"YZY":t.set(c*h,a*u,c*d,a*l);break;case"ZXZ":t.set(c*d,c*h,a*u,a*l);break;case"XZX":t.set(a*u,c*p,c*f,a*l);break;case"YXY":t.set(c*f,a*u,c*p,a*l);break;case"ZYZ":t.set(c*p,c*f,a*u,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function _o(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Bn(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const Pce={DEG2RAD:Tm,RAD2DEG:jy,generateUUID:ka,clamp:Cn,euclideanModulo:G3,mapLinear:dce,inverseLerp:fce,lerp:Ux,damp:hce,pingpong:pce,smoothstep:mce,smootherstep:gce,randInt:yce,randFloat:vce,randFloatSpread:bce,seededRandom:xce,degToRad:wce,radToDeg:_ce,isPowerOfTwo:Sce,ceilPowerOfTwo:Ece,floorPowerOfTwo:Tce,setQuaternionFromProperEuler:Ice,normalize:Bn,denormalize:_o};class St{constructor(e=0,n=0){St.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Cn(this.x,e.x,n.x),this.y=Cn(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=Cn(this.x,e,n),this.y=Cn(this.y,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Cn(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Cn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class On{constructor(e,n,r,i,s,o,a,c,l){On.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,o,a,c,l)}set(e,n,r,i,s,o,a,c,l){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=n,u[4]=s,u[5]=c,u[6]=r,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[3],c=r[6],l=r[1],u=r[4],d=r[7],h=r[2],f=r[5],p=r[8],g=i[0],m=i[3],y=i[6],b=i[1],x=i[4],S=i[7],P=i[2],_=i[5],I=i[8];return s[0]=o*g+a*b+c*P,s[3]=o*m+a*x+c*_,s[6]=o*y+a*S+c*I,s[1]=l*g+u*b+d*P,s[4]=l*m+u*x+d*_,s[7]=l*y+u*S+d*I,s[2]=h*g+f*b+p*P,s[5]=h*m+f*x+p*_,s[8]=h*y+f*S+p*I,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8];return n*o*u-n*a*l-r*s*u+r*a*c+i*s*l-i*o*c}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=u*o-a*l,h=a*c-u*s,f=l*s-o*c,p=n*d+r*h+i*f;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/p;return e[0]=d*g,e[1]=(i*l-u*r)*g,e[2]=(a*r-i*o)*g,e[3]=h*g,e[4]=(u*n-i*c)*g,e[5]=(i*s-a*n)*g,e[6]=f*g,e[7]=(r*c-l*n)*g,e[8]=(o*n-r*s)*g,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,s,o,a){const c=Math.cos(s),l=Math.sin(s);return this.set(r*c,r*l,-r*(c*o+l*a)+o+e,-i*l,i*c,-i*(-l*o+c*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(qC.makeScale(e,n)),this}rotate(e){return this.premultiply(qC.makeRotation(-e)),this}translate(e,n){return this.premultiply(qC.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const qC=new On;function VH(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const Cce={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function hy(t,e){return new Cce[t](e)}function mw(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function WH(){const t=mw("canvas");return t.style.display="block",t}const l6={};function CT(t){t in l6||(l6[t]=!0,console.warn(t))}function Mce(t,e,n){return new Promise(function(r,i){function s(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:i();break;case t.TIMEOUT_EXPIRED:setTimeout(s,n);break;default:r()}}setTimeout(s,n)})}function Ace(t){const e=t.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function Rce(t){const e=t.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const c6=new On().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),u6=new On().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function kce(){const t={enabled:!0,workingColorSpace:Nm,spaces:{},convert:function(i,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===Rr&&(i.r=Ld(i.r),i.g=Ld(i.g),i.b=Ld(i.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===Rr&&(i.r=Ty(i.r),i.g=Ty(i.g),i.b=Ty(i.b))),i},fromWorkingColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},toWorkingColorSpace:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===Sd?fw:this.spaces[i].transfer},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,o){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return t.define({[Nm]:{primaries:e,whitePoint:r,transfer:fw,toXYZ:c6,fromXYZ:u6,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:Ko},outputColorSpaceConfig:{drawingBufferColorSpace:Ko}},[Ko]:{primaries:e,whitePoint:r,transfer:Rr,toXYZ:c6,fromXYZ:u6,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:Ko}}}),t}const lr=kce();function Ld(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function Ty(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let X0;class jH{static getDataURL(e,n="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{X0===void 0&&(X0=mw("canvas")),X0.width=e.width,X0.height=e.height;const i=X0.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),r=X0}return r.toDataURL(n)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=mw("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Ld(s[o]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(Ld(n[r]/255)*255):n[r]=Ld(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Oce=0;class Yf{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Oce++}),this.uuid=ka(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(KC(i[o].image)):s.push(KC(i[o]))}else s=KC(i);r.url=s}return n||(e.images[this.uuid]=r),r}}function KC(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?jH.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Nce=0;class vi extends Tc{constructor(e=vi.DEFAULT_IMAGE,n=vi.DEFAULT_MAPPING,r=pl,i=pl,s=cs,o=Yc,a=to,c=xc,l=vi.DEFAULT_ANISOTROPY,u=Sd){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Nce++}),this.uuid=ka(),this.name="",this.source=new Yf(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=c,this.offset=new St(0,0),this.repeat=new St(1,1),this.center=new St(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new On,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==$I)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case lw:e.x=e.x-Math.floor(e.x);break;case pl:e.x=e.x<0?0:1;break;case cw:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case lw:e.y=e.y-Math.floor(e.y);break;case pl:e.y=e.y<0?0:1;break;case cw:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}vi.DEFAULT_IMAGE=null;vi.DEFAULT_MAPPING=$I;vi.DEFAULT_ANISOTROPY=1;class gr{constructor(e=0,n=0,r=0,i=1){gr.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*n+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*n+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*n+o[7]*r+o[11]*i+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,s;const c=e.elements,l=c[0],u=c[4],d=c[8],h=c[1],f=c[5],p=c[9],g=c[2],m=c[6],y=c[10];if(Math.abs(u-h)<.01&&Math.abs(d-g)<.01&&Math.abs(p-m)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+g)<.1&&Math.abs(p+m)<.1&&Math.abs(l+f+y-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const x=(l+1)/2,S=(f+1)/2,P=(y+1)/2,_=(u+h)/4,I=(d+g)/4,C=(p+m)/4;return x>S&&x>P?x<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(x),i=_/r,s=I/r):S>P?S<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(S),r=_/i,s=C/i):P<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(P),r=I/s,i=C/s),this.set(r,i,s,n),this}let b=Math.sqrt((m-p)*(m-p)+(d-g)*(d-g)+(h-u)*(h-u));return Math.abs(b)<.001&&(b=1),this.x=(m-p)/b,this.y=(d-g)/b,this.z=(h-u)/b,this.w=Math.acos((l+f+y-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Cn(this.x,e.x,n.x),this.y=Cn(this.y,e.y,n.y),this.z=Cn(this.z,e.z,n.z),this.w=Cn(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=Cn(this.x,e,n),this.y=Cn(this.y,e,n),this.z=Cn(this.z,e,n),this.w=Cn(this.w,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Cn(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class GI extends Tc{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new gr(0,0,e,n),this.scissorTest=!1,this.viewport=new gr(0,0,e,n);const i={width:e,height:n,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:cs,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const s=new vi(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);s.flipY=!1,s.generateMipmaps=r.generateMipmaps,s.internalFormat=r.internalFormat,this.textures=[];const o=r.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=n,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++){this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const i=Object.assign({},e.textures[n].image);this.textures[n].source=new Yf(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class au extends GI{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class Qw extends vi{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Bs,this.minFilter=Bs,this.wrapR=pl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Lce extends au{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new Qw(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class XI extends vi{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Bs,this.minFilter=Bs,this.wrapR=pl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Dce extends au{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new XI(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class ro{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,s,o,a){let c=r[i+0],l=r[i+1],u=r[i+2],d=r[i+3];const h=s[o+0],f=s[o+1],p=s[o+2],g=s[o+3];if(a===0){e[n+0]=c,e[n+1]=l,e[n+2]=u,e[n+3]=d;return}if(a===1){e[n+0]=h,e[n+1]=f,e[n+2]=p,e[n+3]=g;return}if(d!==g||c!==h||l!==f||u!==p){let m=1-a;const y=c*h+l*f+u*p+d*g,b=y>=0?1:-1,x=1-y*y;if(x>Number.EPSILON){const P=Math.sqrt(x),_=Math.atan2(P,y*b);m=Math.sin(m*_)/P,a=Math.sin(a*_)/P}const S=a*b;if(c=c*m+h*S,l=l*m+f*S,u=u*m+p*S,d=d*m+g*S,m===1-a){const P=1/Math.sqrt(c*c+l*l+u*u+d*d);c*=P,l*=P,u*=P,d*=P}}e[n]=c,e[n+1]=l,e[n+2]=u,e[n+3]=d}static multiplyQuaternionsFlat(e,n,r,i,s,o){const a=r[i],c=r[i+1],l=r[i+2],u=r[i+3],d=s[o],h=s[o+1],f=s[o+2],p=s[o+3];return e[n]=a*p+u*d+c*f-l*h,e[n+1]=c*p+u*h+l*d-a*f,e[n+2]=l*p+u*f+a*h-c*d,e[n+3]=u*p-a*d-c*h-l*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,l=a(r/2),u=a(i/2),d=a(s/2),h=c(r/2),f=c(i/2),p=c(s/2);switch(o){case"XYZ":this._x=h*u*d+l*f*p,this._y=l*f*d-h*u*p,this._z=l*u*p+h*f*d,this._w=l*u*d-h*f*p;break;case"YXZ":this._x=h*u*d+l*f*p,this._y=l*f*d-h*u*p,this._z=l*u*p-h*f*d,this._w=l*u*d+h*f*p;break;case"ZXY":this._x=h*u*d-l*f*p,this._y=l*f*d+h*u*p,this._z=l*u*p+h*f*d,this._w=l*u*d-h*f*p;break;case"ZYX":this._x=h*u*d-l*f*p,this._y=l*f*d+h*u*p,this._z=l*u*p-h*f*d,this._w=l*u*d+h*f*p;break;case"YZX":this._x=h*u*d+l*f*p,this._y=l*f*d+h*u*p,this._z=l*u*p-h*f*d,this._w=l*u*d-h*f*p;break;case"XZY":this._x=h*u*d-l*f*p,this._y=l*f*d-h*u*p,this._z=l*u*p+h*f*d,this._w=l*u*d+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],s=n[8],o=n[1],a=n[5],c=n[9],l=n[2],u=n[6],d=n[10],h=r+a+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-c)*f,this._y=(s-l)*f,this._z=(o-i)*f}else if(r>a&&r>d){const f=2*Math.sqrt(1+r-a-d);this._w=(u-c)/f,this._x=.25*f,this._y=(i+o)/f,this._z=(s+l)/f}else if(a>d){const f=2*Math.sqrt(1+a-r-d);this._w=(s-l)/f,this._x=(i+o)/f,this._y=.25*f,this._z=(c+u)/f}else{const f=2*Math.sqrt(1+d-r-a);this._w=(o-i)/f,this._x=(s+l)/f,this._y=(c+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Cn(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,s=e._z,o=e._w,a=n._x,c=n._y,l=n._z,u=n._w;return this._x=r*u+o*a+i*l-s*c,this._y=i*u+o*c+s*a-r*l,this._z=s*u+o*l+r*c-i*a,this._w=o*u-r*a-i*c-s*l,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const c=1-a*a;if(c<=Number.EPSILON){const f=1-n;return this._w=f*o+n*this._w,this._x=f*r+n*this._x,this._y=f*i+n*this._y,this._z=f*s+n*this._z,this.normalize(),this}const l=Math.sqrt(c),u=Math.atan2(l,a),d=Math.sin((1-n)*u)/l,h=Math.sin(n*u)/l;return this._w=o*d+this._w*h,this._x=r*d+this._x*h,this._y=i*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(n),s*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ce{constructor(e=0,n=0,r=0){Ce.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(d6.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(d6.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*i,this.y=s[1]*n+s[4]*r+s[7]*i,this.z=s[2]*n+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*n+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*n+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,c=e.w,l=2*(o*i-a*r),u=2*(a*n-s*i),d=2*(s*r-o*n);return this.x=n+c*l+o*d-a*u,this.y=r+c*u+a*l-s*d,this.z=i+c*d+s*u-o*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i,this.y=s[1]*n+s[5]*r+s[9]*i,this.z=s[2]*n+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Cn(this.x,e.x,n.x),this.y=Cn(this.y,e.y,n.y),this.z=Cn(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=Cn(this.x,e,n),this.y=Cn(this.y,e,n),this.z=Cn(this.z,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Cn(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,s=e.z,o=n.x,a=n.y,c=n.z;return this.x=i*c-s*a,this.y=s*o-r*c,this.z=r*a-i*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return GC.copy(this).projectOnVector(e),this.sub(GC)}reflect(e){return this.sub(GC.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Cn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const GC=new Ce,d6=new ro;class Fs{constructor(e=new Ce(1/0,1/0,1/0),n=new Ce(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(Jl.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(Jl.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=Jl.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(n===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Jl):Jl.fromBufferAttribute(s,o),Jl.applyMatrix4(e.matrixWorld),this.expandByPoint(Jl);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),RS.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),RS.copy(r.boundingBox)),RS.applyMatrix4(e.matrixWorld),this.union(RS)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Jl),Jl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Nb),kS.subVectors(this.max,Nb),Y0.subVectors(e.a,Nb),Z0.subVectors(e.b,Nb),J0.subVectors(e.c,Nb),Rf.subVectors(Z0,Y0),kf.subVectors(J0,Z0),ip.subVectors(Y0,J0);let n=[0,-Rf.z,Rf.y,0,-kf.z,kf.y,0,-ip.z,ip.y,Rf.z,0,-Rf.x,kf.z,0,-kf.x,ip.z,0,-ip.x,-Rf.y,Rf.x,0,-kf.y,kf.x,0,-ip.y,ip.x,0];return!XC(n,Y0,Z0,J0,kS)||(n=[1,0,0,0,1,0,0,0,1],!XC(n,Y0,Z0,J0,kS))?!1:(OS.crossVectors(Rf,kf),n=[OS.x,OS.y,OS.z],XC(n,Y0,Z0,J0,kS))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Jl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Jl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Yu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Yu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Yu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Yu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Yu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Yu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Yu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Yu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Yu),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Yu=[new Ce,new Ce,new Ce,new Ce,new Ce,new Ce,new Ce,new Ce],Jl=new Ce,RS=new Fs,Y0=new Ce,Z0=new Ce,J0=new Ce,Rf=new Ce,kf=new Ce,ip=new Ce,Nb=new Ce,kS=new Ce,OS=new Ce,sp=new Ce;function XC(t,e,n,r,i){for(let s=0,o=t.length-3;s<=o;s+=3){sp.fromArray(t,s);const a=i.x*Math.abs(sp.x)+i.y*Math.abs(sp.y)+i.z*Math.abs(sp.z),c=e.dot(sp),l=n.dot(sp),u=r.dot(sp);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>a)return!1}return!0}const Bce=new Fs,Lb=new Ce,YC=new Ce;class io{constructor(e=new Ce,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):Bce.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Lb.subVectors(e,this.center);const n=Lb.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(Lb,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(YC.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Lb.copy(e.center).add(YC)),this.expandByPoint(Lb.copy(e.center).sub(YC))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Zu=new Ce,ZC=new Ce,NS=new Ce,Of=new Ce,JC=new Ce,LS=new Ce,QC=new Ce;class dv{constructor(e=new Ce,n=new Ce(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Zu)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Zu.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Zu.copy(this.origin).addScaledVector(this.direction,n),Zu.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){ZC.copy(e).add(n).multiplyScalar(.5),NS.copy(n).sub(e).normalize(),Of.copy(this.origin).sub(ZC);const s=e.distanceTo(n)*.5,o=-this.direction.dot(NS),a=Of.dot(this.direction),c=-Of.dot(NS),l=Of.lengthSq(),u=Math.abs(1-o*o);let d,h,f,p;if(u>0)if(d=o*c-a,h=o*a-c,p=s*u,d>=0)if(h>=-p)if(h<=p){const g=1/u;d*=g,h*=g,f=d*(d+o*h+2*a)+h*(o*d+h+2*c)+l}else h=s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*c)+l;else h=-s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*c)+l;else h<=-p?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-c),s),f=-d*d+h*(h+2*c)+l):h<=p?(d=0,h=Math.min(Math.max(-s,-c),s),f=h*(h+2*c)+l):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-c),s),f=-d*d+h*(h+2*c)+l);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*c)+l;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(ZC).addScaledVector(NS,h),f}intersectSphere(e,n){Zu.subVectors(e.center,this.origin);const r=Zu.dot(this.direction),i=Zu.dot(Zu)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,c=r+o;return c<0?null:a<0?this.at(c,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,s,o,a,c;const l=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return l>=0?(r=(e.min.x-h.x)*l,i=(e.max.x-h.x)*l):(r=(e.max.x-h.x)*l,i=(e.min.x-h.x)*l),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),d>=0?(a=(e.min.z-h.z)*d,c=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,c=(e.min.z-h.z)*d),r>c||a>i)||((a>r||r!==r)&&(r=a),(c<i||i!==i)&&(i=c),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Zu)!==null}intersectTriangle(e,n,r,i,s){JC.subVectors(n,e),LS.subVectors(r,e),QC.crossVectors(JC,LS);let o=this.direction.dot(QC),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Of.subVectors(this.origin,e);const c=a*this.direction.dot(LS.crossVectors(Of,LS));if(c<0)return null;const l=a*this.direction.dot(JC.cross(Of));if(l<0||c+l>o)return null;const u=-a*Of.dot(QC);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class vn{constructor(e,n,r,i,s,o,a,c,l,u,d,h,f,p,g,m){vn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,o,a,c,l,u,d,h,f,p,g,m)}set(e,n,r,i,s,o,a,c,l,u,d,h,f,p,g,m){const y=this.elements;return y[0]=e,y[4]=n,y[8]=r,y[12]=i,y[1]=s,y[5]=o,y[9]=a,y[13]=c,y[2]=l,y[6]=u,y[10]=d,y[14]=h,y[3]=f,y[7]=p,y[11]=g,y[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new vn().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/Q0.setFromMatrixColumn(e,0).length(),s=1/Q0.setFromMatrixColumn(e,1).length(),o=1/Q0.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),c=Math.cos(i),l=Math.sin(i),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const h=o*u,f=o*d,p=a*u,g=a*d;n[0]=c*u,n[4]=-c*d,n[8]=l,n[1]=f+p*l,n[5]=h-g*l,n[9]=-a*c,n[2]=g-h*l,n[6]=p+f*l,n[10]=o*c}else if(e.order==="YXZ"){const h=c*u,f=c*d,p=l*u,g=l*d;n[0]=h+g*a,n[4]=p*a-f,n[8]=o*l,n[1]=o*d,n[5]=o*u,n[9]=-a,n[2]=f*a-p,n[6]=g+h*a,n[10]=o*c}else if(e.order==="ZXY"){const h=c*u,f=c*d,p=l*u,g=l*d;n[0]=h-g*a,n[4]=-o*d,n[8]=p+f*a,n[1]=f+p*a,n[5]=o*u,n[9]=g-h*a,n[2]=-o*l,n[6]=a,n[10]=o*c}else if(e.order==="ZYX"){const h=o*u,f=o*d,p=a*u,g=a*d;n[0]=c*u,n[4]=p*l-f,n[8]=h*l+g,n[1]=c*d,n[5]=g*l+h,n[9]=f*l-p,n[2]=-l,n[6]=a*c,n[10]=o*c}else if(e.order==="YZX"){const h=o*c,f=o*l,p=a*c,g=a*l;n[0]=c*u,n[4]=g-h*d,n[8]=p*d+f,n[1]=d,n[5]=o*u,n[9]=-a*u,n[2]=-l*u,n[6]=f*d+p,n[10]=h-g*d}else if(e.order==="XZY"){const h=o*c,f=o*l,p=a*c,g=a*l;n[0]=c*u,n[4]=-d,n[8]=l*u,n[1]=h*d+g,n[5]=o*u,n[9]=f*d-p,n[2]=p*d-f,n[6]=a*u,n[10]=g*d+h}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Fce,e,Uce)}lookAt(e,n,r){const i=this.elements;return ga.subVectors(e,n),ga.lengthSq()===0&&(ga.z=1),ga.normalize(),Nf.crossVectors(r,ga),Nf.lengthSq()===0&&(Math.abs(r.z)===1?ga.x+=1e-4:ga.z+=1e-4,ga.normalize(),Nf.crossVectors(r,ga)),Nf.normalize(),DS.crossVectors(ga,Nf),i[0]=Nf.x,i[4]=DS.x,i[8]=ga.x,i[1]=Nf.y,i[5]=DS.y,i[9]=ga.y,i[2]=Nf.z,i[6]=DS.z,i[10]=ga.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[4],c=r[8],l=r[12],u=r[1],d=r[5],h=r[9],f=r[13],p=r[2],g=r[6],m=r[10],y=r[14],b=r[3],x=r[7],S=r[11],P=r[15],_=i[0],I=i[4],C=i[8],A=i[12],M=i[1],k=i[5],O=i[9],B=i[13],$=i[2],U=i[6],q=i[10],K=i[14],V=i[3],G=i[7],j=i[11],Q=i[15];return s[0]=o*_+a*M+c*$+l*V,s[4]=o*I+a*k+c*U+l*G,s[8]=o*C+a*O+c*q+l*j,s[12]=o*A+a*B+c*K+l*Q,s[1]=u*_+d*M+h*$+f*V,s[5]=u*I+d*k+h*U+f*G,s[9]=u*C+d*O+h*q+f*j,s[13]=u*A+d*B+h*K+f*Q,s[2]=p*_+g*M+m*$+y*V,s[6]=p*I+g*k+m*U+y*G,s[10]=p*C+g*O+m*q+y*j,s[14]=p*A+g*B+m*K+y*Q,s[3]=b*_+x*M+S*$+P*V,s[7]=b*I+x*k+S*U+P*G,s[11]=b*C+x*O+S*q+P*j,s[15]=b*A+x*B+S*K+P*Q,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],c=e[9],l=e[13],u=e[2],d=e[6],h=e[10],f=e[14],p=e[3],g=e[7],m=e[11],y=e[15];return p*(+s*c*d-i*l*d-s*a*h+r*l*h+i*a*f-r*c*f)+g*(+n*c*f-n*l*h+s*o*h-i*o*f+i*l*u-s*c*u)+m*(+n*l*d-n*a*f-s*o*d+r*o*f+s*a*u-r*l*u)+y*(-i*a*u-n*c*d+n*a*h+i*o*d-r*o*h+r*c*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],g=e[13],m=e[14],y=e[15],b=d*m*l-g*h*l+g*c*f-a*m*f-d*c*y+a*h*y,x=p*h*l-u*m*l-p*c*f+o*m*f+u*c*y-o*h*y,S=u*g*l-p*d*l+p*a*f-o*g*f-u*a*y+o*d*y,P=p*d*c-u*g*c-p*a*h+o*g*h+u*a*m-o*d*m,_=n*b+r*x+i*S+s*P;if(_===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const I=1/_;return e[0]=b*I,e[1]=(g*h*s-d*m*s-g*i*f+r*m*f+d*i*y-r*h*y)*I,e[2]=(a*m*s-g*c*s+g*i*l-r*m*l-a*i*y+r*c*y)*I,e[3]=(d*c*s-a*h*s-d*i*l+r*h*l+a*i*f-r*c*f)*I,e[4]=x*I,e[5]=(u*m*s-p*h*s+p*i*f-n*m*f-u*i*y+n*h*y)*I,e[6]=(p*c*s-o*m*s-p*i*l+n*m*l+o*i*y-n*c*y)*I,e[7]=(o*h*s-u*c*s+u*i*l-n*h*l-o*i*f+n*c*f)*I,e[8]=S*I,e[9]=(p*d*s-u*g*s-p*r*f+n*g*f+u*r*y-n*d*y)*I,e[10]=(o*g*s-p*a*s+p*r*l-n*g*l-o*r*y+n*a*y)*I,e[11]=(u*a*s-o*d*s-u*r*l+n*d*l+o*r*f-n*a*f)*I,e[12]=P*I,e[13]=(u*g*i-p*d*i+p*r*h-n*g*h-u*r*m+n*d*m)*I,e[14]=(p*a*i-o*g*i-p*r*c+n*g*c+o*r*m-n*a*m)*I,e[15]=(o*d*i-u*a*i+u*r*c-n*d*c-o*r*h+n*a*h)*I,this}scale(e){const n=this.elements,r=e.x,i=e.y,s=e.z;return n[0]*=r,n[4]*=i,n[8]*=s,n[1]*=r,n[5]*=i,n[9]*=s,n[2]*=r,n[6]*=i,n[10]*=s,n[3]*=r,n[7]*=i,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),s=1-r,o=e.x,a=e.y,c=e.z,l=s*o,u=s*a;return this.set(l*o+r,l*a-i*c,l*c+i*a,0,l*a+i*c,u*a+r,u*c-i*o,0,l*c-i*a,u*c+i*o,s*c*c+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,s=n._x,o=n._y,a=n._z,c=n._w,l=s+s,u=o+o,d=a+a,h=s*l,f=s*u,p=s*d,g=o*u,m=o*d,y=a*d,b=c*l,x=c*u,S=c*d,P=r.x,_=r.y,I=r.z;return i[0]=(1-(g+y))*P,i[1]=(f+S)*P,i[2]=(p-x)*P,i[3]=0,i[4]=(f-S)*_,i[5]=(1-(h+y))*_,i[6]=(m+b)*_,i[7]=0,i[8]=(p+x)*I,i[9]=(m-b)*I,i[10]=(1-(h+g))*I,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let s=Q0.set(i[0],i[1],i[2]).length();const o=Q0.set(i[4],i[5],i[6]).length(),a=Q0.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Ql.copy(this);const l=1/s,u=1/o,d=1/a;return Ql.elements[0]*=l,Ql.elements[1]*=l,Ql.elements[2]*=l,Ql.elements[4]*=u,Ql.elements[5]*=u,Ql.elements[6]*=u,Ql.elements[8]*=d,Ql.elements[9]*=d,Ql.elements[10]*=d,n.setFromRotationMatrix(Ql),r.x=s,r.y=o,r.z=a,this}makePerspective(e,n,r,i,s,o,a=gc){const c=this.elements,l=2*s/(n-e),u=2*s/(r-i),d=(n+e)/(n-e),h=(r+i)/(r-i);let f,p;if(a===gc)f=-(o+s)/(o-s),p=-2*o*s/(o-s);else if(a===pw)f=-o/(o-s),p=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return c[0]=l,c[4]=0,c[8]=d,c[12]=0,c[1]=0,c[5]=u,c[9]=h,c[13]=0,c[2]=0,c[6]=0,c[10]=f,c[14]=p,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,n,r,i,s,o,a=gc){const c=this.elements,l=1/(n-e),u=1/(r-i),d=1/(o-s),h=(n+e)*l,f=(r+i)*u;let p,g;if(a===gc)p=(o+s)*d,g=-2*d;else if(a===pw)p=s*d,g=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return c[0]=2*l,c[4]=0,c[8]=0,c[12]=-h,c[1]=0,c[5]=2*u,c[9]=0,c[13]=-f,c[2]=0,c[6]=0,c[10]=g,c[14]=-p,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const Q0=new Ce,Ql=new vn,Fce=new Ce(0,0,0),Uce=new Ce(1,1,1),Nf=new Ce,DS=new Ce,ga=new Ce,f6=new vn,h6=new ro;class La{constructor(e=0,n=0,r=0,i=La.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],c=i[1],l=i[5],u=i[9],d=i[2],h=i[6],f=i[10];switch(n){case"XYZ":this._y=Math.asin(Cn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Cn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Cn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-Cn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(Cn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-Cn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return f6.makeRotationFromQuaternion(e),this.setFromRotationMatrix(f6,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return h6.setFromEuler(this),this.setFromQuaternion(h6,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}La.DEFAULT_ORDER="XYZ";class Im{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let $ce=0;const p6=new Ce,eg=new ro,Ju=new vn,BS=new Ce,Db=new Ce,zce=new Ce,Hce=new ro,m6=new Ce(1,0,0),g6=new Ce(0,1,0),y6=new Ce(0,0,1),v6={type:"added"},Vce={type:"removed"},tg={type:"childadded",child:null},eM={type:"childremoved",child:null};class yr extends Tc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:$ce++}),this.uuid=ka(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=yr.DEFAULT_UP.clone();const e=new Ce,n=new La,r=new ro,i=new Ce(1,1,1);function s(){r.setFromEuler(n,!1)}function o(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new vn},normalMatrix:{value:new On}}),this.matrix=new vn,this.matrixWorld=new vn,this.matrixAutoUpdate=yr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=yr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Im,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return eg.setFromAxisAngle(e,n),this.quaternion.multiply(eg),this}rotateOnWorldAxis(e,n){return eg.setFromAxisAngle(e,n),this.quaternion.premultiply(eg),this}rotateX(e){return this.rotateOnAxis(m6,e)}rotateY(e){return this.rotateOnAxis(g6,e)}rotateZ(e){return this.rotateOnAxis(y6,e)}translateOnAxis(e,n){return p6.copy(e).applyQuaternion(this.quaternion),this.position.add(p6.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(m6,e)}translateY(e){return this.translateOnAxis(g6,e)}translateZ(e){return this.translateOnAxis(y6,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ju.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?BS.copy(e):BS.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Db.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ju.lookAt(Db,BS,this.up):Ju.lookAt(BS,Db,this.up),this.quaternion.setFromRotationMatrix(Ju),i&&(Ju.extractRotation(i.matrixWorld),eg.setFromRotationMatrix(Ju),this.quaternion.premultiply(eg.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(v6),tg.child=e,this.dispatchEvent(tg),tg.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Vce),eM.child=e,this.dispatchEvent(eM),eM.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ju.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ju.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ju),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(v6),tg.child=e,this.dispatchEvent(tg),tg.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Db,e,zce),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Db,Hce,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,c){return a[c.uuid]===void 0&&(a[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const c=a.shapes;if(Array.isArray(c))for(let l=0,u=c.length;l<u;l++){const d=c[l];s(e.shapes,d)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let c=0,l=this.material.length;c<l;c++)a.push(s(e.materials,this.material[c]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const c=this.animations[a];i.animations.push(s(e.animations,c))}}if(n){const a=o(e.geometries),c=o(e.materials),l=o(e.textures),u=o(e.images),d=o(e.shapes),h=o(e.skeletons),f=o(e.animations),p=o(e.nodes);a.length>0&&(r.geometries=a),c.length>0&&(r.materials=c),l.length>0&&(r.textures=l),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),h.length>0&&(r.skeletons=h),f.length>0&&(r.animations=f),p.length>0&&(r.nodes=p)}return r.object=i,r;function o(a){const c=[];for(const l in a){const u=a[l];delete u.metadata,c.push(u)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}yr.DEFAULT_UP=new Ce(0,1,0);yr.DEFAULT_MATRIX_AUTO_UPDATE=!0;yr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ec=new Ce,Qu=new Ce,tM=new Ce,ed=new Ce,ng=new Ce,rg=new Ce,b6=new Ce,nM=new Ce,rM=new Ce,iM=new Ce,sM=new gr,oM=new gr,aM=new gr;class Yo{constructor(e=new Ce,n=new Ce,r=new Ce){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),ec.subVectors(e,n),i.cross(ec);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,n,r,i,s){ec.subVectors(i,n),Qu.subVectors(r,n),tM.subVectors(e,n);const o=ec.dot(ec),a=ec.dot(Qu),c=ec.dot(tM),l=Qu.dot(Qu),u=Qu.dot(tM),d=o*l-a*a;if(d===0)return s.set(0,0,0),null;const h=1/d,f=(l*c-a*u)*h,p=(o*u-a*c)*h;return s.set(1-f-p,p,f)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,ed)===null?!1:ed.x>=0&&ed.y>=0&&ed.x+ed.y<=1}static getInterpolation(e,n,r,i,s,o,a,c){return this.getBarycoord(e,n,r,i,ed)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,ed.x),c.addScaledVector(o,ed.y),c.addScaledVector(a,ed.z),c)}static getInterpolatedAttribute(e,n,r,i,s,o){return sM.setScalar(0),oM.setScalar(0),aM.setScalar(0),sM.fromBufferAttribute(e,n),oM.fromBufferAttribute(e,r),aM.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(sM,s.x),o.addScaledVector(oM,s.y),o.addScaledVector(aM,s.z),o}static isFrontFacing(e,n,r,i){return ec.subVectors(r,n),Qu.subVectors(e,n),ec.cross(Qu).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ec.subVectors(this.c,this.b),Qu.subVectors(this.a,this.b),ec.cross(Qu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Yo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Yo.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,s){return Yo.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}containsPoint(e){return Yo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Yo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,s=this.c;let o,a;ng.subVectors(i,r),rg.subVectors(s,r),nM.subVectors(e,r);const c=ng.dot(nM),l=rg.dot(nM);if(c<=0&&l<=0)return n.copy(r);rM.subVectors(e,i);const u=ng.dot(rM),d=rg.dot(rM);if(u>=0&&d<=u)return n.copy(i);const h=c*d-u*l;if(h<=0&&c>=0&&u<=0)return o=c/(c-u),n.copy(r).addScaledVector(ng,o);iM.subVectors(e,s);const f=ng.dot(iM),p=rg.dot(iM);if(p>=0&&f<=p)return n.copy(s);const g=f*l-c*p;if(g<=0&&l>=0&&p<=0)return a=l/(l-p),n.copy(r).addScaledVector(rg,a);const m=u*p-f*d;if(m<=0&&d-u>=0&&f-p>=0)return b6.subVectors(s,i),a=(d-u)/(d-u+(f-p)),n.copy(i).addScaledVector(b6,a);const y=1/(m+g+h);return o=g*y,a=h*y,n.copy(r).addScaledVector(ng,o).addScaledVector(rg,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const qH={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Lf={h:0,s:0,l:0},FS={h:0,s:0,l:0};function lM(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class Wt{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Ko){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,lr.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=lr.workingColorSpace){return this.r=e,this.g=n,this.b=r,lr.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=lr.workingColorSpace){if(e=G3(e,1),n=Cn(n,0,1),r=Cn(r,0,1),n===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;this.r=lM(o,s,e+1/3),this.g=lM(o,s,e),this.b=lM(o,s,e-1/3)}return lr.toWorkingColorSpace(this,i),this}setStyle(e,n=Ko){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Ko){const r=qH[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ld(e.r),this.g=Ld(e.g),this.b=Ld(e.b),this}copyLinearToSRGB(e){return this.r=Ty(e.r),this.g=Ty(e.g),this.b=Ty(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ko){return lr.fromWorkingColorSpace(Ys.copy(this),e),Math.round(Cn(Ys.r*255,0,255))*65536+Math.round(Cn(Ys.g*255,0,255))*256+Math.round(Cn(Ys.b*255,0,255))}getHexString(e=Ko){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=lr.workingColorSpace){lr.fromWorkingColorSpace(Ys.copy(this),n);const r=Ys.r,i=Ys.g,s=Ys.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let c,l;const u=(a+o)/2;if(a===o)c=0,l=0;else{const d=o-a;switch(l=u<=.5?d/(o+a):d/(2-o-a),o){case r:c=(i-s)/d+(i<s?6:0);break;case i:c=(s-r)/d+2;break;case s:c=(r-i)/d+4;break}c/=6}return e.h=c,e.s=l,e.l=u,e}getRGB(e,n=lr.workingColorSpace){return lr.fromWorkingColorSpace(Ys.copy(this),n),e.r=Ys.r,e.g=Ys.g,e.b=Ys.b,e}getStyle(e=Ko){lr.fromWorkingColorSpace(Ys.copy(this),e);const n=Ys.r,r=Ys.g,i=Ys.b;return e!==Ko?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(Lf),this.setHSL(Lf.h+e,Lf.s+n,Lf.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(Lf),e.getHSL(FS);const r=Ux(Lf.h,FS.h,n),i=Ux(Lf.s,FS.s,n),s=Ux(Lf.l,FS.l,n);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*n+s[3]*r+s[6]*i,this.g=s[1]*n+s[4]*r+s[7]*i,this.b=s[2]*n+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ys=new Wt;Wt.NAMES=qH;let Wce=0;class Us extends Tc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Wce++}),this.uuid=ka(),this.name="",this.type="Material",this.blending=Em,this.side=Wd,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=e2,this.blendDst=t2,this.blendEquation=Xf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Wt(0,0,0),this.blendAlpha=0,this.depthFunc=Om,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=$R,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Zp,this.stencilZFail=Zp,this.stencilZPass=Zp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Em&&(r.blending=this.blending),this.side!==Wd&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==e2&&(r.blendSrc=this.blendSrc),this.blendDst!==t2&&(r.blendDst=this.blendDst),this.blendEquation!==Xf&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Om&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==$R&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Zp&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Zp&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Zp&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const c=s[a];delete c.metadata,o.push(c)}return o}if(n){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=n[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class dh extends Us{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Wt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new La,this.combine=Zw,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ed=jce();function jce(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let c=0;c<256;++c){const l=c-127;l<-27?(r[c]=0,r[c|256]=32768,i[c]=24,i[c|256]=24):l<-14?(r[c]=1024>>-l-14,r[c|256]=1024>>-l-14|32768,i[c]=-l-1,i[c|256]=-l-1):l<=15?(r[c]=l+15<<10,r[c|256]=l+15<<10|32768,i[c]=13,i[c|256]=13):l<128?(r[c]=31744,r[c|256]=64512,i[c]=24,i[c|256]=24):(r[c]=31744,r[c|256]=64512,i[c]=13,i[c|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let c=1;c<1024;++c){let l=c<<13,u=0;for(;(l&8388608)===0;)l<<=1,u-=8388608;l&=-8388609,u+=947912704,s[c]=l|u}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)o[c]=c<<23;o[31]=1199570944,o[32]=2147483648;for(let c=33;c<63;++c)o[c]=2147483648+(c-32<<23);o[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(a[c]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function jo(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Cn(t,-65504,65504),Ed.floatView[0]=t;const e=Ed.uint32View[0],n=e>>23&511;return Ed.baseTable[n]+((e&8388607)>>Ed.shiftTable[n])}function mx(t){const e=t>>10;return Ed.uint32View[0]=Ed.mantissaTable[Ed.offsetTable[e]+(t&1023)]+Ed.exponentTable[e],Ed.floatView[0]}class qce{static toHalfFloat(e){return jo(e)}static fromHalfFloat(e){return mx(e)}}const qi=new Ce,US=new St;let Kce=0;class _r{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Kce++}),this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=hw,this.updateRanges=[],this.gpuType=Zo,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)US.fromBufferAttribute(this,n),US.applyMatrix3(e),this.setXY(n,US.x,US.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)qi.fromBufferAttribute(this,n),qi.applyMatrix3(e),this.setXYZ(n,qi.x,qi.y,qi.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)qi.fromBufferAttribute(this,n),qi.applyMatrix4(e),this.setXYZ(n,qi.x,qi.y,qi.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)qi.fromBufferAttribute(this,n),qi.applyNormalMatrix(e),this.setXYZ(n,qi.x,qi.y,qi.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)qi.fromBufferAttribute(this,n),qi.transformDirection(e),this.setXYZ(n,qi.x,qi.y,qi.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=_o(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Bn(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=_o(n,this.array)),n}setX(e,n){return this.normalized&&(n=Bn(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=_o(n,this.array)),n}setY(e,n){return this.normalized&&(n=Bn(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=_o(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Bn(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=_o(n,this.array)),n}setW(e,n){return this.normalized&&(n=Bn(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Bn(n,this.array),r=Bn(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Bn(n,this.array),r=Bn(r,this.array),i=Bn(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=Bn(n,this.array),r=Bn(r,this.array),i=Bn(i,this.array),s=Bn(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==hw&&(e.usage=this.usage),e}}class Gce extends _r{constructor(e,n,r){super(new Int8Array(e),n,r)}}class Xce extends _r{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class Yce extends _r{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class Zce extends _r{constructor(e,n,r){super(new Int16Array(e),n,r)}}class X3 extends _r{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class Jce extends _r{constructor(e,n,r){super(new Int32Array(e),n,r)}}class Y3 extends _r{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class Qce extends _r{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}getX(e){let n=mx(this.array[e*this.itemSize]);return this.normalized&&(n=_o(n,this.array)),n}setX(e,n){return this.normalized&&(n=Bn(n,this.array)),this.array[e*this.itemSize]=jo(n),this}getY(e){let n=mx(this.array[e*this.itemSize+1]);return this.normalized&&(n=_o(n,this.array)),n}setY(e,n){return this.normalized&&(n=Bn(n,this.array)),this.array[e*this.itemSize+1]=jo(n),this}getZ(e){let n=mx(this.array[e*this.itemSize+2]);return this.normalized&&(n=_o(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Bn(n,this.array)),this.array[e*this.itemSize+2]=jo(n),this}getW(e){let n=mx(this.array[e*this.itemSize+3]);return this.normalized&&(n=_o(n,this.array)),n}setW(e,n){return this.normalized&&(n=Bn(n,this.array)),this.array[e*this.itemSize+3]=jo(n),this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Bn(n,this.array),r=Bn(r,this.array)),this.array[e+0]=jo(n),this.array[e+1]=jo(r),this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Bn(n,this.array),r=Bn(r,this.array),i=Bn(i,this.array)),this.array[e+0]=jo(n),this.array[e+1]=jo(r),this.array[e+2]=jo(i),this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=Bn(n,this.array),r=Bn(r,this.array),i=Bn(i,this.array),s=Bn(s,this.array)),this.array[e+0]=jo(n),this.array[e+1]=jo(r),this.array[e+2]=jo(i),this.array[e+3]=jo(s),this}}class tn extends _r{constructor(e,n,r){super(new Float32Array(e),n,r)}}let eue=0;const Ga=new vn,cM=new yr,ig=new Ce,ya=new Fs,Bb=new Fs,bs=new Ce;class Mn extends Tc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:eue++}),this.uuid=ka(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(VH(e)?Y3:X3)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new On().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ga.makeRotationFromQuaternion(e),this.applyMatrix4(Ga),this}rotateX(e){return Ga.makeRotationX(e),this.applyMatrix4(Ga),this}rotateY(e){return Ga.makeRotationY(e),this.applyMatrix4(Ga),this}rotateZ(e){return Ga.makeRotationZ(e),this.applyMatrix4(Ga),this}translate(e,n,r){return Ga.makeTranslation(e,n,r),this.applyMatrix4(Ga),this}scale(e,n,r){return Ga.makeScale(e,n,r),this.applyMatrix4(Ga),this}lookAt(e){return cM.lookAt(e),cM.updateMatrix(),this.applyMatrix4(cM.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ig).negate(),this.translate(ig.x,ig.y,ig.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const r=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];r.push(o.x,o.y,o.z||0)}this.setAttribute("position",new tn(r,3))}else{const r=Math.min(e.length,n.count);for(let i=0;i<r;i++){const s=e[i];n.setXYZ(i,s.x,s.y,s.z||0)}e.length>n.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Fs);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Ce(-1/0,-1/0,-1/0),new Ce(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const s=n[r];ya.setFromBufferAttribute(s),this.morphTargetsRelative?(bs.addVectors(this.boundingBox.min,ya.min),this.boundingBox.expandByPoint(bs),bs.addVectors(this.boundingBox.max,ya.max),this.boundingBox.expandByPoint(bs)):(this.boundingBox.expandByPoint(ya.min),this.boundingBox.expandByPoint(ya.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new io);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Ce,1/0);return}if(e){const r=this.boundingSphere.center;if(ya.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];Bb.setFromBufferAttribute(a),this.morphTargetsRelative?(bs.addVectors(ya.min,Bb.min),ya.expandByPoint(bs),bs.addVectors(ya.max,Bb.max),ya.expandByPoint(bs)):(ya.expandByPoint(Bb.min),ya.expandByPoint(Bb.max))}ya.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)bs.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(bs));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],c=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)bs.fromBufferAttribute(a,l),c&&(ig.fromBufferAttribute(e,l),bs.add(ig)),i=Math.max(i,r.distanceToSquared(bs))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,i=n.normal,s=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new _r(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),a=[],c=[];for(let C=0;C<r.count;C++)a[C]=new Ce,c[C]=new Ce;const l=new Ce,u=new Ce,d=new Ce,h=new St,f=new St,p=new St,g=new Ce,m=new Ce;function y(C,A,M){l.fromBufferAttribute(r,C),u.fromBufferAttribute(r,A),d.fromBufferAttribute(r,M),h.fromBufferAttribute(s,C),f.fromBufferAttribute(s,A),p.fromBufferAttribute(s,M),u.sub(l),d.sub(l),f.sub(h),p.sub(h);const k=1/(f.x*p.y-p.x*f.y);isFinite(k)&&(g.copy(u).multiplyScalar(p.y).addScaledVector(d,-f.y).multiplyScalar(k),m.copy(d).multiplyScalar(f.x).addScaledVector(u,-p.x).multiplyScalar(k),a[C].add(g),a[A].add(g),a[M].add(g),c[C].add(m),c[A].add(m),c[M].add(m))}let b=this.groups;b.length===0&&(b=[{start:0,count:e.count}]);for(let C=0,A=b.length;C<A;++C){const M=b[C],k=M.start,O=M.count;for(let B=k,$=k+O;B<$;B+=3)y(e.getX(B+0),e.getX(B+1),e.getX(B+2))}const x=new Ce,S=new Ce,P=new Ce,_=new Ce;function I(C){P.fromBufferAttribute(i,C),_.copy(P);const A=a[C];x.copy(A),x.sub(P.multiplyScalar(P.dot(A))).normalize(),S.crossVectors(_,A);const k=S.dot(c[C])<0?-1:1;o.setXYZW(C,x.x,x.y,x.z,k)}for(let C=0,A=b.length;C<A;++C){const M=b[C],k=M.start,O=M.count;for(let B=k,$=k+O;B<$;B+=3)I(e.getX(B+0)),I(e.getX(B+1)),I(e.getX(B+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new _r(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let h=0,f=r.count;h<f;h++)r.setXYZ(h,0,0,0);const i=new Ce,s=new Ce,o=new Ce,a=new Ce,c=new Ce,l=new Ce,u=new Ce,d=new Ce;if(e)for(let h=0,f=e.count;h<f;h+=3){const p=e.getX(h+0),g=e.getX(h+1),m=e.getX(h+2);i.fromBufferAttribute(n,p),s.fromBufferAttribute(n,g),o.fromBufferAttribute(n,m),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),a.fromBufferAttribute(r,p),c.fromBufferAttribute(r,g),l.fromBufferAttribute(r,m),a.add(u),c.add(u),l.add(u),r.setXYZ(p,a.x,a.y,a.z),r.setXYZ(g,c.x,c.y,c.z),r.setXYZ(m,l.x,l.y,l.z)}else for(let h=0,f=n.count;h<f;h+=3)i.fromBufferAttribute(n,h+0),s.fromBufferAttribute(n,h+1),o.fromBufferAttribute(n,h+2),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),r.setXYZ(h+0,u.x,u.y,u.z),r.setXYZ(h+1,u.x,u.y,u.z),r.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)bs.fromBufferAttribute(e,n),bs.normalize(),e.setXYZ(n,bs.x,bs.y,bs.z)}toNonIndexed(){function e(a,c){const l=a.array,u=a.itemSize,d=a.normalized,h=new l.constructor(c.length*u);let f=0,p=0;for(let g=0,m=c.length;g<m;g++){a.isInterleavedBufferAttribute?f=c[g]*a.data.stride+a.offset:f=c[g]*u;for(let y=0;y<u;y++)h[p++]=l[f++]}return new _r(h,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Mn,r=this.index.array,i=this.attributes;for(const a in i){const c=i[a],l=e(c,r);n.setAttribute(a,l)}const s=this.morphAttributes;for(const a in s){const c=[],l=s[a];for(let u=0,d=l.length;u<d;u++){const h=l[u],f=e(h,r);c.push(f)}n.morphAttributes[a]=c}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,c=o.length;a<c;a++){const l=o[a];n.addGroup(l.start,l.count,l.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const l in c)c[l]!==void 0&&(e[l]=c[l]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const c in r){const l=r[c];e.data.attributes[c]=l.toJSON(e.data)}const i={};let s=!1;for(const c in this.morphAttributes){const l=this.morphAttributes[c],u=[];for(let d=0,h=l.length;d<h;d++){const f=l[d];u.push(f.toJSON(e.data))}u.length>0&&(i[c]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone());const i=e.attributes;for(const l in i){const u=i[l];this.setAttribute(l,u.clone(n))}const s=e.morphAttributes;for(const l in s){const u=[],d=s[l];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(n));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,u=o.length;l<u;l++){const d=o[l];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const x6=new vn,op=new dv,$S=new io,w6=new Ce,zS=new Ce,HS=new Ce,VS=new Ce,uM=new Ce,WS=new Ce,_6=new Ce,jS=new Ce;class Xi extends yr{constructor(e=new Mn,n=new dh){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){WS.set(0,0,0);for(let c=0,l=s.length;c<l;c++){const u=a[c],d=s[c];u!==0&&(uM.fromBufferAttribute(d,e),o?WS.addScaledVector(uM,u):WS.addScaledVector(uM.sub(n),u))}n.add(WS)}return n}raycast(e,n){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),$S.copy(r.boundingSphere),$S.applyMatrix4(s),op.copy(e.ray).recast(e.near),!($S.containsPoint(op.origin)===!1&&(op.intersectSphere($S,w6)===null||op.origin.distanceToSquared(w6)>(e.far-e.near)**2))&&(x6.copy(s).invert(),op.copy(e.ray).applyMatrix4(x6),!(r.boundingBox!==null&&op.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,op)))}_computeIntersections(e,n,r){let i;const s=this.geometry,o=this.material,a=s.index,c=s.attributes.position,l=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,h=s.groups,f=s.drawRange;if(a!==null)if(Array.isArray(o))for(let p=0,g=h.length;p<g;p++){const m=h[p],y=o[m.materialIndex],b=Math.max(m.start,f.start),x=Math.min(a.count,Math.min(m.start+m.count,f.start+f.count));for(let S=b,P=x;S<P;S+=3){const _=a.getX(S),I=a.getX(S+1),C=a.getX(S+2);i=qS(this,y,e,r,l,u,d,_,I,C),i&&(i.faceIndex=Math.floor(S/3),i.face.materialIndex=m.materialIndex,n.push(i))}}else{const p=Math.max(0,f.start),g=Math.min(a.count,f.start+f.count);for(let m=p,y=g;m<y;m+=3){const b=a.getX(m),x=a.getX(m+1),S=a.getX(m+2);i=qS(this,o,e,r,l,u,d,b,x,S),i&&(i.faceIndex=Math.floor(m/3),n.push(i))}}else if(c!==void 0)if(Array.isArray(o))for(let p=0,g=h.length;p<g;p++){const m=h[p],y=o[m.materialIndex],b=Math.max(m.start,f.start),x=Math.min(c.count,Math.min(m.start+m.count,f.start+f.count));for(let S=b,P=x;S<P;S+=3){const _=S,I=S+1,C=S+2;i=qS(this,y,e,r,l,u,d,_,I,C),i&&(i.faceIndex=Math.floor(S/3),i.face.materialIndex=m.materialIndex,n.push(i))}}else{const p=Math.max(0,f.start),g=Math.min(c.count,f.start+f.count);for(let m=p,y=g;m<y;m+=3){const b=m,x=m+1,S=m+2;i=qS(this,o,e,r,l,u,d,b,x,S),i&&(i.faceIndex=Math.floor(m/3),n.push(i))}}}}function tue(t,e,n,r,i,s,o,a){let c;if(e.side===Eo?c=r.intersectTriangle(o,s,i,!0,a):c=r.intersectTriangle(i,s,o,e.side===Wd,a),c===null)return null;jS.copy(a),jS.applyMatrix4(t.matrixWorld);const l=n.ray.origin.distanceTo(jS);return l<n.near||l>n.far?null:{distance:l,point:jS.clone(),object:t}}function qS(t,e,n,r,i,s,o,a,c,l){t.getVertexPosition(a,zS),t.getVertexPosition(c,HS),t.getVertexPosition(l,VS);const u=tue(t,e,n,r,zS,HS,VS,_6);if(u){const d=new Ce;Yo.getBarycoord(_6,zS,HS,VS,d),i&&(u.uv=Yo.getInterpolatedAttribute(i,a,c,l,d,new St)),s&&(u.uv1=Yo.getInterpolatedAttribute(s,a,c,l,d,new St)),o&&(u.normal=Yo.getInterpolatedAttribute(o,a,c,l,d,new Ce),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const h={a,b:c,c:l,normal:new Ce,materialIndex:0};Yo.getNormal(zS,HS,VS,h.normal),u.face=h,u.barycoord=d}return u}class $m extends Mn{constructor(e=1,n=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const c=[],l=[],u=[],d=[];let h=0,f=0;p("z","y","x",-1,-1,r,n,e,o,s,0),p("z","y","x",1,-1,r,n,-e,o,s,1),p("x","z","y",1,1,e,r,n,i,o,2),p("x","z","y",1,-1,e,r,-n,i,o,3),p("x","y","z",1,-1,e,n,r,i,s,4),p("x","y","z",-1,-1,e,n,-r,i,s,5),this.setIndex(c),this.setAttribute("position",new tn(l,3)),this.setAttribute("normal",new tn(u,3)),this.setAttribute("uv",new tn(d,2));function p(g,m,y,b,x,S,P,_,I,C,A){const M=S/I,k=P/C,O=S/2,B=P/2,$=_/2,U=I+1,q=C+1;let K=0,V=0;const G=new Ce;for(let j=0;j<q;j++){const Q=j*k-B;for(let se=0;se<U;se++){const Z=se*M-O;G[g]=Z*b,G[m]=Q*x,G[y]=$,l.push(G.x,G.y,G.z),G[g]=0,G[m]=0,G[y]=_>0?1:-1,u.push(G.x,G.y,G.z),d.push(se/I),d.push(1-j/C),K+=1}}for(let j=0;j<C;j++)for(let Q=0;Q<I;Q++){const se=h+Q+U*j,Z=h+Q+U*(j+1),ie=h+(Q+1)+U*(j+1),pe=h+(Q+1)+U*j;c.push(se,Z,pe),c.push(Z,ie,pe),V+=6}a.addGroup(f,V,A),f+=V,h+=K}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $m(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function qy(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function wo(t){const e={};for(let n=0;n<t.length;n++){const r=qy(t[n]);for(const i in r)e[i]=r[i]}return e}function nue(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function KH(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:lr.workingColorSpace}const GH={clone:qy,merge:wo};var rue=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,iue=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class wc extends Us{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=rue,this.fragmentShader=iue,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=qy(e.uniforms),this.uniformsGroups=nue(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?n.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[i]={type:"m4",value:o.toArray()}:n.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}let e_=class extends yr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new vn,this.projectionMatrix=new vn,this.projectionMatrixInverse=new vn,this.coordinateSystem=gc}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}};const Df=new Ce,S6=new St,E6=new St;class li extends e_{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=jy*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Tm*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return jy*2*Math.atan(Math.tan(Tm*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){Df.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Df.x,Df.y).multiplyScalar(-e/Df.z),Df.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Df.x,Df.y).multiplyScalar(-e/Df.z)}getViewSize(e,n){return this.getViewBounds(e,S6,E6),n.subVectors(E6,S6)}setViewOffset(e,n,r,i,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(Tm*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const c=o.fullWidth,l=o.fullHeight;s+=o.offsetX*i/c,n-=o.offsetY*r/l,i*=o.width/c,r*=o.height/l}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const sg=-90,og=1;class XH extends yr{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new li(sg,og,e,n);i.layers=this.layers,this.add(i);const s=new li(sg,og,e,n);s.layers=this.layers,this.add(s);const o=new li(sg,og,e,n);o.layers=this.layers,this.add(o);const a=new li(sg,og,e,n);a.layers=this.layers,this.add(a);const c=new li(sg,og,e,n);c.layers=this.layers,this.add(c);const l=new li(sg,og,e,n);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,s,o,a,c]=n;for(const l of n)this.remove(l);if(e===gc)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===pw)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const l of n)this.add(l),l.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,c,l,u]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const g=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,s),e.setRenderTarget(r,1,i),e.render(n,o),e.setRenderTarget(r,2,i),e.render(n,a),e.setRenderTarget(r,3,i),e.render(n,c),e.setRenderTarget(r,4,i),e.render(n,l),r.texture.generateMipmaps=g,e.setRenderTarget(r,5,i),e.render(n,u),e.setRenderTarget(d,h,f),e.xr.enabled=p,r.texture.needsPMREMUpdate=!0}}class t_ extends vi{constructor(e=[],n=jd,r,i,s,o,a,c,l,u){super(e,n,r,i,s,o,a,c,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class YH extends au{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new t_(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:cs}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new $m(5,5,5),s=new wc({name:"CubemapFromEquirect",uniforms:qy(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Eo,blending:Nd});s.uniforms.tEquirect.value=n;const o=new Xi(i,s),a=n.minFilter;return n.minFilter===Yc&&(n.minFilter=cs),new XH(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n=!0,r=!0,i=!0){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,r,i);e.setRenderTarget(s)}}class py extends yr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const sue={type:"move"};class MT{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new py,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new py,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ce,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ce),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new py,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ce,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ce),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,s=null,o=null;const a=this._targetRay,c=this._grip,l=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(l&&e.hand){o=!0;for(const g of e.hand.values()){const m=n.getJointPose(g,r),y=this._getHandJoint(l,g);m!==null&&(y.matrix.fromArray(m.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.matrixWorldNeedsUpdate=!0,y.jointRadius=m.radius),y.visible=m!==null}const u=l.joints["index-finger-tip"],d=l.joints["thumb-tip"],h=u.position.distanceTo(d.position),f=.02,p=.005;l.inputState.pinching&&h>f+p?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&h<=f-p&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,r),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));a!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(sue)))}return a!==null&&(a.visible=i!==null),c!==null&&(c.visible=s!==null),l!==null&&(l.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new py;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class YI{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new Wt(e),this.density=n}clone(){return new YI(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class ZI{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new Wt(e),this.near=n,this.far=r}clone(){return new ZI(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class D2 extends yr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new La,this.environmentIntensity=1,this.environmentRotation=new La,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class JI{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=hw,this.updateRanges=[],this.version=0,this.uuid=ka()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ka()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ka()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const xo=new Ce;class Lm{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)xo.fromBufferAttribute(this,n),xo.applyMatrix4(e),this.setXYZ(n,xo.x,xo.y,xo.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)xo.fromBufferAttribute(this,n),xo.applyNormalMatrix(e),this.setXYZ(n,xo.x,xo.y,xo.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)xo.fromBufferAttribute(this,n),xo.transformDirection(e),this.setXYZ(n,xo.x,xo.y,xo.z);return this}getComponent(e,n){let r=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(r=_o(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Bn(r,this.array)),this.data.array[e*this.data.stride+this.offset+n]=r,this}setX(e,n){return this.normalized&&(n=Bn(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Bn(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Bn(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Bn(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=_o(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=_o(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=_o(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=_o(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=Bn(n,this.array),r=Bn(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=Bn(n,this.array),r=Bn(r,this.array),i=Bn(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=Bn(n,this.array),r=Bn(r,this.array),i=Bn(i,this.array),s=Bn(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return new _r(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Lm(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Z3 extends Us{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Wt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let ag;const Fb=new Ce,lg=new Ce,cg=new Ce,ug=new St,Ub=new St,ZH=new vn,KS=new Ce,$b=new Ce,GS=new Ce,T6=new St,dM=new St,I6=new St;class JH extends yr{constructor(e=new Z3){if(super(),this.isSprite=!0,this.type="Sprite",ag===void 0){ag=new Mn;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new JI(n,5);ag.setIndex([0,1,2,0,2,3]),ag.setAttribute("position",new Lm(r,3,0,!1)),ag.setAttribute("uv",new Lm(r,2,3,!1))}this.geometry=ag,this.material=e,this.center=new St(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),lg.setFromMatrixScale(this.matrixWorld),ZH.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),cg.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&lg.multiplyScalar(-cg.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;XS(KS.set(-.5,-.5,0),cg,o,lg,i,s),XS($b.set(.5,-.5,0),cg,o,lg,i,s),XS(GS.set(.5,.5,0),cg,o,lg,i,s),T6.set(0,0),dM.set(1,0),I6.set(1,1);let a=e.ray.intersectTriangle(KS,$b,GS,!1,Fb);if(a===null&&(XS($b.set(-.5,.5,0),cg,o,lg,i,s),dM.set(0,1),a=e.ray.intersectTriangle(KS,GS,$b,!1,Fb),a===null))return;const c=e.ray.origin.distanceTo(Fb);c<e.near||c>e.far||n.push({distance:c,point:Fb.clone(),uv:Yo.getInterpolation(Fb,KS,$b,GS,T6,dM,I6,new St),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function XS(t,e,n,r,i,s){ug.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(Ub.x=s*ug.x-i*ug.y,Ub.y=i*ug.x+s*ug.y):Ub.copy(ug),t.copy(e),t.x+=Ub.x,t.y+=Ub.y,t.applyMatrix4(ZH)}const YS=new Ce,P6=new Ce;class QH extends yr{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const i=this.levels;let s;for(s=0;s<i.length&&!(n<i[s].distance);s++);return i.splice(s,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}removeLevel(e){const n=this.levels;for(let r=0;r<n.length;r++)if(n[r].distance===e){const i=n.splice(r,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i;r++){let s=n[r].distance;if(n[r].object.visible&&(s-=s*n[r].hysteresis),e<s)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){YS.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(YS);this.getObjectForDistance(i).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){YS.setFromMatrixPosition(e.matrixWorld),P6.setFromMatrixPosition(this.matrixWorld);const r=YS.distanceTo(P6)/e.zoom;n[0].object.visible=!0;let i,s;for(i=1,s=n.length;i<s;i++){let o=n[i].distance;if(n[i].object.visible&&(o-=o*n[i].hysteresis),r>=o)n[i-1].object.visible=!1,n[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)n[i].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];n.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return n}}const C6=new Ce,M6=new gr,A6=new gr,oue=new Ce,R6=new vn,ZS=new Ce,fM=new io,k6=new vn,hM=new dv;class eV extends Xi{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=UR,this.bindMatrix=new vn,this.bindMatrixInverse=new vn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Fs),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,ZS),this.boundingBox.expandByPoint(ZS)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new io),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,ZS),this.boundingSphere.expandByPoint(ZS)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),fM.copy(this.boundingSphere),fM.applyMatrix4(i),e.ray.intersectsSphere(fM)!==!1&&(k6.copy(i).invert(),hM.copy(e.ray).applyMatrix4(k6),!(this.boundingBox!==null&&hM.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,hM)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new gr,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===UR?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===MH?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;M6.fromBufferAttribute(i.attributes.skinIndex,e),A6.fromBufferAttribute(i.attributes.skinWeight,e),C6.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=A6.getComponent(s);if(o!==0){const a=M6.getComponent(s);R6.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),n.addScaledVector(oue.copy(C6).applyMatrix4(R6),o)}}return n.applyMatrix4(this.bindMatrixInverse)}}class J3 extends yr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class tu extends vi{constructor(e=null,n=1,r=1,i,s,o,a,c,l=Bs,u=Bs,d,h){super(null,o,a,c,l,u,i,s,d,h),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const O6=new vn,aue=new vn;let tV=class nV{constructor(e=[],n=[]){this.uuid=ka(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new vn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new vn;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:aue;O6.multiplyMatrices(a,n[s]),O6.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new nV(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new tu(n,e,e,to,Zo);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new J3),this.bones.push(o),this.boneInverses.push(new vn().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,s=n.length;i<s;i++){const o=n[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}};class Ky extends _r{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const dg=new vn,N6=new vn,JS=[],L6=new Fs,lue=new vn,zb=new Xi,Hb=new io;class rV extends Xi{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new Ky(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,lue)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new Fs),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,dg),L6.copy(e.boundingBox).applyMatrix4(dg),this.boundingBox.union(L6)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new io),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,dg),Hb.copy(e.boundingSphere).applyMatrix4(dg),this.boundingSphere.union(Hb)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const r=n.morphTargetInfluences,i=this.morphTexture.source.data.data,s=r.length+1,o=e*s+1;for(let a=0;a<r.length;a++)r[a]=i[o+a]}raycast(e,n){const r=this.matrixWorld,i=this.count;if(zb.geometry=this.geometry,zb.material=this.material,zb.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Hb.copy(this.boundingSphere),Hb.applyMatrix4(r),e.ray.intersectsSphere(Hb)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,dg),N6.multiplyMatrices(r,dg),zb.matrixWorld=N6,zb.raycast(e,JS);for(let o=0,a=JS.length;o<a;o++){const c=JS[o];c.instanceId=s,c.object=this,n.push(c)}JS.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new Ky(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const r=n.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new tu(new Float32Array(i*this.count),i,this.count,WI,Zo));const s=this.morphTexture.source.data.data;let o=0;for(let l=0;l<r.length;l++)o+=r[l];const a=this.geometry.morphTargetsRelative?1:1-o,c=i*e;s[c]=a,s.set(r,c+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const pM=new Ce,cue=new Ce,uue=new On;class Kf{constructor(e=new Ce(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=pM.subVectors(r,n).cross(cue.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(pM),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:n.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||uue.getNormalMatrix(e),i=this.coplanarPoint(pM).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ap=new io,QS=new Ce;class n_{constructor(e=new Kf,n=new Kf,r=new Kf,i=new Kf,s=new Kf,o=new Kf){this.planes=[e,n,r,i,s,o]}set(e,n,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=gc){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],c=i[3],l=i[4],u=i[5],d=i[6],h=i[7],f=i[8],p=i[9],g=i[10],m=i[11],y=i[12],b=i[13],x=i[14],S=i[15];if(r[0].setComponents(c-s,h-l,m-f,S-y).normalize(),r[1].setComponents(c+s,h+l,m+f,S+y).normalize(),r[2].setComponents(c+o,h+u,m+p,S+b).normalize(),r[3].setComponents(c-o,h-u,m-p,S-b).normalize(),r[4].setComponents(c-a,h-d,m-g,S-x).normalize(),n===gc)r[5].setComponents(c+a,h+d,m+g,S+x).normalize();else if(n===pw)r[5].setComponents(a,d,g,x).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),ap.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),ap.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ap)}intersectsSprite(e){return ap.center.set(0,0,0),ap.radius=.7071067811865476,ap.applyMatrix4(e.matrixWorld),this.intersectsSphere(ap)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(QS.x=i.normal.x>0?e.max.x:e.min.x,QS.y=i.normal.y>0?e.max.y:e.min.y,QS.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(QS)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function mM(t,e){return t-e}function due(t,e){return t.z-e.z}function fue(t,e){return e.z-t.z}class hue{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n,r,i){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=e,a.count=n,a.z=r,a.index=i}reset(){this.list.length=0,this.index=0}}const Vo=new vn,pue=new Wt(1,1,1),gM=new n_,eE=new Fs,lp=new io,Vb=new Ce,D6=new Ce,mue=new Ce,yM=new hue,Zs=new Xi,tE=[];function gue(t,e,n=0){const r=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const i=t.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+n,o,t.getComponent(s,o))}else e.array.set(t.array,n*r);e.needsUpdate=!0}function cp(t,e){if(t.constructor!==e.constructor){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++)e[r]=t[r]}else{const n=Math.min(t.length,e.length);e.set(new t.constructor(t.buffer,0,n))}}class iV extends Xi{constructor(e,n,r=n*2,i){super(new Mn,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=n,this._maxIndexCount=r,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),r=new tu(n,e,e,to,Zo);this._matricesTexture=r}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Uint32Array(e*e),r=new tu(n,e,e,Jw,qd);this._indirectTexture=r}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Float32Array(e*e*4).fill(1),r=new tu(n,e,e,to,Zo);r.colorSpace=lr.workingColorSpace,this._colorsTexture=r}_initializeGeometry(e){const n=this.geometry,r=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:c,normalized:l}=o,u=new a.constructor(r*c),d=new _r(u,c,l);n.setAttribute(s,d)}if(e.getIndex()!==null){const s=r>65535?new Uint32Array(i):new Uint16Array(i);n.setIndex(new _r(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const r in n.attributes){if(!e.hasAttribute(r))throw new Error(`THREE.BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=n.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const n=this._instanceInfo;if(e<0||e>=n.length||n[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const n=this._geometryInfo;if(e<0||e>=n.length||n[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Fs);const e=this.boundingBox,n=this._instanceInfo;e.makeEmpty();for(let r=0,i=n.length;r<i;r++){if(n[r].active===!1)continue;const s=n[r].geometryIndex;this.getMatrixAt(r,Vo),this.getBoundingBoxAt(s,eE).applyMatrix4(Vo),e.union(eE)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new io);const e=this.boundingSphere,n=this._instanceInfo;e.makeEmpty();for(let r=0,i=n.length;r<i;r++){if(n[r].active===!1)continue;const s=n[r].geometryIndex;this.getMatrixAt(r,Vo),this.getBoundingSphereAt(s,lp).applyMatrix4(Vo),e.union(lp)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const r={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(mM),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=r):(i=this._instanceInfo.length,this._instanceInfo.push(r));const s=this._matricesTexture;Vo.identity().toArray(s.image.data,i*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(pue.toArray(o.image.data,i*4),o.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,n=-1,r=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=n===-1?e.getAttribute("position").count:n;const o=e.getIndex();if(o!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=r===-1?o.count:r),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let c;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(mM),c=this._availableGeometryIds.shift(),s[c]=i):(c=this._geometryCount,this._geometryCount++,s.push(i)),this.setGeometryAt(c,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,c}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=n.getIndex(),a=this._geometryInfo[e];if(i&&o.count>a.reservedIndexCount||n.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const c=a.vertexStart,l=a.reservedVertexCount;a.vertexCount=n.getAttribute("position").count;for(const u in r.attributes){const d=n.getAttribute(u),h=r.getAttribute(u);gue(d,h,c);const f=d.itemSize;for(let p=d.count,g=l;p<g;p++){const m=c+p;for(let y=0;y<f;y++)h.setComponent(m,y,0)}h.needsUpdate=!0,h.addUpdateRange(c*f,l*f)}if(i){const u=a.indexStart,d=a.reservedIndexCount;a.indexCount=n.getIndex().count;for(let h=0;h<o.count;h++)s.setX(u+h,c+o.getX(h));for(let h=o.count,f=d;h<f;h++)s.setX(u+h,c);s.needsUpdate=!0,s.addUpdateRange(u,a.reservedIndexCount)}return a.start=i?a.indexStart:a.vertexStart,a.count=i?a.indexCount:a.vertexCount,a.boundingBox=null,n.boundingBox!==null&&(a.boundingBox=n.boundingBox.clone()),a.boundingSphere=null,n.boundingSphere!==null&&(a.boundingSphere=n.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._geometryInfo;if(e>=n.length||n[e].active===!1)return this;const r=this._instanceInfo;for(let i=0,s=r.length;i<s;i++)r[i].active&&r[i].geometryIndex===e&&this.deleteInstance(i);return n[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,n=0;const r=this._geometryInfo,i=r.map((o,a)=>a).sort((o,a)=>r[o].vertexStart-r[a].vertexStart),s=this.geometry;for(let o=0,a=r.length;o<a;o++){const c=i[o],l=r[c];if(l.active!==!1){if(s.index!==null){if(l.indexStart!==n){const{indexStart:u,vertexStart:d,reservedIndexCount:h}=l,f=s.index,p=f.array,g=e-d;for(let m=u;m<u+h;m++)p[m]=p[m]+g;f.array.copyWithin(n,u,u+h),f.addUpdateRange(n,h),l.indexStart=n}n+=l.reservedIndexCount}if(l.vertexStart!==e){const{vertexStart:u,reservedVertexCount:d}=l,h=s.attributes;for(const f in h){const p=h[f],{array:g,itemSize:m}=p;g.copyWithin(e*m,u*m,(u+d)*m),p.addUpdateRange(e*m,d*m)}l.vertexStart=e}e+=l.reservedVertexCount,l.start=s.index?l.indexStart:l.vertexStart,this._nextIndexStart=s.index?l.indexStart+l.reservedIndexCount:0,this._nextVertexStart=l.vertexStart+l.reservedVertexCount}}return this}getBoundingBoxAt(e,n){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const s=new Fs,o=r.index,a=r.attributes.position;for(let c=i.start,l=i.start+i.count;c<l;c++){let u=c;o&&(u=o.getX(u)),s.expandByPoint(Vb.fromBufferAttribute(a,u))}i.boundingBox=s}return n.copy(i.boundingBox),n}getBoundingSphereAt(e,n){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const s=new io;this.getBoundingBoxAt(e,eE),eE.getCenter(s.center);const o=r.index,a=r.attributes.position;let c=0;for(let l=i.start,u=i.start+i.count;l<u;l++){let d=l;o&&(d=o.getX(d)),Vb.fromBufferAttribute(a,d),c=Math.max(c,s.center.distanceToSquared(Vb))}s.radius=Math.sqrt(c),i.boundingSphere=s}return n.copy(i.boundingSphere),n}setMatrixAt(e,n){this.validateInstanceId(e);const r=this._matricesTexture,i=this._matricesTexture.image.data;return n.toArray(i,e*16),r.needsUpdate=!0,this}getMatrixAt(e,n){return this.validateInstanceId(e),n.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,n){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),n.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,n){return this.validateInstanceId(e),n.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,n){return this.validateInstanceId(e),this._instanceInfo[e].visible===n?this:(this._instanceInfo[e].visible=n,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,n){return this.validateInstanceId(e),this.validateGeometryId(n),this._instanceInfo[e].geometryIndex=n,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,n={}){this.validateGeometryId(e);const r=this._geometryInfo[e];return n.vertexStart=r.vertexStart,n.vertexCount=r.vertexCount,n.reservedVertexCount=r.reservedVertexCount,n.indexStart=r.indexStart,n.indexCount=r.indexCount,n.reservedIndexCount=r.reservedIndexCount,n.start=r.start,n.count=r.count,n}setInstanceCount(e){const n=this._availableInstanceIds,r=this._instanceInfo;for(n.sort(mM);n[n.length-1]===r.length;)r.pop(),n.pop();if(e<r.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),s=new Int32Array(e);cp(this._multiDrawCounts,i),cp(this._multiDrawStarts,s),this._multiDrawCounts=i,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,c=this._colorsTexture;o.dispose(),this._initIndirectTexture(),cp(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),cp(a.image.data,this._matricesTexture.image.data),c&&(c.dispose(),this._initColorsTexture(),cp(c.image.data,this._colorsTexture.image.data))}setGeometrySize(e,n){const r=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...r.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${n}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...r.map(c=>c.indexStart+c.reservedIndexCount))>n)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${n}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=n,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Mn,this._initializeGeometry(s));const o=this.geometry;s.index&&cp(s.index.array,o.index.array);for(const a in s.attributes)cp(s.attributes[a].array,o.attributes[a].array)}raycast(e,n){const r=this._instanceInfo,i=this._geometryInfo,s=this.matrixWorld,o=this.geometry;Zs.material=this.material,Zs.geometry.index=o.index,Zs.geometry.attributes=o.attributes,Zs.geometry.boundingBox===null&&(Zs.geometry.boundingBox=new Fs),Zs.geometry.boundingSphere===null&&(Zs.geometry.boundingSphere=new io);for(let a=0,c=r.length;a<c;a++){if(!r[a].visible||!r[a].active)continue;const l=r[a].geometryIndex,u=i[l];Zs.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(a,Zs.matrixWorld).premultiply(s),this.getBoundingBoxAt(l,Zs.geometry.boundingBox),this.getBoundingSphereAt(l,Zs.geometry.boundingSphere),Zs.raycast(e,tE);for(let d=0,h=tE.length;d<h;d++){const f=tE[d];f.object=this,f.batchId=a,n.push(f)}tE.length=0}Zs.material=null,Zs.geometry.index=null,Zs.geometry.attributes={},Zs.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(n=>({...n,boundingBox:n.boundingBox!==null?n.boundingBox.clone():null,boundingSphere:n.boundingSphere!==null?n.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(n=>({...n})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,n,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,c=this._instanceInfo,l=this._multiDrawStarts,u=this._multiDrawCounts,d=this._geometryInfo,h=this.perObjectFrustumCulled,f=this._indirectTexture,p=f.image.data;h&&(Vo.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),gM.setFromProjectionMatrix(Vo,e.coordinateSystem));let g=0;if(this.sortObjects){Vo.copy(this.matrixWorld).invert(),Vb.setFromMatrixPosition(r.matrixWorld).applyMatrix4(Vo),D6.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(Vo);for(let b=0,x=c.length;b<x;b++)if(c[b].visible&&c[b].active){const S=c[b].geometryIndex;this.getMatrixAt(b,Vo),this.getBoundingSphereAt(S,lp).applyMatrix4(Vo);let P=!1;if(h&&(P=!gM.intersectsSphere(lp)),!P){const _=d[S],I=mue.subVectors(lp.center,Vb).dot(D6);yM.push(_.start,_.count,I,b)}}const m=yM.list,y=this.customSort;y===null?m.sort(s.transparent?fue:due):y.call(this,m,r);for(let b=0,x=m.length;b<x;b++){const S=m[b];l[g]=S.start*a,u[g]=S.count,p[g]=S.index,g++}yM.reset()}else for(let m=0,y=c.length;m<y;m++)if(c[m].visible&&c[m].active){const b=c[m].geometryIndex;let x=!1;if(h&&(this.getMatrixAt(m,Vo),this.getBoundingSphereAt(b,lp).applyMatrix4(Vo),x=!gM.intersectsSphere(lp)),!x){const S=d[b];l[g]=S.start*a,u[g]=S.count,p[g]=m,g++}}f.needsUpdate=!0,this._multiDrawCount=g,this._visibilityChanged=!1}onBeforeShadow(e,n,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class Co extends Us{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Wt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const B2=new Ce,F2=new Ce,B6=new vn,Wb=new dv,nE=new io,vM=new Ce,F6=new Ce;class rh extends yr{constructor(e=new Mn,n=new Co){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,s=n.count;i<s;i++)B2.fromBufferAttribute(n,i-1),F2.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=B2.distanceTo(F2);e.setAttribute("lineDistance",new tn(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),nE.copy(r.boundingSphere),nE.applyMatrix4(i),nE.radius+=s,e.ray.intersectsSphere(nE)===!1)return;B6.copy(i).invert(),Wb.copy(e.ray).applyMatrix4(B6);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=this.isLineSegments?2:1,u=r.index,h=r.attributes.position;if(u!==null){const f=Math.max(0,o.start),p=Math.min(u.count,o.start+o.count);for(let g=f,m=p-1;g<m;g+=l){const y=u.getX(g),b=u.getX(g+1),x=rE(this,e,Wb,c,y,b,g);x&&n.push(x)}if(this.isLineLoop){const g=u.getX(p-1),m=u.getX(f),y=rE(this,e,Wb,c,g,m,p-1);y&&n.push(y)}}else{const f=Math.max(0,o.start),p=Math.min(h.count,o.start+o.count);for(let g=f,m=p-1;g<m;g+=l){const y=rE(this,e,Wb,c,g,g+1,g);y&&n.push(y)}if(this.isLineLoop){const g=rE(this,e,Wb,c,p-1,f,p-1);g&&n.push(g)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function rE(t,e,n,r,i,s,o){const a=t.geometry.attributes.position;if(B2.fromBufferAttribute(a,i),F2.fromBufferAttribute(a,s),n.distanceSqToSegment(B2,F2,vM,F6)>r)return;vM.applyMatrix4(t.matrixWorld);const l=e.ray.origin.distanceTo(vM);if(!(l<e.near||l>e.far))return{distance:l,point:F6.clone().applyMatrix4(t.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:t}}const U6=new Ce,$6=new Ce;class fu extends rh{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,s=n.count;i<s;i+=2)U6.fromBufferAttribute(n,i),$6.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+U6.distanceTo($6);e.setAttribute("lineDistance",new tn(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class sV extends rh{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class Q3 extends Us{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Wt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const z6=new vn,HR=new dv,iE=new io,sE=new Ce;class oV extends yr{constructor(e=new Mn,n=new Q3){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),iE.copy(r.boundingSphere),iE.applyMatrix4(i),iE.radius+=s,e.ray.intersectsSphere(iE)===!1)return;z6.copy(i).invert(),HR.copy(e.ray).applyMatrix4(z6);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=r.index,d=r.attributes.position;if(l!==null){const h=Math.max(0,o.start),f=Math.min(l.count,o.start+o.count);for(let p=h,g=f;p<g;p++){const m=l.getX(p);sE.fromBufferAttribute(d,m),H6(sE,m,c,i,e,n,this)}}else{const h=Math.max(0,o.start),f=Math.min(d.count,o.start+o.count);for(let p=h,g=f;p<g;p++)sE.fromBufferAttribute(d,p),H6(sE,p,c,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function H6(t,e,n,r,i,s,o){const a=HR.distanceSqToPoint(t);if(a<n){const c=new Ce;HR.closestPointToPoint(t,c),c.applyMatrix4(r);const l=i.ray.origin.distanceTo(c);if(l<i.near||l>i.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class aV extends vi{constructor(e,n,r,i,s=cs,o=cs,a,c,l){super(e,n,r,i,s,o,a,c,l),this.isVideoTexture=!0,this.generateMipmaps=!1;const u=this;function d(){u.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class yue extends aV{constructor(e,n,r,i,s,o,a,c){super({},e,n,r,i,s,o,a,c),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class vue extends vi{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=Bs,this.minFilter=Bs,this.generateMipmaps=!1,this.needsUpdate=!0}}class QI extends vi{constructor(e,n,r,i,s,o,a,c,l,u,d,h){super(null,o,a,c,l,u,i,s,d,h),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class bue extends QI{constructor(e,n,r,i,s,o){super(e,n,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=pl,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class xue extends QI{constructor(e,n,r){super(void 0,e[0].width,e[0].height,n,r,jd),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class wue extends vi{constructor(e,n,r,i,s,o,a,c,l){super(e,n,r,i,s,o,a,c,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class eO extends vi{constructor(e,n,r=qd,i,s,o,a=Bs,c=Bs,l,u=Vy){if(u!==Vy&&u!==Wy)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,i,s,o,a,c,u,r,l),this.isDepthTexture=!0,this.image={width:e,height:n},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Yf(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}let Ic=class{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),n.push(s),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n=null){const r=this.getLengths();let i=0;const s=r.length;let o;n?o=n:o=e*r[s-1];let a=0,c=s-1,l;for(;a<=c;)if(i=Math.floor(a+(c-a)/2),l=r[i]-o,l<0)a=i+1;else if(l>0)c=i-1;else{c=i;break}if(i=c,r[i]===o)return i/(s-1);const u=r[i],h=r[i+1]-u,f=(o-u)/h;return(i+f)/(s-1)}getTangent(e,n){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),c=n||(o.isVector2?new St:new Ce);return c.copy(a).sub(o).normalize(),c}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n=!1){const r=new Ce,i=[],s=[],o=[],a=new Ce,c=new vn;for(let f=0;f<=e;f++){const p=f/e;i[f]=this.getTangentAt(p,new Ce)}s[0]=new Ce,o[0]=new Ce;let l=Number.MAX_VALUE;const u=Math.abs(i[0].x),d=Math.abs(i[0].y),h=Math.abs(i[0].z);u<=l&&(l=u,r.set(1,0,0)),d<=l&&(l=d,r.set(0,1,0)),h<=l&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let f=1;f<=e;f++){if(s[f]=s[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(i[f-1],i[f]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(Cn(i[f-1].dot(i[f]),-1,1));s[f].applyMatrix4(c.makeRotationAxis(a,p))}o[f].crossVectors(i[f],s[f])}if(n===!0){let f=Math.acos(Cn(s[0].dot(s[e]),-1,1));f/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(f=-f);for(let p=1;p<=e;p++)s[p].applyMatrix4(c.makeRotationAxis(i[p],f*p)),o[p].crossVectors(i[p],s[p])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}};class eP extends Ic{constructor(e=0,n=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=c}getPoint(e,n=new St){const r=n,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=c-this.aX,f=l-this.aY;c=h*u-f*d+this.aX,l=h*d+f*u+this.aY}return r.set(c,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class lV extends eP{constructor(e,n,r,i,s,o){super(e,n,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function tO(){let t=0,e=0,n=0,r=0;function i(s,o,a,c){t=s,e=a,n=-3*s+3*o-2*a-c,r=2*s-2*o+a+c}return{initCatmullRom:function(s,o,a,c,l){i(o,a,l*(a-s),l*(c-o))},initNonuniformCatmullRom:function(s,o,a,c,l,u,d){let h=(o-s)/l-(a-s)/(l+u)+(a-o)/u,f=(a-o)/u-(c-o)/(u+d)+(c-a)/d;h*=u,f*=u,i(o,a,h,f)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+r*a}}}const oE=new Ce,bM=new tO,xM=new tO,wM=new tO;class cV extends Ic{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new Ce){const r=n,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),c=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:c===0&&a===s-1&&(a=s-2,c=1);let l,u;this.closed||a>0?l=i[(a-1)%s]:(oE.subVectors(i[0],i[1]).add(i[0]),l=oE);const d=i[a%s],h=i[(a+1)%s];if(this.closed||a+2<s?u=i[(a+2)%s]:(oE.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=oE),this.curveType==="centripetal"||this.curveType==="chordal"){const f=this.curveType==="chordal"?.5:.25;let p=Math.pow(l.distanceToSquared(d),f),g=Math.pow(d.distanceToSquared(h),f),m=Math.pow(h.distanceToSquared(u),f);g<1e-4&&(g=1),p<1e-4&&(p=g),m<1e-4&&(m=g),bM.initNonuniformCatmullRom(l.x,d.x,h.x,u.x,p,g,m),xM.initNonuniformCatmullRom(l.y,d.y,h.y,u.y,p,g,m),wM.initNonuniformCatmullRom(l.z,d.z,h.z,u.z,p,g,m)}else this.curveType==="catmullrom"&&(bM.initCatmullRom(l.x,d.x,h.x,u.x,this.tension),xM.initCatmullRom(l.y,d.y,h.y,u.y,this.tension),wM.initCatmullRom(l.z,d.z,h.z,u.z,this.tension));return r.set(bM.calc(c),xM.calc(c),wM.calc(c)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new Ce().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function V6(t,e,n,r,i){const s=(r-e)*.5,o=(i-n)*.5,a=t*t,c=t*a;return(2*n-2*r+s+o)*c+(-3*n+3*r-2*s-o)*a+s*t+n}function _ue(t,e){const n=1-t;return n*n*e}function Sue(t,e){return 2*(1-t)*t*e}function Eue(t,e){return t*t*e}function $x(t,e,n,r){return _ue(t,e)+Sue(t,n)+Eue(t,r)}function Tue(t,e){const n=1-t;return n*n*n*e}function Iue(t,e){const n=1-t;return 3*n*n*t*e}function Pue(t,e){return 3*(1-t)*t*t*e}function Cue(t,e){return t*t*t*e}function zx(t,e,n,r,i){return Tue(t,e)+Iue(t,n)+Pue(t,r)+Cue(t,i)}class nO extends Ic{constructor(e=new St,n=new St,r=new St,i=new St){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new St){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(zx(e,i.x,s.x,o.x,a.x),zx(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class uV extends Ic{constructor(e=new Ce,n=new Ce,r=new Ce,i=new Ce){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new Ce){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(zx(e,i.x,s.x,o.x,a.x),zx(e,i.y,s.y,o.y,a.y),zx(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class rO extends Ic{constructor(e=new St,n=new St){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new St){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new St){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class dV extends Ic{constructor(e=new Ce,n=new Ce){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new Ce){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Ce){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class iO extends Ic{constructor(e=new St,n=new St,r=new St){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new St){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set($x(e,i.x,s.x,o.x),$x(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sO extends Ic{constructor(e=new Ce,n=new Ce,r=new Ce){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new Ce){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set($x(e,i.x,s.x,o.x),$x(e,i.y,s.y,o.y),$x(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class oO extends Ic{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new St){const r=n,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,c=i[o===0?o:o-1],l=i[o],u=i[o>i.length-2?i.length-1:o+1],d=i[o>i.length-3?i.length-1:o+2];return r.set(V6(a,c.x,l.x,u.x,d.x),V6(a,c.y,l.y,u.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new St().fromArray(i))}return this}}var U2=Object.freeze({__proto__:null,ArcCurve:lV,CatmullRomCurve3:cV,CubicBezierCurve:nO,CubicBezierCurve3:uV,EllipseCurve:eP,LineCurve:rO,LineCurve3:dV,QuadraticBezierCurve:iO,QuadraticBezierCurve3:sO,SplineCurve:oO});class fV extends Ic{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new U2[r](n,e))}return this}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],c=a.getLength(),l=c===0?0:1-o/c;return a.getPointAt(l,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,c=o.getPoints(a);for(let l=0;l<c.length;l++){const u=c[l];r&&r.equals(u)||(n.push(u),r=u)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new U2[i.type]().fromJSON(i))}return this}}class gw extends fV{constructor(e){super(),this.type="Path",this.currentPoint=new St,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new rO(this.currentPoint.clone(),new St(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const s=new iO(this.currentPoint.clone(),new St(e,n),new St(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,s,o){const a=new nO(this.currentPoint.clone(),new St(e,n),new St(r,i),new St(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new oO(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,s,o){const a=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+a,n+c,r,i,s,o),this}absarc(e,n,r,i,s,o){return this.absellipse(e,n,r,r,i,s,o),this}ellipse(e,n,r,i,s,o,a,c){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,n+u,r,i,s,o,a,c),this}absellipse(e,n,r,i,s,o,a,c){const l=new eP(e,n,r,i,s,o,a,c);if(this.curves.length>0){const d=l.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(l);const u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class r_ extends Mn{constructor(e=[new St(0,-.5),new St(.5,0),new St(0,.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=Cn(i,0,Math.PI*2);const s=[],o=[],a=[],c=[],l=[],u=1/n,d=new Ce,h=new St,f=new Ce,p=new Ce,g=new Ce;let m=0,y=0;for(let b=0;b<=e.length-1;b++)switch(b){case 0:m=e[b+1].x-e[b].x,y=e[b+1].y-e[b].y,f.x=y*1,f.y=-m,f.z=y*0,g.copy(f),f.normalize(),c.push(f.x,f.y,f.z);break;case e.length-1:c.push(g.x,g.y,g.z);break;default:m=e[b+1].x-e[b].x,y=e[b+1].y-e[b].y,f.x=y*1,f.y=-m,f.z=y*0,p.copy(f),f.x+=g.x,f.y+=g.y,f.z+=g.z,f.normalize(),c.push(f.x,f.y,f.z),g.copy(p)}for(let b=0;b<=n;b++){const x=r+b*u*i,S=Math.sin(x),P=Math.cos(x);for(let _=0;_<=e.length-1;_++){d.x=e[_].x*S,d.y=e[_].y,d.z=e[_].x*P,o.push(d.x,d.y,d.z),h.x=b/n,h.y=_/(e.length-1),a.push(h.x,h.y);const I=c[3*_+0]*S,C=c[3*_+1],A=c[3*_+0]*P;l.push(I,C,A)}}for(let b=0;b<n;b++)for(let x=0;x<e.length-1;x++){const S=x+b*e.length,P=S,_=S+e.length,I=S+e.length+1,C=S+1;s.push(P,_,C),s.push(I,C,_)}this.setIndex(s),this.setAttribute("position",new tn(o,3)),this.setAttribute("uv",new tn(a,2)),this.setAttribute("normal",new tn(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new r_(e.points,e.segments,e.phiStart,e.phiLength)}}class tP extends r_{constructor(e=1,n=1,r=4,i=8){const s=new gw;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:r,radialSegments:i}}static fromJSON(e){return new tP(e.radius,e.length,e.capSegments,e.radialSegments)}}class nP extends Mn{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const s=[],o=[],a=[],c=[],l=new Ce,u=new St;o.push(0,0,0),a.push(0,0,1),c.push(.5,.5);for(let d=0,h=3;d<=n;d++,h+=3){const f=r+d/n*i;l.x=e*Math.cos(f),l.y=e*Math.sin(f),o.push(l.x,l.y,l.z),a.push(0,0,1),u.x=(o[h]/e+1)/2,u.y=(o[h+1]/e+1)/2,c.push(u.x,u.y)}for(let d=1;d<=n;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new tn(o,3)),this.setAttribute("normal",new tn(a,3)),this.setAttribute("uv",new tn(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nP(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class fv extends Mn{constructor(e=1,n=1,r=1,i=32,s=1,o=!1,a=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:c};const l=this;i=Math.floor(i),s=Math.floor(s);const u=[],d=[],h=[],f=[];let p=0;const g=[],m=r/2;let y=0;b(),o===!1&&(e>0&&x(!0),n>0&&x(!1)),this.setIndex(u),this.setAttribute("position",new tn(d,3)),this.setAttribute("normal",new tn(h,3)),this.setAttribute("uv",new tn(f,2));function b(){const S=new Ce,P=new Ce;let _=0;const I=(n-e)/r;for(let C=0;C<=s;C++){const A=[],M=C/s,k=M*(n-e)+e;for(let O=0;O<=i;O++){const B=O/i,$=B*c+a,U=Math.sin($),q=Math.cos($);P.x=k*U,P.y=-M*r+m,P.z=k*q,d.push(P.x,P.y,P.z),S.set(U,I,q).normalize(),h.push(S.x,S.y,S.z),f.push(B,1-M),A.push(p++)}g.push(A)}for(let C=0;C<i;C++)for(let A=0;A<s;A++){const M=g[A][C],k=g[A+1][C],O=g[A+1][C+1],B=g[A][C+1];(e>0||A!==0)&&(u.push(M,k,B),_+=3),(n>0||A!==s-1)&&(u.push(k,O,B),_+=3)}l.addGroup(y,_,0),y+=_}function x(S){const P=p,_=new St,I=new Ce;let C=0;const A=S===!0?e:n,M=S===!0?1:-1;for(let O=1;O<=i;O++)d.push(0,m*M,0),h.push(0,M,0),f.push(.5,.5),p++;const k=p;for(let O=0;O<=i;O++){const $=O/i*c+a,U=Math.cos($),q=Math.sin($);I.x=A*q,I.y=m*M,I.z=A*U,d.push(I.x,I.y,I.z),h.push(0,M,0),_.x=U*.5+.5,_.y=q*.5*M+.5,f.push(_.x,_.y),p++}for(let O=0;O<i;O++){const B=P+O,$=k+O;S===!0?u.push($,$+1,B):u.push($+1,$,B),C+=3}l.addGroup(y,C,S===!0?1:2),y+=C}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fv(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class rP extends fv{constructor(e=1,n=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,n,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new rP(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class fh extends Mn{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const s=[],o=[];a(i),l(r),u(),this.setAttribute("position",new tn(s,3)),this.setAttribute("normal",new tn(s.slice(),3)),this.setAttribute("uv",new tn(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(b){const x=new Ce,S=new Ce,P=new Ce;for(let _=0;_<n.length;_+=3)f(n[_+0],x),f(n[_+1],S),f(n[_+2],P),c(x,S,P,b)}function c(b,x,S,P){const _=P+1,I=[];for(let C=0;C<=_;C++){I[C]=[];const A=b.clone().lerp(S,C/_),M=x.clone().lerp(S,C/_),k=_-C;for(let O=0;O<=k;O++)O===0&&C===_?I[C][O]=A:I[C][O]=A.clone().lerp(M,O/k)}for(let C=0;C<_;C++)for(let A=0;A<2*(_-C)-1;A++){const M=Math.floor(A/2);A%2===0?(h(I[C][M+1]),h(I[C+1][M]),h(I[C][M])):(h(I[C][M+1]),h(I[C+1][M+1]),h(I[C+1][M]))}}function l(b){const x=new Ce;for(let S=0;S<s.length;S+=3)x.x=s[S+0],x.y=s[S+1],x.z=s[S+2],x.normalize().multiplyScalar(b),s[S+0]=x.x,s[S+1]=x.y,s[S+2]=x.z}function u(){const b=new Ce;for(let x=0;x<s.length;x+=3){b.x=s[x+0],b.y=s[x+1],b.z=s[x+2];const S=m(b)/2/Math.PI+.5,P=y(b)/Math.PI+.5;o.push(S,1-P)}p(),d()}function d(){for(let b=0;b<o.length;b+=6){const x=o[b+0],S=o[b+2],P=o[b+4],_=Math.max(x,S,P),I=Math.min(x,S,P);_>.9&&I<.1&&(x<.2&&(o[b+0]+=1),S<.2&&(o[b+2]+=1),P<.2&&(o[b+4]+=1))}}function h(b){s.push(b.x,b.y,b.z)}function f(b,x){const S=b*3;x.x=e[S+0],x.y=e[S+1],x.z=e[S+2]}function p(){const b=new Ce,x=new Ce,S=new Ce,P=new Ce,_=new St,I=new St,C=new St;for(let A=0,M=0;A<s.length;A+=9,M+=6){b.set(s[A+0],s[A+1],s[A+2]),x.set(s[A+3],s[A+4],s[A+5]),S.set(s[A+6],s[A+7],s[A+8]),_.set(o[M+0],o[M+1]),I.set(o[M+2],o[M+3]),C.set(o[M+4],o[M+5]),P.copy(b).add(x).add(S).divideScalar(3);const k=m(P);g(_,M+0,b,k),g(I,M+2,x,k),g(C,M+4,S,k)}}function g(b,x,S,P){P<0&&b.x===1&&(o[x]=b.x-1),S.x===0&&S.z===0&&(o[x]=P/2/Math.PI+.5)}function m(b){return Math.atan2(b.z,-b.x)}function y(b){return Math.atan2(-b.y,Math.sqrt(b.x*b.x+b.z*b.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fh(e.vertices,e.indices,e.radius,e.details)}}class iP extends fh{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new iP(e.radius,e.detail)}}const aE=new Ce,lE=new Ce,_M=new Ce,cE=new Yo;class hV extends Mn{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),s=Math.cos(Tm*n),o=e.getIndex(),a=e.getAttribute("position"),c=o?o.count:a.count,l=[0,0,0],u=["a","b","c"],d=new Array(3),h={},f=[];for(let p=0;p<c;p+=3){o?(l[0]=o.getX(p),l[1]=o.getX(p+1),l[2]=o.getX(p+2)):(l[0]=p,l[1]=p+1,l[2]=p+2);const{a:g,b:m,c:y}=cE;if(g.fromBufferAttribute(a,l[0]),m.fromBufferAttribute(a,l[1]),y.fromBufferAttribute(a,l[2]),cE.getNormal(_M),d[0]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,d[1]=`${Math.round(m.x*i)},${Math.round(m.y*i)},${Math.round(m.z*i)}`,d[2]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let b=0;b<3;b++){const x=(b+1)%3,S=d[b],P=d[x],_=cE[u[b]],I=cE[u[x]],C=`${S}_${P}`,A=`${P}_${S}`;A in h&&h[A]?(_M.dot(h[A].normal)<=s&&(f.push(_.x,_.y,_.z),f.push(I.x,I.y,I.z)),h[A]=null):C in h||(h[C]={index0:l[b],index1:l[x],normal:_M.clone()})}}for(const p in h)if(h[p]){const{index0:g,index1:m}=h[p];aE.fromBufferAttribute(a,g),lE.fromBufferAttribute(a,m),f.push(aE.x,aE.y,aE.z),f.push(lE.x,lE.y,lE.z)}this.setAttribute("position",new tn(f,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Pm extends gw{constructor(e){super(e),this.uuid=ka(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new gw().fromJSON(i))}return this}}function Mue(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let s=pV(t,0,i,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,c,l;if(r&&(s=Nue(t,e,s,n)),t.length>80*n){a=1/0,c=1/0;let u=-1/0,d=-1/0;for(let h=n;h<i;h+=n){const f=t[h],p=t[h+1];f<a&&(a=f),p<c&&(c=p),f>u&&(u=f),p>d&&(d=p)}l=Math.max(u-a,d-c),l=l!==0?32767/l:0}return yw(s,o,n,a,c,l,0),o}function pV(t,e,n,r,i){let s;if(i===jue(t,e,n,r)>0)for(let o=e;o<n;o+=r)s=W6(o/r|0,t[o],t[o+1],s);else for(let o=n-r;o>=e;o-=r)s=W6(o/r|0,t[o],t[o+1],s);return s&&Gy(s,s.next)&&(bw(s),s=s.next),s}function Dm(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(Gy(n,n.next)||gi(n.prev,n,n.next)===0)){if(bw(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function yw(t,e,n,r,i,s,o){if(!t)return;!o&&s&&Uue(t,r,i,s);let a=t;for(;t.prev!==t.next;){const c=t.prev,l=t.next;if(s?Rue(t,r,i,s):Aue(t)){e.push(c.i,t.i,l.i),bw(t),t=l.next,a=l.next;continue}if(t=l,t===a){o?o===1?(t=kue(Dm(t),e),yw(t,e,n,r,i,s,2)):o===2&&Oue(t,e,n,r,i,s):yw(Dm(t),e,n,r,i,s,1);break}}}function Aue(t){const e=t.prev,n=t,r=t.next;if(gi(e,n,r)>=0)return!1;const i=e.x,s=n.x,o=r.x,a=e.y,c=n.y,l=r.y,u=Math.min(i,s,o),d=Math.min(a,c,l),h=Math.max(i,s,o),f=Math.max(a,c,l);let p=r.next;for(;p!==e;){if(p.x>=u&&p.x<=h&&p.y>=d&&p.y<=f&&gx(i,a,s,c,o,l,p.x,p.y)&&gi(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Rue(t,e,n,r){const i=t.prev,s=t,o=t.next;if(gi(i,s,o)>=0)return!1;const a=i.x,c=s.x,l=o.x,u=i.y,d=s.y,h=o.y,f=Math.min(a,c,l),p=Math.min(u,d,h),g=Math.max(a,c,l),m=Math.max(u,d,h),y=VR(f,p,e,n,r),b=VR(g,m,e,n,r);let x=t.prevZ,S=t.nextZ;for(;x&&x.z>=y&&S&&S.z<=b;){if(x.x>=f&&x.x<=g&&x.y>=p&&x.y<=m&&x!==i&&x!==o&&gx(a,u,c,d,l,h,x.x,x.y)&&gi(x.prev,x,x.next)>=0||(x=x.prevZ,S.x>=f&&S.x<=g&&S.y>=p&&S.y<=m&&S!==i&&S!==o&&gx(a,u,c,d,l,h,S.x,S.y)&&gi(S.prev,S,S.next)>=0))return!1;S=S.nextZ}for(;x&&x.z>=y;){if(x.x>=f&&x.x<=g&&x.y>=p&&x.y<=m&&x!==i&&x!==o&&gx(a,u,c,d,l,h,x.x,x.y)&&gi(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;S&&S.z<=b;){if(S.x>=f&&S.x<=g&&S.y>=p&&S.y<=m&&S!==i&&S!==o&&gx(a,u,c,d,l,h,S.x,S.y)&&gi(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function kue(t,e){let n=t;do{const r=n.prev,i=n.next.next;!Gy(r,i)&&gV(r,n,n.next,i)&&vw(r,i)&&vw(i,r)&&(e.push(r.i,n.i,i.i),bw(n),bw(n.next),n=t=i),n=n.next}while(n!==t);return Dm(n)}function Oue(t,e,n,r,i,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Hue(o,a)){let c=yV(o,a);o=Dm(o,o.next),c=Dm(c,c.next),yw(o,e,n,r,i,s,0),yw(c,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function Nue(t,e,n,r){const i=[];for(let s=0,o=e.length;s<o;s++){const a=e[s]*r,c=s<o-1?e[s+1]*r:t.length,l=pV(t,a,c,r,!1);l===l.next&&(l.steiner=!0),i.push(zue(l))}i.sort(Lue);for(let s=0;s<i.length;s++)n=Due(i[s],n);return n}function Lue(t,e){let n=t.x-e.x;if(n===0&&(n=t.y-e.y,n===0)){const r=(t.next.y-t.y)/(t.next.x-t.x),i=(e.next.y-e.y)/(e.next.x-e.x);n=r-i}return n}function Due(t,e){const n=Bue(t,e);if(!n)return e;const r=yV(n,t);return Dm(r,r.next),Dm(n,n.next)}function Bue(t,e){let n=e;const r=t.x,i=t.y;let s=-1/0,o;if(Gy(t,n))return n;do{if(Gy(t,n.next))return n.next;if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const d=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(d<=r&&d>s&&(s=d,o=n.x<n.next.x?n:n.next,d===r))return o}n=n.next}while(n!==e);if(!o)return null;const a=o,c=o.x,l=o.y;let u=1/0;n=o;do{if(r>=n.x&&n.x>=c&&r!==n.x&&mV(i<l?r:s,i,c,l,i<l?s:r,i,n.x,n.y)){const d=Math.abs(i-n.y)/(r-n.x);vw(n,t)&&(d<u||d===u&&(n.x>o.x||n.x===o.x&&Fue(o,n)))&&(o=n,u=d)}n=n.next}while(n!==a);return o}function Fue(t,e){return gi(t.prev,t,e.prev)<0&&gi(e.next,t,t.next)<0}function Uue(t,e,n,r){let i=t;do i.z===0&&(i.z=VR(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,$ue(i)}function $ue(t){let e,n=1;do{let r=t,i;t=null;let s=null;for(e=0;r;){e++;let o=r,a=0;for(let l=0;l<n&&(a++,o=o.nextZ,!!o);l++);let c=n;for(;a>0||c>0&&o;)a!==0&&(c===0||!o||r.z<=o.z)?(i=r,r=r.nextZ,a--):(i=o,o=o.nextZ,c--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;r=o}s.nextZ=null,n*=2}while(e>1);return t}function VR(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function zue(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function mV(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function gx(t,e,n,r,i,s,o,a){return!(t===o&&e===a)&&mV(t,e,n,r,i,s,o,a)}function Hue(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Vue(t,e)&&(vw(t,e)&&vw(e,t)&&Wue(t,e)&&(gi(t.prev,t,e.prev)||gi(t,e.prev,e))||Gy(t,e)&&gi(t.prev,t,t.next)>0&&gi(e.prev,e,e.next)>0)}function gi(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Gy(t,e){return t.x===e.x&&t.y===e.y}function gV(t,e,n,r){const i=dE(gi(t,e,n)),s=dE(gi(t,e,r)),o=dE(gi(n,r,t)),a=dE(gi(n,r,e));return!!(i!==s&&o!==a||i===0&&uE(t,n,e)||s===0&&uE(t,r,e)||o===0&&uE(n,t,r)||a===0&&uE(n,e,r))}function uE(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function dE(t){return t>0?1:t<0?-1:0}function Vue(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&gV(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function vw(t,e){return gi(t.prev,t,t.next)<0?gi(t,e,t.next)>=0&&gi(t,t.prev,e)>=0:gi(t,e,t.prev)<0||gi(t,t.next,e)<0}function Wue(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function yV(t,e){const n=WR(t.i,t.x,t.y),r=WR(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function W6(t,e,n,r){const i=WR(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function bw(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function WR(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function jue(t,e,n,r){let i=0;for(let s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}class que{static triangulate(e,n,r=2){return Mue(e,n,r)}}class nu{static area(e){const n=e.length;let r=0;for(let i=n-1,s=0;s<n;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return nu.area(e)<0}static triangulateShape(e,n){const r=[],i=[],s=[];j6(e),q6(r,e);let o=e.length;n.forEach(j6);for(let c=0;c<n.length;c++)i.push(o),o+=n[c].length,q6(r,n[c]);const a=que.triangulate(r,i);for(let c=0;c<a.length;c+=3)s.push(a.slice(c,c+3));return s}}function j6(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function q6(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class sP extends Mn{constructor(e=new Pm([new St(.5,.5),new St(-.5,.5),new St(-.5,-.5),new St(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,c=e.length;a<c;a++){const l=e[a];o(l)}this.setAttribute("position",new tn(i,3)),this.setAttribute("uv",new tn(s,2)),this.computeVertexNormals();function o(a){const c=[],l=n.curveSegments!==void 0?n.curveSegments:12,u=n.steps!==void 0?n.steps:1,d=n.depth!==void 0?n.depth:1;let h=n.bevelEnabled!==void 0?n.bevelEnabled:!0,f=n.bevelThickness!==void 0?n.bevelThickness:.2,p=n.bevelSize!==void 0?n.bevelSize:f-.1,g=n.bevelOffset!==void 0?n.bevelOffset:0,m=n.bevelSegments!==void 0?n.bevelSegments:3;const y=n.extrudePath,b=n.UVGenerator!==void 0?n.UVGenerator:Kue;let x,S=!1,P,_,I,C;y&&(x=y.getSpacedPoints(u),S=!0,h=!1,P=y.computeFrenetFrames(u,!1),_=new Ce,I=new Ce,C=new Ce),h||(m=0,f=0,p=0,g=0);const A=a.extractPoints(l);let M=A.shape;const k=A.holes;if(!nu.isClockWise(M)){M=M.reverse();for(let Pe=0,He=k.length;Pe<He;Pe++){const Re=k[Pe];nu.isClockWise(Re)&&(k[Pe]=Re.reverse())}}function B(Pe){const Re=10000000000000001e-36;let je=Pe[0];for(let te=1;te<=Pe.length;te++){const ee=te%Pe.length,X=Pe[ee],we=X.x-je.x,Ne=X.y-je.y,We=we*we+Ne*Ne,xe=Math.max(Math.abs(X.x),Math.abs(X.y),Math.abs(je.x),Math.abs(je.y)),Ve=Re*xe*xe;if(We<=Ve){Pe.splice(ee,1),te--;continue}je=X}}B(M),k.forEach(B);const $=k.length,U=M;for(let Pe=0;Pe<$;Pe++){const He=k[Pe];M=M.concat(He)}function q(Pe,He,Re){return He||console.error("THREE.ExtrudeGeometry: vec does not exist"),Pe.clone().addScaledVector(He,Re)}const K=M.length;function V(Pe,He,Re){let je,te,ee;const X=Pe.x-He.x,we=Pe.y-He.y,Ne=Re.x-Pe.x,We=Re.y-Pe.y,xe=X*X+we*we,Ve=X*We-we*Ne;if(Math.abs(Ve)>Number.EPSILON){const be=Math.sqrt(xe),ge=Math.sqrt(Ne*Ne+We*We),Se=He.x-we/be,Ie=He.y+X/be,me=Re.x-We/ge,Ee=Re.y+Ne/ge,oe=((me-Se)*We-(Ee-Ie)*Ne)/(X*We-we*Ne);je=Se+X*oe-Pe.x,te=Ie+we*oe-Pe.y;const ne=je*je+te*te;if(ne<=2)return new St(je,te);ee=Math.sqrt(ne/2)}else{let be=!1;X>Number.EPSILON?Ne>Number.EPSILON&&(be=!0):X<-Number.EPSILON?Ne<-Number.EPSILON&&(be=!0):Math.sign(we)===Math.sign(We)&&(be=!0),be?(je=-we,te=X,ee=Math.sqrt(xe)):(je=X,te=we,ee=Math.sqrt(xe/2))}return new St(je/ee,te/ee)}const G=[];for(let Pe=0,He=U.length,Re=He-1,je=Pe+1;Pe<He;Pe++,Re++,je++)Re===He&&(Re=0),je===He&&(je=0),G[Pe]=V(U[Pe],U[Re],U[je]);const j=[];let Q,se=G.concat();for(let Pe=0,He=$;Pe<He;Pe++){const Re=k[Pe];Q=[];for(let je=0,te=Re.length,ee=te-1,X=je+1;je<te;je++,ee++,X++)ee===te&&(ee=0),X===te&&(X=0),Q[je]=V(Re[je],Re[ee],Re[X]);j.push(Q),se=se.concat(Q)}const Z=[],ie=[];for(let Pe=0;Pe<m;Pe++){const He=Pe/m,Re=f*Math.cos(He*Math.PI/2),je=p*Math.sin(He*Math.PI/2)+g;for(let te=0,ee=U.length;te<ee;te++){const X=q(U[te],G[te],je);Ae(X.x,X.y,-Re),He==0&&Z.push(X)}for(let te=0,ee=$;te<ee;te++){const X=k[te];Q=j[te];const we=[];for(let Ne=0,We=X.length;Ne<We;Ne++){const xe=q(X[Ne],Q[Ne],je);Ae(xe.x,xe.y,-Re),He==0&&we.push(xe)}He==0&&ie.push(we)}}const pe=nu.triangulateShape(Z,ie),ue=pe.length,le=p+g;for(let Pe=0;Pe<K;Pe++){const He=h?q(M[Pe],se[Pe],le):M[Pe];S?(I.copy(P.normals[0]).multiplyScalar(He.x),_.copy(P.binormals[0]).multiplyScalar(He.y),C.copy(x[0]).add(I).add(_),Ae(C.x,C.y,C.z)):Ae(He.x,He.y,0)}for(let Pe=1;Pe<=u;Pe++)for(let He=0;He<K;He++){const Re=h?q(M[He],se[He],le):M[He];S?(I.copy(P.normals[Pe]).multiplyScalar(Re.x),_.copy(P.binormals[Pe]).multiplyScalar(Re.y),C.copy(x[Pe]).add(I).add(_),Ae(C.x,C.y,C.z)):Ae(Re.x,Re.y,d/u*Pe)}for(let Pe=m-1;Pe>=0;Pe--){const He=Pe/m,Re=f*Math.cos(He*Math.PI/2),je=p*Math.sin(He*Math.PI/2)+g;for(let te=0,ee=U.length;te<ee;te++){const X=q(U[te],G[te],je);Ae(X.x,X.y,d+Re)}for(let te=0,ee=k.length;te<ee;te++){const X=k[te];Q=j[te];for(let we=0,Ne=X.length;we<Ne;we++){const We=q(X[we],Q[we],je);S?Ae(We.x,We.y+x[u-1].y,x[u-1].x+Re):Ae(We.x,We.y,d+Re)}}}ae(),_e();function ae(){const Pe=i.length/3;if(h){let He=0,Re=K*He;for(let je=0;je<ue;je++){const te=pe[je];Oe(te[2]+Re,te[1]+Re,te[0]+Re)}He=u+m*2,Re=K*He;for(let je=0;je<ue;je++){const te=pe[je];Oe(te[0]+Re,te[1]+Re,te[2]+Re)}}else{for(let He=0;He<ue;He++){const Re=pe[He];Oe(Re[2],Re[1],Re[0])}for(let He=0;He<ue;He++){const Re=pe[He];Oe(Re[0]+K*u,Re[1]+K*u,Re[2]+K*u)}}r.addGroup(Pe,i.length/3-Pe,0)}function _e(){const Pe=i.length/3;let He=0;ye(U,He),He+=U.length;for(let Re=0,je=k.length;Re<je;Re++){const te=k[Re];ye(te,He),He+=te.length}r.addGroup(Pe,i.length/3-Pe,1)}function ye(Pe,He){let Re=Pe.length;for(;--Re>=0;){const je=Re;let te=Re-1;te<0&&(te=Pe.length-1);for(let ee=0,X=u+m*2;ee<X;ee++){const we=K*ee,Ne=K*(ee+1),We=He+je+we,xe=He+te+we,Ve=He+te+Ne,be=He+je+Ne;Be(We,xe,Ve,be)}}}function Ae(Pe,He,Re){c.push(Pe),c.push(He),c.push(Re)}function Oe(Pe,He,Re){ce(Pe),ce(He),ce(Re);const je=i.length/3,te=b.generateTopUV(r,i,je-3,je-2,je-1);Ge(te[0]),Ge(te[1]),Ge(te[2])}function Be(Pe,He,Re,je){ce(Pe),ce(He),ce(je),ce(He),ce(Re),ce(je);const te=i.length/3,ee=b.generateSideWallUV(r,i,te-6,te-3,te-2,te-1);Ge(ee[0]),Ge(ee[1]),Ge(ee[3]),Ge(ee[1]),Ge(ee[2]),Ge(ee[3])}function ce(Pe){i.push(c[Pe*3+0]),i.push(c[Pe*3+1]),i.push(c[Pe*3+2])}function Ge(Pe){s.push(Pe.x),s.push(Pe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return Gue(n,r,e)}static fromJSON(e,n){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new U2[i.type]().fromJSON(i)),new sP(r,e.options)}}const Kue={generateTopUV:function(t,e,n,r,i){const s=e[n*3],o=e[n*3+1],a=e[r*3],c=e[r*3+1],l=e[i*3],u=e[i*3+1];return[new St(s,o),new St(a,c),new St(l,u)]},generateSideWallUV:function(t,e,n,r,i,s){const o=e[n*3],a=e[n*3+1],c=e[n*3+2],l=e[r*3],u=e[r*3+1],d=e[r*3+2],h=e[i*3],f=e[i*3+1],p=e[i*3+2],g=e[s*3],m=e[s*3+1],y=e[s*3+2];return Math.abs(a-u)<Math.abs(o-l)?[new St(o,1-c),new St(l,1-d),new St(h,1-p),new St(g,1-y)]:[new St(a,1-c),new St(u,1-d),new St(f,1-p),new St(m,1-y)]}};function Gue(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const s=t[r];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class oP extends fh{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new oP(e.radius,e.detail)}}class i_ extends fh{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new i_(e.radius,e.detail)}}class hv extends Mn{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const s=e/2,o=n/2,a=Math.floor(r),c=Math.floor(i),l=a+1,u=c+1,d=e/a,h=n/c,f=[],p=[],g=[],m=[];for(let y=0;y<u;y++){const b=y*h-o;for(let x=0;x<l;x++){const S=x*d-s;p.push(S,-b,0),g.push(0,0,1),m.push(x/a),m.push(1-y/c)}}for(let y=0;y<c;y++)for(let b=0;b<a;b++){const x=b+l*y,S=b+l*(y+1),P=b+1+l*(y+1),_=b+1+l*y;f.push(x,S,_),f.push(S,P,_)}this.setIndex(f),this.setAttribute("position",new tn(p,3)),this.setAttribute("normal",new tn(g,3)),this.setAttribute("uv",new tn(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hv(e.width,e.height,e.widthSegments,e.heightSegments)}}class aP extends Mn{constructor(e=.5,n=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],c=[],l=[],u=[];let d=e;const h=(n-e)/i,f=new Ce,p=new St;for(let g=0;g<=i;g++){for(let m=0;m<=r;m++){const y=s+m/r*o;f.x=d*Math.cos(y),f.y=d*Math.sin(y),c.push(f.x,f.y,f.z),l.push(0,0,1),p.x=(f.x/n+1)/2,p.y=(f.y/n+1)/2,u.push(p.x,p.y)}d+=h}for(let g=0;g<i;g++){const m=g*(r+1);for(let y=0;y<r;y++){const b=y+m,x=b,S=b+r+1,P=b+r+2,_=b+1;a.push(x,S,_),a.push(S,P,_)}}this.setIndex(a),this.setAttribute("position",new tn(c,3)),this.setAttribute("normal",new tn(l,3)),this.setAttribute("uv",new tn(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new aP(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class lP extends Mn{constructor(e=new Pm([new St(0,.5),new St(-.5,-.5),new St(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],s=[],o=[];let a=0,c=0;if(Array.isArray(e)===!1)l(e);else for(let u=0;u<e.length;u++)l(e[u]),this.addGroup(a,c,u),a+=c,c=0;this.setIndex(r),this.setAttribute("position",new tn(i,3)),this.setAttribute("normal",new tn(s,3)),this.setAttribute("uv",new tn(o,2));function l(u){const d=i.length/3,h=u.extractPoints(n);let f=h.shape;const p=h.holes;nu.isClockWise(f)===!1&&(f=f.reverse());for(let m=0,y=p.length;m<y;m++){const b=p[m];nu.isClockWise(b)===!0&&(p[m]=b.reverse())}const g=nu.triangulateShape(f,p);for(let m=0,y=p.length;m<y;m++){const b=p[m];f=f.concat(b)}for(let m=0,y=f.length;m<y;m++){const b=f[m];i.push(b.x,b.y,0),s.push(0,0,1),o.push(b.x,b.y)}for(let m=0,y=g.length;m<y;m++){const b=g[m],x=b[0]+d,S=b[1]+d,P=b[2]+d;r.push(x,S,P),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return Xue(n,e)}static fromJSON(e,n){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=n[e.shapes[i]];r.push(o)}return new lP(r,e.curveSegments)}}function Xue(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class s_ extends Mn{constructor(e=1,n=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const c=Math.min(o+a,Math.PI);let l=0;const u=[],d=new Ce,h=new Ce,f=[],p=[],g=[],m=[];for(let y=0;y<=r;y++){const b=[],x=y/r;let S=0;y===0&&o===0?S=.5/n:y===r&&c===Math.PI&&(S=-.5/n);for(let P=0;P<=n;P++){const _=P/n;d.x=-e*Math.cos(i+_*s)*Math.sin(o+x*a),d.y=e*Math.cos(o+x*a),d.z=e*Math.sin(i+_*s)*Math.sin(o+x*a),p.push(d.x,d.y,d.z),h.copy(d).normalize(),g.push(h.x,h.y,h.z),m.push(_+S,1-x),b.push(l++)}u.push(b)}for(let y=0;y<r;y++)for(let b=0;b<n;b++){const x=u[y][b+1],S=u[y][b],P=u[y+1][b],_=u[y+1][b+1];(y!==0||o>0)&&f.push(x,S,_),(y!==r-1||c<Math.PI)&&f.push(S,P,_)}this.setIndex(f),this.setAttribute("position",new tn(p,3)),this.setAttribute("normal",new tn(g,3)),this.setAttribute("uv",new tn(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new s_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class cP extends fh{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new cP(e.radius,e.detail)}}class uP extends Mn{constructor(e=1,n=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],c=[],l=[],u=new Ce,d=new Ce,h=new Ce;for(let f=0;f<=r;f++)for(let p=0;p<=i;p++){const g=p/i*s,m=f/r*Math.PI*2;d.x=(e+n*Math.cos(m))*Math.cos(g),d.y=(e+n*Math.cos(m))*Math.sin(g),d.z=n*Math.sin(m),a.push(d.x,d.y,d.z),u.x=e*Math.cos(g),u.y=e*Math.sin(g),h.subVectors(d,u).normalize(),c.push(h.x,h.y,h.z),l.push(p/i),l.push(f/r)}for(let f=1;f<=r;f++)for(let p=1;p<=i;p++){const g=(i+1)*f+p-1,m=(i+1)*(f-1)+p-1,y=(i+1)*(f-1)+p,b=(i+1)*f+p;o.push(g,m,b),o.push(m,y,b)}this.setIndex(o),this.setAttribute("position",new tn(a,3)),this.setAttribute("normal",new tn(c,3)),this.setAttribute("uv",new tn(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uP(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class dP extends Mn{constructor(e=1,n=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],c=[],l=[],u=[],d=new Ce,h=new Ce,f=new Ce,p=new Ce,g=new Ce,m=new Ce,y=new Ce;for(let x=0;x<=r;++x){const S=x/r*s*Math.PI*2;b(S,s,o,e,f),b(S+.01,s,o,e,p),m.subVectors(p,f),y.addVectors(p,f),g.crossVectors(m,y),y.crossVectors(g,m),g.normalize(),y.normalize();for(let P=0;P<=i;++P){const _=P/i*Math.PI*2,I=-n*Math.cos(_),C=n*Math.sin(_);d.x=f.x+(I*y.x+C*g.x),d.y=f.y+(I*y.y+C*g.y),d.z=f.z+(I*y.z+C*g.z),c.push(d.x,d.y,d.z),h.subVectors(d,f).normalize(),l.push(h.x,h.y,h.z),u.push(x/r),u.push(P/i)}}for(let x=1;x<=r;x++)for(let S=1;S<=i;S++){const P=(i+1)*(x-1)+(S-1),_=(i+1)*x+(S-1),I=(i+1)*x+S,C=(i+1)*(x-1)+S;a.push(P,_,C),a.push(_,I,C)}this.setIndex(a),this.setAttribute("position",new tn(c,3)),this.setAttribute("normal",new tn(l,3)),this.setAttribute("uv",new tn(u,2));function b(x,S,P,_,I){const C=Math.cos(x),A=Math.sin(x),M=P/S*x,k=Math.cos(M);I.x=_*(2+k)*.5*C,I.y=_*(2+k)*A*.5,I.z=_*Math.sin(M)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dP(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class fP extends Mn{constructor(e=new sO(new Ce(-1,-1,0),new Ce(-1,1,0),new Ce(1,1,0)),n=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new Ce,c=new Ce,l=new St;let u=new Ce;const d=[],h=[],f=[],p=[];g(),this.setIndex(p),this.setAttribute("position",new tn(d,3)),this.setAttribute("normal",new tn(h,3)),this.setAttribute("uv",new tn(f,2));function g(){for(let x=0;x<n;x++)m(x);m(s===!1?n:0),b(),y()}function m(x){u=e.getPointAt(x/n,u);const S=o.normals[x],P=o.binormals[x];for(let _=0;_<=i;_++){const I=_/i*Math.PI*2,C=Math.sin(I),A=-Math.cos(I);c.x=A*S.x+C*P.x,c.y=A*S.y+C*P.y,c.z=A*S.z+C*P.z,c.normalize(),h.push(c.x,c.y,c.z),a.x=u.x+r*c.x,a.y=u.y+r*c.y,a.z=u.z+r*c.z,d.push(a.x,a.y,a.z)}}function y(){for(let x=1;x<=n;x++)for(let S=1;S<=i;S++){const P=(i+1)*(x-1)+(S-1),_=(i+1)*x+(S-1),I=(i+1)*x+S,C=(i+1)*(x-1)+S;p.push(P,_,C),p.push(_,I,C)}}function b(){for(let x=0;x<=n;x++)for(let S=0;S<=i;S++)l.x=x/n,l.y=S/i,f.push(l.x,l.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new fP(new U2[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class vV extends Mn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,i=new Ce,s=new Ce;if(e.index!==null){const o=e.attributes.position,a=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:a.count,materialIndex:0}]);for(let l=0,u=c.length;l<u;++l){const d=c[l],h=d.start,f=d.count;for(let p=h,g=h+f;p<g;p+=3)for(let m=0;m<3;m++){const y=a.getX(p+m),b=a.getX(p+(m+1)%3);i.fromBufferAttribute(o,y),s.fromBufferAttribute(o,b),K6(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,c=o.count/3;a<c;a++)for(let l=0;l<3;l++){const u=3*a+l,d=3*a+(l+1)%3;i.fromBufferAttribute(o,u),s.fromBufferAttribute(o,d),K6(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new tn(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function K6(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var G6=Object.freeze({__proto__:null,BoxGeometry:$m,CapsuleGeometry:tP,CircleGeometry:nP,ConeGeometry:rP,CylinderGeometry:fv,DodecahedronGeometry:iP,EdgesGeometry:hV,ExtrudeGeometry:sP,IcosahedronGeometry:oP,LatheGeometry:r_,OctahedronGeometry:i_,PlaneGeometry:hv,PolyhedronGeometry:fh,RingGeometry:aP,ShapeGeometry:lP,SphereGeometry:s_,TetrahedronGeometry:cP,TorusGeometry:uP,TorusKnotGeometry:dP,TubeGeometry:fP,WireframeGeometry:vV});class bV extends Us{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Wt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class xV extends wc{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class aO extends Us{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Wt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Wt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uh,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new La,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class wV extends aO{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new St(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Cn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Wt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Wt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Wt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class _V extends Us{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Wt(16777215),this.specular=new Wt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Wt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uh,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new La,this.combine=Zw,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class SV extends Us{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Wt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Wt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uh,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class EV extends Us{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uh,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class TV extends Us{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Wt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Wt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uh,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new La,this.combine=Zw,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class lO extends Us{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=OH,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class cO extends Us{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class IV extends Us{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Wt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uh,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class PV extends Co{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function gm(t,e){return!t||t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function CV(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function MV(t){function e(i,s){return t[i]-t[s]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function jR(t,e,n){const r=t.length,i=new t.constructor(r);for(let s=0,o=0;o!==r;++s){const a=n[s]*e;for(let c=0;c!==e;++c)i[o++]=t[a+c]}return i}function uO(t,e,n,r){let i=1,s=t[0];for(;s!==void 0&&s[r]===void 0;)s=t[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),n.push(...o)),s=t[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),n.push(o)),s=t[i++];while(s!==void 0)}function Yue(t,e,n,r,i=30){const s=t.clone();s.name=e;const o=[];for(let c=0;c<s.tracks.length;++c){const l=s.tracks[c],u=l.getValueSize(),d=[],h=[];for(let f=0;f<l.times.length;++f){const p=l.times[f]*i;if(!(p<n||p>=r)){d.push(l.times[f]);for(let g=0;g<u;++g)h.push(l.values[f*u+g])}}d.length!==0&&(l.times=gm(d,l.times.constructor),l.values=gm(h,l.values.constructor),o.push(l))}s.tracks=o;let a=1/0;for(let c=0;c<s.tracks.length;++c)a>s.tracks[c].times[0]&&(a=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*a);return s.resetDuration(),s}function Zue(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=n.tracks[o],c=a.ValueTypeName;if(c==="bool"||c==="string")continue;const l=t.tracks.find(function(y){return y.name===a.name&&y.ValueTypeName===c});if(l===void 0)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let h=0;const f=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);const p=a.times.length-1;let g;if(s<=a.times[0]){const y=u,b=d-u;g=a.values.slice(y,b)}else if(s>=a.times[p]){const y=p*d+u,b=y+d-u;g=a.values.slice(y,b)}else{const y=a.createInterpolant(),b=u,x=d-u;y.evaluate(s),g=y.resultBuffer.slice(b,x)}c==="quaternion"&&new ro().fromArray(g).normalize().conjugate().toArray(g);const m=l.times.length;for(let y=0;y<m;++y){const b=y*f+h;if(c==="quaternion")ro.multiplyQuaternionsFlat(l.values,b,g,0,l.values,b);else{const x=f-h*2;for(let S=0;S<x;++S)l.values[b+S]-=g[S]}}}return t.blendMode=q3,t}class Jue{static convertArray(e,n){return gm(e,n)}static isTypedArray(e){return CV(e)}static getKeyframeOrder(e){return MV(e)}static sortedArray(e,n,r){return jR(e,n,r)}static flattenJSON(e,n,r,i){uO(e,n,r,i)}static subclip(e,n,r,i,s=30){return Yue(e,n,r,i,s)}static makeClipAdditive(e,n=0,r=e,i=30){return Zue(e,n,r,i)}}class o_{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],s=n[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=n[++r],e<i)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(r=2,s=a);for(let c=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===c)break;if(i=s,s=n[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<n[a]?o=a:r=a+1}if(i=n[r],s=n[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)n[o]=r[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class AV extends o_{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:pm,endingEnd:pm}}intervalChanged_(e,n,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],c=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case mm:s=e,a=2*n-r;break;case dw:s=i.length-2,a=n+i[s]-i[s+1];break;default:s=e,a=r}if(c===void 0)switch(this.getSettings_().endingEnd){case mm:o=e,c=2*r-n;break;case dw:o=1,c=r+i[1]-i[0];break;default:o=e-1,c=n}const l=(r-n)*.5,u=this.valueSize;this._weightPrev=l/(n-a),this._weightNext=l/(c-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(r-n)/(i-n),g=p*p,m=g*p,y=-h*m+2*h*g-h*p,b=(1+h)*m+(-1.5-2*h)*g+(-.5+h)*p+1,x=(-1-f)*m+(1.5+f)*g+.5*p,S=f*m-f*g;for(let P=0;P!==a;++P)s[P]=y*o[u+P]+b*o[l+P]+x*o[c+P]+S*o[d+P];return s}}class dO extends o_{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=(r-n)/(i-n),d=1-u;for(let h=0;h!==a;++h)s[h]=o[l+h]*d+o[c+h]*u;return s}}class RV extends o_{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Tl{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=gm(n,this.TimeBufferType),this.values=gm(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:gm(e.times,Array),values:gm(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new RV(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new dO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new AV(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case uw:n=this.InterpolantFactoryMethodDiscrete;break;case L2:n=this.InterpolantFactoryMethodLinear;break;case PT:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return uw;case this.InterpolantFactoryMethodLinear:return L2;case this.InterpolantFactoryMethodSmooth:return PT}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>n;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const c=r[a];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,o),e=!1;break}o=c}if(i!==void 0&&CV(i))for(let a=0,c=i.length;a!==c;++a){const l=i[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===PT,s=e.length-1;let o=1;for(let a=1;a<s;++a){let c=!1;const l=e[a],u=e[a+1];if(l!==u&&(a!==1||l!==e[0]))if(i)c=!0;else{const d=a*r,h=d-r,f=d+r;for(let p=0;p!==r;++p){const g=n[d+p];if(g!==n[h+p]||g!==n[f+p]){c=!0;break}}}if(c){if(a!==o){e[o]=e[a];const d=a*r,h=o*r;for(let f=0;f!==r;++f)n[h+f]=n[d+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,c=o*r,l=0;l!==r;++l)n[c+l]=n[a+l];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=n.slice(0,o*r)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}Tl.prototype.ValueTypeName="";Tl.prototype.TimeBufferType=Float32Array;Tl.prototype.ValueBufferType=Float32Array;Tl.prototype.DefaultInterpolation=L2;class zm extends Tl{constructor(e,n,r){super(e,n,r)}}zm.prototype.ValueTypeName="bool";zm.prototype.ValueBufferType=Array;zm.prototype.DefaultInterpolation=uw;zm.prototype.InterpolantFactoryMethodLinear=void 0;zm.prototype.InterpolantFactoryMethodSmooth=void 0;class fO extends Tl{constructor(e,n,r,i){super(e,n,r,i)}}fO.prototype.ValueTypeName="color";class xw extends Tl{constructor(e,n,r,i){super(e,n,r,i)}}xw.prototype.ValueTypeName="number";class kV extends o_{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=(r-n)/(i-n);let l=e*a;for(let u=l+a;l!==u;l+=4)ro.slerpFlat(s,0,o,l-a,o,l,c);return s}}class a_ extends Tl{constructor(e,n,r,i){super(e,n,r,i)}InterpolantFactoryMethodLinear(e){return new kV(this.times,this.values,this.getValueSize(),e)}}a_.prototype.ValueTypeName="quaternion";a_.prototype.InterpolantFactoryMethodSmooth=void 0;class Hm extends Tl{constructor(e,n,r){super(e,n,r)}}Hm.prototype.ValueTypeName="string";Hm.prototype.ValueBufferType=Array;Hm.prototype.DefaultInterpolation=uw;Hm.prototype.InterpolantFactoryMethodLinear=void 0;Hm.prototype.InterpolantFactoryMethodSmooth=void 0;class ww extends Tl{constructor(e,n,r,i){super(e,n,r,i)}}ww.prototype.ValueTypeName="vector";class _w{constructor(e="",n=-1,r=[],i=KI){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=ka(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)n.push(ede(r[o]).scale(i));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)n.push(Tl.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const s=n.length,o=[];for(let a=0;a<s;a++){let c=[],l=[];c.push((a+s-1)%s,a,(a+1)%s),l.push(0,1,0);const u=MV(c);c=jR(c,1,u),l=jR(l,1,u),!i&&c[0]===0&&(c.push(s),l.push(l[0])),o.push(new xw(".morphTargetInfluences["+n[a].name+"]",c,l).scale(1/r))}return new this(e,-1,o)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,c=e.length;a<c;a++){const l=e[a],u=l.name.match(s);if(u&&u.length>1){const d=u[1];let h=i[d];h||(i[d]=h=[]),h.push(l)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],n,r));return o}static parseAnimation(e,n){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(d,h,f,p,g){if(f.length!==0){const m=[],y=[];uO(f,m,y,p),m.length!==0&&g.push(new d(h,m,y))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let c=e.length||-1;const l=e.hierarchy||[];for(let d=0;d<l.length;d++){const h=l[d].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const f={};let p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let g=0;g<h[p].morphTargets.length;g++)f[h[p].morphTargets[g]]=-1;for(const g in f){const m=[],y=[];for(let b=0;b!==h[p].morphTargets.length;++b){const x=h[p];m.push(x.time),y.push(x.morphTarget===g?1:0)}i.push(new xw(".morphTargetInfluence["+g+"]",m,y))}c=f.length*o}else{const f=".bones["+n[d].name+"]";r(ww,f+".position",h,"pos",i),r(a_,f+".quaternion",h,"rot",i),r(ww,f+".scale",h,"scl",i)}}return i.length===0?null:new this(s,c,i,a)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Que(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return xw;case"vector":case"vector2":case"vector3":case"vector4":return ww;case"color":return fO;case"quaternion":return a_;case"bool":case"boolean":return zm;case"string":return Hm}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function ede(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Que(t.type);if(t.times===void 0){const n=[],r=[];uO(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Cd={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class hO{constructor(e,n,r){const i=this;let s=!1,o=0,a=0,c;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(u){a++,s===!1&&i.onStart!==void 0&&i.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,i.onProgress!==void 0&&i.onProgress(u,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return c?c(u):u},this.setURLModifier=function(u){return c=u,this},this.addHandler=function(u,d){return l.push(u,d),this},this.removeHandler=function(u){const d=l.indexOf(u);return d!==-1&&l.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=l.length;d<h;d+=2){const f=l[d],p=l[d+1];if(f.global&&(f.lastIndex=0),f.test(u))return p}return null}}}const OV=new hO;class Mo{constructor(e){this.manager=e!==void 0?e:OV,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,s){r.load(e,i,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Mo.DEFAULT_MATERIAL_NAME="__DEFAULT";const td={};class tde extends Error{constructor(e,n){super(e),this.response=n}}class lu extends Mo{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Cd.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(td[e]!==void 0){td[e].push({onLoad:n,onProgress:r,onError:i});return}td[e]=[],td[e].push({onLoad:n,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,c=this.responseType;fetch(o).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;const u=td[e],d=l.body.getReader(),h=l.headers.get("X-File-Size")||l.headers.get("Content-Length"),f=h?parseInt(h):0,p=f!==0;let g=0;const m=new ReadableStream({start(y){b();function b(){d.read().then(({done:x,value:S})=>{if(x)y.close();else{g+=S.byteLength;const P=new ProgressEvent("progress",{lengthComputable:p,loaded:g,total:f});for(let _=0,I=u.length;_<I;_++){const C=u[_];C.onProgress&&C.onProgress(P)}y.enqueue(S),b()}},x=>{y.error(x)})}}});return new Response(m)}else throw new tde(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(c){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return l.json();default:if(a==="")return l.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),h=d&&d[1]?d[1].toLowerCase():void 0,f=new TextDecoder(h);return l.arrayBuffer().then(p=>f.decode(p))}}}).then(l=>{Cd.add(e,l);const u=td[e];delete td[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onLoad&&f.onLoad(l)}}).catch(l=>{const u=td[e];if(u===void 0)throw this.manager.itemError(e),l;delete td[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onError&&f.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class nde extends Mo{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new lu(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},r,i)}parse(e){const n=[];for(let r=0;r<e.length;r++){const i=_w.parse(e[r]);n.push(i)}return n}}class rde extends Mo{constructor(e){super(e)}load(e,n,r,i){const s=this,o=[],a=new QI,c=new lu(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(s.withCredentials);let l=0;function u(d){c.load(e[d],function(h){const f=s.parse(h,!0);o[d]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},l+=1,l===6&&(f.mipmapCount===1&&(a.minFilter=cs),a.image=o,a.format=f.format,a.needsUpdate=!0,n&&n(a))},r,i)}if(Array.isArray(e))for(let d=0,h=e.length;d<h;++d)u(d);else c.load(e,function(d){const h=s.parse(d,!0);if(h.isCubemap){const f=h.mipmaps.length/h.mipmapCount;for(let p=0;p<f;p++){o[p]={mipmaps:[]};for(let g=0;g<h.mipmapCount;g++)o[p].mipmaps.push(h.mipmaps[p*h.mipmapCount+g]),o[p].format=h.format,o[p].width=h.width,o[p].height=h.height}a.image=o}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;h.mipmapCount===1&&(a.minFilter=cs),a.format=h.format,a.needsUpdate=!0,n&&n(a)},r,i);return a}}class Sw extends Mo{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Cd.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=mw("img");function c(){u(),Cd.add(e,this),n&&n(this),s.manager.itemEnd(e)}function l(d){u(),i&&i(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",c,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",l,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class ide extends Mo{constructor(e){super(e)}load(e,n,r,i){const s=new t_;s.colorSpace=Ko;const o=new Sw(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function c(l){o.load(e[l],function(u){s.images[l]=u,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,i)}for(let l=0;l<e.length;++l)c(l);return s}}class sde extends Mo{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new tu,a=new lu(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(c){let l;try{l=s.parse(c)}catch(u){if(i!==void 0)i(u);else{console.error(u);return}}l.image!==void 0?o.image=l.image:l.data!==void 0&&(o.image.width=l.width,o.image.height=l.height,o.image.data=l.data),o.wrapS=l.wrapS!==void 0?l.wrapS:pl,o.wrapT=l.wrapT!==void 0?l.wrapT:pl,o.magFilter=l.magFilter!==void 0?l.magFilter:cs,o.minFilter=l.minFilter!==void 0?l.minFilter:cs,o.anisotropy=l.anisotropy!==void 0?l.anisotropy:1,l.colorSpace!==void 0&&(o.colorSpace=l.colorSpace),l.flipY!==void 0&&(o.flipY=l.flipY),l.format!==void 0&&(o.format=l.format),l.type!==void 0&&(o.type=l.type),l.mipmaps!==void 0&&(o.mipmaps=l.mipmaps,o.minFilter=Yc),l.mipmapCount===1&&(o.minFilter=cs),l.generateMipmaps!==void 0&&(o.generateMipmaps=l.generateMipmaps),o.needsUpdate=!0,n&&n(o,l)},r,i),o}}class ode extends Mo{constructor(e){super(e)}load(e,n,r,i){const s=new vi,o=new Sw(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},r,i),s}}class hh extends yr{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Wt(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}}class NV extends hh{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(yr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Wt(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const SM=new vn,X6=new Ce,Y6=new Ce;class pO{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new St(512,512),this.map=null,this.mapPass=null,this.matrix=new vn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new n_,this._frameExtents=new St(1,1),this._viewportCount=1,this._viewports=[new gr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;X6.setFromMatrixPosition(e.matrixWorld),n.position.copy(X6),Y6.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(Y6),n.updateMatrixWorld(),SM.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(SM),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(SM)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class ade extends pO{constructor(){super(new li(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=jy*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(r!==n.fov||i!==n.aspect||s!==n.far)&&(n.fov=r,n.aspect=i,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class LV extends hh{constructor(e,n,r=0,i=Math.PI/3,s=0,o=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(yr.DEFAULT_UP),this.updateMatrix(),this.target=new yr,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new ade}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Z6=new vn,jb=new Ce,EM=new Ce;class lde extends pO{constructor(){super(new li(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new St(4,2),this._viewportCount=6,this._viewports=[new gr(2,1,1,1),new gr(0,1,1,1),new gr(3,1,1,1),new gr(1,1,1,1),new gr(3,0,1,1),new gr(1,0,1,1)],this._cubeDirections=[new Ce(1,0,0),new Ce(-1,0,0),new Ce(0,0,1),new Ce(0,0,-1),new Ce(0,1,0),new Ce(0,-1,0)],this._cubeUps=[new Ce(0,1,0),new Ce(0,1,0),new Ce(0,1,0),new Ce(0,1,0),new Ce(0,0,1),new Ce(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),jb.setFromMatrixPosition(e.matrixWorld),r.position.copy(jb),EM.copy(r.position),EM.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(EM),r.updateMatrixWorld(),i.makeTranslation(-jb.x,-jb.y,-jb.z),Z6.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Z6)}}class DV extends hh{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new lde}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Qf extends e_{constructor(e=-1,n=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+n,c=i-n;if(this.view!==null&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,o=s+l*this.view.width,a-=u*this.view.offsetY,c=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}class cde extends pO{constructor(){super(new Qf(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class BV extends hh{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(yr.DEFAULT_UP),this.updateMatrix(),this.target=new yr,this.shadow=new cde}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class FV extends hh{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class UV extends hh{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class $V{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Ce)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*i),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*r),n.addScaledVector(o[4],1.092548*(r*i)),n.addScaledVector(o[5],1.092548*(i*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(r*s)),n.addScaledVector(o[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*i),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*r),n.addScaledVector(o[4],2*.429043*r*i),n.addScaledVector(o[5],2*.429043*i*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*r*s),n.addScaledVector(o[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,s=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*s,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*r*s,n[8]=.546274*(r*r-i*i)}}class zV extends hh{constructor(e=new $V,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class hP extends Mo{constructor(e){super(e),this.textures={}}load(e,n,r,i){const s=this,o=new lu(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},r,i)}parse(e){const n=this.textures;function r(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Wt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new Wt().setHex(o.value);break;case"v2":i.uniforms[s].value=new St().fromArray(o.value);break;case"v3":i.uniforms[s].value=new Ce().fromArray(o.value);break;case"v4":i.uniforms[s].value=new gr().fromArray(o.value);break;case"m3":i.uniforms[s].value=new On().fromArray(o.value);break;case"m4":i.uniforms[s].value=new vn().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new St().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new St().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return hP.createMaterialFromType(e)}static createMaterialFromType(e){const n={ShadowMaterial:bV,SpriteMaterial:Z3,RawShaderMaterial:xV,ShaderMaterial:wc,PointsMaterial:Q3,MeshPhysicalMaterial:wV,MeshStandardMaterial:aO,MeshPhongMaterial:_V,MeshToonMaterial:SV,MeshNormalMaterial:EV,MeshLambertMaterial:TV,MeshDepthMaterial:lO,MeshDistanceMaterial:cO,MeshBasicMaterial:dh,MeshMatcapMaterial:IV,LineDashedMaterial:PV,LineBasicMaterial:Co,Material:Us};return new n[e]}}class $2{static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class HV extends Mn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class VV extends Mo{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new lu(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},r,i)}parse(e){const n={},r={};function i(f,p){if(n[p]!==void 0)return n[p];const m=f.interleavedBuffers[p],y=s(f,m.buffer),b=hy(m.type,y),x=new JI(b,m.stride);return x.uuid=m.uuid,n[p]=x,x}function s(f,p){if(r[p]!==void 0)return r[p];const m=f.arrayBuffers[p],y=new Uint32Array(m).buffer;return r[p]=y,y}const o=e.isInstancedBufferGeometry?new HV:new Mn,a=e.data.index;if(a!==void 0){const f=hy(a.type,a.array);o.setIndex(new _r(f,1))}const c=e.data.attributes;for(const f in c){const p=c[f];let g;if(p.isInterleavedBufferAttribute){const m=i(e.data,p.data);g=new Lm(m,p.itemSize,p.offset,p.normalized)}else{const m=hy(p.type,p.array),y=p.isInstancedBufferAttribute?Ky:_r;g=new y(m,p.itemSize,p.normalized)}p.name!==void 0&&(g.name=p.name),p.usage!==void 0&&g.setUsage(p.usage),o.setAttribute(f,g)}const l=e.data.morphAttributes;if(l)for(const f in l){const p=l[f],g=[];for(let m=0,y=p.length;m<y;m++){const b=p[m];let x;if(b.isInterleavedBufferAttribute){const S=i(e.data,b.data);x=new Lm(S,b.itemSize,b.offset,b.normalized)}else{const S=hy(b.type,b.array);x=new _r(S,b.itemSize,b.normalized)}b.name!==void 0&&(x.name=b.name),g.push(x)}o.morphAttributes[f]=g}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let f=0,p=d.length;f!==p;++f){const g=d[f];o.addGroup(g.start,g.count,g.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const f=new Ce;h.center!==void 0&&f.fromArray(h.center),o.boundingSphere=new io(f,h.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class ude extends Mo{constructor(e){super(e)}load(e,n,r,i){const s=this,o=this.path===""?$2.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new lu(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(c){let l=null;try{l=JSON.parse(c)}catch(d){i!==void 0&&i(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const u=l.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(l,n)},r,i)}async loadAsync(e,n){const r=this,i=this.path===""?$2.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new lu(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),a=JSON.parse(o),c=a.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,n){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){n!==void 0&&n(l)}),a=this.parseTextures(e.textures,o),c=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,s,c,a,r),u=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,u),this.bindLightTargets(l),n!==void 0){let d=!1;for(const h in o)if(o[h].data instanceof HTMLImageElement){d=!0;break}d===!1&&n(l)}return l}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,i,a,o,n),l=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,l),this.bindLightTargets(c),c}parseShapes(e){const n={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new Pm().fromJSON(e[r]);n[s.uuid]=s}return n}parseSkeletons(e,n){const r={},i={};if(n.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new tV().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,n){const r={};if(e!==void 0){const i=new VV;for(let s=0,o=e.length;s<o;s++){let a;const c=e[s];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(c);break;default:c.type in G6?a=G6[c.type].fromJSON(c,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}a.uuid=c.uuid,c.name!==void 0&&(a.name=c.name),c.userData!==void 0&&(a.userData=c.userData),r[c.uuid]=a}}return r}parseMaterials(e,n){const r={},i={};if(e!==void 0){const s=new hP;s.setTextures(n);for(let o=0,a=e.length;o<a;o++){const c=e[o];r[c.uuid]===void 0&&(r[c.uuid]=s.parse(c)),i[c.uuid]=r[c.uuid]}}return i}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=_w.parse(i);n[s.uuid]=s}return n}parseImages(e,n){const r=this,i={};let s;function o(c){return r.manager.itemStart(c),s.load(c,function(){r.manager.itemEnd(c)},void 0,function(){r.manager.itemError(c),r.manager.itemEnd(c)})}function a(c){if(typeof c=="string"){const l=c,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:r.resourcePath+l;return o(u)}else return c.data?{data:hy(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new hO(n);s=new Sw(c),s.setCrossOrigin(this.crossOrigin);for(let l=0,u=e.length;l<u;l++){const d=e[l],h=d.url;if(Array.isArray(h)){const f=[];for(let p=0,g=h.length;p<g;p++){const m=h[p],y=a(m);y!==null&&(y instanceof HTMLImageElement?f.push(y):f.push(new tu(y.data,y.width,y.height)))}i[d.uuid]=new Yf(f)}else{const f=a(d.url);i[d.uuid]=new Yf(f)}}}return i}async parseImagesAsync(e){const n=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await i.loadAsync(c)}else return o.data?{data:hy(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new Sw(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const c=e[o],l=c.url;if(Array.isArray(l)){const u=[];for(let d=0,h=l.length;d<h;d++){const f=l[d],p=await s(f);p!==null&&(p instanceof HTMLImageElement?u.push(p):u.push(new tu(p.data,p.width,p.height)))}r[c.uuid]=new Yf(u)}else{const u=await s(c.url);r[c.uuid]=new Yf(u)}}}return r}parseTextures(e,n){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const c=n[a.image],l=c.data;let u;Array.isArray(l)?(u=new t_,l.length===6&&(u.needsUpdate=!0)):(l&&l.data?u=new tu:u=new vi,l&&(u.needsUpdate=!0)),u.source=c,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=r(a.mapping,dde)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=r(a.wrap[0],J6),u.wrapT=r(a.wrap[1],J6)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.minFilter!==void 0&&(u.minFilter=r(a.minFilter,Q6)),a.magFilter!==void 0&&(u.magFilter=r(a.magFilter,Q6)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),i[a.uuid]=u}return i}parseObject(e,n,r,i,s){let o;function a(h){return n[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),n[h]}function c(h){if(h!==void 0){if(Array.isArray(h)){const f=[];for(let p=0,g=h.length;p<g;p++){const m=h[p];r[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),f.push(r[m])}return f}return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),r[h]}}function l(h){return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),i[h]}let u,d;switch(e.type){case"Scene":o=new D2,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Wt(e.background):o.background=l(e.background)),e.environment!==void 0&&(o.environment=l(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new ZI(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new YI(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new li(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Qf(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new FV(e.color,e.intensity);break;case"DirectionalLight":o=new BV(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new DV(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new UV(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new LV(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new NV(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new zV().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),d=c(e.material),o=new eV(u,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),d=c(e.material),o=new Xi(u,d);break;case"InstancedMesh":u=a(e.geometry),d=c(e.material);const h=e.count,f=e.instanceMatrix,p=e.instanceColor;o=new rV(u,d,h),o.instanceMatrix=new Ky(new Float32Array(f.array),16),p!==void 0&&(o.instanceColor=new Ky(new Float32Array(p.array),p.itemSize));break;case"BatchedMesh":u=a(e.geometry),d=c(e.material),o=new iV(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,d),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(g=>{const m=new Fs;m.min.fromArray(g.boxMin),m.max.fromArray(g.boxMax);const y=new io;return y.radius=g.sphereRadius,y.center.fromArray(g.sphereCenter),{boxInitialized:g.boxInitialized,box:m,sphereInitialized:g.sphereInitialized,sphere:y}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=l(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=l(e.colorsTexture.uuid));break;case"LOD":o=new QH;break;case"Line":o=new rh(a(e.geometry),c(e.material));break;case"LineLoop":o=new sV(a(e.geometry),c(e.material));break;case"LineSegments":o=new fu(a(e.geometry),c(e.material));break;case"PointCloud":case"Points":o=new oV(a(e.geometry),c(e.material));break;case"Sprite":o=new JH(c(e.material));break;case"Group":o=new py;break;case"Bone":o=new J3;break;default:o=new yr}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let f=0;f<h.length;f++)o.add(this.parseObject(h[f],n,r,i,s))}if(e.animations!==void 0){const h=e.animations;for(let f=0;f<h.length;f++){const p=h[f];o.animations.push(s[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const h=e.levels;for(let f=0;f<h.length;f++){const p=h[f],g=o.getObjectByProperty("uuid",p.object);g!==void 0&&o.addLevel(g,p.distance,p.hysteresis)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}bindLightTargets(e){e.traverse(function(n){if(n.isDirectionalLight||n.isSpotLight){const r=n.target,i=e.getObjectByProperty("uuid",r);i!==void 0?n.target=i:n.target=new yr}})}}const dde={UVMapping:$I,CubeReflectionMapping:jd,CubeRefractionMapping:nh,EquirectangularReflectionMapping:ow,EquirectangularRefractionMapping:aw,CubeUVReflectionMapping:cv},J6={RepeatWrapping:lw,ClampToEdgeWrapping:pl,MirroredRepeatWrapping:cw},Q6={NearestFilter:Bs,NearestMipmapNearestFilter:D3,NearestMipmapLinearFilter:fy,LinearFilter:cs,LinearMipmapNearestFilter:Ox,LinearMipmapLinearFilter:Yc};class fde extends Mo{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Cd.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(l=>{n&&n(l),s.manager.itemEnd(e)}).catch(l=>{i&&i(l)});return}return setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const c=fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){return Cd.add(e,l),n&&n(l),s.manager.itemEnd(e),l}).catch(function(l){i&&i(l),Cd.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Cd.add(e,c),s.manager.itemStart(e)}}let fE;class mO{static getContext(){return fE===void 0&&(fE=new(window.AudioContext||window.webkitAudioContext)),fE}static setContext(e){fE=e}}class hde extends Mo{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new lu(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){try{const l=c.slice(0);mO.getContext().decodeAudioData(l,function(d){n(d)}).catch(a)}catch(l){a(l)}},r,i);function a(c){i?i(c):console.error(c),s.manager.itemError(e)}}}const e8=new vn,t8=new vn,up=new vn;class pde{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new li,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new li,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,up.copy(e.projectionMatrix);const i=n.eyeSep/2,s=i*n.near/n.focus,o=n.near*Math.tan(Tm*n.fov*.5)/n.zoom;let a,c;t8.elements[12]=-i,e8.elements[12]=i,a=-o*n.aspect+s,c=o*n.aspect+s,up.elements[0]=2*n.near/(c-a),up.elements[8]=(c+a)/(c-a),this.cameraL.projectionMatrix.copy(up),a=-o*n.aspect-s,c=o*n.aspect-s,up.elements[0]=2*n.near/(c-a),up.elements[8]=(c+a)/(c-a),this.cameraR.projectionMatrix.copy(up)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(t8),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(e8)}}class WV extends li{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class gO{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=n8(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=n8();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function n8(){return performance.now()}const dp=new Ce,r8=new ro,mde=new Ce,fp=new Ce;class gde extends yr{constructor(){super(),this.type="AudioListener",this.context=mO.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new gO}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(dp,r8,mde),fp.set(0,0,-1).applyQuaternion(r8),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(dp.x,i),n.positionY.linearRampToValueAtTime(dp.y,i),n.positionZ.linearRampToValueAtTime(dp.z,i),n.forwardX.linearRampToValueAtTime(fp.x,i),n.forwardY.linearRampToValueAtTime(fp.y,i),n.forwardZ.linearRampToValueAtTime(fp.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition(dp.x,dp.y,dp.z),n.setOrientation(fp.x,fp.y,fp.z,r.x,r.y,r.z)}}class jV extends yr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,n){return super.copy(e,n),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const hp=new Ce,i8=new ro,yde=new Ce,pp=new Ce;class vde extends jV{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(hp,i8,yde),pp.set(0,0,1).applyQuaternion(i8);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(hp.x,r),n.positionY.linearRampToValueAtTime(hp.y,r),n.positionZ.linearRampToValueAtTime(hp.z,r),n.orientationX.linearRampToValueAtTime(pp.x,r),n.orientationY.linearRampToValueAtTime(pp.y,r),n.orientationZ.linearRampToValueAtTime(pp.z,r)}else n.setPosition(hp.x,hp.y,hp.z),n.setOrientation(pp.x,pp.y,pp.z)}}class bde{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class qV{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,s,o;switch(n){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const c=n*this._origIndex;this._mixBufferRegion(r,i,c,1-s,n)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let c=n,l=n+n;c!==l;++c)if(r[c]!==r[c+n]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let s=r,o=i;s!==o;++s)n[s]=n[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[n+o]=e[r+o]}_slerp(e,n,r,i){ro.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,s){const o=this._workIndex*s;ro.multiplyQuaternionsFlat(e,o,e,n,e,r),ro.slerpFlat(e,n,e,n,e,o,i)}_lerp(e,n,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const c=n+a;e[c]=e[c]*o+e[r+a]*i}}_lerpAdditive(e,n,r,i,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[r+o]*i}}}const yO="\\[\\]\\.:\\/",xde=new RegExp("["+yO+"]","g"),vO="[^"+yO+"]",wde="[^"+yO.replace("\\.","")+"]",_de=/((?:WC+[\/:])*)/.source.replace("WC",vO),Sde=/(WCOD+)?/.source.replace("WCOD",wde),Ede=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",vO),Tde=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",vO),Ide=new RegExp("^"+_de+Sde+Ede+Tde+"$"),Pde=["material","materials","bones","map"];class Cde{constructor(e,n,r){const i=r||mr.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class mr{constructor(e,n,r){this.path=n,this.parsedPath=r||mr.parseTrackName(n),this.node=mr.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new mr.Composite(e,n,r):new mr(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(xde,"")}static parseTrackName(e){const n=Ide.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);Pde.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const c=r(a.children);if(c)return c}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let s=n.propertyIndex;if(e||(e=mr.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let l=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===l){l=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(l!==void 0){if(e[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[l]}}const o=e[i];if(o===void 0){const l=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?a=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(c=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}mr.Composite=Cde;mr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};mr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};mr.prototype.GetterByBindingType=[mr.prototype._getValue_direct,mr.prototype._getValue_array,mr.prototype._getValue_arrayElement,mr.prototype._getValue_toArray];mr.prototype.SetterByBindingTypeAndVersioning=[[mr.prototype._setValue_direct,mr.prototype._setValue_direct_setNeedsUpdate,mr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[mr.prototype._setValue_array,mr.prototype._setValue_array_setNeedsUpdate,mr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[mr.prototype._setValue_arrayElement,mr.prototype._setValue_arrayElement_setNeedsUpdate,mr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[mr.prototype._setValue_fromArray,mr.prototype._setValue_fromArray_setNeedsUpdate,mr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Mde{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ka(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,c=e.length,l=this.nCachedObjects_;for(let u=0,d=arguments.length;u!==d;++u){const h=arguments[u],f=h.uuid;let p=n[f];if(p===void 0){p=c++,n[f]=p,e.push(h);for(let g=0,m=o;g!==m;++g)s[g].push(new mr(h,r[g],i[g]))}else if(p<l){a=e[p];const g=--l,m=e[g];n[m.uuid]=p,e[p]=m,n[f]=g,e[g]=h;for(let y=0,b=o;y!==b;++y){const x=s[y],S=x[g];let P=x[p];x[p]=S,P===void 0&&(P=new mr(h,r[y],i[y])),x[g]=P}}else e[p]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const c=arguments[o],l=c.uuid,u=n[l];if(u!==void 0&&u>=s){const d=s++,h=e[d];n[h.uuid]=u,e[u]=h,n[l]=d,e[d]=c;for(let f=0,p=i;f!==p;++f){const g=r[f],m=g[d],y=g[u];g[u]=m,g[d]=y}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,c=arguments.length;a!==c;++a){const l=arguments[a],u=l.uuid,d=n[u];if(d!==void 0)if(delete n[u],d<s){const h=--s,f=e[h],p=--o,g=e[p];n[f.uuid]=d,e[d]=f,n[g.uuid]=h,e[h]=g,e.pop();for(let m=0,y=i;m!==y;++m){const b=r[m],x=b[h],S=b[p];b[d]=x,b[h]=S,b.pop()}}else{const h=--o,f=e[h];h>0&&(n[f.uuid]=d),e[d]=f,e.pop();for(let p=0,g=i;p!==g;++p){const m=r[p];m[d]=m[h],m.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,c=this._objects,l=c.length,u=this.nCachedObjects_,d=new Array(l);i=s.length,r[e]=i,o.push(e),a.push(n),s.push(d);for(let h=u,f=c.length;h!==f;++h){const p=c[h];d[h]=new mr(p,e,n)}return d}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,c=o[a],l=e[a];n[l]=r,o[r]=c,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class KV{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const s=n.tracks,o=s.length,a=new Array(o),c={endingStart:pm,endingEnd:pm};for(let l=0;l!==o;++l){const u=s[l].createInterpolant(null);a[l]=u,u.settings=c}this._interpolantSettings=c,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=RH,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r=!1){if(e.fadeOut(n),this.fadeIn(n),r===!0){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,r=!1){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const c=a.parameterPositions,l=a.sampleValues;return c[0]=s,c[1]=s+r,l[0]=e/o,l[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const c=(e-s)*r;c<0||r===0?n=0:(this._startTime=null,n=r*c)}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const c=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case q3:for(let u=0,d=c.length;u!==d;++u)c[u].evaluate(o),l[u].accumulateAdditive(a);break;case KI:default:for(let u=0,d=c.length;u!==d;++u)c[u].evaluate(o),l[u].accumulate(i,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===kH;if(e===0)return s===-1?i:o&&(s&1)===1?n-i:i;if(r===AH){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=n||i<0){const a=Math.floor(i/n);i-=n*a,s+=Math.abs(a);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=mm,i.endingEnd=mm):(e?i.endingStart=this.zeroSlopeAtStart?mm:pm:i.endingStart=dw,n?i.endingEnd=this.zeroSlopeAtEnd?mm:pm:i.endingEnd=dw)}_scheduleFading(e,n,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,c=o.sampleValues;return a[0]=s,c[0]=n,a[1]=s+e,c[1]=r,this}}const Ade=new Float32Array(1);class Rde extends Tc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,c=r.uuid,l=this._bindingsByRootAndName;let u=l[c];u===void 0&&(u={},l[c]=u);for(let d=0;d!==s;++d){const h=i[d],f=h.name;let p=u[f];if(p!==void 0)++p.referenceCount,o[d]=p;else{if(p=o[d],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,c,f));continue}const g=n&&n._propertyBindings[d].binding.parsedPath;p=new qV(mr.create(r,f,g),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,c,f),o[d]=p}a[d].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],c=a.knownActions,l=c[c.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,c[u]=l,c.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete d[h],c.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[n];o===void 0&&(o={},i[n]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],c=n[n.length-1],l=e._cacheIndex;c._cacheIndex=l,n[l]=c,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new dO(new Float32Array(2),new Float32Array(2),1,Ade),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=n[i];e.__cacheIndex=i,n[i]=e,s.__cacheIndex=r,n[r]=s}clipAction(e,n,r){const i=n||this._root,s=i.uuid;let o=typeof e=="string"?_w.findByName(i,e):e;const a=o!==null?o.uuid:e,c=this._actionsByClip[a];let l=null;if(r===void 0&&(o!==null?r=o.blendMode:r=KI),c!==void 0){const d=c.actionByRoot[s];if(d!==void 0&&d.blendMode===r)return d;l=c.knownActions[0],o===null&&(o=l._clip)}if(o===null)return null;const u=new KV(this,o,n,r);return this._bindAction(u,l),this._addInactiveAction(u,a,s),u}existingAction(e,n){const r=n||this._root,i=r.uuid,s=typeof e=="string"?_w.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==r;++l)n[l]._update(i,e,s,o);const a=this._bindings,c=this._nActiveBindings;for(let l=0;l!==c;++l)a[l].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,c=o.length;a!==c;++a){const l=o[a];this._deactivateAction(l);const u=l._cacheIndex,d=n[n.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,d._cacheIndex=u,n[u]=d,n.pop(),this._removeInactiveBindingsForAction(l)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,c=a[n];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const i=this._bindingsByRootAndName,s=i[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class kde extends GI{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isRenderTarget3D=!0,this.depth=r,this.texture=new XI(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class Ode extends GI{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isRenderTargetArray=!0,this.depth=r,this.texture=new Qw(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class bO{constructor(e){this.value=e}clone(){return new bO(this.value.clone===void 0?this.value:this.value.clone())}}let Nde=0;class Lde extends Tc{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Nde++}),this.name="",this.usage=hw,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,i=n.length;r<i;r++){const s=Array.isArray(n[r])?n[r]:[n[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class Dde extends JI{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class Bde{constructor(e,n,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const s8=new vn;class GV{constructor(e,n,r=0,i=1/0){this.ray=new dv(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new Im,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return s8.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(s8),this}intersectObject(e,n=!0,r=[]){return qR(e,this,r,n),r.sort(o8),r}intersectObjects(e,n=!0,r=[]){for(let i=0,s=e.length;i<s;i++)qR(e[i],this,r,n);return r.sort(o8),r}}function o8(t,e){return t.distance-e.distance}function qR(t,e,n,r){let i=!0;if(t.layers.test(e.layers)&&t.raycast(e,n)===!1&&(i=!1),i===!0&&r===!0){const s=t.children;for(let o=0,a=s.length;o<a;o++)qR(s[o],e,n,!0)}}class KR{constructor(e=1,n=0,r=0){this.radius=e,this.phi=n,this.theta=r}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Cn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Cn(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Fde{constructor(e=1,n=0,r=0){this.radius=e,this.theta=n,this.y=r}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}class xO{constructor(e,n,r,i){xO.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,n,r,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,n=0){for(let r=0;r<4;r++)this.elements[r]=e[r+n];return this}set(e,n,r,i){const s=this.elements;return s[0]=e,s[2]=n,s[1]=r,s[3]=i,this}}const a8=new St;class Ude{constructor(e=new St(1/0,1/0),n=new St(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=a8.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,a8).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const l8=new Ce,hE=new Ce;class $de{constructor(e=new Ce,n=new Ce){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){l8.subVectors(e,this.start),hE.subVectors(this.end,this.start);const r=hE.dot(hE);let s=hE.dot(l8)/r;return n&&(s=Cn(s,0,1)),s}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const c8=new Ce;class zde extends yr{constructor(e,n){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new Mn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,c=32;o<c;o++,a++){const l=o/c*Math.PI*2,u=a/c*Math.PI*2;i.push(Math.cos(l),Math.sin(l),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new tn(i,3));const s=new Co({fog:!1,toneMapped:!1});this.cone=new fu(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),c8.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(c8),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Bf=new Ce,pE=new vn,TM=new vn;class Hde extends fu{constructor(e){const n=XV(e),r=new Mn,i=[],s=[],o=new Wt(0,0,1),a=new Wt(0,1,0);for(let l=0;l<n.length;l++){const u=n[l];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new tn(i,3)),r.setAttribute("color",new tn(s,3));const c=new Co({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");TM.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(pE.multiplyMatrices(TM,a.matrixWorld),Bf.setFromMatrixPosition(pE),i.setXYZ(o,Bf.x,Bf.y,Bf.z),pE.multiplyMatrices(TM,a.parent.matrixWorld),Bf.setFromMatrixPosition(pE),i.setXYZ(o+1,Bf.x,Bf.y,Bf.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function XV(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push(...XV(t.children[n]));return e}class Vde extends Xi{constructor(e,n,r){const i=new s_(n,4,2),s=new dh({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Wde=new Ce,u8=new Wt,d8=new Wt;class jde extends yr{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new i_(n);i.rotateY(Math.PI*.5),this.material=new dh({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new _r(o,3)),this.add(new Xi(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");u8.copy(this.light.color),d8.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const s=r<i/2?u8:d8;n.setXYZ(r,s.r,s.g,s.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Wde.setFromMatrixPosition(this.light.matrixWorld).negate())}}class qde extends fu{constructor(e=10,n=10,r=4473924,i=8947848){r=new Wt(r),i=new Wt(i);const s=n/2,o=e/n,a=e/2,c=[],l=[];for(let h=0,f=0,p=-a;h<=n;h++,p+=o){c.push(-a,0,p,a,0,p),c.push(p,0,-a,p,0,a);const g=h===s?r:i;g.toArray(l,f),f+=3,g.toArray(l,f),f+=3,g.toArray(l,f),f+=3,g.toArray(l,f),f+=3}const u=new Mn;u.setAttribute("position",new tn(c,3)),u.setAttribute("color",new tn(l,3));const d=new Co({vertexColors:!0,toneMapped:!1});super(u,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Kde extends fu{constructor(e=10,n=16,r=8,i=64,s=4473924,o=8947848){s=new Wt(s),o=new Wt(o);const a=[],c=[];if(n>1)for(let d=0;d<n;d++){const h=d/n*(Math.PI*2),f=Math.sin(h)*e,p=Math.cos(h)*e;a.push(0,0,0),a.push(f,0,p);const g=d&1?s:o;c.push(g.r,g.g,g.b),c.push(g.r,g.g,g.b)}for(let d=0;d<r;d++){const h=d&1?s:o,f=e-e/r*d;for(let p=0;p<i;p++){let g=p/i*(Math.PI*2),m=Math.sin(g)*f,y=Math.cos(g)*f;a.push(m,0,y),c.push(h.r,h.g,h.b),g=(p+1)/i*(Math.PI*2),m=Math.sin(g)*f,y=Math.cos(g)*f,a.push(m,0,y),c.push(h.r,h.g,h.b)}}const l=new Mn;l.setAttribute("position",new tn(a,3)),l.setAttribute("color",new tn(c,3));const u=new Co({vertexColors:!0,toneMapped:!1});super(l,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const f8=new Ce,mE=new Ce,h8=new Ce;class Gde extends yr{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let i=new Mn;i.setAttribute("position",new tn([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new Co({fog:!1,toneMapped:!1});this.lightPlane=new rh(i,s),this.add(this.lightPlane),i=new Mn,i.setAttribute("position",new tn([0,0,0,0,0,1],3)),this.targetLine=new rh(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),f8.setFromMatrixPosition(this.light.matrixWorld),mE.setFromMatrixPosition(this.light.target.matrixWorld),h8.subVectors(mE,f8),this.lightPlane.lookAt(mE),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(mE),this.targetLine.scale.z=h8.length()}}const gE=new Ce,_i=new e_;class Xde extends fu{constructor(e){const n=new Mn,r=new Co({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(p,g){c(p),c(g)}function c(p){i.push(0,0,0),s.push(0,0,0),o[p]===void 0&&(o[p]=[]),o[p].push(i.length/3-1)}n.setAttribute("position",new tn(i,3)),n.setAttribute("color",new tn(s,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const l=new Wt(16755200),u=new Wt(16711680),d=new Wt(43775),h=new Wt(16777215),f=new Wt(3355443);this.setColors(l,u,d,h,f)}setColors(e,n,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;_i.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===gc?-1:0;Ri("c",n,e,_i,0,0,s),Ri("t",n,e,_i,0,0,1),Ri("n1",n,e,_i,-1,-1,s),Ri("n2",n,e,_i,r,-1,s),Ri("n3",n,e,_i,-1,i,s),Ri("n4",n,e,_i,r,i,s),Ri("f1",n,e,_i,-1,-1,1),Ri("f2",n,e,_i,r,-1,1),Ri("f3",n,e,_i,-1,i,1),Ri("f4",n,e,_i,r,i,1),Ri("u1",n,e,_i,r*.7,i*1.1,s),Ri("u2",n,e,_i,-1*.7,i*1.1,s),Ri("u3",n,e,_i,0,i*2,s),Ri("cf1",n,e,_i,-1,0,1),Ri("cf2",n,e,_i,r,0,1),Ri("cf3",n,e,_i,0,-1,1),Ri("cf4",n,e,_i,0,i,1),Ri("cn1",n,e,_i,-1,0,s),Ri("cn2",n,e,_i,r,0,s),Ri("cn3",n,e,_i,0,-1,s),Ri("cn4",n,e,_i,0,i,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ri(t,e,n,r,i,s,o){gE.set(i,s,o).unproject(r);const a=e[t];if(a!==void 0){const c=n.getAttribute("position");for(let l=0,u=a.length;l<u;l++)c.setXYZ(a[l],gE.x,gE.y,gE.z)}}const yE=new Fs;class Yde extends fu{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new Mn;s.setIndex(new _r(r,1)),s.setAttribute("position",new _r(i,3)),super(s,new Co({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&yE.setFromObject(this.object),yE.isEmpty())return;const e=yE.min,n=yE.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=e.x,i[4]=n.y,i[5]=n.z,i[6]=e.x,i[7]=e.y,i[8]=n.z,i[9]=n.x,i[10]=e.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=e.z,i[15]=e.x,i[16]=n.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=n.x,i[22]=e.y,i[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Zde extends fu{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Mn;s.setIndex(new _r(r,1)),s.setAttribute("position",new tn(i,3)),super(s,new Co({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Jde extends rh{constructor(e,n=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Mn;o.setAttribute("position",new tn(s,3)),o.computeBoundingSphere(),super(o,new Co({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new Mn;c.setAttribute("position",new tn(a,3)),c.computeBoundingSphere(),this.add(new Xi(c,new dh({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const p8=new Ce;let vE,IM;class Qde extends yr{constructor(e=new Ce(0,0,1),n=new Ce(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",vE===void 0&&(vE=new Mn,vE.setAttribute("position",new tn([0,0,0,0,1,0],3)),IM=new fv(0,.5,1,5,1),IM.translate(0,-.5,0)),this.position.copy(n),this.line=new rh(vE,new Co({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Xi(IM,new dh({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{p8.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(p8,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class efe extends fu{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Mn;i.setAttribute("position",new tn(n,3)),i.setAttribute("color",new tn(r,3));const s=new Co({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,n,r){const i=new Wt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(n),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class tfe{constructor(){this.type="ShapePath",this.color=new Wt,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new gw,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,i){return this.currentPath.quadraticCurveTo(e,n,r,i),this}bezierCurveTo(e,n,r,i,s,o){return this.currentPath.bezierCurveTo(e,n,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(y){const b=[];for(let x=0,S=y.length;x<S;x++){const P=y[x],_=new Pm;_.curves=P.curves,b.push(_)}return b}function r(y,b){const x=b.length;let S=!1;for(let P=x-1,_=0;_<x;P=_++){let I=b[P],C=b[_],A=C.x-I.x,M=C.y-I.y;if(Math.abs(M)>Number.EPSILON){if(M<0&&(I=b[_],A=-A,C=b[P],M=-M),y.y<I.y||y.y>C.y)continue;if(y.y===I.y){if(y.x===I.x)return!0}else{const k=M*(y.x-I.x)-A*(y.y-I.y);if(k===0)return!0;if(k<0)continue;S=!S}}else{if(y.y!==I.y)continue;if(C.x<=y.x&&y.x<=I.x||I.x<=y.x&&y.x<=C.x)return!0}}return S}const i=nu.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,c;const l=[];if(s.length===1)return a=s[0],c=new Pm,c.curves=a.curves,l.push(c),l;let u=!i(s[0].getPoints());u=e?!u:u;const d=[],h=[];let f=[],p=0,g;h[p]=void 0,f[p]=[];for(let y=0,b=s.length;y<b;y++)a=s[y],g=a.getPoints(),o=i(g),o=e?!o:o,o?(!u&&h[p]&&p++,h[p]={s:new Pm,p:g},h[p].s.curves=a.curves,u&&p++,f[p]=[]):f[p].push({h:a,p:g[0]});if(!h[0])return n(s);if(h.length>1){let y=!1,b=0;for(let x=0,S=h.length;x<S;x++)d[x]=[];for(let x=0,S=h.length;x<S;x++){const P=f[x];for(let _=0;_<P.length;_++){const I=P[_];let C=!0;for(let A=0;A<h.length;A++)r(I.p,h[A].p)&&(x!==A&&b++,C?(C=!1,d[A].push(I)):y=!0);C&&d[x].push(I)}}b>0&&y===!1&&(f=d)}let m;for(let y=0,b=h.length;y<b;y++){c=h[y].s,l.push(c),m=f[y];for(let x=0,S=m.length;x<S;x++)c.holes.push(m[x].h)}return l}}class nfe extends Tc{constructor(e,n=null){super(),this.object=e,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function rfe(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2):(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0),t}function ife(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0):(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2),t}function sfe(t){return t.repeat.x=1,t.repeat.y=1,t.offset.x=0,t.offset.y=0,t}function GR(t,e,n,r){const i=ofe(r);switch(n){case $3:return t*e;case H3:return t*e;case V3:return t*e*2;case WI:return t*e/i.components*i.byteLength;case Jw:return t*e/i.components*i.byteLength;case W3:return t*e*2/i.components*i.byteLength;case jI:return t*e*2/i.components*i.byteLength;case z3:return t*e*3/i.components*i.byteLength;case to:return t*e*4/i.components*i.byteLength;case qI:return t*e*4/i.components*i.byteLength;case Nx:case Lx:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case Dx:case Bx:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case u2:case f2:return Math.max(t,16)*Math.max(e,8)/4;case c2:case d2:return Math.max(t,8)*Math.max(e,8)/2;case h2:case p2:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case m2:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case g2:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case y2:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case v2:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case b2:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case x2:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case w2:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case _2:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case S2:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case E2:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case T2:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case I2:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case P2:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case C2:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case M2:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case Fx:case A2:case R2:return Math.ceil(t/4)*Math.ceil(e/4)*16;case j3:case k2:return Math.ceil(t/4)*Math.ceil(e/4)*8;case O2:case N2:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function ofe(t){switch(t){case xc:case B3:return{byteLength:1,components:1};case zy:case F3:case uv:return{byteLength:2,components:1};case HI:case VI:return{byteLength:2,components:4};case qd:case zI:case Zo:return{byteLength:4,components:1};case U3:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}class afe{static contain(e,n){return rfe(e,n)}static cover(e,n){return ife(e,n)}static fill(e){return sfe(e)}static getByteLength(e,n,r,i){return GR(e,n,r,i)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:FI}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=FI);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function YV(){let t=null,e=!1,n=null,r=null;function i(s,o){n(s,o),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function lfe(t){const e=new WeakMap;function n(a,c){const l=a.array,u=a.usage,d=l.byteLength,h=t.createBuffer();t.bindBuffer(c,h),t.bufferData(c,l,u),a.onUploadCallback();let f;if(l instanceof Float32Array)f=t.FLOAT;else if(l instanceof Uint16Array)a.isFloat16BufferAttribute?f=t.HALF_FLOAT:f=t.UNSIGNED_SHORT;else if(l instanceof Int16Array)f=t.SHORT;else if(l instanceof Uint32Array)f=t.UNSIGNED_INT;else if(l instanceof Int32Array)f=t.INT;else if(l instanceof Int8Array)f=t.BYTE;else if(l instanceof Uint8Array)f=t.UNSIGNED_BYTE;else if(l instanceof Uint8ClampedArray)f=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+l);return{buffer:h,type:f,bytesPerElement:l.BYTES_PER_ELEMENT,version:a.version,size:d}}function r(a,c,l){const u=c.array,d=c.updateRanges;if(t.bindBuffer(l,a),d.length===0)t.bufferSubData(l,0,u);else{d.sort((f,p)=>f.start-p.start);let h=0;for(let f=1;f<d.length;f++){const p=d[h],g=d[f];g.start<=p.start+p.count+1?p.count=Math.max(p.count,g.start+g.count-p.start):(++h,d[h]=g)}d.length=h+1;for(let f=0,p=d.length;f<p;f++){const g=d[f];t.bufferSubData(l,g.start*u.BYTES_PER_ELEMENT,u,g.start,g.count)}c.clearUpdateRanges()}c.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const c=e.get(a);c&&(t.deleteBuffer(c.buffer),e.delete(a))}function o(a,c){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const l=e.get(a);if(l===void 0)e.set(a,n(a,c));else if(l.version<a.version){if(l.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(l.buffer,a,c),l.version=a.version}}return{get:i,remove:s,update:o}}var cfe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,ufe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,dfe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,ffe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,hfe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,pfe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,mfe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,gfe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,yfe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,vfe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,bfe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,xfe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,wfe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,_fe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Sfe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Efe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Tfe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Ife=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Pfe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Cfe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Mfe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Afe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Rfe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,kfe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Ofe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Nfe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Lfe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Dfe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Bfe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Ffe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Ufe="gl_FragColor = linearToOutputTexel( gl_FragColor );",$fe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,zfe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Hfe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Vfe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Wfe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,jfe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,qfe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Kfe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Gfe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Xfe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Yfe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Zfe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Jfe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Qfe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,ehe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,the=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,nhe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,rhe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,ihe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,she=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,ohe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,ahe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lhe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,che=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,uhe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,dhe=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,fhe=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,hhe=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,phe=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,mhe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,ghe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,yhe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,vhe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,bhe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,xhe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,whe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,_he=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,She=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Ehe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,The=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Ihe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Phe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Che=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Mhe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Ahe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Rhe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,khe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Ohe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Nhe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Lhe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Dhe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Bhe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Fhe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Uhe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,$he=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,zhe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Hhe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Vhe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Whe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,jhe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,qhe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Khe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Ghe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Xhe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Yhe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Zhe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Jhe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Qhe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,epe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tpe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,npe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,rpe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,ipe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,spe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,ope=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,ape=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const lpe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cpe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,upe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,dpe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,fpe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,hpe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ppe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,mpe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,gpe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,ype=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vpe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,bpe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,xpe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,wpe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,_pe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Spe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Epe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Tpe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ipe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Ppe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Cpe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Mpe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Ape=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Rpe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kpe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Ope=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Npe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Lpe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Dpe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Bpe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Fpe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Upe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,$pe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,zpe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Hn={alphahash_fragment:cfe,alphahash_pars_fragment:ufe,alphamap_fragment:dfe,alphamap_pars_fragment:ffe,alphatest_fragment:hfe,alphatest_pars_fragment:pfe,aomap_fragment:mfe,aomap_pars_fragment:gfe,batching_pars_vertex:yfe,batching_vertex:vfe,begin_vertex:bfe,beginnormal_vertex:xfe,bsdfs:wfe,iridescence_fragment:_fe,bumpmap_pars_fragment:Sfe,clipping_planes_fragment:Efe,clipping_planes_pars_fragment:Tfe,clipping_planes_pars_vertex:Ife,clipping_planes_vertex:Pfe,color_fragment:Cfe,color_pars_fragment:Mfe,color_pars_vertex:Afe,color_vertex:Rfe,common:kfe,cube_uv_reflection_fragment:Ofe,defaultnormal_vertex:Nfe,displacementmap_pars_vertex:Lfe,displacementmap_vertex:Dfe,emissivemap_fragment:Bfe,emissivemap_pars_fragment:Ffe,colorspace_fragment:Ufe,colorspace_pars_fragment:$fe,envmap_fragment:zfe,envmap_common_pars_fragment:Hfe,envmap_pars_fragment:Vfe,envmap_pars_vertex:Wfe,envmap_physical_pars_fragment:the,envmap_vertex:jfe,fog_vertex:qfe,fog_pars_vertex:Kfe,fog_fragment:Gfe,fog_pars_fragment:Xfe,gradientmap_pars_fragment:Yfe,lightmap_pars_fragment:Zfe,lights_lambert_fragment:Jfe,lights_lambert_pars_fragment:Qfe,lights_pars_begin:ehe,lights_toon_fragment:nhe,lights_toon_pars_fragment:rhe,lights_phong_fragment:ihe,lights_phong_pars_fragment:she,lights_physical_fragment:ohe,lights_physical_pars_fragment:ahe,lights_fragment_begin:lhe,lights_fragment_maps:che,lights_fragment_end:uhe,logdepthbuf_fragment:dhe,logdepthbuf_pars_fragment:fhe,logdepthbuf_pars_vertex:hhe,logdepthbuf_vertex:phe,map_fragment:mhe,map_pars_fragment:ghe,map_particle_fragment:yhe,map_particle_pars_fragment:vhe,metalnessmap_fragment:bhe,metalnessmap_pars_fragment:xhe,morphinstance_vertex:whe,morphcolor_vertex:_he,morphnormal_vertex:She,morphtarget_pars_vertex:Ehe,morphtarget_vertex:The,normal_fragment_begin:Ihe,normal_fragment_maps:Phe,normal_pars_fragment:Che,normal_pars_vertex:Mhe,normal_vertex:Ahe,normalmap_pars_fragment:Rhe,clearcoat_normal_fragment_begin:khe,clearcoat_normal_fragment_maps:Ohe,clearcoat_pars_fragment:Nhe,iridescence_pars_fragment:Lhe,opaque_fragment:Dhe,packing:Bhe,premultiplied_alpha_fragment:Fhe,project_vertex:Uhe,dithering_fragment:$he,dithering_pars_fragment:zhe,roughnessmap_fragment:Hhe,roughnessmap_pars_fragment:Vhe,shadowmap_pars_fragment:Whe,shadowmap_pars_vertex:jhe,shadowmap_vertex:qhe,shadowmask_pars_fragment:Khe,skinbase_vertex:Ghe,skinning_pars_vertex:Xhe,skinning_vertex:Yhe,skinnormal_vertex:Zhe,specularmap_fragment:Jhe,specularmap_pars_fragment:Qhe,tonemapping_fragment:epe,tonemapping_pars_fragment:tpe,transmission_fragment:npe,transmission_pars_fragment:rpe,uv_pars_fragment:ipe,uv_pars_vertex:spe,uv_vertex:ope,worldpos_vertex:ape,background_vert:lpe,background_frag:cpe,backgroundCube_vert:upe,backgroundCube_frag:dpe,cube_vert:fpe,cube_frag:hpe,depth_vert:ppe,depth_frag:mpe,distanceRGBA_vert:gpe,distanceRGBA_frag:ype,equirect_vert:vpe,equirect_frag:bpe,linedashed_vert:xpe,linedashed_frag:wpe,meshbasic_vert:_pe,meshbasic_frag:Spe,meshlambert_vert:Epe,meshlambert_frag:Tpe,meshmatcap_vert:Ipe,meshmatcap_frag:Ppe,meshnormal_vert:Cpe,meshnormal_frag:Mpe,meshphong_vert:Ape,meshphong_frag:Rpe,meshphysical_vert:kpe,meshphysical_frag:Ope,meshtoon_vert:Npe,meshtoon_frag:Lpe,points_vert:Dpe,points_frag:Bpe,shadow_vert:Fpe,shadow_frag:Upe,sprite_vert:$pe,sprite_frag:zpe},Ut={common:{diffuse:{value:new Wt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new On},alphaMap:{value:null},alphaMapTransform:{value:new On},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new On}},envmap:{envMap:{value:null},envMapRotation:{value:new On},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new On}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new On}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new On},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new On},normalScale:{value:new St(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new On},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new On}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new On}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new On}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Wt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Wt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new On},alphaTest:{value:0},uvTransform:{value:new On}},sprite:{diffuse:{value:new Wt(16777215)},opacity:{value:1},center:{value:new St(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new On},alphaMap:{value:null},alphaMapTransform:{value:new On},alphaTest:{value:0}}},pc={basic:{uniforms:wo([Ut.common,Ut.specularmap,Ut.envmap,Ut.aomap,Ut.lightmap,Ut.fog]),vertexShader:Hn.meshbasic_vert,fragmentShader:Hn.meshbasic_frag},lambert:{uniforms:wo([Ut.common,Ut.specularmap,Ut.envmap,Ut.aomap,Ut.lightmap,Ut.emissivemap,Ut.bumpmap,Ut.normalmap,Ut.displacementmap,Ut.fog,Ut.lights,{emissive:{value:new Wt(0)}}]),vertexShader:Hn.meshlambert_vert,fragmentShader:Hn.meshlambert_frag},phong:{uniforms:wo([Ut.common,Ut.specularmap,Ut.envmap,Ut.aomap,Ut.lightmap,Ut.emissivemap,Ut.bumpmap,Ut.normalmap,Ut.displacementmap,Ut.fog,Ut.lights,{emissive:{value:new Wt(0)},specular:{value:new Wt(1118481)},shininess:{value:30}}]),vertexShader:Hn.meshphong_vert,fragmentShader:Hn.meshphong_frag},standard:{uniforms:wo([Ut.common,Ut.envmap,Ut.aomap,Ut.lightmap,Ut.emissivemap,Ut.bumpmap,Ut.normalmap,Ut.displacementmap,Ut.roughnessmap,Ut.metalnessmap,Ut.fog,Ut.lights,{emissive:{value:new Wt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Hn.meshphysical_vert,fragmentShader:Hn.meshphysical_frag},toon:{uniforms:wo([Ut.common,Ut.aomap,Ut.lightmap,Ut.emissivemap,Ut.bumpmap,Ut.normalmap,Ut.displacementmap,Ut.gradientmap,Ut.fog,Ut.lights,{emissive:{value:new Wt(0)}}]),vertexShader:Hn.meshtoon_vert,fragmentShader:Hn.meshtoon_frag},matcap:{uniforms:wo([Ut.common,Ut.bumpmap,Ut.normalmap,Ut.displacementmap,Ut.fog,{matcap:{value:null}}]),vertexShader:Hn.meshmatcap_vert,fragmentShader:Hn.meshmatcap_frag},points:{uniforms:wo([Ut.points,Ut.fog]),vertexShader:Hn.points_vert,fragmentShader:Hn.points_frag},dashed:{uniforms:wo([Ut.common,Ut.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Hn.linedashed_vert,fragmentShader:Hn.linedashed_frag},depth:{uniforms:wo([Ut.common,Ut.displacementmap]),vertexShader:Hn.depth_vert,fragmentShader:Hn.depth_frag},normal:{uniforms:wo([Ut.common,Ut.bumpmap,Ut.normalmap,Ut.displacementmap,{opacity:{value:1}}]),vertexShader:Hn.meshnormal_vert,fragmentShader:Hn.meshnormal_frag},sprite:{uniforms:wo([Ut.sprite,Ut.fog]),vertexShader:Hn.sprite_vert,fragmentShader:Hn.sprite_frag},background:{uniforms:{uvTransform:{value:new On},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Hn.background_vert,fragmentShader:Hn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new On}},vertexShader:Hn.backgroundCube_vert,fragmentShader:Hn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Hn.cube_vert,fragmentShader:Hn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Hn.equirect_vert,fragmentShader:Hn.equirect_frag},distanceRGBA:{uniforms:wo([Ut.common,Ut.displacementmap,{referencePosition:{value:new Ce},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Hn.distanceRGBA_vert,fragmentShader:Hn.distanceRGBA_frag},shadow:{uniforms:wo([Ut.lights,Ut.fog,{color:{value:new Wt(0)},opacity:{value:1}}]),vertexShader:Hn.shadow_vert,fragmentShader:Hn.shadow_frag}};pc.physical={uniforms:wo([pc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new On},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new On},clearcoatNormalScale:{value:new St(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new On},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new On},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new On},sheen:{value:0},sheenColor:{value:new Wt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new On},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new On},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new On},transmissionSamplerSize:{value:new St},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new On},attenuationDistance:{value:0},attenuationColor:{value:new Wt(0)},specularColor:{value:new Wt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new On},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new On},anisotropyVector:{value:new St},anisotropyMap:{value:null},anisotropyMapTransform:{value:new On}}]),vertexShader:Hn.meshphysical_vert,fragmentShader:Hn.meshphysical_frag};const bE={r:0,b:0,g:0},mp=new La,Hpe=new vn;function Vpe(t,e,n,r,i,s,o){const a=new Wt(0);let c=s===!0?0:1,l,u,d=null,h=0,f=null;function p(x){let S=x.isScene===!0?x.background:null;return S&&S.isTexture&&(S=(x.backgroundBlurriness>0?n:e).get(S)),S}function g(x){let S=!1;const P=p(x);P===null?y(a,c):P&&P.isColor&&(y(P,1),S=!0);const _=t.xr.getEnvironmentBlendMode();_==="additive"?r.buffers.color.setClear(0,0,0,1,o):_==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(t.autoClear||S)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function m(x,S){const P=p(S);P&&(P.isCubeTexture||P.mapping===cv)?(u===void 0&&(u=new Xi(new $m(1,1,1),new wc({name:"BackgroundCubeMaterial",uniforms:qy(pc.backgroundCube.uniforms),vertexShader:pc.backgroundCube.vertexShader,fragmentShader:pc.backgroundCube.fragmentShader,side:Eo,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(_,I,C){this.matrixWorld.copyPosition(C.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),mp.copy(S.backgroundRotation),mp.x*=-1,mp.y*=-1,mp.z*=-1,P.isCubeTexture&&P.isRenderTargetTexture===!1&&(mp.y*=-1,mp.z*=-1),u.material.uniforms.envMap.value=P,u.material.uniforms.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=S.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(Hpe.makeRotationFromEuler(mp)),u.material.toneMapped=lr.getTransfer(P.colorSpace)!==Rr,(d!==P||h!==P.version||f!==t.toneMapping)&&(u.material.needsUpdate=!0,d=P,h=P.version,f=t.toneMapping),u.layers.enableAll(),x.unshift(u,u.geometry,u.material,0,0,null)):P&&P.isTexture&&(l===void 0&&(l=new Xi(new hv(2,2),new wc({name:"BackgroundMaterial",uniforms:qy(pc.background.uniforms),vertexShader:pc.background.vertexShader,fragmentShader:pc.background.fragmentShader,side:Wd,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=P,l.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,l.material.toneMapped=lr.getTransfer(P.colorSpace)!==Rr,P.matrixAutoUpdate===!0&&P.updateMatrix(),l.material.uniforms.uvTransform.value.copy(P.matrix),(d!==P||h!==P.version||f!==t.toneMapping)&&(l.material.needsUpdate=!0,d=P,h=P.version,f=t.toneMapping),l.layers.enableAll(),x.unshift(l,l.geometry,l.material,0,0,null))}function y(x,S){x.getRGB(bE,KH(t)),r.buffers.color.setClear(bE.r,bE.g,bE.b,S,o)}function b(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),l!==void 0&&(l.geometry.dispose(),l.material.dispose(),l=void 0)}return{getClearColor:function(){return a},setClearColor:function(x,S=1){a.set(x),c=S,y(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(x){c=x,y(a,c)},render:g,addToRenderList:m,dispose:b}}function Wpe(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r={},i=h(null);let s=i,o=!1;function a(M,k,O,B,$){let U=!1;const q=d(B,O,k);s!==q&&(s=q,l(s.object)),U=f(M,B,O,$),U&&p(M,B,O,$),$!==null&&e.update($,t.ELEMENT_ARRAY_BUFFER),(U||o)&&(o=!1,S(M,k,O,B),$!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get($).buffer))}function c(){return t.createVertexArray()}function l(M){return t.bindVertexArray(M)}function u(M){return t.deleteVertexArray(M)}function d(M,k,O){const B=O.wireframe===!0;let $=r[M.id];$===void 0&&($={},r[M.id]=$);let U=$[k.id];U===void 0&&(U={},$[k.id]=U);let q=U[B];return q===void 0&&(q=h(c()),U[B]=q),q}function h(M){const k=[],O=[],B=[];for(let $=0;$<n;$++)k[$]=0,O[$]=0,B[$]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:k,enabledAttributes:O,attributeDivisors:B,object:M,attributes:{},index:null}}function f(M,k,O,B){const $=s.attributes,U=k.attributes;let q=0;const K=O.getAttributes();for(const V in K)if(K[V].location>=0){const j=$[V];let Q=U[V];if(Q===void 0&&(V==="instanceMatrix"&&M.instanceMatrix&&(Q=M.instanceMatrix),V==="instanceColor"&&M.instanceColor&&(Q=M.instanceColor)),j===void 0||j.attribute!==Q||Q&&j.data!==Q.data)return!0;q++}return s.attributesNum!==q||s.index!==B}function p(M,k,O,B){const $={},U=k.attributes;let q=0;const K=O.getAttributes();for(const V in K)if(K[V].location>=0){let j=U[V];j===void 0&&(V==="instanceMatrix"&&M.instanceMatrix&&(j=M.instanceMatrix),V==="instanceColor"&&M.instanceColor&&(j=M.instanceColor));const Q={};Q.attribute=j,j&&j.data&&(Q.data=j.data),$[V]=Q,q++}s.attributes=$,s.attributesNum=q,s.index=B}function g(){const M=s.newAttributes;for(let k=0,O=M.length;k<O;k++)M[k]=0}function m(M){y(M,0)}function y(M,k){const O=s.newAttributes,B=s.enabledAttributes,$=s.attributeDivisors;O[M]=1,B[M]===0&&(t.enableVertexAttribArray(M),B[M]=1),$[M]!==k&&(t.vertexAttribDivisor(M,k),$[M]=k)}function b(){const M=s.newAttributes,k=s.enabledAttributes;for(let O=0,B=k.length;O<B;O++)k[O]!==M[O]&&(t.disableVertexAttribArray(O),k[O]=0)}function x(M,k,O,B,$,U,q){q===!0?t.vertexAttribIPointer(M,k,O,$,U):t.vertexAttribPointer(M,k,O,B,$,U)}function S(M,k,O,B){g();const $=B.attributes,U=O.getAttributes(),q=k.defaultAttributeValues;for(const K in U){const V=U[K];if(V.location>=0){let G=$[K];if(G===void 0&&(K==="instanceMatrix"&&M.instanceMatrix&&(G=M.instanceMatrix),K==="instanceColor"&&M.instanceColor&&(G=M.instanceColor)),G!==void 0){const j=G.normalized,Q=G.itemSize,se=e.get(G);if(se===void 0)continue;const Z=se.buffer,ie=se.type,pe=se.bytesPerElement,ue=ie===t.INT||ie===t.UNSIGNED_INT||G.gpuType===zI;if(G.isInterleavedBufferAttribute){const le=G.data,ae=le.stride,_e=G.offset;if(le.isInstancedInterleavedBuffer){for(let ye=0;ye<V.locationSize;ye++)y(V.location+ye,le.meshPerAttribute);M.isInstancedMesh!==!0&&B._maxInstanceCount===void 0&&(B._maxInstanceCount=le.meshPerAttribute*le.count)}else for(let ye=0;ye<V.locationSize;ye++)m(V.location+ye);t.bindBuffer(t.ARRAY_BUFFER,Z);for(let ye=0;ye<V.locationSize;ye++)x(V.location+ye,Q/V.locationSize,ie,j,ae*pe,(_e+Q/V.locationSize*ye)*pe,ue)}else{if(G.isInstancedBufferAttribute){for(let le=0;le<V.locationSize;le++)y(V.location+le,G.meshPerAttribute);M.isInstancedMesh!==!0&&B._maxInstanceCount===void 0&&(B._maxInstanceCount=G.meshPerAttribute*G.count)}else for(let le=0;le<V.locationSize;le++)m(V.location+le);t.bindBuffer(t.ARRAY_BUFFER,Z);for(let le=0;le<V.locationSize;le++)x(V.location+le,Q/V.locationSize,ie,j,Q*pe,Q/V.locationSize*le*pe,ue)}}else if(q!==void 0){const j=q[K];if(j!==void 0)switch(j.length){case 2:t.vertexAttrib2fv(V.location,j);break;case 3:t.vertexAttrib3fv(V.location,j);break;case 4:t.vertexAttrib4fv(V.location,j);break;default:t.vertexAttrib1fv(V.location,j)}}}}b()}function P(){C();for(const M in r){const k=r[M];for(const O in k){const B=k[O];for(const $ in B)u(B[$].object),delete B[$];delete k[O]}delete r[M]}}function _(M){if(r[M.id]===void 0)return;const k=r[M.id];for(const O in k){const B=k[O];for(const $ in B)u(B[$].object),delete B[$];delete k[O]}delete r[M.id]}function I(M){for(const k in r){const O=r[k];if(O[M.id]===void 0)continue;const B=O[M.id];for(const $ in B)u(B[$].object),delete B[$];delete O[M.id]}}function C(){A(),o=!0,s!==i&&(s=i,l(s.object))}function A(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:C,resetDefaultState:A,dispose:P,releaseStatesOfGeometry:_,releaseStatesOfProgram:I,initAttributes:g,enableAttribute:m,disableUnusedAttributes:b}}function jpe(t,e,n){let r;function i(l){r=l}function s(l,u){t.drawArrays(r,l,u),n.update(u,r,1)}function o(l,u,d){d!==0&&(t.drawArraysInstanced(r,l,u,d),n.update(u,r,d))}function a(l,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,l,0,u,0,d);let f=0;for(let p=0;p<d;p++)f+=u[p];n.update(f,r,1)}function c(l,u,d,h){if(d===0)return;const f=e.get("WEBGL_multi_draw");if(f===null)for(let p=0;p<l.length;p++)o(l[p],u[p],h[p]);else{f.multiDrawArraysInstancedWEBGL(r,l,0,u,0,h,0,d);let p=0;for(let g=0;g<d;g++)p+=u[g]*h[g];n.update(p,r,1)}}this.setMode=i,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=c}function qpe(t,e,n,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const I=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(I.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(I){return!(I!==to&&r.convert(I)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(I){const C=I===uv&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(I!==xc&&r.convert(I)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&I!==Zo&&!C)}function c(I){if(I==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";I="mediump"}return I==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let l=n.precision!==void 0?n.precision:"highp";const u=c(l);u!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",u,"instead."),l=u);const d=n.logarithmicDepthBuffer===!0,h=n.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),f=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),p=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),g=t.getParameter(t.MAX_TEXTURE_SIZE),m=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),y=t.getParameter(t.MAX_VERTEX_ATTRIBS),b=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),x=t.getParameter(t.MAX_VARYING_VECTORS),S=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),P=p>0,_=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:c,textureFormatReadable:o,textureTypeReadable:a,precision:l,logarithmicDepthBuffer:d,reverseDepthBuffer:h,maxTextures:f,maxVertexTextures:p,maxTextureSize:g,maxCubemapSize:m,maxAttributes:y,maxVertexUniforms:b,maxVaryings:x,maxFragmentUniforms:S,vertexTextures:P,maxSamples:_}}function Kpe(t){const e=this;let n=null,r=0,i=!1,s=!1;const o=new Kf,a=new On,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){const f=d.length!==0||h||r!==0||i;return i=h,r=d.length,f},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,h){n=u(d,h,0)},this.setState=function(d,h,f){const p=d.clippingPlanes,g=d.clipIntersection,m=d.clipShadows,y=t.get(d);if(!i||p===null||p.length===0||s&&!m)s?u(null):l();else{const b=s?0:r,x=b*4;let S=y.clippingState||null;c.value=S,S=u(p,h,x,f);for(let P=0;P!==x;++P)S[P]=n[P];y.clippingState=S,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=b}};function l(){c.value!==n&&(c.value=n,c.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,h,f,p){const g=d!==null?d.length:0;let m=null;if(g!==0){if(m=c.value,p!==!0||m===null){const y=f+g*4,b=h.matrixWorldInverse;a.getNormalMatrix(b),(m===null||m.length<y)&&(m=new Float32Array(y));for(let x=0,S=f;x!==g;++x,S+=4)o.copy(d[x]).applyMatrix4(b,a),o.normal.toArray(m,S),m[S+3]=o.constant}c.value=m,c.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,m}}function Gpe(t){let e=new WeakMap;function n(o,a){return a===ow?o.mapping=jd:a===aw&&(o.mapping=nh),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===ow||a===aw)if(e.has(o)){const c=e.get(o).texture;return n(c,o.mapping)}else{const c=o.image;if(c&&c.height>0){const l=new YH(c.height);return l.fromEquirectangularTexture(t,o),e.set(o,l),o.addEventListener("dispose",i),n(l.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const c=e.get(a);c!==void 0&&(e.delete(a),c.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}const my=4,m8=[.125,.215,.35,.446,.526,.582],cm=20,PM=new Qf,g8=new Wt;let CM=null,MM=0,AM=0,RM=!1;const Jp=(1+Math.sqrt(5))/2,fg=1/Jp,y8=[new Ce(-Jp,fg,0),new Ce(Jp,fg,0),new Ce(-fg,0,Jp),new Ce(fg,0,Jp),new Ce(0,Jp,-fg),new Ce(0,Jp,fg),new Ce(-1,1,-1),new Ce(1,1,-1),new Ce(-1,1,1),new Ce(1,1,1)],Xpe=new Ce;class XR{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100,s={}){const{size:o=256,position:a=Xpe}=s;CM=this._renderer.getRenderTarget(),MM=this._renderer.getActiveCubeFace(),AM=this._renderer.getActiveMipmapLevel(),RM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,r,i,c,a),n>0&&this._blur(c,0,0,n),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=x8(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=b8(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(CM,MM,AM),this._renderer.xr.enabled=RM,e.scissorTest=!1,xE(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===jd||e.mapping===nh?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),CM=this._renderer.getRenderTarget(),MM=this._renderer.getActiveCubeFace(),AM=this._renderer.getActiveMipmapLevel(),RM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:cs,minFilter:cs,generateMipmaps:!1,type:uv,format:to,colorSpace:Nm,depthBuffer:!1},i=v8(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=v8(e,n,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Ype(s)),this._blurMaterial=Zpe(s,e,n)}return i}_compileMaterial(e){const n=new Xi(this._lodPlanes[0],e);this._renderer.compile(n,PM)}_sceneToCubeUV(e,n,r,i,s){const c=new li(90,1,n,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,h=d.autoClear,f=d.toneMapping;d.getClearColor(g8),d.toneMapping=eu,d.autoClear=!1;const p=new dh({name:"PMREM.Background",side:Eo,depthWrite:!1,depthTest:!1}),g=new Xi(new $m,p);let m=!1;const y=e.background;y?y.isColor&&(p.color.copy(y),e.background=null,m=!0):(p.color.copy(g8),m=!0);for(let b=0;b<6;b++){const x=b%3;x===0?(c.up.set(0,l[b],0),c.position.set(s.x,s.y,s.z),c.lookAt(s.x+u[b],s.y,s.z)):x===1?(c.up.set(0,0,l[b]),c.position.set(s.x,s.y,s.z),c.lookAt(s.x,s.y+u[b],s.z)):(c.up.set(0,l[b],0),c.position.set(s.x,s.y,s.z),c.lookAt(s.x,s.y,s.z+u[b]));const S=this._cubeSize;xE(i,x*S,b>2?S:0,S,S),d.setRenderTarget(i),m&&d.render(g,c),d.render(e,c)}g.geometry.dispose(),g.material.dispose(),d.toneMapping=f,d.autoClear=h,e.background=y}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===jd||e.mapping===nh;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=x8()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=b8());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Xi(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const c=this._cubeSize;xE(n,0,0,3*c,2*c),r.setRenderTarget(n),r.render(o,PM)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=y8[(i-s-1)%y8.length];this._blur(e,s-1,s,o,a)}n.autoClear=r}_blur(e,n,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,n,r,i,s,o,a){const c=this._renderer,l=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new Xi(this._lodPlanes[i],l),h=l.uniforms,f=this._sizeLods[r]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/(2*cm-1),g=s/p,m=isFinite(s)?1+Math.floor(u*g):cm;m>cm&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${cm}`);const y=[];let b=0;for(let I=0;I<cm;++I){const C=I/g,A=Math.exp(-C*C/2);y.push(A),I===0?b+=A:I<m&&(b+=2*A)}for(let I=0;I<y.length;I++)y[I]=y[I]/b;h.envMap.value=e.texture,h.samples.value=m,h.weights.value=y,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);const{_lodMax:x}=this;h.dTheta.value=p,h.mipInt.value=x-r;const S=this._sizeLods[i],P=3*S*(i>x-my?i-x+my:0),_=4*(this._cubeSize-S);xE(n,P,_,3*S,2*S),c.setRenderTarget(n),c.render(d,PM)}}function Ype(t){const e=[],n=[],r=[];let i=t;const s=t-my+1+m8.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);n.push(a);let c=1/a;o>t-my?c=m8[o-t+my-1]:o===0&&(c=0),r.push(c);const l=1/(a-2),u=-l,d=1+l,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,p=6,g=3,m=2,y=1,b=new Float32Array(g*p*f),x=new Float32Array(m*p*f),S=new Float32Array(y*p*f);for(let _=0;_<f;_++){const I=_%3*2/3-1,C=_>2?0:-1,A=[I,C,0,I+2/3,C,0,I+2/3,C+1,0,I,C,0,I+2/3,C+1,0,I,C+1,0];b.set(A,g*p*_),x.set(h,m*p*_);const M=[_,_,_,_,_,_];S.set(M,y*p*_)}const P=new Mn;P.setAttribute("position",new _r(b,g)),P.setAttribute("uv",new _r(x,m)),P.setAttribute("faceIndex",new _r(S,y)),e.push(P),i>my&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function v8(t,e,n){const r=new au(t,e,n);return r.texture.mapping=cv,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function xE(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function Zpe(t,e,n){const r=new Float32Array(cm),i=new Ce(0,1,0);return new wc({name:"SphericalGaussianBlur",defines:{n:cm,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:wO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Nd,depthTest:!1,depthWrite:!1})}function b8(){return new wc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:wO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Nd,depthTest:!1,depthWrite:!1})}function x8(){return new wc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:wO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Nd,depthTest:!1,depthWrite:!1})}function wO(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Jpe(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const c=a.mapping,l=c===ow||c===aw,u=c===jd||c===nh;if(l||u){let d=e.get(a);const h=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==h)return n===null&&(n=new XR(t)),d=l?n.fromEquirectangular(a,d):n.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{const f=a.image;return l&&f&&f.height>0||u&&f&&i(f)?(n===null&&(n=new XR(t)),d=l?n.fromEquirectangular(a):n.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a}function i(a){let c=0;const l=6;for(let u=0;u<l;u++)a[u]!==void 0&&c++;return c===l}function s(a){const c=a.target;c.removeEventListener("dispose",s);const l=e.get(c);l!==void 0&&(e.delete(c),l.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:o}}function Qpe(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){const i=n(r);return i===null&&CT("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function eme(t,e,n,r){const i={},s=new WeakMap;function o(d){const h=d.target;h.index!==null&&e.remove(h.index);for(const p in h.attributes)e.remove(h.attributes[p]);h.removeEventListener("dispose",o),delete i[h.id];const f=s.get(h);f&&(e.remove(f),s.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,n.memory.geometries--}function a(d,h){return i[h.id]===!0||(h.addEventListener("dispose",o),i[h.id]=!0,n.memory.geometries++),h}function c(d){const h=d.attributes;for(const f in h)e.update(h[f],t.ARRAY_BUFFER)}function l(d){const h=[],f=d.index,p=d.attributes.position;let g=0;if(f!==null){const b=f.array;g=f.version;for(let x=0,S=b.length;x<S;x+=3){const P=b[x+0],_=b[x+1],I=b[x+2];h.push(P,_,_,I,I,P)}}else if(p!==void 0){const b=p.array;g=p.version;for(let x=0,S=b.length/3-1;x<S;x+=3){const P=x+0,_=x+1,I=x+2;h.push(P,_,_,I,I,P)}}else return;const m=new(VH(h)?Y3:X3)(h,1);m.version=g;const y=s.get(d);y&&e.remove(y),s.set(d,m)}function u(d){const h=s.get(d);if(h){const f=d.index;f!==null&&h.version<f.version&&l(d)}else l(d);return s.get(d)}return{get:a,update:c,getWireframeAttribute:u}}function tme(t,e,n){let r;function i(h){r=h}let s,o;function a(h){s=h.type,o=h.bytesPerElement}function c(h,f){t.drawElements(r,f,s,h*o),n.update(f,r,1)}function l(h,f,p){p!==0&&(t.drawElementsInstanced(r,f,s,h*o,p),n.update(f,r,p))}function u(h,f,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,f,0,s,h,0,p);let m=0;for(let y=0;y<p;y++)m+=f[y];n.update(m,r,1)}function d(h,f,p,g){if(p===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let y=0;y<h.length;y++)l(h[y]/o,f[y],g[y]);else{m.multiDrawElementsInstancedWEBGL(r,f,0,s,h,0,g,0,p);let y=0;for(let b=0;b<p;b++)y+=f[b]*g[b];n.update(y,r,1)}}this.setMode=i,this.setIndex=a,this.render=c,this.renderInstances=l,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function nme(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(n.calls++,o){case t.TRIANGLES:n.triangles+=a*(s/3);break;case t.LINES:n.lines+=a*(s/2);break;case t.LINE_STRIP:n.lines+=a*(s-1);break;case t.LINE_LOOP:n.lines+=a*s;break;case t.POINTS:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function rme(t,e,n){const r=new WeakMap,i=new gr;function s(o,a,c){const l=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=u!==void 0?u.length:0;let h=r.get(a);if(h===void 0||h.count!==d){let M=function(){C.dispose(),r.delete(a),a.removeEventListener("dispose",M)};var f=M;h!==void 0&&h.texture.dispose();const p=a.morphAttributes.position!==void 0,g=a.morphAttributes.normal!==void 0,m=a.morphAttributes.color!==void 0,y=a.morphAttributes.position||[],b=a.morphAttributes.normal||[],x=a.morphAttributes.color||[];let S=0;p===!0&&(S=1),g===!0&&(S=2),m===!0&&(S=3);let P=a.attributes.position.count*S,_=1;P>e.maxTextureSize&&(_=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const I=new Float32Array(P*_*4*d),C=new Qw(I,P,_,d);C.type=Zo,C.needsUpdate=!0;const A=S*4;for(let k=0;k<d;k++){const O=y[k],B=b[k],$=x[k],U=P*_*4*k;for(let q=0;q<O.count;q++){const K=q*A;p===!0&&(i.fromBufferAttribute(O,q),I[U+K+0]=i.x,I[U+K+1]=i.y,I[U+K+2]=i.z,I[U+K+3]=0),g===!0&&(i.fromBufferAttribute(B,q),I[U+K+4]=i.x,I[U+K+5]=i.y,I[U+K+6]=i.z,I[U+K+7]=0),m===!0&&(i.fromBufferAttribute($,q),I[U+K+8]=i.x,I[U+K+9]=i.y,I[U+K+10]=i.z,I[U+K+11]=$.itemSize===4?i.w:1)}}h={count:d,texture:C,size:new St(P,_)},r.set(a,h),a.addEventListener("dispose",M)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)c.getUniforms().setValue(t,"morphTexture",o.morphTexture,n);else{let p=0;for(let m=0;m<l.length;m++)p+=l[m];const g=a.morphTargetsRelative?1:1-p;c.getUniforms().setValue(t,"morphTargetBaseInfluence",g),c.getUniforms().setValue(t,"morphTargetInfluences",l)}c.getUniforms().setValue(t,"morphTargetsTexture",h.texture,n),c.getUniforms().setValue(t,"morphTargetsTextureSize",h.size)}return{update:s}}function ime(t,e,n,r){let i=new WeakMap;function s(c){const l=r.render.frame,u=c.geometry,d=e.get(c,u);if(i.get(d)!==l&&(e.update(d),i.set(d,l)),c.isInstancedMesh&&(c.hasEventListener("dispose",a)===!1&&c.addEventListener("dispose",a),i.get(c)!==l&&(n.update(c.instanceMatrix,t.ARRAY_BUFFER),c.instanceColor!==null&&n.update(c.instanceColor,t.ARRAY_BUFFER),i.set(c,l))),c.isSkinnedMesh){const h=c.skeleton;i.get(h)!==l&&(h.update(),i.set(h,l))}return d}function o(){i=new WeakMap}function a(c){const l=c.target;l.removeEventListener("dispose",a),n.remove(l.instanceMatrix),l.instanceColor!==null&&n.remove(l.instanceColor)}return{update:s,dispose:o}}const ZV=new vi,w8=new eO(1,1),JV=new Qw,QV=new XI,eW=new t_,_8=[],S8=[],E8=new Float32Array(16),T8=new Float32Array(9),I8=new Float32Array(4);function pv(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let s=_8[i];if(s===void 0&&(s=new Float32Array(i),_8[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function us(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function ds(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function pP(t,e){let n=S8[e];n===void 0&&(n=new Int32Array(e),S8[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function sme(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function ome(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(us(n,e))return;t.uniform2fv(this.addr,e),ds(n,e)}}function ame(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(us(n,e))return;t.uniform3fv(this.addr,e),ds(n,e)}}function lme(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(us(n,e))return;t.uniform4fv(this.addr,e),ds(n,e)}}function cme(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(us(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),ds(n,e)}else{if(us(n,r))return;I8.set(r),t.uniformMatrix2fv(this.addr,!1,I8),ds(n,r)}}function ume(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(us(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),ds(n,e)}else{if(us(n,r))return;T8.set(r),t.uniformMatrix3fv(this.addr,!1,T8),ds(n,r)}}function dme(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(us(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),ds(n,e)}else{if(us(n,r))return;E8.set(r),t.uniformMatrix4fv(this.addr,!1,E8),ds(n,r)}}function fme(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function hme(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(us(n,e))return;t.uniform2iv(this.addr,e),ds(n,e)}}function pme(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(us(n,e))return;t.uniform3iv(this.addr,e),ds(n,e)}}function mme(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(us(n,e))return;t.uniform4iv(this.addr,e),ds(n,e)}}function gme(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function yme(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(us(n,e))return;t.uniform2uiv(this.addr,e),ds(n,e)}}function vme(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(us(n,e))return;t.uniform3uiv(this.addr,e),ds(n,e)}}function bme(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(us(n,e))return;t.uniform4uiv(this.addr,e),ds(n,e)}}function xme(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);let s;this.type===t.SAMPLER_2D_SHADOW?(w8.compareFunction=K3,s=w8):s=ZV,n.setTexture2D(e||s,i)}function wme(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||QV,i)}function _me(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||eW,i)}function Sme(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||JV,i)}function Eme(t){switch(t){case 5126:return sme;case 35664:return ome;case 35665:return ame;case 35666:return lme;case 35674:return cme;case 35675:return ume;case 35676:return dme;case 5124:case 35670:return fme;case 35667:case 35671:return hme;case 35668:case 35672:return pme;case 35669:case 35673:return mme;case 5125:return gme;case 36294:return yme;case 36295:return vme;case 36296:return bme;case 35678:case 36198:case 36298:case 36306:case 35682:return xme;case 35679:case 36299:case 36307:return wme;case 35680:case 36300:case 36308:case 36293:return _me;case 36289:case 36303:case 36311:case 36292:return Sme}}function Tme(t,e){t.uniform1fv(this.addr,e)}function Ime(t,e){const n=pv(e,this.size,2);t.uniform2fv(this.addr,n)}function Pme(t,e){const n=pv(e,this.size,3);t.uniform3fv(this.addr,n)}function Cme(t,e){const n=pv(e,this.size,4);t.uniform4fv(this.addr,n)}function Mme(t,e){const n=pv(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Ame(t,e){const n=pv(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Rme(t,e){const n=pv(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function kme(t,e){t.uniform1iv(this.addr,e)}function Ome(t,e){t.uniform2iv(this.addr,e)}function Nme(t,e){t.uniform3iv(this.addr,e)}function Lme(t,e){t.uniform4iv(this.addr,e)}function Dme(t,e){t.uniform1uiv(this.addr,e)}function Bme(t,e){t.uniform2uiv(this.addr,e)}function Fme(t,e){t.uniform3uiv(this.addr,e)}function Ume(t,e){t.uniform4uiv(this.addr,e)}function $me(t,e,n){const r=this.cache,i=e.length,s=pP(n,i);us(r,s)||(t.uniform1iv(this.addr,s),ds(r,s));for(let o=0;o!==i;++o)n.setTexture2D(e[o]||ZV,s[o])}function zme(t,e,n){const r=this.cache,i=e.length,s=pP(n,i);us(r,s)||(t.uniform1iv(this.addr,s),ds(r,s));for(let o=0;o!==i;++o)n.setTexture3D(e[o]||QV,s[o])}function Hme(t,e,n){const r=this.cache,i=e.length,s=pP(n,i);us(r,s)||(t.uniform1iv(this.addr,s),ds(r,s));for(let o=0;o!==i;++o)n.setTextureCube(e[o]||eW,s[o])}function Vme(t,e,n){const r=this.cache,i=e.length,s=pP(n,i);us(r,s)||(t.uniform1iv(this.addr,s),ds(r,s));for(let o=0;o!==i;++o)n.setTexture2DArray(e[o]||JV,s[o])}function Wme(t){switch(t){case 5126:return Tme;case 35664:return Ime;case 35665:return Pme;case 35666:return Cme;case 35674:return Mme;case 35675:return Ame;case 35676:return Rme;case 5124:case 35670:return kme;case 35667:case 35671:return Ome;case 35668:case 35672:return Nme;case 35669:case 35673:return Lme;case 5125:return Dme;case 36294:return Bme;case 36295:return Fme;case 36296:return Ume;case 35678:case 36198:case 36298:case 36306:case 35682:return $me;case 35679:case 36299:case 36307:return zme;case 35680:case 36300:case 36308:case 36293:return Hme;case 36289:case 36303:case 36311:case 36292:return Vme}}class jme{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=Eme(n.type)}}class qme{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=Wme(n.type)}}class Kme{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,n[a.id],r)}}}const kM=/(\w+)(\])?(\[|\.)?/g;function P8(t,e){t.seq.push(e),t.map[e.id]=e}function Gme(t,e,n){const r=t.name,i=r.length;for(kM.lastIndex=0;;){const s=kM.exec(r),o=kM.lastIndex;let a=s[1];const c=s[2]==="]",l=s[3];if(c&&(a=a|0),l===void 0||l==="["&&o+2===i){P8(n,l===void 0?new jme(a,t,e):new qme(a,t,e));break}else{let d=n.map[a];d===void 0&&(d=new Kme(a),P8(n,d)),n=d}}}class AT{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(n,i),o=e.getUniformLocation(n,s.name);Gme(s,o,this)}}setValue(e,n,r,i){const s=this.map[n];s!==void 0&&s.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let s=0,o=n.length;s!==o;++s){const a=n[s],c=r[a.id];c.needsUpdate!==!1&&a.setValue(e,c.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in n&&r.push(o)}return r}}function C8(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const Xme=37297;let Yme=0;function Zme(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return r.join(`
`)}const M8=new On;function Jme(t){lr._getMatrix(M8,lr.workingColorSpace,t);const e=`mat3( ${M8.elements.map(n=>n.toFixed(4))} )`;switch(lr.getTransfer(t)){case fw:return[e,"LinearTransferOETF"];case Rr:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function A8(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+i+`

`+Zme(t.getShaderSource(e),o)}else return i}function Qme(t,e){const n=Jme(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}function e0e(t,e){let n;switch(e){case SH:n="Linear";break;case EH:n="Reinhard";break;case TH:n="Cineon";break;case L3:n="ACESFilmic";break;case PH:n="AgX";break;case CH:n="Neutral";break;case IH:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const wE=new Ce;function t0e(){lr.getLuminanceCoefficients(wE);const t=wE.x.toFixed(4),e=wE.y.toFixed(4),n=wE.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function n0e(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(yx).join(`
`)}function r0e(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function i0e(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i),o=s.name;let a=1;s.type===t.FLOAT_MAT2&&(a=2),s.type===t.FLOAT_MAT3&&(a=3),s.type===t.FLOAT_MAT4&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function yx(t){return t!==""}function R8(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function k8(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const s0e=/^[ \t]*#include +<([\w\d./]+)>/gm;function YR(t){return t.replace(s0e,a0e)}const o0e=new Map;function a0e(t,e){let n=Hn[e];if(n===void 0){const r=o0e.get(e);if(r!==void 0)n=Hn[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return YR(n)}const l0e=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function O8(t){return t.replace(l0e,c0e)}function c0e(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function N8(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function u0e(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===UI?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===Ey?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===fc&&(e="SHADOWMAP_TYPE_VSM"),e}function d0e(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case jd:case nh:e="ENVMAP_TYPE_CUBE";break;case cv:e="ENVMAP_TYPE_CUBE_UV";break}return e}function f0e(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case nh:e="ENVMAP_MODE_REFRACTION";break}return e}function h0e(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Zw:e="ENVMAP_BLENDING_MULTIPLY";break;case wH:e="ENVMAP_BLENDING_MIX";break;case _H:e="ENVMAP_BLENDING_ADD";break}return e}function p0e(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function m0e(t,e,n,r){const i=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const c=u0e(n),l=d0e(n),u=f0e(n),d=h0e(n),h=p0e(n),f=n0e(n),p=r0e(s),g=i.createProgram();let m,y,b=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(m=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(yx).join(`
`),m.length>0&&(m+=`
`),y=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(yx).join(`
`),y.length>0&&(y+=`
`)):(m=[N8(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(yx).join(`
`),y=[N8(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+l:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==eu?"#define TONE_MAPPING":"",n.toneMapping!==eu?Hn.tonemapping_pars_fragment:"",n.toneMapping!==eu?e0e("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Hn.colorspace_pars_fragment,Qme("linearToOutputTexel",n.outputColorSpace),t0e(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(yx).join(`
`)),o=YR(o),o=R8(o,n),o=k8(o,n),a=YR(a),a=R8(a,n),a=k8(a,n),o=O8(o),a=O8(a),n.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,m=[f,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,y=["#define varying in",n.glslVersion===zR?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===zR?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);const x=b+m+o,S=b+y+a,P=C8(i,i.VERTEX_SHADER,x),_=C8(i,i.FRAGMENT_SHADER,S);i.attachShader(g,P),i.attachShader(g,_),n.index0AttributeName!==void 0?i.bindAttribLocation(g,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(g,0,"position"),i.linkProgram(g);function I(k){if(t.debug.checkShaderErrors){const O=i.getProgramInfoLog(g).trim(),B=i.getShaderInfoLog(P).trim(),$=i.getShaderInfoLog(_).trim();let U=!0,q=!0;if(i.getProgramParameter(g,i.LINK_STATUS)===!1)if(U=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,g,P,_);else{const K=A8(i,P,"vertex"),V=A8(i,_,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(g,i.VALIDATE_STATUS)+`

Material Name: `+k.name+`
Material Type: `+k.type+`

Program Info Log: `+O+`
`+K+`
`+V)}else O!==""?console.warn("THREE.WebGLProgram: Program Info Log:",O):(B===""||$==="")&&(q=!1);q&&(k.diagnostics={runnable:U,programLog:O,vertexShader:{log:B,prefix:m},fragmentShader:{log:$,prefix:y}})}i.deleteShader(P),i.deleteShader(_),C=new AT(i,g),A=i0e(i,g)}let C;this.getUniforms=function(){return C===void 0&&I(this),C};let A;this.getAttributes=function(){return A===void 0&&I(this),A};let M=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return M===!1&&(M=i.getProgramParameter(g,Xme)),M},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(g),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Yme++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=P,this.fragmentShader=_,this}let g0e=0;class y0e{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new v0e(e),n.set(e,r)),r}}class v0e{constructor(e){this.id=g0e++,this.code=e,this.usedTimes=0}}function b0e(t,e,n,r,i,s,o){const a=new Im,c=new y0e,l=new Set,u=[],d=i.logarithmicDepthBuffer,h=i.vertexTextures;let f=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(A){return l.add(A),A===0?"uv":`uv${A}`}function m(A,M,k,O,B){const $=O.fog,U=B.geometry,q=A.isMeshStandardMaterial?O.environment:null,K=(A.isMeshStandardMaterial?n:e).get(A.envMap||q),V=K&&K.mapping===cv?K.image.height:null,G=p[A.type];A.precision!==null&&(f=i.getMaxPrecision(A.precision),f!==A.precision&&console.warn("THREE.WebGLProgram.getParameters:",A.precision,"not supported, using",f,"instead."));const j=U.morphAttributes.position||U.morphAttributes.normal||U.morphAttributes.color,Q=j!==void 0?j.length:0;let se=0;U.morphAttributes.position!==void 0&&(se=1),U.morphAttributes.normal!==void 0&&(se=2),U.morphAttributes.color!==void 0&&(se=3);let Z,ie,pe,ue;if(G){const Bt=pc[G];Z=Bt.vertexShader,ie=Bt.fragmentShader}else Z=A.vertexShader,ie=A.fragmentShader,c.update(A),pe=c.getVertexShaderID(A),ue=c.getFragmentShaderID(A);const le=t.getRenderTarget(),ae=t.state.buffers.depth.getReversed(),_e=B.isInstancedMesh===!0,ye=B.isBatchedMesh===!0,Ae=!!A.map,Oe=!!A.matcap,Be=!!K,ce=!!A.aoMap,Ge=!!A.lightMap,Pe=!!A.bumpMap,He=!!A.normalMap,Re=!!A.displacementMap,je=!!A.emissiveMap,te=!!A.metalnessMap,ee=!!A.roughnessMap,X=A.anisotropy>0,we=A.clearcoat>0,Ne=A.dispersion>0,We=A.iridescence>0,xe=A.sheen>0,Ve=A.transmission>0,be=X&&!!A.anisotropyMap,ge=we&&!!A.clearcoatMap,Se=we&&!!A.clearcoatNormalMap,Ie=we&&!!A.clearcoatRoughnessMap,me=We&&!!A.iridescenceMap,Ee=We&&!!A.iridescenceThicknessMap,oe=xe&&!!A.sheenColorMap,ne=xe&&!!A.sheenRoughnessMap,de=!!A.specularMap,Te=!!A.specularColorMap,ke=!!A.specularIntensityMap,he=Ve&&!!A.transmissionMap,Xe=Ve&&!!A.thicknessMap,$e=!!A.gradientMap,Qe=!!A.alphaMap,ut=A.alphaTest>0,gt=!!A.alphaHash,Tt=!!A.extensions;let Kt=eu;A.toneMapped&&(le===null||le.isXRRenderTarget===!0)&&(Kt=t.toneMapping);const Zt={shaderID:G,shaderType:A.type,shaderName:A.name,vertexShader:Z,fragmentShader:ie,defines:A.defines,customVertexShaderID:pe,customFragmentShaderID:ue,isRawShaderMaterial:A.isRawShaderMaterial===!0,glslVersion:A.glslVersion,precision:f,batching:ye,batchingColor:ye&&B._colorsTexture!==null,instancing:_e,instancingColor:_e&&B.instanceColor!==null,instancingMorph:_e&&B.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:le===null?t.outputColorSpace:le.isXRRenderTarget===!0?le.texture.colorSpace:Nm,alphaToCoverage:!!A.alphaToCoverage,map:Ae,matcap:Oe,envMap:Be,envMapMode:Be&&K.mapping,envMapCubeUVHeight:V,aoMap:ce,lightMap:Ge,bumpMap:Pe,normalMap:He,displacementMap:h&&Re,emissiveMap:je,normalMapObjectSpace:He&&A.normalMapType===LH,normalMapTangentSpace:He&&A.normalMapType===uh,metalnessMap:te,roughnessMap:ee,anisotropy:X,anisotropyMap:be,clearcoat:we,clearcoatMap:ge,clearcoatNormalMap:Se,clearcoatRoughnessMap:Ie,dispersion:Ne,iridescence:We,iridescenceMap:me,iridescenceThicknessMap:Ee,sheen:xe,sheenColorMap:oe,sheenRoughnessMap:ne,specularMap:de,specularColorMap:Te,specularIntensityMap:ke,transmission:Ve,transmissionMap:he,thicknessMap:Xe,gradientMap:$e,opaque:A.transparent===!1&&A.blending===Em&&A.alphaToCoverage===!1,alphaMap:Qe,alphaTest:ut,alphaHash:gt,combine:A.combine,mapUv:Ae&&g(A.map.channel),aoMapUv:ce&&g(A.aoMap.channel),lightMapUv:Ge&&g(A.lightMap.channel),bumpMapUv:Pe&&g(A.bumpMap.channel),normalMapUv:He&&g(A.normalMap.channel),displacementMapUv:Re&&g(A.displacementMap.channel),emissiveMapUv:je&&g(A.emissiveMap.channel),metalnessMapUv:te&&g(A.metalnessMap.channel),roughnessMapUv:ee&&g(A.roughnessMap.channel),anisotropyMapUv:be&&g(A.anisotropyMap.channel),clearcoatMapUv:ge&&g(A.clearcoatMap.channel),clearcoatNormalMapUv:Se&&g(A.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ie&&g(A.clearcoatRoughnessMap.channel),iridescenceMapUv:me&&g(A.iridescenceMap.channel),iridescenceThicknessMapUv:Ee&&g(A.iridescenceThicknessMap.channel),sheenColorMapUv:oe&&g(A.sheenColorMap.channel),sheenRoughnessMapUv:ne&&g(A.sheenRoughnessMap.channel),specularMapUv:de&&g(A.specularMap.channel),specularColorMapUv:Te&&g(A.specularColorMap.channel),specularIntensityMapUv:ke&&g(A.specularIntensityMap.channel),transmissionMapUv:he&&g(A.transmissionMap.channel),thicknessMapUv:Xe&&g(A.thicknessMap.channel),alphaMapUv:Qe&&g(A.alphaMap.channel),vertexTangents:!!U.attributes.tangent&&(He||X),vertexColors:A.vertexColors,vertexAlphas:A.vertexColors===!0&&!!U.attributes.color&&U.attributes.color.itemSize===4,pointsUvs:B.isPoints===!0&&!!U.attributes.uv&&(Ae||Qe),fog:!!$,useFog:A.fog===!0,fogExp2:!!$&&$.isFogExp2,flatShading:A.flatShading===!0,sizeAttenuation:A.sizeAttenuation===!0,logarithmicDepthBuffer:d,reverseDepthBuffer:ae,skinning:B.isSkinnedMesh===!0,morphTargets:U.morphAttributes.position!==void 0,morphNormals:U.morphAttributes.normal!==void 0,morphColors:U.morphAttributes.color!==void 0,morphTargetsCount:Q,morphTextureStride:se,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numLightProbes:M.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:A.dithering,shadowMapEnabled:t.shadowMap.enabled&&k.length>0,shadowMapType:t.shadowMap.type,toneMapping:Kt,decodeVideoTexture:Ae&&A.map.isVideoTexture===!0&&lr.getTransfer(A.map.colorSpace)===Rr,decodeVideoTextureEmissive:je&&A.emissiveMap.isVideoTexture===!0&&lr.getTransfer(A.emissiveMap.colorSpace)===Rr,premultipliedAlpha:A.premultipliedAlpha,doubleSided:A.side===mc,flipSided:A.side===Eo,useDepthPacking:A.depthPacking>=0,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionClipCullDistance:Tt&&A.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Tt&&A.extensions.multiDraw===!0||ye)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:A.customProgramCacheKey()};return Zt.vertexUv1s=l.has(1),Zt.vertexUv2s=l.has(2),Zt.vertexUv3s=l.has(3),l.clear(),Zt}function y(A){const M=[];if(A.shaderID?M.push(A.shaderID):(M.push(A.customVertexShaderID),M.push(A.customFragmentShaderID)),A.defines!==void 0)for(const k in A.defines)M.push(k),M.push(A.defines[k]);return A.isRawShaderMaterial===!1&&(b(M,A),x(M,A),M.push(t.outputColorSpace)),M.push(A.customProgramCacheKey),M.join()}function b(A,M){A.push(M.precision),A.push(M.outputColorSpace),A.push(M.envMapMode),A.push(M.envMapCubeUVHeight),A.push(M.mapUv),A.push(M.alphaMapUv),A.push(M.lightMapUv),A.push(M.aoMapUv),A.push(M.bumpMapUv),A.push(M.normalMapUv),A.push(M.displacementMapUv),A.push(M.emissiveMapUv),A.push(M.metalnessMapUv),A.push(M.roughnessMapUv),A.push(M.anisotropyMapUv),A.push(M.clearcoatMapUv),A.push(M.clearcoatNormalMapUv),A.push(M.clearcoatRoughnessMapUv),A.push(M.iridescenceMapUv),A.push(M.iridescenceThicknessMapUv),A.push(M.sheenColorMapUv),A.push(M.sheenRoughnessMapUv),A.push(M.specularMapUv),A.push(M.specularColorMapUv),A.push(M.specularIntensityMapUv),A.push(M.transmissionMapUv),A.push(M.thicknessMapUv),A.push(M.combine),A.push(M.fogExp2),A.push(M.sizeAttenuation),A.push(M.morphTargetsCount),A.push(M.morphAttributeCount),A.push(M.numDirLights),A.push(M.numPointLights),A.push(M.numSpotLights),A.push(M.numSpotLightMaps),A.push(M.numHemiLights),A.push(M.numRectAreaLights),A.push(M.numDirLightShadows),A.push(M.numPointLightShadows),A.push(M.numSpotLightShadows),A.push(M.numSpotLightShadowsWithMaps),A.push(M.numLightProbes),A.push(M.shadowMapType),A.push(M.toneMapping),A.push(M.numClippingPlanes),A.push(M.numClipIntersection),A.push(M.depthPacking)}function x(A,M){a.disableAll(),M.supportsVertexTextures&&a.enable(0),M.instancing&&a.enable(1),M.instancingColor&&a.enable(2),M.instancingMorph&&a.enable(3),M.matcap&&a.enable(4),M.envMap&&a.enable(5),M.normalMapObjectSpace&&a.enable(6),M.normalMapTangentSpace&&a.enable(7),M.clearcoat&&a.enable(8),M.iridescence&&a.enable(9),M.alphaTest&&a.enable(10),M.vertexColors&&a.enable(11),M.vertexAlphas&&a.enable(12),M.vertexUv1s&&a.enable(13),M.vertexUv2s&&a.enable(14),M.vertexUv3s&&a.enable(15),M.vertexTangents&&a.enable(16),M.anisotropy&&a.enable(17),M.alphaHash&&a.enable(18),M.batching&&a.enable(19),M.dispersion&&a.enable(20),M.batchingColor&&a.enable(21),A.push(a.mask),a.disableAll(),M.fog&&a.enable(0),M.useFog&&a.enable(1),M.flatShading&&a.enable(2),M.logarithmicDepthBuffer&&a.enable(3),M.reverseDepthBuffer&&a.enable(4),M.skinning&&a.enable(5),M.morphTargets&&a.enable(6),M.morphNormals&&a.enable(7),M.morphColors&&a.enable(8),M.premultipliedAlpha&&a.enable(9),M.shadowMapEnabled&&a.enable(10),M.doubleSided&&a.enable(11),M.flipSided&&a.enable(12),M.useDepthPacking&&a.enable(13),M.dithering&&a.enable(14),M.transmission&&a.enable(15),M.sheen&&a.enable(16),M.opaque&&a.enable(17),M.pointsUvs&&a.enable(18),M.decodeVideoTexture&&a.enable(19),M.decodeVideoTextureEmissive&&a.enable(20),M.alphaToCoverage&&a.enable(21),A.push(a.mask)}function S(A){const M=p[A.type];let k;if(M){const O=pc[M];k=GH.clone(O.uniforms)}else k=A.uniforms;return k}function P(A,M){let k;for(let O=0,B=u.length;O<B;O++){const $=u[O];if($.cacheKey===M){k=$,++k.usedTimes;break}}return k===void 0&&(k=new m0e(t,M,A,s),u.push(k)),k}function _(A){if(--A.usedTimes===0){const M=u.indexOf(A);u[M]=u[u.length-1],u.pop(),A.destroy()}}function I(A){c.remove(A)}function C(){c.dispose()}return{getParameters:m,getProgramCacheKey:y,getUniforms:S,acquireProgram:P,releaseProgram:_,releaseShaderCache:I,programs:u,dispose:C}}function x0e(){let t=new WeakMap;function e(o){return t.has(o)}function n(o){let a=t.get(o);return a===void 0&&(a={},t.set(o,a)),a}function r(o){t.delete(o)}function i(o,a,c){t.get(o)[a]=c}function s(){t=new WeakMap}return{has:e,get:n,remove:r,update:i,dispose:s}}function w0e(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function L8(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function D8(){const t=[];let e=0;const n=[],r=[],i=[];function s(){e=0,n.length=0,r.length=0,i.length=0}function o(d,h,f,p,g,m){let y=t[e];return y===void 0?(y={id:d.id,object:d,geometry:h,material:f,groupOrder:p,renderOrder:d.renderOrder,z:g,group:m},t[e]=y):(y.id=d.id,y.object=d,y.geometry=h,y.material=f,y.groupOrder=p,y.renderOrder=d.renderOrder,y.z=g,y.group=m),e++,y}function a(d,h,f,p,g,m){const y=o(d,h,f,p,g,m);f.transmission>0?r.push(y):f.transparent===!0?i.push(y):n.push(y)}function c(d,h,f,p,g,m){const y=o(d,h,f,p,g,m);f.transmission>0?r.unshift(y):f.transparent===!0?i.unshift(y):n.unshift(y)}function l(d,h){n.length>1&&n.sort(d||w0e),r.length>1&&r.sort(h||L8),i.length>1&&i.sort(h||L8)}function u(){for(let d=e,h=t.length;d<h;d++){const f=t[d];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:n,transmissive:r,transparent:i,init:s,push:a,unshift:c,finish:u,sort:l}}function _0e(){let t=new WeakMap;function e(r,i){const s=t.get(r);let o;return s===void 0?(o=new D8,t.set(r,[o])):i>=s.length?(o=new D8,s.push(o)):o=s[i],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function S0e(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Ce,color:new Wt};break;case"SpotLight":n={position:new Ce,direction:new Ce,color:new Wt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Ce,color:new Wt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Ce,skyColor:new Wt,groundColor:new Wt};break;case"RectAreaLight":n={color:new Wt,position:new Ce,halfWidth:new Ce,halfHeight:new Ce};break}return t[e.id]=n,n}}}function E0e(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new St};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new St};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new St,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let T0e=0;function I0e(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function P0e(t){const e=new S0e,n=E0e(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let l=0;l<9;l++)r.probe.push(new Ce);const i=new Ce,s=new vn,o=new vn;function a(l){let u=0,d=0,h=0;for(let A=0;A<9;A++)r.probe[A].set(0,0,0);let f=0,p=0,g=0,m=0,y=0,b=0,x=0,S=0,P=0,_=0,I=0;l.sort(I0e);for(let A=0,M=l.length;A<M;A++){const k=l[A],O=k.color,B=k.intensity,$=k.distance,U=k.shadow&&k.shadow.map?k.shadow.map.texture:null;if(k.isAmbientLight)u+=O.r*B,d+=O.g*B,h+=O.b*B;else if(k.isLightProbe){for(let q=0;q<9;q++)r.probe[q].addScaledVector(k.sh.coefficients[q],B);I++}else if(k.isDirectionalLight){const q=e.get(k);if(q.color.copy(k.color).multiplyScalar(k.intensity),k.castShadow){const K=k.shadow,V=n.get(k);V.shadowIntensity=K.intensity,V.shadowBias=K.bias,V.shadowNormalBias=K.normalBias,V.shadowRadius=K.radius,V.shadowMapSize=K.mapSize,r.directionalShadow[f]=V,r.directionalShadowMap[f]=U,r.directionalShadowMatrix[f]=k.shadow.matrix,b++}r.directional[f]=q,f++}else if(k.isSpotLight){const q=e.get(k);q.position.setFromMatrixPosition(k.matrixWorld),q.color.copy(O).multiplyScalar(B),q.distance=$,q.coneCos=Math.cos(k.angle),q.penumbraCos=Math.cos(k.angle*(1-k.penumbra)),q.decay=k.decay,r.spot[g]=q;const K=k.shadow;if(k.map&&(r.spotLightMap[P]=k.map,P++,K.updateMatrices(k),k.castShadow&&_++),r.spotLightMatrix[g]=K.matrix,k.castShadow){const V=n.get(k);V.shadowIntensity=K.intensity,V.shadowBias=K.bias,V.shadowNormalBias=K.normalBias,V.shadowRadius=K.radius,V.shadowMapSize=K.mapSize,r.spotShadow[g]=V,r.spotShadowMap[g]=U,S++}g++}else if(k.isRectAreaLight){const q=e.get(k);q.color.copy(O).multiplyScalar(B),q.halfWidth.set(k.width*.5,0,0),q.halfHeight.set(0,k.height*.5,0),r.rectArea[m]=q,m++}else if(k.isPointLight){const q=e.get(k);if(q.color.copy(k.color).multiplyScalar(k.intensity),q.distance=k.distance,q.decay=k.decay,k.castShadow){const K=k.shadow,V=n.get(k);V.shadowIntensity=K.intensity,V.shadowBias=K.bias,V.shadowNormalBias=K.normalBias,V.shadowRadius=K.radius,V.shadowMapSize=K.mapSize,V.shadowCameraNear=K.camera.near,V.shadowCameraFar=K.camera.far,r.pointShadow[p]=V,r.pointShadowMap[p]=U,r.pointShadowMatrix[p]=k.shadow.matrix,x++}r.point[p]=q,p++}else if(k.isHemisphereLight){const q=e.get(k);q.skyColor.copy(k.color).multiplyScalar(B),q.groundColor.copy(k.groundColor).multiplyScalar(B),r.hemi[y]=q,y++}}m>0&&(t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ut.LTC_FLOAT_1,r.rectAreaLTC2=Ut.LTC_FLOAT_2):(r.rectAreaLTC1=Ut.LTC_HALF_1,r.rectAreaLTC2=Ut.LTC_HALF_2)),r.ambient[0]=u,r.ambient[1]=d,r.ambient[2]=h;const C=r.hash;(C.directionalLength!==f||C.pointLength!==p||C.spotLength!==g||C.rectAreaLength!==m||C.hemiLength!==y||C.numDirectionalShadows!==b||C.numPointShadows!==x||C.numSpotShadows!==S||C.numSpotMaps!==P||C.numLightProbes!==I)&&(r.directional.length=f,r.spot.length=g,r.rectArea.length=m,r.point.length=p,r.hemi.length=y,r.directionalShadow.length=b,r.directionalShadowMap.length=b,r.pointShadow.length=x,r.pointShadowMap.length=x,r.spotShadow.length=S,r.spotShadowMap.length=S,r.directionalShadowMatrix.length=b,r.pointShadowMatrix.length=x,r.spotLightMatrix.length=S+P-_,r.spotLightMap.length=P,r.numSpotLightShadowsWithMaps=_,r.numLightProbes=I,C.directionalLength=f,C.pointLength=p,C.spotLength=g,C.rectAreaLength=m,C.hemiLength=y,C.numDirectionalShadows=b,C.numPointShadows=x,C.numSpotShadows=S,C.numSpotMaps=P,C.numLightProbes=I,r.version=T0e++)}function c(l,u){let d=0,h=0,f=0,p=0,g=0;const m=u.matrixWorldInverse;for(let y=0,b=l.length;y<b;y++){const x=l[y];if(x.isDirectionalLight){const S=r.directional[d];S.direction.setFromMatrixPosition(x.matrixWorld),i.setFromMatrixPosition(x.target.matrixWorld),S.direction.sub(i),S.direction.transformDirection(m),d++}else if(x.isSpotLight){const S=r.spot[f];S.position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(m),S.direction.setFromMatrixPosition(x.matrixWorld),i.setFromMatrixPosition(x.target.matrixWorld),S.direction.sub(i),S.direction.transformDirection(m),f++}else if(x.isRectAreaLight){const S=r.rectArea[p];S.position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(m),o.identity(),s.copy(x.matrixWorld),s.premultiply(m),o.extractRotation(s),S.halfWidth.set(x.width*.5,0,0),S.halfHeight.set(0,x.height*.5,0),S.halfWidth.applyMatrix4(o),S.halfHeight.applyMatrix4(o),p++}else if(x.isPointLight){const S=r.point[h];S.position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(m),h++}else if(x.isHemisphereLight){const S=r.hemi[g];S.direction.setFromMatrixPosition(x.matrixWorld),S.direction.transformDirection(m),g++}}}return{setup:a,setupView:c,state:r}}function B8(t){const e=new P0e(t),n=[],r=[];function i(u){l.camera=u,n.length=0,r.length=0}function s(u){n.push(u)}function o(u){r.push(u)}function a(){e.setup(n)}function c(u){e.setupView(n,u)}const l={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:l,setupLights:a,setupLightsView:c,pushLight:s,pushShadow:o}}function C0e(t){let e=new WeakMap;function n(i,s=0){const o=e.get(i);let a;return o===void 0?(a=new B8(t),e.set(i,[a])):s>=o.length?(a=new B8(t),o.push(a)):a=o[s],a}function r(){e=new WeakMap}return{get:n,dispose:r}}const M0e=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,A0e=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function R0e(t,e,n){let r=new n_;const i=new St,s=new St,o=new gr,a=new lO({depthPacking:NH}),c=new cO,l={},u=n.maxTextureSize,d={[Wd]:Eo,[Eo]:Wd,[mc]:mc},h=new wc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new St},radius:{value:4}},vertexShader:M0e,fragmentShader:A0e}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const p=new Mn;p.setAttribute("position",new _r(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new Xi(p,h),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=UI;let y=this.type;this.render=function(_,I,C){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||_.length===0)return;const A=t.getRenderTarget(),M=t.getActiveCubeFace(),k=t.getActiveMipmapLevel(),O=t.state;O.setBlending(Nd),O.buffers.color.setClear(1,1,1,1),O.buffers.depth.setTest(!0),O.setScissorTest(!1);const B=y!==fc&&this.type===fc,$=y===fc&&this.type!==fc;for(let U=0,q=_.length;U<q;U++){const K=_[U],V=K.shadow;if(V===void 0){console.warn("THREE.WebGLShadowMap:",K,"has no shadow.");continue}if(V.autoUpdate===!1&&V.needsUpdate===!1)continue;i.copy(V.mapSize);const G=V.getFrameExtents();if(i.multiply(G),s.copy(V.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/G.x),i.x=s.x*G.x,V.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/G.y),i.y=s.y*G.y,V.mapSize.y=s.y)),V.map===null||B===!0||$===!0){const Q=this.type!==fc?{minFilter:Bs,magFilter:Bs}:{};V.map!==null&&V.map.dispose(),V.map=new au(i.x,i.y,Q),V.map.texture.name=K.name+".shadowMap",V.camera.updateProjectionMatrix()}t.setRenderTarget(V.map),t.clear();const j=V.getViewportCount();for(let Q=0;Q<j;Q++){const se=V.getViewport(Q);o.set(s.x*se.x,s.y*se.y,s.x*se.z,s.y*se.w),O.viewport(o),V.updateMatrices(K,Q),r=V.getFrustum(),S(I,C,V.camera,K,this.type)}V.isPointLightShadow!==!0&&this.type===fc&&b(V,C),V.needsUpdate=!1}y=this.type,m.needsUpdate=!1,t.setRenderTarget(A,M,k)};function b(_,I){const C=e.update(g);h.defines.VSM_SAMPLES!==_.blurSamples&&(h.defines.VSM_SAMPLES=_.blurSamples,f.defines.VSM_SAMPLES=_.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),_.mapPass===null&&(_.mapPass=new au(i.x,i.y)),h.uniforms.shadow_pass.value=_.map.texture,h.uniforms.resolution.value=_.mapSize,h.uniforms.radius.value=_.radius,t.setRenderTarget(_.mapPass),t.clear(),t.renderBufferDirect(I,null,C,h,g,null),f.uniforms.shadow_pass.value=_.mapPass.texture,f.uniforms.resolution.value=_.mapSize,f.uniforms.radius.value=_.radius,t.setRenderTarget(_.map),t.clear(),t.renderBufferDirect(I,null,C,f,g,null)}function x(_,I,C,A){let M=null;const k=C.isPointLight===!0?_.customDistanceMaterial:_.customDepthMaterial;if(k!==void 0)M=k;else if(M=C.isPointLight===!0?c:a,t.localClippingEnabled&&I.clipShadows===!0&&Array.isArray(I.clippingPlanes)&&I.clippingPlanes.length!==0||I.displacementMap&&I.displacementScale!==0||I.alphaMap&&I.alphaTest>0||I.map&&I.alphaTest>0){const O=M.uuid,B=I.uuid;let $=l[O];$===void 0&&($={},l[O]=$);let U=$[B];U===void 0&&(U=M.clone(),$[B]=U,I.addEventListener("dispose",P)),M=U}if(M.visible=I.visible,M.wireframe=I.wireframe,A===fc?M.side=I.shadowSide!==null?I.shadowSide:I.side:M.side=I.shadowSide!==null?I.shadowSide:d[I.side],M.alphaMap=I.alphaMap,M.alphaTest=I.alphaTest,M.map=I.map,M.clipShadows=I.clipShadows,M.clippingPlanes=I.clippingPlanes,M.clipIntersection=I.clipIntersection,M.displacementMap=I.displacementMap,M.displacementScale=I.displacementScale,M.displacementBias=I.displacementBias,M.wireframeLinewidth=I.wireframeLinewidth,M.linewidth=I.linewidth,C.isPointLight===!0&&M.isMeshDistanceMaterial===!0){const O=t.properties.get(M);O.light=C}return M}function S(_,I,C,A,M){if(_.visible===!1)return;if(_.layers.test(I.layers)&&(_.isMesh||_.isLine||_.isPoints)&&(_.castShadow||_.receiveShadow&&M===fc)&&(!_.frustumCulled||r.intersectsObject(_))){_.modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,_.matrixWorld);const B=e.update(_),$=_.material;if(Array.isArray($)){const U=B.groups;for(let q=0,K=U.length;q<K;q++){const V=U[q],G=$[V.materialIndex];if(G&&G.visible){const j=x(_,G,A,M);_.onBeforeShadow(t,_,I,C,B,j,V),t.renderBufferDirect(C,null,B,j,_,V),_.onAfterShadow(t,_,I,C,B,j,V)}}}else if($.visible){const U=x(_,$,A,M);_.onBeforeShadow(t,_,I,C,B,U,null),t.renderBufferDirect(C,null,B,U,_,null),_.onAfterShadow(t,_,I,C,B,U,null)}}const O=_.children;for(let B=0,$=O.length;B<$;B++)S(O[B],I,C,A,M)}function P(_){_.target.removeEventListener("dispose",P);for(const C in l){const A=l[C],M=_.target.uuid;M in A&&(A[M].dispose(),delete A[M])}}}const k0e={[n2]:r2,[i2]:a2,[s2]:l2,[Om]:o2,[r2]:n2,[a2]:i2,[l2]:s2,[o2]:Om};function O0e(t,e){function n(){let he=!1;const Xe=new gr;let $e=null;const Qe=new gr(0,0,0,0);return{setMask:function(ut){$e!==ut&&!he&&(t.colorMask(ut,ut,ut,ut),$e=ut)},setLocked:function(ut){he=ut},setClear:function(ut,gt,Tt,Kt,Zt){Zt===!0&&(ut*=Kt,gt*=Kt,Tt*=Kt),Xe.set(ut,gt,Tt,Kt),Qe.equals(Xe)===!1&&(t.clearColor(ut,gt,Tt,Kt),Qe.copy(Xe))},reset:function(){he=!1,$e=null,Qe.set(-1,0,0,0)}}}function r(){let he=!1,Xe=!1,$e=null,Qe=null,ut=null;return{setReversed:function(gt){if(Xe!==gt){const Tt=e.get("EXT_clip_control");gt?Tt.clipControlEXT(Tt.LOWER_LEFT_EXT,Tt.ZERO_TO_ONE_EXT):Tt.clipControlEXT(Tt.LOWER_LEFT_EXT,Tt.NEGATIVE_ONE_TO_ONE_EXT),Xe=gt;const Kt=ut;ut=null,this.setClear(Kt)}},getReversed:function(){return Xe},setTest:function(gt){gt?le(t.DEPTH_TEST):ae(t.DEPTH_TEST)},setMask:function(gt){$e!==gt&&!he&&(t.depthMask(gt),$e=gt)},setFunc:function(gt){if(Xe&&(gt=k0e[gt]),Qe!==gt){switch(gt){case n2:t.depthFunc(t.NEVER);break;case r2:t.depthFunc(t.ALWAYS);break;case i2:t.depthFunc(t.LESS);break;case Om:t.depthFunc(t.LEQUAL);break;case s2:t.depthFunc(t.EQUAL);break;case o2:t.depthFunc(t.GEQUAL);break;case a2:t.depthFunc(t.GREATER);break;case l2:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Qe=gt}},setLocked:function(gt){he=gt},setClear:function(gt){ut!==gt&&(Xe&&(gt=1-gt),t.clearDepth(gt),ut=gt)},reset:function(){he=!1,$e=null,Qe=null,ut=null,Xe=!1}}}function i(){let he=!1,Xe=null,$e=null,Qe=null,ut=null,gt=null,Tt=null,Kt=null,Zt=null;return{setTest:function(Bt){he||(Bt?le(t.STENCIL_TEST):ae(t.STENCIL_TEST))},setMask:function(Bt){Xe!==Bt&&!he&&(t.stencilMask(Bt),Xe=Bt)},setFunc:function(Bt,_n,hn){($e!==Bt||Qe!==_n||ut!==hn)&&(t.stencilFunc(Bt,_n,hn),$e=Bt,Qe=_n,ut=hn)},setOp:function(Bt,_n,hn){(gt!==Bt||Tt!==_n||Kt!==hn)&&(t.stencilOp(Bt,_n,hn),gt=Bt,Tt=_n,Kt=hn)},setLocked:function(Bt){he=Bt},setClear:function(Bt){Zt!==Bt&&(t.clearStencil(Bt),Zt=Bt)},reset:function(){he=!1,Xe=null,$e=null,Qe=null,ut=null,gt=null,Tt=null,Kt=null,Zt=null}}}const s=new n,o=new r,a=new i,c=new WeakMap,l=new WeakMap;let u={},d={},h=new WeakMap,f=[],p=null,g=!1,m=null,y=null,b=null,x=null,S=null,P=null,_=null,I=new Wt(0,0,0),C=0,A=!1,M=null,k=null,O=null,B=null,$=null;const U=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let q=!1,K=0;const V=t.getParameter(t.VERSION);V.indexOf("WebGL")!==-1?(K=parseFloat(/^WebGL (\d)/.exec(V)[1]),q=K>=1):V.indexOf("OpenGL ES")!==-1&&(K=parseFloat(/^OpenGL ES (\d)/.exec(V)[1]),q=K>=2);let G=null,j={};const Q=t.getParameter(t.SCISSOR_BOX),se=t.getParameter(t.VIEWPORT),Z=new gr().fromArray(Q),ie=new gr().fromArray(se);function pe(he,Xe,$e,Qe){const ut=new Uint8Array(4),gt=t.createTexture();t.bindTexture(he,gt),t.texParameteri(he,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(he,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Tt=0;Tt<$e;Tt++)he===t.TEXTURE_3D||he===t.TEXTURE_2D_ARRAY?t.texImage3D(Xe,0,t.RGBA,1,1,Qe,0,t.RGBA,t.UNSIGNED_BYTE,ut):t.texImage2D(Xe+Tt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,ut);return gt}const ue={};ue[t.TEXTURE_2D]=pe(t.TEXTURE_2D,t.TEXTURE_2D,1),ue[t.TEXTURE_CUBE_MAP]=pe(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),ue[t.TEXTURE_2D_ARRAY]=pe(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),ue[t.TEXTURE_3D]=pe(t.TEXTURE_3D,t.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),le(t.DEPTH_TEST),o.setFunc(Om),Pe(!1),He(LR),le(t.CULL_FACE),ce(Nd);function le(he){u[he]!==!0&&(t.enable(he),u[he]=!0)}function ae(he){u[he]!==!1&&(t.disable(he),u[he]=!1)}function _e(he,Xe){return d[he]!==Xe?(t.bindFramebuffer(he,Xe),d[he]=Xe,he===t.DRAW_FRAMEBUFFER&&(d[t.FRAMEBUFFER]=Xe),he===t.FRAMEBUFFER&&(d[t.DRAW_FRAMEBUFFER]=Xe),!0):!1}function ye(he,Xe){let $e=f,Qe=!1;if(he){$e=h.get(Xe),$e===void 0&&($e=[],h.set(Xe,$e));const ut=he.textures;if($e.length!==ut.length||$e[0]!==t.COLOR_ATTACHMENT0){for(let gt=0,Tt=ut.length;gt<Tt;gt++)$e[gt]=t.COLOR_ATTACHMENT0+gt;$e.length=ut.length,Qe=!0}}else $e[0]!==t.BACK&&($e[0]=t.BACK,Qe=!0);Qe&&t.drawBuffers($e)}function Ae(he){return p!==he?(t.useProgram(he),p=he,!0):!1}const Oe={[Xf]:t.FUNC_ADD,[iH]:t.FUNC_SUBTRACT,[sH]:t.FUNC_REVERSE_SUBTRACT};Oe[oH]=t.MIN,Oe[aH]=t.MAX;const Be={[lH]:t.ZERO,[cH]:t.ONE,[uH]:t.SRC_COLOR,[e2]:t.SRC_ALPHA,[gH]:t.SRC_ALPHA_SATURATE,[pH]:t.DST_COLOR,[fH]:t.DST_ALPHA,[dH]:t.ONE_MINUS_SRC_COLOR,[t2]:t.ONE_MINUS_SRC_ALPHA,[mH]:t.ONE_MINUS_DST_COLOR,[hH]:t.ONE_MINUS_DST_ALPHA,[yH]:t.CONSTANT_COLOR,[vH]:t.ONE_MINUS_CONSTANT_COLOR,[bH]:t.CONSTANT_ALPHA,[xH]:t.ONE_MINUS_CONSTANT_ALPHA};function ce(he,Xe,$e,Qe,ut,gt,Tt,Kt,Zt,Bt){if(he===Nd){g===!0&&(ae(t.BLEND),g=!1);return}if(g===!1&&(le(t.BLEND),g=!0),he!==rH){if(he!==m||Bt!==A){if((y!==Xf||S!==Xf)&&(t.blendEquation(t.FUNC_ADD),y=Xf,S=Xf),Bt)switch(he){case Em:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case DR:t.blendFunc(t.ONE,t.ONE);break;case BR:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case FR:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",he);break}else switch(he){case Em:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case DR:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case BR:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case FR:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",he);break}b=null,x=null,P=null,_=null,I.set(0,0,0),C=0,m=he,A=Bt}return}ut=ut||Xe,gt=gt||$e,Tt=Tt||Qe,(Xe!==y||ut!==S)&&(t.blendEquationSeparate(Oe[Xe],Oe[ut]),y=Xe,S=ut),($e!==b||Qe!==x||gt!==P||Tt!==_)&&(t.blendFuncSeparate(Be[$e],Be[Qe],Be[gt],Be[Tt]),b=$e,x=Qe,P=gt,_=Tt),(Kt.equals(I)===!1||Zt!==C)&&(t.blendColor(Kt.r,Kt.g,Kt.b,Zt),I.copy(Kt),C=Zt),m=he,A=!1}function Ge(he,Xe){he.side===mc?ae(t.CULL_FACE):le(t.CULL_FACE);let $e=he.side===Eo;Xe&&($e=!$e),Pe($e),he.blending===Em&&he.transparent===!1?ce(Nd):ce(he.blending,he.blendEquation,he.blendSrc,he.blendDst,he.blendEquationAlpha,he.blendSrcAlpha,he.blendDstAlpha,he.blendColor,he.blendAlpha,he.premultipliedAlpha),o.setFunc(he.depthFunc),o.setTest(he.depthTest),o.setMask(he.depthWrite),s.setMask(he.colorWrite);const Qe=he.stencilWrite;a.setTest(Qe),Qe&&(a.setMask(he.stencilWriteMask),a.setFunc(he.stencilFunc,he.stencilRef,he.stencilFuncMask),a.setOp(he.stencilFail,he.stencilZFail,he.stencilZPass)),je(he.polygonOffset,he.polygonOffsetFactor,he.polygonOffsetUnits),he.alphaToCoverage===!0?le(t.SAMPLE_ALPHA_TO_COVERAGE):ae(t.SAMPLE_ALPHA_TO_COVERAGE)}function Pe(he){M!==he&&(he?t.frontFace(t.CW):t.frontFace(t.CCW),M=he)}function He(he){he!==eH?(le(t.CULL_FACE),he!==k&&(he===LR?t.cullFace(t.BACK):he===tH?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):ae(t.CULL_FACE),k=he}function Re(he){he!==O&&(q&&t.lineWidth(he),O=he)}function je(he,Xe,$e){he?(le(t.POLYGON_OFFSET_FILL),(B!==Xe||$!==$e)&&(t.polygonOffset(Xe,$e),B=Xe,$=$e)):ae(t.POLYGON_OFFSET_FILL)}function te(he){he?le(t.SCISSOR_TEST):ae(t.SCISSOR_TEST)}function ee(he){he===void 0&&(he=t.TEXTURE0+U-1),G!==he&&(t.activeTexture(he),G=he)}function X(he,Xe,$e){$e===void 0&&(G===null?$e=t.TEXTURE0+U-1:$e=G);let Qe=j[$e];Qe===void 0&&(Qe={type:void 0,texture:void 0},j[$e]=Qe),(Qe.type!==he||Qe.texture!==Xe)&&(G!==$e&&(t.activeTexture($e),G=$e),t.bindTexture(he,Xe||ue[he]),Qe.type=he,Qe.texture=Xe)}function we(){const he=j[G];he!==void 0&&he.type!==void 0&&(t.bindTexture(he.type,null),he.type=void 0,he.texture=void 0)}function Ne(){try{t.compressedTexImage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function We(){try{t.compressedTexImage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function xe(){try{t.texSubImage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Ve(){try{t.texSubImage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function be(){try{t.compressedTexSubImage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function ge(){try{t.compressedTexSubImage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Se(){try{t.texStorage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Ie(){try{t.texStorage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function me(){try{t.texImage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Ee(){try{t.texImage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function oe(he){Z.equals(he)===!1&&(t.scissor(he.x,he.y,he.z,he.w),Z.copy(he))}function ne(he){ie.equals(he)===!1&&(t.viewport(he.x,he.y,he.z,he.w),ie.copy(he))}function de(he,Xe){let $e=l.get(Xe);$e===void 0&&($e=new WeakMap,l.set(Xe,$e));let Qe=$e.get(he);Qe===void 0&&(Qe=t.getUniformBlockIndex(Xe,he.name),$e.set(he,Qe))}function Te(he,Xe){const Qe=l.get(Xe).get(he);c.get(Xe)!==Qe&&(t.uniformBlockBinding(Xe,Qe,he.__bindingPointIndex),c.set(Xe,Qe))}function ke(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),o.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),u={},G=null,j={},d={},h=new WeakMap,f=[],p=null,g=!1,m=null,y=null,b=null,x=null,S=null,P=null,_=null,I=new Wt(0,0,0),C=0,A=!1,M=null,k=null,O=null,B=null,$=null,Z.set(0,0,t.canvas.width,t.canvas.height),ie.set(0,0,t.canvas.width,t.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:le,disable:ae,bindFramebuffer:_e,drawBuffers:ye,useProgram:Ae,setBlending:ce,setMaterial:Ge,setFlipSided:Pe,setCullFace:He,setLineWidth:Re,setPolygonOffset:je,setScissorTest:te,activeTexture:ee,bindTexture:X,unbindTexture:we,compressedTexImage2D:Ne,compressedTexImage3D:We,texImage2D:me,texImage3D:Ee,updateUBOMapping:de,uniformBlockBinding:Te,texStorage2D:Se,texStorage3D:Ie,texSubImage2D:xe,texSubImage3D:Ve,compressedTexSubImage2D:be,compressedTexSubImage3D:ge,scissor:oe,viewport:ne,reset:ke}}function N0e(t,e,n,r,i,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),l=new St,u=new WeakMap;let d;const h=new WeakMap;let f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(ee,X){return f?new OffscreenCanvas(ee,X):mw("canvas")}function g(ee,X,we){let Ne=1;const We=te(ee);if((We.width>we||We.height>we)&&(Ne=we/Math.max(We.width,We.height)),Ne<1)if(typeof HTMLImageElement<"u"&&ee instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ee instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ee instanceof ImageBitmap||typeof VideoFrame<"u"&&ee instanceof VideoFrame){const xe=Math.floor(Ne*We.width),Ve=Math.floor(Ne*We.height);d===void 0&&(d=p(xe,Ve));const be=X?p(xe,Ve):d;return be.width=xe,be.height=Ve,be.getContext("2d").drawImage(ee,0,0,xe,Ve),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+We.width+"x"+We.height+") to ("+xe+"x"+Ve+")."),be}else return"data"in ee&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+We.width+"x"+We.height+")."),ee;return ee}function m(ee){return ee.generateMipmaps}function y(ee){t.generateMipmap(ee)}function b(ee){return ee.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:ee.isWebGL3DRenderTarget?t.TEXTURE_3D:ee.isWebGLArrayRenderTarget||ee.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function x(ee,X,we,Ne,We=!1){if(ee!==null){if(t[ee]!==void 0)return t[ee];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ee+"'")}let xe=X;if(X===t.RED&&(we===t.FLOAT&&(xe=t.R32F),we===t.HALF_FLOAT&&(xe=t.R16F),we===t.UNSIGNED_BYTE&&(xe=t.R8)),X===t.RED_INTEGER&&(we===t.UNSIGNED_BYTE&&(xe=t.R8UI),we===t.UNSIGNED_SHORT&&(xe=t.R16UI),we===t.UNSIGNED_INT&&(xe=t.R32UI),we===t.BYTE&&(xe=t.R8I),we===t.SHORT&&(xe=t.R16I),we===t.INT&&(xe=t.R32I)),X===t.RG&&(we===t.FLOAT&&(xe=t.RG32F),we===t.HALF_FLOAT&&(xe=t.RG16F),we===t.UNSIGNED_BYTE&&(xe=t.RG8)),X===t.RG_INTEGER&&(we===t.UNSIGNED_BYTE&&(xe=t.RG8UI),we===t.UNSIGNED_SHORT&&(xe=t.RG16UI),we===t.UNSIGNED_INT&&(xe=t.RG32UI),we===t.BYTE&&(xe=t.RG8I),we===t.SHORT&&(xe=t.RG16I),we===t.INT&&(xe=t.RG32I)),X===t.RGB_INTEGER&&(we===t.UNSIGNED_BYTE&&(xe=t.RGB8UI),we===t.UNSIGNED_SHORT&&(xe=t.RGB16UI),we===t.UNSIGNED_INT&&(xe=t.RGB32UI),we===t.BYTE&&(xe=t.RGB8I),we===t.SHORT&&(xe=t.RGB16I),we===t.INT&&(xe=t.RGB32I)),X===t.RGBA_INTEGER&&(we===t.UNSIGNED_BYTE&&(xe=t.RGBA8UI),we===t.UNSIGNED_SHORT&&(xe=t.RGBA16UI),we===t.UNSIGNED_INT&&(xe=t.RGBA32UI),we===t.BYTE&&(xe=t.RGBA8I),we===t.SHORT&&(xe=t.RGBA16I),we===t.INT&&(xe=t.RGBA32I)),X===t.RGB&&we===t.UNSIGNED_INT_5_9_9_9_REV&&(xe=t.RGB9_E5),X===t.RGBA){const Ve=We?fw:lr.getTransfer(Ne);we===t.FLOAT&&(xe=t.RGBA32F),we===t.HALF_FLOAT&&(xe=t.RGBA16F),we===t.UNSIGNED_BYTE&&(xe=Ve===Rr?t.SRGB8_ALPHA8:t.RGBA8),we===t.UNSIGNED_SHORT_4_4_4_4&&(xe=t.RGBA4),we===t.UNSIGNED_SHORT_5_5_5_1&&(xe=t.RGB5_A1)}return(xe===t.R16F||xe===t.R32F||xe===t.RG16F||xe===t.RG32F||xe===t.RGBA16F||xe===t.RGBA32F)&&e.get("EXT_color_buffer_float"),xe}function S(ee,X){let we;return ee?X===null||X===qd||X===Hy?we=t.DEPTH24_STENCIL8:X===Zo?we=t.DEPTH32F_STENCIL8:X===zy&&(we=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):X===null||X===qd||X===Hy?we=t.DEPTH_COMPONENT24:X===Zo?we=t.DEPTH_COMPONENT32F:X===zy&&(we=t.DEPTH_COMPONENT16),we}function P(ee,X){return m(ee)===!0||ee.isFramebufferTexture&&ee.minFilter!==Bs&&ee.minFilter!==cs?Math.log2(Math.max(X.width,X.height))+1:ee.mipmaps!==void 0&&ee.mipmaps.length>0?ee.mipmaps.length:ee.isCompressedTexture&&Array.isArray(ee.image)?X.mipmaps.length:1}function _(ee){const X=ee.target;X.removeEventListener("dispose",_),C(X),X.isVideoTexture&&u.delete(X)}function I(ee){const X=ee.target;X.removeEventListener("dispose",I),M(X)}function C(ee){const X=r.get(ee);if(X.__webglInit===void 0)return;const we=ee.source,Ne=h.get(we);if(Ne){const We=Ne[X.__cacheKey];We.usedTimes--,We.usedTimes===0&&A(ee),Object.keys(Ne).length===0&&h.delete(we)}r.remove(ee)}function A(ee){const X=r.get(ee);t.deleteTexture(X.__webglTexture);const we=ee.source,Ne=h.get(we);delete Ne[X.__cacheKey],o.memory.textures--}function M(ee){const X=r.get(ee);if(ee.depthTexture&&(ee.depthTexture.dispose(),r.remove(ee.depthTexture)),ee.isWebGLCubeRenderTarget)for(let Ne=0;Ne<6;Ne++){if(Array.isArray(X.__webglFramebuffer[Ne]))for(let We=0;We<X.__webglFramebuffer[Ne].length;We++)t.deleteFramebuffer(X.__webglFramebuffer[Ne][We]);else t.deleteFramebuffer(X.__webglFramebuffer[Ne]);X.__webglDepthbuffer&&t.deleteRenderbuffer(X.__webglDepthbuffer[Ne])}else{if(Array.isArray(X.__webglFramebuffer))for(let Ne=0;Ne<X.__webglFramebuffer.length;Ne++)t.deleteFramebuffer(X.__webglFramebuffer[Ne]);else t.deleteFramebuffer(X.__webglFramebuffer);if(X.__webglDepthbuffer&&t.deleteRenderbuffer(X.__webglDepthbuffer),X.__webglMultisampledFramebuffer&&t.deleteFramebuffer(X.__webglMultisampledFramebuffer),X.__webglColorRenderbuffer)for(let Ne=0;Ne<X.__webglColorRenderbuffer.length;Ne++)X.__webglColorRenderbuffer[Ne]&&t.deleteRenderbuffer(X.__webglColorRenderbuffer[Ne]);X.__webglDepthRenderbuffer&&t.deleteRenderbuffer(X.__webglDepthRenderbuffer)}const we=ee.textures;for(let Ne=0,We=we.length;Ne<We;Ne++){const xe=r.get(we[Ne]);xe.__webglTexture&&(t.deleteTexture(xe.__webglTexture),o.memory.textures--),r.remove(we[Ne])}r.remove(ee)}let k=0;function O(){k=0}function B(){const ee=k;return ee>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ee+" texture units while this GPU supports only "+i.maxTextures),k+=1,ee}function $(ee){const X=[];return X.push(ee.wrapS),X.push(ee.wrapT),X.push(ee.wrapR||0),X.push(ee.magFilter),X.push(ee.minFilter),X.push(ee.anisotropy),X.push(ee.internalFormat),X.push(ee.format),X.push(ee.type),X.push(ee.generateMipmaps),X.push(ee.premultiplyAlpha),X.push(ee.flipY),X.push(ee.unpackAlignment),X.push(ee.colorSpace),X.join()}function U(ee,X){const we=r.get(ee);if(ee.isVideoTexture&&Re(ee),ee.isRenderTargetTexture===!1&&ee.version>0&&we.__version!==ee.version){const Ne=ee.image;if(Ne===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ne.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ie(we,ee,X);return}}n.bindTexture(t.TEXTURE_2D,we.__webglTexture,t.TEXTURE0+X)}function q(ee,X){const we=r.get(ee);if(ee.version>0&&we.__version!==ee.version){ie(we,ee,X);return}n.bindTexture(t.TEXTURE_2D_ARRAY,we.__webglTexture,t.TEXTURE0+X)}function K(ee,X){const we=r.get(ee);if(ee.version>0&&we.__version!==ee.version){ie(we,ee,X);return}n.bindTexture(t.TEXTURE_3D,we.__webglTexture,t.TEXTURE0+X)}function V(ee,X){const we=r.get(ee);if(ee.version>0&&we.__version!==ee.version){pe(we,ee,X);return}n.bindTexture(t.TEXTURE_CUBE_MAP,we.__webglTexture,t.TEXTURE0+X)}const G={[lw]:t.REPEAT,[pl]:t.CLAMP_TO_EDGE,[cw]:t.MIRRORED_REPEAT},j={[Bs]:t.NEAREST,[D3]:t.NEAREST_MIPMAP_NEAREST,[fy]:t.NEAREST_MIPMAP_LINEAR,[cs]:t.LINEAR,[Ox]:t.LINEAR_MIPMAP_NEAREST,[Yc]:t.LINEAR_MIPMAP_LINEAR},Q={[DH]:t.NEVER,[HH]:t.ALWAYS,[BH]:t.LESS,[K3]:t.LEQUAL,[FH]:t.EQUAL,[zH]:t.GEQUAL,[UH]:t.GREATER,[$H]:t.NOTEQUAL};function se(ee,X){if(X.type===Zo&&e.has("OES_texture_float_linear")===!1&&(X.magFilter===cs||X.magFilter===Ox||X.magFilter===fy||X.magFilter===Yc||X.minFilter===cs||X.minFilter===Ox||X.minFilter===fy||X.minFilter===Yc)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(ee,t.TEXTURE_WRAP_S,G[X.wrapS]),t.texParameteri(ee,t.TEXTURE_WRAP_T,G[X.wrapT]),(ee===t.TEXTURE_3D||ee===t.TEXTURE_2D_ARRAY)&&t.texParameteri(ee,t.TEXTURE_WRAP_R,G[X.wrapR]),t.texParameteri(ee,t.TEXTURE_MAG_FILTER,j[X.magFilter]),t.texParameteri(ee,t.TEXTURE_MIN_FILTER,j[X.minFilter]),X.compareFunction&&(t.texParameteri(ee,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(ee,t.TEXTURE_COMPARE_FUNC,Q[X.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(X.magFilter===Bs||X.minFilter!==fy&&X.minFilter!==Yc||X.type===Zo&&e.has("OES_texture_float_linear")===!1)return;if(X.anisotropy>1||r.get(X).__currentAnisotropy){const we=e.get("EXT_texture_filter_anisotropic");t.texParameterf(ee,we.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(X.anisotropy,i.getMaxAnisotropy())),r.get(X).__currentAnisotropy=X.anisotropy}}}function Z(ee,X){let we=!1;ee.__webglInit===void 0&&(ee.__webglInit=!0,X.addEventListener("dispose",_));const Ne=X.source;let We=h.get(Ne);We===void 0&&(We={},h.set(Ne,We));const xe=$(X);if(xe!==ee.__cacheKey){We[xe]===void 0&&(We[xe]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,we=!0),We[xe].usedTimes++;const Ve=We[ee.__cacheKey];Ve!==void 0&&(We[ee.__cacheKey].usedTimes--,Ve.usedTimes===0&&A(X)),ee.__cacheKey=xe,ee.__webglTexture=We[xe].texture}return we}function ie(ee,X,we){let Ne=t.TEXTURE_2D;(X.isDataArrayTexture||X.isCompressedArrayTexture)&&(Ne=t.TEXTURE_2D_ARRAY),X.isData3DTexture&&(Ne=t.TEXTURE_3D);const We=Z(ee,X),xe=X.source;n.bindTexture(Ne,ee.__webglTexture,t.TEXTURE0+we);const Ve=r.get(xe);if(xe.version!==Ve.__version||We===!0){n.activeTexture(t.TEXTURE0+we);const be=lr.getPrimaries(lr.workingColorSpace),ge=X.colorSpace===Sd?null:lr.getPrimaries(X.colorSpace),Se=X.colorSpace===Sd||be===ge?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,X.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,X.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Se);let Ie=g(X.image,!1,i.maxTextureSize);Ie=je(X,Ie);const me=s.convert(X.format,X.colorSpace),Ee=s.convert(X.type);let oe=x(X.internalFormat,me,Ee,X.colorSpace,X.isVideoTexture);se(Ne,X);let ne;const de=X.mipmaps,Te=X.isVideoTexture!==!0,ke=Ve.__version===void 0||We===!0,he=xe.dataReady,Xe=P(X,Ie);if(X.isDepthTexture)oe=S(X.format===Wy,X.type),ke&&(Te?n.texStorage2D(t.TEXTURE_2D,1,oe,Ie.width,Ie.height):n.texImage2D(t.TEXTURE_2D,0,oe,Ie.width,Ie.height,0,me,Ee,null));else if(X.isDataTexture)if(de.length>0){Te&&ke&&n.texStorage2D(t.TEXTURE_2D,Xe,oe,de[0].width,de[0].height);for(let $e=0,Qe=de.length;$e<Qe;$e++)ne=de[$e],Te?he&&n.texSubImage2D(t.TEXTURE_2D,$e,0,0,ne.width,ne.height,me,Ee,ne.data):n.texImage2D(t.TEXTURE_2D,$e,oe,ne.width,ne.height,0,me,Ee,ne.data);X.generateMipmaps=!1}else Te?(ke&&n.texStorage2D(t.TEXTURE_2D,Xe,oe,Ie.width,Ie.height),he&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Ie.width,Ie.height,me,Ee,Ie.data)):n.texImage2D(t.TEXTURE_2D,0,oe,Ie.width,Ie.height,0,me,Ee,Ie.data);else if(X.isCompressedTexture)if(X.isCompressedArrayTexture){Te&&ke&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Xe,oe,de[0].width,de[0].height,Ie.depth);for(let $e=0,Qe=de.length;$e<Qe;$e++)if(ne=de[$e],X.format!==to)if(me!==null)if(Te){if(he)if(X.layerUpdates.size>0){const ut=GR(ne.width,ne.height,X.format,X.type);for(const gt of X.layerUpdates){const Tt=ne.data.subarray(gt*ut/ne.data.BYTES_PER_ELEMENT,(gt+1)*ut/ne.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,$e,0,0,gt,ne.width,ne.height,1,me,Tt)}X.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,$e,0,0,0,ne.width,ne.height,Ie.depth,me,ne.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,$e,oe,ne.width,ne.height,Ie.depth,0,ne.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Te?he&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,$e,0,0,0,ne.width,ne.height,Ie.depth,me,Ee,ne.data):n.texImage3D(t.TEXTURE_2D_ARRAY,$e,oe,ne.width,ne.height,Ie.depth,0,me,Ee,ne.data)}else{Te&&ke&&n.texStorage2D(t.TEXTURE_2D,Xe,oe,de[0].width,de[0].height);for(let $e=0,Qe=de.length;$e<Qe;$e++)ne=de[$e],X.format!==to?me!==null?Te?he&&n.compressedTexSubImage2D(t.TEXTURE_2D,$e,0,0,ne.width,ne.height,me,ne.data):n.compressedTexImage2D(t.TEXTURE_2D,$e,oe,ne.width,ne.height,0,ne.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Te?he&&n.texSubImage2D(t.TEXTURE_2D,$e,0,0,ne.width,ne.height,me,Ee,ne.data):n.texImage2D(t.TEXTURE_2D,$e,oe,ne.width,ne.height,0,me,Ee,ne.data)}else if(X.isDataArrayTexture)if(Te){if(ke&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Xe,oe,Ie.width,Ie.height,Ie.depth),he)if(X.layerUpdates.size>0){const $e=GR(Ie.width,Ie.height,X.format,X.type);for(const Qe of X.layerUpdates){const ut=Ie.data.subarray(Qe*$e/Ie.data.BYTES_PER_ELEMENT,(Qe+1)*$e/Ie.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,Qe,Ie.width,Ie.height,1,me,Ee,ut)}X.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Ie.width,Ie.height,Ie.depth,me,Ee,Ie.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,oe,Ie.width,Ie.height,Ie.depth,0,me,Ee,Ie.data);else if(X.isData3DTexture)Te?(ke&&n.texStorage3D(t.TEXTURE_3D,Xe,oe,Ie.width,Ie.height,Ie.depth),he&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Ie.width,Ie.height,Ie.depth,me,Ee,Ie.data)):n.texImage3D(t.TEXTURE_3D,0,oe,Ie.width,Ie.height,Ie.depth,0,me,Ee,Ie.data);else if(X.isFramebufferTexture){if(ke)if(Te)n.texStorage2D(t.TEXTURE_2D,Xe,oe,Ie.width,Ie.height);else{let $e=Ie.width,Qe=Ie.height;for(let ut=0;ut<Xe;ut++)n.texImage2D(t.TEXTURE_2D,ut,oe,$e,Qe,0,me,Ee,null),$e>>=1,Qe>>=1}}else if(de.length>0){if(Te&&ke){const $e=te(de[0]);n.texStorage2D(t.TEXTURE_2D,Xe,oe,$e.width,$e.height)}for(let $e=0,Qe=de.length;$e<Qe;$e++)ne=de[$e],Te?he&&n.texSubImage2D(t.TEXTURE_2D,$e,0,0,me,Ee,ne):n.texImage2D(t.TEXTURE_2D,$e,oe,me,Ee,ne);X.generateMipmaps=!1}else if(Te){if(ke){const $e=te(Ie);n.texStorage2D(t.TEXTURE_2D,Xe,oe,$e.width,$e.height)}he&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,me,Ee,Ie)}else n.texImage2D(t.TEXTURE_2D,0,oe,me,Ee,Ie);m(X)&&y(Ne),Ve.__version=xe.version,X.onUpdate&&X.onUpdate(X)}ee.__version=X.version}function pe(ee,X,we){if(X.image.length!==6)return;const Ne=Z(ee,X),We=X.source;n.bindTexture(t.TEXTURE_CUBE_MAP,ee.__webglTexture,t.TEXTURE0+we);const xe=r.get(We);if(We.version!==xe.__version||Ne===!0){n.activeTexture(t.TEXTURE0+we);const Ve=lr.getPrimaries(lr.workingColorSpace),be=X.colorSpace===Sd?null:lr.getPrimaries(X.colorSpace),ge=X.colorSpace===Sd||Ve===be?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,X.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,X.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,ge);const Se=X.isCompressedTexture||X.image[0].isCompressedTexture,Ie=X.image[0]&&X.image[0].isDataTexture,me=[];for(let Qe=0;Qe<6;Qe++)!Se&&!Ie?me[Qe]=g(X.image[Qe],!0,i.maxCubemapSize):me[Qe]=Ie?X.image[Qe].image:X.image[Qe],me[Qe]=je(X,me[Qe]);const Ee=me[0],oe=s.convert(X.format,X.colorSpace),ne=s.convert(X.type),de=x(X.internalFormat,oe,ne,X.colorSpace),Te=X.isVideoTexture!==!0,ke=xe.__version===void 0||Ne===!0,he=We.dataReady;let Xe=P(X,Ee);se(t.TEXTURE_CUBE_MAP,X);let $e;if(Se){Te&&ke&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Xe,de,Ee.width,Ee.height);for(let Qe=0;Qe<6;Qe++){$e=me[Qe].mipmaps;for(let ut=0;ut<$e.length;ut++){const gt=$e[ut];X.format!==to?oe!==null?Te?he&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,ut,0,0,gt.width,gt.height,oe,gt.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,ut,de,gt.width,gt.height,0,gt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Te?he&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,ut,0,0,gt.width,gt.height,oe,ne,gt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,ut,de,gt.width,gt.height,0,oe,ne,gt.data)}}}else{if($e=X.mipmaps,Te&&ke){$e.length>0&&Xe++;const Qe=te(me[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,Xe,de,Qe.width,Qe.height)}for(let Qe=0;Qe<6;Qe++)if(Ie){Te?he&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,0,0,0,me[Qe].width,me[Qe].height,oe,ne,me[Qe].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,0,de,me[Qe].width,me[Qe].height,0,oe,ne,me[Qe].data);for(let ut=0;ut<$e.length;ut++){const Tt=$e[ut].image[Qe].image;Te?he&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,ut+1,0,0,Tt.width,Tt.height,oe,ne,Tt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,ut+1,de,Tt.width,Tt.height,0,oe,ne,Tt.data)}}else{Te?he&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,0,0,0,oe,ne,me[Qe]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,0,de,oe,ne,me[Qe]);for(let ut=0;ut<$e.length;ut++){const gt=$e[ut];Te?he&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,ut+1,0,0,oe,ne,gt.image[Qe]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,ut+1,de,oe,ne,gt.image[Qe])}}}m(X)&&y(t.TEXTURE_CUBE_MAP),xe.__version=We.version,X.onUpdate&&X.onUpdate(X)}ee.__version=X.version}function ue(ee,X,we,Ne,We,xe){const Ve=s.convert(we.format,we.colorSpace),be=s.convert(we.type),ge=x(we.internalFormat,Ve,be,we.colorSpace),Se=r.get(X),Ie=r.get(we);if(Ie.__renderTarget=X,!Se.__hasExternalTextures){const me=Math.max(1,X.width>>xe),Ee=Math.max(1,X.height>>xe);We===t.TEXTURE_3D||We===t.TEXTURE_2D_ARRAY?n.texImage3D(We,xe,ge,me,Ee,X.depth,0,Ve,be,null):n.texImage2D(We,xe,ge,me,Ee,0,Ve,be,null)}n.bindFramebuffer(t.FRAMEBUFFER,ee),He(X)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,Ne,We,Ie.__webglTexture,0,Pe(X)):(We===t.TEXTURE_2D||We>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&We<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,Ne,We,Ie.__webglTexture,xe),n.bindFramebuffer(t.FRAMEBUFFER,null)}function le(ee,X,we){if(t.bindRenderbuffer(t.RENDERBUFFER,ee),X.depthBuffer){const Ne=X.depthTexture,We=Ne&&Ne.isDepthTexture?Ne.type:null,xe=S(X.stencilBuffer,We),Ve=X.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,be=Pe(X);He(X)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,be,xe,X.width,X.height):we?t.renderbufferStorageMultisample(t.RENDERBUFFER,be,xe,X.width,X.height):t.renderbufferStorage(t.RENDERBUFFER,xe,X.width,X.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,Ve,t.RENDERBUFFER,ee)}else{const Ne=X.textures;for(let We=0;We<Ne.length;We++){const xe=Ne[We],Ve=s.convert(xe.format,xe.colorSpace),be=s.convert(xe.type),ge=x(xe.internalFormat,Ve,be,xe.colorSpace),Se=Pe(X);we&&He(X)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Se,ge,X.width,X.height):He(X)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Se,ge,X.width,X.height):t.renderbufferStorage(t.RENDERBUFFER,ge,X.width,X.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function ae(ee,X){if(X&&X.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,ee),!(X.depthTexture&&X.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ne=r.get(X.depthTexture);Ne.__renderTarget=X,(!Ne.__webglTexture||X.depthTexture.image.width!==X.width||X.depthTexture.image.height!==X.height)&&(X.depthTexture.image.width=X.width,X.depthTexture.image.height=X.height,X.depthTexture.needsUpdate=!0),U(X.depthTexture,0);const We=Ne.__webglTexture,xe=Pe(X);if(X.depthTexture.format===Vy)He(X)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,We,0,xe):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,We,0);else if(X.depthTexture.format===Wy)He(X)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,We,0,xe):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,We,0);else throw new Error("Unknown depthTexture format")}function _e(ee){const X=r.get(ee),we=ee.isWebGLCubeRenderTarget===!0;if(X.__boundDepthTexture!==ee.depthTexture){const Ne=ee.depthTexture;if(X.__depthDisposeCallback&&X.__depthDisposeCallback(),Ne){const We=()=>{delete X.__boundDepthTexture,delete X.__depthDisposeCallback,Ne.removeEventListener("dispose",We)};Ne.addEventListener("dispose",We),X.__depthDisposeCallback=We}X.__boundDepthTexture=Ne}if(ee.depthTexture&&!X.__autoAllocateDepthBuffer){if(we)throw new Error("target.depthTexture not supported in Cube render targets");ae(X.__webglFramebuffer,ee)}else if(we){X.__webglDepthbuffer=[];for(let Ne=0;Ne<6;Ne++)if(n.bindFramebuffer(t.FRAMEBUFFER,X.__webglFramebuffer[Ne]),X.__webglDepthbuffer[Ne]===void 0)X.__webglDepthbuffer[Ne]=t.createRenderbuffer(),le(X.__webglDepthbuffer[Ne],ee,!1);else{const We=ee.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,xe=X.__webglDepthbuffer[Ne];t.bindRenderbuffer(t.RENDERBUFFER,xe),t.framebufferRenderbuffer(t.FRAMEBUFFER,We,t.RENDERBUFFER,xe)}}else if(n.bindFramebuffer(t.FRAMEBUFFER,X.__webglFramebuffer),X.__webglDepthbuffer===void 0)X.__webglDepthbuffer=t.createRenderbuffer(),le(X.__webglDepthbuffer,ee,!1);else{const Ne=ee.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,We=X.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,We),t.framebufferRenderbuffer(t.FRAMEBUFFER,Ne,t.RENDERBUFFER,We)}n.bindFramebuffer(t.FRAMEBUFFER,null)}function ye(ee,X,we){const Ne=r.get(ee);X!==void 0&&ue(Ne.__webglFramebuffer,ee,ee.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),we!==void 0&&_e(ee)}function Ae(ee){const X=ee.texture,we=r.get(ee),Ne=r.get(X);ee.addEventListener("dispose",I);const We=ee.textures,xe=ee.isWebGLCubeRenderTarget===!0,Ve=We.length>1;if(Ve||(Ne.__webglTexture===void 0&&(Ne.__webglTexture=t.createTexture()),Ne.__version=X.version,o.memory.textures++),xe){we.__webglFramebuffer=[];for(let be=0;be<6;be++)if(X.mipmaps&&X.mipmaps.length>0){we.__webglFramebuffer[be]=[];for(let ge=0;ge<X.mipmaps.length;ge++)we.__webglFramebuffer[be][ge]=t.createFramebuffer()}else we.__webglFramebuffer[be]=t.createFramebuffer()}else{if(X.mipmaps&&X.mipmaps.length>0){we.__webglFramebuffer=[];for(let be=0;be<X.mipmaps.length;be++)we.__webglFramebuffer[be]=t.createFramebuffer()}else we.__webglFramebuffer=t.createFramebuffer();if(Ve)for(let be=0,ge=We.length;be<ge;be++){const Se=r.get(We[be]);Se.__webglTexture===void 0&&(Se.__webglTexture=t.createTexture(),o.memory.textures++)}if(ee.samples>0&&He(ee)===!1){we.__webglMultisampledFramebuffer=t.createFramebuffer(),we.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,we.__webglMultisampledFramebuffer);for(let be=0;be<We.length;be++){const ge=We[be];we.__webglColorRenderbuffer[be]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,we.__webglColorRenderbuffer[be]);const Se=s.convert(ge.format,ge.colorSpace),Ie=s.convert(ge.type),me=x(ge.internalFormat,Se,Ie,ge.colorSpace,ee.isXRRenderTarget===!0),Ee=Pe(ee);t.renderbufferStorageMultisample(t.RENDERBUFFER,Ee,me,ee.width,ee.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+be,t.RENDERBUFFER,we.__webglColorRenderbuffer[be])}t.bindRenderbuffer(t.RENDERBUFFER,null),ee.depthBuffer&&(we.__webglDepthRenderbuffer=t.createRenderbuffer(),le(we.__webglDepthRenderbuffer,ee,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(xe){n.bindTexture(t.TEXTURE_CUBE_MAP,Ne.__webglTexture),se(t.TEXTURE_CUBE_MAP,X);for(let be=0;be<6;be++)if(X.mipmaps&&X.mipmaps.length>0)for(let ge=0;ge<X.mipmaps.length;ge++)ue(we.__webglFramebuffer[be][ge],ee,X,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+be,ge);else ue(we.__webglFramebuffer[be],ee,X,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+be,0);m(X)&&y(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Ve){for(let be=0,ge=We.length;be<ge;be++){const Se=We[be],Ie=r.get(Se);n.bindTexture(t.TEXTURE_2D,Ie.__webglTexture),se(t.TEXTURE_2D,Se),ue(we.__webglFramebuffer,ee,Se,t.COLOR_ATTACHMENT0+be,t.TEXTURE_2D,0),m(Se)&&y(t.TEXTURE_2D)}n.unbindTexture()}else{let be=t.TEXTURE_2D;if((ee.isWebGL3DRenderTarget||ee.isWebGLArrayRenderTarget)&&(be=ee.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(be,Ne.__webglTexture),se(be,X),X.mipmaps&&X.mipmaps.length>0)for(let ge=0;ge<X.mipmaps.length;ge++)ue(we.__webglFramebuffer[ge],ee,X,t.COLOR_ATTACHMENT0,be,ge);else ue(we.__webglFramebuffer,ee,X,t.COLOR_ATTACHMENT0,be,0);m(X)&&y(be),n.unbindTexture()}ee.depthBuffer&&_e(ee)}function Oe(ee){const X=ee.textures;for(let we=0,Ne=X.length;we<Ne;we++){const We=X[we];if(m(We)){const xe=b(ee),Ve=r.get(We).__webglTexture;n.bindTexture(xe,Ve),y(xe),n.unbindTexture()}}}const Be=[],ce=[];function Ge(ee){if(ee.samples>0){if(He(ee)===!1){const X=ee.textures,we=ee.width,Ne=ee.height;let We=t.COLOR_BUFFER_BIT;const xe=ee.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ve=r.get(ee),be=X.length>1;if(be)for(let ge=0;ge<X.length;ge++)n.bindFramebuffer(t.FRAMEBUFFER,Ve.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+ge,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Ve.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+ge,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Ve.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ve.__webglFramebuffer);for(let ge=0;ge<X.length;ge++){if(ee.resolveDepthBuffer&&(ee.depthBuffer&&(We|=t.DEPTH_BUFFER_BIT),ee.stencilBuffer&&ee.resolveStencilBuffer&&(We|=t.STENCIL_BUFFER_BIT)),be){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Ve.__webglColorRenderbuffer[ge]);const Se=r.get(X[ge]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,Se,0)}t.blitFramebuffer(0,0,we,Ne,0,0,we,Ne,We,t.NEAREST),c===!0&&(Be.length=0,ce.length=0,Be.push(t.COLOR_ATTACHMENT0+ge),ee.depthBuffer&&ee.resolveDepthBuffer===!1&&(Be.push(xe),ce.push(xe),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,ce)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Be))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),be)for(let ge=0;ge<X.length;ge++){n.bindFramebuffer(t.FRAMEBUFFER,Ve.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+ge,t.RENDERBUFFER,Ve.__webglColorRenderbuffer[ge]);const Se=r.get(X[ge]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Ve.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+ge,t.TEXTURE_2D,Se,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ve.__webglMultisampledFramebuffer)}else if(ee.depthBuffer&&ee.resolveDepthBuffer===!1&&c){const X=ee.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[X])}}}function Pe(ee){return Math.min(i.maxSamples,ee.samples)}function He(ee){const X=r.get(ee);return ee.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&X.__useRenderToTexture!==!1}function Re(ee){const X=o.render.frame;u.get(ee)!==X&&(u.set(ee,X),ee.update())}function je(ee,X){const we=ee.colorSpace,Ne=ee.format,We=ee.type;return ee.isCompressedTexture===!0||ee.isVideoTexture===!0||we!==Nm&&we!==Sd&&(lr.getTransfer(we)===Rr?(Ne!==to||We!==xc)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",we)),X}function te(ee){return typeof HTMLImageElement<"u"&&ee instanceof HTMLImageElement?(l.width=ee.naturalWidth||ee.width,l.height=ee.naturalHeight||ee.height):typeof VideoFrame<"u"&&ee instanceof VideoFrame?(l.width=ee.displayWidth,l.height=ee.displayHeight):(l.width=ee.width,l.height=ee.height),l}this.allocateTextureUnit=B,this.resetTextureUnits=O,this.setTexture2D=U,this.setTexture2DArray=q,this.setTexture3D=K,this.setTextureCube=V,this.rebindTextures=ye,this.setupRenderTarget=Ae,this.updateRenderTargetMipmap=Oe,this.updateMultisampleRenderTarget=Ge,this.setupDepthRenderbuffer=_e,this.setupFrameBufferTexture=ue,this.useMultisampledRTT=He}function tW(t,e){function n(r,i=Sd){let s;const o=lr.getTransfer(i);if(r===xc)return t.UNSIGNED_BYTE;if(r===HI)return t.UNSIGNED_SHORT_4_4_4_4;if(r===VI)return t.UNSIGNED_SHORT_5_5_5_1;if(r===U3)return t.UNSIGNED_INT_5_9_9_9_REV;if(r===B3)return t.BYTE;if(r===F3)return t.SHORT;if(r===zy)return t.UNSIGNED_SHORT;if(r===zI)return t.INT;if(r===qd)return t.UNSIGNED_INT;if(r===Zo)return t.FLOAT;if(r===uv)return t.HALF_FLOAT;if(r===$3)return t.ALPHA;if(r===z3)return t.RGB;if(r===to)return t.RGBA;if(r===H3)return t.LUMINANCE;if(r===V3)return t.LUMINANCE_ALPHA;if(r===Vy)return t.DEPTH_COMPONENT;if(r===Wy)return t.DEPTH_STENCIL;if(r===WI)return t.RED;if(r===Jw)return t.RED_INTEGER;if(r===W3)return t.RG;if(r===jI)return t.RG_INTEGER;if(r===qI)return t.RGBA_INTEGER;if(r===Nx||r===Lx||r===Dx||r===Bx)if(o===Rr)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===Nx)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===Lx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===Dx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Bx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===Nx)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Lx)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Dx)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Bx)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===c2||r===u2||r===d2||r===f2)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===c2)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===u2)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===d2)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===f2)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===h2||r===p2||r===m2)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===h2||r===p2)return o===Rr?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===m2)return o===Rr?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===g2||r===y2||r===v2||r===b2||r===x2||r===w2||r===_2||r===S2||r===E2||r===T2||r===I2||r===P2||r===C2||r===M2)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===g2)return o===Rr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===y2)return o===Rr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===v2)return o===Rr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===b2)return o===Rr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===x2)return o===Rr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===w2)return o===Rr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===_2)return o===Rr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===S2)return o===Rr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===E2)return o===Rr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===T2)return o===Rr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===I2)return o===Rr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===P2)return o===Rr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===C2)return o===Rr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===M2)return o===Rr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===Fx||r===A2||r===R2)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===Fx)return o===Rr?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===A2)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===R2)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===j3||r===k2||r===O2||r===N2)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===Fx)return s.COMPRESSED_RED_RGTC1_EXT;if(r===k2)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===O2)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===N2)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Hy?t.UNSIGNED_INT_24_8:t[r]!==void 0?t[r]:null}return{convert:n}}const L0e=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,D0e=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class B0e{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,r){if(this.texture===null){const i=new vi,s=e.properties.get(i);s.__webglTexture=n.texture,(n.depthNear!==r.depthNear||n.depthFar!==r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,r=new wc({vertexShader:L0e,fragmentShader:D0e,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new Xi(new hv(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class F0e extends Tc{constructor(e,n){super();const r=this;let i=null,s=1,o=null,a="local-floor",c=1,l=null,u=null,d=null,h=null,f=null,p=null;const g=new B0e,m=n.getContextAttributes();let y=null,b=null;const x=[],S=[],P=new St;let _=null;const I=new li;I.viewport=new gr;const C=new li;C.viewport=new gr;const A=[I,C],M=new WV;let k=null,O=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ie){let pe=x[ie];return pe===void 0&&(pe=new MT,x[ie]=pe),pe.getTargetRaySpace()},this.getControllerGrip=function(ie){let pe=x[ie];return pe===void 0&&(pe=new MT,x[ie]=pe),pe.getGripSpace()},this.getHand=function(ie){let pe=x[ie];return pe===void 0&&(pe=new MT,x[ie]=pe),pe.getHandSpace()};function B(ie){const pe=S.indexOf(ie.inputSource);if(pe===-1)return;const ue=x[pe];ue!==void 0&&(ue.update(ie.inputSource,ie.frame,l||o),ue.dispatchEvent({type:ie.type,data:ie.inputSource}))}function $(){i.removeEventListener("select",B),i.removeEventListener("selectstart",B),i.removeEventListener("selectend",B),i.removeEventListener("squeeze",B),i.removeEventListener("squeezestart",B),i.removeEventListener("squeezeend",B),i.removeEventListener("end",$),i.removeEventListener("inputsourceschange",U);for(let ie=0;ie<x.length;ie++){const pe=S[ie];pe!==null&&(S[ie]=null,x[ie].disconnect(pe))}k=null,O=null,g.reset(),e.setRenderTarget(y),f=null,h=null,d=null,i=null,b=null,Z.stop(),r.isPresenting=!1,e.setPixelRatio(_),e.setSize(P.width,P.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ie){s=ie,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ie){a=ie,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(ie){l=ie},this.getBaseLayer=function(){return h!==null?h:f},this.getBinding=function(){return d},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(ie){if(i=ie,i!==null){if(y=e.getRenderTarget(),i.addEventListener("select",B),i.addEventListener("selectstart",B),i.addEventListener("selectend",B),i.addEventListener("squeeze",B),i.addEventListener("squeezestart",B),i.addEventListener("squeezeend",B),i.addEventListener("end",$),i.addEventListener("inputsourceschange",U),m.xrCompatible!==!0&&await n.makeXRCompatible(),_=e.getPixelRatio(),e.getSize(P),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let ue=null,le=null,ae=null;m.depth&&(ae=m.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,ue=m.stencil?Wy:Vy,le=m.stencil?Hy:qd);const _e={colorFormat:n.RGBA8,depthFormat:ae,scaleFactor:s};d=new XRWebGLBinding(i,n),h=d.createProjectionLayer(_e),i.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),b=new au(h.textureWidth,h.textureHeight,{format:to,type:xc,depthTexture:new eO(h.textureWidth,h.textureHeight,le,void 0,void 0,void 0,void 0,void 0,void 0,ue),stencilBuffer:m.stencil,colorSpace:e.outputColorSpace,samples:m.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1,resolveStencilBuffer:h.ignoreDepthValues===!1})}else{const ue={antialias:m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(i,n,ue),i.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),b=new au(f.framebufferWidth,f.framebufferHeight,{format:to,type:xc,colorSpace:e.outputColorSpace,stencilBuffer:m.stencil,resolveDepthBuffer:f.ignoreDepthValues===!1,resolveStencilBuffer:f.ignoreDepthValues===!1})}b.isXRRenderTarget=!0,this.setFoveation(c),l=null,o=await i.requestReferenceSpace(a),Z.setContext(i),Z.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return g.getDepthTexture()};function U(ie){for(let pe=0;pe<ie.removed.length;pe++){const ue=ie.removed[pe],le=S.indexOf(ue);le>=0&&(S[le]=null,x[le].disconnect(ue))}for(let pe=0;pe<ie.added.length;pe++){const ue=ie.added[pe];let le=S.indexOf(ue);if(le===-1){for(let _e=0;_e<x.length;_e++)if(_e>=S.length){S.push(ue),le=_e;break}else if(S[_e]===null){S[_e]=ue,le=_e;break}if(le===-1)break}const ae=x[le];ae&&ae.connect(ue)}}const q=new Ce,K=new Ce;function V(ie,pe,ue){q.setFromMatrixPosition(pe.matrixWorld),K.setFromMatrixPosition(ue.matrixWorld);const le=q.distanceTo(K),ae=pe.projectionMatrix.elements,_e=ue.projectionMatrix.elements,ye=ae[14]/(ae[10]-1),Ae=ae[14]/(ae[10]+1),Oe=(ae[9]+1)/ae[5],Be=(ae[9]-1)/ae[5],ce=(ae[8]-1)/ae[0],Ge=(_e[8]+1)/_e[0],Pe=ye*ce,He=ye*Ge,Re=le/(-ce+Ge),je=Re*-ce;if(pe.matrixWorld.decompose(ie.position,ie.quaternion,ie.scale),ie.translateX(je),ie.translateZ(Re),ie.matrixWorld.compose(ie.position,ie.quaternion,ie.scale),ie.matrixWorldInverse.copy(ie.matrixWorld).invert(),ae[10]===-1)ie.projectionMatrix.copy(pe.projectionMatrix),ie.projectionMatrixInverse.copy(pe.projectionMatrixInverse);else{const te=ye+Re,ee=Ae+Re,X=Pe-je,we=He+(le-je),Ne=Oe*Ae/ee*te,We=Be*Ae/ee*te;ie.projectionMatrix.makePerspective(X,we,Ne,We,te,ee),ie.projectionMatrixInverse.copy(ie.projectionMatrix).invert()}}function G(ie,pe){pe===null?ie.matrixWorld.copy(ie.matrix):ie.matrixWorld.multiplyMatrices(pe.matrixWorld,ie.matrix),ie.matrixWorldInverse.copy(ie.matrixWorld).invert()}this.updateCamera=function(ie){if(i===null)return;let pe=ie.near,ue=ie.far;g.texture!==null&&(g.depthNear>0&&(pe=g.depthNear),g.depthFar>0&&(ue=g.depthFar)),M.near=C.near=I.near=pe,M.far=C.far=I.far=ue,(k!==M.near||O!==M.far)&&(i.updateRenderState({depthNear:M.near,depthFar:M.far}),k=M.near,O=M.far),I.layers.mask=ie.layers.mask|2,C.layers.mask=ie.layers.mask|4,M.layers.mask=I.layers.mask|C.layers.mask;const le=ie.parent,ae=M.cameras;G(M,le);for(let _e=0;_e<ae.length;_e++)G(ae[_e],le);ae.length===2?V(M,I,C):M.projectionMatrix.copy(I.projectionMatrix),j(ie,M,le)};function j(ie,pe,ue){ue===null?ie.matrix.copy(pe.matrixWorld):(ie.matrix.copy(ue.matrixWorld),ie.matrix.invert(),ie.matrix.multiply(pe.matrixWorld)),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale),ie.updateMatrixWorld(!0),ie.projectionMatrix.copy(pe.projectionMatrix),ie.projectionMatrixInverse.copy(pe.projectionMatrixInverse),ie.isPerspectiveCamera&&(ie.fov=jy*2*Math.atan(1/ie.projectionMatrix.elements[5]),ie.zoom=1)}this.getCamera=function(){return M},this.getFoveation=function(){if(!(h===null&&f===null))return c},this.setFoveation=function(ie){c=ie,h!==null&&(h.fixedFoveation=ie),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=ie)},this.hasDepthSensing=function(){return g.texture!==null},this.getDepthSensingMesh=function(){return g.getMesh(M)};let Q=null;function se(ie,pe){if(u=pe.getViewerPose(l||o),p=pe,u!==null){const ue=u.views;f!==null&&(e.setRenderTargetFramebuffer(b,f.framebuffer),e.setRenderTarget(b));let le=!1;ue.length!==M.cameras.length&&(M.cameras.length=0,le=!0);for(let ye=0;ye<ue.length;ye++){const Ae=ue[ye];let Oe=null;if(f!==null)Oe=f.getViewport(Ae);else{const ce=d.getViewSubImage(h,Ae);Oe=ce.viewport,ye===0&&(e.setRenderTargetTextures(b,ce.colorTexture,ce.depthStencilTexture),e.setRenderTarget(b))}let Be=A[ye];Be===void 0&&(Be=new li,Be.layers.enable(ye),Be.viewport=new gr,A[ye]=Be),Be.matrix.fromArray(Ae.transform.matrix),Be.matrix.decompose(Be.position,Be.quaternion,Be.scale),Be.projectionMatrix.fromArray(Ae.projectionMatrix),Be.projectionMatrixInverse.copy(Be.projectionMatrix).invert(),Be.viewport.set(Oe.x,Oe.y,Oe.width,Oe.height),ye===0&&(M.matrix.copy(Be.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),le===!0&&M.cameras.push(Be)}const ae=i.enabledFeatures;if(ae&&ae.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&d){const ye=d.getDepthInformation(ue[0]);ye&&ye.isValid&&ye.texture&&g.init(e,ye,i.renderState)}}for(let ue=0;ue<x.length;ue++){const le=S[ue],ae=x[ue];le!==null&&ae!==void 0&&ae.update(le,pe,l||o)}Q&&Q(ie,pe),pe.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:pe}),p=null}const Z=new YV;Z.setAnimationLoop(se),this.setAnimationLoop=function(ie){Q=ie},this.dispose=function(){}}}const gp=new La,U0e=new vn;function $0e(t,e){function n(m,y){m.matrixAutoUpdate===!0&&m.updateMatrix(),y.value.copy(m.matrix)}function r(m,y){y.color.getRGB(m.fogColor.value,KH(t)),y.isFog?(m.fogNear.value=y.near,m.fogFar.value=y.far):y.isFogExp2&&(m.fogDensity.value=y.density)}function i(m,y,b,x,S){y.isMeshBasicMaterial||y.isMeshLambertMaterial?s(m,y):y.isMeshToonMaterial?(s(m,y),d(m,y)):y.isMeshPhongMaterial?(s(m,y),u(m,y)):y.isMeshStandardMaterial?(s(m,y),h(m,y),y.isMeshPhysicalMaterial&&f(m,y,S)):y.isMeshMatcapMaterial?(s(m,y),p(m,y)):y.isMeshDepthMaterial?s(m,y):y.isMeshDistanceMaterial?(s(m,y),g(m,y)):y.isMeshNormalMaterial?s(m,y):y.isLineBasicMaterial?(o(m,y),y.isLineDashedMaterial&&a(m,y)):y.isPointsMaterial?c(m,y,b,x):y.isSpriteMaterial?l(m,y):y.isShadowMaterial?(m.color.value.copy(y.color),m.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function s(m,y){m.opacity.value=y.opacity,y.color&&m.diffuse.value.copy(y.color),y.emissive&&m.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(m.map.value=y.map,n(y.map,m.mapTransform)),y.alphaMap&&(m.alphaMap.value=y.alphaMap,n(y.alphaMap,m.alphaMapTransform)),y.bumpMap&&(m.bumpMap.value=y.bumpMap,n(y.bumpMap,m.bumpMapTransform),m.bumpScale.value=y.bumpScale,y.side===Eo&&(m.bumpScale.value*=-1)),y.normalMap&&(m.normalMap.value=y.normalMap,n(y.normalMap,m.normalMapTransform),m.normalScale.value.copy(y.normalScale),y.side===Eo&&m.normalScale.value.negate()),y.displacementMap&&(m.displacementMap.value=y.displacementMap,n(y.displacementMap,m.displacementMapTransform),m.displacementScale.value=y.displacementScale,m.displacementBias.value=y.displacementBias),y.emissiveMap&&(m.emissiveMap.value=y.emissiveMap,n(y.emissiveMap,m.emissiveMapTransform)),y.specularMap&&(m.specularMap.value=y.specularMap,n(y.specularMap,m.specularMapTransform)),y.alphaTest>0&&(m.alphaTest.value=y.alphaTest);const b=e.get(y),x=b.envMap,S=b.envMapRotation;x&&(m.envMap.value=x,gp.copy(S),gp.x*=-1,gp.y*=-1,gp.z*=-1,x.isCubeTexture&&x.isRenderTargetTexture===!1&&(gp.y*=-1,gp.z*=-1),m.envMapRotation.value.setFromMatrix4(U0e.makeRotationFromEuler(gp)),m.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=y.reflectivity,m.ior.value=y.ior,m.refractionRatio.value=y.refractionRatio),y.lightMap&&(m.lightMap.value=y.lightMap,m.lightMapIntensity.value=y.lightMapIntensity,n(y.lightMap,m.lightMapTransform)),y.aoMap&&(m.aoMap.value=y.aoMap,m.aoMapIntensity.value=y.aoMapIntensity,n(y.aoMap,m.aoMapTransform))}function o(m,y){m.diffuse.value.copy(y.color),m.opacity.value=y.opacity,y.map&&(m.map.value=y.map,n(y.map,m.mapTransform))}function a(m,y){m.dashSize.value=y.dashSize,m.totalSize.value=y.dashSize+y.gapSize,m.scale.value=y.scale}function c(m,y,b,x){m.diffuse.value.copy(y.color),m.opacity.value=y.opacity,m.size.value=y.size*b,m.scale.value=x*.5,y.map&&(m.map.value=y.map,n(y.map,m.uvTransform)),y.alphaMap&&(m.alphaMap.value=y.alphaMap,n(y.alphaMap,m.alphaMapTransform)),y.alphaTest>0&&(m.alphaTest.value=y.alphaTest)}function l(m,y){m.diffuse.value.copy(y.color),m.opacity.value=y.opacity,m.rotation.value=y.rotation,y.map&&(m.map.value=y.map,n(y.map,m.mapTransform)),y.alphaMap&&(m.alphaMap.value=y.alphaMap,n(y.alphaMap,m.alphaMapTransform)),y.alphaTest>0&&(m.alphaTest.value=y.alphaTest)}function u(m,y){m.specular.value.copy(y.specular),m.shininess.value=Math.max(y.shininess,1e-4)}function d(m,y){y.gradientMap&&(m.gradientMap.value=y.gradientMap)}function h(m,y){m.metalness.value=y.metalness,y.metalnessMap&&(m.metalnessMap.value=y.metalnessMap,n(y.metalnessMap,m.metalnessMapTransform)),m.roughness.value=y.roughness,y.roughnessMap&&(m.roughnessMap.value=y.roughnessMap,n(y.roughnessMap,m.roughnessMapTransform)),y.envMap&&(m.envMapIntensity.value=y.envMapIntensity)}function f(m,y,b){m.ior.value=y.ior,y.sheen>0&&(m.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),m.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(m.sheenColorMap.value=y.sheenColorMap,n(y.sheenColorMap,m.sheenColorMapTransform)),y.sheenRoughnessMap&&(m.sheenRoughnessMap.value=y.sheenRoughnessMap,n(y.sheenRoughnessMap,m.sheenRoughnessMapTransform))),y.clearcoat>0&&(m.clearcoat.value=y.clearcoat,m.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(m.clearcoatMap.value=y.clearcoatMap,n(y.clearcoatMap,m.clearcoatMapTransform)),y.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap,n(y.clearcoatRoughnessMap,m.clearcoatRoughnessMapTransform)),y.clearcoatNormalMap&&(m.clearcoatNormalMap.value=y.clearcoatNormalMap,n(y.clearcoatNormalMap,m.clearcoatNormalMapTransform),m.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),y.side===Eo&&m.clearcoatNormalScale.value.negate())),y.dispersion>0&&(m.dispersion.value=y.dispersion),y.iridescence>0&&(m.iridescence.value=y.iridescence,m.iridescenceIOR.value=y.iridescenceIOR,m.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(m.iridescenceMap.value=y.iridescenceMap,n(y.iridescenceMap,m.iridescenceMapTransform)),y.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=y.iridescenceThicknessMap,n(y.iridescenceThicknessMap,m.iridescenceThicknessMapTransform))),y.transmission>0&&(m.transmission.value=y.transmission,m.transmissionSamplerMap.value=b.texture,m.transmissionSamplerSize.value.set(b.width,b.height),y.transmissionMap&&(m.transmissionMap.value=y.transmissionMap,n(y.transmissionMap,m.transmissionMapTransform)),m.thickness.value=y.thickness,y.thicknessMap&&(m.thicknessMap.value=y.thicknessMap,n(y.thicknessMap,m.thicknessMapTransform)),m.attenuationDistance.value=y.attenuationDistance,m.attenuationColor.value.copy(y.attenuationColor)),y.anisotropy>0&&(m.anisotropyVector.value.set(y.anisotropy*Math.cos(y.anisotropyRotation),y.anisotropy*Math.sin(y.anisotropyRotation)),y.anisotropyMap&&(m.anisotropyMap.value=y.anisotropyMap,n(y.anisotropyMap,m.anisotropyMapTransform))),m.specularIntensity.value=y.specularIntensity,m.specularColor.value.copy(y.specularColor),y.specularColorMap&&(m.specularColorMap.value=y.specularColorMap,n(y.specularColorMap,m.specularColorMapTransform)),y.specularIntensityMap&&(m.specularIntensityMap.value=y.specularIntensityMap,n(y.specularIntensityMap,m.specularIntensityMapTransform))}function p(m,y){y.matcap&&(m.matcap.value=y.matcap)}function g(m,y){const b=e.get(y).light;m.referencePosition.value.setFromMatrixPosition(b.matrixWorld),m.nearDistance.value=b.shadow.camera.near,m.farDistance.value=b.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function z0e(t,e,n,r){let i={},s={},o=[];const a=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function c(b,x){const S=x.program;r.uniformBlockBinding(b,S)}function l(b,x){let S=i[b.id];S===void 0&&(p(b),S=u(b),i[b.id]=S,b.addEventListener("dispose",m));const P=x.program;r.updateUBOMapping(b,P);const _=e.render.frame;s[b.id]!==_&&(h(b),s[b.id]=_)}function u(b){const x=d();b.__bindingPointIndex=x;const S=t.createBuffer(),P=b.__size,_=b.usage;return t.bindBuffer(t.UNIFORM_BUFFER,S),t.bufferData(t.UNIFORM_BUFFER,P,_),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,x,S),S}function d(){for(let b=0;b<a;b++)if(o.indexOf(b)===-1)return o.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(b){const x=i[b.id],S=b.uniforms,P=b.__cache;t.bindBuffer(t.UNIFORM_BUFFER,x);for(let _=0,I=S.length;_<I;_++){const C=Array.isArray(S[_])?S[_]:[S[_]];for(let A=0,M=C.length;A<M;A++){const k=C[A];if(f(k,_,A,P)===!0){const O=k.__offset,B=Array.isArray(k.value)?k.value:[k.value];let $=0;for(let U=0;U<B.length;U++){const q=B[U],K=g(q);typeof q=="number"||typeof q=="boolean"?(k.__data[0]=q,t.bufferSubData(t.UNIFORM_BUFFER,O+$,k.__data)):q.isMatrix3?(k.__data[0]=q.elements[0],k.__data[1]=q.elements[1],k.__data[2]=q.elements[2],k.__data[3]=0,k.__data[4]=q.elements[3],k.__data[5]=q.elements[4],k.__data[6]=q.elements[5],k.__data[7]=0,k.__data[8]=q.elements[6],k.__data[9]=q.elements[7],k.__data[10]=q.elements[8],k.__data[11]=0):(q.toArray(k.__data,$),$+=K.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,O,k.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function f(b,x,S,P){const _=b.value,I=x+"_"+S;if(P[I]===void 0)return typeof _=="number"||typeof _=="boolean"?P[I]=_:P[I]=_.clone(),!0;{const C=P[I];if(typeof _=="number"||typeof _=="boolean"){if(C!==_)return P[I]=_,!0}else if(C.equals(_)===!1)return C.copy(_),!0}return!1}function p(b){const x=b.uniforms;let S=0;const P=16;for(let I=0,C=x.length;I<C;I++){const A=Array.isArray(x[I])?x[I]:[x[I]];for(let M=0,k=A.length;M<k;M++){const O=A[M],B=Array.isArray(O.value)?O.value:[O.value];for(let $=0,U=B.length;$<U;$++){const q=B[$],K=g(q),V=S%P,G=V%K.boundary,j=V+G;S+=G,j!==0&&P-j<K.storage&&(S+=P-j),O.__data=new Float32Array(K.storage/Float32Array.BYTES_PER_ELEMENT),O.__offset=S,S+=K.storage}}}const _=S%P;return _>0&&(S+=P-_),b.__size=S,b.__cache={},this}function g(b){const x={boundary:0,storage:0};return typeof b=="number"||typeof b=="boolean"?(x.boundary=4,x.storage=4):b.isVector2?(x.boundary=8,x.storage=8):b.isVector3||b.isColor?(x.boundary=16,x.storage=12):b.isVector4?(x.boundary=16,x.storage=16):b.isMatrix3?(x.boundary=48,x.storage=48):b.isMatrix4?(x.boundary=64,x.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),x}function m(b){const x=b.target;x.removeEventListener("dispose",m);const S=o.indexOf(x.__bindingPointIndex);o.splice(S,1),t.deleteBuffer(i[x.id]),delete i[x.id],delete s[x.id]}function y(){for(const b in i)t.deleteBuffer(i[b]);o=[],i={},s={}}return{bind:c,update:l,dispose:y}}class nW{constructor(e={}){const{canvas:n=WH(),context:r=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:l=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reverseDepthBuffer:h=!1}=e;this.isWebGLRenderer=!0;let f;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");f=r.getContextAttributes().alpha}else f=o;const p=new Uint32Array(4),g=new Int32Array(4);let m=null,y=null;const b=[],x=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=eu,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const S=this;let P=!1;this._outputColorSpace=Ko;let _=0,I=0,C=null,A=-1,M=null;const k=new gr,O=new gr;let B=null;const $=new Wt(0);let U=0,q=n.width,K=n.height,V=1,G=null,j=null;const Q=new gr(0,0,q,K),se=new gr(0,0,q,K);let Z=!1;const ie=new n_;let pe=!1,ue=!1;const le=new vn,ae=new vn,_e=new Ce,ye=new gr,Ae={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Oe=!1;function Be(){return C===null?V:1}let ce=r;function Ge(ve,tt){return n.getContext(ve,tt)}try{const ve={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${FI}`),n.addEventListener("webglcontextlost",Qe,!1),n.addEventListener("webglcontextrestored",ut,!1),n.addEventListener("webglcontextcreationerror",gt,!1),ce===null){const tt="webgl2";if(ce=Ge(tt,ve),ce===null)throw Ge(tt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ve){throw console.error("THREE.WebGLRenderer: "+ve.message),ve}let Pe,He,Re,je,te,ee,X,we,Ne,We,xe,Ve,be,ge,Se,Ie,me,Ee,oe,ne,de,Te,ke,he;function Xe(){Pe=new Qpe(ce),Pe.init(),Te=new tW(ce,Pe),He=new qpe(ce,Pe,e,Te),Re=new O0e(ce,Pe),He.reverseDepthBuffer&&h&&Re.buffers.depth.setReversed(!0),je=new nme(ce),te=new x0e,ee=new N0e(ce,Pe,Re,te,He,Te,je),X=new Gpe(S),we=new Jpe(S),Ne=new lfe(ce),ke=new Wpe(ce,Ne),We=new eme(ce,Ne,je,ke),xe=new ime(ce,We,Ne,je),oe=new rme(ce,He,ee),Ie=new Kpe(te),Ve=new b0e(S,X,we,Pe,He,ke,Ie),be=new $0e(S,te),ge=new _0e,Se=new C0e(Pe),Ee=new Vpe(S,X,we,Re,xe,f,c),me=new R0e(S,xe,He),he=new z0e(ce,je,He,Re),ne=new jpe(ce,Pe,je),de=new tme(ce,Pe,je),je.programs=Ve.programs,S.capabilities=He,S.extensions=Pe,S.properties=te,S.renderLists=ge,S.shadowMap=me,S.state=Re,S.info=je}Xe();const $e=new F0e(S,ce);this.xr=$e,this.getContext=function(){return ce},this.getContextAttributes=function(){return ce.getContextAttributes()},this.forceContextLoss=function(){const ve=Pe.get("WEBGL_lose_context");ve&&ve.loseContext()},this.forceContextRestore=function(){const ve=Pe.get("WEBGL_lose_context");ve&&ve.restoreContext()},this.getPixelRatio=function(){return V},this.setPixelRatio=function(ve){ve!==void 0&&(V=ve,this.setSize(q,K,!1))},this.getSize=function(ve){return ve.set(q,K)},this.setSize=function(ve,tt,ft=!0){if($e.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}q=ve,K=tt,n.width=Math.floor(ve*V),n.height=Math.floor(tt*V),ft===!0&&(n.style.width=ve+"px",n.style.height=tt+"px"),this.setViewport(0,0,ve,tt)},this.getDrawingBufferSize=function(ve){return ve.set(q*V,K*V).floor()},this.setDrawingBufferSize=function(ve,tt,ft){q=ve,K=tt,V=ft,n.width=Math.floor(ve*ft),n.height=Math.floor(tt*ft),this.setViewport(0,0,ve,tt)},this.getCurrentViewport=function(ve){return ve.copy(k)},this.getViewport=function(ve){return ve.copy(Q)},this.setViewport=function(ve,tt,ft,st){ve.isVector4?Q.set(ve.x,ve.y,ve.z,ve.w):Q.set(ve,tt,ft,st),Re.viewport(k.copy(Q).multiplyScalar(V).round())},this.getScissor=function(ve){return ve.copy(se)},this.setScissor=function(ve,tt,ft,st){ve.isVector4?se.set(ve.x,ve.y,ve.z,ve.w):se.set(ve,tt,ft,st),Re.scissor(O.copy(se).multiplyScalar(V).round())},this.getScissorTest=function(){return Z},this.setScissorTest=function(ve){Re.setScissorTest(Z=ve)},this.setOpaqueSort=function(ve){G=ve},this.setTransparentSort=function(ve){j=ve},this.getClearColor=function(ve){return ve.copy(Ee.getClearColor())},this.setClearColor=function(){Ee.setClearColor(...arguments)},this.getClearAlpha=function(){return Ee.getClearAlpha()},this.setClearAlpha=function(){Ee.setClearAlpha(...arguments)},this.clear=function(ve=!0,tt=!0,ft=!0){let st=0;if(ve){let it=!1;if(C!==null){const Ct=C.texture.format;it=Ct===qI||Ct===jI||Ct===Jw}if(it){const Ct=C.texture.type,Dt=Ct===xc||Ct===qd||Ct===zy||Ct===Hy||Ct===HI||Ct===VI,zt=Ee.getClearColor(),Gt=Ee.getClearAlpha(),un=zt.r,an=zt.g,Ot=zt.b;Dt?(p[0]=un,p[1]=an,p[2]=Ot,p[3]=Gt,ce.clearBufferuiv(ce.COLOR,0,p)):(g[0]=un,g[1]=an,g[2]=Ot,g[3]=Gt,ce.clearBufferiv(ce.COLOR,0,g))}else st|=ce.COLOR_BUFFER_BIT}tt&&(st|=ce.DEPTH_BUFFER_BIT),ft&&(st|=ce.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ce.clear(st)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Qe,!1),n.removeEventListener("webglcontextrestored",ut,!1),n.removeEventListener("webglcontextcreationerror",gt,!1),Ee.dispose(),ge.dispose(),Se.dispose(),te.dispose(),X.dispose(),we.dispose(),xe.dispose(),ke.dispose(),he.dispose(),Ve.dispose(),$e.dispose(),$e.removeEventListener("sessionstart",bn),$e.removeEventListener("sessionend",Wn),Un.stop()};function Qe(ve){ve.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),P=!0}function ut(){console.log("THREE.WebGLRenderer: Context Restored."),P=!1;const ve=je.autoReset,tt=me.enabled,ft=me.autoUpdate,st=me.needsUpdate,it=me.type;Xe(),je.autoReset=ve,me.enabled=tt,me.autoUpdate=ft,me.needsUpdate=st,me.type=it}function gt(ve){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ve.statusMessage)}function Tt(ve){const tt=ve.target;tt.removeEventListener("dispose",Tt),Kt(tt)}function Kt(ve){Zt(ve),te.remove(ve)}function Zt(ve){const tt=te.get(ve).programs;tt!==void 0&&(tt.forEach(function(ft){Ve.releaseProgram(ft)}),ve.isShaderMaterial&&Ve.releaseShaderCache(ve))}this.renderBufferDirect=function(ve,tt,ft,st,it,Ct){tt===null&&(tt=Ae);const Dt=it.isMesh&&it.matrixWorld.determinant()<0,zt=Je(ve,tt,ft,st,it);Re.setMaterial(st,Dt);let Gt=ft.index,un=1;if(st.wireframe===!0){if(Gt=We.getWireframeAttribute(ft),Gt===void 0)return;un=2}const an=ft.drawRange,Ot=ft.attributes.position;let rn=an.start*un,yn=(an.start+an.count)*un;Ct!==null&&(rn=Math.max(rn,Ct.start*un),yn=Math.min(yn,(Ct.start+Ct.count)*un)),Gt!==null?(rn=Math.max(rn,0),yn=Math.min(yn,Gt.count)):Ot!=null&&(rn=Math.max(rn,0),yn=Math.min(yn,Ot.count));const jn=yn-rn;if(jn<0||jn===1/0)return;ke.setup(it,st,zt,ft,Gt);let qn,Nn=ne;if(Gt!==null&&(qn=Ne.get(Gt),Nn=de,Nn.setIndex(qn)),it.isMesh)st.wireframe===!0?(Re.setLineWidth(st.wireframeLinewidth*Be()),Nn.setMode(ce.LINES)):Nn.setMode(ce.TRIANGLES);else if(it.isLine){let en=st.linewidth;en===void 0&&(en=1),Re.setLineWidth(en*Be()),it.isLineSegments?Nn.setMode(ce.LINES):it.isLineLoop?Nn.setMode(ce.LINE_LOOP):Nn.setMode(ce.LINE_STRIP)}else it.isPoints?Nn.setMode(ce.POINTS):it.isSprite&&Nn.setMode(ce.TRIANGLES);if(it.isBatchedMesh)if(it._multiDrawInstances!==null)CT("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Nn.renderMultiDrawInstances(it._multiDrawStarts,it._multiDrawCounts,it._multiDrawCount,it._multiDrawInstances);else if(Pe.get("WEBGL_multi_draw"))Nn.renderMultiDraw(it._multiDrawStarts,it._multiDrawCounts,it._multiDrawCount);else{const en=it._multiDrawStarts,Zn=it._multiDrawCounts,$n=it._multiDrawCount,Ji=Gt?Ne.get(Gt).bytesPerElement:1,Cl=te.get(st).currentProgram.getUniforms();for(let Fi=0;Fi<$n;Fi++)Cl.setValue(ce,"_gl_DrawID",Fi),Nn.render(en[Fi]/Ji,Zn[Fi])}else if(it.isInstancedMesh)Nn.renderInstances(rn,jn,it.count);else if(ft.isInstancedBufferGeometry){const en=ft._maxInstanceCount!==void 0?ft._maxInstanceCount:1/0,Zn=Math.min(ft.instanceCount,en);Nn.renderInstances(rn,jn,Zn)}else Nn.render(rn,jn)};function Bt(ve,tt,ft){ve.transparent===!0&&ve.side===mc&&ve.forceSinglePass===!1?(ve.side=Eo,ve.needsUpdate=!0,jr(ve,tt,ft),ve.side=Wd,ve.needsUpdate=!0,jr(ve,tt,ft),ve.side=mc):jr(ve,tt,ft)}this.compile=function(ve,tt,ft=null){ft===null&&(ft=ve),y=Se.get(ft),y.init(tt),x.push(y),ft.traverseVisible(function(it){it.isLight&&it.layers.test(tt.layers)&&(y.pushLight(it),it.castShadow&&y.pushShadow(it))}),ve!==ft&&ve.traverseVisible(function(it){it.isLight&&it.layers.test(tt.layers)&&(y.pushLight(it),it.castShadow&&y.pushShadow(it))}),y.setupLights();const st=new Set;return ve.traverse(function(it){if(!(it.isMesh||it.isPoints||it.isLine||it.isSprite))return;const Ct=it.material;if(Ct)if(Array.isArray(Ct))for(let Dt=0;Dt<Ct.length;Dt++){const zt=Ct[Dt];Bt(zt,ft,it),st.add(zt)}else Bt(Ct,ft,it),st.add(Ct)}),y=x.pop(),st},this.compileAsync=function(ve,tt,ft=null){const st=this.compile(ve,tt,ft);return new Promise(it=>{function Ct(){if(st.forEach(function(Dt){te.get(Dt).currentProgram.isReady()&&st.delete(Dt)}),st.size===0){it(ve);return}setTimeout(Ct,10)}Pe.get("KHR_parallel_shader_compile")!==null?Ct():setTimeout(Ct,10)})};let _n=null;function hn(ve){_n&&_n(ve)}function bn(){Un.stop()}function Wn(){Un.start()}const Un=new YV;Un.setAnimationLoop(hn),typeof self<"u"&&Un.setContext(self),this.setAnimationLoop=function(ve){_n=ve,$e.setAnimationLoop(ve),ve===null?Un.stop():Un.start()},$e.addEventListener("sessionstart",bn),$e.addEventListener("sessionend",Wn),this.render=function(ve,tt){if(tt!==void 0&&tt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(P===!0)return;if(ve.matrixWorldAutoUpdate===!0&&ve.updateMatrixWorld(),tt.parent===null&&tt.matrixWorldAutoUpdate===!0&&tt.updateMatrixWorld(),$e.enabled===!0&&$e.isPresenting===!0&&($e.cameraAutoUpdate===!0&&$e.updateCamera(tt),tt=$e.getCamera()),ve.isScene===!0&&ve.onBeforeRender(S,ve,tt,C),y=Se.get(ve,x.length),y.init(tt),x.push(y),ae.multiplyMatrices(tt.projectionMatrix,tt.matrixWorldInverse),ie.setFromProjectionMatrix(ae),ue=this.localClippingEnabled,pe=Ie.init(this.clippingPlanes,ue),m=ge.get(ve,b.length),m.init(),b.push(m),$e.enabled===!0&&$e.isPresenting===!0){const Ct=S.xr.getDepthSensingMesh();Ct!==null&&Jn(Ct,tt,-1/0,S.sortObjects)}Jn(ve,tt,0,S.sortObjects),m.finish(),S.sortObjects===!0&&m.sort(G,j),Oe=$e.enabled===!1||$e.isPresenting===!1||$e.hasDepthSensing()===!1,Oe&&Ee.addToRenderList(m,ve),this.info.render.frame++,pe===!0&&Ie.beginShadows();const ft=y.state.shadowsArray;me.render(ft,ve,tt),pe===!0&&Ie.endShadows(),this.info.autoReset===!0&&this.info.reset();const st=m.opaque,it=m.transmissive;if(y.setupLights(),tt.isArrayCamera){const Ct=tt.cameras;if(it.length>0)for(let Dt=0,zt=Ct.length;Dt<zt;Dt++){const Gt=Ct[Dt];fr(st,it,ve,Gt)}Oe&&Ee.render(ve);for(let Dt=0,zt=Ct.length;Dt<zt;Dt++){const Gt=Ct[Dt];ci(m,ve,Gt,Gt.viewport)}}else it.length>0&&fr(st,it,ve,tt),Oe&&Ee.render(ve),ci(m,ve,tt);C!==null&&I===0&&(ee.updateMultisampleRenderTarget(C),ee.updateRenderTargetMipmap(C)),ve.isScene===!0&&ve.onAfterRender(S,ve,tt),ke.resetDefaultState(),A=-1,M=null,x.pop(),x.length>0?(y=x[x.length-1],pe===!0&&Ie.setGlobalState(S.clippingPlanes,y.state.camera)):y=null,b.pop(),b.length>0?m=b[b.length-1]:m=null};function Jn(ve,tt,ft,st){if(ve.visible===!1)return;if(ve.layers.test(tt.layers)){if(ve.isGroup)ft=ve.renderOrder;else if(ve.isLOD)ve.autoUpdate===!0&&ve.update(tt);else if(ve.isLight)y.pushLight(ve),ve.castShadow&&y.pushShadow(ve);else if(ve.isSprite){if(!ve.frustumCulled||ie.intersectsSprite(ve)){st&&ye.setFromMatrixPosition(ve.matrixWorld).applyMatrix4(ae);const Dt=xe.update(ve),zt=ve.material;zt.visible&&m.push(ve,Dt,zt,ft,ye.z,null)}}else if((ve.isMesh||ve.isLine||ve.isPoints)&&(!ve.frustumCulled||ie.intersectsObject(ve))){const Dt=xe.update(ve),zt=ve.material;if(st&&(ve.boundingSphere!==void 0?(ve.boundingSphere===null&&ve.computeBoundingSphere(),ye.copy(ve.boundingSphere.center)):(Dt.boundingSphere===null&&Dt.computeBoundingSphere(),ye.copy(Dt.boundingSphere.center)),ye.applyMatrix4(ve.matrixWorld).applyMatrix4(ae)),Array.isArray(zt)){const Gt=Dt.groups;for(let un=0,an=Gt.length;un<an;un++){const Ot=Gt[un],rn=zt[Ot.materialIndex];rn&&rn.visible&&m.push(ve,Dt,rn,ft,ye.z,Ot)}}else zt.visible&&m.push(ve,Dt,zt,ft,ye.z,null)}}const Ct=ve.children;for(let Dt=0,zt=Ct.length;Dt<zt;Dt++)Jn(Ct[Dt],tt,ft,st)}function ci(ve,tt,ft,st){const it=ve.opaque,Ct=ve.transmissive,Dt=ve.transparent;y.setupLightsView(ft),pe===!0&&Ie.setGlobalState(S.clippingPlanes,ft),st&&Re.viewport(k.copy(st)),it.length>0&&Ur(it,tt,ft),Ct.length>0&&Ur(Ct,tt,ft),Dt.length>0&&Ur(Dt,tt,ft),Re.buffers.depth.setTest(!0),Re.buffers.depth.setMask(!0),Re.buffers.color.setMask(!0),Re.setPolygonOffset(!1)}function fr(ve,tt,ft,st){if((ft.isScene===!0?ft.overrideMaterial:null)!==null)return;y.state.transmissionRenderTarget[st.id]===void 0&&(y.state.transmissionRenderTarget[st.id]=new au(1,1,{generateMipmaps:!0,type:Pe.has("EXT_color_buffer_half_float")||Pe.has("EXT_color_buffer_float")?uv:xc,minFilter:Yc,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:lr.workingColorSpace}));const Ct=y.state.transmissionRenderTarget[st.id],Dt=st.viewport||k;Ct.setSize(Dt.z*S.transmissionResolutionScale,Dt.w*S.transmissionResolutionScale);const zt=S.getRenderTarget();S.setRenderTarget(Ct),S.getClearColor($),U=S.getClearAlpha(),U<1&&S.setClearColor(16777215,.5),S.clear(),Oe&&Ee.render(ft);const Gt=S.toneMapping;S.toneMapping=eu;const un=st.viewport;if(st.viewport!==void 0&&(st.viewport=void 0),y.setupLightsView(st),pe===!0&&Ie.setGlobalState(S.clippingPlanes,st),Ur(ve,ft,st),ee.updateMultisampleRenderTarget(Ct),ee.updateRenderTargetMipmap(Ct),Pe.has("WEBGL_multisampled_render_to_texture")===!1){let an=!1;for(let Ot=0,rn=tt.length;Ot<rn;Ot++){const yn=tt[Ot],jn=yn.object,qn=yn.geometry,Nn=yn.material,en=yn.group;if(Nn.side===mc&&jn.layers.test(st.layers)){const Zn=Nn.side;Nn.side=Eo,Nn.needsUpdate=!0,Zr(jn,ft,st,qn,Nn,en),Nn.side=Zn,Nn.needsUpdate=!0,an=!0}}an===!0&&(ee.updateMultisampleRenderTarget(Ct),ee.updateRenderTargetMipmap(Ct))}S.setRenderTarget(zt),S.setClearColor($,U),un!==void 0&&(st.viewport=un),S.toneMapping=Gt}function Ur(ve,tt,ft){const st=tt.isScene===!0?tt.overrideMaterial:null;for(let it=0,Ct=ve.length;it<Ct;it++){const Dt=ve[it],zt=Dt.object,Gt=Dt.geometry,un=Dt.group;let an=Dt.material;an.allowOverride===!0&&st!==null&&(an=st),zt.layers.test(ft.layers)&&Zr(zt,tt,ft,Gt,an,un)}}function Zr(ve,tt,ft,st,it,Ct){ve.onBeforeRender(S,tt,ft,st,it,Ct),ve.modelViewMatrix.multiplyMatrices(ft.matrixWorldInverse,ve.matrixWorld),ve.normalMatrix.getNormalMatrix(ve.modelViewMatrix),it.onBeforeRender(S,tt,ft,st,ve,Ct),it.transparent===!0&&it.side===mc&&it.forceSinglePass===!1?(it.side=Eo,it.needsUpdate=!0,S.renderBufferDirect(ft,tt,st,it,ve,Ct),it.side=Wd,it.needsUpdate=!0,S.renderBufferDirect(ft,tt,st,it,ve,Ct),it.side=mc):S.renderBufferDirect(ft,tt,st,it,ve,Ct),ve.onAfterRender(S,tt,ft,st,it,Ct)}function jr(ve,tt,ft){tt.isScene!==!0&&(tt=Ae);const st=te.get(ve),it=y.state.lights,Ct=y.state.shadowsArray,Dt=it.state.version,zt=Ve.getParameters(ve,it.state,Ct,tt,ft),Gt=Ve.getProgramCacheKey(zt);let un=st.programs;st.environment=ve.isMeshStandardMaterial?tt.environment:null,st.fog=tt.fog,st.envMap=(ve.isMeshStandardMaterial?we:X).get(ve.envMap||st.environment),st.envMapRotation=st.environment!==null&&ve.envMap===null?tt.environmentRotation:ve.envMapRotation,un===void 0&&(ve.addEventListener("dispose",Tt),un=new Map,st.programs=un);let an=un.get(Gt);if(an!==void 0){if(st.currentProgram===an&&st.lightsStateVersion===Dt)return at(ve,zt),an}else zt.uniforms=Ve.getUniforms(ve),ve.onBeforeCompile(zt,S),an=Ve.acquireProgram(zt,Gt),un.set(Gt,an),st.uniforms=zt.uniforms;const Ot=st.uniforms;return(!ve.isShaderMaterial&&!ve.isRawShaderMaterial||ve.clipping===!0)&&(Ot.clippingPlanes=Ie.uniform),at(ve,zt),st.needsLights=Ht(ve),st.lightsStateVersion=Dt,st.needsLights&&(Ot.ambientLightColor.value=it.state.ambient,Ot.lightProbe.value=it.state.probe,Ot.directionalLights.value=it.state.directional,Ot.directionalLightShadows.value=it.state.directionalShadow,Ot.spotLights.value=it.state.spot,Ot.spotLightShadows.value=it.state.spotShadow,Ot.rectAreaLights.value=it.state.rectArea,Ot.ltc_1.value=it.state.rectAreaLTC1,Ot.ltc_2.value=it.state.rectAreaLTC2,Ot.pointLights.value=it.state.point,Ot.pointLightShadows.value=it.state.pointShadow,Ot.hemisphereLights.value=it.state.hemi,Ot.directionalShadowMap.value=it.state.directionalShadowMap,Ot.directionalShadowMatrix.value=it.state.directionalShadowMatrix,Ot.spotShadowMap.value=it.state.spotShadowMap,Ot.spotLightMatrix.value=it.state.spotLightMatrix,Ot.spotLightMap.value=it.state.spotLightMap,Ot.pointShadowMap.value=it.state.pointShadowMap,Ot.pointShadowMatrix.value=it.state.pointShadowMatrix),st.currentProgram=an,st.uniformsList=null,an}function Pi(ve){if(ve.uniformsList===null){const tt=ve.currentProgram.getUniforms();ve.uniformsList=AT.seqWithValue(tt.seq,ve.uniforms)}return ve.uniformsList}function at(ve,tt){const ft=te.get(ve);ft.outputColorSpace=tt.outputColorSpace,ft.batching=tt.batching,ft.batchingColor=tt.batchingColor,ft.instancing=tt.instancing,ft.instancingColor=tt.instancingColor,ft.instancingMorph=tt.instancingMorph,ft.skinning=tt.skinning,ft.morphTargets=tt.morphTargets,ft.morphNormals=tt.morphNormals,ft.morphColors=tt.morphColors,ft.morphTargetsCount=tt.morphTargetsCount,ft.numClippingPlanes=tt.numClippingPlanes,ft.numIntersection=tt.numClipIntersection,ft.vertexAlphas=tt.vertexAlphas,ft.vertexTangents=tt.vertexTangents,ft.toneMapping=tt.toneMapping}function Je(ve,tt,ft,st,it){tt.isScene!==!0&&(tt=Ae),ee.resetTextureUnits();const Ct=tt.fog,Dt=st.isMeshStandardMaterial?tt.environment:null,zt=C===null?S.outputColorSpace:C.isXRRenderTarget===!0?C.texture.colorSpace:Nm,Gt=(st.isMeshStandardMaterial?we:X).get(st.envMap||Dt),un=st.vertexColors===!0&&!!ft.attributes.color&&ft.attributes.color.itemSize===4,an=!!ft.attributes.tangent&&(!!st.normalMap||st.anisotropy>0),Ot=!!ft.morphAttributes.position,rn=!!ft.morphAttributes.normal,yn=!!ft.morphAttributes.color;let jn=eu;st.toneMapped&&(C===null||C.isXRRenderTarget===!0)&&(jn=S.toneMapping);const qn=ft.morphAttributes.position||ft.morphAttributes.normal||ft.morphAttributes.color,Nn=qn!==void 0?qn.length:0,en=te.get(st),Zn=y.state.lights;if(pe===!0&&(ue===!0||ve!==M)){const Qi=ve===M&&st.id===A;Ie.setState(st,ve,Qi)}let $n=!1;st.version===en.__version?(en.needsLights&&en.lightsStateVersion!==Zn.state.version||en.outputColorSpace!==zt||it.isBatchedMesh&&en.batching===!1||!it.isBatchedMesh&&en.batching===!0||it.isBatchedMesh&&en.batchingColor===!0&&it.colorTexture===null||it.isBatchedMesh&&en.batchingColor===!1&&it.colorTexture!==null||it.isInstancedMesh&&en.instancing===!1||!it.isInstancedMesh&&en.instancing===!0||it.isSkinnedMesh&&en.skinning===!1||!it.isSkinnedMesh&&en.skinning===!0||it.isInstancedMesh&&en.instancingColor===!0&&it.instanceColor===null||it.isInstancedMesh&&en.instancingColor===!1&&it.instanceColor!==null||it.isInstancedMesh&&en.instancingMorph===!0&&it.morphTexture===null||it.isInstancedMesh&&en.instancingMorph===!1&&it.morphTexture!==null||en.envMap!==Gt||st.fog===!0&&en.fog!==Ct||en.numClippingPlanes!==void 0&&(en.numClippingPlanes!==Ie.numPlanes||en.numIntersection!==Ie.numIntersection)||en.vertexAlphas!==un||en.vertexTangents!==an||en.morphTargets!==Ot||en.morphNormals!==rn||en.morphColors!==yn||en.toneMapping!==jn||en.morphTargetsCount!==Nn)&&($n=!0):($n=!0,en.__version=st.version);let Ji=en.currentProgram;$n===!0&&(Ji=jr(st,tt,it));let Cl=!1,Fi=!1,Ba=!1;const Kn=Ji.getUniforms(),hs=en.uniforms;if(Re.useProgram(Ji.program)&&(Cl=!0,Fi=!0,Ba=!0),st.id!==A&&(A=st.id,Fi=!0),Cl||M!==ve){Re.buffers.depth.getReversed()?(le.copy(ve.projectionMatrix),Ace(le),Rce(le),Kn.setValue(ce,"projectionMatrix",le)):Kn.setValue(ce,"projectionMatrix",ve.projectionMatrix),Kn.setValue(ce,"viewMatrix",ve.matrixWorldInverse);const ui=Kn.map.cameraPosition;ui!==void 0&&ui.setValue(ce,_e.setFromMatrixPosition(ve.matrixWorld)),He.logarithmicDepthBuffer&&Kn.setValue(ce,"logDepthBufFC",2/(Math.log(ve.far+1)/Math.LN2)),(st.isMeshPhongMaterial||st.isMeshToonMaterial||st.isMeshLambertMaterial||st.isMeshBasicMaterial||st.isMeshStandardMaterial||st.isShaderMaterial)&&Kn.setValue(ce,"isOrthographic",ve.isOrthographicCamera===!0),M!==ve&&(M=ve,Fi=!0,Ba=!0)}if(it.isSkinnedMesh){Kn.setOptional(ce,it,"bindMatrix"),Kn.setOptional(ce,it,"bindMatrixInverse");const Qi=it.skeleton;Qi&&(Qi.boneTexture===null&&Qi.computeBoneTexture(),Kn.setValue(ce,"boneTexture",Qi.boneTexture,ee))}it.isBatchedMesh&&(Kn.setOptional(ce,it,"batchingTexture"),Kn.setValue(ce,"batchingTexture",it._matricesTexture,ee),Kn.setOptional(ce,it,"batchingIdTexture"),Kn.setValue(ce,"batchingIdTexture",it._indirectTexture,ee),Kn.setOptional(ce,it,"batchingColorTexture"),it._colorsTexture!==null&&Kn.setValue(ce,"batchingColorTexture",it._colorsTexture,ee));const Ui=ft.morphAttributes;if((Ui.position!==void 0||Ui.normal!==void 0||Ui.color!==void 0)&&oe.update(it,ft,Ji),(Fi||en.receiveShadow!==it.receiveShadow)&&(en.receiveShadow=it.receiveShadow,Kn.setValue(ce,"receiveShadow",it.receiveShadow)),st.isMeshGouraudMaterial&&st.envMap!==null&&(hs.envMap.value=Gt,hs.flipEnvMap.value=Gt.isCubeTexture&&Gt.isRenderTargetTexture===!1?-1:1),st.isMeshStandardMaterial&&st.envMap===null&&tt.environment!==null&&(hs.envMapIntensity.value=tt.environmentIntensity),Fi&&(Kn.setValue(ce,"toneMappingExposure",S.toneMappingExposure),en.needsLights&&At(hs,Ba),Ct&&st.fog===!0&&be.refreshFogUniforms(hs,Ct),be.refreshMaterialUniforms(hs,st,V,K,y.state.transmissionRenderTarget[ve.id]),AT.upload(ce,Pi(en),hs,ee)),st.isShaderMaterial&&st.uniformsNeedUpdate===!0&&(AT.upload(ce,Pi(en),hs,ee),st.uniformsNeedUpdate=!1),st.isSpriteMaterial&&Kn.setValue(ce,"center",it.center),Kn.setValue(ce,"modelViewMatrix",it.modelViewMatrix),Kn.setValue(ce,"normalMatrix",it.normalMatrix),Kn.setValue(ce,"modelMatrix",it.matrixWorld),st.isShaderMaterial||st.isRawShaderMaterial){const Qi=st.uniformsGroups;for(let ui=0,Gn=Qi.length;ui<Gn;ui++){const zs=Qi[ui];he.update(zs,Ji),he.bind(zs,Ji)}}return Ji}function At(ve,tt){ve.ambientLightColor.needsUpdate=tt,ve.lightProbe.needsUpdate=tt,ve.directionalLights.needsUpdate=tt,ve.directionalLightShadows.needsUpdate=tt,ve.pointLights.needsUpdate=tt,ve.pointLightShadows.needsUpdate=tt,ve.spotLights.needsUpdate=tt,ve.spotLightShadows.needsUpdate=tt,ve.rectAreaLights.needsUpdate=tt,ve.hemisphereLights.needsUpdate=tt}function Ht(ve){return ve.isMeshLambertMaterial||ve.isMeshToonMaterial||ve.isMeshPhongMaterial||ve.isMeshStandardMaterial||ve.isShadowMaterial||ve.isShaderMaterial&&ve.lights===!0}this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return I},this.getRenderTarget=function(){return C},this.setRenderTargetTextures=function(ve,tt,ft){const st=te.get(ve);st.__autoAllocateDepthBuffer=ve.resolveDepthBuffer===!1,st.__autoAllocateDepthBuffer===!1&&(st.__useRenderToTexture=!1),te.get(ve.texture).__webglTexture=tt,te.get(ve.depthTexture).__webglTexture=st.__autoAllocateDepthBuffer?void 0:ft,st.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(ve,tt){const ft=te.get(ve);ft.__webglFramebuffer=tt,ft.__useDefaultFramebuffer=tt===void 0};const nn=ce.createFramebuffer();this.setRenderTarget=function(ve,tt=0,ft=0){C=ve,_=tt,I=ft;let st=!0,it=null,Ct=!1,Dt=!1;if(ve){const Gt=te.get(ve);if(Gt.__useDefaultFramebuffer!==void 0)Re.bindFramebuffer(ce.FRAMEBUFFER,null),st=!1;else if(Gt.__webglFramebuffer===void 0)ee.setupRenderTarget(ve);else if(Gt.__hasExternalTextures)ee.rebindTextures(ve,te.get(ve.texture).__webglTexture,te.get(ve.depthTexture).__webglTexture);else if(ve.depthBuffer){const Ot=ve.depthTexture;if(Gt.__boundDepthTexture!==Ot){if(Ot!==null&&te.has(Ot)&&(ve.width!==Ot.image.width||ve.height!==Ot.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ee.setupDepthRenderbuffer(ve)}}const un=ve.texture;(un.isData3DTexture||un.isDataArrayTexture||un.isCompressedArrayTexture)&&(Dt=!0);const an=te.get(ve).__webglFramebuffer;ve.isWebGLCubeRenderTarget?(Array.isArray(an[tt])?it=an[tt][ft]:it=an[tt],Ct=!0):ve.samples>0&&ee.useMultisampledRTT(ve)===!1?it=te.get(ve).__webglMultisampledFramebuffer:Array.isArray(an)?it=an[ft]:it=an,k.copy(ve.viewport),O.copy(ve.scissor),B=ve.scissorTest}else k.copy(Q).multiplyScalar(V).floor(),O.copy(se).multiplyScalar(V).floor(),B=Z;if(ft!==0&&(it=nn),Re.bindFramebuffer(ce.FRAMEBUFFER,it)&&st&&Re.drawBuffers(ve,it),Re.viewport(k),Re.scissor(O),Re.setScissorTest(B),Ct){const Gt=te.get(ve.texture);ce.framebufferTexture2D(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_CUBE_MAP_POSITIVE_X+tt,Gt.__webglTexture,ft)}else if(Dt){const Gt=te.get(ve.texture),un=tt;ce.framebufferTextureLayer(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0,Gt.__webglTexture,ft,un)}else if(ve!==null&&ft!==0){const Gt=te.get(ve.texture);ce.framebufferTexture2D(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_2D,Gt.__webglTexture,ft)}A=-1},this.readRenderTargetPixels=function(ve,tt,ft,st,it,Ct,Dt){if(!(ve&&ve.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let zt=te.get(ve).__webglFramebuffer;if(ve.isWebGLCubeRenderTarget&&Dt!==void 0&&(zt=zt[Dt]),zt){Re.bindFramebuffer(ce.FRAMEBUFFER,zt);try{const Gt=ve.texture,un=Gt.format,an=Gt.type;if(!He.textureFormatReadable(un)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!He.textureTypeReadable(an)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}tt>=0&&tt<=ve.width-st&&ft>=0&&ft<=ve.height-it&&ce.readPixels(tt,ft,st,it,Te.convert(un),Te.convert(an),Ct)}finally{const Gt=C!==null?te.get(C).__webglFramebuffer:null;Re.bindFramebuffer(ce.FRAMEBUFFER,Gt)}}},this.readRenderTargetPixelsAsync=async function(ve,tt,ft,st,it,Ct,Dt){if(!(ve&&ve.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let zt=te.get(ve).__webglFramebuffer;if(ve.isWebGLCubeRenderTarget&&Dt!==void 0&&(zt=zt[Dt]),zt)if(tt>=0&&tt<=ve.width-st&&ft>=0&&ft<=ve.height-it){Re.bindFramebuffer(ce.FRAMEBUFFER,zt);const Gt=ve.texture,un=Gt.format,an=Gt.type;if(!He.textureFormatReadable(un))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!He.textureTypeReadable(an))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Ot=ce.createBuffer();ce.bindBuffer(ce.PIXEL_PACK_BUFFER,Ot),ce.bufferData(ce.PIXEL_PACK_BUFFER,Ct.byteLength,ce.STREAM_READ),ce.readPixels(tt,ft,st,it,Te.convert(un),Te.convert(an),0);const rn=C!==null?te.get(C).__webglFramebuffer:null;Re.bindFramebuffer(ce.FRAMEBUFFER,rn);const yn=ce.fenceSync(ce.SYNC_GPU_COMMANDS_COMPLETE,0);return ce.flush(),await Mce(ce,yn,4),ce.bindBuffer(ce.PIXEL_PACK_BUFFER,Ot),ce.getBufferSubData(ce.PIXEL_PACK_BUFFER,0,Ct),ce.deleteBuffer(Ot),ce.deleteSync(yn),Ct}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(ve,tt=null,ft=0){const st=Math.pow(2,-ft),it=Math.floor(ve.image.width*st),Ct=Math.floor(ve.image.height*st),Dt=tt!==null?tt.x:0,zt=tt!==null?tt.y:0;ee.setTexture2D(ve,0),ce.copyTexSubImage2D(ce.TEXTURE_2D,ft,0,0,Dt,zt,it,Ct),Re.unbindTexture()};const Vt=ce.createFramebuffer(),Tn=ce.createFramebuffer();this.copyTextureToTexture=function(ve,tt,ft=null,st=null,it=0,Ct=null){Ct===null&&(it!==0?(CT("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ct=it,it=0):Ct=0);let Dt,zt,Gt,un,an,Ot,rn,yn,jn;const qn=ve.isCompressedTexture?ve.mipmaps[Ct]:ve.image;if(ft!==null)Dt=ft.max.x-ft.min.x,zt=ft.max.y-ft.min.y,Gt=ft.isBox3?ft.max.z-ft.min.z:1,un=ft.min.x,an=ft.min.y,Ot=ft.isBox3?ft.min.z:0;else{const Ui=Math.pow(2,-it);Dt=Math.floor(qn.width*Ui),zt=Math.floor(qn.height*Ui),ve.isDataArrayTexture?Gt=qn.depth:ve.isData3DTexture?Gt=Math.floor(qn.depth*Ui):Gt=1,un=0,an=0,Ot=0}st!==null?(rn=st.x,yn=st.y,jn=st.z):(rn=0,yn=0,jn=0);const Nn=Te.convert(tt.format),en=Te.convert(tt.type);let Zn;tt.isData3DTexture?(ee.setTexture3D(tt,0),Zn=ce.TEXTURE_3D):tt.isDataArrayTexture||tt.isCompressedArrayTexture?(ee.setTexture2DArray(tt,0),Zn=ce.TEXTURE_2D_ARRAY):(ee.setTexture2D(tt,0),Zn=ce.TEXTURE_2D),ce.pixelStorei(ce.UNPACK_FLIP_Y_WEBGL,tt.flipY),ce.pixelStorei(ce.UNPACK_PREMULTIPLY_ALPHA_WEBGL,tt.premultiplyAlpha),ce.pixelStorei(ce.UNPACK_ALIGNMENT,tt.unpackAlignment);const $n=ce.getParameter(ce.UNPACK_ROW_LENGTH),Ji=ce.getParameter(ce.UNPACK_IMAGE_HEIGHT),Cl=ce.getParameter(ce.UNPACK_SKIP_PIXELS),Fi=ce.getParameter(ce.UNPACK_SKIP_ROWS),Ba=ce.getParameter(ce.UNPACK_SKIP_IMAGES);ce.pixelStorei(ce.UNPACK_ROW_LENGTH,qn.width),ce.pixelStorei(ce.UNPACK_IMAGE_HEIGHT,qn.height),ce.pixelStorei(ce.UNPACK_SKIP_PIXELS,un),ce.pixelStorei(ce.UNPACK_SKIP_ROWS,an),ce.pixelStorei(ce.UNPACK_SKIP_IMAGES,Ot);const Kn=ve.isDataArrayTexture||ve.isData3DTexture,hs=tt.isDataArrayTexture||tt.isData3DTexture;if(ve.isDepthTexture){const Ui=te.get(ve),Qi=te.get(tt),ui=te.get(Ui.__renderTarget),Gn=te.get(Qi.__renderTarget);Re.bindFramebuffer(ce.READ_FRAMEBUFFER,ui.__webglFramebuffer),Re.bindFramebuffer(ce.DRAW_FRAMEBUFFER,Gn.__webglFramebuffer);for(let zs=0;zs<Gt;zs++)Kn&&(ce.framebufferTextureLayer(ce.READ_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,te.get(ve).__webglTexture,it,Ot+zs),ce.framebufferTextureLayer(ce.DRAW_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,te.get(tt).__webglTexture,Ct,jn+zs)),ce.blitFramebuffer(un,an,Dt,zt,rn,yn,Dt,zt,ce.DEPTH_BUFFER_BIT,ce.NEAREST);Re.bindFramebuffer(ce.READ_FRAMEBUFFER,null),Re.bindFramebuffer(ce.DRAW_FRAMEBUFFER,null)}else if(it!==0||ve.isRenderTargetTexture||te.has(ve)){const Ui=te.get(ve),Qi=te.get(tt);Re.bindFramebuffer(ce.READ_FRAMEBUFFER,Vt),Re.bindFramebuffer(ce.DRAW_FRAMEBUFFER,Tn);for(let ui=0;ui<Gt;ui++)Kn?ce.framebufferTextureLayer(ce.READ_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,Ui.__webglTexture,it,Ot+ui):ce.framebufferTexture2D(ce.READ_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_2D,Ui.__webglTexture,it),hs?ce.framebufferTextureLayer(ce.DRAW_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,Qi.__webglTexture,Ct,jn+ui):ce.framebufferTexture2D(ce.DRAW_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_2D,Qi.__webglTexture,Ct),it!==0?ce.blitFramebuffer(un,an,Dt,zt,rn,yn,Dt,zt,ce.COLOR_BUFFER_BIT,ce.NEAREST):hs?ce.copyTexSubImage3D(Zn,Ct,rn,yn,jn+ui,un,an,Dt,zt):ce.copyTexSubImage2D(Zn,Ct,rn,yn,un,an,Dt,zt);Re.bindFramebuffer(ce.READ_FRAMEBUFFER,null),Re.bindFramebuffer(ce.DRAW_FRAMEBUFFER,null)}else hs?ve.isDataTexture||ve.isData3DTexture?ce.texSubImage3D(Zn,Ct,rn,yn,jn,Dt,zt,Gt,Nn,en,qn.data):tt.isCompressedArrayTexture?ce.compressedTexSubImage3D(Zn,Ct,rn,yn,jn,Dt,zt,Gt,Nn,qn.data):ce.texSubImage3D(Zn,Ct,rn,yn,jn,Dt,zt,Gt,Nn,en,qn):ve.isDataTexture?ce.texSubImage2D(ce.TEXTURE_2D,Ct,rn,yn,Dt,zt,Nn,en,qn.data):ve.isCompressedTexture?ce.compressedTexSubImage2D(ce.TEXTURE_2D,Ct,rn,yn,qn.width,qn.height,Nn,qn.data):ce.texSubImage2D(ce.TEXTURE_2D,Ct,rn,yn,Dt,zt,Nn,en,qn);ce.pixelStorei(ce.UNPACK_ROW_LENGTH,$n),ce.pixelStorei(ce.UNPACK_IMAGE_HEIGHT,Ji),ce.pixelStorei(ce.UNPACK_SKIP_PIXELS,Cl),ce.pixelStorei(ce.UNPACK_SKIP_ROWS,Fi),ce.pixelStorei(ce.UNPACK_SKIP_IMAGES,Ba),Ct===0&&tt.generateMipmaps&&ce.generateMipmap(Zn),Re.unbindTexture()},this.copyTextureToTexture3D=function(ve,tt,ft=null,st=null,it=0){return CT('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(ve,tt,ft,st,it)},this.initRenderTarget=function(ve){te.get(ve).__webglFramebuffer===void 0&&ee.setupRenderTarget(ve)},this.initTexture=function(ve){ve.isCubeTexture?ee.setTextureCube(ve,0):ve.isData3DTexture?ee.setTexture3D(ve,0):ve.isDataArrayTexture||ve.isCompressedArrayTexture?ee.setTexture2DArray(ve,0):ee.setTexture2D(ve,0),Re.unbindTexture()},this.resetState=function(){_=0,I=0,C=null,Re.reset(),ke.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return gc}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=lr._getDrawingBufferColorSpace(e),n.unpackColorSpace=lr._getUnpackColorSpace()}}const H0e=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:L3,AddEquation:Xf,AddOperation:_H,AdditiveAnimationBlendMode:q3,AdditiveBlending:DR,AgXToneMapping:PH,AlphaFormat:$3,AlwaysCompare:HH,AlwaysDepth:r2,AlwaysStencilFunc:$R,AmbientLight:FV,AnimationAction:KV,AnimationClip:_w,AnimationLoader:nde,AnimationMixer:Rde,AnimationObjectGroup:Mde,AnimationUtils:Jue,ArcCurve:lV,ArrayCamera:WV,ArrowHelper:Qde,AttachedBindMode:UR,Audio:jV,AudioAnalyser:bde,AudioContext:mO,AudioListener:gde,AudioLoader:hde,AxesHelper:efe,BackSide:Eo,BasicDepthPacking:OH,BasicShadowMap:nH,BatchedMesh:iV,Bone:J3,BooleanKeyframeTrack:zm,Box2:Ude,Box3:Fs,Box3Helper:Zde,BoxGeometry:$m,BoxHelper:Yde,BufferAttribute:_r,BufferGeometry:Mn,BufferGeometryLoader:VV,ByteType:B3,Cache:Cd,Camera:e_,CameraHelper:Xde,CanvasTexture:wue,CapsuleGeometry:tP,CatmullRomCurve3:cV,CineonToneMapping:TH,CircleGeometry:nP,ClampToEdgeWrapping:pl,Clock:gO,Color:Wt,ColorKeyframeTrack:fO,ColorManagement:lr,CompressedArrayTexture:bue,CompressedCubeTexture:xue,CompressedTexture:QI,CompressedTextureLoader:rde,ConeGeometry:rP,ConstantAlphaFactor:bH,ConstantColorFactor:yH,Controls:nfe,CubeCamera:XH,CubeReflectionMapping:jd,CubeRefractionMapping:nh,CubeTexture:t_,CubeTextureLoader:ide,CubeUVReflectionMapping:cv,CubicBezierCurve:nO,CubicBezierCurve3:uV,CubicInterpolant:AV,CullFaceBack:LR,CullFaceFront:tH,CullFaceFrontBack:Ale,CullFaceNone:eH,Curve:Ic,CurvePath:fV,CustomBlending:rH,CustomToneMapping:IH,CylinderGeometry:fv,Cylindrical:Fde,Data3DTexture:XI,DataArrayTexture:Qw,DataTexture:tu,DataTextureLoader:sde,DataUtils:qce,DecrementStencilOp:Wle,DecrementWrapStencilOp:qle,DefaultLoadingManager:OV,DepthFormat:Vy,DepthStencilFormat:Wy,DepthTexture:eO,DetachedBindMode:MH,DirectionalLight:BV,DirectionalLightHelper:Gde,DiscreteInterpolant:RV,DodecahedronGeometry:iP,DoubleSide:mc,DstAlphaFactor:fH,DstColorFactor:pH,DynamicCopyUsage:ace,DynamicDrawUsage:tce,DynamicReadUsage:ice,EdgesGeometry:hV,EllipseCurve:eP,EqualCompare:FH,EqualDepth:s2,EqualStencilFunc:Yle,EquirectangularReflectionMapping:ow,EquirectangularRefractionMapping:aw,Euler:La,EventDispatcher:Tc,ExtrudeGeometry:sP,FileLoader:lu,Float16BufferAttribute:Qce,Float32BufferAttribute:tn,FloatType:Zo,Fog:ZI,FogExp2:YI,FramebufferTexture:vue,FrontSide:Wd,Frustum:n_,GLBufferAttribute:Bde,GLSL1:cce,GLSL3:zR,GreaterCompare:UH,GreaterDepth:a2,GreaterEqualCompare:zH,GreaterEqualDepth:o2,GreaterEqualStencilFunc:ece,GreaterStencilFunc:Jle,GridHelper:qde,Group:py,HalfFloatType:uv,HemisphereLight:NV,HemisphereLightHelper:jde,IcosahedronGeometry:oP,ImageBitmapLoader:fde,ImageLoader:Sw,ImageUtils:jH,IncrementStencilOp:Vle,IncrementWrapStencilOp:jle,InstancedBufferAttribute:Ky,InstancedBufferGeometry:HV,InstancedInterleavedBuffer:Dde,InstancedMesh:rV,Int16BufferAttribute:Zce,Int32BufferAttribute:Jce,Int8BufferAttribute:Gce,IntType:zI,InterleavedBuffer:JI,InterleavedBufferAttribute:Lm,Interpolant:o_,InterpolateDiscrete:uw,InterpolateLinear:L2,InterpolateSmooth:PT,InvertStencilOp:Kle,KeepStencilOp:Zp,KeyframeTrack:Tl,LOD:QH,LatheGeometry:r_,Layers:Im,LessCompare:BH,LessDepth:i2,LessEqualCompare:K3,LessEqualDepth:Om,LessEqualStencilFunc:Zle,LessStencilFunc:Xle,Light:hh,LightProbe:zV,Line:rh,Line3:$de,LineBasicMaterial:Co,LineCurve:rO,LineCurve3:dV,LineDashedMaterial:PV,LineLoop:sV,LineSegments:fu,LinearFilter:cs,LinearInterpolant:dO,LinearMipMapLinearFilter:Nle,LinearMipMapNearestFilter:Ole,LinearMipmapLinearFilter:Yc,LinearMipmapNearestFilter:Ox,LinearSRGBColorSpace:Nm,LinearToneMapping:SH,LinearTransfer:fw,Loader:Mo,LoaderUtils:$2,LoadingManager:hO,LoopOnce:AH,LoopPingPong:kH,LoopRepeat:RH,LuminanceAlphaFormat:V3,LuminanceFormat:H3,MOUSE:Xp,Material:Us,MaterialLoader:hP,MathUtils:Pce,Matrix2:xO,Matrix3:On,Matrix4:vn,MaxEquation:aH,Mesh:Xi,MeshBasicMaterial:dh,MeshDepthMaterial:lO,MeshDistanceMaterial:cO,MeshLambertMaterial:TV,MeshMatcapMaterial:IV,MeshNormalMaterial:EV,MeshPhongMaterial:_V,MeshPhysicalMaterial:wV,MeshStandardMaterial:aO,MeshToonMaterial:SV,MinEquation:oH,MirroredRepeatWrapping:cw,MixOperation:wH,MultiplyBlending:FR,MultiplyOperation:Zw,NearestFilter:Bs,NearestMipMapLinearFilter:kle,NearestMipMapNearestFilter:Rle,NearestMipmapLinearFilter:fy,NearestMipmapNearestFilter:D3,NeutralToneMapping:CH,NeverCompare:DH,NeverDepth:n2,NeverStencilFunc:Gle,NoBlending:Nd,NoColorSpace:Sd,NoToneMapping:eu,NormalAnimationBlendMode:KI,NormalBlending:Em,NotEqualCompare:$H,NotEqualDepth:l2,NotEqualStencilFunc:Qle,NumberKeyframeTrack:xw,Object3D:yr,ObjectLoader:ude,ObjectSpaceNormalMap:LH,OctahedronGeometry:i_,OneFactor:cH,OneMinusConstantAlphaFactor:xH,OneMinusConstantColorFactor:vH,OneMinusDstAlphaFactor:hH,OneMinusDstColorFactor:mH,OneMinusSrcAlphaFactor:t2,OneMinusSrcColorFactor:dH,OrthographicCamera:Qf,PCFShadowMap:UI,PCFSoftShadowMap:Ey,PMREMGenerator:XR,Path:gw,PerspectiveCamera:li,Plane:Kf,PlaneGeometry:hv,PlaneHelper:Jde,PointLight:DV,PointLightHelper:Vde,Points:oV,PointsMaterial:Q3,PolarGridHelper:Kde,PolyhedronGeometry:fh,PositionalAudio:vde,PropertyBinding:mr,PropertyMixer:qV,QuadraticBezierCurve:iO,QuadraticBezierCurve3:sO,Quaternion:ro,QuaternionKeyframeTrack:a_,QuaternionLinearInterpolant:kV,RED_GREEN_RGTC2_Format:O2,RED_RGTC1_Format:j3,REVISION:FI,RGBADepthPacking:NH,RGBAFormat:to,RGBAIntegerFormat:qI,RGBA_ASTC_10x10_Format:P2,RGBA_ASTC_10x5_Format:E2,RGBA_ASTC_10x6_Format:T2,RGBA_ASTC_10x8_Format:I2,RGBA_ASTC_12x10_Format:C2,RGBA_ASTC_12x12_Format:M2,RGBA_ASTC_4x4_Format:g2,RGBA_ASTC_5x4_Format:y2,RGBA_ASTC_5x5_Format:v2,RGBA_ASTC_6x5_Format:b2,RGBA_ASTC_6x6_Format:x2,RGBA_ASTC_8x5_Format:w2,RGBA_ASTC_8x6_Format:_2,RGBA_ASTC_8x8_Format:S2,RGBA_BPTC_Format:Fx,RGBA_ETC2_EAC_Format:m2,RGBA_PVRTC_2BPPV1_Format:f2,RGBA_PVRTC_4BPPV1_Format:d2,RGBA_S3TC_DXT1_Format:Lx,RGBA_S3TC_DXT3_Format:Dx,RGBA_S3TC_DXT5_Format:Bx,RGBDepthPacking:Ule,RGBFormat:z3,RGBIntegerFormat:Lle,RGB_BPTC_SIGNED_Format:A2,RGB_BPTC_UNSIGNED_Format:R2,RGB_ETC1_Format:h2,RGB_ETC2_Format:p2,RGB_PVRTC_2BPPV1_Format:u2,RGB_PVRTC_4BPPV1_Format:c2,RGB_S3TC_DXT1_Format:Nx,RGDepthPacking:$le,RGFormat:W3,RGIntegerFormat:jI,RawShaderMaterial:xV,Ray:dv,Raycaster:GV,RectAreaLight:UV,RedFormat:WI,RedIntegerFormat:Jw,ReinhardToneMapping:EH,RenderTarget:GI,RenderTarget3D:kde,RenderTargetArray:Ode,RepeatWrapping:lw,ReplaceStencilOp:Hle,ReverseSubtractEquation:sH,RingGeometry:aP,SIGNED_RED_GREEN_RGTC2_Format:N2,SIGNED_RED_RGTC1_Format:k2,SRGBColorSpace:Ko,SRGBTransfer:Rr,Scene:D2,ShaderChunk:Hn,ShaderLib:pc,ShaderMaterial:wc,ShadowMaterial:bV,Shape:Pm,ShapeGeometry:lP,ShapePath:tfe,ShapeUtils:nu,ShortType:F3,Skeleton:tV,SkeletonHelper:Hde,SkinnedMesh:eV,Source:Yf,Sphere:io,SphereGeometry:s_,Spherical:KR,SphericalHarmonics3:$V,SplineCurve:oO,SpotLight:LV,SpotLightHelper:zde,Sprite:JH,SpriteMaterial:Z3,SrcAlphaFactor:e2,SrcAlphaSaturateFactor:gH,SrcColorFactor:uH,StaticCopyUsage:oce,StaticDrawUsage:hw,StaticReadUsage:rce,StereoCamera:pde,StreamCopyUsage:lce,StreamDrawUsage:nce,StreamReadUsage:sce,StringKeyframeTrack:Hm,SubtractEquation:iH,SubtractiveBlending:BR,TOUCH:Yp,TangentSpaceNormalMap:uh,TetrahedronGeometry:cP,Texture:vi,TextureLoader:ode,TextureUtils:afe,TimestampQuery:uce,TorusGeometry:uP,TorusKnotGeometry:dP,Triangle:Yo,TriangleFanDrawMode:Fle,TriangleStripDrawMode:Ble,TrianglesDrawMode:Dle,TubeGeometry:fP,UVMapping:$I,Uint16BufferAttribute:X3,Uint32BufferAttribute:Y3,Uint8BufferAttribute:Xce,Uint8ClampedBufferAttribute:Yce,Uniform:bO,UniformsGroup:Lde,UniformsLib:Ut,UniformsUtils:GH,UnsignedByteType:xc,UnsignedInt248Type:Hy,UnsignedInt5999Type:U3,UnsignedIntType:qd,UnsignedShort4444Type:HI,UnsignedShort5551Type:VI,UnsignedShortType:zy,VSMShadowMap:fc,Vector2:St,Vector3:Ce,Vector4:gr,VectorKeyframeTrack:ww,VideoFrameTexture:yue,VideoTexture:aV,WebGL3DRenderTarget:Dce,WebGLArrayRenderTarget:Lce,WebGLCoordinateSystem:gc,WebGLCubeRenderTarget:YH,WebGLRenderTarget:au,WebGLRenderer:nW,WebGLUtils:tW,WebGPUCoordinateSystem:pw,WebXRController:MT,WireframeGeometry:vV,WrapAroundEnding:dw,ZeroCurvatureEnding:pm,ZeroFactor:lH,ZeroSlopeEnding:mm,ZeroStencilOp:zle,createCanvasElement:WH},Symbol.toStringTag,{value:"Module"}));var ZR=function(t,e){return ZR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},ZR(t,e)};function V0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ZR(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var fl=function(){return fl=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},fl.apply(this,arguments)};function Ew(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function W0e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ym={exports:{}},Ff={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F8;function j0e(){return F8||(F8=1,Ff.ConcurrentRoot=1,Ff.ContinuousEventPriority=4,Ff.DefaultEventPriority=16,Ff.DiscreteEventPriority=1,Ff.IdleEventPriority=536870912,Ff.LegacyRoot=0),Ff}(function(t){t.exports=j0e()})(ym);function q0e(t){let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(d!==e){const h=e;e=u?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},i=()=>e,s=(l,u=i,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=u(e);function f(){const p=u(e);if(!d(h,p)){const g=h;l(h=p,g)}}return n.add(f),()=>n.delete(f)},c={setState:r,getState:i,subscribe:(l,u,d)=>u||d?s(l,u,d):(n.add(l),()=>n.delete(l)),destroy:()=>n.clear()};return e=t(r,i,c),c}const K0e=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),U8=K0e?N.useEffect:N.useLayoutEffect;function G0e(t){const e=typeof t=="function"?q0e(t):t,n=(r=e.getState,i=Object.is)=>{const[,s]=N.useReducer(m=>m+1,0),o=e.getState(),a=N.useRef(o),c=N.useRef(r),l=N.useRef(i),u=N.useRef(!1),d=N.useRef();d.current===void 0&&(d.current=r(o));let h,f=!1;(a.current!==o||c.current!==r||l.current!==i||u.current)&&(h=r(o),f=!i(d.current,h)),U8(()=>{f&&(d.current=h),a.current=o,c.current=r,l.current=i,u.current=!1});const p=N.useRef(o);U8(()=>{const m=()=>{try{const b=e.getState(),x=c.current(b);l.current(d.current,x)||(a.current=b,d.current=x,s())}catch{u.current=!0,s()}},y=e.subscribe(m);return e.getState()!==p.current&&m(),y},[]);const g=f?h:d.current;return N.useDebugValue(g),g};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}var rW={exports:{}},z2={exports:{}},OM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $8;function X0e(){return $8||($8=1,function(t){function e(V,G){var j=V.length;V.push(G);e:for(;0<j;){var Q=j-1>>>1,se=V[Q];if(0<i(se,G))V[Q]=G,V[j]=se,j=Q;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var G=V[0],j=V.pop();if(j!==G){V[0]=j;e:for(var Q=0,se=V.length,Z=se>>>1;Q<Z;){var ie=2*(Q+1)-1,pe=V[ie],ue=ie+1,le=V[ue];if(0>i(pe,j))ue<se&&0>i(le,pe)?(V[Q]=le,V[ue]=j,Q=ue):(V[Q]=pe,V[ie]=j,Q=ie);else if(ue<se&&0>i(le,j))V[Q]=le,V[ue]=j,Q=ue;else break e}}return G}function i(V,G){var j=V.sortIndex-G.sortIndex;return j!==0?j:V.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,m=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(V){for(var G=n(l);G!==null;){if(G.callback===null)r(l);else if(G.startTime<=V)r(l),G.sortIndex=G.expirationTime,e(c,G);else break;G=n(l)}}function S(V){if(g=!1,x(V),!p)if(n(c)!==null)p=!0,q(P);else{var G=n(l);G!==null&&K(S,G.startTime-V)}}function P(V,G){p=!1,g&&(g=!1,y(C),C=-1),f=!0;var j=h;try{for(x(G),d=n(c);d!==null&&(!(d.expirationTime>G)||V&&!k());){var Q=d.callback;if(typeof Q=="function"){d.callback=null,h=d.priorityLevel;var se=Q(d.expirationTime<=G);G=t.unstable_now(),typeof se=="function"?d.callback=se:d===n(c)&&r(c),x(G)}else r(c);d=n(c)}if(d!==null)var Z=!0;else{var ie=n(l);ie!==null&&K(S,ie.startTime-G),Z=!1}return Z}finally{d=null,h=j,f=!1}}var _=!1,I=null,C=-1,A=5,M=-1;function k(){return!(t.unstable_now()-M<A)}function O(){if(I!==null){var V=t.unstable_now();M=V;var G=!0;try{G=I(!0,V)}finally{G?B():(_=!1,I=null)}}else _=!1}var B;if(typeof b=="function")B=function(){b(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,U=$.port2;$.port1.onmessage=O,B=function(){U.postMessage(null)}}else B=function(){m(O,0)};function q(V){I=V,_||(_=!0,B())}function K(V,G){C=m(function(){V(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,q(P))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(V){switch(h){case 1:case 2:case 3:var G=3;break;default:G=h}var j=h;h=G;try{return V()}finally{h=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,G){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var j=h;h=V;try{return G()}finally{h=j}},t.unstable_scheduleCallback=function(V,G,j){var Q=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?Q+j:Q):j=Q,V){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=j+se,V={id:u++,callback:G,priorityLevel:V,startTime:j,expirationTime:se,sortIndex:-1},j>Q?(V.sortIndex=j,e(l,V),n(c)===null&&V===n(l)&&(g?(y(C),C=-1):g=!0,K(S,j-Q))):(V.sortIndex=se,e(c,V),p||f||(p=!0,q(P))),V},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(V){var G=h;return function(){var j=h;h=G;try{return V.apply(this,arguments)}finally{h=j}}}}(OM)),OM}(function(t){t.exports=X0e()})(z2);/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NM,z8;function Y0e(){return z8||(z8=1,NM=function(e){var n={},r=qt,i=z2.exports,s=Object.assign;function o(E){for(var T="https://reactjs.org/docs/error-decoder.html?invariant="+E,L=1;L<arguments.length;L++)T+="&args[]="+encodeURIComponent(arguments[L]);return"Minified React error #"+E+"; visit "+T+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),l=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),S=Symbol.for("react.offscreen"),P=Symbol.iterator;function _(E){return E===null||typeof E!="object"?null:(E=P&&E[P]||E["@@iterator"],typeof E=="function"?E:null)}function I(E){if(E==null)return null;if(typeof E=="function")return E.displayName||E.name||null;if(typeof E=="string")return E;switch(E){case u:return"Fragment";case l:return"Portal";case h:return"Profiler";case d:return"StrictMode";case m:return"Suspense";case y:return"SuspenseList"}if(typeof E=="object")switch(E.$$typeof){case p:return(E.displayName||"Context")+".Consumer";case f:return(E._context.displayName||"Context")+".Provider";case g:var T=E.render;return E=E.displayName,E||(E=T.displayName||T.name||"",E=E!==""?"ForwardRef("+E+")":"ForwardRef"),E;case b:return T=E.displayName||null,T!==null?T:I(E.type)||"Memo";case x:T=E._payload,E=E._init;try{return I(E(T))}catch{}}return null}function C(E){var T=E.type;switch(E.tag){case 24:return"Cache";case 9:return(T.displayName||"Context")+".Consumer";case 10:return(T._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return E=T.render,E=E.displayName||E.name||"",T.displayName||(E!==""?"ForwardRef("+E+")":"ForwardRef");case 7:return"Fragment";case 5:return T;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return I(T);case 8:return T===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof T=="function")return T.displayName||T.name||null;if(typeof T=="string")return T}return null}function A(E){var T=E,L=E;if(E.alternate)for(;T.return;)T=T.return;else{E=T;do T=E,(T.flags&4098)!==0&&(L=T.return),E=T.return;while(E)}return T.tag===3?L:null}function M(E){if(A(E)!==E)throw Error(o(188))}function k(E){var T=E.alternate;if(!T){if(T=A(E),T===null)throw Error(o(188));return T!==E?null:E}for(var L=E,F=T;;){var Y=L.return;if(Y===null)break;var re=Y.alternate;if(re===null){if(F=Y.return,F!==null){L=F;continue}break}if(Y.child===re.child){for(re=Y.child;re;){if(re===L)return M(Y),E;if(re===F)return M(Y),T;re=re.sibling}throw Error(o(188))}if(L.return!==F.return)L=Y,F=re;else{for(var Le=!1,Ze=Y.child;Ze;){if(Ze===L){Le=!0,L=Y,F=re;break}if(Ze===F){Le=!0,F=Y,L=re;break}Ze=Ze.sibling}if(!Le){for(Ze=re.child;Ze;){if(Ze===L){Le=!0,L=re,F=Y;break}if(Ze===F){Le=!0,F=re,L=Y;break}Ze=Ze.sibling}if(!Le)throw Error(o(189))}}if(L.alternate!==F)throw Error(o(190))}if(L.tag!==3)throw Error(o(188));return L.stateNode.current===L?E:T}function O(E){return E=k(E),E!==null?B(E):null}function B(E){if(E.tag===5||E.tag===6)return E;for(E=E.child;E!==null;){var T=B(E);if(T!==null)return T;E=E.sibling}return null}function $(E){if(E.tag===5||E.tag===6)return E;for(E=E.child;E!==null;){if(E.tag!==4){var T=$(E);if(T!==null)return T}E=E.sibling}return null}var U=Array.isArray,q=e.getPublicInstance,K=e.getRootHostContext,V=e.getChildHostContext,G=e.prepareForCommit,j=e.resetAfterCommit,Q=e.createInstance,se=e.appendInitialChild,Z=e.finalizeInitialChildren,ie=e.prepareUpdate,pe=e.shouldSetTextContent,ue=e.createTextInstance,le=e.scheduleTimeout,ae=e.cancelTimeout,_e=e.noTimeout,ye=e.isPrimaryRenderer,Ae=e.supportsMutation,Oe=e.supportsPersistence,Be=e.supportsHydration,ce=e.getInstanceFromNode,Ge=e.preparePortalMount,Pe=e.getCurrentEventPriority,He=e.detachDeletedInstance,Re=e.supportsMicrotasks,je=e.scheduleMicrotask,te=e.supportsTestSelectors,ee=e.findFiberRoot,X=e.getBoundingRect,we=e.getTextContent,Ne=e.isHiddenSubtree,We=e.matchAccessibilityRole,xe=e.setFocusIfFocusable,Ve=e.setupIntersectionObserver,be=e.appendChild,ge=e.appendChildToContainer,Se=e.commitTextUpdate,Ie=e.commitMount,me=e.commitUpdate,Ee=e.insertBefore,oe=e.insertInContainerBefore,ne=e.removeChild,de=e.removeChildFromContainer,Te=e.resetTextContent,ke=e.hideInstance,he=e.hideTextInstance,Xe=e.unhideInstance,$e=e.unhideTextInstance,Qe=e.clearContainer,ut=e.cloneInstance,gt=e.createContainerChildSet,Tt=e.appendChildToContainerChildSet,Kt=e.finalizeContainerChildren,Zt=e.replaceContainerChildren,Bt=e.cloneHiddenInstance,_n=e.cloneHiddenTextInstance,hn=e.canHydrateInstance,bn=e.canHydrateTextInstance,Wn=e.canHydrateSuspenseInstance,Un=e.isSuspenseInstancePending,Jn=e.isSuspenseInstanceFallback,ci=e.registerSuspenseInstanceRetry,fr=e.getNextHydratableSibling,Ur=e.getFirstHydratableChild,Zr=e.getFirstHydratableChildWithinContainer,jr=e.getFirstHydratableChildWithinSuspenseInstance,Pi=e.hydrateInstance,at=e.hydrateTextInstance,Je=e.hydrateSuspenseInstance,At=e.getNextHydratableInstanceAfterSuspenseInstance,Ht=e.commitHydratedContainer,nn=e.commitHydratedSuspenseInstance,Vt=e.clearSuspenseBoundary,Tn=e.clearSuspenseBoundaryFromContainer,ve=e.shouldDeleteUnhydratedTailInstances,tt=e.didNotMatchHydratedContainerTextInstance,ft=e.didNotMatchHydratedTextInstance,st;function it(E){if(st===void 0)try{throw Error()}catch(L){var T=L.stack.trim().match(/\n( *(at )?)/);st=T&&T[1]||""}return`
`+st+E}var Ct=!1;function Dt(E,T){if(!E||Ct)return"";Ct=!0;var L=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(T)if(T=function(){throw Error()},Object.defineProperty(T.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(T,[])}catch(Rt){var F=Rt}Reflect.construct(E,[],T)}else{try{T.call()}catch(Rt){F=Rt}E.call(T.prototype)}else{try{throw Error()}catch(Rt){F=Rt}E()}}catch(Rt){if(Rt&&F&&typeof Rt.stack=="string"){for(var Y=Rt.stack.split(`
`),re=F.stack.split(`
`),Le=Y.length-1,Ze=re.length-1;1<=Le&&0<=Ze&&Y[Le]!==re[Ze];)Ze--;for(;1<=Le&&0<=Ze;Le--,Ze--)if(Y[Le]!==re[Ze]){if(Le!==1||Ze!==1)do if(Le--,Ze--,0>Ze||Y[Le]!==re[Ze]){var yt=`
`+Y[Le].replace(" at new "," at ");return E.displayName&&yt.includes("<anonymous>")&&(yt=yt.replace("<anonymous>",E.displayName)),yt}while(1<=Le&&0<=Ze);break}}}finally{Ct=!1,Error.prepareStackTrace=L}return(E=E?E.displayName||E.name:"")?it(E):""}var zt=Object.prototype.hasOwnProperty,Gt=[],un=-1;function an(E){return{current:E}}function Ot(E){0>un||(E.current=Gt[un],Gt[un]=null,un--)}function rn(E,T){un++,Gt[un]=E.current,E.current=T}var yn={},jn=an(yn),qn=an(!1),Nn=yn;function en(E,T){var L=E.type.contextTypes;if(!L)return yn;var F=E.stateNode;if(F&&F.__reactInternalMemoizedUnmaskedChildContext===T)return F.__reactInternalMemoizedMaskedChildContext;var Y={},re;for(re in L)Y[re]=T[re];return F&&(E=E.stateNode,E.__reactInternalMemoizedUnmaskedChildContext=T,E.__reactInternalMemoizedMaskedChildContext=Y),Y}function Zn(E){return E=E.childContextTypes,E!=null}function $n(){Ot(qn),Ot(jn)}function Ji(E,T,L){if(jn.current!==yn)throw Error(o(168));rn(jn,T),rn(qn,L)}function Cl(E,T,L){var F=E.stateNode;if(T=T.childContextTypes,typeof F.getChildContext!="function")return L;F=F.getChildContext();for(var Y in F)if(!(Y in T))throw Error(o(108,C(E)||"Unknown",Y));return s({},L,F)}function Fi(E){return E=(E=E.stateNode)&&E.__reactInternalMemoizedMergedChildContext||yn,Nn=jn.current,rn(jn,E),rn(qn,qn.current),!0}function Ba(E,T,L){var F=E.stateNode;if(!F)throw Error(o(169));L?(E=Cl(E,T,Nn),F.__reactInternalMemoizedMergedChildContext=E,Ot(qn),Ot(jn),rn(jn,E)):Ot(qn),rn(qn,L)}var Kn=Math.clz32?Math.clz32:Qi,hs=Math.log,Ui=Math.LN2;function Qi(E){return E>>>=0,E===0?32:31-(hs(E)/Ui|0)|0}var ui=64,Gn=4194304;function zs(E){switch(E&-E){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return E&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return E&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return E}}function yh(E,T){var L=E.pendingLanes;if(L===0)return 0;var F=0,Y=E.suspendedLanes,re=E.pingedLanes,Le=L&268435455;if(Le!==0){var Ze=Le&~Y;Ze!==0?F=zs(Ze):(re&=Le,re!==0&&(F=zs(re)))}else Le=L&~Y,Le!==0?F=zs(Le):re!==0&&(F=zs(re));if(F===0)return 0;if(T!==0&&T!==F&&(T&Y)===0&&(Y=F&-F,re=T&-T,Y>=re||Y===16&&(re&4194240)!==0))return T;if((F&4)!==0&&(F|=L&16),T=E.entangledLanes,T!==0)for(E=E.entanglements,T&=F;0<T;)L=31-Kn(T),Y=1<<L,F|=E[L],T&=~Y;return F}function Av(E,T){switch(E){case 1:case 2:case 4:return T+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return T+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function C_(E,T){for(var L=E.suspendedLanes,F=E.pingedLanes,Y=E.expirationTimes,re=E.pendingLanes;0<re;){var Le=31-Kn(re),Ze=1<<Le,yt=Y[Le];yt===-1?((Ze&L)===0||(Ze&F)!==0)&&(Y[Le]=Av(Ze,T)):yt<=T&&(E.expiredLanes|=Ze),re&=~Ze}}function qm(E){return E=E.pendingLanes&-1073741825,E!==0?E:E&1073741824?1073741824:0}function Km(E){for(var T=[],L=0;31>L;L++)T.push(E);return T}function gu(E,T,L){E.pendingLanes|=T,T!==536870912&&(E.suspendedLanes=0,E.pingedLanes=0),E=E.eventTimes,T=31-Kn(T),E[T]=L}function Gm(E,T){var L=E.pendingLanes&~T;E.pendingLanes=T,E.suspendedLanes=0,E.pingedLanes=0,E.expiredLanes&=T,E.mutableReadLanes&=T,E.entangledLanes&=T,T=E.entanglements;var F=E.eventTimes;for(E=E.expirationTimes;0<L;){var Y=31-Kn(L),re=1<<Y;T[Y]=0,F[Y]=-1,E[Y]=-1,L&=~re}}function Fa(E,T){var L=E.entangledLanes|=T;for(E=E.entanglements;L;){var F=31-Kn(L),Y=1<<F;Y&T|E[F]&T&&(E[F]|=T),L&=~Y}}var zn=0;function Ml(E){return E&=-E,1<E?4<E?(E&268435455)!==0?16:536870912:4:1}var yu=i.unstable_scheduleCallback,Qd=i.unstable_cancelCallback,Pc=i.unstable_shouldYield,JP=i.unstable_requestPaint,Ci=i.unstable_now,vu=i.unstable_ImmediatePriority,QP=i.unstable_UserBlockingPriority,Xm=i.unstable_NormalPriority,Ym=i.unstable_IdlePriority,vh=null,Ua=null;function bh(E){if(Ua&&typeof Ua.onCommitFiberRoot=="function")try{Ua.onCommitFiberRoot(vh,E,void 0,(E.current.flags&128)===128)}catch{}}function xh(E,T){return E===T&&(E!==0||1/E===1/T)||E!==E&&T!==T}var Ts=typeof Object.is=="function"?Object.is:xh,Ro=null,Zm=!1,Rv=!1;function Jm(E){Ro===null?Ro=[E]:Ro.push(E)}function Qm(E){Zm=!0,Jm(E)}function ko(){if(!Rv&&Ro!==null){Rv=!0;var E=0,T=zn;try{var L=Ro;for(zn=1;E<L.length;E++){var F=L[E];do F=F(!0);while(F!==null)}Ro=null,Zm=!1}catch(Y){throw Ro!==null&&(Ro=Ro.slice(E+1)),yu(vu,ko),Y}finally{zn=T,Rv=!1}}return null}var M_=a.ReactCurrentBatchConfig;function oa(E,T){if(Ts(E,T))return!0;if(typeof E!="object"||E===null||typeof T!="object"||T===null)return!1;var L=Object.keys(E),F=Object.keys(T);if(L.length!==F.length)return!1;for(F=0;F<L.length;F++){var Y=L[F];if(!zt.call(T,Y)||!Ts(E[Y],T[Y]))return!1}return!0}function kv(E){switch(E.tag){case 5:return it(E.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 2:case 15:return E=Dt(E.type,!1),E;case 11:return E=Dt(E.type.render,!1),E;case 1:return E=Dt(E.type,!0),E;default:return""}}function Hs(E,T){if(E&&E.defaultProps){T=s({},T),E=E.defaultProps;for(var L in E)T[L]===void 0&&(T[L]=E[L]);return T}return T}var wh=an(null),bu=null,Al=null,e0=null;function Is(){e0=Al=bu=null}function xu(E,T,L){ye?(rn(wh,T._currentValue),T._currentValue=L):(rn(wh,T._currentValue2),T._currentValue2=L)}function _h(E){var T=wh.current;Ot(wh),ye?E._currentValue=T:E._currentValue2=T}function wu(E,T,L){for(;E!==null;){var F=E.alternate;if((E.childLanes&T)!==T?(E.childLanes|=T,F!==null&&(F.childLanes|=T)):F!==null&&(F.childLanes&T)!==T&&(F.childLanes|=T),E===L)break;E=E.return}}function ef(E,T){bu=E,e0=Al=null,E=E.dependencies,E!==null&&E.firstContext!==null&&((E.lanes&T)!==0&&(Vi=!0),E.firstContext=null)}function Vs(E){var T=ye?E._currentValue:E._currentValue2;if(e0!==E)if(E={context:E,memoizedValue:T,next:null},Al===null){if(bu===null)throw Error(o(308));Al=E,bu.dependencies={lanes:0,firstContext:E}}else Al=Al.next=E;return T}var Oo=null,No=!1;function tf(E){E.updateQueue={baseState:E.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ov(E,T){E=E.updateQueue,T.updateQueue===E&&(T.updateQueue={baseState:E.baseState,firstBaseUpdate:E.firstBaseUpdate,lastBaseUpdate:E.lastBaseUpdate,shared:E.shared,effects:E.effects})}function Rl(E,T){return{eventTime:E,lane:T,tag:0,payload:null,callback:null,next:null}}function Cc(E,T){var L=E.updateQueue;L!==null&&(L=L.shared,fi!==null&&(E.mode&1)!==0&&(An&2)===0?(E=L.interleaved,E===null?(T.next=T,Oo===null?Oo=[L]:Oo.push(L)):(T.next=E.next,E.next=T),L.interleaved=T):(E=L.pending,E===null?T.next=T:(T.next=E.next,E.next=T),L.pending=T))}function t0(E,T,L){if(T=T.updateQueue,T!==null&&(T=T.shared,(L&4194240)!==0)){var F=T.lanes;F&=E.pendingLanes,L|=F,T.lanes=L,Fa(E,L)}}function n0(E,T){var L=E.updateQueue,F=E.alternate;if(F!==null&&(F=F.updateQueue,L===F)){var Y=null,re=null;if(L=L.firstBaseUpdate,L!==null){do{var Le={eventTime:L.eventTime,lane:L.lane,tag:L.tag,payload:L.payload,callback:L.callback,next:null};re===null?Y=re=Le:re=re.next=Le,L=L.next}while(L!==null);re===null?Y=re=T:re=re.next=T}else Y=re=T;L={baseState:F.baseState,firstBaseUpdate:Y,lastBaseUpdate:re,shared:F.shared,effects:F.effects},E.updateQueue=L;return}E=L.lastBaseUpdate,E===null?L.firstBaseUpdate=T:E.next=T,L.lastBaseUpdate=T}function r0(E,T,L,F){var Y=E.updateQueue;No=!1;var re=Y.firstBaseUpdate,Le=Y.lastBaseUpdate,Ze=Y.shared.pending;if(Ze!==null){Y.shared.pending=null;var yt=Ze,Rt=yt.next;yt.next=null,Le===null?re=Rt:Le.next=Rt,Le=yt;var Xt=E.alternate;Xt!==null&&(Xt=Xt.updateQueue,Ze=Xt.lastBaseUpdate,Ze!==Le&&(Ze===null?Xt.firstBaseUpdate=Rt:Ze.next=Rt,Xt.lastBaseUpdate=yt))}if(re!==null){var Sn=Y.baseState;Le=0,Xt=Rt=yt=null,Ze=re;do{var fn=Ze.lane,Ln=Ze.eventTime;if((F&fn)===fn){Xt!==null&&(Xt=Xt.next={eventTime:Ln,lane:0,tag:Ze.tag,payload:Ze.payload,callback:Ze.callback,next:null});e:{var $t=E,ss=Ze;switch(fn=T,Ln=L,ss.tag){case 1:if($t=ss.payload,typeof $t=="function"){Sn=$t.call(Ln,Sn,fn);break e}Sn=$t;break e;case 3:$t.flags=$t.flags&-65537|128;case 0:if($t=ss.payload,fn=typeof $t=="function"?$t.call(Ln,Sn,fn):$t,fn==null)break e;Sn=s({},Sn,fn);break e;case 2:No=!0}}Ze.callback!==null&&Ze.lane!==0&&(E.flags|=64,fn=Y.effects,fn===null?Y.effects=[Ze]:fn.push(Ze))}else Ln={eventTime:Ln,lane:fn,tag:Ze.tag,payload:Ze.payload,callback:Ze.callback,next:null},Xt===null?(Rt=Xt=Ln,yt=Sn):Xt=Xt.next=Ln,Le|=fn;if(Ze=Ze.next,Ze===null){if(Ze=Y.shared.pending,Ze===null)break;fn=Ze,Ze=fn.next,fn.next=null,Y.lastBaseUpdate=fn,Y.shared.pending=null}}while(!0);if(Xt===null&&(yt=Sn),Y.baseState=yt,Y.firstBaseUpdate=Rt,Y.lastBaseUpdate=Xt,T=Y.shared.interleaved,T!==null){Y=T;do Le|=Y.lane,Y=Y.next;while(Y!==T)}else re===null&&(Y.shared.lanes=0);Va|=Le,E.lanes=Le,E.memoizedState=Sn}}function A_(E,T,L){if(E=T.effects,T.effects=null,E!==null)for(T=0;T<E.length;T++){var F=E[T],Y=F.callback;if(Y!==null){if(F.callback=null,F=L,typeof Y!="function")throw Error(o(191,Y));Y.call(F)}}}var R_=new r.Component().refs;function Nv(E,T,L,F){T=E.memoizedState,L=L(F,T),L=L==null?T:s({},T,L),E.memoizedState=L,E.lanes===0&&(E.updateQueue.baseState=L)}var i0={isMounted:function(E){return(E=E._reactInternals)?A(E)===E:!1},enqueueSetState:function(E,T,L){E=E._reactInternals;var F=ar(),Y=ha(E),re=Rl(F,Y);re.payload=T,L!=null&&(re.callback=L),Cc(E,re),T=gs(E,Y,F),T!==null&&t0(T,E,Y)},enqueueReplaceState:function(E,T,L){E=E._reactInternals;var F=ar(),Y=ha(E),re=Rl(F,Y);re.tag=1,re.payload=T,L!=null&&(re.callback=L),Cc(E,re),T=gs(E,Y,F),T!==null&&t0(T,E,Y)},enqueueForceUpdate:function(E,T){E=E._reactInternals;var L=ar(),F=ha(E),Y=Rl(L,F);Y.tag=2,T!=null&&(Y.callback=T),Cc(E,Y),T=gs(E,F,L),T!==null&&t0(T,E,F)}};function Lv(E,T,L,F,Y,re,Le){return E=E.stateNode,typeof E.shouldComponentUpdate=="function"?E.shouldComponentUpdate(F,re,Le):T.prototype&&T.prototype.isPureReactComponent?!oa(L,F)||!oa(Y,re):!0}function k_(E,T,L){var F=!1,Y=yn,re=T.contextType;return typeof re=="object"&&re!==null?re=Vs(re):(Y=Zn(T)?Nn:jn.current,F=T.contextTypes,re=(F=F!=null)?en(E,Y):yn),T=new T(L,re),E.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=i0,E.stateNode=T,T._reactInternals=E,F&&(E=E.stateNode,E.__reactInternalMemoizedUnmaskedChildContext=Y,E.__reactInternalMemoizedMaskedChildContext=re),T}function O_(E,T,L,F){E=T.state,typeof T.componentWillReceiveProps=="function"&&T.componentWillReceiveProps(L,F),typeof T.UNSAFE_componentWillReceiveProps=="function"&&T.UNSAFE_componentWillReceiveProps(L,F),T.state!==E&&i0.enqueueReplaceState(T,T.state,null)}function Dv(E,T,L,F){var Y=E.stateNode;Y.props=L,Y.state=E.memoizedState,Y.refs=R_,tf(E);var re=T.contextType;typeof re=="object"&&re!==null?Y.context=Vs(re):(re=Zn(T)?Nn:jn.current,Y.context=en(E,re)),Y.state=E.memoizedState,re=T.getDerivedStateFromProps,typeof re=="function"&&(Nv(E,T,re,L),Y.state=E.memoizedState),typeof T.getDerivedStateFromProps=="function"||typeof Y.getSnapshotBeforeUpdate=="function"||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(T=Y.state,typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount(),T!==Y.state&&i0.enqueueReplaceState(Y,Y.state,null),r0(E,L,Y,F),Y.state=E.memoizedState),typeof Y.componentDidMount=="function"&&(E.flags|=4194308)}var nf=[],Mc=0,s0=null,o0=0,Lo=[],co=0,_u=null,kl=1,Ol="";function Su(E,T){nf[Mc++]=o0,nf[Mc++]=s0,s0=E,o0=T}function N_(E,T,L){Lo[co++]=kl,Lo[co++]=Ol,Lo[co++]=_u,_u=E;var F=kl;E=Ol;var Y=32-Kn(F)-1;F&=~(1<<Y),L+=1;var re=32-Kn(T)+Y;if(30<re){var Le=Y-Y%5;re=(F&(1<<Le)-1).toString(32),F>>=Le,Y-=Le,kl=1<<32-Kn(T)+Y|L<<Y|F,Ol=re+E}else kl=1<<re|L<<Y|F,Ol=E}function Bv(E){E.return!==null&&(Su(E,1),N_(E,1,0))}function Fv(E){for(;E===s0;)s0=nf[--Mc],nf[Mc]=null,o0=nf[--Mc],nf[Mc]=null;for(;E===_u;)_u=Lo[--co],Lo[co]=null,Ol=Lo[--co],Lo[co]=null,kl=Lo[--co],Lo[co]=null}var Ps=null,es=null,qr=!1,rf=!1,Do=null;function Uv(E,T){var L=yo(5,null,null,0);L.elementType="DELETED",L.stateNode=T,L.return=E,T=E.deletions,T===null?(E.deletions=[L],E.flags|=16):T.push(L)}function $v(E,T){switch(E.tag){case 5:return T=hn(T,E.type,E.pendingProps),T!==null?(E.stateNode=T,Ps=E,es=Ur(T),!0):!1;case 6:return T=bn(T,E.pendingProps),T!==null?(E.stateNode=T,Ps=E,es=null,!0):!1;case 13:if(T=Wn(T),T!==null){var L=_u!==null?{id:kl,overflow:Ol}:null;return E.memoizedState={dehydrated:T,treeContext:L,retryLane:1073741824},L=yo(18,null,null,0),L.stateNode=T,L.return=E,E.child=L,Ps=E,es=null,!0}return!1;default:return!1}}function a0(E){return(E.mode&1)!==0&&(E.flags&128)===0}function Ac(E){if(qr){var T=es;if(T){var L=T;if(!$v(E,T)){if(a0(E))throw Error(o(418));T=fr(L);var F=Ps;T&&$v(E,T)?Uv(F,L):(E.flags=E.flags&-4097|2,qr=!1,Ps=E)}}else{if(a0(E))throw Error(o(418));E.flags=E.flags&-4097|2,qr=!1,Ps=E}}}function L_(E){for(E=E.return;E!==null&&E.tag!==5&&E.tag!==3&&E.tag!==13;)E=E.return;Ps=E}function Sh(E){if(!Be||E!==Ps)return!1;if(!qr)return L_(E),qr=!0,!1;if(E.tag!==3&&(E.tag!==5||ve(E.type)&&!pe(E.type,E.memoizedProps))){var T=es;if(T){if(a0(E)){for(E=es;E;)E=fr(E);throw Error(o(418))}for(;T;)Uv(E,T),T=fr(T)}}if(L_(E),E.tag===13){if(!Be)throw Error(o(316));if(E=E.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(o(317));es=At(E)}else es=Ps?fr(E.stateNode):null;return!0}function sf(){Be&&(es=Ps=null,rf=qr=!1)}function l0(E){Do===null?Do=[E]:Do.push(E)}function of(E,T,L){if(E=L.ref,E!==null&&typeof E!="function"&&typeof E!="object"){if(L._owner){if(L=L._owner,L){if(L.tag!==1)throw Error(o(309));var F=L.stateNode}if(!F)throw Error(o(147,E));var Y=F,re=""+E;return T!==null&&T.ref!==null&&typeof T.ref=="function"&&T.ref._stringRef===re?T.ref:(T=function(Le){var Ze=Y.refs;Ze===R_&&(Ze=Y.refs={}),Le===null?delete Ze[re]:Ze[re]=Le},T._stringRef=re,T)}if(typeof E!="string")throw Error(o(284));if(!L._owner)throw Error(o(290,E))}return E}function Rc(E,T){throw E=Object.prototype.toString.call(T),Error(o(31,E==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":E))}function af(E){var T=E._init;return T(E._payload)}function D_(E){function T(ct,nt){if(E){var mt=ct.deletions;mt===null?(ct.deletions=[nt],ct.flags|=16):mt.push(nt)}}function L(ct,nt){if(!E)return null;for(;nt!==null;)T(ct,nt),nt=nt.sibling;return null}function F(ct,nt){for(ct=new Map;nt!==null;)nt.key!==null?ct.set(nt.key,nt):ct.set(nt.index,nt),nt=nt.sibling;return ct}function Y(ct,nt){return ct=Kl(ct,nt),ct.index=0,ct.sibling=null,ct}function re(ct,nt,mt){return ct.index=mt,E?(mt=ct.alternate,mt!==null?(mt=mt.index,mt<nt?(ct.flags|=2,nt):mt):(ct.flags|=2,nt)):(ct.flags|=1048576,nt)}function Le(ct){return E&&ct.alternate===null&&(ct.flags|=2),ct}function Ze(ct,nt,mt,Ft){return nt===null||nt.tag!==6?(nt=L0(mt,ct.mode,Ft),nt.return=ct,nt):(nt=Y(nt,mt),nt.return=ct,nt)}function yt(ct,nt,mt,Ft){var on=mt.type;return on===u?Xt(ct,nt,mt.props.children,Ft,mt.key):nt!==null&&(nt.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===x&&af(on)===nt.type)?(Ft=Y(nt,mt.props),Ft.ref=of(ct,nt,mt),Ft.return=ct,Ft):(Ft=N0(mt.type,mt.key,mt.props,null,ct.mode,Ft),Ft.ref=of(ct,nt,mt),Ft.return=ct,Ft)}function Rt(ct,nt,mt,Ft){return nt===null||nt.tag!==4||nt.stateNode.containerInfo!==mt.containerInfo||nt.stateNode.implementation!==mt.implementation?(nt=D0(mt,ct.mode,Ft),nt.return=ct,nt):(nt=Y(nt,mt.children||[]),nt.return=ct,nt)}function Xt(ct,nt,mt,Ft,on){return nt===null||nt.tag!==7?(nt=ju(mt,ct.mode,Ft,on),nt.return=ct,nt):(nt=Y(nt,mt),nt.return=ct,nt)}function Sn(ct,nt,mt){if(typeof nt=="string"&&nt!==""||typeof nt=="number")return nt=L0(""+nt,ct.mode,mt),nt.return=ct,nt;if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case c:return mt=N0(nt.type,nt.key,nt.props,null,ct.mode,mt),mt.ref=of(ct,null,nt),mt.return=ct,mt;case l:return nt=D0(nt,ct.mode,mt),nt.return=ct,nt;case x:var Ft=nt._init;return Sn(ct,Ft(nt._payload),mt)}if(U(nt)||_(nt))return nt=ju(nt,ct.mode,mt,null),nt.return=ct,nt;Rc(ct,nt)}return null}function fn(ct,nt,mt,Ft){var on=nt!==null?nt.key:null;if(typeof mt=="string"&&mt!==""||typeof mt=="number")return on!==null?null:Ze(ct,nt,""+mt,Ft);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case c:return mt.key===on?yt(ct,nt,mt,Ft):null;case l:return mt.key===on?Rt(ct,nt,mt,Ft):null;case x:return on=mt._init,fn(ct,nt,on(mt._payload),Ft)}if(U(mt)||_(mt))return on!==null?null:Xt(ct,nt,mt,Ft,null);Rc(ct,mt)}return null}function Ln(ct,nt,mt,Ft,on){if(typeof Ft=="string"&&Ft!==""||typeof Ft=="number")return ct=ct.get(mt)||null,Ze(nt,ct,""+Ft,on);if(typeof Ft=="object"&&Ft!==null){switch(Ft.$$typeof){case c:return ct=ct.get(Ft.key===null?mt:Ft.key)||null,yt(nt,ct,Ft,on);case l:return ct=ct.get(Ft.key===null?mt:Ft.key)||null,Rt(nt,ct,Ft,on);case x:var Pn=Ft._init;return Ln(ct,nt,mt,Pn(Ft._payload),on)}if(U(Ft)||_(Ft))return ct=ct.get(mt)||null,Xt(nt,ct,Ft,on,null);Rc(nt,Ft)}return null}function $t(ct,nt,mt,Ft){for(var on=null,Pn=null,En=nt,tr=nt=0,xi=null;En!==null&&tr<mt.length;tr++){En.index>tr?(xi=En,En=null):xi=En.sibling;var Qn=fn(ct,En,mt[tr],Ft);if(Qn===null){En===null&&(En=xi);break}E&&En&&Qn.alternate===null&&T(ct,En),nt=re(Qn,nt,tr),Pn===null?on=Qn:Pn.sibling=Qn,Pn=Qn,En=xi}if(tr===mt.length)return L(ct,En),qr&&Su(ct,tr),on;if(En===null){for(;tr<mt.length;tr++)En=Sn(ct,mt[tr],Ft),En!==null&&(nt=re(En,nt,tr),Pn===null?on=En:Pn.sibling=En,Pn=En);return qr&&Su(ct,tr),on}for(En=F(ct,En);tr<mt.length;tr++)xi=Ln(En,ct,tr,mt[tr],Ft),xi!==null&&(E&&xi.alternate!==null&&En.delete(xi.key===null?tr:xi.key),nt=re(xi,nt,tr),Pn===null?on=xi:Pn.sibling=xi,Pn=xi);return E&&En.forEach(function(Gl){return T(ct,Gl)}),qr&&Su(ct,tr),on}function ss(ct,nt,mt,Ft){var on=_(mt);if(typeof on!="function")throw Error(o(150));if(mt=on.call(mt),mt==null)throw Error(o(151));for(var Pn=on=null,En=nt,tr=nt=0,xi=null,Qn=mt.next();En!==null&&!Qn.done;tr++,Qn=mt.next()){En.index>tr?(xi=En,En=null):xi=En.sibling;var Gl=fn(ct,En,Qn.value,Ft);if(Gl===null){En===null&&(En=xi);break}E&&En&&Gl.alternate===null&&T(ct,En),nt=re(Gl,nt,tr),Pn===null?on=Gl:Pn.sibling=Gl,Pn=Gl,En=xi}if(Qn.done)return L(ct,En),qr&&Su(ct,tr),on;if(En===null){for(;!Qn.done;tr++,Qn=mt.next())Qn=Sn(ct,Qn.value,Ft),Qn!==null&&(nt=re(Qn,nt,tr),Pn===null?on=Qn:Pn.sibling=Qn,Pn=Qn);return qr&&Su(ct,tr),on}for(En=F(ct,En);!Qn.done;tr++,Qn=mt.next())Qn=Ln(En,ct,tr,Qn.value,Ft),Qn!==null&&(E&&Qn.alternate!==null&&En.delete(Qn.key===null?tr:Qn.key),nt=re(Qn,nt,tr),Pn===null?on=Qn:Pn.sibling=Qn,Pn=Qn);return E&&En.forEach(function(yb){return T(ct,yb)}),qr&&Su(ct,tr),on}function vo(ct,nt,mt,Ft){if(typeof mt=="object"&&mt!==null&&mt.type===u&&mt.key===null&&(mt=mt.props.children),typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case c:e:{for(var on=mt.key,Pn=nt;Pn!==null;){if(Pn.key===on){if(on=mt.type,on===u){if(Pn.tag===7){L(ct,Pn.sibling),nt=Y(Pn,mt.props.children),nt.return=ct,ct=nt;break e}}else if(Pn.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===x&&af(on)===Pn.type){L(ct,Pn.sibling),nt=Y(Pn,mt.props),nt.ref=of(ct,Pn,mt),nt.return=ct,ct=nt;break e}L(ct,Pn);break}else T(ct,Pn);Pn=Pn.sibling}mt.type===u?(nt=ju(mt.props.children,ct.mode,Ft,mt.key),nt.return=ct,ct=nt):(Ft=N0(mt.type,mt.key,mt.props,null,ct.mode,Ft),Ft.ref=of(ct,nt,mt),Ft.return=ct,ct=Ft)}return Le(ct);case l:e:{for(Pn=mt.key;nt!==null;){if(nt.key===Pn)if(nt.tag===4&&nt.stateNode.containerInfo===mt.containerInfo&&nt.stateNode.implementation===mt.implementation){L(ct,nt.sibling),nt=Y(nt,mt.children||[]),nt.return=ct,ct=nt;break e}else{L(ct,nt);break}else T(ct,nt);nt=nt.sibling}nt=D0(mt,ct.mode,Ft),nt.return=ct,ct=nt}return Le(ct);case x:return Pn=mt._init,vo(ct,nt,Pn(mt._payload),Ft)}if(U(mt))return $t(ct,nt,mt,Ft);if(_(mt))return ss(ct,nt,mt,Ft);Rc(ct,mt)}return typeof mt=="string"&&mt!==""||typeof mt=="number"?(mt=""+mt,nt!==null&&nt.tag===6?(L(ct,nt.sibling),nt=Y(nt,mt),nt.return=ct,ct=nt):(L(ct,nt),nt=L0(mt,ct.mode,Ft),nt.return=ct,ct=nt),Le(ct)):L(ct,nt)}return vo}var Nl=D_(!0),B_=D_(!1),lf={},Ws=an(lf),Eu=an(lf),Tu=an(lf);function aa(E){if(E===lf)throw Error(o(174));return E}function c0(E,T){rn(Tu,T),rn(Eu,E),rn(Ws,lf),E=K(T),Ot(Ws),rn(Ws,E)}function cf(){Ot(Ws),Ot(Eu),Ot(Tu)}function F_(E){var T=aa(Tu.current),L=aa(Ws.current);T=V(L,E.type,T),L!==T&&(rn(Eu,E),rn(Ws,T))}function zv(E){Eu.current===E&&(Ot(Ws),Ot(Eu))}var Jr=an(0);function u0(E){for(var T=E;T!==null;){if(T.tag===13){var L=T.memoizedState;if(L!==null&&(L=L.dehydrated,L===null||Un(L)||Jn(L)))return T}else if(T.tag===19&&T.memoizedProps.revealOrder!==void 0){if((T.flags&128)!==0)return T}else if(T.child!==null){T.child.return=T,T=T.child;continue}if(T===E)break;for(;T.sibling===null;){if(T.return===null||T.return===E)return null;T=T.return}T.sibling.return=T.return,T=T.sibling}return null}var uo=[];function Iu(){for(var E=0;E<uo.length;E++){var T=uo[E];ye?T._workInProgressVersionPrimary=null:T._workInProgressVersionSecondary=null}uo.length=0}var Eh=a.ReactCurrentDispatcher,fo=a.ReactCurrentBatchConfig,Pu=0,Qr=null,$i=null,zi=null,d0=!1,$a=!1,Cu=0,Th=0;function Hi(){throw Error(o(321))}function f0(E,T){if(T===null)return!1;for(var L=0;L<T.length&&L<E.length;L++)if(!Ts(E[L],T[L]))return!1;return!0}function uf(E,T,L,F,Y,re){if(Pu=re,Qr=T,T.memoizedState=null,T.updateQueue=null,T.lanes=0,Eh.current=E===null||E.memoizedState===null?Kv:Gv,E=L(F,Y),$a){re=0;do{if($a=!1,Cu=0,25<=re)throw Error(o(301));re+=1,zi=$i=null,T.updateQueue=null,Eh.current=Xv,E=L(F,Y)}while($a)}if(Eh.current=pf,T=$i!==null&&$i.next!==null,Pu=0,zi=$i=Qr=null,d0=!1,T)throw Error(o(300));return E}function kc(){var E=Cu!==0;return Cu=0,E}function la(){var E={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zi===null?Qr.memoizedState=zi=E:zi=zi.next=E,zi}function ca(){if($i===null){var E=Qr.alternate;E=E!==null?E.memoizedState:null}else E=$i.next;var T=zi===null?Qr.memoizedState:zi.next;if(T!==null)zi=T,$i=E;else{if(E===null)throw Error(o(310));$i=E,E={memoizedState:$i.memoizedState,baseState:$i.baseState,baseQueue:$i.baseQueue,queue:$i.queue,next:null},zi===null?Qr.memoizedState=zi=E:zi=zi.next=E}return zi}function za(E,T){return typeof T=="function"?T(E):T}function Ih(E){var T=ca(),L=T.queue;if(L===null)throw Error(o(311));L.lastRenderedReducer=E;var F=$i,Y=F.baseQueue,re=L.pending;if(re!==null){if(Y!==null){var Le=Y.next;Y.next=re.next,re.next=Le}F.baseQueue=Y=re,L.pending=null}if(Y!==null){re=Y.next,F=F.baseState;var Ze=Le=null,yt=null,Rt=re;do{var Xt=Rt.lane;if((Pu&Xt)===Xt)yt!==null&&(yt=yt.next={lane:0,action:Rt.action,hasEagerState:Rt.hasEagerState,eagerState:Rt.eagerState,next:null}),F=Rt.hasEagerState?Rt.eagerState:E(F,Rt.action);else{var Sn={lane:Xt,action:Rt.action,hasEagerState:Rt.hasEagerState,eagerState:Rt.eagerState,next:null};yt===null?(Ze=yt=Sn,Le=F):yt=yt.next=Sn,Qr.lanes|=Xt,Va|=Xt}Rt=Rt.next}while(Rt!==null&&Rt!==re);yt===null?Le=F:yt.next=Ze,Ts(F,T.memoizedState)||(Vi=!0),T.memoizedState=F,T.baseState=Le,T.baseQueue=yt,L.lastRenderedState=F}if(E=L.interleaved,E!==null){Y=E;do re=Y.lane,Qr.lanes|=re,Va|=re,Y=Y.next;while(Y!==E)}else Y===null&&(L.lanes=0);return[T.memoizedState,L.dispatch]}function Ph(E){var T=ca(),L=T.queue;if(L===null)throw Error(o(311));L.lastRenderedReducer=E;var F=L.dispatch,Y=L.pending,re=T.memoizedState;if(Y!==null){L.pending=null;var Le=Y=Y.next;do re=E(re,Le.action),Le=Le.next;while(Le!==Y);Ts(re,T.memoizedState)||(Vi=!0),T.memoizedState=re,T.baseQueue===null&&(T.baseState=re),L.lastRenderedState=re}return[re,F]}function Hv(){}function Vv(E,T){var L=Qr,F=ca(),Y=T(),re=!Ts(F.memoizedState,Y);if(re&&(F.memoizedState=Y,Vi=!0),F=F.queue,df(Ll.bind(null,L,F,E),[E]),F.getSnapshot!==T||re||zi!==null&&zi.memoizedState.tag&1){if(L.flags|=2048,Mh(9,jv.bind(null,L,F,Y,T),void 0,null),fi===null)throw Error(o(349));(Pu&30)!==0||Wv(L,T,Y)}return Y}function Wv(E,T,L){E.flags|=16384,E={getSnapshot:T,value:L},T=Qr.updateQueue,T===null?(T={lastEffect:null,stores:null},Qr.updateQueue=T,T.stores=[E]):(L=T.stores,L===null?T.stores=[E]:L.push(E))}function jv(E,T,L,F){T.value=L,T.getSnapshot=F,h0(T)&&gs(E,1,-1)}function Ll(E,T,L){return L(function(){h0(T)&&gs(E,1,-1)})}function h0(E){var T=E.getSnapshot;E=E.value;try{var L=T();return!Ts(E,L)}catch{return!0}}function Ch(E){var T=la();return typeof E=="function"&&(E=E()),T.memoizedState=T.baseState=E,E={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:za,lastRenderedState:E},T.queue=E,E=E.dispatch=eC.bind(null,Qr,E),[T.memoizedState,E]}function Mh(E,T,L,F){return E={tag:E,create:T,destroy:L,deps:F,next:null},T=Qr.updateQueue,T===null?(T={lastEffect:null,stores:null},Qr.updateQueue=T,T.lastEffect=E.next=E):(L=T.lastEffect,L===null?T.lastEffect=E.next=E:(F=L.next,L.next=E,E.next=F,T.lastEffect=E)),E}function U_(){return ca().memoizedState}function Oc(E,T,L,F){var Y=la();Qr.flags|=E,Y.memoizedState=Mh(1|T,L,void 0,F===void 0?null:F)}function p0(E,T,L,F){var Y=ca();F=F===void 0?null:F;var re=void 0;if($i!==null){var Le=$i.memoizedState;if(re=Le.destroy,F!==null&&f0(F,Le.deps)){Y.memoizedState=Mh(T,L,re,F);return}}Qr.flags|=E,Y.memoizedState=Mh(1|T,L,re,F)}function m0(E,T){return Oc(8390656,8,E,T)}function df(E,T){return p0(2048,8,E,T)}function kr(E,T){return p0(4,2,E,T)}function g0(E,T){return p0(4,4,E,T)}function Ah(E,T){if(typeof T=="function")return E=E(),T(E),function(){T(null)};if(T!=null)return E=E(),T.current=E,function(){T.current=null}}function ff(E,T,L){return L=L!=null?L.concat([E]):null,p0(4,4,Ah.bind(null,T,E),L)}function y0(){}function v0(E,T){var L=ca();T=T===void 0?null:T;var F=L.memoizedState;return F!==null&&T!==null&&f0(T,F[1])?F[0]:(L.memoizedState=[E,T],E)}function hf(E,T){var L=ca();T=T===void 0?null:T;var F=L.memoizedState;return F!==null&&T!==null&&f0(T,F[1])?F[0]:(E=E(),L.memoizedState=[E,T],E)}function b0(E,T){var L=zn;zn=L!==0&&4>L?L:4,E(!0);var F=fo.transition;fo.transition={};try{E(!1),T()}finally{zn=L,fo.transition=F}}function Mu(){return ca().memoizedState}function $_(E,T,L){var F=ha(E);L={lane:F,action:L,hasEagerState:!1,eagerState:null,next:null},z_(E)?qv(T,L):(Rh(E,T,L),L=ar(),E=gs(E,F,L),E!==null&&kh(E,T,F))}function eC(E,T,L){var F=ha(E),Y={lane:F,action:L,hasEagerState:!1,eagerState:null,next:null};if(z_(E))qv(T,Y);else{Rh(E,T,Y);var re=E.alternate;if(E.lanes===0&&(re===null||re.lanes===0)&&(re=T.lastRenderedReducer,re!==null))try{var Le=T.lastRenderedState,Ze=re(Le,L);if(Y.hasEagerState=!0,Y.eagerState=Ze,Ts(Ze,Le))return}catch{}finally{}L=ar(),E=gs(E,F,L),E!==null&&kh(E,T,F)}}function z_(E){var T=E.alternate;return E===Qr||T!==null&&T===Qr}function qv(E,T){$a=d0=!0;var L=E.pending;L===null?T.next=T:(T.next=L.next,L.next=T),E.pending=T}function Rh(E,T,L){fi!==null&&(E.mode&1)!==0&&(An&2)===0?(E=T.interleaved,E===null?(L.next=L,Oo===null?Oo=[T]:Oo.push(T)):(L.next=E.next,E.next=L),T.interleaved=L):(E=T.pending,E===null?L.next=L:(L.next=E.next,E.next=L),T.pending=L)}function kh(E,T,L){if((L&4194240)!==0){var F=T.lanes;F&=E.pendingLanes,L|=F,T.lanes=L,Fa(E,L)}}var pf={readContext:Vs,useCallback:Hi,useContext:Hi,useEffect:Hi,useImperativeHandle:Hi,useInsertionEffect:Hi,useLayoutEffect:Hi,useMemo:Hi,useReducer:Hi,useRef:Hi,useState:Hi,useDebugValue:Hi,useDeferredValue:Hi,useTransition:Hi,useMutableSource:Hi,useSyncExternalStore:Hi,useId:Hi,unstable_isNewReconciler:!1},Kv={readContext:Vs,useCallback:function(E,T){return la().memoizedState=[E,T===void 0?null:T],E},useContext:Vs,useEffect:m0,useImperativeHandle:function(E,T,L){return L=L!=null?L.concat([E]):null,Oc(4194308,4,Ah.bind(null,T,E),L)},useLayoutEffect:function(E,T){return Oc(4194308,4,E,T)},useInsertionEffect:function(E,T){return Oc(4,2,E,T)},useMemo:function(E,T){var L=la();return T=T===void 0?null:T,E=E(),L.memoizedState=[E,T],E},useReducer:function(E,T,L){var F=la();return T=L!==void 0?L(T):T,F.memoizedState=F.baseState=T,E={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:E,lastRenderedState:T},F.queue=E,E=E.dispatch=$_.bind(null,Qr,E),[F.memoizedState,E]},useRef:function(E){var T=la();return E={current:E},T.memoizedState=E},useState:Ch,useDebugValue:y0,useDeferredValue:function(E){var T=Ch(E),L=T[0],F=T[1];return m0(function(){var Y=fo.transition;fo.transition={};try{F(E)}finally{fo.transition=Y}},[E]),L},useTransition:function(){var E=Ch(!1),T=E[0];return E=b0.bind(null,E[1]),la().memoizedState=E,[T,E]},useMutableSource:function(){},useSyncExternalStore:function(E,T,L){var F=Qr,Y=la();if(qr){if(L===void 0)throw Error(o(407));L=L()}else{if(L=T(),fi===null)throw Error(o(349));(Pu&30)!==0||Wv(F,T,L)}Y.memoizedState=L;var re={value:L,getSnapshot:T};return Y.queue=re,m0(Ll.bind(null,F,re,E),[E]),F.flags|=2048,Mh(9,jv.bind(null,F,re,L,T),void 0,null),L},useId:function(){var E=la(),T=fi.identifierPrefix;if(qr){var L=Ol,F=kl;L=(F&~(1<<32-Kn(F)-1)).toString(32)+L,T=":"+T+"R"+L,L=Cu++,0<L&&(T+="H"+L.toString(32)),T+=":"}else L=Th++,T=":"+T+"r"+L.toString(32)+":";return E.memoizedState=T},unstable_isNewReconciler:!1},Gv={readContext:Vs,useCallback:v0,useContext:Vs,useEffect:df,useImperativeHandle:ff,useInsertionEffect:kr,useLayoutEffect:g0,useMemo:hf,useReducer:Ih,useRef:U_,useState:function(){return Ih(za)},useDebugValue:y0,useDeferredValue:function(E){var T=Ih(za),L=T[0],F=T[1];return df(function(){var Y=fo.transition;fo.transition={};try{F(E)}finally{fo.transition=Y}},[E]),L},useTransition:function(){var E=Ih(za)[0],T=ca().memoizedState;return[E,T]},useMutableSource:Hv,useSyncExternalStore:Vv,useId:Mu,unstable_isNewReconciler:!1},Xv={readContext:Vs,useCallback:v0,useContext:Vs,useEffect:df,useImperativeHandle:ff,useInsertionEffect:kr,useLayoutEffect:g0,useMemo:hf,useReducer:Ph,useRef:U_,useState:function(){return Ph(za)},useDebugValue:y0,useDeferredValue:function(E){var T=Ph(za),L=T[0],F=T[1];return df(function(){var Y=fo.transition;fo.transition={};try{F(E)}finally{fo.transition=Y}},[E]),L},useTransition:function(){var E=Ph(za)[0],T=ca().memoizedState;return[E,T]},useMutableSource:Hv,useSyncExternalStore:Vv,useId:Mu,unstable_isNewReconciler:!1};function Yv(E,T){try{var L="",F=T;do L+=kv(F),F=F.return;while(F);var Y=L}catch(re){Y=`
Error generating stack: `+re.message+`
`+re.stack}return{value:E,source:T,stack:Y}}function x0(E,T){try{console.error(T.value)}catch(L){setTimeout(function(){throw L})}}var tC=typeof WeakMap=="function"?WeakMap:Map;function H_(E,T,L){L=Rl(-1,L),L.tag=3,L.payload={element:null};var F=T.value;return L.callback=function(){xf||(xf=!0,zr=F),x0(E,T)},L}function w0(E,T,L){L=Rl(-1,L),L.tag=3;var F=E.type.getDerivedStateFromError;if(typeof F=="function"){var Y=T.value;L.payload=function(){return F(Y)},L.callback=function(){x0(E,T)}}var re=E.stateNode;return re!==null&&typeof re.componentDidCatch=="function"&&(L.callback=function(){x0(E,T),typeof F!="function"&&(fa===null?fa=new Set([this]):fa.add(this));var Le=T.stack;this.componentDidCatch(T.value,{componentStack:Le!==null?Le:""})}),L}function Dl(E,T,L){var F=E.pingCache;if(F===null){F=E.pingCache=new tC;var Y=new Set;F.set(T,Y)}else Y=F.get(T),Y===void 0&&(Y=new Set,F.set(T,Y));Y.has(L)||(Y.add(L),E=pb.bind(null,E,T,L),T.then(E,E))}function Zv(E){do{var T;if((T=E.tag===13)&&(T=E.memoizedState,T=T!==null?T.dehydrated!==null:!0),T)return E;E=E.return}while(E!==null);return null}function Au(E,T,L,F,Y){return(E.mode&1)===0?(E===T?E.flags|=65536:(E.flags|=128,L.flags|=131072,L.flags&=-52805,L.tag===1&&(L.alternate===null?L.tag=17:(T=Rl(-1,1),T.tag=2,Cc(L,T))),L.lanes|=1),E):(E.flags|=65536,E.lanes=Y,E)}function Mi(E){E.flags|=4}function mf(E,T){if(E!==null&&E.child===T.child)return!0;if((T.flags&16)!==0)return!1;for(E=T.child;E!==null;){if((E.flags&12854)!==0||(E.subtreeFlags&12854)!==0)return!1;E=E.sibling}return!0}var ho,Ru,_0,S0;if(Ae)ho=function(E,T){for(var L=T.child;L!==null;){if(L.tag===5||L.tag===6)se(E,L.stateNode);else if(L.tag!==4&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===T)break;for(;L.sibling===null;){if(L.return===null||L.return===T)return;L=L.return}L.sibling.return=L.return,L=L.sibling}},Ru=function(){},_0=function(E,T,L,F,Y){if(E=E.memoizedProps,E!==F){var re=T.stateNode,Le=aa(Ws.current);L=ie(re,L,E,F,Y,Le),(T.updateQueue=L)&&Mi(T)}},S0=function(E,T,L,F){L!==F&&Mi(T)};else if(Oe){ho=function(E,T,L,F){for(var Y=T.child;Y!==null;){if(Y.tag===5){var re=Y.stateNode;L&&F&&(re=Bt(re,Y.type,Y.memoizedProps,Y)),se(E,re)}else if(Y.tag===6)re=Y.stateNode,L&&F&&(re=_n(re,Y.memoizedProps,Y)),se(E,re);else if(Y.tag!==4){if(Y.tag===22&&Y.memoizedState!==null)re=Y.child,re!==null&&(re.return=Y),ho(E,Y,!0,!0);else if(Y.child!==null){Y.child.return=Y,Y=Y.child;continue}}if(Y===T)break;for(;Y.sibling===null;){if(Y.return===null||Y.return===T)return;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}};var Nc=function(E,T,L,F){for(var Y=T.child;Y!==null;){if(Y.tag===5){var re=Y.stateNode;L&&F&&(re=Bt(re,Y.type,Y.memoizedProps,Y)),Tt(E,re)}else if(Y.tag===6)re=Y.stateNode,L&&F&&(re=_n(re,Y.memoizedProps,Y)),Tt(E,re);else if(Y.tag!==4){if(Y.tag===22&&Y.memoizedState!==null)re=Y.child,re!==null&&(re.return=Y),Nc(E,Y,!0,!0);else if(Y.child!==null){Y.child.return=Y,Y=Y.child;continue}}if(Y===T)break;for(;Y.sibling===null;){if(Y.return===null||Y.return===T)return;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}};Ru=function(E,T){var L=T.stateNode;if(!mf(E,T)){E=L.containerInfo;var F=gt(E);Nc(F,T,!1,!1),L.pendingChildren=F,Mi(T),Kt(E,F)}},_0=function(E,T,L,F,Y){var re=E.stateNode,Le=E.memoizedProps;if((E=mf(E,T))&&Le===F)T.stateNode=re;else{var Ze=T.stateNode,yt=aa(Ws.current),Rt=null;Le!==F&&(Rt=ie(Ze,L,Le,F,Y,yt)),E&&Rt===null?T.stateNode=re:(re=ut(re,Rt,L,Le,F,T,E,Ze),Z(re,L,F,Y,yt)&&Mi(T),T.stateNode=re,E?Mi(T):ho(re,T,!1,!1))}},S0=function(E,T,L,F){L!==F?(E=aa(Tu.current),L=aa(Ws.current),T.stateNode=ue(F,E,L,T),Mi(T)):T.stateNode=E.stateNode}}else Ru=function(){},_0=function(){},S0=function(){};function Bl(E,T){if(!qr)switch(E.tailMode){case"hidden":T=E.tail;for(var L=null;T!==null;)T.alternate!==null&&(L=T),T=T.sibling;L===null?E.tail=null:L.sibling=null;break;case"collapsed":L=E.tail;for(var F=null;L!==null;)L.alternate!==null&&(F=L),L=L.sibling;F===null?T||E.tail===null?E.tail=null:E.tail.sibling=null:F.sibling=null}}function di(E){var T=E.alternate!==null&&E.alternate.child===E.child,L=0,F=0;if(T)for(var Y=E.child;Y!==null;)L|=Y.lanes|Y.childLanes,F|=Y.subtreeFlags&14680064,F|=Y.flags&14680064,Y.return=E,Y=Y.sibling;else for(Y=E.child;Y!==null;)L|=Y.lanes|Y.childLanes,F|=Y.subtreeFlags,F|=Y.flags,Y.return=E,Y=Y.sibling;return E.subtreeFlags|=F,E.childLanes=L,T}function E0(E,T,L){var F=T.pendingProps;switch(Fv(T),T.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return di(T),null;case 1:return Zn(T.type)&&$n(),di(T),null;case 3:return F=T.stateNode,cf(),Ot(qn),Ot(jn),Iu(),F.pendingContext&&(F.context=F.pendingContext,F.pendingContext=null),(E===null||E.child===null)&&(Sh(T)?Mi(T):E===null||E.memoizedState.isDehydrated&&(T.flags&256)===0||(T.flags|=1024,Do!==null&&(jh(Do),Do=null))),Ru(E,T),di(T),null;case 5:zv(T),L=aa(Tu.current);var Y=T.type;if(E!==null&&T.stateNode!=null)_0(E,T,Y,F,L),E.ref!==T.ref&&(T.flags|=512,T.flags|=2097152);else{if(!F){if(T.stateNode===null)throw Error(o(166));return di(T),null}if(E=aa(Ws.current),Sh(T)){if(!Be)throw Error(o(175));E=Pi(T.stateNode,T.type,T.memoizedProps,L,E,T,!rf),T.updateQueue=E,E!==null&&Mi(T)}else{var re=Q(Y,F,L,E,T);ho(re,T,!1,!1),T.stateNode=re,Z(re,Y,F,L,E)&&Mi(T)}T.ref!==null&&(T.flags|=512,T.flags|=2097152)}return di(T),null;case 6:if(E&&T.stateNode!=null)S0(E,T,E.memoizedProps,F);else{if(typeof F!="string"&&T.stateNode===null)throw Error(o(166));if(E=aa(Tu.current),L=aa(Ws.current),Sh(T)){if(!Be)throw Error(o(176));if(E=T.stateNode,F=T.memoizedProps,(L=at(E,F,T,!rf))&&(Y=Ps,Y!==null))switch(re=(Y.mode&1)!==0,Y.tag){case 3:tt(Y.stateNode.containerInfo,E,F,re);break;case 5:ft(Y.type,Y.memoizedProps,Y.stateNode,E,F,re)}L&&Mi(T)}else T.stateNode=ue(F,E,L,T)}return di(T),null;case 13:if(Ot(Jr),F=T.memoizedState,qr&&es!==null&&(T.mode&1)!==0&&(T.flags&128)===0){for(E=es;E;)E=fr(E);return sf(),T.flags|=98560,T}if(F!==null&&F.dehydrated!==null){if(F=Sh(T),E===null){if(!F)throw Error(o(318));if(!Be)throw Error(o(344));if(E=T.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(o(317));Je(E,T)}else sf(),(T.flags&128)===0&&(T.memoizedState=null),T.flags|=4;return di(T),null}return Do!==null&&(jh(Do),Do=null),(T.flags&128)!==0?(T.lanes=L,T):(F=F!==null,L=!1,E===null?Sh(T):L=E.memoizedState!==null,F&&!L&&(T.child.flags|=8192,(T.mode&1)!==0&&(E===null||(Jr.current&1)!==0?ii===0&&(ii=3):R0())),T.updateQueue!==null&&(T.flags|=4),di(T),null);case 4:return cf(),Ru(E,T),E===null&&Ge(T.stateNode.containerInfo),di(T),null;case 10:return _h(T.type._context),di(T),null;case 17:return Zn(T.type)&&$n(),di(T),null;case 19:if(Ot(Jr),Y=T.memoizedState,Y===null)return di(T),null;if(F=(T.flags&128)!==0,re=Y.rendering,re===null)if(F)Bl(Y,!1);else{if(ii!==0||E!==null&&(E.flags&128)!==0)for(E=T.child;E!==null;){if(re=u0(E),re!==null){for(T.flags|=128,Bl(Y,!1),E=re.updateQueue,E!==null&&(T.updateQueue=E,T.flags|=4),T.subtreeFlags=0,E=L,F=T.child;F!==null;)L=F,Y=E,L.flags&=14680066,re=L.alternate,re===null?(L.childLanes=0,L.lanes=Y,L.child=null,L.subtreeFlags=0,L.memoizedProps=null,L.memoizedState=null,L.updateQueue=null,L.dependencies=null,L.stateNode=null):(L.childLanes=re.childLanes,L.lanes=re.lanes,L.child=re.child,L.subtreeFlags=0,L.deletions=null,L.memoizedProps=re.memoizedProps,L.memoizedState=re.memoizedState,L.updateQueue=re.updateQueue,L.type=re.type,Y=re.dependencies,L.dependencies=Y===null?null:{lanes:Y.lanes,firstContext:Y.firstContext}),F=F.sibling;return rn(Jr,Jr.current&1|2),T.child}E=E.sibling}Y.tail!==null&&Ci()>Bc&&(T.flags|=128,F=!0,Bl(Y,!1),T.lanes=4194304)}else{if(!F)if(E=u0(re),E!==null){if(T.flags|=128,F=!0,E=E.updateQueue,E!==null&&(T.updateQueue=E,T.flags|=4),Bl(Y,!0),Y.tail===null&&Y.tailMode==="hidden"&&!re.alternate&&!qr)return di(T),null}else 2*Ci()-Y.renderingStartTime>Bc&&L!==1073741824&&(T.flags|=128,F=!0,Bl(Y,!1),T.lanes=4194304);Y.isBackwards?(re.sibling=T.child,T.child=re):(E=Y.last,E!==null?E.sibling=re:T.child=re,Y.last=re)}return Y.tail!==null?(T=Y.tail,Y.rendering=T,Y.tail=T.sibling,Y.renderingStartTime=Ci(),T.sibling=null,E=Jr.current,rn(Jr,F?E&1|2:E&1),T):(di(T),null);case 22:case 23:return qh(),F=T.memoizedState!==null,E!==null&&E.memoizedState!==null!==F&&(T.flags|=8192),F&&(T.mode&1)!==0?(ms&1073741824)!==0&&(di(T),Ae&&T.subtreeFlags&6&&(T.flags|=8192)):di(T),null;case 24:return null;case 25:return null}throw Error(o(156,T.tag))}var Jv=a.ReactCurrentOwner,Vi=!1;function ri(E,T,L,F){T.child=E===null?B_(T,null,L,F):Nl(T,E.child,L,F)}function Or(E,T,L,F,Y){L=L.render;var re=T.ref;return ef(T,Y),F=uf(E,T,L,F,re,Y),L=kc(),E!==null&&!Vi?(T.updateQueue=E.updateQueue,T.flags&=-2053,E.lanes&=~Y,js(E,T,Y)):(qr&&L&&Bv(T),T.flags|=1,ri(E,T,F,Y),T.child)}function Pr(E,T,L,F,Y){if(E===null){var re=L.type;return typeof re=="function"&&!O0(re)&&re.defaultProps===void 0&&L.compare===null&&L.defaultProps===void 0?(T.tag=15,T.type=re,Fl(E,T,re,F,Y)):(E=N0(L.type,null,F,T,T.mode,Y),E.ref=T.ref,E.return=T,T.child=E)}if(re=E.child,(E.lanes&Y)===0){var Le=re.memoizedProps;if(L=L.compare,L=L!==null?L:oa,L(Le,F)&&E.ref===T.ref)return js(E,T,Y)}return T.flags|=1,E=Kl(re,F),E.ref=T.ref,E.return=T,T.child=E}function Fl(E,T,L,F,Y){if(E!==null&&oa(E.memoizedProps,F)&&E.ref===T.ref)if(Vi=!1,(E.lanes&Y)!==0)(E.flags&131072)!==0&&(Vi=!0);else return T.lanes=E.lanes,js(E,T,Y);return Ul(E,T,L,F,Y)}function ts(E,T,L){var F=T.pendingProps,Y=F.children,re=E!==null?E.memoizedState:null;if(F.mode==="hidden")if((T.mode&1)===0)T.memoizedState={baseLanes:0,cachePool:null},rn($u,ms),ms|=L;else if((L&1073741824)!==0)T.memoizedState={baseLanes:0,cachePool:null},F=re!==null?re.baseLanes:L,rn($u,ms),ms|=F;else return E=re!==null?re.baseLanes|L:L,T.lanes=T.childLanes=1073741824,T.memoizedState={baseLanes:E,cachePool:null},T.updateQueue=null,rn($u,ms),ms|=E,null;else re!==null?(F=re.baseLanes|L,T.memoizedState=null):F=L,rn($u,ms),ms|=F;return ri(E,T,Y,L),T.child}function Cs(E,T){var L=T.ref;(E===null&&L!==null||E!==null&&E.ref!==L)&&(T.flags|=512,T.flags|=2097152)}function Ul(E,T,L,F,Y){var re=Zn(L)?Nn:jn.current;return re=en(T,re),ef(T,Y),L=uf(E,T,L,F,re,Y),F=kc(),E!==null&&!Vi?(T.updateQueue=E.updateQueue,T.flags&=-2053,E.lanes&=~Y,js(E,T,Y)):(qr&&F&&Bv(T),T.flags|=1,ri(E,T,L,Y),T.child)}function ku(E,T,L,F,Y){if(Zn(L)){var re=!0;Fi(T)}else re=!1;if(ef(T,Y),T.stateNode===null)E!==null&&(E.alternate=null,T.alternate=null,T.flags|=2),k_(T,L,F),Dv(T,L,F,Y),F=!0;else if(E===null){var Le=T.stateNode,Ze=T.memoizedProps;Le.props=Ze;var yt=Le.context,Rt=L.contextType;typeof Rt=="object"&&Rt!==null?Rt=Vs(Rt):(Rt=Zn(L)?Nn:jn.current,Rt=en(T,Rt));var Xt=L.getDerivedStateFromProps,Sn=typeof Xt=="function"||typeof Le.getSnapshotBeforeUpdate=="function";Sn||typeof Le.UNSAFE_componentWillReceiveProps!="function"&&typeof Le.componentWillReceiveProps!="function"||(Ze!==F||yt!==Rt)&&O_(T,Le,F,Rt),No=!1;var fn=T.memoizedState;Le.state=fn,r0(T,F,Le,Y),yt=T.memoizedState,Ze!==F||fn!==yt||qn.current||No?(typeof Xt=="function"&&(Nv(T,L,Xt,F),yt=T.memoizedState),(Ze=No||Lv(T,L,Ze,F,fn,yt,Rt))?(Sn||typeof Le.UNSAFE_componentWillMount!="function"&&typeof Le.componentWillMount!="function"||(typeof Le.componentWillMount=="function"&&Le.componentWillMount(),typeof Le.UNSAFE_componentWillMount=="function"&&Le.UNSAFE_componentWillMount()),typeof Le.componentDidMount=="function"&&(T.flags|=4194308)):(typeof Le.componentDidMount=="function"&&(T.flags|=4194308),T.memoizedProps=F,T.memoizedState=yt),Le.props=F,Le.state=yt,Le.context=Rt,F=Ze):(typeof Le.componentDidMount=="function"&&(T.flags|=4194308),F=!1)}else{Le=T.stateNode,Ov(E,T),Ze=T.memoizedProps,Rt=T.type===T.elementType?Ze:Hs(T.type,Ze),Le.props=Rt,Sn=T.pendingProps,fn=Le.context,yt=L.contextType,typeof yt=="object"&&yt!==null?yt=Vs(yt):(yt=Zn(L)?Nn:jn.current,yt=en(T,yt));var Ln=L.getDerivedStateFromProps;(Xt=typeof Ln=="function"||typeof Le.getSnapshotBeforeUpdate=="function")||typeof Le.UNSAFE_componentWillReceiveProps!="function"&&typeof Le.componentWillReceiveProps!="function"||(Ze!==Sn||fn!==yt)&&O_(T,Le,F,yt),No=!1,fn=T.memoizedState,Le.state=fn,r0(T,F,Le,Y);var $t=T.memoizedState;Ze!==Sn||fn!==$t||qn.current||No?(typeof Ln=="function"&&(Nv(T,L,Ln,F),$t=T.memoizedState),(Rt=No||Lv(T,L,Rt,F,fn,$t,yt)||!1)?(Xt||typeof Le.UNSAFE_componentWillUpdate!="function"&&typeof Le.componentWillUpdate!="function"||(typeof Le.componentWillUpdate=="function"&&Le.componentWillUpdate(F,$t,yt),typeof Le.UNSAFE_componentWillUpdate=="function"&&Le.UNSAFE_componentWillUpdate(F,$t,yt)),typeof Le.componentDidUpdate=="function"&&(T.flags|=4),typeof Le.getSnapshotBeforeUpdate=="function"&&(T.flags|=1024)):(typeof Le.componentDidUpdate!="function"||Ze===E.memoizedProps&&fn===E.memoizedState||(T.flags|=4),typeof Le.getSnapshotBeforeUpdate!="function"||Ze===E.memoizedProps&&fn===E.memoizedState||(T.flags|=1024),T.memoizedProps=F,T.memoizedState=$t),Le.props=F,Le.state=$t,Le.context=yt,F=Rt):(typeof Le.componentDidUpdate!="function"||Ze===E.memoizedProps&&fn===E.memoizedState||(T.flags|=4),typeof Le.getSnapshotBeforeUpdate!="function"||Ze===E.memoizedProps&&fn===E.memoizedState||(T.flags|=1024),F=!1)}return ps(E,T,L,F,re,Y)}function ps(E,T,L,F,Y,re){Cs(E,T);var Le=(T.flags&128)!==0;if(!F&&!Le)return Y&&Ba(T,L,!1),js(E,T,re);F=T.stateNode,Jv.current=T;var Ze=Le&&typeof L.getDerivedStateFromError!="function"?null:F.render();return T.flags|=1,E!==null&&Le?(T.child=Nl(T,E.child,null,re),T.child=Nl(T,null,Ze,re)):ri(E,T,Ze,re),T.memoizedState=F.state,Y&&Ba(T,L,!0),T.child}function Oh(E){var T=E.stateNode;T.pendingContext?Ji(E,T.pendingContext,T.pendingContext!==T.context):T.context&&Ji(E,T.context,!1),c0(E,T.containerInfo)}function Qv(E,T,L,F,Y){return sf(),l0(Y),T.flags|=256,ri(E,T,L,F),T.child}var Nh={dehydrated:null,treeContext:null,retryLane:0};function Ou(E){return{baseLanes:E,cachePool:null}}function eb(E,T,L){var F=T.pendingProps,Y=Jr.current,re=!1,Le=(T.flags&128)!==0,Ze;if((Ze=Le)||(Ze=E!==null&&E.memoizedState===null?!1:(Y&2)!==0),Ze?(re=!0,T.flags&=-129):(E===null||E.memoizedState!==null)&&(Y|=1),rn(Jr,Y&1),E===null)return Ac(T),E=T.memoizedState,E!==null&&(E=E.dehydrated,E!==null)?((T.mode&1)===0?T.lanes=1:Jn(E)?T.lanes=8:T.lanes=1073741824,null):(Y=F.children,E=F.fallback,re?(F=T.mode,re=T.child,Y={mode:"hidden",children:Y},(F&1)===0&&re!==null?(re.childLanes=0,re.pendingProps=Y):re=Xh(Y,F,0,null),E=ju(E,F,L,null),re.return=T,E.return=T,re.sibling=E,T.child=re,T.child.memoizedState=Ou(L),T.memoizedState=Nh,E):ua(T,Y));if(Y=E.memoizedState,Y!==null){if(Ze=Y.dehydrated,Ze!==null){if(Le)return T.flags&256?(T.flags&=-257,Dh(E,T,L,Error(o(422)))):T.memoizedState!==null?(T.child=E.child,T.flags|=128,null):(re=F.fallback,Y=T.mode,F=Xh({mode:"visible",children:F.children},Y,0,null),re=ju(re,Y,L,null),re.flags|=2,F.return=T,re.return=T,F.sibling=re,T.child=F,(T.mode&1)!==0&&Nl(T,E.child,null,L),T.child.memoizedState=Ou(L),T.memoizedState=Nh,re);if((T.mode&1)===0)T=Dh(E,T,L,null);else if(Jn(Ze))T=Dh(E,T,L,Error(o(419)));else if(F=(L&E.childLanes)!==0,Vi||F){if(F=fi,F!==null){switch(L&-L){case 4:re=2;break;case 16:re=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:re=32;break;case 536870912:re=268435456;break;default:re=0}F=(re&(F.suspendedLanes|L))!==0?0:re,F!==0&&F!==Y.retryLane&&(Y.retryLane=F,gs(E,F,-1))}R0(),T=Dh(E,T,L,Error(o(421)))}else Un(Ze)?(T.flags|=128,T.child=E.child,T=K_.bind(null,E),ci(Ze,T),T=null):(L=Y.treeContext,Be&&(es=jr(Ze),Ps=T,qr=!0,Do=null,rf=!1,L!==null&&(Lo[co++]=kl,Lo[co++]=Ol,Lo[co++]=_u,kl=L.id,Ol=L.overflow,_u=T)),T=ua(T,T.pendingProps.children),T.flags|=4096);return T}return re?(F=T0(E,T,F.children,F.fallback,L),re=T.child,Y=E.child.memoizedState,re.memoizedState=Y===null?Ou(L):{baseLanes:Y.baseLanes|L,cachePool:null},re.childLanes=E.childLanes&~L,T.memoizedState=Nh,F):(L=Lh(E,T,F.children,L),T.memoizedState=null,L)}return re?(F=T0(E,T,F.children,F.fallback,L),re=T.child,Y=E.child.memoizedState,re.memoizedState=Y===null?Ou(L):{baseLanes:Y.baseLanes|L,cachePool:null},re.childLanes=E.childLanes&~L,T.memoizedState=Nh,F):(L=Lh(E,T,F.children,L),T.memoizedState=null,L)}function ua(E,T){return T=Xh({mode:"visible",children:T},E.mode,0,null),T.return=E,E.child=T}function Lh(E,T,L,F){var Y=E.child;return E=Y.sibling,L=Kl(Y,{mode:"visible",children:L}),(T.mode&1)===0&&(L.lanes=F),L.return=T,L.sibling=null,E!==null&&(F=T.deletions,F===null?(T.deletions=[E],T.flags|=16):F.push(E)),T.child=L}function T0(E,T,L,F,Y){var re=T.mode;E=E.child;var Le=E.sibling,Ze={mode:"hidden",children:L};return(re&1)===0&&T.child!==E?(L=T.child,L.childLanes=0,L.pendingProps=Ze,T.deletions=null):(L=Kl(E,Ze),L.subtreeFlags=E.subtreeFlags&14680064),Le!==null?F=Kl(Le,F):(F=ju(F,re,Y,null),F.flags|=2),F.return=T,L.return=T,L.sibling=F,T.child=L,F}function Dh(E,T,L,F){return F!==null&&l0(F),Nl(T,E.child,null,L),E=ua(T,T.pendingProps.children),E.flags|=2,T.memoizedState=null,E}function V_(E,T,L){E.lanes|=T;var F=E.alternate;F!==null&&(F.lanes|=T),wu(E.return,T,L)}function Ha(E,T,L,F,Y){var re=E.memoizedState;re===null?E.memoizedState={isBackwards:T,rendering:null,renderingStartTime:0,last:F,tail:L,tailMode:Y}:(re.isBackwards=T,re.rendering=null,re.renderingStartTime=0,re.last=F,re.tail=L,re.tailMode=Y)}function Nu(E,T,L){var F=T.pendingProps,Y=F.revealOrder,re=F.tail;if(ri(E,T,F.children,L),F=Jr.current,(F&2)!==0)F=F&1|2,T.flags|=128;else{if(E!==null&&(E.flags&128)!==0)e:for(E=T.child;E!==null;){if(E.tag===13)E.memoizedState!==null&&V_(E,L,T);else if(E.tag===19)V_(E,L,T);else if(E.child!==null){E.child.return=E,E=E.child;continue}if(E===T)break e;for(;E.sibling===null;){if(E.return===null||E.return===T)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}F&=1}if(rn(Jr,F),(T.mode&1)===0)T.memoizedState=null;else switch(Y){case"forwards":for(L=T.child,Y=null;L!==null;)E=L.alternate,E!==null&&u0(E)===null&&(Y=L),L=L.sibling;L=Y,L===null?(Y=T.child,T.child=null):(Y=L.sibling,L.sibling=null),Ha(T,!1,Y,L,re);break;case"backwards":for(L=null,Y=T.child,T.child=null;Y!==null;){if(E=Y.alternate,E!==null&&u0(E)===null){T.child=Y;break}E=Y.sibling,Y.sibling=L,L=Y,Y=E}Ha(T,!0,L,null,re);break;case"together":Ha(T,!1,null,null,void 0);break;default:T.memoizedState=null}return T.child}function js(E,T,L){if(E!==null&&(T.dependencies=E.dependencies),Va|=T.lanes,(L&T.childLanes)===0)return null;if(E!==null&&T.child!==E.child)throw Error(o(153));if(T.child!==null){for(E=T.child,L=Kl(E,E.pendingProps),T.child=L,L.return=T;E.sibling!==null;)E=E.sibling,L=L.sibling=Kl(E,E.pendingProps),L.return=T;L.sibling=null}return T.child}function I0(E,T,L){switch(T.tag){case 3:Oh(T),sf();break;case 5:F_(T);break;case 1:Zn(T.type)&&Fi(T);break;case 4:c0(T,T.stateNode.containerInfo);break;case 10:xu(T,T.type._context,T.memoizedProps.value);break;case 13:var F=T.memoizedState;if(F!==null)return F.dehydrated!==null?(rn(Jr,Jr.current&1),T.flags|=128,null):(L&T.child.childLanes)!==0?eb(E,T,L):(rn(Jr,Jr.current&1),E=js(E,T,L),E!==null?E.sibling:null);rn(Jr,Jr.current&1);break;case 19:if(F=(L&T.childLanes)!==0,(E.flags&128)!==0){if(F)return Nu(E,T,L);T.flags|=128}var Y=T.memoizedState;if(Y!==null&&(Y.rendering=null,Y.tail=null,Y.lastEffect=null),rn(Jr,Jr.current),F)break;return null;case 22:case 23:return T.lanes=0,ts(E,T,L)}return js(E,T,L)}function P0(E,T){switch(Fv(T),T.tag){case 1:return Zn(T.type)&&$n(),E=T.flags,E&65536?(T.flags=E&-65537|128,T):null;case 3:return cf(),Ot(qn),Ot(jn),Iu(),E=T.flags,(E&65536)!==0&&(E&128)===0?(T.flags=E&-65537|128,T):null;case 5:return zv(T),null;case 13:if(Ot(Jr),E=T.memoizedState,E!==null&&E.dehydrated!==null){if(T.alternate===null)throw Error(o(340));sf()}return E=T.flags,E&65536?(T.flags=E&-65537|128,T):null;case 19:return Ot(Jr),null;case 4:return cf(),null;case 10:return _h(T.type._context),null;case 22:case 23:return qh(),null;case 24:return null;default:return null}}var Ms=!1,Wi=!1,Lu=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function Bo(E,T){var L=E.ref;if(L!==null)if(typeof L=="function")try{L(null)}catch(F){Rs(E,T,F)}else L.current=null}function $l(E,T,L){try{L()}catch(F){Rs(E,T,F)}}var tb=!1;function nb(E,T){for(G(E.containerInfo),Lt=T;Lt!==null;)if(E=Lt,T=E.child,(E.subtreeFlags&1028)!==0&&T!==null)T.return=E,Lt=T;else for(;Lt!==null;){E=Lt;try{var L=E.alternate;if((E.flags&1024)!==0)switch(E.tag){case 0:case 11:case 15:break;case 1:if(L!==null){var F=L.memoizedProps,Y=L.memoizedState,re=E.stateNode,Le=re.getSnapshotBeforeUpdate(E.elementType===E.type?F:Hs(E.type,F),Y);re.__reactInternalSnapshotBeforeUpdate=Le}break;case 3:Ae&&Qe(E.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Ze){Rs(E,E.return,Ze)}if(T=E.sibling,T!==null){T.return=E.return,Lt=T;break}Lt=E.return}return L=tb,tb=!1,L}function zl(E,T,L){var F=T.updateQueue;if(F=F!==null?F.lastEffect:null,F!==null){var Y=F=F.next;do{if((Y.tag&E)===E){var re=Y.destroy;Y.destroy=void 0,re!==void 0&&$l(T,L,re)}Y=Y.next}while(Y!==F)}}function ns(E,T){if(T=T.updateQueue,T=T!==null?T.lastEffect:null,T!==null){var L=T=T.next;do{if((L.tag&E)===E){var F=L.create;L.destroy=F()}L=L.next}while(L!==T)}}function As(E){var T=E.ref;if(T!==null){var L=E.stateNode;switch(E.tag){case 5:E=q(L);break;default:E=L}typeof T=="function"?T(E):T.current=E}}function $r(E,T,L){if(Ua&&typeof Ua.onCommitFiberUnmount=="function")try{Ua.onCommitFiberUnmount(vh,T)}catch{}switch(T.tag){case 0:case 11:case 14:case 15:if(E=T.updateQueue,E!==null&&(E=E.lastEffect,E!==null)){var F=E=E.next;do{var Y=F,re=Y.destroy;Y=Y.tag,re!==void 0&&((Y&2)!==0||(Y&4)!==0)&&$l(T,L,re),F=F.next}while(F!==E)}break;case 1:if(Bo(T,L),E=T.stateNode,typeof E.componentWillUnmount=="function")try{E.props=T.memoizedProps,E.state=T.memoizedState,E.componentWillUnmount()}catch(Le){Rs(T,L,Le)}break;case 5:Bo(T,L);break;case 4:Ae?sb(E,T,L):Oe&&Oe&&(T=T.stateNode.containerInfo,L=gt(T),Zt(T,L))}}function Fo(E,T,L){for(var F=T;;)if($r(E,F,L),F.child===null||Ae&&F.tag===4){if(F===T)break;for(;F.sibling===null;){if(F.return===null||F.return===T)return;F=F.return}F.sibling.return=F.return,F=F.sibling}else F.child.return=F,F=F.child}function rb(E){var T=E.alternate;T!==null&&(E.alternate=null,rb(T)),E.child=null,E.deletions=null,E.sibling=null,E.tag===5&&(T=E.stateNode,T!==null&&He(T)),E.stateNode=null,E.return=null,E.dependencies=null,E.memoizedProps=null,E.memoizedState=null,E.pendingProps=null,E.stateNode=null,E.updateQueue=null}function ib(E){return E.tag===5||E.tag===3||E.tag===4}function C0(E){e:for(;;){for(;E.sibling===null;){if(E.return===null||ib(E.return))return null;E=E.return}for(E.sibling.return=E.return,E=E.sibling;E.tag!==5&&E.tag!==6&&E.tag!==18;){if(E.flags&2||E.child===null||E.tag===4)continue e;E.child.return=E,E=E.child}if(!(E.flags&2))return E.stateNode}}function M0(E){if(Ae){e:{for(var T=E.return;T!==null;){if(ib(T))break e;T=T.return}throw Error(o(160))}var L=T;switch(L.tag){case 5:T=L.stateNode,L.flags&32&&(Te(T),L.flags&=-33),L=C0(E),gf(E,L,T);break;case 3:case 4:T=L.stateNode.containerInfo,L=C0(E),A0(E,L,T);break;default:throw Error(o(161))}}}function A0(E,T,L){var F=E.tag;if(F===5||F===6)E=E.stateNode,T?oe(L,E,T):ge(L,E);else if(F!==4&&(E=E.child,E!==null))for(A0(E,T,L),E=E.sibling;E!==null;)A0(E,T,L),E=E.sibling}function gf(E,T,L){var F=E.tag;if(F===5||F===6)E=E.stateNode,T?Ee(L,E,T):be(L,E);else if(F!==4&&(E=E.child,E!==null))for(gf(E,T,L),E=E.sibling;E!==null;)gf(E,T,L),E=E.sibling}function sb(E,T,L){for(var F=T,Y=!1,re,Le;;){if(!Y){Y=F.return;e:for(;;){if(Y===null)throw Error(o(160));switch(re=Y.stateNode,Y.tag){case 5:Le=!1;break e;case 3:re=re.containerInfo,Le=!0;break e;case 4:re=re.containerInfo,Le=!0;break e}Y=Y.return}Y=!0}if(F.tag===5||F.tag===6)Fo(E,F,L),Le?de(re,F.stateNode):ne(re,F.stateNode);else if(F.tag===18)Le?Tn(re,F.stateNode):Vt(re,F.stateNode);else if(F.tag===4){if(F.child!==null){re=F.stateNode.containerInfo,Le=!0,F.child.return=F,F=F.child;continue}}else if($r(E,F,L),F.child!==null){F.child.return=F,F=F.child;continue}if(F===T)break;for(;F.sibling===null;){if(F.return===null||F.return===T)return;F=F.return,F.tag===4&&(Y=!1)}F.sibling.return=F.return,F=F.sibling}}function Lc(E,T){if(Ae){switch(T.tag){case 0:case 11:case 14:case 15:zl(3,T,T.return),ns(3,T),zl(5,T,T.return);return;case 1:return;case 5:var L=T.stateNode;if(L!=null){var F=T.memoizedProps;E=E!==null?E.memoizedProps:F;var Y=T.type,re=T.updateQueue;T.updateQueue=null,re!==null&&me(L,re,Y,E,F,T)}return;case 6:if(T.stateNode===null)throw Error(o(162));L=T.memoizedProps,Se(T.stateNode,E!==null?E.memoizedProps:L,L);return;case 3:Be&&E!==null&&E.memoizedState.isDehydrated&&Ht(T.stateNode.containerInfo);return;case 12:return;case 13:yf(T);return;case 19:yf(T);return;case 17:return}throw Error(o(163))}switch(T.tag){case 0:case 11:case 14:case 15:zl(3,T,T.return),ns(3,T),zl(5,T,T.return);return;case 12:return;case 13:yf(T);return;case 19:yf(T);return;case 3:Be&&E!==null&&E.memoizedState.isDehydrated&&Ht(T.stateNode.containerInfo);break;case 22:case 23:return}e:if(Oe){switch(T.tag){case 1:case 5:case 6:break e;case 3:case 4:T=T.stateNode,Zt(T.containerInfo,T.pendingChildren);break e}throw Error(o(163))}}function yf(E){var T=E.updateQueue;if(T!==null){E.updateQueue=null;var L=E.stateNode;L===null&&(L=E.stateNode=new Lu),T.forEach(function(F){var Y=G_.bind(null,E,F);L.has(F)||(L.add(F),F.then(Y,Y))})}}function nC(E,T){for(Lt=T;Lt!==null;){T=Lt;var L=T.deletions;if(L!==null)for(var F=0;F<L.length;F++){var Y=L[F];try{var re=E;Ae?sb(re,Y,T):Fo(re,Y,T);var Le=Y.alternate;Le!==null&&(Le.return=null),Y.return=null}catch(on){Rs(Y,T,on)}}if(L=T.child,(T.subtreeFlags&12854)!==0&&L!==null)L.return=T,Lt=L;else for(;Lt!==null;){T=Lt;try{var Ze=T.flags;if(Ze&32&&Ae&&Te(T.stateNode),Ze&512){var yt=T.alternate;if(yt!==null){var Rt=yt.ref;Rt!==null&&(typeof Rt=="function"?Rt(null):Rt.current=null)}}if(Ze&8192)switch(T.tag){case 13:if(T.memoizedState!==null){var Xt=T.alternate;(Xt===null||Xt.memoizedState===null)&&(Vh=Ci())}break;case 22:var Sn=T.memoizedState!==null,fn=T.alternate,Ln=fn!==null&&fn.memoizedState!==null;if(L=T,Ae){e:if(F=L,Y=Sn,re=null,Ae)for(var $t=F;;){if($t.tag===5){if(re===null){re=$t;var ss=$t.stateNode;Y?ke(ss):Xe($t.stateNode,$t.memoizedProps)}}else if($t.tag===6){if(re===null){var vo=$t.stateNode;Y?he(vo):$e(vo,$t.memoizedProps)}}else if(($t.tag!==22&&$t.tag!==23||$t.memoizedState===null||$t===F)&&$t.child!==null){$t.child.return=$t,$t=$t.child;continue}if($t===F)break;for(;$t.sibling===null;){if($t.return===null||$t.return===F)break e;re===$t&&(re=null),$t=$t.return}re===$t&&(re=null),$t.sibling.return=$t.return,$t=$t.sibling}}if(Sn&&!Ln&&(L.mode&1)!==0){Lt=L;for(var ct=L.child;ct!==null;){for(L=Lt=ct;Lt!==null;){F=Lt;var nt=F.child;switch(F.tag){case 0:case 11:case 14:case 15:zl(4,F,F.return);break;case 1:Bo(F,F.return);var mt=F.stateNode;if(typeof mt.componentWillUnmount=="function"){var Ft=F.return;try{mt.props=F.memoizedProps,mt.state=F.memoizedState,mt.componentWillUnmount()}catch(on){Rs(F,Ft,on)}}break;case 5:Bo(F,F.return);break;case 22:if(F.memoizedState!==null){ab(L);continue}}nt!==null?(nt.return=F,Lt=nt):ab(L)}ct=ct.sibling}}}switch(Ze&4102){case 2:M0(T),T.flags&=-3;break;case 6:M0(T),T.flags&=-3,Lc(T.alternate,T);break;case 4096:T.flags&=-4097;break;case 4100:T.flags&=-4097,Lc(T.alternate,T);break;case 4:Lc(T.alternate,T)}}catch(on){Rs(T,T.return,on)}if(L=T.sibling,L!==null){L.return=T.return,Lt=L;break}Lt=T.return}}}function Bh(E,T,L){Lt=E,Fh(E)}function Fh(E,T,L){for(var F=(E.mode&1)!==0;Lt!==null;){var Y=Lt,re=Y.child;if(Y.tag===22&&F){var Le=Y.memoizedState!==null||Ms;if(!Le){var Ze=Y.alternate,yt=Ze!==null&&Ze.memoizedState!==null||Wi;Ze=Ms;var Rt=Wi;if(Ms=Le,(Wi=yt)&&!Rt)for(Lt=Y;Lt!==null;)Le=Lt,yt=Le.child,Le.tag===22&&Le.memoizedState!==null?Du(Y):yt!==null?(yt.return=Le,Lt=yt):Du(Y);for(;re!==null;)Lt=re,Fh(re),re=re.sibling;Lt=Y,Ms=Ze,Wi=Rt}ob(E)}else(Y.subtreeFlags&8772)!==0&&re!==null?(re.return=Y,Lt=re):ob(E)}}function ob(E){for(;Lt!==null;){var T=Lt;if((T.flags&8772)!==0){var L=T.alternate;try{if((T.flags&8772)!==0)switch(T.tag){case 0:case 11:case 15:Wi||ns(5,T);break;case 1:var F=T.stateNode;if(T.flags&4&&!Wi)if(L===null)F.componentDidMount();else{var Y=T.elementType===T.type?L.memoizedProps:Hs(T.type,L.memoizedProps);F.componentDidUpdate(Y,L.memoizedState,F.__reactInternalSnapshotBeforeUpdate)}var re=T.updateQueue;re!==null&&A_(T,re,F);break;case 3:var Le=T.updateQueue;if(Le!==null){if(L=null,T.child!==null)switch(T.child.tag){case 5:L=q(T.child.stateNode);break;case 1:L=T.child.stateNode}A_(T,Le,L)}break;case 5:var Ze=T.stateNode;L===null&&T.flags&4&&Ie(Ze,T.type,T.memoizedProps,T);break;case 6:break;case 4:break;case 12:break;case 13:if(Be&&T.memoizedState===null){var yt=T.alternate;if(yt!==null){var Rt=yt.memoizedState;if(Rt!==null){var Xt=Rt.dehydrated;Xt!==null&&nn(Xt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Wi||T.flags&512&&As(T)}catch(Sn){Rs(T,T.return,Sn)}}if(T===E){Lt=null;break}if(L=T.sibling,L!==null){L.return=T.return,Lt=L;break}Lt=T.return}}function ab(E){for(;Lt!==null;){var T=Lt;if(T===E){Lt=null;break}var L=T.sibling;if(L!==null){L.return=T.return,Lt=L;break}Lt=T.return}}function Du(E){for(;Lt!==null;){var T=Lt;try{switch(T.tag){case 0:case 11:case 15:var L=T.return;try{ns(4,T)}catch(yt){Rs(T,L,yt)}break;case 1:var F=T.stateNode;if(typeof F.componentDidMount=="function"){var Y=T.return;try{F.componentDidMount()}catch(yt){Rs(T,Y,yt)}}var re=T.return;try{As(T)}catch(yt){Rs(T,re,yt)}break;case 5:var Le=T.return;try{As(T)}catch(yt){Rs(T,Le,yt)}}}catch(yt){Rs(T,T.return,yt)}if(T===E){Lt=null;break}var Ze=T.sibling;if(Ze!==null){Ze.return=T.return,Lt=Ze;break}Lt=T.return}}var Uh=0,Bu=1,Fu=2,Hl=3,vf=4;if(typeof Symbol=="function"&&Symbol.for){var Uu=Symbol.for;Uh=Uu("selector.component"),Bu=Uu("selector.has_pseudo_class"),Fu=Uu("selector.role"),Hl=Uu("selector.test_id"),vf=Uu("selector.text")}function $h(E){var T=ce(E);if(T!=null){if(typeof T.memoizedProps["data-testname"]!="string")throw Error(o(364));return T}if(E=ee(E),E===null)throw Error(o(362));return E.stateNode.current}function zh(E,T){switch(T.$$typeof){case Uh:if(E.type===T.value)return!0;break;case Bu:e:{T=T.value,E=[E,0];for(var L=0;L<E.length;){var F=E[L++],Y=E[L++],re=T[Y];if(F.tag!==5||!Ne(F)){for(;re!=null&&zh(F,re);)Y++,re=T[Y];if(Y===T.length){T=!0;break e}else for(F=F.child;F!==null;)E.push(F,Y),F=F.sibling}}T=!1}return T;case Fu:if(E.tag===5&&We(E.stateNode,T.value))return!0;break;case vf:if((E.tag===5||E.tag===6)&&(E=we(E),E!==null&&0<=E.indexOf(T.value)))return!0;break;case Hl:if(E.tag===5&&(E=E.memoizedProps["data-testname"],typeof E=="string"&&E.toLowerCase()===T.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Dc(E){switch(E.$$typeof){case Uh:return"<"+(I(E.value)||"Unknown")+">";case Bu:return":has("+(Dc(E)||"")+")";case Fu:return'[role="'+E.value+'"]';case vf:return'"'+E.value+'"';case Hl:return'[data-testname="'+E.value+'"]';default:throw Error(o(365))}}function po(E,T){var L=[];E=[E,0];for(var F=0;F<E.length;){var Y=E[F++],re=E[F++],Le=T[re];if(Y.tag!==5||!Ne(Y)){for(;Le!=null&&zh(Y,Le);)re++,Le=T[re];if(re===T.length)L.push(Y);else for(Y=Y.child;Y!==null;)E.push(Y,re),Y=Y.sibling}}return L}function Vl(E,T){if(!te)throw Error(o(363));E=$h(E),E=po(E,T),T=[],E=Array.from(E);for(var L=0;L<E.length;){var F=E[L++];if(F.tag===5)Ne(F)||T.push(F.stateNode);else for(F=F.child;F!==null;)E.push(F),F=F.sibling}return T}var lb=Math.ceil,Hh=a.ReactCurrentDispatcher,da=a.ReactCurrentOwner,Sr=a.ReactCurrentBatchConfig,An=0,fi=null,Er=null,Kr=0,ms=0,$u=an(0),ii=0,bf=null,Va=0,mo=0,zu=0,Wl=null,bi=null,Vh=0,Bc=1/0;function Hu(){Bc=Ci()+500}var xf=!1,zr=null,fa=null,wf=!1,Wa=null,Vu=0,Wu=0,jl=null,Nr=-1,si=0;function ar(){return(An&6)!==0?Ci():Nr!==-1?Nr:Nr=Ci()}function ha(E){return(E.mode&1)===0?1:(An&2)!==0&&Kr!==0?Kr&-Kr:M_.transition!==null?(si===0&&(E=ui,ui<<=1,(ui&4194240)===0&&(ui=64),si=E),si):(E=zn,E!==0?E:Pe())}function gs(E,T,L){if(50<Wu)throw Wu=0,jl=null,Error(o(185));var F=Fc(E,T);return F===null?null:(gu(F,T,L),((An&2)===0||F!==fi)&&(F===fi&&((An&2)===0&&(mo|=T),ii===4&&is(F,Kr)),qs(F,L),T===1&&An===0&&(E.mode&1)===0&&(Hu(),Zm&&ko())),F)}function Fc(E,T){E.lanes|=T;var L=E.alternate;for(L!==null&&(L.lanes|=T),L=E,E=E.return;E!==null;)E.childLanes|=T,L=E.alternate,L!==null&&(L.childLanes|=T),L=E,E=E.return;return L.tag===3?L.stateNode:null}function qs(E,T){var L=E.callbackNode;C_(E,T);var F=yh(E,E===fi?Kr:0);if(F===0)L!==null&&Qd(L),E.callbackNode=null,E.callbackPriority=0;else if(T=F&-F,E.callbackPriority!==T){if(L!=null&&Qd(L),T===1)E.tag===0?Qm(go.bind(null,E)):Jm(go.bind(null,E)),Re?je(function(){An===0&&ko()}):yu(vu,ko),L=null;else{switch(Ml(F)){case 1:L=vu;break;case 4:L=QP;break;case 16:L=Xm;break;case 536870912:L=Ym;break;default:L=Xm}L=k0(L,rs.bind(null,E))}E.callbackPriority=T,E.callbackNode=L}}function rs(E,T){if(Nr=-1,si=0,(An&6)!==0)throw Error(o(327));var L=E.callbackNode;if(ja()&&E.callbackNode!==L)return null;var F=yh(E,E===fi?Kr:0);if(F===0)return null;if((F&30)!==0||(F&E.expiredLanes)!==0||T)T=Kh(E,F);else{T=F;var Y=An;An|=2;var re=db();(fi!==E||Kr!==T)&&(Hu(),ql(E,T));do try{j_();break}catch(Ze){ub(E,Ze)}while(!0);Is(),Hh.current=re,An=Y,Er!==null?T=0:(fi=null,Kr=0,T=ii)}if(T!==0){if(T===2&&(Y=qm(E),Y!==0&&(F=Y,T=Wh(E,Y))),T===1)throw L=bf,ql(E,0),is(E,F),qs(E,Ci()),L;if(T===6)is(E,F);else{if(Y=E.current.alternate,(F&30)===0&&!cb(Y)&&(T=Kh(E,F),T===2&&(re=qm(E),re!==0&&(F=re,T=Wh(E,re))),T===1))throw L=bf,ql(E,0),is(E,F),qs(E,Ci()),L;switch(E.finishedWork=Y,E.finishedLanes=F,T){case 0:case 1:throw Error(o(345));case 2:pa(E,bi);break;case 3:if(is(E,F),(F&130023424)===F&&(T=Vh+500-Ci(),10<T)){if(yh(E,0)!==0)break;if(Y=E.suspendedLanes,(Y&F)!==F){ar(),E.pingedLanes|=E.suspendedLanes&Y;break}E.timeoutHandle=le(pa.bind(null,E,bi),T);break}pa(E,bi);break;case 4:if(is(E,F),(F&4194240)===F)break;for(T=E.eventTimes,Y=-1;0<F;){var Le=31-Kn(F);re=1<<Le,Le=T[Le],Le>Y&&(Y=Le),F&=~re}if(F=Y,F=Ci()-F,F=(120>F?120:480>F?480:1080>F?1080:1920>F?1920:3e3>F?3e3:4320>F?4320:1960*lb(F/1960))-F,10<F){E.timeoutHandle=le(pa.bind(null,E,bi),F);break}pa(E,bi);break;case 5:pa(E,bi);break;default:throw Error(o(329))}}}return qs(E,Ci()),E.callbackNode===L?rs.bind(null,E):null}function Wh(E,T){var L=Wl;return E.current.memoizedState.isDehydrated&&(ql(E,T).flags|=256),E=Kh(E,T),E!==2&&(T=bi,bi=L,T!==null&&jh(T)),E}function jh(E){bi===null?bi=E:bi.push.apply(bi,E)}function cb(E){for(var T=E;;){if(T.flags&16384){var L=T.updateQueue;if(L!==null&&(L=L.stores,L!==null))for(var F=0;F<L.length;F++){var Y=L[F],re=Y.getSnapshot;Y=Y.value;try{if(!Ts(re(),Y))return!1}catch{return!1}}}if(L=T.child,T.subtreeFlags&16384&&L!==null)L.return=T,T=L;else{if(T===E)break;for(;T.sibling===null;){if(T.return===null||T.return===E)return!0;T=T.return}T.sibling.return=T.return,T=T.sibling}}return!0}function is(E,T){for(T&=~zu,T&=~mo,E.suspendedLanes|=T,E.pingedLanes&=~T,E=E.expirationTimes;0<T;){var L=31-Kn(T),F=1<<L;E[L]=-1,T&=~F}}function go(E){if((An&6)!==0)throw Error(o(327));ja();var T=yh(E,0);if((T&1)===0)return qs(E,Ci()),null;var L=Kh(E,T);if(E.tag!==0&&L===2){var F=qm(E);F!==0&&(T=F,L=Wh(E,F))}if(L===1)throw L=bf,ql(E,0),is(E,T),qs(E,Ci()),L;if(L===6)throw Error(o(345));return E.finishedWork=E.current.alternate,E.finishedLanes=T,pa(E,bi),qs(E,Ci()),null}function _f(E){Wa!==null&&Wa.tag===0&&(An&6)===0&&ja();var T=An;An|=1;var L=Sr.transition,F=zn;try{if(Sr.transition=null,zn=1,E)return E()}finally{zn=F,Sr.transition=L,An=T,(An&6)===0&&ko()}}function qh(){ms=$u.current,Ot($u)}function ql(E,T){E.finishedWork=null,E.finishedLanes=0;var L=E.timeoutHandle;if(L!==_e&&(E.timeoutHandle=_e,ae(L)),Er!==null)for(L=Er.return;L!==null;){var F=L;switch(Fv(F),F.tag){case 1:F=F.type.childContextTypes,F!=null&&$n();break;case 3:cf(),Ot(qn),Ot(jn),Iu();break;case 5:zv(F);break;case 4:cf();break;case 13:Ot(Jr);break;case 19:Ot(Jr);break;case 10:_h(F.type._context);break;case 22:case 23:qh()}L=L.return}if(fi=E,Er=E=Kl(E.current,null),Kr=ms=T,ii=0,bf=null,zu=mo=Va=0,bi=Wl=null,Oo!==null){for(T=0;T<Oo.length;T++)if(L=Oo[T],F=L.interleaved,F!==null){L.interleaved=null;var Y=F.next,re=L.pending;if(re!==null){var Le=re.next;re.next=Y,F.next=Le}L.pending=F}Oo=null}return E}function ub(E,T){do{var L=Er;try{if(Is(),Eh.current=pf,d0){for(var F=Qr.memoizedState;F!==null;){var Y=F.queue;Y!==null&&(Y.pending=null),F=F.next}d0=!1}if(Pu=0,zi=$i=Qr=null,$a=!1,Cu=0,da.current=null,L===null||L.return===null){ii=1,bf=T,Er=null;break}e:{var re=E,Le=L.return,Ze=L,yt=T;if(T=Kr,Ze.flags|=32768,yt!==null&&typeof yt=="object"&&typeof yt.then=="function"){var Rt=yt,Xt=Ze,Sn=Xt.tag;if((Xt.mode&1)===0&&(Sn===0||Sn===11||Sn===15)){var fn=Xt.alternate;fn?(Xt.updateQueue=fn.updateQueue,Xt.memoizedState=fn.memoizedState,Xt.lanes=fn.lanes):(Xt.updateQueue=null,Xt.memoizedState=null)}var Ln=Zv(Le);if(Ln!==null){Ln.flags&=-257,Au(Ln,Le,Ze,re,T),Ln.mode&1&&Dl(re,Rt,T),T=Ln,yt=Rt;var $t=T.updateQueue;if($t===null){var ss=new Set;ss.add(yt),T.updateQueue=ss}else $t.add(yt);break e}else{if((T&1)===0){Dl(re,Rt,T),R0();break e}yt=Error(o(426))}}else if(qr&&Ze.mode&1){var vo=Zv(Le);if(vo!==null){(vo.flags&65536)===0&&(vo.flags|=256),Au(vo,Le,Ze,re,T),l0(yt);break e}}re=yt,ii!==4&&(ii=2),Wl===null?Wl=[re]:Wl.push(re),yt=Yv(yt,Ze),Ze=Le;do{switch(Ze.tag){case 3:Ze.flags|=65536,T&=-T,Ze.lanes|=T;var ct=H_(Ze,yt,T);n0(Ze,ct);break e;case 1:re=yt;var nt=Ze.type,mt=Ze.stateNode;if((Ze.flags&128)===0&&(typeof nt.getDerivedStateFromError=="function"||mt!==null&&typeof mt.componentDidCatch=="function"&&(fa===null||!fa.has(mt)))){Ze.flags|=65536,T&=-T,Ze.lanes|=T;var Ft=w0(Ze,re,T);n0(Ze,Ft);break e}}Ze=Ze.return}while(Ze!==null)}hb(L)}catch(on){T=on,Er===L&&L!==null&&(Er=L=L.return);continue}break}while(!0)}function db(){var E=Hh.current;return Hh.current=pf,E===null?pf:E}function R0(){(ii===0||ii===3||ii===2)&&(ii=4),fi===null||(Va&268435455)===0&&(mo&268435455)===0||is(fi,Kr)}function Kh(E,T){var L=An;An|=2;var F=db();fi===E&&Kr===T||ql(E,T);do try{W_();break}catch(Y){ub(E,Y)}while(!0);if(Is(),An=L,Hh.current=F,Er!==null)throw Error(o(261));return fi=null,Kr=0,ii}function W_(){for(;Er!==null;)fb(Er)}function j_(){for(;Er!==null&&!Pc();)fb(Er)}function fb(E){var T=gb(E.alternate,E,ms);E.memoizedProps=E.pendingProps,T===null?hb(E):Er=T,da.current=null}function hb(E){var T=E;do{var L=T.alternate;if(E=T.return,(T.flags&32768)===0){if(L=E0(L,T,ms),L!==null){Er=L;return}}else{if(L=P0(L,T),L!==null){L.flags&=32767,Er=L;return}if(E!==null)E.flags|=32768,E.subtreeFlags=0,E.deletions=null;else{ii=6,Er=null;return}}if(T=T.sibling,T!==null){Er=T;return}Er=T=E}while(T!==null);ii===0&&(ii=5)}function pa(E,T){var L=zn,F=Sr.transition;try{Sr.transition=null,zn=1,q_(E,T,L)}finally{Sr.transition=F,zn=L}return null}function q_(E,T,L){do ja();while(Wa!==null);if((An&6)!==0)throw Error(o(327));var F=E.finishedWork,Y=E.finishedLanes;if(F===null)return null;if(E.finishedWork=null,E.finishedLanes=0,F===E.current)throw Error(o(177));E.callbackNode=null,E.callbackPriority=0;var re=F.lanes|F.childLanes;if(Gm(E,re),E===fi&&(Er=fi=null,Kr=0),(F.subtreeFlags&2064)===0&&(F.flags&2064)===0||wf||(wf=!0,k0(Xm,function(){return ja(),null})),re=(F.flags&15990)!==0,(F.subtreeFlags&15990)!==0||re){re=Sr.transition,Sr.transition=null;var Le=zn;zn=1;var Ze=An;An|=4,da.current=null,nb(E,F),nC(E,F),j(E.containerInfo),E.current=F,Bh(F),JP(),An=Ze,zn=Le,Sr.transition=re}else E.current=F;if(wf&&(wf=!1,Wa=E,Vu=Y),re=E.pendingLanes,re===0&&(fa=null),bh(F.stateNode),qs(E,Ci()),T!==null)for(L=E.onRecoverableError,F=0;F<T.length;F++)L(T[F]);if(xf)throw xf=!1,E=zr,zr=null,E;return(Vu&1)!==0&&E.tag!==0&&ja(),re=E.pendingLanes,(re&1)!==0?E===jl?Wu++:(Wu=0,jl=E):Wu=0,ko(),null}function ja(){if(Wa!==null){var E=Ml(Vu),T=Sr.transition,L=zn;try{if(Sr.transition=null,zn=16>E?16:E,Wa===null)var F=!1;else{if(E=Wa,Wa=null,Vu=0,(An&6)!==0)throw Error(o(331));var Y=An;for(An|=4,Lt=E.current;Lt!==null;){var re=Lt,Le=re.child;if((Lt.flags&16)!==0){var Ze=re.deletions;if(Ze!==null){for(var yt=0;yt<Ze.length;yt++){var Rt=Ze[yt];for(Lt=Rt;Lt!==null;){var Xt=Lt;switch(Xt.tag){case 0:case 11:case 15:zl(8,Xt,re)}var Sn=Xt.child;if(Sn!==null)Sn.return=Xt,Lt=Sn;else for(;Lt!==null;){Xt=Lt;var fn=Xt.sibling,Ln=Xt.return;if(rb(Xt),Xt===Rt){Lt=null;break}if(fn!==null){fn.return=Ln,Lt=fn;break}Lt=Ln}}}var $t=re.alternate;if($t!==null){var ss=$t.child;if(ss!==null){$t.child=null;do{var vo=ss.sibling;ss.sibling=null,ss=vo}while(ss!==null)}}Lt=re}}if((re.subtreeFlags&2064)!==0&&Le!==null)Le.return=re,Lt=Le;else e:for(;Lt!==null;){if(re=Lt,(re.flags&2048)!==0)switch(re.tag){case 0:case 11:case 15:zl(9,re,re.return)}var ct=re.sibling;if(ct!==null){ct.return=re.return,Lt=ct;break e}Lt=re.return}}var nt=E.current;for(Lt=nt;Lt!==null;){Le=Lt;var mt=Le.child;if((Le.subtreeFlags&2064)!==0&&mt!==null)mt.return=Le,Lt=mt;else e:for(Le=nt;Lt!==null;){if(Ze=Lt,(Ze.flags&2048)!==0)try{switch(Ze.tag){case 0:case 11:case 15:ns(9,Ze)}}catch(on){Rs(Ze,Ze.return,on)}if(Ze===Le){Lt=null;break e}var Ft=Ze.sibling;if(Ft!==null){Ft.return=Ze.return,Lt=Ft;break e}Lt=Ze.return}}if(An=Y,ko(),Ua&&typeof Ua.onPostCommitFiberRoot=="function")try{Ua.onPostCommitFiberRoot(vh,E)}catch{}F=!0}return F}finally{zn=L,Sr.transition=T}}return!1}function Gh(E,T,L){T=Yv(L,T),T=H_(E,T,1),Cc(E,T),T=ar(),E=Fc(E,1),E!==null&&(gu(E,1,T),qs(E,T))}function Rs(E,T,L){if(E.tag===3)Gh(E,E,L);else for(;T!==null;){if(T.tag===3){Gh(T,E,L);break}else if(T.tag===1){var F=T.stateNode;if(typeof T.type.getDerivedStateFromError=="function"||typeof F.componentDidCatch=="function"&&(fa===null||!fa.has(F))){E=Yv(L,E),E=w0(T,E,1),Cc(T,E),E=ar(),T=Fc(T,1),T!==null&&(gu(T,1,E),qs(T,E));break}}T=T.return}}function pb(E,T,L){var F=E.pingCache;F!==null&&F.delete(T),T=ar(),E.pingedLanes|=E.suspendedLanes&L,fi===E&&(Kr&L)===L&&(ii===4||ii===3&&(Kr&130023424)===Kr&&500>Ci()-Vh?ql(E,0):zu|=L),qs(E,T)}function mb(E,T){T===0&&((E.mode&1)===0?T=1:(T=Gn,Gn<<=1,(Gn&130023424)===0&&(Gn=4194304)));var L=ar();E=Fc(E,T),E!==null&&(gu(E,T,L),qs(E,L))}function K_(E){var T=E.memoizedState,L=0;T!==null&&(L=T.retryLane),mb(E,L)}function G_(E,T){var L=0;switch(E.tag){case 13:var F=E.stateNode,Y=E.memoizedState;Y!==null&&(L=Y.retryLane);break;case 19:F=E.stateNode;break;default:throw Error(o(314))}F!==null&&F.delete(T),mb(E,L)}var gb;gb=function(E,T,L){if(E!==null)if(E.memoizedProps!==T.pendingProps||qn.current)Vi=!0;else{if((E.lanes&L)===0&&(T.flags&128)===0)return Vi=!1,I0(E,T,L);Vi=(E.flags&131072)!==0}else Vi=!1,qr&&(T.flags&1048576)!==0&&N_(T,o0,T.index);switch(T.lanes=0,T.tag){case 2:var F=T.type;E!==null&&(E.alternate=null,T.alternate=null,T.flags|=2),E=T.pendingProps;var Y=en(T,jn.current);ef(T,L),Y=uf(null,T,F,E,Y,L);var re=kc();return T.flags|=1,typeof Y=="object"&&Y!==null&&typeof Y.render=="function"&&Y.$$typeof===void 0?(T.tag=1,T.memoizedState=null,T.updateQueue=null,Zn(F)?(re=!0,Fi(T)):re=!1,T.memoizedState=Y.state!==null&&Y.state!==void 0?Y.state:null,tf(T),Y.updater=i0,T.stateNode=Y,Y._reactInternals=T,Dv(T,F,E,L),T=ps(null,T,F,!0,re,L)):(T.tag=0,qr&&re&&Bv(T),ri(null,T,Y,L),T=T.child),T;case 16:F=T.elementType;e:{switch(E!==null&&(E.alternate=null,T.alternate=null,T.flags|=2),E=T.pendingProps,Y=F._init,F=Y(F._payload),T.type=F,Y=T.tag=rC(F),E=Hs(F,E),Y){case 0:T=Ul(null,T,F,E,L);break e;case 1:T=ku(null,T,F,E,L);break e;case 11:T=Or(null,T,F,E,L);break e;case 14:T=Pr(null,T,F,Hs(F.type,E),L);break e}throw Error(o(306,F,""))}return T;case 0:return F=T.type,Y=T.pendingProps,Y=T.elementType===F?Y:Hs(F,Y),Ul(E,T,F,Y,L);case 1:return F=T.type,Y=T.pendingProps,Y=T.elementType===F?Y:Hs(F,Y),ku(E,T,F,Y,L);case 3:e:{if(Oh(T),E===null)throw Error(o(387));F=T.pendingProps,re=T.memoizedState,Y=re.element,Ov(E,T),r0(T,F,null,L);var Le=T.memoizedState;if(F=Le.element,Be&&re.isDehydrated)if(re={element:F,isDehydrated:!1,cache:Le.cache,transitions:Le.transitions},T.updateQueue.baseState=re,T.memoizedState=re,T.flags&256){Y=Error(o(423)),T=Qv(E,T,F,L,Y);break e}else if(F!==Y){Y=Error(o(424)),T=Qv(E,T,F,L,Y);break e}else for(Be&&(es=Zr(T.stateNode.containerInfo),Ps=T,qr=!0,Do=null,rf=!1),L=B_(T,null,F,L),T.child=L;L;)L.flags=L.flags&-3|4096,L=L.sibling;else{if(sf(),F===Y){T=js(E,T,L);break e}ri(E,T,F,L)}T=T.child}return T;case 5:return F_(T),E===null&&Ac(T),F=T.type,Y=T.pendingProps,re=E!==null?E.memoizedProps:null,Le=Y.children,pe(F,Y)?Le=null:re!==null&&pe(F,re)&&(T.flags|=32),Cs(E,T),ri(E,T,Le,L),T.child;case 6:return E===null&&Ac(T),null;case 13:return eb(E,T,L);case 4:return c0(T,T.stateNode.containerInfo),F=T.pendingProps,E===null?T.child=Nl(T,null,F,L):ri(E,T,F,L),T.child;case 11:return F=T.type,Y=T.pendingProps,Y=T.elementType===F?Y:Hs(F,Y),Or(E,T,F,Y,L);case 7:return ri(E,T,T.pendingProps,L),T.child;case 8:return ri(E,T,T.pendingProps.children,L),T.child;case 12:return ri(E,T,T.pendingProps.children,L),T.child;case 10:e:{if(F=T.type._context,Y=T.pendingProps,re=T.memoizedProps,Le=Y.value,xu(T,F,Le),re!==null)if(Ts(re.value,Le)){if(re.children===Y.children&&!qn.current){T=js(E,T,L);break e}}else for(re=T.child,re!==null&&(re.return=T);re!==null;){var Ze=re.dependencies;if(Ze!==null){Le=re.child;for(var yt=Ze.firstContext;yt!==null;){if(yt.context===F){if(re.tag===1){yt=Rl(-1,L&-L),yt.tag=2;var Rt=re.updateQueue;if(Rt!==null){Rt=Rt.shared;var Xt=Rt.pending;Xt===null?yt.next=yt:(yt.next=Xt.next,Xt.next=yt),Rt.pending=yt}}re.lanes|=L,yt=re.alternate,yt!==null&&(yt.lanes|=L),wu(re.return,L,T),Ze.lanes|=L;break}yt=yt.next}}else if(re.tag===10)Le=re.type===T.type?null:re.child;else if(re.tag===18){if(Le=re.return,Le===null)throw Error(o(341));Le.lanes|=L,Ze=Le.alternate,Ze!==null&&(Ze.lanes|=L),wu(Le,L,T),Le=re.sibling}else Le=re.child;if(Le!==null)Le.return=re;else for(Le=re;Le!==null;){if(Le===T){Le=null;break}if(re=Le.sibling,re!==null){re.return=Le.return,Le=re;break}Le=Le.return}re=Le}ri(E,T,Y.children,L),T=T.child}return T;case 9:return Y=T.type,F=T.pendingProps.children,ef(T,L),Y=Vs(Y),F=F(Y),T.flags|=1,ri(E,T,F,L),T.child;case 14:return F=T.type,Y=Hs(F,T.pendingProps),Y=Hs(F.type,Y),Pr(E,T,F,Y,L);case 15:return Fl(E,T,T.type,T.pendingProps,L);case 17:return F=T.type,Y=T.pendingProps,Y=T.elementType===F?Y:Hs(F,Y),E!==null&&(E.alternate=null,T.alternate=null,T.flags|=2),T.tag=1,Zn(F)?(E=!0,Fi(T)):E=!1,ef(T,L),k_(T,F,Y),Dv(T,F,Y,L),ps(null,T,F,!0,E,L);case 19:return Nu(E,T,L);case 22:return ts(E,T,L)}throw Error(o(156,T.tag))};function k0(E,T){return yu(E,T)}function X_(E,T,L,F){this.tag=E,this.key=L,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=T,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=F,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yo(E,T,L,F){return new X_(E,T,L,F)}function O0(E){return E=E.prototype,!(!E||!E.isReactComponent)}function rC(E){if(typeof E=="function")return O0(E)?1:0;if(E!=null){if(E=E.$$typeof,E===g)return 11;if(E===b)return 14}return 2}function Kl(E,T){var L=E.alternate;return L===null?(L=yo(E.tag,T,E.key,E.mode),L.elementType=E.elementType,L.type=E.type,L.stateNode=E.stateNode,L.alternate=E,E.alternate=L):(L.pendingProps=T,L.type=E.type,L.flags=0,L.subtreeFlags=0,L.deletions=null),L.flags=E.flags&14680064,L.childLanes=E.childLanes,L.lanes=E.lanes,L.child=E.child,L.memoizedProps=E.memoizedProps,L.memoizedState=E.memoizedState,L.updateQueue=E.updateQueue,T=E.dependencies,L.dependencies=T===null?null:{lanes:T.lanes,firstContext:T.firstContext},L.sibling=E.sibling,L.index=E.index,L.ref=E.ref,L}function N0(E,T,L,F,Y,re){var Le=2;if(F=E,typeof E=="function")O0(E)&&(Le=1);else if(typeof E=="string")Le=5;else e:switch(E){case u:return ju(L.children,Y,re,T);case d:Le=8,Y|=8;break;case h:return E=yo(12,L,T,Y|2),E.elementType=h,E.lanes=re,E;case m:return E=yo(13,L,T,Y),E.elementType=m,E.lanes=re,E;case y:return E=yo(19,L,T,Y),E.elementType=y,E.lanes=re,E;case S:return Xh(L,Y,re,T);default:if(typeof E=="object"&&E!==null)switch(E.$$typeof){case f:Le=10;break e;case p:Le=9;break e;case g:Le=11;break e;case b:Le=14;break e;case x:Le=16,F=null;break e}throw Error(o(130,E==null?E:typeof E,""))}return T=yo(Le,L,T,Y),T.elementType=E,T.type=F,T.lanes=re,T}function ju(E,T,L,F){return E=yo(7,E,F,T),E.lanes=L,E}function Xh(E,T,L,F){return E=yo(22,E,F,T),E.elementType=S,E.lanes=L,E.stateNode={},E}function L0(E,T,L){return E=yo(6,E,null,T),E.lanes=L,E}function D0(E,T,L){return T=yo(4,E.children!==null?E.children:[],E.key,T),T.lanes=L,T.stateNode={containerInfo:E.containerInfo,pendingChildren:null,implementation:E.implementation},T}function B0(E,T,L,F,Y){this.tag=T,this.containerInfo=E,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=_e,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Km(0),this.expirationTimes=Km(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Km(0),this.identifierPrefix=F,this.onRecoverableError=Y,Be&&(this.mutableSourceEagerHydrationData=null)}function Y_(E,T,L,F,Y,re,Le,Ze,yt){return E=new B0(E,T,L,Ze,yt),T===1?(T=1,re===!0&&(T|=8)):T=0,re=yo(3,null,null,T),E.current=re,re.stateNode=E,re.memoizedState={element:F,isDehydrated:L,cache:null,transitions:null},tf(re),E}function Z_(E){if(!E)return yn;E=E._reactInternals;e:{if(A(E)!==E||E.tag!==1)throw Error(o(170));var T=E;do{switch(T.tag){case 3:T=T.stateNode.context;break e;case 1:if(Zn(T.type)){T=T.stateNode.__reactInternalMemoizedMergedChildContext;break e}}T=T.return}while(T!==null);throw Error(o(171))}if(E.tag===1){var L=E.type;if(Zn(L))return Cl(E,L,T)}return T}function J_(E){var T=E._reactInternals;if(T===void 0)throw typeof E.render=="function"?Error(o(188)):(E=Object.keys(E).join(","),Error(o(268,E)));return E=O(T),E===null?null:E.stateNode}function Uo(E,T){if(E=E.memoizedState,E!==null&&E.dehydrated!==null){var L=E.retryLane;E.retryLane=L!==0&&L<T?L:T}}function Yh(E,T){Uo(E,T),(E=E.alternate)&&Uo(E,T)}function F0(E){return E=O(E),E===null?null:E.stateNode}function Q_(){return null}return n.attemptContinuousHydration=function(E){if(E.tag===13){var T=ar();gs(E,134217728,T),Yh(E,134217728)}},n.attemptHydrationAtCurrentPriority=function(E){if(E.tag===13){var T=ar(),L=ha(E);gs(E,L,T),Yh(E,L)}},n.attemptSynchronousHydration=function(E){switch(E.tag){case 3:var T=E.stateNode;if(T.current.memoizedState.isDehydrated){var L=zs(T.pendingLanes);L!==0&&(Fa(T,L|1),qs(T,Ci()),(An&6)===0&&(Hu(),ko()))}break;case 13:var F=ar();_f(function(){return gs(E,1,F)}),Yh(E,1)}},n.batchedUpdates=function(E,T){var L=An;An|=1;try{return E(T)}finally{An=L,An===0&&(Hu(),Zm&&ko())}},n.createComponentSelector=function(E){return{$$typeof:Uh,value:E}},n.createContainer=function(E,T,L,F,Y,re,Le){return Y_(E,T,!1,null,L,F,Y,re,Le)},n.createHasPseudoClassSelector=function(E){return{$$typeof:Bu,value:E}},n.createHydrationContainer=function(E,T,L,F,Y,re,Le,Ze,yt){return E=Y_(L,F,!0,E,Y,re,Le,Ze,yt),E.context=Z_(null),L=E.current,F=ar(),Y=ha(L),re=Rl(F,Y),re.callback=T??null,Cc(L,re),E.current.lanes=Y,gu(E,Y,F),qs(E,F),E},n.createPortal=function(E,T,L){var F=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:F==null?null:""+F,children:E,containerInfo:T,implementation:L}},n.createRoleSelector=function(E){return{$$typeof:Fu,value:E}},n.createTestNameSelector=function(E){return{$$typeof:Hl,value:E}},n.createTextSelector=function(E){return{$$typeof:vf,value:E}},n.deferredUpdates=function(E){var T=zn,L=Sr.transition;try{return Sr.transition=null,zn=16,E()}finally{zn=T,Sr.transition=L}},n.discreteUpdates=function(E,T,L,F,Y){var re=zn,Le=Sr.transition;try{return Sr.transition=null,zn=1,E(T,L,F,Y)}finally{zn=re,Sr.transition=Le,An===0&&Hu()}},n.findAllNodes=Vl,n.findBoundingRects=function(E,T){if(!te)throw Error(o(363));T=Vl(E,T),E=[];for(var L=0;L<T.length;L++)E.push(X(T[L]));for(T=E.length-1;0<T;T--){L=E[T];for(var F=L.x,Y=F+L.width,re=L.y,Le=re+L.height,Ze=T-1;0<=Ze;Ze--)if(T!==Ze){var yt=E[Ze],Rt=yt.x,Xt=Rt+yt.width,Sn=yt.y,fn=Sn+yt.height;if(F>=Rt&&re>=Sn&&Y<=Xt&&Le<=fn){E.splice(T,1);break}else if(F!==Rt||L.width!==yt.width||fn<re||Sn>Le){if(!(re!==Sn||L.height!==yt.height||Xt<F||Rt>Y)){Rt>F&&(yt.width+=Rt-F,yt.x=F),Xt<Y&&(yt.width=Y-Rt),E.splice(T,1);break}}else{Sn>re&&(yt.height+=Sn-re,yt.y=re),fn<Le&&(yt.height=Le-Sn),E.splice(T,1);break}}}return E},n.findHostInstance=J_,n.findHostInstanceWithNoPortals=function(E){return E=k(E),E=E!==null?$(E):null,E===null?null:E.stateNode},n.findHostInstanceWithWarning=function(E){return J_(E)},n.flushControlled=function(E){var T=An;An|=1;var L=Sr.transition,F=zn;try{Sr.transition=null,zn=1,E()}finally{zn=F,Sr.transition=L,An=T,An===0&&(Hu(),ko())}},n.flushPassiveEffects=ja,n.flushSync=_f,n.focusWithin=function(E,T){if(!te)throw Error(o(363));for(E=$h(E),T=po(E,T),T=Array.from(T),E=0;E<T.length;){var L=T[E++];if(!Ne(L)){if(L.tag===5&&xe(L.stateNode))return!0;for(L=L.child;L!==null;)T.push(L),L=L.sibling}}return!1},n.getCurrentUpdatePriority=function(){return zn},n.getFindAllNodesFailureDescription=function(E,T){if(!te)throw Error(o(363));var L=0,F=[];E=[$h(E),0];for(var Y=0;Y<E.length;){var re=E[Y++],Le=E[Y++],Ze=T[Le];if((re.tag!==5||!Ne(re))&&(zh(re,Ze)&&(F.push(Dc(Ze)),Le++,Le>L&&(L=Le)),Le<T.length))for(re=re.child;re!==null;)E.push(re,Le),re=re.sibling}if(L<T.length){for(E=[];L<T.length;L++)E.push(Dc(T[L]));return`findAllNodes was able to match part of the selector:
  `+(F.join(" > ")+`

No matching component was found for:
  `)+E.join(" > ")}return null},n.getPublicRootInstance=function(E){if(E=E.current,!E.child)return null;switch(E.child.tag){case 5:return q(E.child.stateNode);default:return E.child.stateNode}},n.injectIntoDevTools=function(E){if(E={bundleType:E.bundleType,version:E.version,rendererPackageName:E.rendererPackageName,rendererConfig:E.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:F0,findFiberByHostInstance:E.findFiberByHostInstance||Q_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")E=!1;else{var T=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(T.isDisabled||!T.supportsFiber)E=!0;else{try{vh=T.inject(E),Ua=T}catch{}E=!!T.checkDCE}}return E},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(E,T,L,F){if(!te)throw Error(o(363));E=Vl(E,T);var Y=Ve(E,L,F).disconnect;return{disconnect:function(){Y()}}},n.registerMutableSourceForHydration=function(E,T){var L=T._getVersion;L=L(T._source),E.mutableSourceEagerHydrationData==null?E.mutableSourceEagerHydrationData=[T,L]:E.mutableSourceEagerHydrationData.push(T,L)},n.runWithPriority=function(E,T){var L=zn;try{return zn=E,T()}finally{zn=L}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(E,T,L,F){var Y=T.current,re=ar(),Le=ha(Y);return L=Z_(L),T.context===null?T.context=L:T.pendingContext=L,T=Rl(re,Le),T.payload={element:E},F=F===void 0?null:F,F!==null&&(T.callback=F),Cc(Y,T),E=gs(Y,Le,re),E!==null&&t0(E,Y,Le),Le},n}),NM}(function(t){t.exports=Y0e()})(rW);var Z0e=W0e(rW.exports);const J0e=t=>typeof t=="object"&&typeof t.then=="function",vm=[];function iW(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e)return!1;const r=t.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!n(t[i],e[i]))return!1;return!0}function sW(t,e=null,n=!1,r={}){e===null&&(e=[t]);for(const s of vm)if(iW(e,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!n)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=vm.indexOf(i);s!==-1&&vm.splice(s,1)},promise:(J0e(t)?t:t(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(vm.push(i),!n)throw i.promise}const Q0e=(t,e,n)=>sW(t,e,!1,n),ege=(t,e,n)=>void sW(t,e,!0,n),tge=t=>{if(t===void 0||t.length===0)vm.splice(0,vm.length);else{const e=vm.find(n=>iW(t,n.keys,n.equal));e&&e.remove()}},_O={},nge=t=>void Object.assign(_O,t);function rge(t,e){function n(u,{args:d=[],attach:h,...f},p){let g=`${u[0].toUpperCase()}${u.slice(1)}`,m;if(u==="primitive"){if(f.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const y=f.object;m=ty(y,{type:u,root:p,attach:h,primitive:!0})}else{const y=_O[g];if(!y)throw new Error(`R3F: ${g} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");m=ty(new y(...d),{type:u,root:p,attach:h,memoizedProps:{args:d}})}return m.__r3f.attach===void 0&&(m instanceof Mn?m.__r3f.attach="geometry":m instanceof Us&&(m.__r3f.attach="material")),g!=="inject"&&BM(m,f),m}function r(u,d){let h=!1;if(d){var f,p;(f=d.__r3f)!=null&&f.attach?DM(u,d,d.__r3f.attach):d.isObject3D&&u.isObject3D&&(u.add(d),h=!0),h||(p=u.__r3f)==null||p.objects.push(d),d.__r3f||ty(d,{}),d.__r3f.parent=u,QR(d),ny(d)}}function i(u,d,h){let f=!1;if(d){var p,g;if((p=d.__r3f)!=null&&p.attach)DM(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){d.parent=u,d.dispatchEvent({type:"added"});const m=u.children.filter(b=>b!==d),y=m.indexOf(h);u.children=[...m.slice(0,y),d,...m.slice(y)],f=!0}f||(g=u.__r3f)==null||g.objects.push(d),d.__r3f||ty(d,{}),d.__r3f.parent=u,QR(d),ny(d)}}function s(u,d,h=!1){u&&[...u].forEach(f=>o(d,f,h))}function o(u,d,h){if(d){var f,p,g;if(d.__r3f&&(d.__r3f.parent=null),(f=u.__r3f)!=null&&f.objects&&(u.__r3f.objects=u.__r3f.objects.filter(S=>S!==d)),(p=d.__r3f)!=null&&p.attach)q8(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){var m;u.remove(d),(m=d.__r3f)!=null&&m.root&&dge(d.__r3f.root,d)}const b=(g=d.__r3f)==null?void 0:g.primitive,x=h===void 0?d.dispose!==null&&!b:h;if(!b){var y;s((y=d.__r3f)==null?void 0:y.objects,d,x),s(d.children,d,x)}delete d.__r3f,x&&d.dispose&&d.type!=="Scene"&&z2.exports.unstable_scheduleCallback(z2.exports.unstable_IdlePriority,()=>{try{d.dispose()}catch{}}),ny(u)}}function a(u,d,h,f){var p;const g=(p=u.__r3f)==null?void 0:p.parent;if(!g)return;const m=n(d,h,u.__r3f.root);if(u.children){for(const y of u.children)y.__r3f&&r(m,y);u.children=u.children.filter(y=>!y.__r3f)}u.__r3f.objects.forEach(y=>r(m,y)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(g,u),m.parent&&(m.__r3f.autoRemovedBeforeAppend=!0),r(g,m),m.raycast&&m.__r3f.eventCount&&m.__r3f.root.getState().internal.interaction.push(m),[f,f.alternate].forEach(y=>{y!==null&&(y.stateNode=m,y.ref&&(typeof y.ref=="function"?y.ref(m):y.ref.current=m))})}const c=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Z0e({createInstance:n,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,d)=>{if(!d)return;const h=u.getState().scene;h.__r3f&&(h.__r3f.root=u,r(h,d))},removeChildFromContainer:(u,d)=>{d&&o(u.getState().scene,d)},insertInContainerBefore:(u,d,h)=>{if(!d||!h)return;const f=u.getState().scene;f.__r3f&&i(f,d,h)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var d;return!!((d=u==null?void 0:u.__r3f)!=null?d:{}).handlers},prepareUpdate(u,d,h,f){var p;if(((p=u==null?void 0:u.__r3f)!=null?p:{}).primitive&&f.object&&f.object!==u)return[!0];{const{args:m=[],children:y,...b}=f,{args:x=[],children:S,...P}=h;if(!Array.isArray(m))throw new Error("R3F: the args prop must be an array!");if(m.some((I,C)=>I!==x[C]))return[!0];const _=fW(u,b,P,!0);return _.changes.length?[!1,_]:null}},commitUpdate(u,[d,h],f,p,g,m){d?a(u,f,g,m):BM(u,h)},commitMount(u,d,h,f){var p;const g=(p=u.__r3f)!=null?p:{};u.raycast&&g.handlers&&g.eventCount&&u.__r3f.root.getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>ty(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var d;const{attach:h,parent:f}=(d=u.__r3f)!=null?d:{};h&&f&&q8(f,u,h),u.isObject3D&&(u.visible=!1),ny(u)},unhideInstance(u,d){var h;const{attach:f,parent:p}=(h=u.__r3f)!=null?h:{};f&&p&&DM(p,u,f),(u.isObject3D&&d.visible==null||d.visible)&&(u.visible=!0),ny(u)},createTextInstance:c,hideTextInstance:c,unhideTextInstance:c,getCurrentEventPriority:()=>e?e():ym.exports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&ni.fun(performance.now)?performance.now:ni.fun(Date.now)?Date.now:()=>0,scheduleTimeout:ni.fun(setTimeout)?setTimeout:void 0,cancelTimeout:ni.fun(clearTimeout)?clearTimeout:void 0}),applyProps:BM}}var H8,V8;const LM=t=>"colorSpace"in t||"outputColorSpace"in t,oW=()=>{var t;return(t=_O.ColorManagement)!=null?t:null},aW=t=>t&&t.isOrthographicCamera,ige=t=>t&&t.hasOwnProperty("current"),l_=typeof window<"u"&&((H8=window.document)!=null&&H8.createElement||((V8=window.navigator)==null?void 0:V8.product)==="ReactNative")?N.useLayoutEffect:N.useEffect;function lW(t){const e=N.useRef(t);return l_(()=>void(e.current=t),[t]),e}function sge({set:t}){return l_(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}let cW=class extends N.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}};cW.getDerivedStateFromError=()=>({error:!0});const uW="__default",W8=new Map,oge=t=>t&&!!t.memoized&&!!t.changes;function dW(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const qb=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()},ni={obj:t=>t===Object(t)&&!ni.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(ni.str(t)||ni.num(t))return t===e;const s=ni.obj(t);if(s&&r==="reference")return t===e;const o=ni.arr(t);if(o&&n==="reference")return t===e;if((o||s)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;if(s&&n==="shallow"&&r==="shallow"){for(a in i?e:t)if(!ni.equ(t[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:t)if(t[a]!==e[a])return!1;if(ni.und(a)){if(o&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function age(t){const e={nodes:{},materials:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}function lge(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function ty(t,e){const n=t;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function JR(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce((s,o)=>s[o],t),{target:n,key:i}}else return{target:n,key:e}}const j8=/-\d+$/;function DM(t,e,n){if(ni.str(n)){if(j8.test(n)){const s=n.replace(j8,""),{target:o,key:a}=JR(t,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=JR(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function q8(t,e,n){var r,i;if(ni.str(n)){const{target:s,key:o}=JR(t,n),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(t,e);(i=e.__r3f)==null||delete i.previousAttach}function fW(t,{children:e,key:n,ref:r,...i},{children:s,key:o,ref:a,...c}={},l=!1){var u;const d=(u=t==null?void 0:t.__r3f)!=null?u:{},h=Object.entries(i),f=[];if(l){const g=Object.keys(c);for(let m=0;m<g.length;m++)i.hasOwnProperty(g[m])||h.unshift([g[m],uW+"remove"])}h.forEach(([g,m])=>{var y;if((y=t.__r3f)!=null&&y.primitive&&g==="object"||ni.equ(m,c[g]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(g))return f.push([g,m,!0,[]]);let b=[];g.includes("-")&&(b=g.split("-")),f.push([g,m,!1,b]);for(const x in i){const S=i[x];x.startsWith(`${g}-`)&&f.push([x,S,!1,x.split("-")])}});const p={...i};return d.memoizedProps&&d.memoizedProps.args&&(p.args=d.memoizedProps.args),d.memoizedProps&&d.memoizedProps.attach&&(p.attach=d.memoizedProps.attach),{memoized:p,changes:f}}function BM(t,e){var n,r,i;const s=(n=t.__r3f)!=null?n:{},o=s.root,a=(r=o==null||o.getState==null?void 0:o.getState())!=null?r:{},{memoized:c,changes:l}=oge(e)?e:fW(t,e),u=s.eventCount;t.__r3f&&(t.__r3f.memoizedProps=c);for(let h=0;h<l.length;h++){let[f,p,g,m]=l[h];if(LM(t)){const S="srgb",P="srgb-linear";f==="encoding"?(f="colorSpace",p=p===3001?S:P):f==="outputEncoding"&&(f="outputColorSpace",p=p===3001?S:P)}let y=t,b=y[f];if(m.length&&(b=m.reduce((x,S)=>x[S],t),!(b&&b.set))){const[x,...S]=m.reverse();y=S.reverse().reduce((P,_)=>P[_],t),f=x}if(p===uW+"remove")if(y.constructor){let x=W8.get(y.constructor);x||(x=new y.constructor,W8.set(y.constructor,x)),p=x[f]}else p=0;if(g)p?s.handlers[f]=p:delete s.handlers[f],s.eventCount=Object.keys(s.handlers).length;else if(b&&b.set&&(b.copy||b instanceof Im)){if(Array.isArray(p))b.fromArray?b.fromArray(p):b.set(...p);else if(b.copy&&p&&p.constructor&&b.constructor===p.constructor)b.copy(p);else if(p!==void 0){const x=b instanceof Wt;!x&&b.setScalar?b.setScalar(p):b instanceof Im&&p instanceof Im?b.mask=p.mask:b.set(p),!oW()&&!a.linear&&x&&b.convertSRGBToLinear()}}else if(y[f]=p,y[f]instanceof vi&&y[f].format===to&&y[f].type===xc){const x=y[f];LM(x)&&LM(a.gl)?x.colorSpace=a.gl.outputColorSpace:x.encoding=a.gl.outputEncoding}ny(t)}if(s.parent&&a.internal&&t.raycast&&u!==s.eventCount){const h=a.internal.interaction.indexOf(t);h>-1&&a.internal.interaction.splice(h,1),s.eventCount&&a.internal.interaction.push(t)}return!(l.length===1&&l[0][0]==="onUpdate")&&l.length&&(i=t.__r3f)!=null&&i.parent&&QR(t),t}function ny(t){var e,n;const r=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function QR(t){t.onUpdate==null||t.onUpdate(t)}function cge(t,e){t.manual||(aW(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function _E(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function uge(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return ym.exports.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return ym.exports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return ym.exports.ContinuousEventPriority;default:return ym.exports.DefaultEventPriority}}function hW(t,e,n,r){const i=n.get(e);i&&(n.delete(e),n.size===0&&(t.delete(r),i.target.releasePointerCapture(r)))}function dge(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(i)}),n.capturedMap.forEach((r,i)=>{hW(n.capturedMap,e,r,i)})}function fge(t){function e(c){const{internal:l}=t.getState(),u=c.offsetX-l.initialClick[0],d=c.offsetY-l.initialClick[1];return Math.round(Math.sqrt(u*u+d*d))}function n(c){return c.filter(l=>["Move","Over","Enter","Out","Leave"].some(u=>{var d;return(d=l.__r3f)==null?void 0:d.handlers["onPointer"+u]}))}function r(c,l){const u=t.getState(),d=new Set,h=[],f=l?l(u.internal.interaction):u.internal.interaction;for(let y=0;y<f.length;y++){const b=qb(f[y]);b&&(b.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(c,u);function p(y){const b=qb(y);if(!b||!b.events.enabled||b.raycaster.camera===null)return[];if(b.raycaster.camera===void 0){var x;b.events.compute==null||b.events.compute(c,b,(x=b.previousRoot)==null?void 0:x.getState()),b.raycaster.camera===void 0&&(b.raycaster.camera=null)}return b.raycaster.camera?b.raycaster.intersectObject(y,!0):[]}let g=f.flatMap(p).sort((y,b)=>{const x=qb(y.object),S=qb(b.object);return!x||!S?y.distance-b.distance:S.events.priority-x.events.priority||y.distance-b.distance}).filter(y=>{const b=_E(y);return d.has(b)?!1:(d.add(b),!0)});u.events.filter&&(g=u.events.filter(g,u));for(const y of g){let b=y.object;for(;b;){var m;(m=b.__r3f)!=null&&m.eventCount&&h.push({...y,eventObject:b}),b=b.parent}}if("pointerId"in c&&u.internal.capturedMap.has(c.pointerId))for(let y of u.internal.capturedMap.get(c.pointerId).values())d.has(_E(y.intersection))||h.push(y.intersection);return h}function i(c,l,u,d){const h=t.getState();if(c.length){const f={stopped:!1};for(const p of c){const g=qb(p.object)||h,{raycaster:m,pointer:y,camera:b,internal:x}=g,S=new Ce(y.x,y.y,0).unproject(b),P=M=>{var k,O;return(k=(O=x.capturedMap.get(M))==null?void 0:O.has(p.eventObject))!=null?k:!1},_=M=>{const k={intersection:p,target:l.target};x.capturedMap.has(M)?x.capturedMap.get(M).set(p.eventObject,k):x.capturedMap.set(M,new Map([[p.eventObject,k]])),l.target.setPointerCapture(M)},I=M=>{const k=x.capturedMap.get(M);k&&hW(x.capturedMap,p.eventObject,k,M)};let C={};for(let M in l){let k=l[M];typeof k!="function"&&(C[M]=k)}let A={...p,...C,pointer:y,intersections:c,stopped:f.stopped,delta:u,unprojectedPoint:S,ray:m.ray,camera:b,stopPropagation(){const M="pointerId"in l&&x.capturedMap.get(l.pointerId);if((!M||M.has(p.eventObject))&&(A.stopped=f.stopped=!0,x.hovered.size&&Array.from(x.hovered.values()).find(k=>k.eventObject===p.eventObject))){const k=c.slice(0,c.indexOf(p));s([...k,p])}},target:{hasPointerCapture:P,setPointerCapture:_,releasePointerCapture:I},currentTarget:{hasPointerCapture:P,setPointerCapture:_,releasePointerCapture:I},nativeEvent:l};if(d(A),f.stopped===!0)break}}return c}function s(c){const{internal:l}=t.getState();for(const u of l.hovered.values())if(!c.length||!c.find(d=>d.object===u.object&&d.index===u.index&&d.instanceId===u.instanceId)){const h=u.eventObject.__r3f,f=h==null?void 0:h.handlers;if(l.hovered.delete(_E(u)),h!=null&&h.eventCount){const p={...u,intersections:c};f.onPointerOut==null||f.onPointerOut(p),f.onPointerLeave==null||f.onPointerLeave(p)}}}function o(c,l){for(let u=0;u<l.length;u++){const d=l[u].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(c)}}function a(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return l=>{const{internal:u}=t.getState();"pointerId"in l&&u.capturedMap.has(l.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(l.pointerId)&&(u.capturedMap.delete(l.pointerId),s([]))})}}return function(u){const{onPointerMissed:d,internal:h}=t.getState();h.lastEvent.current=u;const f=c==="onPointerMove",p=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",m=r(u,f?n:void 0),y=p?e(u):0;c==="onPointerDown"&&(h.initialClick=[u.offsetX,u.offsetY],h.initialHits=m.map(x=>x.eventObject)),p&&!m.length&&y<=2&&(o(u,h.interaction),d&&d(u)),f&&s(m);function b(x){const S=x.eventObject,P=S.__r3f,_=P==null?void 0:P.handlers;if(P!=null&&P.eventCount)if(f){if(_.onPointerOver||_.onPointerEnter||_.onPointerOut||_.onPointerLeave){const I=_E(x),C=h.hovered.get(I);C?C.stopped&&x.stopPropagation():(h.hovered.set(I,x),_.onPointerOver==null||_.onPointerOver(x),_.onPointerEnter==null||_.onPointerEnter(x))}_.onPointerMove==null||_.onPointerMove(x)}else{const I=_[c];I?(!p||h.initialHits.includes(S))&&(o(u,h.interaction.filter(C=>!h.initialHits.includes(C))),I(x)):p&&h.initialHits.includes(S)&&o(u,h.interaction.filter(C=>!h.initialHits.includes(C)))}}i(m,u,y,b)}}return{handlePointer:a}}const pW=t=>!!(t!=null&&t.render),mW=N.createContext(null),hge=(t,e)=>{const n=G0e((a,c)=>{const l=new Ce,u=new Ce,d=new Ce;function h(y=c().camera,b=u,x=c().size){const{width:S,height:P,top:_,left:I}=x,C=S/P;b instanceof Ce?d.copy(b):d.set(...b);const A=y.getWorldPosition(l).distanceTo(d);if(aW(y))return{width:S/y.zoom,height:P/y.zoom,top:_,left:I,factor:1,distance:A,aspect:C};{const M=y.fov*Math.PI/180,k=2*Math.tan(M/2)*A,O=k*(S/P);return{width:O,height:k,top:_,left:I,factor:S/O,distance:A,aspect:C}}}let f;const p=y=>a(b=>({performance:{...b.performance,current:y}})),g=new St;return{set:a,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(y=1)=>t(c(),y),advance:(y,b)=>e(y,b,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new gO,pointer:g,mouse:g,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const y=c();f&&clearTimeout(f),y.performance.current!==y.performance.min&&p(y.performance.min),f=setTimeout(()=>p(c().performance.max),y.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:h},setEvents:y=>a(b=>({...b,events:{...b.events,...y}})),setSize:(y,b,x,S,P)=>{const _=c().camera,I={width:y,height:b,top:S||0,left:P||0,updateStyle:x};a(C=>({size:I,viewport:{...C.viewport,...h(_,u,I)}}))},setDpr:y=>a(b=>{const x=dW(y);return{viewport:{...b.viewport,dpr:x,initialDpr:b.viewport.initialDpr||x}}}),setFrameloop:(y="always")=>{const b=c().clock;b.stop(),b.elapsedTime=0,y!=="never"&&(b.start(),b.elapsedTime=0),a(()=>({frameloop:y}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:N.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(y,b,x)=>{const S=c().internal;return S.priority=S.priority+(b>0?1:0),S.subscribers.push({ref:y,priority:b,store:x}),S.subscribers=S.subscribers.sort((P,_)=>P.priority-_.priority),()=>{const P=c().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(b>0?1:0),P.subscribers=P.subscribers.filter(_=>_.ref!==y))}}}}}),r=n.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return n.subscribe(()=>{const{camera:a,size:c,viewport:l,gl:u,set:d}=n.getState();if(c.width!==i.width||c.height!==i.height||l.dpr!==s){var h;i=c,s=l.dpr,cge(a,c),u.setPixelRatio(l.dpr);const f=(h=c.updateStyle)!=null?h:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(c.width,c.height,f)}a!==o&&(o=a,d(f=>({viewport:{...f.viewport,...f.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};let SE,pge=new Set,mge=new Set,gge=new Set;function FM(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function Kb(t,e){switch(t){case"before":return FM(pge,e);case"after":return FM(mge,e);case"tail":return FM(gge,e)}}let UM,$M;function zM(t,e,n){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),UM=e.internal.subscribers,SE=0;SE<UM.length;SE++)$M=UM[SE],$M.ref.current($M.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function yge(t){let e=!1,n,r,i;function s(c){r=requestAnimationFrame(s),e=!0,n=0,Kb("before",c);for(const u of t.values()){var l;i=u.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((l=i.gl.xr)!=null&&l.isPresenting)&&(n+=zM(c,i))}if(Kb("after",c),n===0)return Kb("tail",c),e=!1,cancelAnimationFrame(r)}function o(c,l=1){var u;if(!c)return t.forEach(d=>o(d.store.getState()),l);(u=c.gl.xr)!=null&&u.isPresenting||!c.internal.active||c.frameloop==="never"||(c.internal.frames=Math.min(60,c.internal.frames+l),e||(e=!0,requestAnimationFrame(s)))}function a(c,l=!0,u,d){if(l&&Kb("before",c),u)zM(c,u,d);else for(const h of t.values())zM(c,h.store.getState());l&&Kb("after",c)}return{loop:s,invalidate:o,advance:a}}function gW(){const t=N.useContext(mW);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function Hx(t=n=>n,e){return gW()(t,e)}function SO(t,e=0){const n=gW(),r=n.getState().internal.subscribe,i=lW(t);return l_(()=>r(i,e,n),[e,r,n]),null}const K8=new WeakMap;function yW(t,e){return function(n,...r){let i=K8.get(n);return i||(i=new n,K8.set(n,i)),t&&t(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,c=>{c.scene&&Object.assign(c,age(c.scene)),o(c)},e,c=>a(new Error(`Could not load ${s}: ${c==null?void 0:c.message}`)))))).finally(()=>i.dispose==null?void 0:i.dispose())}}function EO(t,e,n,r){const i=Array.isArray(e)?e:[e],s=Q0e(yW(n,r),[t,...i],{equal:ni.equ});return Array.isArray(e)?s:s[0]}EO.preload=function(t,e,n){const r=Array.isArray(e)?e:[e];return ege(yW(n),[t,...r])};EO.clear=function(t,e){const n=Array.isArray(e)?e:[e];return tge([t,...n])};const Xy=new Map,{invalidate:G8,advance:X8}=yge(Xy),{reconciler:H2,applyProps:hg}=rge(Xy,uge),pg={objects:"shallow",strict:!1},vge=(t,e)=>{const n=typeof t=="function"?t(e):t;return pW(n)?n:new nW({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function bge(t,e){const n=typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=n}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:r,height:i,top:s,left:o}=t.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function xge(t){const e=Xy.get(t),n=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||hge(G8,X8),o=n||H2.createContainer(s,ym.exports.ConcurrentRoot,null,!1,null,"",i,null);e||Xy.set(t,{fiber:o,store:s});let a,c=!1,l;return{configure(u={}){let{gl:d,size:h,scene:f,events:p,onCreated:g,shadows:m=!1,linear:y=!1,flat:b=!1,legacy:x=!1,orthographic:S=!1,frameloop:P="always",dpr:_=[1,2],performance:I,raycaster:C,camera:A,onPointerMissed:M}=u,k=s.getState(),O=k.gl;k.gl||k.set({gl:O=vge(d,t)});let B=k.raycaster;B||k.set({raycaster:B=new GV});const{params:$,...U}=C||{};if(ni.equ(U,B,pg)||hg(B,{...U}),ni.equ($,B.params,pg)||hg(B,{params:{...B.params,...$}}),!k.camera||k.camera===l&&!ni.equ(l,A,pg)){l=A;const se=A instanceof e_,Z=se?A:S?new Qf(0,0,0,0,.1,1e3):new li(75,0,.1,1e3);se||(Z.position.z=5,A&&hg(Z,A),!k.camera&&!(A!=null&&A.rotation)&&Z.lookAt(0,0,0)),k.set({camera:Z}),B.camera=Z}if(!k.scene){let se;f instanceof D2?se=f:(se=new D2,f&&hg(se,f)),k.set({scene:ty(se)})}if(!k.xr){var q;const se=(pe,ue)=>{const le=s.getState();le.frameloop!=="never"&&X8(pe,!0,le,ue)},Z=()=>{const pe=s.getState();pe.gl.xr.enabled=pe.gl.xr.isPresenting,pe.gl.xr.setAnimationLoop(pe.gl.xr.isPresenting?se:null),pe.gl.xr.isPresenting||G8(pe)},ie={connect(){const pe=s.getState().gl;pe.xr.addEventListener("sessionstart",Z),pe.xr.addEventListener("sessionend",Z)},disconnect(){const pe=s.getState().gl;pe.xr.removeEventListener("sessionstart",Z),pe.xr.removeEventListener("sessionend",Z)}};typeof((q=O.xr)==null?void 0:q.addEventListener)=="function"&&ie.connect(),k.set({xr:ie})}if(O.shadowMap){const se=O.shadowMap.enabled,Z=O.shadowMap.type;if(O.shadowMap.enabled=!!m,ni.boo(m))O.shadowMap.type=Ey;else if(ni.str(m)){var K;const ie={basic:nH,percentage:UI,soft:Ey,variance:fc};O.shadowMap.type=(K=ie[m])!=null?K:Ey}else ni.obj(m)&&Object.assign(O.shadowMap,m);(se!==O.shadowMap.enabled||Z!==O.shadowMap.type)&&(O.shadowMap.needsUpdate=!0)}const V=oW();V&&("enabled"in V?V.enabled=!x:"legacyMode"in V&&(V.legacyMode=x)),hg(O,{outputEncoding:y?3e3:3001,toneMapping:b?eu:L3}),k.legacy!==x&&k.set(()=>({legacy:x})),k.linear!==y&&k.set(()=>({linear:y})),k.flat!==b&&k.set(()=>({flat:b})),d&&!ni.fun(d)&&!pW(d)&&!ni.equ(d,O,pg)&&hg(O,d),p&&!k.events.handlers&&k.set({events:p(s)});const Q=bge(t,h);return ni.equ(Q,k.size,pg)||k.setSize(Q.width,Q.height,Q.updateStyle,Q.top,Q.left),_&&k.viewport.dpr!==dW(_)&&k.setDpr(_),k.frameloop!==P&&k.setFrameloop(P),k.onPointerMissed||k.set({onPointerMissed:M}),I&&!ni.equ(I,k.performance,pg)&&k.set(se=>({performance:{...se.performance,...I}})),a=g,c=!0,this},render(u){return c||this.configure(),H2.updateContainer(N.createElement(wge,{store:s,children:u,onCreated:a,rootElement:t}),o,null,()=>{}),s},unmount(){vW(t)}}}function wge({store:t,children:e,onCreated:n,rootElement:r}){return l_(()=>{const i=t.getState();i.set(s=>({internal:{...s.internal,active:!0}})),n&&n(i),t.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),N.createElement(mW.Provider,{value:t},e)}function vW(t,e){const n=Xy.get(t),r=n==null?void 0:n.fiber;if(r){const i=n==null?void 0:n.store.getState();i&&(i.internal.active=!1),H2.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,c;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(c=i.gl)!=null&&c.xr&&i.xr.disconnect(),lge(i),Xy.delete(t)}catch{}},500)})}}H2.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:N.version});function V2(){return V2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},V2.apply(this,arguments)}function ek(t,e,n){var r,i,s,o,a;e==null&&(e=100);function c(){var u=Date.now()-o;u<e&&u>=0?r=setTimeout(c,e-u):(r=null,n||(a=t.apply(s,i),s=i=null))}var l=function(){s=this,i=arguments,o=Date.now();var u=n&&!r;return r||(r=setTimeout(c,e)),u&&(a=t.apply(s,i),s=i=null),a};return l.clear=function(){r&&(clearTimeout(r),r=null)},l.flush=function(){r&&(a=t.apply(s,i),s=i=null,clearTimeout(r),r=null)},l}ek.debounce=ek;var Y8=ek;function _ge(t){let{debounce:e,scroll:n,polyfill:r,offsetSize:i}=t===void 0?{debounce:0,scroll:!1,offsetSize:!1}:t;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=N.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=N.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),l=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,d=N.useRef(!1);N.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[h,f,p]=N.useMemo(()=>{const b=()=>{if(!c.current.element)return;const{left:x,top:S,width:P,height:_,bottom:I,right:C,x:A,y:M}=c.current.element.getBoundingClientRect(),k={left:x,top:S,width:P,height:_,bottom:I,right:C,x:A,y:M};c.current.element instanceof HTMLElement&&i&&(k.height=c.current.element.offsetHeight,k.width=c.current.element.offsetWidth),Object.freeze(k),d.current&&!Ige(c.current.lastBounds,k)&&a(c.current.lastBounds=k)};return[b,u?Y8(b,u):b,l?Y8(b,l):b]},[a,i,l,u]);function g(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(b=>b.removeEventListener("scroll",p,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null)}function m(){c.current.element&&(c.current.resizeObserver=new s(p),c.current.resizeObserver.observe(c.current.element),n&&c.current.scrollContainers&&c.current.scrollContainers.forEach(b=>b.addEventListener("scroll",p,{capture:!0,passive:!0})))}const y=b=>{!b||b===c.current.element||(g(),c.current.element=b,c.current.scrollContainers=bW(b),m())};return Ege(p,!!n),Sge(f),N.useEffect(()=>{g(),m()},[n,p,f]),N.useEffect(()=>g,[]),[y,o,h]}function Sge(t){N.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function Ege(t,e){N.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function bW(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...bW(t.parentElement)]}const Tge=["x","y","top","bottom","left","right","width","height"],Ige=(t,e)=>Tge.every(n=>t[n]===e[n]);var Pge=Object.defineProperty,Cge=Object.defineProperties,Mge=Object.getOwnPropertyDescriptors,Z8=Object.getOwnPropertySymbols,Age=Object.prototype.hasOwnProperty,Rge=Object.prototype.propertyIsEnumerable,J8=(t,e,n)=>e in t?Pge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Q8=(t,e)=>{for(var n in e||(e={}))Age.call(e,n)&&J8(t,n,e[n]);if(Z8)for(var n of Z8(e))Rge.call(e,n)&&J8(t,n,e[n]);return t},kge=(t,e)=>Cge(t,Mge(e));function TO(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const i=TO(r,e,n);if(i)return i;r=e?null:r.sibling}}function xW(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const IO=xW(N.createContext(null));class wW extends N.Component{render(){return N.createElement(IO.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:Oge,ReactCurrentDispatcher:Nge}=N.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Lge(){const t=N.useContext(IO);if(!t)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=N.useId();return N.useMemo(()=>{var r;return(r=Oge.current)!=null?r:TO(t,!1,i=>{let s=i.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}})},[t,e])}const Gb=[],eL=new WeakMap;function Dge(){var t;const e=Lge();Gb.splice(0,Gb.length),TO(e,!0,n=>{var r;const i=(r=n.type)==null?void 0:r._context;i&&i!==IO&&Gb.push(xW(i))});for(const n of Gb){const r=(t=Nge.current)==null?void 0:t.readContext(n);eL.set(n,r)}return N.useMemo(()=>Gb.reduce((n,r)=>i=>N.createElement(n,null,N.createElement(r.Provider,kge(Q8({},i),{value:eL.get(r)}))),n=>N.createElement(wW,Q8({},n))),[])}const HM={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Bge(t){const{handlePointer:e}=fge(t);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(HM).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:i}=t.getState();(n=i.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{var r;const{set:i,events:s}=t.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:n}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[c,l]=HM[o];n.addEventListener(c,a,{passive:l})})},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=HM[s];r.connected.removeEventListener(a,o)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}const Fge=N.forwardRef(function({children:e,fallback:n,resize:r,style:i,gl:s,events:o=Bge,eventSource:a,eventPrefix:c,shadows:l,linear:u,flat:d,legacy:h,orthographic:f,frameloop:p,dpr:g,performance:m,raycaster:y,camera:b,scene:x,onPointerMissed:S,onCreated:P,..._},I){N.useMemo(()=>nge(H0e),[]);const C=Dge(),[A,M]=_ge({scroll:!0,debounce:{scroll:50,resize:0},...r}),k=N.useRef(null),O=N.useRef(null);N.useImperativeHandle(I,()=>k.current);const B=lW(S),[$,U]=N.useState(!1),[q,K]=N.useState(!1);if($)throw $;if(q)throw q;const V=N.useRef(null);l_(()=>{const j=k.current;M.width>0&&M.height>0&&j&&(V.current||(V.current=xge(j)),V.current.configure({gl:s,events:o,shadows:l,linear:u,flat:d,legacy:h,orthographic:f,frameloop:p,dpr:g,performance:m,raycaster:y,camera:b,scene:x,size:M,onPointerMissed:(...Q)=>B.current==null?void 0:B.current(...Q),onCreated:Q=>{Q.events.connect==null||Q.events.connect(a?ige(a)?a.current:a:O.current),c&&Q.setEvents({compute:(se,Z)=>{const ie=se[c+"X"],pe=se[c+"Y"];Z.pointer.set(ie/Z.size.width*2-1,-(pe/Z.size.height)*2+1),Z.raycaster.setFromCamera(Z.pointer,Z.camera)}}),P==null||P(Q)}}),V.current.render(N.createElement(C,null,N.createElement(cW,{set:K},N.createElement(N.Suspense,{fallback:N.createElement(sge,{set:U})},e)))))}),N.useEffect(()=>{const j=k.current;if(j)return()=>vW(j)},[]);const G=a?"none":"auto";return N.createElement("div",V2({ref:O,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:G,...i}},_),N.createElement("div",{ref:A,style:{width:"100%",height:"100%"}},N.createElement("canvas",{ref:k,style:{display:"block"}},n)))}),Uge=N.forwardRef(function(e,n){return N.createElement(wW,null,N.createElement(Fge,V2({},e,{ref:n})))});class $ge extends Mo{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new lu(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(a))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},r,i)}parse(e){function n(l){const u=new DataView(l),d=32/8*3+32/8*3*3+16/8,h=u.getUint32(80,!0);if(80+32/8+h*d===u.byteLength)return!0;const p=[115,111,108,105,100];for(let g=0;g<5;g++)if(r(p,u,g))return!1;return!0}function r(l,u,d){for(let h=0,f=l.length;h<f;h++)if(l[h]!==u.getUint8(d+h,!1))return!1;return!0}function i(l){const u=new DataView(l),d=u.getUint32(80,!0);let h,f,p,g=!1,m,y,b,x,S;for(let M=0;M<70;M++)u.getUint32(M,!1)==1129270351&&u.getUint8(M+4)==82&&u.getUint8(M+5)==61&&(g=!0,m=new Float32Array(d*3*3),y=u.getUint8(M+6)/255,b=u.getUint8(M+7)/255,x=u.getUint8(M+8)/255,S=u.getUint8(M+9)/255);const P=84,_=12*4+2,I=new Mn,C=new Float32Array(d*3*3),A=new Float32Array(d*3*3);for(let M=0;M<d;M++){const k=P+M*_,O=u.getFloat32(k,!0),B=u.getFloat32(k+4,!0),$=u.getFloat32(k+8,!0);if(g){const U=u.getUint16(k+48,!0);(U&32768)===0?(h=(U&31)/31,f=(U>>5&31)/31,p=(U>>10&31)/31):(h=y,f=b,p=x)}for(let U=1;U<=3;U++){const q=k+U*12,K=M*3*3+(U-1)*3;C[K]=u.getFloat32(q,!0),C[K+1]=u.getFloat32(q+4,!0),C[K+2]=u.getFloat32(q+8,!0),A[K]=O,A[K+1]=B,A[K+2]=$,g&&(m[K]=h,m[K+1]=f,m[K+2]=p)}}return I.setAttribute("position",new _r(C,3)),I.setAttribute("normal",new _r(A,3)),g&&(I.setAttribute("color",new _r(m,3)),I.hasColors=!0,I.alpha=S),I}function s(l){const u=new Mn,d=/solid([\s\S]*?)endsolid/g,h=/facet([\s\S]*?)endfacet/g;let f=0;const p=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,g=new RegExp("vertex"+p+p+p,"g"),m=new RegExp("normal"+p+p+p,"g"),y=[],b=[],x=new Ce;let S,P=0,_=0,I=0;for(;(S=d.exec(l))!==null;){_=I;const C=S[0];for(;(S=h.exec(C))!==null;){let k=0,O=0;const B=S[0];for(;(S=m.exec(B))!==null;)x.x=parseFloat(S[1]),x.y=parseFloat(S[2]),x.z=parseFloat(S[3]),O++;for(;(S=g.exec(B))!==null;)y.push(parseFloat(S[1]),parseFloat(S[2]),parseFloat(S[3])),b.push(x.x,x.y,x.z),k++,I++;O!==1&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+f),k!==3&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+f),f++}const A=_,M=I-_;u.addGroup(A,M,P),P++}return u.setAttribute("position",new tn(y,3)),u.setAttribute("normal",new tn(b,3)),u}function o(l){return typeof l!="string"?$2.decodeText(new Uint8Array(l)):l}function a(l){if(typeof l=="string"){const u=new Uint8Array(l.length);for(let d=0;d<l.length;d++)u[d]=l.charCodeAt(d)&255;return u.buffer||u}else return l}const c=a(e);return n(c)?i(c):s(o(e))}}var zge=function(){function t(){}return t.prototype.parse=function(e,n){n===void 0&&(n={});var r=n.binary!==void 0?n.binary:!1,i=[],s=0;e.traverse(function(B){if(B.isMesh){var $=B.geometry;if($.isBufferGeometry!==!0)throw new Error("THREE.STLExporter: Geometry is not of type THREE.BufferGeometry.");var U=$.index,q=$.getAttribute("position");s+=U!==null?U.count/3:q.count/3,i.push({object3d:B,geometry:$})}});var o,a=80;if(r===!0){var c=s*2+s*3*4*4+80+4,l=new ArrayBuffer(c);o=new DataView(l),o.setUint32(a,s,!0),a+=4}else o="",o+=`solid exported
`;for(var u=new Ce,d=new Ce,h=new Ce,f=new Ce,p=new Ce,g=new Ce,m=0,y=i.length;m<y;m++){var b=i[m].object3d,x=i[m].geometry,S=x.index,P=x.getAttribute("position");if(S!==null)for(var _=0;_<S.count;_+=3){var I=S.getX(_+0),C=S.getX(_+1),A=S.getX(_+2);M(I,C,A,P,b)}else for(var _=0;_<P.count;_+=3){var I=_+0,C=_+1,A=_+2;M(I,C,A,P,b)}}return r===!1&&(o+=`endsolid exported
`),o;function M(B,$,U,q,K){u.fromBufferAttribute(q,B),d.fromBufferAttribute(q,$),h.fromBufferAttribute(q,U),K.isSkinnedMesh===!0&&(K.boneTransform(B,u),K.boneTransform($,d),K.boneTransform(U,h)),u.applyMatrix4(K.matrixWorld),d.applyMatrix4(K.matrixWorld),h.applyMatrix4(K.matrixWorld),k(u,d,h),O(u),O(d),O(h),r===!0?(o.setUint16(a,0,!0),a+=2):(o+=`		endloop
`,o+=`	endfacet
`)}function k(B,$,U){f.subVectors(U,$),p.subVectors(B,$),f.cross(p).normalize(),g.copy(f).normalize(),r===!0?(o.setFloat32(a,g.x,!0),a+=4,o.setFloat32(a,g.y,!0),a+=4,o.setFloat32(a,g.z,!0),a+=4):(o+="	facet normal "+g.x+" "+g.y+" "+g.z+`
`,o+=`		outer loop
`)}function O(B){r===!0?(o.setFloat32(a,B.x,!0),a+=4,o.setFloat32(a,B.y,!0),a+=4,o.setFloat32(a,B.z,!0),a+=4):o+="			vertex "+B.x+" "+B.y+" "+B.z+`
`}},t}(),Hge=function(t){var e=t.scale,n=e===void 0?1:e,r=t.visible,i=r===void 0?!1:r,s=t.geometry,o=t.meshProps,a=t.materialProps,c=a.opacity,l=c===void 0?1:c,u=Ew(a,["opacity"]),d=t.onLoaded,h=Ew(t,["scale","visible","geometry","meshProps","materialProps","onLoaded"]),f=N.useRef(null),p=N.useRef(null),g=N.useState(!1),m=g[0],y=g[1];return N.useEffect(function(){y(!0)},[s]),SO(function(){var b;if(!(!m||s.boundingSphere==null||f.current==null||p.current==null)){new Fs().setFromObject(f.current);var x=(b=s.boundingBox)!==null&&b!==void 0?b:{min:{x:0,y:0,z:0},max:{x:0,y:0,z:0}},S=x.min,P=x.max;s.computeVertexNormals();var _={width:P.x-S.x,length:P.y-S.y,height:P.z-S.z};s.applyMatrix4(new vn().makeTranslation(-S.x-_.width/2,-S.y-_.length/2,-S.z-_.height/2)),d(fl(fl({},_),{boundingRadius:s.boundingSphere.radius}),f.current,p.current),y(!1)}}),qt.createElement("group",fl({ref:p},h),qt.createElement("mesh",fl({ref:f,scale:[n,n,n],castShadow:!0},o),qt.createElement("primitive",{object:s,attach:"geometry"}),qt.createElement("meshStandardMaterial",fl({side:mc,opacity:i?l:0},u))))},tL=Math.pow(2,16),Vge=function(t){var e=t.visible,n=e===void 0?!1:e,r=t.width,i=t.length,s=t.noShadow,o=s===void 0?!1:s,a=t.offset,c=a===void 0?0:a,l=Ew(t,["visible","width","length","noShadow","offset"]),u=[(r??0)/2,(i??0)/2,-c],d=[r??tL,i??tL,Math.floor((r??20)/20),Math.floor((i??20)/20)];return n?qt.createElement("group",fl({},l),r!=null&&i!=null&&qt.createElement("mesh",{receiveShadow:!0,position:u},qt.createElement("planeGeometry",{args:d}),qt.createElement("meshStandardMaterial",{wireframe:!0,color:"#777"})),!o&&qt.createElement("mesh",{receiveShadow:!0,position:u},qt.createElement("planeGeometry",{args:d}),qt.createElement("shadowMaterial",{opacity:.2}))):null},Wge=function(t){var e=t.offsetX,n=e===void 0?0:e,r=t.offsetY,i=r===void 0?0:r,s=t.offsetZ,o=s===void 0?0:s,a=t.distance;return qt.createElement(qt.Fragment,null,qt.createElement("ambientLight",null),qt.createElement("spotLight",{castShadow:!0,position:[n,i,a+o]}),[[-a+n,i,a+o],[n,-a+i,a+o],[n,a+i,o]].map(function(c,l){return qt.createElement("directionalLight",{key:l,intensity:2,position:c})}))};function nL(t,e,n){return Math.max(Math.min(e,n),t)}var EE=.01;function _W(t){var e=nL(-Math.PI/2+EE,t.latitude,Math.PI/2-EE),n=nL(-Math.PI+EE,t.longitude,Math.PI-EE);return[t.distance*Math.cos(e)*Math.sin(n),-t.distance*Math.cos(n)*Math.cos(e),t.distance*Math.sin(e)]}var jge=function(t){var e=t.initialPosition,n=t.center,r=Ew(t,["initialPosition","center"]),i=Hx().camera;return N.useEffect(function(){i.up.applyAxisAngle(new Ce(1,0,0),Math.PI/2)},[i]),N.useEffect(function(){var s=_W(e);i.position.set(s[0]+n[0],s[1]+n[1],s[2]+n[2]),i.lookAt.apply(i,n)},[i,n]),qt.createElement("perspectiveCamera",fl({near:1,far:1e3},r))};function Tw(t){"@babel/helpers - typeof";return Tw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tw(t)}function qge(t,e){if(Tw(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tw(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kge(t){var e=qge(t,"string");return Tw(e)==="symbol"?e:String(e)}function Rn(t,e,n){return e=Kge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const rL=(t,e)=>(t%e+e)%e;let Gge=class extends Tc{constructor(e,n){super(),Rn(this,"object",void 0),Rn(this,"domElement",void 0),Rn(this,"enabled",!0),Rn(this,"target",new Ce),Rn(this,"minDistance",0),Rn(this,"maxDistance",1/0),Rn(this,"minZoom",0),Rn(this,"maxZoom",1/0),Rn(this,"minPolarAngle",0),Rn(this,"maxPolarAngle",Math.PI),Rn(this,"minAzimuthAngle",-1/0),Rn(this,"maxAzimuthAngle",1/0),Rn(this,"enableDamping",!1),Rn(this,"dampingFactor",.05),Rn(this,"enableZoom",!0),Rn(this,"zoomSpeed",1),Rn(this,"enableRotate",!0),Rn(this,"rotateSpeed",1),Rn(this,"enablePan",!0),Rn(this,"panSpeed",1),Rn(this,"screenSpacePanning",!0),Rn(this,"keyPanSpeed",7),Rn(this,"autoRotate",!1),Rn(this,"autoRotateSpeed",2),Rn(this,"reverseOrbit",!1),Rn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Rn(this,"mouseButtons",{LEFT:Xp.ROTATE,MIDDLE:Xp.DOLLY,RIGHT:Xp.PAN}),Rn(this,"touches",{ONE:Yp.ROTATE,TWO:Yp.DOLLY_PAN}),Rn(this,"target0",void 0),Rn(this,"position0",void 0),Rn(this,"zoom0",void 0),Rn(this,"_domElementKeyEvents",null),Rn(this,"getPolarAngle",void 0),Rn(this,"getAzimuthalAngle",void 0),Rn(this,"setPolarAngle",void 0),Rn(this,"setAzimuthalAngle",void 0),Rn(this,"getDistance",void 0),Rn(this,"listenToKeyEvents",void 0),Rn(this,"saveState",void 0),Rn(this,"reset",void 0),Rn(this,"update",void 0),Rn(this,"connect",void 0),Rn(this,"dispose",void 0),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof li?this.object.zoom:1,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=me=>{let Ee=rL(me,2*Math.PI),oe=u.phi;oe<0&&(oe+=2*Math.PI),Ee<0&&(Ee+=2*Math.PI);let ne=Math.abs(Ee-oe);2*Math.PI-ne<ne&&(Ee<oe?Ee+=2*Math.PI:oe+=2*Math.PI),d.phi=Ee-oe,r.update()},this.setAzimuthalAngle=me=>{let Ee=rL(me,2*Math.PI),oe=u.theta;oe<0&&(oe+=2*Math.PI),Ee<0&&(Ee+=2*Math.PI);let ne=Math.abs(Ee-oe);2*Math.PI-ne<ne&&(Ee<oe?Ee+=2*Math.PI:oe+=2*Math.PI),d.theta=Ee-oe,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=me=>{me.addEventListener("keydown",Ne),this._domElementKeyEvents=me},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object instanceof li?r.object.zoom:1},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object instanceof li&&(r.object.zoom=r.zoom0,r.object.updateProjectionMatrix()),r.dispatchEvent(i),r.update(),c=a.NONE},this.update=(()=>{const me=new Ce,Ee=new ro().setFromUnitVectors(e.up,new Ce(0,1,0)),oe=Ee.clone().invert(),ne=new Ce,de=new ro,Te=2*Math.PI;return function(){const he=r.object.position;me.copy(he).sub(r.target),me.applyQuaternion(Ee),u.setFromVector3(me),r.autoRotate&&c===a.NONE&&O(M()),r.enableDamping?(u.theta+=d.theta*r.dampingFactor,u.phi+=d.phi*r.dampingFactor):(u.theta+=d.theta,u.phi+=d.phi);let Xe=r.minAzimuthAngle,$e=r.maxAzimuthAngle;return isFinite(Xe)&&isFinite($e)&&(Xe<-Math.PI?Xe+=Te:Xe>Math.PI&&(Xe-=Te),$e<-Math.PI?$e+=Te:$e>Math.PI&&($e-=Te),Xe<=$e?u.theta=Math.max(Xe,Math.min($e,u.theta)):u.theta=u.theta>(Xe+$e)/2?Math.max(Xe,u.theta):Math.min($e,u.theta)),u.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,u.phi)),u.makeSafe(),u.radius*=h,u.radius=Math.max(r.minDistance,Math.min(r.maxDistance,u.radius)),r.enableDamping===!0?r.target.addScaledVector(f,r.dampingFactor):r.target.add(f),me.setFromSpherical(u),me.applyQuaternion(oe),he.copy(r.target).add(me),r.object.lookAt(r.target),r.enableDamping===!0?(d.theta*=1-r.dampingFactor,d.phi*=1-r.dampingFactor,f.multiplyScalar(1-r.dampingFactor)):(d.set(0,0,0),f.set(0,0,0)),h=1,p||ne.distanceToSquared(r.object.position)>l||8*(1-de.dot(r.object.quaternion))>l?(r.dispatchEvent(i),ne.copy(r.object.position),de.copy(r.object.quaternion),p=!1,!0):!1}})(),this.connect=me=>{me===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=me,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Ve),r.domElement.addEventListener("pointerdown",He),r.domElement.addEventListener("pointercancel",te),r.domElement.addEventListener("wheel",we)},this.dispose=()=>{var me,Ee,oe,ne,de,Te;(me=r.domElement)===null||me===void 0||me.removeEventListener("contextmenu",Ve),(Ee=r.domElement)===null||Ee===void 0||Ee.removeEventListener("pointerdown",He),(oe=r.domElement)===null||oe===void 0||oe.removeEventListener("pointercancel",te),(ne=r.domElement)===null||ne===void 0||ne.removeEventListener("wheel",we),(de=r.domElement)===null||de===void 0||de.ownerDocument.removeEventListener("pointermove",Re),(Te=r.domElement)===null||Te===void 0||Te.ownerDocument.removeEventListener("pointerup",je),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Ne)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=a.NONE;const l=1e-6,u=new KR,d=new KR;let h=1;const f=new Ce;let p=!1;const g=new St,m=new St,y=new St,b=new St,x=new St,S=new St,P=new St,_=new St,I=new St,C=[],A={};function M(){return 2*Math.PI/60/60*r.autoRotateSpeed}function k(){return Math.pow(.95,r.zoomSpeed)}function O(me){r.reverseOrbit?d.theta+=me:d.theta-=me}function B(me){r.reverseOrbit?d.phi+=me:d.phi-=me}const $=(()=>{const me=new Ce;return function(oe,ne){me.setFromMatrixColumn(ne,0),me.multiplyScalar(-oe),f.add(me)}})(),U=(()=>{const me=new Ce;return function(oe,ne){r.screenSpacePanning===!0?me.setFromMatrixColumn(ne,1):(me.setFromMatrixColumn(ne,0),me.crossVectors(r.object.up,me)),me.multiplyScalar(oe),f.add(me)}})(),q=(()=>{const me=new Ce;return function(oe,ne){const de=r.domElement;if(de&&r.object instanceof li&&r.object.isPerspectiveCamera){const Te=r.object.position;me.copy(Te).sub(r.target);let ke=me.length();ke*=Math.tan(r.object.fov/2*Math.PI/180),$(2*oe*ke/de.clientHeight,r.object.matrix),U(2*ne*ke/de.clientHeight,r.object.matrix)}else de&&r.object instanceof Qf&&r.object.isOrthographicCamera?($(oe*(r.object.right-r.object.left)/r.object.zoom/de.clientWidth,r.object.matrix),U(ne*(r.object.top-r.object.bottom)/r.object.zoom/de.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function K(me){r.object instanceof li&&r.object.isPerspectiveCamera?h/=me:r.object instanceof Qf&&r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*me)),r.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function V(me){r.object instanceof li&&r.object.isPerspectiveCamera?h*=me:r.object instanceof Qf&&r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/me)),r.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function G(me){g.set(me.clientX,me.clientY)}function j(me){P.set(me.clientX,me.clientY)}function Q(me){b.set(me.clientX,me.clientY)}function se(me){m.set(me.clientX,me.clientY),y.subVectors(m,g).multiplyScalar(r.rotateSpeed);const Ee=r.domElement;Ee&&(O(2*Math.PI*y.x/Ee.clientHeight),B(2*Math.PI*y.y/Ee.clientHeight)),g.copy(m),r.update()}function Z(me){_.set(me.clientX,me.clientY),I.subVectors(_,P),I.y>0?K(k()):I.y<0&&V(k()),P.copy(_),r.update()}function ie(me){x.set(me.clientX,me.clientY),S.subVectors(x,b).multiplyScalar(r.panSpeed),q(S.x,S.y),b.copy(x),r.update()}function pe(me){me.deltaY<0?V(k()):me.deltaY>0&&K(k()),r.update()}function ue(me){let Ee=!1;switch(me.code){case r.keys.UP:q(0,r.keyPanSpeed),Ee=!0;break;case r.keys.BOTTOM:q(0,-r.keyPanSpeed),Ee=!0;break;case r.keys.LEFT:q(r.keyPanSpeed,0),Ee=!0;break;case r.keys.RIGHT:q(-r.keyPanSpeed,0),Ee=!0;break}Ee&&(me.preventDefault(),r.update())}function le(){if(C.length==1)g.set(C[0].pageX,C[0].pageY);else{const me=.5*(C[0].pageX+C[1].pageX),Ee=.5*(C[0].pageY+C[1].pageY);g.set(me,Ee)}}function ae(){if(C.length==1)b.set(C[0].pageX,C[0].pageY);else{const me=.5*(C[0].pageX+C[1].pageX),Ee=.5*(C[0].pageY+C[1].pageY);b.set(me,Ee)}}function _e(){const me=C[0].pageX-C[1].pageX,Ee=C[0].pageY-C[1].pageY,oe=Math.sqrt(me*me+Ee*Ee);P.set(0,oe)}function ye(){r.enableZoom&&_e(),r.enablePan&&ae()}function Ae(){r.enableZoom&&_e(),r.enableRotate&&le()}function Oe(me){if(C.length==1)m.set(me.pageX,me.pageY);else{const oe=Ie(me),ne=.5*(me.pageX+oe.x),de=.5*(me.pageY+oe.y);m.set(ne,de)}y.subVectors(m,g).multiplyScalar(r.rotateSpeed);const Ee=r.domElement;Ee&&(O(2*Math.PI*y.x/Ee.clientHeight),B(2*Math.PI*y.y/Ee.clientHeight)),g.copy(m)}function Be(me){if(C.length==1)x.set(me.pageX,me.pageY);else{const Ee=Ie(me),oe=.5*(me.pageX+Ee.x),ne=.5*(me.pageY+Ee.y);x.set(oe,ne)}S.subVectors(x,b).multiplyScalar(r.panSpeed),q(S.x,S.y),b.copy(x)}function ce(me){const Ee=Ie(me),oe=me.pageX-Ee.x,ne=me.pageY-Ee.y,de=Math.sqrt(oe*oe+ne*ne);_.set(0,de),I.set(0,Math.pow(_.y/P.y,r.zoomSpeed)),K(I.y),P.copy(_)}function Ge(me){r.enableZoom&&ce(me),r.enablePan&&Be(me)}function Pe(me){r.enableZoom&&ce(me),r.enableRotate&&Oe(me)}function He(me){if(r.enabled!==!1){if(C.length===0){var Ee,oe;(Ee=r.domElement)===null||Ee===void 0||Ee.ownerDocument.addEventListener("pointermove",Re),(oe=r.domElement)===null||oe===void 0||oe.ownerDocument.addEventListener("pointerup",je)}be(me),me.pointerType==="touch"?We(me):ee(me)}}function Re(me){r.enabled!==!1&&(me.pointerType==="touch"?xe(me):X(me))}function je(me){if(ge(me),C.length===0){var Ee,oe,ne;(Ee=r.domElement)===null||Ee===void 0||Ee.releasePointerCapture(me.pointerId),(oe=r.domElement)===null||oe===void 0||oe.ownerDocument.removeEventListener("pointermove",Re),(ne=r.domElement)===null||ne===void 0||ne.ownerDocument.removeEventListener("pointerup",je)}r.dispatchEvent(o),c=a.NONE}function te(me){ge(me)}function ee(me){let Ee;switch(me.button){case 0:Ee=r.mouseButtons.LEFT;break;case 1:Ee=r.mouseButtons.MIDDLE;break;case 2:Ee=r.mouseButtons.RIGHT;break;default:Ee=-1}switch(Ee){case Xp.DOLLY:if(r.enableZoom===!1)return;j(me),c=a.DOLLY;break;case Xp.ROTATE:if(me.ctrlKey||me.metaKey||me.shiftKey){if(r.enablePan===!1)return;Q(me),c=a.PAN}else{if(r.enableRotate===!1)return;G(me),c=a.ROTATE}break;case Xp.PAN:if(me.ctrlKey||me.metaKey||me.shiftKey){if(r.enableRotate===!1)return;G(me),c=a.ROTATE}else{if(r.enablePan===!1)return;Q(me),c=a.PAN}break;default:c=a.NONE}c!==a.NONE&&r.dispatchEvent(s)}function X(me){if(r.enabled!==!1)switch(c){case a.ROTATE:if(r.enableRotate===!1)return;se(me);break;case a.DOLLY:if(r.enableZoom===!1)return;Z(me);break;case a.PAN:if(r.enablePan===!1)return;ie(me);break}}function we(me){r.enabled===!1||r.enableZoom===!1||c!==a.NONE&&c!==a.ROTATE||(me.preventDefault(),r.dispatchEvent(s),pe(me),r.dispatchEvent(o))}function Ne(me){r.enabled===!1||r.enablePan===!1||ue(me)}function We(me){switch(Se(me),C.length){case 1:switch(r.touches.ONE){case Yp.ROTATE:if(r.enableRotate===!1)return;le(),c=a.TOUCH_ROTATE;break;case Yp.PAN:if(r.enablePan===!1)return;ae(),c=a.TOUCH_PAN;break;default:c=a.NONE}break;case 2:switch(r.touches.TWO){case Yp.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ye(),c=a.TOUCH_DOLLY_PAN;break;case Yp.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Ae(),c=a.TOUCH_DOLLY_ROTATE;break;default:c=a.NONE}break;default:c=a.NONE}c!==a.NONE&&r.dispatchEvent(s)}function xe(me){switch(Se(me),c){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;Oe(me),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;Be(me),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ge(me),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Pe(me),r.update();break;default:c=a.NONE}}function Ve(me){r.enabled!==!1&&me.preventDefault()}function be(me){C.push(me)}function ge(me){delete A[me.pointerId];for(let Ee=0;Ee<C.length;Ee++)if(C[Ee].pointerId==me.pointerId){C.splice(Ee,1);return}}function Se(me){let Ee=A[me.pointerId];Ee===void 0&&(Ee=new St,A[me.pointerId]=Ee),Ee.set(me.pageX,me.pageY)}function Ie(me){const Ee=me.pointerId===C[0].pointerId?C[1]:C[0];return A[Ee.pointerId]}n!==void 0&&this.connect(n),this.update()}};var Xge=function(t){var e,n=Hx(function(a){return a.camera}),r=N.useMemo(function(){return new Gge(n)},[n]),i=Hx(function(a){return a.gl}),s=Hx(function(a){return a.events}),o=(e=s.connected)!==null&&e!==void 0?e:i.domElement;return N.useEffect(function(){return r.connect(o),function(){return r.dispose()}}),SO(function(){r.update()},-1),N.createElement("primitive",fl({object:r},t))},Yge=Math.PI/8,Zge=-Math.PI/8,Jge=3,Qge=350,eye=.4,tye=new Wt("white"),nye=function(t){var e=t.url,n=t.extraHeaders,r=t.shadows,i=r===void 0?!1:r,s=t.showAxes,o=s===void 0?!1:s,a=t.orbitControls,c=a===void 0?!1:a,l=t.onFinishLoading,u=l===void 0?function(){}:l,d=t.cameraInitialPosition,h=d===void 0?{}:d,f=h.latitude,p=h.longitude,g=h.distance,m=t.cameraProps,y=m===void 0?{}:m,b=y.ref,x=y.initialPosition,S=x===void 0?{}:x,P=S.latitude,_=P===void 0?Yge:P,I=S.longitude,C=I===void 0?Zge:I,A=S.distance,M=A===void 0?void 0:A,k=t.modelProps,O=k===void 0?{}:k,B=O.ref,$=O.scale,U=$===void 0?1:$,q=O.positionX,K=O.positionY,V=O.rotationX,G=V===void 0?0:V,j=O.rotationY,Q=j===void 0?0:j,se=O.rotationZ,Z=se===void 0?0:se,ie=O.color,pe=ie===void 0?"grey":ie,ue=O.geometryProcessor,le=t.floorProps,ae=le===void 0?{}:le,_e=ae.gridWidth,ye=ae.gridLength,Ae=Hx().camera,Oe=N.useState(),Be=Oe[0],ce=Oe[1],Ge=N.useState({width:0,height:0,length:0,boundingRadius:0}),Pe=Ge[0],He=Ge[1],Re=N.useState(),je=Re[0],te=Re[1],ee=N.useState([0,0,0]),X=ee[0],we=ee[1],Ne=N.useState(!1),We=Ne[0],xe=Ne[1];N.useEffect(function(){xe(!1)},[e]);var Ve=EO($ge,e,function(me){return me.setRequestHeader(n??{})}),be=N.useMemo(function(){var me;return(me=ue==null?void 0:ue(Ve))!==null&&me!==void 0?me:Ve},[Ve,ue]);function ge(me,Ee){var oe=Math.max(_e??0,ye??0);return oe>0?oe*(Ee??1):me*(Ee??Jge)}function Se(me,Ee){ce(Ee);var oe=me.width,ne=me.length,de=me.height,Te=me.boundingRadius;He(me),we([q??oe/2,K??ne/2,de/2]),te({latitude:f??_,longitude:p??C,distance:ge(Te,g??M)}),u(me),setTimeout(function(){return xe(!0)},100)}N.useEffect(function(){b!=null&&(b.current={setCameraPosition:function(me){var Ee=me.latitude,oe=me.longitude,ne=me.distance,de=ge(Pe.boundingRadius,ne),Te=_W({latitude:Ee,longitude:oe,distance:de}),ke=Te[0],he=Te[1],Xe=Te[2],$e=X[0],Qe=X[1],ut=X[2];Ae.position.set(ke+$e,he+Qe,Xe+ut),Ae.lookAt($e,Qe,ut)}})},[Ae,b,X,Pe]),N.useEffect(function(){B==null||Be==null||(B.current={save:function(){return new Blob([new zge().parse(Be,{binary:!0})],{type:"application/octet-stream"})},model:Be})},[Be,B]),SO(function(me){var Ee=me.scene,oe=Ee.getObjectByName("mesh"),ne=Ee.getObjectByName("group"),de=new Fs().setFromObject(oe),Te=de.max.z-de.min.z;ne.position.z=Te/2});var Ie=[q??Pe.width*U/2,K??Pe.length*U/2,0];return qt.createElement(qt.Fragment,null,qt.createElement("scene",{background:tye}),We&&o&&qt.createElement("axesHelper",{scale:[50,50,50]}),je!=null&&qt.createElement(jge,{initialPosition:je,center:X}),qt.createElement(Hge,{name:"group",meshProps:{name:"mesh"},scale:U,geometry:be,position:Ie,rotation:[G,Q,Z],visible:We,materialProps:{color:pe},onLoaded:Se}),qt.createElement(Vge,{width:_e??ye,length:ye??_e,visible:We,noShadow:!i,offset:eye}),qt.createElement(Wge,{distance:Qge,offsetX:Ie[0],offsetY:Ie[1]}),We&&c&&qt.createElement(Xge,{target:X}))},rye=function(t){V0e(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={message:""},n}return e.prototype.shouldComponentUpdate=function(n,r,i){return this.state.message===""&&r.message!==""&&n.onError!=null&&n.onError(new Error(r.message)),!0},e.getDerivedStateFromError=function(n){return{message:n.message}},e.prototype.componentDidCatch=function(){},e.prototype.render=function(){return this.state.message!==""?null:this.props.children},e}(qt.Component),iye=function(t){var e=t.url,n=t.cameraProps,r=t.modelProps,i=t.floorProps,s=t.children,o=t.onError,a=t.extraHeaders,c=t.onFinishLoading,l=t.canvasId,u=t.shadows,d=t.showAxes,h=t.orbitControls,f=t.cameraInitialPosition,p=Ew(t,["url","cameraProps","modelProps","floorProps","children","onError","extraHeaders","onFinishLoading","canvasId","shadows","showAxes","orbitControls","cameraInitialPosition"]),g={url:e,cameraProps:n,modelProps:r,floorProps:i,extraHeaders:a,onFinishLoading:c,shadows:u,showAxes:d,orbitControls:h,cameraInitialPosition:f};return qt.createElement("div",fl({},p),qt.createElement(rye,{onError:o},qt.createElement(qt.Suspense,{fallback:null},qt.createElement(Uge,{shadows:!0,gl:{preserveDrawingBuffer:!0,shadowMapType:Ey,antialias:!0},id:l,style:{width:"100%",height:"100%"}},qt.createElement(nye,fl({},g)),s))))},kn;let et=(kn=class{constructor(e=0,n=10,r="be"){ze(this,"negative");ze(this,"words");ze(this,"length");ze(this,"red");if(this.negative=0,this.words=[],this.length=0,this.red=null,e!==null){if((n==="le"||n==="be")&&(r=n,n=10),typeof e=="number"){this.initNumber(e,n,r);return}if(typeof e=="object"){this.initArray(e,r);return}n==="hex"&&(n=16),this.assert(n===(n|0)&&n>=2&&n<=36),e=e.toString().replace(/\s+/g,"");let i=0;e.startsWith("-")&&(i++,this.negative=1),i<e.length&&(n===16?this.parseHex(e,i,r):(this.parseBase(e,n,i),r==="le"&&this.initArray(this.toArray(),r)))}}static isBN(e){return e instanceof kn?!0:e!==null&&typeof e=="object"&&e.constructor.wordSize===kn.wordSize&&Array.isArray(e.words)}static max(e,n){return e.cmp(n)>0?e:n}static min(e,n){return e.cmp(n)<0?e:n}assert(e,n="Assertion failed"){if(!e)throw new Error(n)}initNumber(e,n,r){return e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[e&67108863],this.length=1):e<4503599627370496?(this.words=[e&67108863,e/67108864&67108863],this.length=2):(this.assert(e<=9007199254740991,"The number is larger than 2 ^ 53 (unsafe)"),this.words=[e&67108863,e/67108864&67108863,1],this.length=3),r!=="le"?this:(this.initArray(this.toArray(),r),this)}initArray(e,n){if(this.assert(typeof e.length=="number","The number must have a length"),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);let r=0;for(;r<this.length;r++)this.words[r]=0;let i,s,o=0;if(n==="be")for(r=e.length-1,i=0;r>=0;r-=3)s=e[r]|e[r-1]<<8|e[r-2]<<16,this.words[i]|=s<<o&67108863,this.words[i+1]=s>>>26-o&67108863,o+=24,o>=26&&(o-=26,i++);else if(n==="le")for(r=0,i=0;r<e.length;r+=3)s=e[r]|e[r+1]<<8|e[r+2]<<16,this.words[i]|=s<<o&67108863,this.words[i+1]=s>>>26-o&67108863,o+=24,o>=26&&(o-=26,i++);return this.strip()}parseHex4Bits(e,n){const r=e.charCodeAt(n);if(r>=48&&r<=57)return r-48;if(r>=65&&r<=70)return r-55;if(r>=97&&r<=102)return r-87;throw new Error("Invalid character in "+e)}parseHexByte(e,n,r){let i=this.parseHex4Bits(e,r);return r-1>=n&&(i|=this.parseHex4Bits(e,r-1)<<4),i}parseHex(e,n,r){this.length=Math.ceil((e.length-n)/6),this.words=new Array(this.length).fill(0);let i=0,s=0;const o=a=>{const c=this.parseHexByte(e,n,a)<<i;this.words[s]|=c&67108863,i>=18?(i-=18,s+=1,this.words[s]|=c>>>26):i+=8};if(r==="be")for(let a=e.length-1;a>=n;a-=2)o(a);else{const a=e.length-n;for(let c=a%2===0?n+1:n;c<e.length;c+=2)o(c)}return this.strip()}parseBaseWord(e,n,r,i){let s=0,o=0;const a=Math.min(e.length,r);for(let c=n;c<a;c++){const l=e.charCodeAt(c)-48;s*=i,l>=49?o=l-49+10:l>=17?o=l-17+10:o=l,this.assert(l>=0&&o<i,"Invalid character"),s+=o}return s}parseBase(e,n,r){this.words=[0],this.length=1;let i=0,s=1;for(;s<=67108863;s*=n)i++;i--,s=s/n|0;const o=e.length-r,a=o%i,c=Math.min(o,o-a)+r;let l=0,u=r;for(;u<c;u+=i)l=this.parseBaseWord(e,u,u+i,n),this.imuln(s),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(a!==0){let d=1;for(l=this.parseBaseWord(e,u,e.length,n),u=0;u<a;u++)d*=n;this.imuln(d),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}return this.strip()}copy(e){e.words=new Array(this.length);for(let n=0;n<this.length;n++)e.words[n]=this.words[n];e.length=this.length,e.negative=this.negative,e.red=this.red}static move(e,n){e.words=n.words,e.length=n.length,e.negative=n.negative,e.red=n.red}clone(){const e=new kn;return this.copy(e),e}expand(e){for(;this.length<e;)this.words[this.length++]=0;return this}strip(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this.normSign()}normSign(){return this.length===1&&this.words[0]===0&&(this.negative=0),this}inspect(){return(this.red!==null?"<BN-R: ":"<BN: ")+this.toString(16)+">"}toString(e=10,n=1){if(e===16||e==="hex")return this.toHexString(n);if(e===(e|0)&&e>=2&&e<=36)return this.toBaseString(e,n);throw new Error("Base should be between 2 and 36")}toHexString(e){let n="",r=0,i=0;for(let s=0;s<this.length;s++){const o=this.words[s],a=((o<<r|i)&16777215).toString(16);i=o>>>24-r&16777215,r+=2,r>=26&&(r-=26,s--),i!==0||s!==this.length-1?n=kn.zeros[6-a.length]+a+n:n=a+n}if(i!==0&&(n=i.toString(16)+n),e===0&&n==="0")return"";for(;n.length%e!==0&&e!==0;)n="0"+n;return this.negative!==0&&(n="-"+n),n}toBaseString(e,n){const r=kn.groupSizes[e],i=kn.groupBases[e];let s="",o=this.clone();for(o.negative=0;!o.isZero();){const a=o.modrn(i).toString(e);o=o.idivn(i),o.isZero()?s=a+s:s=kn.zeros[r-a.length]+a+s}for(this.isZero()&&(s="0"+s);s.length%n!==0;)s="0"+s;return this.negative!==0&&(s="-"+s),s}toNumber(){let e=this.words[0];if(this.length===2)e+=this.words[1]*67108864;else if(this.length===3&&this.words[2]===1)e+=4503599627370496+this.words[1]*67108864;else if(this.length>2)throw new Error("Number can only safely store up to 53 bits");return this.negative!==0?-e:e}toJSON(){return this.toString(16)}toArrayLikeLE(e,n){let r=0,i=0;for(let s=0,o=0;s<this.length;s++){const a=this.words[s]<<o|i;e[r++]=a&255,r<e.length&&(e[r++]=a>>8&255),r<e.length&&(e[r++]=a>>16&255),o===6?(r<e.length&&(e[r++]=a>>24&255),i=0,o=0):(i=a>>>24,o+=2)}if(r<e.length)for(e[r++]=i;r<e.length;)e[r++]=0}toArrayLikeBE(e,n){let r=e.length-1,i=0;for(let s=0,o=0;s<this.length;s++){const a=this.words[s]<<o|i;e[r--]=a&255,r>=0&&(e[r--]=a>>8&255),r>=0&&(e[r--]=a>>16&255),o===6?(r>=0&&(e[r--]=a>>24&255),i=0,o=0):(i=a>>>24,o+=2)}if(r>=0)for(e[r--]=i;r>=0;)e[r--]=0}toArray(e="be",n){this.strip();const r=this.byteLength(),i=n??Math.max(1,r);this.assert(r<=i,"byte array longer than desired length"),this.assert(i>0,"Requested array length <= 0");const s=new Array(i);return e==="le"?this.toArrayLikeLE(s,r):this.toArrayLikeBE(s,r),s}countWordBits(e){if(typeof Math.clz32=="function")return 32-Math.clz32(e);let n=e,r=0;return n>=4096&&(r+=13,n>>>=13),n>=64&&(r+=7,n>>>=7),n>=8&&(r+=4,n>>>=4),n>=2&&(r+=2,n>>>=2),r+n}zeroWordBits(e){if(e===0)return 26;let n=e,r=0;return(n&8191)===0&&(r+=13,n>>>=13),(n&127)===0&&(r+=7,n>>>=7),(n&15)===0&&(r+=4,n>>>=4),(n&3)===0&&(r+=2,n>>>=2),(n&1)===0&&r++,r}bitLength(){const e=this.words[this.length-1],n=this.countWordBits(e);return(this.length-1)*26+n}static toBitArray(e){const n=new Array(e.bitLength());for(let r=0;r<n.length;r++){const i=r/26|0,s=r%26;n[r]=e.words[i]>>>s&1}return n}toBitArray(){return kn.toBitArray(this)}zeroBits(){if(this.isZero())return 0;let e=0;for(let n=0;n<this.length;n++){const r=this.zeroWordBits(this.words[n]);if(e+=r,r!==26)break}return e}byteLength(){return Math.ceil(this.bitLength()/8)}toTwos(e){return this.negative!==0?this.abs().inotn(e).iaddn(1):this.clone()}fromTwos(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()}isNeg(){return this.negative!==0}neg(){return this.clone().ineg()}ineg(){return this.isZero()||(this.negative^=1),this}iuor(e){for(;this.length<e.length;)this.words[this.length++]=0;for(let n=0;n<e.length;n++)this.words[n]=this.words[n]|e.words[n];return this.strip()}ior(e){return this.assert((this.negative|e.negative)===0),this.iuor(e)}or(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)}uor(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)}iuand(e){const n=Math.min(this.length,e.length);for(let r=0;r<n;r++)this.words[r]=this.words[r]&e.words[r];return this.length=n,this.strip()}iand(e){return this.assert((this.negative|e.negative)===0),this.iuand(e)}and(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)}uand(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)}iuxor(e){if(this.length>e.length)for(let n=0;n<e.length;n++)this.words[n]=this.words[n]^e.words[n];else{for(let n=0;n<this.length;n++)this.words[n]=this.words[n]^e.words[n];for(let n=this.length;n<e.length;n++)this.words[n]=e.words[n];this.length=e.length}return this.strip()}ixor(e){return this.assert((this.negative|e.negative)===0,"Neither number can be negative"),this.iuxor(e)}xor(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)}uxor(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)}inotn(e){this.assert(typeof e=="number"&&e>=0,"The width needs to be a number greater than zero");let n=Math.ceil(e/26)|0;const r=e%26;this.expand(n),r>0&&n--;let i=0;for(;i<n;i++)this.words[i]=~this.words[i]&67108863;return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()}notn(e){return this.clone().inotn(e)}setn(e,n){this.assert(typeof e=="number"&&e>=0);const r=e/26|0,i=e%26;return this.expand(r+1),n===1||n===!0?this.words[r]=this.words[r]|1<<i:this.words[r]=this.words[r]&~(1<<i),this.strip()}iadd(e){let n;if(this.negative!==0&&e.negative===0)return this.negative=0,n=this.isub(e),this.negative^=1,this.normSign();if(this.negative===0&&e.negative!==0)return e.negative=0,n=this.isub(e),e.negative=1,n.normSign();let r,i;this.length>e.length?(r=this,i=e):(r=e,i=this);let s=0,o=0;for(;o<i.length;o++)n=(r.words[o]|0)+(i.words[o]|0)+s,this.words[o]=n&67108863,s=n>>>26;for(;s!==0&&o<r.length;o++)n=(r.words[o]|0)+s,this.words[o]=n&67108863,s=n>>>26;if(this.length=r.length,s!==0)this.words[this.length]=s,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this}add(e){let n;return e.negative!==0&&this.negative===0?(e.negative=0,n=this.sub(e),e.negative^=1,n):e.negative===0&&this.negative!==0?(this.negative=0,n=e.sub(this),this.negative=1,n):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)}isub(e){let n;if(e.negative!==0)return e.negative=0,n=this.iadd(e),e.negative=1,n.normSign();if(this.negative!==0)return this.negative=0,this.iadd(e),this.negative=1,this.normSign();const r=this.cmp(e);if(r===0)return this.negative=0,this.length=1,this.words[0]=0,this;let i,s;r>0?(i=this,s=e):(i=e,s=this);let o=0,a=0;for(;a<s.length;a++)n=(i.words[a]|0)-(s.words[a]|0)+o,o=n>>26,this.words[a]=n&67108863;for(;o!==0&&a<i.length;a++)n=(i.words[a]|0)+o,o=n>>26,this.words[a]=n&67108863;if(o===0&&a<i.length&&i!==this)for(;a<i.length;a++)this.words[a]=i.words[a];return this.length=Math.max(this.length,a),i!==this&&(this.negative=1),this.strip()}sub(e){return this.clone().isub(e)}smallMulTo(e,n,r){r.negative=n.negative^e.negative;let i=e.length+n.length|0;r.length=i,i=i-1|0;let s=e.words[0]|0,o=n.words[0]|0,a=s*o;const c=a&67108863;let l=a/67108864|0;r.words[0]=c;let u=1;for(;u<i;u++){let d=l>>>26,h=l&67108863;const f=Math.min(u,n.length-1);for(let p=Math.max(0,u-e.length+1);p<=f;p++){const g=u-p|0;s=e.words[g]|0,o=n.words[p]|0,a=s*o+h,d+=a/67108864|0,h=a&67108863}r.words[u]=h|0,l=d|0}return l!==0?r.words[u]=l|0:r.length--,r.strip()}comb10MulTo(e,n,r){const i=e.words,s=n.words,o=r.words;let a=0,c,l,u;const d=i[0]|0,h=d&8191,f=d>>>13,p=i[1]|0,g=p&8191,m=p>>>13,y=i[2]|0,b=y&8191,x=y>>>13,S=i[3]|0,P=S&8191,_=S>>>13,I=i[4]|0,C=I&8191,A=I>>>13,M=i[5]|0,k=M&8191,O=M>>>13,B=i[6]|0,$=B&8191,U=B>>>13,q=i[7]|0,K=q&8191,V=q>>>13,G=i[8]|0,j=G&8191,Q=G>>>13,se=i[9]|0,Z=se&8191,ie=se>>>13,pe=s[0]|0,ue=pe&8191,le=pe>>>13,ae=s[1]|0,_e=ae&8191,ye=ae>>>13,Ae=s[2]|0,Oe=Ae&8191,Be=Ae>>>13,ce=s[3]|0,Ge=ce&8191,Pe=ce>>>13,He=s[4]|0,Re=He&8191,je=He>>>13,te=s[5]|0,ee=te&8191,X=te>>>13,we=s[6]|0,Ne=we&8191,We=we>>>13,xe=s[7]|0,Ve=xe&8191,be=xe>>>13,ge=s[8]|0,Se=ge&8191,Ie=ge>>>13,me=s[9]|0,Ee=me&8191,oe=me>>>13;r.negative=e.negative^n.negative,r.length=19,c=Math.imul(h,ue),l=Math.imul(h,le),l=l+Math.imul(f,ue)|0,u=Math.imul(f,le);let ne=(a+c|0)+((l&8191)<<13)|0;a=(u+(l>>>13)|0)+(ne>>>26)|0,ne&=67108863,c=Math.imul(g,ue),l=Math.imul(g,le),l=l+Math.imul(m,ue)|0,u=Math.imul(m,le),c=c+Math.imul(h,_e)|0,l=l+Math.imul(h,ye)|0,l=l+Math.imul(f,_e)|0,u=u+Math.imul(f,ye)|0;let de=(a+c|0)+((l&8191)<<13)|0;a=(u+(l>>>13)|0)+(de>>>26)|0,de&=67108863,c=Math.imul(b,ue),l=Math.imul(b,le),l=l+Math.imul(x,ue)|0,u=Math.imul(x,le),c=c+Math.imul(g,_e)|0,l=l+Math.imul(g,ye)|0,l=l+Math.imul(m,_e)|0,u=u+Math.imul(m,ye)|0,c=c+Math.imul(h,Oe)|0,l=l+Math.imul(h,Be)|0,l=l+Math.imul(f,Oe)|0,u=u+Math.imul(f,Be)|0;let Te=(a+c|0)+((l&8191)<<13)|0;a=(u+(l>>>13)|0)+(Te>>>26)|0,Te&=67108863,c=Math.imul(P,ue),l=Math.imul(P,le),l=l+Math.imul(_,ue)|0,u=Math.imul(_,le),c=c+Math.imul(b,_e)|0,l=l+Math.imul(b,ye)|0,l=l+Math.imul(x,_e)|0,u=u+Math.imul(x,ye)|0,c=c+Math.imul(g,Oe)|0,l=l+Math.imul(g,Be)|0,l=l+Math.imul(m,Oe)|0,u=u+Math.imul(m,Be)|0,c=c+Math.imul(h,Ge)|0,l=l+Math.imul(h,Pe)|0,l=l+Math.imul(f,Ge)|0,u=u+Math.imul(f,Pe)|0;let ke=(a+c|0)+((l&8191)<<13)|0;a=(u+(l>>>13)|0)+(ke>>>26)|0,ke&=67108863,c=Math.imul(C,ue),l=Math.imul(C,le),l=l+Math.imul(A,ue)|0,u=Math.imul(A,le),c=c+Math.imul(P,_e)|0,l=l+Math.imul(P,ye)|0,l=l+Math.imul(_,_e)|0,u=u+Math.imul(_,ye)|0,c=c+Math.imul(b,Oe)|0,l=l+Math.imul(b,Be)|0,l=l+Math.imul(x,Oe)|0,u=u+Math.imul(x,Be)|0,c=c+Math.imul(g,Ge)|0,l=l+Math.imul(g,Pe)|0,l=l+Math.imul(m,Ge)|0,u=u+Math.imul(m,Pe)|0,c=c+Math.imul(h,Re)|0,l=l+Math.imul(h,je)|0,l=l+Math.imul(f,Re)|0,u=u+Math.imul(f,je)|0;let he=(a+c|0)+((l&8191)<<13)|0;a=(u+(l>>>13)|0)+(he>>>26)|0,he&=67108863,c=Math.imul(k,ue),l=Math.imul(k,le),l=l+Math.imul(O,ue)|0,u=Math.imul(O,le),c=c+Math.imul(C,_e)|0,l=l+Math.imul(C,ye)|0,l=l+Math.imul(A,_e)|0,u=u+Math.imul(A,ye)|0,c=c+Math.imul(P,Oe)|0,l=l+Math.imul(P,Be)|0,l=l+Math.imul(_,Oe)|0,u=u+Math.imul(_,Be)|0,c=c+Math.imul(b,Ge)|0,l=l+Math.imul(b,Pe)|0,l=l+Math.imul(x,Ge)|0,u=u+Math.imul(x,Pe)|0,c=c+Math.imul(g,Re)|0,l=l+Math.imul(g,je)|0,l=l+Math.imul(m,Re)|0,u=u+Math.imul(m,je)|0,c=c+Math.imul(h,ee)|0,l=l+Math.imul(h,X)|0,l=l+Math.imul(f,ee)|0,u=u+Math.imul(f,X)|0;let Xe=(a+c|0)+((l&8191)<<13)|0;a=(u+(l>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,c=Math.imul($,ue),l=Math.imul($,le),l=l+Math.imul(U,ue)|0,u=Math.imul(U,le),c=c+Math.imul(k,_e)|0,l=l+Math.imul(k,ye)|0,l=l+Math.imul(O,_e)|0,u=u+Math.imul(O,ye)|0,c=c+Math.imul(C,Oe)|0,l=l+Math.imul(C,Be)|0,l=l+Math.imul(A,Oe)|0,u=u+Math.imul(A,Be)|0,c=c+Math.imul(P,Ge)|0,l=l+Math.imul(P,Pe)|0,l=l+Math.imul(_,Ge)|0,u=u+Math.imul(_,Pe)|0,c=c+Math.imul(b,Re)|0,l=l+Math.imul(b,je)|0,l=l+Math.imul(x,Re)|0,u=u+Math.imul(x,je)|0,c=c+Math.imul(g,ee)|0,l=l+Math.imul(g,X)|0,l=l+Math.imul(m,ee)|0,u=u+Math.imul(m,X)|0,c=c+Math.imul(h,Ne)|0,l=l+Math.imul(h,We)|0,l=l+Math.imul(f,Ne)|0,u=u+Math.imul(f,We)|0;let $e=(a+c|0)+((l&8191)<<13)|0;a=(u+(l>>>13)|0)+($e>>>26)|0,$e&=67108863,c=Math.imul(K,ue),l=Math.imul(K,le),l=l+Math.imul(V,ue)|0,u=Math.imul(V,le),c=c+Math.imul($,_e)|0,l=l+Math.imul($,ye)|0,l=l+Math.imul(U,_e)|0,u=u+Math.imul(U,ye)|0,c=c+Math.imul(k,Oe)|0,l=l+Math.imul(k,Be)|0,l=l+Math.imul(O,Oe)|0,u=u+Math.imul(O,Be)|0,c=c+Math.imul(C,Ge)|0,l=l+Math.imul(C,Pe)|0,l=l+Math.imul(A,Ge)|0,u=u+Math.imul(A,Pe)|0,c=c+Math.imul(P,Re)|0,l=l+Math.imul(P,je)|0,l=l+Math.imul(_,Re)|0,u=u+Math.imul(_,je)|0,c=c+Math.imul(b,ee)|0,l=l+Math.imul(b,X)|0,l=l+Math.imul(x,ee)|0,u=u+Math.imul(x,X)|0,c=c+Math.imul(g,Ne)|0,l=l+Math.imul(g,We)|0,l=l+Math.imul(m,Ne)|0,u=u+Math.imul(m,We)|0,c=c+Math.imul(h,Ve)|0,l=l+Math.imul(h,be)|0,l=l+Math.imul(f,Ve)|0,u=u+Math.imul(f,be)|0;let Qe=(a+c|0)+((l&8191)<<13)|0;a=(u+(l>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,c=Math.imul(j,ue),l=Math.imul(j,le),l=l+Math.imul(Q,ue)|0,u=Math.imul(Q,le),c=c+Math.imul(K,_e)|0,l=l+Math.imul(K,ye)|0,l=l+Math.imul(V,_e)|0,u=u+Math.imul(V,ye)|0,c=c+Math.imul($,Oe)|0,l=l+Math.imul($,Be)|0,l=l+Math.imul(U,Oe)|0,u=u+Math.imul(U,Be)|0,c=c+Math.imul(k,Ge)|0,l=l+Math.imul(k,Pe)|0,l=l+Math.imul(O,Ge)|0,u=u+Math.imul(O,Pe)|0,c=c+Math.imul(C,Re)|0,l=l+Math.imul(C,je)|0,l=l+Math.imul(A,Re)|0,u=u+Math.imul(A,je)|0,c=c+Math.imul(P,ee)|0,l=l+Math.imul(P,X)|0,l=l+Math.imul(_,ee)|0,u=u+Math.imul(_,X)|0,c=c+Math.imul(b,Ne)|0,l=l+Math.imul(b,We)|0,l=l+Math.imul(x,Ne)|0,u=u+Math.imul(x,We)|0,c=c+Math.imul(g,Ve)|0,l=l+Math.imul(g,be)|0,l=l+Math.imul(m,Ve)|0,u=u+Math.imul(m,be)|0,c=c+Math.imul(h,Se)|0,l=l+Math.imul(h,Ie)|0,l=l+Math.imul(f,Se)|0,u=u+Math.imul(f,Ie)|0;let ut=(a+c|0)+((l&8191)<<13)|0;a=(u+(l>>>13)|0)+(ut>>>26)|0,ut&=67108863,c=Math.imul(Z,ue),l=Math.imul(Z,le),l=l+Math.imul(ie,ue)|0,u=Math.imul(ie,le),c=c+Math.imul(j,_e)|0,l=l+Math.imul(j,ye)|0,l=l+Math.imul(Q,_e)|0,u=u+Math.imul(Q,ye)|0,c=c+Math.imul(K,Oe)|0,l=l+Math.imul(K,Be)|0,l=l+Math.imul(V,Oe)|0,u=u+Math.imul(V,Be)|0,c=c+Math.imul($,Ge)|0,l=l+Math.imul($,Pe)|0,l=l+Math.imul(U,Ge)|0,u=u+Math.imul(U,Pe)|0,c=c+Math.imul(k,Re)|0,l=l+Math.imul(k,je)|0,l=l+Math.imul(O,Re)|0,u=u+Math.imul(O,je)|0,c=c+Math.imul(C,ee)|0,l=l+Math.imul(C,X)|0,l=l+Math.imul(A,ee)|0,u=u+Math.imul(A,X)|0,c=c+Math.imul(P,Ne)|0,l=l+Math.imul(P,We)|0,l=l+Math.imul(_,Ne)|0,u=u+Math.imul(_,We)|0,c=c+Math.imul(b,Ve)|0,l=l+Math.imul(b,be)|0,l=l+Math.imul(x,Ve)|0,u=u+Math.imul(x,be)|0,c=c+Math.imul(g,Se)|0,l=l+Math.imul(g,Ie)|0,l=l+Math.imul(m,Se)|0,u=u+Math.imul(m,Ie)|0,c=c+Math.imul(h,Ee)|0,l=l+Math.imul(h,oe)|0,l=l+Math.imul(f,Ee)|0,u=u+Math.imul(f,oe)|0;let gt=(a+c|0)+((l&8191)<<13)|0;a=(u+(l>>>13)|0)+(gt>>>26)|0,gt&=67108863,c=Math.imul(Z,_e),l=Math.imul(Z,ye),l=l+Math.imul(ie,_e)|0,u=Math.imul(ie,ye),c=c+Math.imul(j,Oe)|0,l=l+Math.imul(j,Be)|0,l=l+Math.imul(Q,Oe)|0,u=u+Math.imul(Q,Be)|0,c=c+Math.imul(K,Ge)|0,l=l+Math.imul(K,Pe)|0,l=l+Math.imul(V,Ge)|0,u=u+Math.imul(V,Pe)|0,c=c+Math.imul($,Re)|0,l=l+Math.imul($,je)|0,l=l+Math.imul(U,Re)|0,u=u+Math.imul(U,je)|0,c=c+Math.imul(k,ee)|0,l=l+Math.imul(k,X)|0,l=l+Math.imul(O,ee)|0,u=u+Math.imul(O,X)|0,c=c+Math.imul(C,Ne)|0,l=l+Math.imul(C,We)|0,l=l+Math.imul(A,Ne)|0,u=u+Math.imul(A,We)|0,c=c+Math.imul(P,Ve)|0,l=l+Math.imul(P,be)|0,l=l+Math.imul(_,Ve)|0,u=u+Math.imul(_,be)|0,c=c+Math.imul(b,Se)|0,l=l+Math.imul(b,Ie)|0,l=l+Math.imul(x,Se)|0,u=u+Math.imul(x,Ie)|0,c=c+Math.imul(g,Ee)|0,l=l+Math.imul(g,oe)|0,l=l+Math.imul(m,Ee)|0,u=u+Math.imul(m,oe)|0;let Tt=(a+c|0)+((l&8191)<<13)|0;a=(u+(l>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,c=Math.imul(Z,Oe),l=Math.imul(Z,Be),l=l+Math.imul(ie,Oe)|0,u=Math.imul(ie,Be),c=c+Math.imul(j,Ge)|0,l=l+Math.imul(j,Pe)|0,l=l+Math.imul(Q,Ge)|0,u=u+Math.imul(Q,Pe)|0,c=c+Math.imul(K,Re)|0,l=l+Math.imul(K,je)|0,l=l+Math.imul(V,Re)|0,u=u+Math.imul(V,je)|0,c=c+Math.imul($,ee)|0,l=l+Math.imul($,X)|0,l=l+Math.imul(U,ee)|0,u=u+Math.imul(U,X)|0,c=c+Math.imul(k,Ne)|0,l=l+Math.imul(k,We)|0,l=l+Math.imul(O,Ne)|0,u=u+Math.imul(O,We)|0,c=c+Math.imul(C,Ve)|0,l=l+Math.imul(C,be)|0,l=l+Math.imul(A,Ve)|0,u=u+Math.imul(A,be)|0,c=c+Math.imul(P,Se)|0,l=l+Math.imul(P,Ie)|0,l=l+Math.imul(_,Se)|0,u=u+Math.imul(_,Ie)|0,c=c+Math.imul(b,Ee)|0,l=l+Math.imul(b,oe)|0,l=l+Math.imul(x,Ee)|0,u=u+Math.imul(x,oe)|0;let Kt=(a+c|0)+((l&8191)<<13)|0;a=(u+(l>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,c=Math.imul(Z,Ge),l=Math.imul(Z,Pe),l=l+Math.imul(ie,Ge)|0,u=Math.imul(ie,Pe),c=c+Math.imul(j,Re)|0,l=l+Math.imul(j,je)|0,l=l+Math.imul(Q,Re)|0,u=u+Math.imul(Q,je)|0,c=c+Math.imul(K,ee)|0,l=l+Math.imul(K,X)|0,l=l+Math.imul(V,ee)|0,u=u+Math.imul(V,X)|0,c=c+Math.imul($,Ne)|0,l=l+Math.imul($,We)|0,l=l+Math.imul(U,Ne)|0,u=u+Math.imul(U,We)|0,c=c+Math.imul(k,Ve)|0,l=l+Math.imul(k,be)|0,l=l+Math.imul(O,Ve)|0,u=u+Math.imul(O,be)|0,c=c+Math.imul(C,Se)|0,l=l+Math.imul(C,Ie)|0,l=l+Math.imul(A,Se)|0,u=u+Math.imul(A,Ie)|0,c=c+Math.imul(P,Ee)|0,l=l+Math.imul(P,oe)|0,l=l+Math.imul(_,Ee)|0,u=u+Math.imul(_,oe)|0;let Zt=(a+c|0)+((l&8191)<<13)|0;a=(u+(l>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,c=Math.imul(Z,Re),l=Math.imul(Z,je),l=l+Math.imul(ie,Re)|0,u=Math.imul(ie,je),c=c+Math.imul(j,ee)|0,l=l+Math.imul(j,X)|0,l=l+Math.imul(Q,ee)|0,u=u+Math.imul(Q,X)|0,c=c+Math.imul(K,Ne)|0,l=l+Math.imul(K,We)|0,l=l+Math.imul(V,Ne)|0,u=u+Math.imul(V,We)|0,c=c+Math.imul($,Ve)|0,l=l+Math.imul($,be)|0,l=l+Math.imul(U,Ve)|0,u=u+Math.imul(U,be)|0,c=c+Math.imul(k,Se)|0,l=l+Math.imul(k,Ie)|0,l=l+Math.imul(O,Se)|0,u=u+Math.imul(O,Ie)|0,c=c+Math.imul(C,Ee)|0,l=l+Math.imul(C,oe)|0,l=l+Math.imul(A,Ee)|0,u=u+Math.imul(A,oe)|0;let Bt=(a+c|0)+((l&8191)<<13)|0;a=(u+(l>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,c=Math.imul(Z,ee),l=Math.imul(Z,X),l=l+Math.imul(ie,ee)|0,u=Math.imul(ie,X),c=c+Math.imul(j,Ne)|0,l=l+Math.imul(j,We)|0,l=l+Math.imul(Q,Ne)|0,u=u+Math.imul(Q,We)|0,c=c+Math.imul(K,Ve)|0,l=l+Math.imul(K,be)|0,l=l+Math.imul(V,Ve)|0,u=u+Math.imul(V,be)|0,c=c+Math.imul($,Se)|0,l=l+Math.imul($,Ie)|0,l=l+Math.imul(U,Se)|0,u=u+Math.imul(U,Ie)|0,c=c+Math.imul(k,Ee)|0,l=l+Math.imul(k,oe)|0,l=l+Math.imul(O,Ee)|0,u=u+Math.imul(O,oe)|0;let _n=(a+c|0)+((l&8191)<<13)|0;a=(u+(l>>>13)|0)+(_n>>>26)|0,_n&=67108863,c=Math.imul(Z,Ne),l=Math.imul(Z,We),l=l+Math.imul(ie,Ne)|0,u=Math.imul(ie,We),c=c+Math.imul(j,Ve)|0,l=l+Math.imul(j,be)|0,l=l+Math.imul(Q,Ve)|0,u=u+Math.imul(Q,be)|0,c=c+Math.imul(K,Se)|0,l=l+Math.imul(K,Ie)|0,l=l+Math.imul(V,Se)|0,u=u+Math.imul(V,Ie)|0,c=c+Math.imul($,Ee)|0,l=l+Math.imul($,oe)|0,l=l+Math.imul(U,Ee)|0,u=u+Math.imul(U,oe)|0;let hn=(a+c|0)+((l&8191)<<13)|0;a=(u+(l>>>13)|0)+(hn>>>26)|0,hn&=67108863,c=Math.imul(Z,Ve),l=Math.imul(Z,be),l=l+Math.imul(ie,Ve)|0,u=Math.imul(ie,be),c=c+Math.imul(j,Se)|0,l=l+Math.imul(j,Ie)|0,l=l+Math.imul(Q,Se)|0,u=u+Math.imul(Q,Ie)|0,c=c+Math.imul(K,Ee)|0,l=l+Math.imul(K,oe)|0,l=l+Math.imul(V,Ee)|0,u=u+Math.imul(V,oe)|0;let bn=(a+c|0)+((l&8191)<<13)|0;a=(u+(l>>>13)|0)+(bn>>>26)|0,bn&=67108863,c=Math.imul(Z,Se),l=Math.imul(Z,Ie),l=l+Math.imul(ie,Se)|0,u=Math.imul(ie,Ie),c=c+Math.imul(j,Ee)|0,l=l+Math.imul(j,oe)|0,l=l+Math.imul(Q,Ee)|0,u=u+Math.imul(Q,oe)|0;let Wn=(a+c|0)+((l&8191)<<13)|0;a=(u+(l>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,c=Math.imul(Z,Ee),l=Math.imul(Z,oe),l=l+Math.imul(ie,Ee)|0,u=Math.imul(ie,oe);let Un=(a+c|0)+((l&8191)<<13)|0;return a=(u+(l>>>13)|0)+(Un>>>26)|0,Un&=67108863,o[0]=ne,o[1]=de,o[2]=Te,o[3]=ke,o[4]=he,o[5]=Xe,o[6]=$e,o[7]=Qe,o[8]=ut,o[9]=gt,o[10]=Tt,o[11]=Kt,o[12]=Zt,o[13]=Bt,o[14]=_n,o[15]=hn,o[16]=bn,o[17]=Wn,o[18]=Un,a!==0&&(o[19]=a,r.length++),r}bigMulTo(e,n,r){r.negative=n.negative^e.negative,r.length=e.length+n.length;let i=0,s=0,o=0;for(;o<r.length-1;o++){let a=s;s=0;let c=i&67108863;const l=Math.min(o,n.length-1);for(let u=Math.max(0,o-e.length+1);u<=l;u++){const d=o-u,h=e.words[d]|0,f=n.words[u]|0,p=h*f;let g=p&67108863;a=a+(p/67108864|0)|0,g=g+c|0,c=g&67108863,a=a+(g>>>26)|0,s+=a>>>26,a&=67108863}r.words[o]=c,i=a,a=s}return i!==0?r.words[o]=i:r.length--,r.strip()}mulTo(e,n){let r;const i=this.length+e.length;return this.length===10&&e.length===10?r=this.comb10MulTo(this,e,n):i<63?r=this.smallMulTo(this,e,n):r=this.bigMulTo(this,e,n),r}mul(e){const n=new kn;return n.words=new Array(this.length+e.length),this.mulTo(e,n)}imul(e){return this.clone().mulTo(e,this)}imuln(e){const n=e<0;n&&(e=-e),this.assert(typeof e=="number"),this.assert(e<67108864);let r=0,i=0;for(;i<this.length;i++){const s=(this.words[i]|0)*e,o=(s&67108863)+(r&67108863);r>>=26,r+=s/67108864|0,r+=o>>>26,this.words[i]=o&67108863}return r!==0&&(this.words[i]=r,this.length++),n?this.ineg():this}muln(e){return this.clone().imuln(e)}sqr(){return this.mul(this)}isqr(){return this.imul(this.clone())}pow(e){const n=kn.toBitArray(e);if(n.length===0)return new kn(1);let r=this,i=0;for(;i<n.length&&n[i]===0;i++,r=r.sqr());if(++i<n.length)for(let s=r.sqr();i<n.length;i++,s=s.sqr())n[i]!==0&&(r=r.mul(s));return r}iushln(e){this.assert(typeof e=="number"&&e>=0);const n=e%26,r=(e-n)/26,i=67108863>>>26-n<<26-n;let s;if(n!==0){let o=0;for(s=0;s<this.length;s++){const a=this.words[s]&i,c=(this.words[s]|0)-a<<n;this.words[s]=c|o,o=a>>>26-n}o!==0&&(this.words[s]=o,this.length++)}if(r!==0){for(s=this.length-1;s>=0;s--)this.words[s+r]=this.words[s];for(s=0;s<r;s++)this.words[s]=0;this.length+=r}return this.strip()}ishln(e){return this.assert(this.negative===0),this.iushln(e)}iushrn(e,n,r){this.assert(typeof e=="number"&&e>=0);let i;typeof n=="number"&&n!==0?i=(n-n%26)/26:i=0;const s=e%26,o=Math.min((e-s)/26,this.length),a=67108863^67108863>>>s<<s,c=r;i-=o,i=Math.max(0,i);let l=0;if(typeof c<"u"){for(;l<o;l++)c.words[l]=this.words[l];c.length=o}if(o!==0)if(this.length>o)for(this.length-=o,l=0;l<this.length;l++)this.words[l]=this.words[l+o];else this.words[0]=0,this.length=1;let u=0;for(l=this.length-1;l>=0&&(u!==0||l>=i);l--){const d=this.words[l]|0;this.words[l]=u<<26-s|d>>>s,u=d&a}return c!=null&&u!==0&&(c.words[c.length++]=u),this.length===0&&(this.words[0]=0,this.length=1),this.strip()}ishrn(e,n,r){return this.assert(this.negative===0),this.iushrn(e,n,r)}shln(e){return this.clone().ishln(e)}ushln(e){return this.clone().iushln(e)}shrn(e){return this.clone().ishrn(e)}ushrn(e){return this.clone().iushrn(e)}testn(e){this.assert(typeof e=="number"&&e>=0);const n=e%26,r=(e-n)/26,i=1<<n;return this.length<=r?!1:!!(this.words[r]&i)}imaskn(e){this.assert(typeof e=="number"&&e>=0);const n=e%26;let r=(e-n)/26;if(this.assert(this.negative===0,"imaskn works only with positive numbers"),this.length<=r)return this;if(n!==0&&r++,this.length=Math.min(r,this.length),n!==0){const i=67108863^67108863>>>n<<n;this.words[this.length-1]&=i}return this.strip()}maskn(e){return this.clone().imaskn(e)}iaddn(e){return this.assert(typeof e=="number"),this.assert(e<67108864,"num is too large"),e<0?this.isubn(-e):this.negative!==0?this.length===1&&(this.words[0]|0)<=e?(this.words[0]=e-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)}_iaddn(e){this.words[0]+=e;let n=0;for(;n<this.length&&this.words[n]>=67108864;n++)this.words[n]-=67108864,n===this.length-1?this.words[n+1]=1:this.words[n+1]++;return this.length=Math.max(this.length,n+1),this}isubn(e){if(this.assert(typeof e=="number"),this.assert(e<67108864),e<0)return this.iaddn(-e);if(this.negative!==0)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(let n=0;n<this.length&&this.words[n]<0;n++)this.words[n]+=67108864,this.words[n+1]-=1;return this.strip()}addn(e){return this.clone().iaddn(e)}subn(e){return this.clone().isubn(e)}iabs(){return this.negative=0,this}abs(){return this.clone().iabs()}_ishlnsubmul(e,n,r){const i=e.length+r;let s;this.expand(i);let o,a=0;for(s=0;s<e.length;s++){o=(this.words[s+r]|0)+a;const c=(e.words[s]|0)*n;o-=c&67108863,a=(o>>26)-(c/67108864|0),this.words[s+r]=o&67108863}for(;s<this.length-r;s++)o=(this.words[s+r]|0)+a,a=o>>26,this.words[s+r]=o&67108863;if(a===0)return this.strip();for(this.assert(a===-1,"carry must be -1"),a=0,s=0;s<this.length;s++)o=-(this.words[s]|0)+a,a=o>>26,this.words[s]=o&67108863;return this.negative=1,this.strip()}wordDiv(e,n){let r=this.length-e.length,i=this.clone(),s=e,o=s.words[s.length-1]|0;r=26-this.countWordBits(o),r!==0&&(s=s.ushln(r),i.iushln(r),o=s.words[s.length-1]|0);const c=i.length-s.length;let l;if(n!=="mod"){l=new kn,l.length=c+1,l.words=new Array(l.length);for(let d=0;d<l.length;d++)l.words[d]=0}const u=i.clone()._ishlnsubmul(s,1,c);u.negative===0&&(i=u,typeof l<"u"&&(l.words[c]=1));for(let d=c-1;d>=0;d--){let h=(i.words[s.length+d]|0)*67108864+(i.words[s.length+d-1]|0);for(h=Math.min(h/o|0,67108863),i._ishlnsubmul(s,h,d);i.negative!==0;)h--,i.negative=0,i._ishlnsubmul(s,1,d),i.isZero()||(i.negative^=1);typeof l<"u"&&(l.words[d]=h)}return typeof l<"u"&&l.strip(),i.strip(),n!=="div"&&r!==0&&i.iushrn(r),{div:l??null,mod:i}}divmod(e,n,r){if(this.assert(!e.isZero()),this.isZero())return{div:new kn(0),mod:new kn(0)};let i,s,o;return this.negative!==0&&e.negative===0?(o=this.neg().divmod(e,n),n!=="mod"&&(i=o.div.neg()),n!=="div"&&(s=o.mod.neg(),r===!0&&s.negative!==0&&s.iadd(e)),{div:i,mod:s}):this.negative===0&&e.negative!==0?(o=this.divmod(e.neg(),n),n!=="mod"&&(i=o.div.neg()),{div:i,mod:o.mod}):(this.negative&e.negative)!==0?(o=this.neg().divmod(e.neg(),n),n!=="div"&&(s=o.mod.neg(),r===!0&&s.negative!==0&&s.isub(e)),{div:o.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new kn(0),mod:this}:e.length===1?n==="div"?{div:this.divn(e.words[0]),mod:null}:n==="mod"?{div:null,mod:new kn(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new kn(this.modrn(e.words[0]))}:this.wordDiv(e,n)}div(e){return this.divmod(e,"div",!1).div}mod(e){return this.divmod(e,"mod",!1).mod}umod(e){return this.divmod(e,"mod",!0).mod}divRound(e){const n=this.divmod(e);if(n.mod.isZero())return n.div;const r=n.div.negative!==0?n.mod.isub(e):n.mod,i=e.ushrn(1),s=e.andln(1),o=r.cmp(i);return o<0||s===1&&o===0?n.div:n.div.negative!==0?n.div.isubn(1):n.div.iaddn(1)}modrn(e){const n=e<0;n&&(e=-e),this.assert(e<=67108863);const r=(1<<26)%e;let i=0;for(let s=this.length-1;s>=0;s--)i=(r*i+(this.words[s]|0))%e;return n?-i:i}idivn(e){const n=e<0;n&&(e=-e),this.assert(e<=67108863);let r=0;for(let i=this.length-1;i>=0;i--){const s=(this.words[i]|0)+r*67108864;this.words[i]=s/e|0,r=s%e}return this.strip(),n?this.ineg():this}divn(e){return this.clone().idivn(e)}egcd(e){this.assert(e.negative===0,"p must not be negative"),this.assert(!e.isZero(),"p must not be zero");let n=this;const r=e.clone();n.negative!==0?n=n.umod(e):n=n.clone();const i=new kn(1),s=new kn(0),o=new kn(0),a=new kn(1);let c=0;for(;n.isEven()&&r.isEven();)n.iushrn(1),r.iushrn(1),++c;const l=r.clone(),u=n.clone();for(;!n.isZero();){let d=0,h=1;for(;(n.words[0]&h)===0&&d<26;++d,h<<=1);if(d>0)for(n.iushrn(d);d-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(u)),i.iushrn(1),s.iushrn(1);let f=0,p=1;for(;(r.words[0]&p)===0&&f<26;++f,p<<=1);if(f>0)for(r.iushrn(f);f-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(l),a.isub(u)),o.iushrn(1),a.iushrn(1);n.cmp(r)>=0?(n.isub(r),i.isub(o),s.isub(a)):(r.isub(n),o.isub(i),a.isub(s))}return{a:o,b:a,gcd:r.iushln(c)}}_invmp(e){this.assert(e.negative===0,"p must not be negative"),this.assert(!e.isZero(),"p must not be zero");let n=this;const r=e.clone();n.negative!==0?n=n.umod(e):n=n.clone();const i=new kn(1),s=new kn(0),o=r.clone();for(;n.cmpn(1)>0&&r.cmpn(1)>0;){let c=0,l=1;for(;(n.words[0]&l)===0&&c<26;++c,l<<=1);if(c>0)for(n.iushrn(c);c-- >0;)i.isOdd()&&i.iadd(o),i.iushrn(1);let u=0,d=1;for(;(r.words[0]&d)===0&&u<26;++u,d<<=1);if(u>0)for(r.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(o),s.iushrn(1);n.cmp(r)>=0?(n.isub(r),i.isub(s)):(r.isub(n),s.isub(i))}let a;return n.cmpn(1)===0?a=i:a=s,a.cmpn(0)<0&&a.iadd(e),a}gcd(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();let n=this.clone(),r=e.clone();n.negative=0,r.negative=0;let i=0;for(;n.isEven()&&r.isEven();i++)n.iushrn(1),r.iushrn(1);do{for(;n.isEven();)n.iushrn(1);for(;r.isEven();)r.iushrn(1);const s=n.cmp(r);if(s<0){const o=n;n=r,r=o}else if(s===0||r.cmpn(1)===0)break;n.isub(r)}while(!0);return r.iushln(i)}invm(e){return this.egcd(e).a.umod(e)}isEven(){return(this.words[0]&1)===0}isOdd(){return(this.words[0]&1)===1}andln(e){return this.words[0]&e}bincn(e){this.assert(typeof e=="number");const n=e%26,r=(e-n)/26,i=1<<n;if(this.length<=r)return this.expand(r+1),this.words[r]|=i,this;let s=i,o=r;for(;s!==0&&o<this.length;o++){let a=this.words[o]|0;a+=s,s=a>>>26,a&=67108863,this.words[o]=a}return s!==0&&(this.words[o]=s,this.length++),this}isZero(){return this.length===1&&this.words[0]===0}cmpn(e){const n=e<0;if(this.negative!==0&&!n)return-1;if(this.negative===0&&n)return 1;this.strip();let r;if(this.length>1)r=1;else{n&&(e=-e),this.assert(e<=67108863,"Number is too big");const i=this.words[0]|0;r=i===e?0:i<e?-1:1}return this.negative!==0?-r|0:r}cmp(e){if(this.negative!==0&&e.negative===0)return-1;if(this.negative===0&&e.negative!==0)return 1;const n=this.ucmp(e);return this.negative!==0?-n|0:n}ucmp(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;let n=0;for(let r=this.length-1;r>=0;r--){const i=this.words[r]|0,s=e.words[r]|0;if(i!==s){i<s?n=-1:i>s&&(n=1);break}}return n}gtn(e){return this.cmpn(e)===1}gt(e){return this.cmp(e)===1}gten(e){return this.cmpn(e)>=0}gte(e){return this.cmp(e)>=0}ltn(e){return this.cmpn(e)===-1}lt(e){return this.cmp(e)===-1}lten(e){return this.cmpn(e)<=0}lte(e){return this.cmp(e)<=0}eqn(e){return this.cmpn(e)===0}eq(e){return this.cmp(e)===0}toRed(e){return this.assert(this.red==null,"Already a number in reduction context"),this.assert(this.negative===0,"red works only with positives"),e.convertTo(this).forceRed(e)}fromRed(){return this.assert(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)}forceRed(e){return this.red=e,this}redAdd(e){return this.assert(this.red,"redAdd works only with red numbers"),this.red.add(this,e)}redIAdd(e){return this.assert(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)}redSub(e){return this.assert(this.red,"redSub works only with red numbers"),this.red.sub(this,e)}redISub(e){return this.assert(this.red,"redISub works only with red numbers"),this.red.isub(this,e)}redShl(e){return this.assert(this.red,"redShl works only with red numbers"),this.red.shl(this,e)}redMul(e){return this.assert(this.red,"redMul works only with red numbers"),this.red.verify2(this,e),this.red.mul(this,e)}redIMul(e){return this.assert(this.red,"redMul works only with red numbers"),this.red.verify2(this,e),this.red.imul(this,e)}redSqr(){return this.assert(this.red,"redSqr works only with red numbers"),this.red.verify1(this),this.red.sqr(this)}redISqr(){return this.assert(this.red,"redISqr works only with red numbers"),this.red.verify1(this),this.red.isqr(this)}redSqrt(){return this.assert(this.red,"redSqrt works only with red numbers"),this.red.verify1(this),this.red.sqrt(this)}redInvm(){return this.assert(this.red,"redInvm works only with red numbers"),this.red.verify1(this),this.red.invm(this)}redNeg(){return this.assert(this.red,"redNeg works only with red numbers"),this.red.verify1(this),this.red.neg(this)}redPow(e){return this.assert(this.red!=null&&e.red==null,"redPow(normalNum)"),this.red.verify1(this),this.red.pow(this,e)}static fromHex(e,n){return n==="big"?new kn(e,16):new kn(e,16,"le")}toHex(e=0){return this.toString("hex",e*2)}static fromJSON(e){return new kn(e)}static fromNumber(e){return new kn(e)}static fromString(e,n){return new kn(e,n)}static fromSm(e,n="big"){let r=e;return e.length===0?new kn(0):(n==="little"&&(r=[...r],r=r.reverse()),(r[0]&128)!==0?(r=[...r],r[0]=r[0]&127,new kn(r).neg()):new kn(r))}toSm(e="big"){let n;return this.cmpn(0)===-1?(n=this.neg().toArray(),(n[0]&128)!==0?n=[128,...n]:n[0]=n[0]|128):(n=this.toArray(),(n[0]&128)!==0&&(n=[0,...n])),n.length===1&&n[0]===0&&(n=[]),e==="little"&&(n=n.reverse()),n}static fromBits(e,n=!1){if(e=(e&2147483648)!==0?e-4294967296:e,n&&(e&8388608)!==0)throw new Error("negative bit set");const r=e>>24,i=e&8388607;let s=[i>>24&255,i>>16&255,i>>8&255,i&255];if(r<=3)s=s.slice(1,1+r);else for(let o=0;o<r-3;o++)s.push(0);return(e&8388608)!==0?new kn(s).neg():new kn(s)}toBits(){let e;for(this.ltn(0)?e=this.neg().toArray("be"):e=this.toArray("be");e.length<4;)e.unshift(0);if(e.every(s=>s===0))return 0;for(;e[0]===0;)e.shift();let n=e.length,r=e.slice(0,3).reduce((s,o)=>s*256+o,0);(r&8388608)!==0&&(e.unshift(0),n+=1,r>>>=8);let i=n<<24|r;return this.ltn(0)&&(i|=8388608),i>>>0}static fromScriptNum(e,n,r){if(r===void 0&&(r=Number.MAX_SAFE_INTEGER),e.length>r)throw new Error("script number overflow");if(n===!0&&e.length>0&&(e[e.length-1]&127)===0&&(e.length<=1||(e[e.length-2]&128)===0))throw new Error("non-minimally encoded script number");return kn.fromSm(e,"little")}toScriptNum(){return this.toSm("little")}},ze(kn,"zeros",["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"]),ze(kn,"groupSizes",[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5]),ze(kn,"groupBases",[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176]),ze(kn,"wordSize",26),kn),sye=class{constructor(e,n){ze(this,"name");ze(this,"p");ze(this,"k");ze(this,"n");ze(this,"tmp");this.name=e,this.p=new et(n,16),this.n=this.p.bitLength(),this.k=new et(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}_tmp(){const e=new et;return e.words=new Array(Math.ceil(this.n/13)),e}ireduce(e){let n=e,r;do this.split(n,this.tmp),n=this.imulK(n),n=n.iadd(this.tmp),r=n.bitLength();while(r>this.n);const i=r<this.n?-1:n.ucmp(this.p);return i===0?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):(n.strip,n.strip()),n}split(e,n){e.iushrn(this.n,0,n)}imulK(e){return e.imul(this.k)}},oye=class extends sye{constructor(){super("k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}split(e,n){const i=Math.min(e.length,9);let s=0;for(;s<i;s++)n.words[s]=e.words[s];if(n.length=i,e.length<=9){e.words[0]=0,e.length=1;return}let o=e.words[9];for(n.words[n.length++]=o&4194303,s=10;s<e.length;s++){const a=e.words[s]|0;e.words[s-10]=(a&4194303)<<4|o>>>22,o=a}o>>>=22,e.words[s-10]=o,o===0&&e.length>10?e.length-=10:e.length-=9}imulK(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;let n=0;for(let r=0;r<e.length;r++){const i=e.words[r]|0;n+=i*977,e.words[r]=n&67108863,n=i*64+(n/67108864|0)}return e.words[e.length-1]===0&&(e.length--,e.words[e.length-1]===0&&e.length--),e}},W2=class{constructor(e){ze(this,"prime");ze(this,"m");if(e==="k256"){const n=new oye;this.m=n.p,this.prime=n}else this.assert(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}assert(e,n="Assertion failed"){if(!e)throw new Error(n)}verify1(e){this.assert(e.negative===0,"red works only with positives"),this.assert(e.red,"red works only with red numbers")}verify2(e,n){this.assert((e.negative|n.negative)===0,"red works only with positives"),this.assert(e.red!=null&&e.red===n.red,"red works only with red numbers")}imod(e){return this.prime!=null?this.prime.ireduce(e).forceRed(this):(et.move(e,e.umod(this.m).forceRed(this)),e)}neg(e){return e.isZero()?e.clone():this.m.sub(e).forceRed(this)}add(e,n){this.verify2(e,n);const r=e.add(n);return r.cmp(this.m)>=0&&r.isub(this.m),r.forceRed(this)}iadd(e,n){this.verify2(e,n);const r=e.iadd(n);return r.cmp(this.m)>=0&&r.isub(this.m),r}sub(e,n){this.verify2(e,n);const r=e.sub(n);return r.cmpn(0)<0&&r.iadd(this.m),r.forceRed(this)}isub(e,n){this.verify2(e,n);const r=e.isub(n);return r.cmpn(0)<0&&r.iadd(this.m),r}shl(e,n){return this.verify1(e),this.imod(e.ushln(n))}imul(e,n){return this.verify2(e,n),this.imod(e.imul(n))}mul(e,n){return this.verify2(e,n),this.imod(e.mul(n))}isqr(e){return this.imul(e,e.clone())}sqr(e){return this.mul(e,e)}sqrt(e){if(e.isZero())return e.clone();const n=this.m.andln(3);if(this.assert(n%2===1),n===3){const p=this.m.add(new et(1)).iushrn(2);return this.pow(e,p)}const r=this.m.subn(1);let i=0;for(;!r.isZero()&&r.andln(1)===0;)i++,r.iushrn(1);this.assert(!r.isZero());const s=new et(1).toRed(this),o=s.redNeg(),a=this.m.subn(1).iushrn(1),c=this.m.bitLength(),l=new et(2*c*c).toRed(this);for(;this.pow(l,a).cmp(o)!==0;)l.redIAdd(o);let u=this.pow(l,r),d=this.pow(e,r.addn(1).iushrn(1)),h=this.pow(e,r),f=i;for(;h.cmp(s)!==0;){let p=h,g=0;for(;p.cmp(s)!==0;g++)p=p.redSqr();this.assert(g<f);const m=this.pow(u,new et(1).iushln(f-g-1));d=d.redMul(m),u=m.redSqr(),h=h.redMul(u),f=g}return d}invm(e){const n=e._invmp(this.m);return n.negative!==0?(n.negative=0,this.imod(n).redNeg()):this.imod(n)}pow(e,n){if(n.isZero())return new et(1).toRed(this);if(n.cmpn(1)===0)return e.clone();const r=4,i=new Array(1<<r);i[0]=new et(1).toRed(this),i[1]=e;let s=2;for(;s<i.length;s++)i[s]=this.mul(i[s-1],e);let o=i[0],a=0,c=0,l=n.bitLength()%26;for(l===0&&(l=26),s=n.length-1;s>=0;s--){const u=n.words[s];for(let d=l-1;d>=0;d--){const h=u>>d&1;if(o!==i[0]&&(o=this.sqr(o)),h===0&&a===0){c=0;continue}a<<=1,a|=h,c++,!(c!==r&&(s!==0||d!==0))&&(o=this.mul(o,i[a]),c=0,a=0)}l=26}return o}convertTo(e){const n=e.umod(this.m);return n===e?n.clone():n}convertFrom(e){const n=e.clone();return n.red=null,n}},aye=class extends W2{constructor(n){super(n);ze(this,"shift");ze(this,"r");ze(this,"r2");ze(this,"rinv");ze(this,"minv");this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new et(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}convertTo(n){return this.imod(n.ushln(this.shift))}convertFrom(n){const r=this.imod(n.mul(this.rinv));return r.red=null,r}imul(n,r){if(n.isZero()||r.isZero())return n.words[0]=0,n.length=1,n;const i=n.imul(r),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(s).iushrn(this.shift);let a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):o.cmpn(0)<0&&(a=o.iadd(this.m)),a.forceRed(this)}mul(n,r){if(n.isZero()||r.isZero())return new et(0).forceRed(this);const i=n.mul(r),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(s).iushrn(this.shift);let a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):o.cmpn(0)<0&&(a=o.iadd(this.m)),a.forceRed(this)}invm(n){return this.imod(n._invmp(this.m).mul(this.r2)).forceRed(this)}},SW=class{constructor(e){ze(this,"curve");ze(this,"type");ze(this,"precomputed");this.curve=new ea,this.type=e,this.precomputed=null}},Xb=class Qp extends SW{constructor(n,r,i){super("jacobian");ze(this,"x");ze(this,"y");ze(this,"z");ze(this,"zOne");n===null&&r===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new et(0)):(et.isBN(n)||(n=new et(n,16)),this.x=n,et.isBN(r)||(r=new et(r,16)),this.y=r,et.isBN(i)||(i=new et(i,16)),this.z=i),this.x.red==null&&(this.x=this.x.toRed(this.curve.red)),this.y.red==null&&(this.y=this.y.toRed(this.curve.red)),this.z.red==null&&(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}toP(){if(this.isInfinity())return new Md(null,null);const n=this.z.redInvm(),r=n.redSqr(),i=this.x.redMul(r),s=this.y.redMul(r).redMul(n);return new Md(i,s)}neg(){return new Qp(this.x,this.y.redNeg(),this.z)}add(n){if(this.isInfinity())return n;if(n.isInfinity())return this;const r=n.z.redSqr(),i=this.z.redSqr(),s=this.x.redMul(r),o=n.x.redMul(i),a=this.y.redMul(r.redMul(n.z)),c=n.y.redMul(i.redMul(this.z)),l=s.redSub(o),u=a.redSub(c);if(l.cmpn(0)===0)return u.cmpn(0)!==0?new Qp(null,null,null):this.dbl();const d=l.redSqr(),h=d.redMul(l),f=s.redMul(d),p=u.redSqr().redIAdd(h).redISub(f).redISub(f),g=u.redMul(f.redISub(p)).redISub(a.redMul(h)),m=this.z.redMul(n.z).redMul(l);return new Qp(p,g,m)}mixedAdd(n){if(this.isInfinity())return n.toJ();if(n.isInfinity())return this;if(n.x===null||n.y===null)throw new Error("Point coordinates cannot be null");const r=this.z.redSqr(),i=this.x,s=n.x.redMul(r),o=this.y,a=n.y.redMul(r).redMul(this.z),c=i.redSub(s),l=o.redSub(a);if(c.cmpn(0)===0)return l.cmpn(0)!==0?new Qp(null,null,null):this.dbl();const u=c.redSqr(),d=u.redMul(c),h=i.redMul(u),f=l.redSqr().redIAdd(d).redISub(h).redISub(h),p=l.redMul(h.redISub(f)).redISub(o.redMul(d)),g=this.z.redMul(c);return new Qp(f,p,g)}dblp(n){if(n===0)return this;if(this.isInfinity())return this;if(typeof n>"u")return this.dbl();let r=this;for(let i=0;i<n;i++)r=r.dbl();return r}dbl(){if(this.isInfinity())return this;let n,r,i;if(this.zOne){const s=this.x.redSqr(),o=this.y.redSqr(),a=o.redSqr();let c=this.x.redAdd(o).redSqr().redISub(s).redISub(a);c=c.redIAdd(c);const l=s.redAdd(s).redIAdd(s),u=l.redSqr().redISub(c).redISub(c);let d=a.redIAdd(a);d=d.redIAdd(d),d=d.redIAdd(d),n=u,r=l.redMul(c.redISub(u)).redISub(d),i=this.y.redAdd(this.y)}else{const s=this.x.redSqr(),o=this.y.redSqr(),a=o.redSqr();let c=this.x.redAdd(o).redSqr().redISub(s).redISub(a);c=c.redIAdd(c);const l=s.redAdd(s).redIAdd(s),u=l.redSqr();let d=a.redIAdd(a);d=d.redIAdd(d),d=d.redIAdd(d),n=u.redISub(c).redISub(c),r=l.redMul(c.redISub(n)).redISub(d),i=this.y.redMul(this.z),i=i.redIAdd(i)}return new Qp(n,r,i)}eq(n){if(n.type==="affine")return this.eq(n.toJ());if(this===n)return!0;const r=this.z.redSqr();n=n;const i=n.z.redSqr();if(this.x.redMul(i).redISub(n.x.redMul(r)).cmpn(0)!==0)return!1;const s=r.redMul(this.z),o=i.redMul(n.z);return this.y.redMul(o).redISub(n.y.redMul(s)).cmpn(0)===0}eqXToP(n){var a;const r=this.z.redSqr(),i=n.toRed((a=this.curve)==null?void 0:a.red).redMul(r);if(this.x.cmp(i)===0)return!0;const s=n.clone();if(this.curve===null||this.curve.redN==null)throw new Error("Curve or redN is not initialized.");const o=this.curve.redN.redMul(r);for(;s.cmp(this.curve.p)<0;){if(s.iadd(this.curve.n),s.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(o),this.x.cmp(i)===0)return!0}return!1}inspect(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"}isInfinity(){return this.z.cmpn(0)===0}};const Iw=(t,e="Hash assertion failed")=>{if(!t)throw new Error(e)};class PO{constructor(e,n,r,i){ze(this,"pending");ze(this,"pendingTotal");ze(this,"blockSize");ze(this,"outSize");ze(this,"endian");ze(this,"_delta8");ze(this,"_delta32");ze(this,"padLength");ze(this,"hmacStrength");this.pending=null,this.pendingTotal=0,this.blockSize=e,this.outSize=n,this.hmacStrength=r,this.padLength=i/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}_update(e,n){throw new Error("Not implemented")}_digest(){throw new Error("Not implemented")}_digestHex(){throw new Error("Not implemented")}update(e,n){if(e=EW(e,n),this.pending==null?this.pending=e:this.pending=this.pending.concat(e),this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;const r=e.length%this._delta8;this.pending=e.slice(e.length-r,e.length),this.pending.length===0&&(this.pending=null),e=dye(e,0,e.length-r,this.endian);for(let i=0;i<e.length;i+=this._delta32)this._update(e,i)}return this}digest(){return this.update(this._pad()),Iw(this.pending===null),this._digest()}digestHex(){return this.update(this._pad()),Iw(this.pending===null),this._digestHex()}_pad(){let e=this.pendingTotal;const n=this._delta8,r=n-(e+this.padLength)%n,i=new Array(r+this.padLength);i[0]=128;let s;for(s=1;s<r;s++)i[s]=0;e<<=3;let o;if(this.endian==="big"){for(o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i}}function lye(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function EW(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];const n=[];if(typeof t=="string")if(e!=="hex"){let r=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?n[r++]=s:s<2048?(n[r++]=s>>6|192,n[r++]=s&63|128):lye(t,i)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),n[r++]=s>>18|240,n[r++]=s>>12&63|128,n[r++]=s>>6&63|128,n[r++]=s&63|128):(n[r++]=s>>12|224,n[r++]=s>>6&63|128,n[r++]=s&63|128)}}else{t=t.replace(/[^a-z0-9]+/gi,""),t.length%2!==0&&(t="0"+t);for(let r=0;r<t.length;r+=2)n.push(parseInt(t[r]+t[r+1],16))}else{t=t;for(let r=0;r<t.length;r++)n[r]=t[r]|0}return n}function cye(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24)>>>0}function CO(t,e){let n="";for(let r=0;r<t.length;r++){let i=t[r];e==="little"&&(i=cye(i)),n+=uye(i.toString(16))}return n}function uye(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}function dye(t,e,n,r){const i=n-e;Iw(i%4===0);const s=new Array(i/4);for(let o=0,a=e;o<s.length;o++,a+=4){let c;r==="big"?c=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:c=t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],s[o]=c>>>0}return s}function MO(t,e){const n=new Array(t.length*4);for(let r=0,i=0;r<t.length;r++,i+=4){const s=t[r];e==="big"?(n[i]=s>>>24,n[i+1]=s>>>16&255,n[i+2]=s>>>8&255,n[i+3]=s&255):(n[i+3]=s>>>24,n[i+2]=s>>>16&255,n[i+1]=s>>>8&255,n[i]=s&255)}return n}function ru(t,e){return t>>>e|t<<32-e}function bm(t,e){return t<<e|t>>>32-e}function ws(t,e){return t+e>>>0}function Yb(t,e,n){return t+e+n>>>0}function tk(t,e,n,r){return t+e+n+r>>>0}function TW(t,e,n,r,i){return t+e+n+r+i>>>0}function fye(t,e,n,r){if(t===0)return IW(e,n,r);if(t===1||t===3)return hye(e,n,r);if(t===2)return PW(e,n,r)}function IW(t,e,n){return t&e^~t&n}function PW(t,e,n){return t&e^t&n^e&n}function hye(t,e,n){return t^e^n}function pye(t){return ru(t,2)^ru(t,13)^ru(t,22)}function mye(t){return ru(t,6)^ru(t,11)^ru(t,25)}function gye(t){return ru(t,7)^ru(t,18)^t>>>3}function yye(t){return ru(t,17)^ru(t,19)^t>>>10}const vye=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],bye=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],xye=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],wye=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];function iL(t,e,n,r){return t<=15?e^n^r:t<=31?e&n|~e&r:t<=47?(e|~n)^r:t<=63?e&r|n&~r:e^(n|~r)}function _ye(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function Sye(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}class CW extends PO{constructor(){super(512,160,192,64);ze(this,"h");this.endian="little",this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}_update(n,r){let i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4],l=i,u=s,d=o,h=a,f=c,p;for(let g=0;g<80;g++)p=ws(bm(tk(i,iL(g,s,o,a),n[vye[g]+r],_ye(g)),xye[g]),c),i=c,c=a,a=bm(o,10),o=s,s=p,p=ws(bm(tk(l,iL(79-g,u,d,h),n[bye[g]+r],Sye(g)),wye[g]),f),l=f,f=h,h=bm(d,10),d=u,u=p;p=Yb(this.h[1],o,h),this.h[1]=Yb(this.h[2],a,f),this.h[2]=Yb(this.h[3],c,l),this.h[3]=Yb(this.h[4],i,u),this.h[4]=Yb(this.h[0],s,d),this.h[0]=p}_digest(){return MO(this.h,"little")}_digestHex(){return CO(this.h,"little")}}class Cm extends PO{constructor(){super(512,256,192,64);ze(this,"h");ze(this,"W");ze(this,"k");this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],this.W=new Array(64)}_update(n,r){const i=this.W;r===void 0&&(r=0);let s;for(s=0;s<16;s++)i[s]=n[r+s];for(;s<i.length;s++)i[s]=tk(yye(i[s-2]),i[s-7],gye(i[s-15]),i[s-16]);let o=this.h[0],a=this.h[1],c=this.h[2],l=this.h[3],u=this.h[4],d=this.h[5],h=this.h[6],f=this.h[7];for(Iw(this.k.length===i.length),s=0;s<i.length;s++){const p=TW(f,mye(u),IW(u,d,h),this.k[s],i[s]),g=ws(pye(o),PW(o,a,c));f=h,h=d,d=u,u=ws(l,p),l=c,c=a,a=o,o=ws(p,g)}this.h[0]=ws(this.h[0],o),this.h[1]=ws(this.h[1],a),this.h[2]=ws(this.h[2],c),this.h[3]=ws(this.h[3],l),this.h[4]=ws(this.h[4],u),this.h[5]=ws(this.h[5],d),this.h[6]=ws(this.h[6],h),this.h[7]=ws(this.h[7],f)}_digest(){return MO(this.h,"big")}_digestHex(){return CO(this.h,"big")}}class Eye extends PO{constructor(){super(512,160,80,64);ze(this,"h");ze(this,"W");ze(this,"k");this.k=[1518500249,1859775393,2400959708,3395469782],this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}_update(n,r){const i=this.W;r===void 0&&(r=0);let s;for(s=0;s<16;s++)i[s]=n[r+s];for(;s<i.length;s++)i[s]=bm(i[s-3]^i[s-8]^i[s-14]^i[s-16],1);let o=this.h[0],a=this.h[1],c=this.h[2],l=this.h[3],u=this.h[4];for(s=0;s<i.length;s++){const d=~~(s/20),h=TW(bm(o,5),fye(d,a,c,l),u,i[s],this.k[d]);u=l,l=c,c=bm(a,30),a=o,o=h}this.h[0]=ws(this.h[0],o),this.h[1]=ws(this.h[1],a),this.h[2]=ws(this.h[2],c),this.h[3]=ws(this.h[3],l),this.h[4]=ws(this.h[4],u)}_digest(){return MO(this.h,"big")}_digestHex(){return CO(this.h,"big")}}class MW{constructor(e){ze(this,"inner");ze(this,"outer");ze(this,"blockSize",64);ze(this,"outSize",32);e=EW(e,"hex"),e.length>this.blockSize&&(e=new Cm().update(e).digest()),Iw(e.length<=this.blockSize);let n;for(n=e.length;n<this.blockSize;n++)e.push(0);for(n=0;n<e.length;n++)e[n]^=54;for(this.inner=new Cm().update(e),n=0;n<e.length;n++)e[n]^=106;this.outer=new Cm().update(e)}update(e,n){return this.inner.update(e,n),this}digest(){return this.outer.update(this.inner.digest()),this.outer.digest()}digestHex(){return this.outer.update(this.inner.digest()),this.outer.digestHex()}}const Tye=(t,e)=>new CW().update(t,e).digest(),Iye=(t,e)=>new Eye().update(t,e).digest(),wl=(t,e)=>new Cm().update(t,e).digest(),gl=(t,e)=>{const n=new Cm().update(t,e).digest();return new Cm().update(n).digest()},AW=(t,e)=>{const n=new Cm().update(t,e).digest();return new CW().update(n).digest()},Pw=(t,e,n)=>new MW(t).update(e,n).digest(),Pye=t=>t.length%2===1?"0"+t:t,cn=t=>{let e="";for(const n of t)e+=Pye(n.toString(16));return e},dt=(t,e)=>{if(Array.isArray(t))return t.slice();if(t===void 0)return[];if(typeof t!="string")return Array.from(t,n=>n|0);switch(e){case"hex":return Cye(t);case"base64":return Mye(t);default:return Aye(t)}},Cye=t=>{t=t.replace(/[^a-z0-9]+/gi,""),t.length%2!==0&&(t="0"+t);const e=[];for(let n=0;n<t.length;n+=2)e.push(parseInt(t[n]+t[n+1],16));return e},Mye=t=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=[];let r=0,i=0;for(const s of t.replace(/=+$/,""))r=r<<6|e.indexOf(s),i+=6,i>=8&&(i-=8,n.push(r>>i&255),r&=(1<<i)-1);return n};function Aye(t){const e=[];for(let n=0;n<t.length;n++){const r=t.codePointAt(n);if(r===void 0)throw new Error(`Index out of range: ${n}`);let i=r;i>65535?n++:i>=55296&&i<=57343&&(i=65533),i<=127?e.push(i):i<=2047?e.push(192|i>>6,128|i&63):i<=65535?e.push(224|i>>12,128|i>>6&63,128|i&63):e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}return e}const gn=t=>{let e="",n=0;for(let r=0;r<t.length;r++){const i=t[r];if(n>0){n--;continue}if(i<=127)e+=String.fromCharCode(i);else if(i>=192&&i<=223){const s=t[r+1];n=1;const o=(i&31)<<6|s&63;e+=String.fromCharCode(o)}else if(i>=224&&i<=239){const s=t[r+1],o=t[r+2];n=2;const a=(i&15)<<12|(s&63)<<6|o&63;e+=String.fromCharCode(a)}else if(i>=240&&i<=247){const s=t[r+1],o=t[r+2],a=t[r+3];n=3;const c=(i&7)<<18|(s&63)<<12|(o&63)<<6|a&63,l=55296+(c-65536>>10),u=56320+(c-65536&1023);e+=String.fromCharCode(l,u)}}return e},j2=(t,e)=>{switch(e){case"hex":return cn(t);case"utf8":return gn(t);default:return t}};function To(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";let n="",r;for(r=0;r<t.length;r+=3){const i=t[r],s=r+1<t.length?t[r+1]:0,o=r+2<t.length?t[r+2]:0,a=i>>2,c=(i&3)<<4|s>>4,l=(s&15)<<2|o>>6,u=o&63;n+=e.charAt(a)+e.charAt(c),n+=r+1<t.length?e.charAt(l):"=",n+=r+2<t.length?e.charAt(u):"="}return n}const vx="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",nk=t=>{if(t===""||typeof t!="string")throw new Error(`Expected base58 string but got ${t}`);const e=t.match(/[IOl0]/gmu);if(e!==null)throw new Error(`Invalid base58 character ${e.join("")}`);const n=t.match(/^1+/gmu),r=n!==null?n[0].length:0,i=(t.length-r)*(Math.log(58)/Math.log(256))+1>>>0;return[...new Uint8Array([...new Uint8Array(r),...(t.match(/./gmu)??[]).map(o=>vx.indexOf(o)).reduce((o,a)=>(o=o.map(c=>{const l=c*58+a;return a=l>>8,l}),o),new Uint8Array(i)).reverse().filter((o=>a=>o=o||a)(!1))])]},rk=t=>{const e=Array(256).fill(-1);for(let r=0;r<vx.length;++r)e[vx.charCodeAt(r)]=r;const n=[];for(const r of t){let i=r;for(let s=0;s<n.length;++s){const o=(e[n[s]]<<8)+i;n[s]=vx.charCodeAt(o%58),i=o/58|0}for(;i!==0;)n.push(vx.charCodeAt(i%58)),i=i/58|0}for(const r of t){if(r!==0)break;n.push(49)}return n.reverse(),String.fromCharCode(...n)},AO=(t,e=[0])=>{let n=gl([...e,...t]);return n=[...e,...t,...n.slice(0,4)],rk(n)},RO=(t,e,n=1)=>{const r=nk(t);let i=r.slice(0,n),s=r.slice(n,-4),o=[...i,...s];return o=gl(o),r.slice(-4).forEach((a,c)=>{if(a!==o[c])throw new Error("Invalid checksum")}),{prefix:i,data:s}};class In{constructor(e){ze(this,"bufs");this.bufs=e!==void 0?e:[]}getLength(){let e=0;for(const n of this.bufs)e=e+n.length;return e}toArray(){const e=this.getLength(),n=new Array(e);let r=0;for(const i of this.bufs)for(const s of i)n[r++]=s;return n}write(e){return this.bufs.push(e),this}writeReverse(e){const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[e.length-1-r];return this.bufs.push(n),this}writeUInt8(e){const n=new Array(1);return n[0]=e,this.write(n),this}writeInt8(e){const n=new Array(1);return n[0]=e&255,this.write(n),this}writeUInt16BE(e){return this.bufs.push([e>>8&255,e&255]),this}writeInt16BE(e){return this.writeUInt16BE(e&65535)}writeUInt16LE(e){return this.bufs.push([e&255,e>>8&255]),this}writeInt16LE(e){return this.writeUInt16LE(e&65535)}writeUInt32BE(e){return this.bufs.push([e>>24&255,e>>16&255,e>>8&255,e&255]),this}writeInt32BE(e){return this.writeUInt32BE(e>>>0)}writeUInt32LE(e){return this.bufs.push([e&255,e>>8&255,e>>16&255,e>>24&255]),this}writeInt32LE(e){return this.writeUInt32LE(e>>>0)}writeUInt64BEBn(e){const n=e.toArray("be",8);return this.write(n),this}writeUInt64LEBn(e){const n=e.toArray("be",8);return this.writeReverse(n),this}writeUInt64LE(e){const n=new et(e).toArray("be",8);return this.writeReverse(n),this}writeVarIntNum(e){const n=In.varIntNum(e);return this.write(n),this}writeVarIntBn(e){const n=In.varIntBn(e);return this.write(n),this}static varIntNum(e){let n;if(e<253)n=[e];else if(e<65536)n=[253,e&255,e>>8&255];else if(e<4294967296)n=[254,e&255,e>>8&255,e>>16&255,e>>24&255];else{const r=e&4294967295,i=Math.floor(e/4294967296)&4294967295;n=[255,r&255,r>>8&255,r>>16&255,r>>24&255,i&255,i>>8&255,i>>16&255,i>>24&255]}return n}static varIntBn(e){let n;if(e.ltn(253))n=[e.toNumber()];else if(e.ltn(65536)){const r=e.toNumber();n=[253,r&255,r>>8&255]}else if(e.lt(new et(4294967296))){const r=e.toNumber();n=[254,r&255,r>>8&255,r>>16&255,r>>24&255]}else{const r=new In;r.writeUInt8(255),r.writeUInt64LEBn(e),n=r.toArray()}return n}}class pi{constructor(e=[],n=0){ze(this,"bin");ze(this,"pos");this.bin=e,this.pos=n}eof(){return this.pos>=this.bin.length}read(e=this.bin.length){const n=this.pos,r=this.pos+e;return this.pos=r,this.bin.slice(n,r)}readReverse(e=this.bin.length){const n=new Array(e);for(let r=0;r<e;r++)n[r]=this.bin[this.pos+e-1-r];return this.pos+=e,n}readUInt8(){const e=this.bin[this.pos];return this.pos+=1,e}readInt8(){const e=this.bin[this.pos];return this.pos+=1,(e&128)!==0?e-256:e}readUInt16BE(){const e=this.bin[this.pos]<<8|this.bin[this.pos+1];return this.pos+=2,e}readInt16BE(){const e=this.readUInt16BE();return(e&32768)!==0?e-65536:e}readUInt16LE(){const e=this.bin[this.pos]|this.bin[this.pos+1]<<8;return this.pos+=2,e}readInt16LE(){const e=this.readUInt16LE();return(e&32768)!==0?e-65536:e}readUInt32BE(){const e=this.bin[this.pos]*16777216+(this.bin[this.pos+1]<<16|this.bin[this.pos+2]<<8|this.bin[this.pos+3]);return this.pos+=4,e}readInt32BE(){const e=this.readUInt32BE();return(e&2147483648)!==0?e-4294967296:e}readUInt32LE(){const e=(this.bin[this.pos]|this.bin[this.pos+1]<<8|this.bin[this.pos+2]<<16|this.bin[this.pos+3]<<24)>>>0;return this.pos+=4,e}readInt32LE(){const e=this.readUInt32LE();return(e&2147483648)!==0?e-4294967296:e}readUInt64BEBn(){const e=this.bin.slice(this.pos,this.pos+8),n=new et(e);return this.pos=this.pos+8,n}readUInt64LEBn(){const e=this.readReverse(8);return new et(e)}readVarIntNum(){const e=this.readUInt8();let n;switch(e){case 253:return this.readUInt16LE();case 254:return this.readUInt32LE();case 255:if(n=this.readUInt64LEBn(),n.lte(new et(2).pow(new et(53))))return n.toNumber();throw new Error("number too large to retain precision - use readVarIntBn");default:return e}}readVarInt(){switch(this.bin[this.pos]){case 253:return this.read(3);case 254:return this.read(5);case 255:return this.read(9);default:return this.read(1)}}readVarIntBn(){const e=this.readUInt8();switch(e){case 253:return new et(this.readUInt16LE());case 254:return new et(this.readUInt32LE());case 255:return this.readUInt64LEBn();default:return new et(e)}}}const sL=t=>{if(t.length===0)return t;const e=t[t.length-1];if((e&127)!==0)return t;if(t.length===1)return[];if((t[t.length-2]&128)!==0)return t;for(let n=t.length-1;n>0;n--)if(t[n-1]!==0)return(t[n-1]&128)!==0?(t[n]=e,t.slice(0,n+1)):(t[n-1]|=e,t.slice(0,n));return[]};var Ar;let Md=(Ar=class extends SW{constructor(n,r,i=!0){super("affine");ze(this,"x");ze(this,"y");ze(this,"inf");this.precomputed=null,n===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(et.isBN(n)||(n=new et(n,16)),this.x=n,et.isBN(r)||(r=new et(r,16)),this.y=r,i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red===null&&(this.x=this.x.toRed(this.curve.red)),this.y.red===null&&(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}static fromDER(n){if((n[0]===4||n[0]===6||n[0]===7)&&n.length-1===2*32){if(n[0]===6){if(n[n.length-1]%2!==0)throw new Error("Point string value is wrong length")}else if(n[0]===7&&n[n.length-1]%2!==1)throw new Error("Point string value is wrong length");return new Ar(n.slice(1,33),n.slice(33,1+2*32))}else if((n[0]===2||n[0]===3)&&n.length-1===32)return Ar.fromX(n.slice(1,33),n[0]===3);throw new Error("Unknown point format")}static fromString(n){const r=dt(n,"hex");return Ar.fromDER(r)}static redSqrtOptimized(n){const s=Ar.red.m.addn(1).iushrn(2);return n.redPow(s)}static fromX(n,r){if(typeof BigInt=="function"){let a=function(b,x){return(b%x+x)%x},c=function(b,x,S){let P=BigInt(1);for(b=a(b,S);x>BigInt(0);)(x&BigInt(1))===BigInt(1)&&(P=a(P*b,S)),x>>=BigInt(1),b=a(b*b,S);return P},l=function(b,x){const S=x+BigInt(1)>>BigInt(2),P=c(b,S,x);return a(P*P,x)===a(b,x)?P:null};var i=a,s=c,o=l;const u=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F"),d=BigInt(7);let h;if(n instanceof et)h=BigInt("0x"+n.toString(16));else if(typeof n=="string")h=BigInt("0x"+n);else if(Array.isArray(n))h=BigInt("0x"+cn(n).padStart(64,"0"));else if(typeof n=="number")h=BigInt(n);else throw new Error("Invalid x-coordinate type");h=a(h,u);const f=a(c(h,BigInt(3),u)+d,u);let p=l(f,u);if(p===null)throw new Error("Invalid point");const g=p%BigInt(2)===BigInt(1);(r&&!g||!r&&g)&&(p=u-p);const m=new et(h.toString(16),16),y=new et(p.toString(16),16);return new Ar(m,y)}else{const a=new W2("k256"),c=new et(0).toRed(a),l=new et(7).toRed(a),u=new et(0).toRed(a);et.isBN(n)||(n=new et(n,16)),n=n,n.red==null&&(n=n.toRed(a));const d=n.redSqr().redMul(n).redIAdd(n.redMul(c)).redIAdd(l);let h=d.redSqrt();if(h.redSqr().redSub(d).cmp(u)!==0)throw new Error("invalid point");const f=h.fromRed().isOdd();return(r&&!f||!r&&f)&&(h=h.redNeg()),new Ar(n,h)}}static fromJSON(n,r){typeof n=="string"&&(n=JSON.parse(n));const i=new Ar(n[0],n[1],r);if(typeof n[2]!="object")return i;const s=a=>new Ar(a[0],a[1],r),o=n[2];return i.precomputed={beta:null,doubles:typeof o.doubles=="object"&&o.doubles!==null?{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))}:void 0,naf:typeof o.naf=="object"&&o.naf!==null?{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}:void 0},i}validate(){return this.curve.validate(this)}encode(n=!0,r){const i=this.curve.p.byteLength(),s=this.getX().toArray("be",i);let o;return n?o=[this.getY().isEven()?2:3].concat(s):o=[4].concat(s,this.getY().toArray("be",i)),r!=="hex"?o:cn(o)}toString(){return this.encode(!0,"hex")}toJSON(){return this.precomputed==null?[this.x,this.y]:[this.x,this.y,typeof this.precomputed=="object"&&this.precomputed!==null?{doubles:this.precomputed.doubles!=null?{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)}:void 0,naf:this.precomputed.naf!=null?{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}:void 0}:void 0]}inspect(){var n,r,i,s;return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+(((r=(n=this.x)==null?void 0:n.fromRed())==null?void 0:r.toString(16,2))??"undefined")+" y: "+(((s=(i=this.y)==null?void 0:i.fromRed())==null?void 0:s.toString(16,2))??"undefined")+">"}isInfinity(){return this.inf}add(n){var o,a,c;if(this.inf)return n;if(n.inf)return this;if(this.eq(n))return this.dbl();if(this.neg().eq(n))return new Ar(new et(0),new et(0));if(((o=this.x)==null?void 0:o.cmp(n.x??new et(0)))===0)return new Ar(new et(0),new et(0));let r=((a=this.y)==null?void 0:a.redSub(n.y??new et(0)))??new et(0);r.cmpn(0)!==0&&(r=r.redMul(((c=this.x)==null?void 0:c.redSub(n.x??new et(0)).redInvm())??new et(1)));const i=r==null?void 0:r.redSqr().redISub(this.x??new et(0)).redISub(n.x??new et(0)),s=(r??new et(1)).redMul((this.x??new et(0)).redSub(i??new et(0))).redISub(this.y??new et(0));return new Ar(i??new et(0),s??new et(0))}dbl(){if(this.inf)return this;const n=(this.y??new et(0)).redAdd(this.y??new et(0));if(n.cmpn(0)===0)return new Ar(new et(0),new et(0));const r=this.curve.a,i=(this.x??new et(0)).redSqr(),s=n.redInvm(),o=i.redAdd(i).redIAdd(i).redIAdd(r).redMul(s),a=o.redSqr().redISub((this.x??new et(0)).redAdd(this.x??new et(0))),c=o.redMul((this.x??new et(0)).redSub(a)).redISub(this.y??new et(0));return new Ar(a,c)}getX(){return(this.x??new et(0)).fromRed()}getY(){return(this.y??new et(0)).fromRed()}mul(n){return et.isBN(n)||(n=new et(n,16)),n=n,this.isInfinity()?this:this._hasDoubles(n)?this._fixedNafMul(n):this._endoWnafMulAdd([this],[n])}mulAdd(n,r,i){const s=[this,r],o=[n,i];return this._endoWnafMulAdd(s,o)}jmulAdd(n,r,i){const s=[this,r],o=[n,i];return this._endoWnafMulAdd(s,o,!0)}eq(n){return this===n||this.inf===n.inf&&(this.inf||(this.x??new et(0)).cmp(n.x??new et(0))===0&&(this.y??new et(0)).cmp(n.y??new et(0))===0)}neg(n){if(this.inf)return this;const r=new Ar(this.x,(this.y??new et(0)).redNeg());if(n===!0&&this.precomputed!=null){const i=this.precomputed,s=o=>o.neg();r.precomputed={naf:i.naf!=null?{wnd:i.naf.wnd,points:i.naf.points.map(s)}:void 0,doubles:i.doubles!=null?{step:i.doubles.step,points:i.doubles.points.map(o=>o.neg())}:void 0,beta:void 0}}return r}dblp(n){let r=this;for(let i=0;i<n;i++)r=r.dbl();return r}toJ(){return this.inf?new Xb(null,null,null):new Xb(this.x,this.y,this.curve.one)}_getBeta(){if(typeof this.curve.endo!="object")return;const n=this.precomputed;if(typeof n=="object"&&n!==null&&typeof n.beta=="object"&&n.beta!==null)return n.beta;const r=new Ar((this.x??new et(0)).redMul(this.curve.endo.beta),this.y);if(n!=null){const i=this.curve,s=o=>{if(o.x===null)throw new Error("p.x is null");if(i.endo===void 0||i.endo===null)throw new Error("curve.endo is undefined");return new Ar(o.x.redMul(i.endo.beta),o.y)};n.beta=r,r.precomputed={beta:null,naf:n.naf!=null?{wnd:n.naf.wnd,points:n.naf.points.map(s)}:void 0,doubles:n.doubles!=null?{step:n.doubles.step,points:n.doubles.points.map(s)}:void 0}}return r}_fixedNafMul(n){if(typeof this.precomputed!="object"||this.precomputed===null)throw new Error("_fixedNafMul requires precomputed values for the point");const r=this._getDoubles(),i=this.curve.getNAF(n,1,this.curve._bitLength);let s=(1<<r.step+1)-(r.step%2===0?2:1);s/=3;const o=[];for(let l=0;l<i.length;l+=r.step){let u=0;for(let d=l+r.step-1;d>=l;d--)u=(u<<1)+i[d];o.push(u)}let a=new Xb(null,null,null),c=new Xb(null,null,null);for(let l=s;l>0;l--){for(let u=0;u<o.length;u++){const d=o[u];d===l?c=c.mixedAdd(r.points[u]):d===-l&&(c=c.mixedAdd(r.points[u].neg()))}a=a.add(c)}return a.toP()}_wnafMulAdd(n,r,i,s,o){const a=this.curve._wnafT1.map(f=>f.toNumber()),c=this.curve._wnafT2.map(()=>[]),l=this.curve._wnafT3.map(()=>[]);let u=0;for(let f=0;f<s;f++){const g=r[f]._getNAFPoints(n);a[f]=g.wnd,c[f]=g.points}for(let f=s-1;f>=1;f-=2){const p=f-1,g=f;if(a[p]!==1||a[g]!==1){l[p]=this.curve.getNAF(i[p],a[p],this.curve._bitLength),l[g]=this.curve.getNAF(i[g],a[g],this.curve._bitLength),u=Math.max(l[p].length,u),u=Math.max(l[g].length,u);continue}const m=[r[p],null,null,r[g]];(r[p].y??new et(0)).cmp(r[g].y??new et(0))===0?(m[1]=r[p].add(r[g]),m[2]=r[p].toJ().mixedAdd(r[g].neg())):(r[p].y??new et(0)).cmp((r[g].y??new et(0)).redNeg())===0?(m[1]=r[p].toJ().mixedAdd(r[g]),m[2]=r[p].add(r[g].neg())):(m[1]=r[p].toJ().mixedAdd(r[g]),m[2]=r[p].toJ().mixedAdd(r[g].neg()));const y=[-3,-1,-5,-7,0,7,5,1,3],b=this.curve.getJSF(i[p],i[g]);u=Math.max(b[0].length,u),l[p]=new Array(u),l[g]=new Array(u);for(let x=0;x<u;x++){const S=b[0][x]|0,P=b[1][x]|0;l[p][x]=y[(S+1)*3+(P+1)],l[g][x]=0,c[p]=m}}let d=new Xb(null,null,null);const h=this.curve._wnafT4;for(let f=u;f>=0;f--){let p=0;for(;f>=0;){let y=!0;for(let b=0;b<s;b++)h[b]=new et(typeof l[b][f]=="number"?l[b][f]:0),h[b].isZero()||(y=!1);if(!y)break;p++,f--}if(f>=0&&p++,d=d.dblp(p),f<0)break;const g=new et(1),m=new et(2);for(let y=0;y<s;y++){const b=h[y];let x;b.cmpn(0)!==0&&(b.isNeg()?x=c[y][b.neg().sub(g).div(m).toNumber()].neg():x=c[y][b.sub(g).div(m).toNumber()],x.type==="affine"?d=d.mixedAdd(x):d=d.add(x))}}for(let f=0;f<s;f++)c[f]=[];return o===!0?d:d.toP()}_endoWnafMulAdd(n,r,i){const s=new Array(n.length*2),o=new Array(n.length*2);let a;for(a=0;a<n.length;a++){const l=this.curve._endoSplit(r[a]);let u=n[a],d=u._getBeta()??new Ar(new et(0),new et(0));l.k1.negative!==0&&(l.k1.ineg(),u=u.neg(!0)),l.k2.negative!==0&&(l.k2.ineg(),d=d.neg(!0)),s[a*2]=u,s[a*2+1]=d,o[a*2]=l.k1,o[a*2+1]=l.k2}const c=this._wnafMulAdd(1,s,o,a*2,i);for(let l=0;l<a*2;l++)s[l]=null,o[l]=null;return c}_hasDoubles(n){if(this.precomputed==null)return!1;const r=this.precomputed.doubles;return typeof r!="object"?!1:r.points.length>=Math.ceil((n.bitLength()+1)/r.step)}_getDoubles(n,r){if(typeof this.precomputed=="object"&&this.precomputed!==null&&typeof this.precomputed.doubles=="object"&&this.precomputed.doubles!==null)return this.precomputed.doubles;const i=[this];let s=this;for(let o=0;o<(r??0);o+=n??1){for(let a=0;a<(n??1);a++)s=s.dbl();i.push(s)}return{step:n??1,points:i}}_getNAFPoints(n){if(typeof this.precomputed=="object"&&this.precomputed!==null&&typeof this.precomputed.naf=="object"&&this.precomputed.naf!==null)return this.precomputed.naf;const r=[this],i=(1<<n)-1,s=i===1?null:this.dbl();for(let o=1;o<i;o++)s!==null&&(r[o]=r[o-1].add(s));return{wnd:n,points:r}}},ze(Ar,"red",new W2("k256")),ze(Ar,"a",new et(0).toRed(Ar.red)),ze(Ar,"b",new et(7).toRed(Ar.red)),ze(Ar,"zero",new et(0).toRed(Ar.red)),Ar),VM,ea=class RW{constructor(){ze(this,"p");ze(this,"red");ze(this,"redN");ze(this,"zero");ze(this,"one");ze(this,"two");ze(this,"g");ze(this,"n");ze(this,"a");ze(this,"b");ze(this,"tinv");ze(this,"zeroA");ze(this,"threeA");ze(this,"endo");ze(this,"_endoWnafT1");ze(this,"_endoWnafT2");ze(this,"_wnafT1");ze(this,"_wnafT2");ze(this,"_wnafT3");ze(this,"_wnafT4");ze(this,"_bitLength");if(typeof VM<"u")return VM;VM=this;const n={prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",{doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}]};this.p=new et(n.p,16),this.red=new W2(n.prime),this.zero=new et(0).toRed(this.red),this.one=new et(1).toRed(this.red),this.two=new et(2).toRed(this.red),this.n=new et(n.n,16),this.g=Md.fromJSON(n.g,n.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n.bitLength(),this.redN=this.n.toRed(this.red),this.a=new et(n.a,16).toRed(this.red),this.b=new et(n.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(n),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}static assert(e,n="Elliptic curve assertion failed"){if(!e)throw new Error(n)}getNAF(e,n,r){const i=new Array(Math.max(e.bitLength(),r)+1);i.fill(0);const s=1<<n+1,o=e.clone();for(let a=0;a<i.length;a++){let c;const l=o.andln(s-1);o.isOdd()?(l>(s>>1)-1?c=(s>>1)-l:c=l,o.isubn(c)):c=0,i[a]=c,o.iushrn(1)}return i}getJSF(e,n){const r=[[],[]];e=e.clone(),n=n.clone();let i=0,s=0;for(;e.cmpn(-i)>0||n.cmpn(-s)>0;){let o=e.andln(3)+i&3,a=n.andln(3)+s&3;o===3&&(o=-1),a===3&&(a=-1);let c;if((o&1)===0)c=0;else{const u=e.andln(7)+i&7;(u===3||u===5)&&a===2?c=-o:c=o}r[0].push(c);let l;if((a&1)===0)l=0;else{const u=n.andln(7)+s&7;(u===3||u===5)&&o===2?l=-a:l=a}r[1].push(l),2*i===c+1&&(i=1-i),2*s===l+1&&(s=1-s),e.iushrn(1),n.iushrn(1)}return r}static cachedProperty(e,n,r){const i="_"+n;e.prototype[n]=function(){return this[i]!==void 0?this[i]:this[i]=r.call(this)}}static parseBytes(e){return typeof e=="string"?dt(e,"hex"):e}static intFromLE(e){return new et(e,"hex","le")}_getEndomorphism(e){var s,o;if(!this.zeroA||this.p.modrn(3)!==1)return;let n,r;if(e.beta!==void 0)n=new et(e.beta,16).toRed(this.red);else{const a=this._getEndoRoots(this.p);if(a===null)throw new Error("Failed to get endomorphism roots for beta.");n=a[0].cmp(a[1])<0?a[0]:a[1],n=n.toRed(this.red)}if(e.lambda!==void 0)r=new et(e.lambda,16);else{const a=this._getEndoRoots(this.n);if(a===null)throw new Error("Failed to get endomorphism roots for lambda.");if(this.g==null)throw new Error("Curve generator point (g) is not defined.");const c=(s=this.g.mul(a[0]))==null?void 0:s.x,l=this.g.x!=null?this.g.x.redMul(n):void 0;if(c!=null&&l!=null&&c.cmp(l)===0)r=a[0];else{if(r=a[1],this.g==null)throw new Error("Curve generator point (g) is not defined.");const u=(o=this.g.mul(r))==null?void 0:o.x,d=this.g.x!=null?this.g.x.redMul(n):void 0;if(u==null||d==null)throw new Error("Lambda computation failed: g.mul(lambda).x or g.x.redMul(beta) is undefined.");RW.assert(u.cmp(d)===0,"Lambda selection does not match computed beta.")}}let i;return typeof e.basis=="object"&&e.basis!==null?i=e.basis.map(function(a){return{a:new et(a.a,16),b:new et(a.b,16)}}):i=this._getEndoBasis(r),{beta:n,lambda:r,basis:i}}_getEndoRoots(e){const n=e===this.p?this.red:new aye(e),r=new et(2).toRed(n).redInvm(),i=r.redNeg(),s=new et(3).toRed(n).redNeg().redSqrt().redMul(r),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]}_getEndoBasis(e){const n=this.n.ushrn(Math.floor(this.n.bitLength()/2));let r=e,i=this.n.clone(),s=new et(1),o=new et(0),a=new et(0),c=new et(1),l,u,d,h,f,p,g=new et(0),m=0,y=new et(0),b=new et(0);for(;r.cmpn(0)!==0;){const P=i.div(r);y=i.sub(P.mul(r)),b=a.sub(P.mul(s));const _=c.sub(P.mul(o));if(d===void 0&&y.cmp(n)<0)l=g.neg(),u=s,d=y.neg(),h=b;else if(d!==void 0&&++m===2)break;g=y,i=r,r=y,a=s,s=b,c=o,o=_}if(l===void 0||u===void 0||d===void 0||h===void 0)throw new Error("Failed to compute Endo Basis values");f=y.neg(),p=b;const x=d.sqr().add(h.sqr());return f.sqr().add(p.sqr()).cmp(x)>=0&&(f=l,p=u),d.negative!==0&&(d=d.neg(),h=h.neg()),f.negative!==0&&(f=f.neg(),p=p.neg()),[{a:d,b:h},{a:f,b:p}]}_endoSplit(e){if(this.endo==null)throw new Error("Endomorphism is not defined.");const n=this.endo.basis,r=n[0],i=n[1],s=i.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),a=s.mul(r.a),c=o.mul(i.a),l=s.mul(r.b),u=o.mul(i.b),d=e.sub(a).sub(c),h=l.add(u).neg();return{k1:d,k2:h}}validate(e){if(e.inf)return!0;const n=e.x,r=e.y;if(n===null||r===null)throw new Error("Point coordinates cannot be null");const i=this.a.redMul(n),s=n.redSqr().redMul(n).redIAdd(i).redIAdd(this.b);return r.redSqr().redISub(s).cmpn(0)===0}},ih=class ik{constructor(e,n){ze(this,"r");ze(this,"s");this.r=e,this.s=n}static fromDER(e,n){const r=(d,h)=>{const f=d[h.place++];if((f&128)===0)return f;throw new Error("Invalid DER entity length")};class i{constructor(){ze(this,"place");this.place=0}}e=dt(e,n);const s=new i;if(e[s.place++]!==48)throw new Error("Signature DER must start with 0x30");if(r(e,s)+s.place!==e.length)throw new Error("Signature DER invalid");if(e[s.place++]!==2)throw new Error("Signature DER invalid");const a=r(e,s);let c=e.slice(s.place,a+s.place);if(s.place+=a,e[s.place++]!==2)throw new Error("Signature DER invalid");const l=r(e,s);if(e.length!==l+s.place)throw new Error("Invalid R-length in signature DER");let u=e.slice(s.place,l+s.place);if(c[0]===0)if((c[1]&128)!==0)c=c.slice(1);else throw new Error("Invalid R-value in signature DER");if(u[0]===0)if((u[1]&128)!==0)u=u.slice(1);else throw new Error("Invalid S-value in signature DER");return new ik(new et(c),new et(u))}static fromCompact(e,n){if(e=dt(e,n),e.length!==65)throw new Error("Invalid Compact Signature");const r=e[0];if(r<27||r>=35)throw new Error("Invalid Compact Byte");return new ik(new et(e.slice(1,33)),new et(e.slice(33,65)))}verify(e,n,r){const i=new et(wl(e,r),16);return c_(i,this,n)}toString(e){return this.toDER(e)}toDER(e){const n=(l,u)=>{if(u<128)l.push(u);else throw new Error("len must be < 0x80")},r=l=>{let u=0;const d=l.length-1;for(;l[u]===0&&(l[u+1]&128)===0&&u<d;)u++;return u===0?l:l.slice(u)};let i=this.r.toArray(),s=this.s.toArray();for((i[0]&128)!==0&&(i=[0].concat(i)),(s[0]&128)!==0&&(s=[0].concat(s)),i=r(i),s=r(s);s[0]===0&&(s[1]&128)===0;)s=s.slice(1);let o=[2];n(o,i.length),o=o.concat(i),o.push(2),n(o,s.length);const a=o.concat(s);let c=[48];return n(c,a.length),c=c.concat(a),e==="hex"?cn(c):e==="base64"?To(c):c}toCompact(e,n,r){if(e<0||e>3)throw new Error("Invalid recovery param");if(typeof n!="boolean")throw new Error("Invalid compressed param");let i=27+e;n&&(i+=4);let s=[i];return s=s.concat(this.r.toArray("be",32)),s=s.concat(this.s.toArray("be",32)),r==="hex"?cn(s):r==="base64"?To(s):s}RecoverPublicKey(e,n){const r=this.r,i=this.s,s=(e&1)!==0,o=e>>1,a=new ea,c=a.n,l=a.g,u=o!==0?r.add(c):r,d=Md.fromX(u,s);if(!d.mul(c).isInfinity())throw new Error("nR is not at infinity");const f=n.neg().umod(c),p=r.invm(c),g=p.mul(i).umod(c),m=p.mul(f).umod(c),y=l.mul(m).add(d.mul(g)),b=new sh(y);return b.validate(),b}CalculateRecoveryFactor(e,n){for(let r=0;r<4;r++){let i;try{i=this.RecoverPublicKey(r,n)}catch{continue}if(e.eq(i))return r}throw new Error("Unable to find valid recovery factor")}},oL=class{constructor(e,n){ze(this,"K");ze(this,"V");if(e=dt(e,"hex"),n=dt(n,"hex"),e.length<32)throw new Error("Not enough entropy. Minimum is 256 bits");const r=e.concat(n);this.K=new Array(32),this.V=new Array(32);for(let i=0;i<32;i++)this.K[i]=0,this.V[i]=1;this.update(r)}hmac(){return new MW(this.K)}update(e){let n=this.hmac().update(this.V).update([0]);e!==void 0&&(n=n.update(e)),this.K=n.digest(),this.V=this.hmac().update(this.V).digest(),e!==void 0&&(this.K=this.hmac().update(this.V).update([1]).update(e).digest(),this.V=this.hmac().update(this.V).digest())}generate(e){let n=[];for(;n.length<e;)this.V=this.hmac().update(this.V).digest(),n=n.concat(this.V);const r=n.slice(0,e);return this.update(),cn(r)}};function Rye(t,e,n=new ea){const r=t.byteLength()*8-n.n.bitLength();return r>0&&t.iushrn(r),e===null&&t.cmp(n.n)>=0?t.sub(n.n):t}const kW=(t,e,n=!1,r)=>{if(typeof BigInt=="function"){let P=function(G,j){const Q=G.toString(16).padStart(j*2,"0"),se=new Uint8Array(j);for(let Z=0;Z<j;Z++)se[Z]=parseInt(Q.substr(Z*2,2),16);return se},O=function(G,j,Q=!0){const se=G.toString(2).length,Z=j.toString(2).length,ie=se-Z;return ie>0&&(G=G>>BigInt(ie)),!Q&&G>=j?G-j:G},B=function(G){if(typeof G=="function"){const Q=G(k).toString(16);return BigInt("0x"+Q)}else if(G!=null&&et.isBN(G)){const j=G.toString(16);return BigInt("0x"+j)}else{const j=A.generate(_);return BigInt("0x"+j)}},$=function(G,j){return(G%j+j)%j},U=function(G,j){let Q=h,se=d,Z=$(G,j),ie=j;for(;Z>h;){const pe=ie/Z,ue=se-Q*pe,le=ie-Z*pe;se=Q,Q=ue,ie=Z,Z=le}return $(Q,j)},q=function(G,j){if(G===null)return j;if(j===null)return G;if(G.x===j.x&&G.y===$(-j.y,g))return null;let Q;if(G.x===j.x&&G.y===j.y){if(G.y===d)return null;const ie=$(BigInt(3)*G.x*G.x,g),pe=U(f*G.y,g);Q=$(ie*pe,g)}else{const ie=$(j.y-G.y,g),pe=U(j.x-G.x,g);Q=$(ie*pe,g)}const se=$(Q*Q-G.x-j.x,g),Z=$(Q*(G.x-se)-G.y,g);return{x:se,y:Z}},K=function(G,j){let Q=j,se=null;for(;G>BigInt(0);)G%BigInt(2)===BigInt(1)&&(se=se===null?Q:q(se,Q)??se),Q=q(Q,Q)??Q,G>>=BigInt(1);if(se===null)throw new Error("Scalar multiplication resulted in an invalid point.");return se};var i=P,s=O,o=B,a=$,c=U,l=q,u=K;const d=BigInt(0),h=BigInt(1),f=BigInt(2),p=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141"),g=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F"),m=BigInt("0x79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798"),y=BigInt("0x483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8"),b={x:m,y},x=BigInt("0x"+t.toString(16)),S=BigInt("0x"+e.toString(16));if(S<=d||S>=p)throw new Error("Invalid private key");const _=32,I=P(S,_),C=P(x,_),A=new oL(Array.from(I),Array.from(C)),M=p-h;let k=0,V=!1;for(;!V;){k+=1,V=!0,k+=1;let G=B(r);if(G=O(G,p,!0),G<=h||G>=M){if(r instanceof et)throw new Error("Invalid fixed custom K value (must be more than 1 and less than N-1)");continue}const j=K(G,b);if(j===null){if(r instanceof et)throw new Error("Invalid fixed custom K value (must not create a point at infinity when multiplied by the generator point)");continue}const Q=$(j.x,p);if(Q===d){if(r instanceof et)throw new Error("Invalid fixed custom K value (when multiplied by G, the resulting x coordinate mod N must not be zero)");continue}const se=U(G,p),Z=$(Q*S,p);let ie=$(se*(x+Z),p);if(ie===d){if(r instanceof et)throw new Error("Invalid fixed custom K value (when used with the key, it cannot create a zero value for S)");continue}n&&ie>p/f&&(ie=p-ie);const pe=new et(Q.toString(16),16),ue=new et(ie.toString(16),16);return new ih(pe,ue)}}else{const d=new ea;t=s(t);const h=d.n.byteLength(),f=e.toArray("be",h),p=t.toArray("be",h),g=new oL(f,p),m=d.n.subn(1);for(let y=0;;y++){let b=typeof r=="function"?r(y):et.isBN(r)?r:new et(g.generate(h),16);if(b!=null)b=s(b,!0);else throw new Error("k is undefined");if(b.cmpn(1)<=0||b.cmp(m)>=0){if(et.isBN(r))throw new Error("Invalid fixed custom K value (must be more than 1 and less than N-1)");continue}const x=d.g.mul(b);if(x.isInfinity()){if(et.isBN(r))throw new Error("Invalid fixed custom K value (must not create a point at infinity when multiplied by the generator point)");continue}const P=x.getX().umod(d.n);if(P.cmpn(0)===0){if(et.isBN(r))throw new Error("Invalid fixed custom K value (when multiplied by G, the resulting x coordinate mod N must not be zero)");continue}let _=b.invm(d.n).mul(P.mul(e).iadd(t));if(_=_.umod(d.n),_.cmpn(0)===0){if(et.isBN(r))throw new Error("Invalid fixed custom K value (when used with the key, it cannot create a zero value for S)");continue}return n&&_.cmp(d.n.ushrn(1))>0&&(_=d.n.sub(_)),new ih(P,_)}}throw new Error("Failed to generate a valid signature")},c_=(t,e,n)=>{if(typeof BigInt=="function"){const r=BigInt(0),i=BigInt(1),s=BigInt(2),o=BigInt(3),a=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F"),c=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141"),l={x:BigInt("0x79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798"),y:BigInt("0x483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8")},u=(I,C)=>(I%C+C)%C,d=(I,C)=>{let[A,M]=[I,C],[k,O]=[BigInt(1),BigInt(0)];for(;M!==r;){const B=A/M;[A,M]=[M,A-B*M],[k,O]=[O,k-B*O]}return A>i?r:u(k,C)},h=(I,C,A)=>u(I*C,A),f=(I,C,A)=>u(I-C,A),p=BigInt(4),g=BigInt(8),m=I=>{const{X:C,Y:A,Z:M}=I;if(A===r)return{X:r,Y:i,Z:r};const k=h(A,A,a),O=h(p,h(C,k,a),a),B=h(o,h(C,C,a),a),$=f(h(B,B,a),h(s,O,a),a),U=f(h(B,f(O,$,a),a),h(g,h(k,k,a),a),a),q=h(s,h(A,M,a),a);return{X:$,Y:U,Z:q}},y=(I,C)=>{if(I.Z===r)return C;if(C.Z===r)return I;const A=h(I.Z,I.Z,a),M=h(C.Z,C.Z,a),k=h(I.X,M,a),O=h(C.X,A,a),B=h(I.Y,h(M,C.Z,a),a),$=h(C.Y,h(A,I.Z,a),a),U=f(O,k,a),q=f($,B,a);if(U===r)return q===r?m(I):{X:r,Y:i,Z:r};const K=h(U,U,a),V=h(U,K,a),G=h(k,K,a),j=f(f(h(q,q,a),V,a),h(s,G,a),a),Q=f(h(q,f(G,j,a),a),h(B,V,a),a),se=h(U,h(I.Z,C.Z,a),a);return{X:j,Y:Q,Z:se}},b=(I,C)=>{const A={X:C.x,Y:C.y,Z:i};let M={X:r,Y:i,Z:r};const k=I.toString(2);for(let O=0;O<k.length;O++)M=m(M),k[O]==="1"&&(M=y(M,A));return M},x=(I,C,A)=>{const{r:M,s:k}=A,O=I;if(M<=r||M>=c||k<=r||k>=c)return!1;const B=d(k,c);if(B===r)return!1;const $=h(O,B,c),U=h(M,B,c),q=b($,l),K=b(U,C),V=y(q,K);if(V.Z===r)return!1;const G=d(V.Z,a);if(G===r)return!1;const j=h(G,G,a),Q=h(V.X,j,a);return u(Q,c)===M},S=BigInt("0x"+t.toString(16));if(n.x==null||n.y==null)throw new Error("Invalid public key: missing coordinates.");const P={x:BigInt("0x"+n.x.toString(16)),y:BigInt("0x"+n.y.toString(16))},_={r:BigInt("0x"+e.r.toString(16)),s:BigInt("0x"+e.s.toString(16))};return x(S,P,_)}else{const r=new ea;t=Rye(t);const i=e.r,s=e.s;if(i.cmpn(1)<0||i.cmp(r.n)>=0||s.cmpn(1)<0||s.cmp(r.n)>=0)return!1;const o=s.invm(r.n),a=o.mul(t).umod(r.n),c=o.mul(i).umod(r.n),l=r.g.jmulAdd(a,n,c);return l.isInfinity()?!1:l.eqXToP(i)}};let sh=class bx extends Md{static fromPrivateKey(e){const r=new ea().g.mul(e);return new bx(r.x,r.y)}static fromString(e){const n=Md.fromString(e);return new bx(n.x,n.y)}static fromDER(e){const n=Md.fromDER(e);return new bx(n.x,n.y)}constructor(e,n=null,r=!0){if(e instanceof Md)super(e.getX(),e.getY());else{if(n===null&&r&&typeof e=="string"&&(e.length===66||e.length===130))throw new Error('You are using the "new PublicKey()" constructor with a DER hex string. You need to use "PublicKey.fromString()" instead.');super(e,n,r)}}deriveSharedSecret(e){if(!this.validate())throw new Error("Public key not valid for ECDH secret derivation");return this.mul(e)}verify(e,n,r){const i=new et(wl(e,r),16);return c_(i,n,this)}toDER(e){return e==="hex"?this.encode(!0,e):this.encode(!0)}toHash(e){const n=AW(this.encode(!0));return e==="hex"?cn(n):n}toAddress(e=[0]){if(typeof e=="string")if(e==="testnet"||e==="test")e=[111];else if(e==="mainnet"||e==="main")e=[0];else throw new Error(`Invalid prefix ${e}`);return AO(this.toHash(),e)}deriveChild(e,n){const r=this.deriveSharedSecret(e),i=dt(n,"utf8"),s=Pw(r.encode(!0),i),a=new ea().g.mul(new et(s)),c=this.add(a);return new bx(c.x,c.y)}static fromMsgHashAndCompactSignature(e,n,r){const i=dt(n,r);if(i.length!==65)throw new Error("Invalid Compact Signature");const s=i[0];if(s<27||s>=35)throw new Error("Invalid Compact Byte");let o=i[0]-27;return o>3&&(o-=4),new ih(new et(i.slice(1,33)),new et(i.slice(33,65))).RecoverPublicKey(o,e)}};class kye{constructor(){ze(this,"_rand");var n;const e=()=>{throw new Error("No secure random number generator is available in this environment.")};if(this._rand=e,typeof self=="object")(n=self.crypto)!=null&&n.getRandomValues?this._rand=r=>{const i=new Uint8Array(r);return self.crypto.getRandomValues(i),[...i]}:this._rand=e;else try{const r=require("crypto");typeof r.randomBytes=="function"&&(this._rand=i=>[...r.randomBytes(i)])}catch{this._rand=e}}generate(e){return this._rand(e)}}let WM=null;const yl=t=>(WM==null&&(WM=new kye),WM.generate(t));class Yy{constructor(e,n){ze(this,"x");ze(this,"y");const r=new ea().p;this.x=e.umod(r),this.y=n.umod(r)}toString(){return rk(this.x.toArray())+"."+rk(this.y.toArray())}static fromString(e){const[n,r]=e.split(".");return new Yy(new et(nk(n)),new et(nk(r)))}}let aL=class OW{constructor(e,n){ze(this,"points");ze(this,"threshold");this.points=e,this.threshold=n??e.length}static fromPrivateKey(e,n){const r=new ea().p,i=[new Yy(new et(0),new et(e.toArray()))];for(let s=1;s<n;s++){const o=new et(yl(32)).umod(r),a=new et(yl(32)).umod(r);i.push(new Yy(o,a))}return new OW(i)}valueAt(e){const n=new ea().p;let r=new et(0);for(let i=0;i<this.threshold;i++){let s=this.points[i].y;for(let o=0;o<this.threshold;o++)if(i!==o){const a=this.points[o].x,c=this.points[i].x,l=e.sub(a).umod(n),d=c.sub(a).umod(n).invm(n),h=l.mul(d).umod(n);s=s.mul(h).umod(n)}r=r.add(s).umod(n)}return r}};class q2{constructor(e,n,r){ze(this,"points");ze(this,"threshold");ze(this,"integrity");this.points=e,this.threshold=n,this.integrity=r}static fromBackupFormat(e){let n=0,r="";const i=e.map((s,o)=>{const a=s.split(".");if(a.length!==4)throw new Error("Invalid share format in share "+o.toString()+'. Expected format: "x.y.t.i" - received '+s);const[c,l,u,d]=a;if(u===void 0)throw new Error("Threshold not found in share "+o.toString());if(d===void 0)throw new Error("Integrity not found in share "+o.toString());const h=parseInt(u);if(o!==0&&n!==h)throw new Error("Threshold mismatch in share "+o.toString());if(o!==0&&r!==d)throw new Error("Integrity mismatch in share "+o.toString());return n=h,r=d,Yy.fromString([c,l].join("."))});return new q2(i,n,r)}toBackupFormat(){return this.points.map(e=>e.toString()+"."+this.threshold.toString()+"."+this.integrity)}}let RT=class md extends et{static fromRandom(){return new md(yl(32))}static fromString(e,n="hex"){return new md(super.fromString(e,n).toArray())}static fromHex(e){return new md(super.fromHex(e,"big"))}static fromWif(e,n=1){const r=RO(e,void 0,n);if(r.data.length!==33)throw new Error("Invalid WIF length");if(r.data[32]!==1)throw new Error("Invalid WIF padding");return new md(r.data.slice(0,32))}constructor(e=0,n=10,r="be",i="apply"){if(e instanceof et?(super(),e.copy(this)):super(e,n,r),i!=="nocheck"){const s=this.checkInField();if(!s.inField){if(i==="error")throw new Error("Input is out of field");et.move(this,s.modN)}}}checkInField(){const e=new ea,n=this.mod(e.n);return{inField:this.cmp(n)===0,modN:n}}isValid(){return this.checkInField().inField}sign(e,n,r=!0,i){const s=new et(wl(e,n),16);return kW(s,this,r,i)}verify(e,n,r){const i=new et(wl(e,r),16);return c_(i,n,this.toPublicKey())}toPublicKey(){const n=new ea().g.mul(this);return new sh(n.x,n.y)}toWif(e=[128]){if(!this.isValid())throw new Error("Value is out of field");return AO([...this.toArray("be",32),1],e)}toAddress(e=[0]){return this.toPublicKey().toAddress(e)}toHex(){return super.toHex(32)}toString(e="hex",n=64){return super.toString(e,n)}deriveSharedSecret(e){if(!e.validate())throw new Error("Public key not valid for ECDH secret derivation");return e.mul(this)}deriveChild(e,n){const r=this.deriveSharedSecret(e),i=dt(n,"utf8"),s=Pw(r.encode(!0),i),o=new ea;return new md(this.add(new et(s)).mod(o.n).toArray())}toKeyShares(e,n){if(typeof e!="number"||typeof n!="number")throw new Error("threshold and totalShares must be numbers");if(e<2)throw new Error("threshold must be at least 2");if(n<2)throw new Error("totalShares must be at least 2");if(e>n)throw new Error("threshold should be less than or equal to totalShares");const r=aL.fromPrivateKey(this,e),i=[];for(let o=0;o<n;o++){const a=new et(md.fromRandom().toArray()),c=r.valueAt(a);i.push(new Yy(a,c))}const s=this.toPublicKey().toHash("hex").slice(0,8);return new q2(i,e,s)}toBackupShares(e,n){return this.toKeyShares(e,n).toBackupFormat()}static fromBackupShares(e){return md.fromKeyShares(q2.fromBackupFormat(e))}static fromKeyShares(e){const{points:n,threshold:r,integrity:i}=e;if(r<2)throw new Error("threshold must be at least 2");if(n.length<r)throw new Error(`At least ${r} shares are required to reconstruct the private key`);for(let c=0;c<r;c++)for(let l=c+1;l<r;l++)if(n[c].x.eq(n[l].x))throw new Error("Duplicate share detected, each must be unique.");const s=new aL(n,r),o=new md(s.valueAt(new et(0)).toArray());if(o.toPublicKey().toHash("hex").slice(0,8)!==i)throw new Error("Integrity hash mismatch");return o}};const NW=[[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118],[202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192],[183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21],[4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117],[9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132],[83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207],[208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168],[81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210],[205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115],[96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219],[224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121],[231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8],[186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138],[112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158],[225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223],[140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22]],Oye=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]];function lL(t,e,n){let r,i;for(r=0;r<4;r++)for(i=0;i<4;i++)t[r][i]=t[r][i]^e[n+i][r]}function Nye(t){let e,n;for(e=0;e<4;e++)for(n=0;n<4;n++)t[e][n]=NW[(t[e][n]&240)>>4][t[e][n]&15]}function cL(t){let e;for(e=0;e<4;e++)t[e]=NW[(t[e]&240)>>4][t[e]&15]}function Lye(t){const e=t[0];t[0]=t[1],t[1]=t[2],t[2]=t[3],t[3]=e}function Dye(t){let e,n,r,i,s;for(e=1;e<4;e++)for(n=0;n<(e-1)%2+1;n++){for(s=t[e][n],r=n;i=r+e,i>=4&&(i=i-4),i!==n;)t[e][r]=t[e][i],r=i;t[e][r]=s}}function Uf(t,e){let n,r=0;for(n=0;n<8;n++)(e&1)!==0&&(r=r^t),(t&128)!==0?(t=t<<1,t=t^283):t=t<<1,e=e>>1;return r}function Bye(t){let e,n;const r=[[],[],[],[]];for(e=0;e<4;e++)r[0][e]=Uf(2,t[0][e])^Uf(3,t[1][e])^t[2][e]^t[3][e],r[1][e]=t[0][e]^Uf(2,t[1][e])^Uf(3,t[2][e])^t[3][e],r[2][e]=t[0][e]^t[1][e]^Uf(2,t[2][e])^Uf(3,t[3][e]),r[3][e]=Uf(3,t[0][e])^t[1][e]^t[2][e]^Uf(2,t[3][e]);for(e=0;e<4;e++)for(n=0;n<4;n++)t[e][n]=r[e][n]}function Fye(t,e){let n,r;const i=parseInt(String(e.length/4)),s=[];for(n=0;n<e.length;n++)n%4===0&&s.push([]),s[parseInt(String(n/4))].push(e[n]);for(n=i;n<4*t;n++){s[n]=[];const o=s[n-1].slice();if(n%i===0)for(Lye(o),cL(o),r=0;r<4;r++)o[r]=o[r]^Oye[parseInt(String(n/i))][r];else i>6&&n%i===4&&cL(o);for(r=0;r<4;r++)s[n][r]=s[n-i][r]^o[r]}return s}function kO(t,e){let n,r,i,s;const o=[[],[],[],[]],a=[],c=Array.from(e);if(c.length<=16){for(;c.length<16;)c.unshift(0);s=11}else if(c.length<=24){for(;c.length<24;)c.unshift(0);s=13}else if(e.length<=32){for(;c.length<32;)c.unshift(0);s=15}else throw new Error("Illegal key length: "+String(e.length));const l=Fye(s,c);for(n=0;n<15;n++)o[parseInt(String(n/4))].push(t[n*4%15]);for(o[3].push(t[15]),lL(o,l,0),i=1;i<s;i++)Nye(o),Dye(o),i+1<s&&Bye(o),lL(o,l,i*4);for(n=0;n<4;n++)for(r=0;r<4;r++)a.push(o[r][n]);return a}const uL=function(t,e,n){return(t[e]&1<<n)!==0?1:0},Iy=function(t){return[(t&4278190080)>>>24,(t&16711680)>>16,(t&65280)>>8,t&255]},ti=function(t){let e;const n=[];for(e=0;e<t;e++)n.push(0);return n},Uye=[225].concat(ti(15)),K2=function(t,e){let n;const r=[];for(n=0;n<t.length;n++)r[n]=t[n]^e[n];return r},dL=function(t){let e,n=0,r=0;for(e=0;e<t.length;e++)r=n,n=t[e]&1,t[e]=t[e]>>1,r!==0&&(t[e]=t[e]|128);return t},$ye=function(t,e){let n,r,i=e.slice(),s=ti(16);for(n=0;n<16;n++)for(r=7;r!==-1;r--)uL(t,n,r)!==0&&(s=K2(s,i)),uL(i,15,0)!==0?i=K2(dL(i),Uye):i=dL(i);return s},OO=function(t){let e;const n=t.slice();for(e=15;e!==11&&(n[e]=n[e]+1,n[e]===256);e--)n[e]=0;return n};function G2(t,e){let n,r=ti(16);for(n=0;n<t.length;n+=16)r=$ye(K2(r,t.slice(n,Math.min(n+16,t.length))),e);return r}function X2(t,e,n){let r,i,s,o=e;const a=[];if(t.length===0)return t;const c=Math.ceil(t.length/16);for(r=0;r<c;r++){for(s=K2(t.slice(r*16,Math.min((r+1)*16,t.length)),kO(o,n)),i=0;i<s.length;i++)a.push(s[i]);r+1<c&&(o=OO(o))}return a}function zye(t,e,n,r){let i,s;const o=kO(ti(16),r);i=[...n],n.length===12?i=i.concat(ti(3)).concat([1]):(n.length%16!==0&&(i=i.concat(ti(16-n.length%16))),i=i.concat(ti(8)),i=G2(i.concat(ti(4)).concat(Iy(n.length*8)),o));const a=X2(t,OO(i),r);return s=e.slice(),e.length===0?s=s.concat(ti(16)):e.length%16!==0&&(s=s.concat(ti(16-e.length%16))),s=s.concat(a),a.length===0?s=s.concat(ti(16)):a.length%16!==0&&(s=s.concat(ti(16-a.length%16))),s=s.concat(ti(4)).concat(Iy(e.length*8)).concat(ti(4)).concat(Iy(a.length*8)),{result:a,authenticationTag:X2(G2(s,o),i,r)}}function Hye(t,e,n,r,i){let s,o;const a=kO(ti(16),i);s=[...n],n.length===12?s=s.concat(ti(3)).concat([1]):(n.length%16!==0&&(s=s.concat(ti(16-n.length%16))),s=s.concat(ti(8)),s=G2(s.concat(ti(4)).concat(Iy(n.length*8)),a));const c=X2(t,OO(s),i);return o=e.slice(),e.length===0?o=o.concat(ti(16)):e.length%16!==0&&(o=o.concat(ti(16-e.length%16))),o=o.concat(t),t.length===0?o=o.concat(ti(16)):t.length%16!==0&&(o=o.concat(ti(16-t.length%16))),o=o.concat(ti(4)).concat(Iy(e.length*8)).concat(ti(4)).concat(Iy(t.length*8)),X2(G2(o,a),s,i).join()!==r.join()?null:c}let mP=class LW extends et{static fromRandom(){return new LW(yl(32))}encrypt(e,n){const r=yl(32);e=dt(e,n);const{result:i,authenticationTag:s}=zye(e,[],r,this.toArray("be",32));return j2([...r,...i,...s],n)}decrypt(e,n){e=dt(e,n);const r=e.slice(0,32),i=e.slice(32),s=i.slice(-16),o=i.slice(0,-16),a=Hye(o,[],r,s,this.toArray());if(a===null)throw new Error("Decryption failed!");return j2(a,n)}};var as;let ls=(as=class extends ih{constructor(n,r,i){super(n,r);ze(this,"scope");this.scope=i}static format(n){const r={sourceTXID:n.sourceTXID,sourceOutputIndex:n.sourceOutputIndex,sequence:n.inputSequence},i=[...n.otherInputs];i.splice(n.inputIndex,0,r);const s=()=>{const g=new In;for(const b of i){if(typeof b.sourceTXID>"u"){if(b.sourceTransaction==null)throw new Error("Missing sourceTransaction for input");g.write(b.sourceTransaction.hash())}else g.writeReverse(dt(b.sourceTXID,"hex"));g.writeUInt32LE(b.sourceOutputIndex)}const m=g.toArray();return gl(m)},o=()=>{const g=new In;for(const b of i){const x=b.sequence??4294967295;g.writeUInt32LE(x)}const m=g.toArray();return gl(m)};function a(g){var x,S;const m=new In;if(typeof g>"u")for(const P of n.outputs){const _=P.satoshis??0;m.writeUInt64LE(_);const I=((x=P.lockingScript)==null?void 0:x.toBinary())??[];m.writeVarIntNum(I.length),m.write(I)}else{const P=n.outputs[g];if(P===void 0)throw new Error(`Output at index ${g} does not exist`);const _=P.satoshis??0;m.writeUInt64LE(_);const I=((S=P.lockingScript)==null?void 0:S.toBinary())??[];m.writeVarIntNum(I.length),m.write(I)}const y=m.toArray();return gl(y)}let c=new Array(32).fill(0),l=new Array(32).fill(0),u=new Array(32).fill(0);(n.scope&as.SIGHASH_ANYONECANPAY)===0&&(c=s()),(n.scope&as.SIGHASH_ANYONECANPAY)===0&&(n.scope&31)!==as.SIGHASH_SINGLE&&(n.scope&31)!==as.SIGHASH_NONE&&(l=o()),(n.scope&31)!==as.SIGHASH_SINGLE&&(n.scope&31)!==as.SIGHASH_NONE?u=a():(n.scope&31)===as.SIGHASH_SINGLE&&n.inputIndex<n.outputs.length&&(u=a(n.inputIndex));const d=new In;d.writeInt32LE(n.transactionVersion),d.write(c),d.write(l),d.writeReverse(dt(n.sourceTXID,"hex")),d.writeUInt32LE(n.sourceOutputIndex);const h=n.subscript.toBinary();d.writeVarIntNum(h.length),d.write(h),d.writeUInt64LE(n.sourceSatoshis);const f=r.sequence;return d.writeUInt32LE(f),d.write(u),d.writeUInt32LE(n.lockTime),d.writeUInt32LE(n.scope>>>0),d.toArray()}static fromChecksigFormat(n){if(n.length===0){const o=new et(1),a=new et(1),c=1;return new as(o,a,c)}const r=n[n.length-1],i=n.slice(0,n.length-1),s=ih.fromDER(i);return new as(s.r,s.s,r)}hasLowS(){return!(this.s.ltn(1)||this.s.gt(new et("7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0","hex")))}toChecksigFormat(){return[...this.toDER(),this.scope]}},ze(as,"SIGHASH_ALL",1),ze(as,"SIGHASH_NONE",2),ze(as,"SIGHASH_SINGLE",3),ze(as,"SIGHASH_FORKID",64),ze(as,"SIGHASH_ANYONECANPAY",128),as),Vye=class{constructor(){ze(this,"curve");this.curve=new ea}generateProof(e,n,r,i){const s=RT.fromRandom(),o=s.toPublicKey(),a=r.mul(s),c=this.computeChallenge(n,r,i,a,o),l=s.add(c.mul(e)).umod(this.curve.n);return{R:o,SPrime:a,z:l}}verifyProof(e,n,r,i){const{R:s,SPrime:o,z:a}=i,c=this.computeChallenge(e,n,r,o,s),l=this.curve.g.mul(a),u=s.add(e.mul(c));if(!l.eq(u))return!1;const d=n.mul(a),h=o.add(r.mul(c));return!!d.eq(h)}computeChallenge(e,n,r,i,s){const o=[...e.encode(!0),...n.encode(!0),...r.encode(!0),...i.encode(!0),...s.encode(!0)],a=wl(o);return new et(a).umod(this.curve.n)}};const Me={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_SPLIT:127,OP_LEFT:128,OP_NUM2BIN:128,OP_RIGHT:129,OP_BIN2NUM:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_NOP3:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_NOP11:186,OP_NOP12:187,OP_NOP13:188,OP_NOP14:189,OP_NOP15:190,OP_NOP16:191,OP_NOP17:192,OP_NOP18:193,OP_NOP19:194,OP_NOP20:195,OP_NOP21:196,OP_NOP22:197,OP_NOP23:198,OP_NOP24:199,OP_NOP25:200,OP_NOP26:201,OP_NOP27:202,OP_NOP28:203,OP_NOP29:204,OP_NOP30:205,OP_NOP31:206,OP_NOP32:207,OP_NOP33:208,OP_NOP34:209,OP_NOP35:210,OP_NOP36:211,OP_NOP37:212,OP_NOP38:213,OP_NOP39:214,OP_NOP40:215,OP_NOP41:216,OP_NOP42:217,OP_NOP43:218,OP_NOP44:219,OP_NOP45:220,OP_NOP46:221,OP_NOP47:222,OP_NOP48:223,OP_NOP49:224,OP_NOP50:225,OP_NOP51:226,OP_NOP52:227,OP_NOP53:228,OP_NOP54:229,OP_NOP55:230,OP_NOP56:231,OP_NOP57:232,OP_NOP58:233,OP_NOP59:234,OP_NOP60:235,OP_NOP61:236,OP_NOP62:237,OP_NOP63:238,OP_NOP64:239,OP_NOP65:240,OP_NOP66:241,OP_NOP67:242,OP_NOP68:243,OP_NOP69:244,OP_NOP70:245,OP_NOP71:246,OP_NOP72:247,OP_NOP73:248,OP_NOP77:252,OP_SMALLDATA:249,OP_SMALLINTEGER:250,OP_PUBKEYS:251,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};for(const t in Me)Me[Me[t]]=t;let Gf=class ry{constructor(e=[]){ze(this,"chunks");this.chunks=e}static fromASM(e){const n=[],r=e.split(" ");let i=0;for(;i<r.length;){const s=r[i];let o,a=0;if(s.startsWith("OP_")&&typeof Me[s]<"u"&&(o=s,a=Me[s]),s==="0")a=0,n.push({op:a}),i=i+1;else if(s==="-1")a=Me.OP_1NEGATE,n.push({op:a}),i=i+1;else if(o===void 0){let c=r[i];c.length%2!==0&&(c="0"+c);const l=dt(c,"hex");if(j2(l,"hex")!==c)throw new Error("invalid hex string in script");const u=l.length;u>=0&&u<Me.OP_PUSHDATA1?a=u:u<Math.pow(2,8)?a=Me.OP_PUSHDATA1:u<Math.pow(2,16)?a=Me.OP_PUSHDATA2:u<Math.pow(2,32)&&(a=Me.OP_PUSHDATA4),n.push({data:l,op:a}),i=i+1}else a===Me.OP_PUSHDATA1||a===Me.OP_PUSHDATA2||a===Me.OP_PUSHDATA4?(n.push({data:dt(r[i+2],"hex"),op:a}),i=i+3):(n.push({op:a}),i=i+1)}return new ry(n)}static fromHex(e){if(e.length===0)return ry.fromBinary([]);if(e.length%2!==0)throw new Error("There is an uneven number of characters in the string which suggests it is not hex encoded.");if(!/^[0-9a-fA-F]+$/.test(e))throw new Error("Some elements in this string are not hex encoded.");return ry.fromBinary(dt(e,"hex"))}static fromBinary(e){e=[...e];const n=[],r=new pi(e);for(;!r.eof();){const i=r.readUInt8();let s=0,o=[];if(i>0&&i<Me.OP_PUSHDATA1)s=i,n.push({data:r.read(s),op:i});else if(i===Me.OP_PUSHDATA1){try{s=r.readUInt8(),o=r.read(s)}catch{r.read()}n.push({data:o,op:i})}else if(i===Me.OP_PUSHDATA2){try{s=r.readUInt16LE(),o=r.read(s)}catch{r.read()}n.push({data:o,op:i})}else if(i===Me.OP_PUSHDATA4){try{s=r.readUInt32LE(),o=r.read(s)}catch{r.read()}n.push({data:o,op:i})}else n.push({op:i})}return new ry(n)}toASM(){let e="";for(let n=0;n<this.chunks.length;n++){const r=this.chunks[n];e+=this._chunkToString(r)}return e.slice(1)}toHex(){return j2(this.toBinary(),"hex")}toBinary(){const e=new In;for(let n=0;n<this.chunks.length;n++){const r=this.chunks[n],i=r.op;e.writeUInt8(i),r.data!=null&&(i<Me.OP_PUSHDATA1?e.write(r.data):i===Me.OP_PUSHDATA1?(e.writeUInt8(r.data.length),e.write(r.data)):i===Me.OP_PUSHDATA2?(e.writeUInt16LE(r.data.length),e.write(r.data)):i===Me.OP_PUSHDATA4&&(e.writeUInt32LE(r.data.length),e.write(r.data)))}return e.toArray()}writeScript(e){return this.chunks=this.chunks.concat(e.chunks),this}writeOpCode(e){return this.chunks.push({op:e}),this}setChunkOpCode(e,n){return this.chunks[e]={op:n},this}writeBn(e){if(e.cmpn(0)===Me.OP_0)this.chunks.push({op:Me.OP_0});else if(e.cmpn(-1)===0)this.chunks.push({op:Me.OP_1NEGATE});else if(e.cmpn(1)>=0&&e.cmpn(16)<=0)this.chunks.push({op:e.toNumber()+Me.OP_1-1});else{const n=e.toSm("little");this.writeBin(n)}return this}writeBin(e){let n;if(e.length>0&&e.length<Me.OP_PUSHDATA1)n=e.length;else if(e.length===0)n=Me.OP_0;else if(e.length<Math.pow(2,8))n=Me.OP_PUSHDATA1;else if(e.length<Math.pow(2,16))n=Me.OP_PUSHDATA2;else if(e.length<Math.pow(2,32))n=Me.OP_PUSHDATA4;else throw new Error("You can't push that much data");return this.chunks.push({data:e,op:n}),this}writeNumber(e){return this.writeBn(new et(e)),this}removeCodeseparators(){const e=[];for(let n=0;n<this.chunks.length;n++)this.chunks[n].op!==Me.OP_CODESEPARATOR&&e.push(this.chunks[n]);return this.chunks=e,this}findAndDelete(e){const n=e.toHex();for(let r=0;r<this.chunks.length;r++){const s=new ry([this.chunks[r]]).toHex();n===s&&this.chunks.splice(r,1)}return this}isPushOnly(){for(let e=0;e<this.chunks.length;e++)if(this.chunks[e].op>Me.OP_16)return!1;return!0}isLockingScript(){throw new Error("Not implemented")}isUnlockingScript(){throw new Error("Not implemented")}_chunkToString(e){const n=e.op;let r="";if(typeof e.data>"u"){const i=Me[n];r=`${r} ${i}`}else r=`${r} ${cn(e.data)}`;return r}},Py=class extends Gf{isLockingScript(){return!0}isUnlockingScript(){return!1}},Y2=class extends Gf{isLockingScript(){return!1}isUnlockingScript(){return!0}};const mg=1024*1024*1024,fL=Math.pow(2,31)-1,Xa=!0;let Wye=class{constructor(e){ze(this,"sourceTXID");ze(this,"sourceOutputIndex");ze(this,"sourceSatoshis");ze(this,"lockingScript");ze(this,"transactionVersion");ze(this,"otherInputs");ze(this,"outputs");ze(this,"inputIndex");ze(this,"unlockingScript");ze(this,"inputSequence");ze(this,"lockTime");ze(this,"context");ze(this,"programCounter");ze(this,"lastCodeSeparator");ze(this,"stack");ze(this,"altStack");ze(this,"ifStack");this.sourceTXID=e.sourceTXID,this.sourceOutputIndex=e.sourceOutputIndex,this.sourceSatoshis=e.sourceSatoshis,this.lockingScript=e.lockingScript,this.transactionVersion=e.transactionVersion,this.otherInputs=e.otherInputs,this.outputs=e.outputs,this.inputIndex=e.inputIndex,this.unlockingScript=e.unlockingScript,this.inputSequence=e.inputSequence,this.lockTime=e.lockTime,this.reset()}reset(){this.context="UnlockingScript",this.programCounter=0,this.lastCodeSeparator=null,this.stack=[],this.altStack=[],this.ifStack=[]}step(){this.context==="UnlockingScript"&&this.programCounter>=this.unlockingScript.chunks.length&&(this.context="LockingScript",this.programCounter=0);let e;this.context==="UnlockingScript"?e=this.unlockingScript.chunks[this.programCounter]:e=this.lockingScript.chunks[this.programCounter];const n=ae=>ae===Me.OP_2MUL||ae===Me.OP_2DIV||ae===Me.OP_VERIF||ae===Me.OP_VERNOTIF||ae===Me.OP_VER,r=ae=>{const _e=ae.data,ye=ae.op;return Array.isArray(_e)?_e.length===0?ye===Me.OP_0:_e.length===1&&_e[0]>=1&&_e[0]<=16?ye===Me.OP_1+(_e[0]-1):_e.length===1&&_e[0]===129?ye===Me.OP_1NEGATE:_e.length<=75?ye===_e.length:_e.length<=255?ye===Me.OP_PUSHDATA1:_e.length<=65535?ye===Me.OP_PUSHDATA2:!0:!0},i=(ae,_e=Number.MAX_SAFE_INTEGER)=>!(ae.length>_e||ae.length>0&&(ae[ae.length-1]&127)===0&&(ae.length<=1||(ae[ae.length-2]&128)===0)),s=(ae,_e)=>{const ye=ae;for(;ye.length<_e;)ye.unshift(0);return ye},o=ae=>{if(ae.length<9||ae.length>73||ae[0]!==48||ae[1]!==ae.length-3)return!1;const _e=ae[3];if(5+_e>=ae.length)return!1;const ye=ae[5+_e];if(_e+ye+7!==ae.length)return!1;const Ae=ae.slice(4);if(ae[2]!==2||_e===0||(Ae[0]&128)!==0||_e>1&&Ae[0]===0&&(Ae[1]&128)===0)return!1;const Oe=ae.slice(6+_e);return!(ae[6+_e-2]!==2||ye===0||(Oe[0]&128)!==0||ye>1&&Oe[0]===0&&(Oe[1]&128)===0)},a=ae=>{if(ae.length===0)return!0;o(ae)||this.scriptEvaluationError("The signature format is invalid.");const _e=ls.fromChecksigFormat(ae);return _e.hasLowS()||this.scriptEvaluationError("The signature must have a low S value."),(_e.scope&ls.SIGHASH_FORKID)===0?(this.scriptEvaluationError("The signature must use SIGHASH_FORKID."),!1):!0},c=ae=>(ae.length<33&&this.scriptEvaluationError("The public key is too short, it must be at least 33 bytes."),ae[0]===4?ae.length!==65&&this.scriptEvaluationError("The non-compressed public key must be 65 bytes."):ae[0]===2||ae[0]===3?ae.length!==33&&this.scriptEvaluationError("The compressed public key must be 33 bytes."):this.scriptEvaluationError("The public key is in an unknown format."),!0),l=(ae,_e,ye)=>{const Ae=ls.format({sourceTXID:this.sourceTXID,sourceOutputIndex:this.sourceOutputIndex,sourceSatoshis:this.sourceSatoshis,transactionVersion:this.transactionVersion,otherInputs:this.otherInputs,outputs:this.outputs,inputIndex:this.inputIndex,subscript:ye,inputSequence:this.inputSequence,lockTime:this.lockTime,scope:ae.scope}),Oe=new et(gl(Ae));return c_(Oe,ae,_e)},u=!this.ifStack.includes(!1);let d,h,f,p,g,m,y,b,x,S,P,_,I,C,A,M,k,O,B,$,U,q,K,V,G,j,Q,se,Z,ie,pe,ue;const le=e.op;if(typeof le>"u"&&this.scriptEvaluationError(`An opcode is missing in this chunk of the ${this.context}!`),Array.isArray(e.data)&&e.data.length>mg&&this.scriptEvaluationError(`It's not currently possible to push data larger than ${mg} bytes.`),u&&n(le)&&this.scriptEvaluationError("This opcode is currently disabled."),u&&le>=0&&le<=Me.OP_PUSHDATA4)r(e)||this.scriptEvaluationError("This data is not minimally-encoded."),Array.isArray(e.data)?this.stack.push(e.data):this.stack.push([]);else if(u||Me.OP_IF<=le&&le<=Me.OP_ENDIF)switch(le){case Me.OP_1NEGATE:case Me.OP_1:case Me.OP_2:case Me.OP_3:case Me.OP_4:case Me.OP_5:case Me.OP_6:case Me.OP_7:case Me.OP_8:case Me.OP_9:case Me.OP_10:case Me.OP_11:case Me.OP_12:case Me.OP_13:case Me.OP_14:case Me.OP_15:case Me.OP_16:m=le-(Me.OP_1-1),d=new et(m).toScriptNum(),this.stack.push(d);break;case Me.OP_NOP:case Me.OP_NOP2:case Me.OP_NOP3:case Me.OP_NOP1:case Me.OP_NOP4:case Me.OP_NOP5:case Me.OP_NOP6:case Me.OP_NOP7:case Me.OP_NOP8:case Me.OP_NOP9:case Me.OP_NOP10:case Me.OP_NOP11:case Me.OP_NOP12:case Me.OP_NOP13:case Me.OP_NOP14:case Me.OP_NOP15:case Me.OP_NOP16:case Me.OP_NOP17:case Me.OP_NOP18:case Me.OP_NOP19:case Me.OP_NOP20:case Me.OP_NOP21:case Me.OP_NOP22:case Me.OP_NOP23:case Me.OP_NOP24:case Me.OP_NOP25:case Me.OP_NOP26:case Me.OP_NOP27:case Me.OP_NOP28:case Me.OP_NOP29:case Me.OP_NOP30:case Me.OP_NOP31:case Me.OP_NOP32:case Me.OP_NOP33:case Me.OP_NOP34:case Me.OP_NOP35:case Me.OP_NOP36:case Me.OP_NOP37:case Me.OP_NOP38:case Me.OP_NOP39:case Me.OP_NOP40:case Me.OP_NOP41:case Me.OP_NOP42:case Me.OP_NOP43:case Me.OP_NOP44:case Me.OP_NOP45:case Me.OP_NOP46:case Me.OP_NOP47:case Me.OP_NOP48:case Me.OP_NOP49:case Me.OP_NOP50:case Me.OP_NOP51:case Me.OP_NOP52:case Me.OP_NOP53:case Me.OP_NOP54:case Me.OP_NOP55:case Me.OP_NOP56:case Me.OP_NOP57:case Me.OP_NOP58:case Me.OP_NOP59:case Me.OP_NOP60:case Me.OP_NOP61:case Me.OP_NOP62:case Me.OP_NOP63:case Me.OP_NOP64:case Me.OP_NOP65:case Me.OP_NOP66:case Me.OP_NOP67:case Me.OP_NOP68:case Me.OP_NOP69:case Me.OP_NOP70:case Me.OP_NOP71:case Me.OP_NOP72:case Me.OP_NOP73:case Me.OP_NOP77:break;case Me.OP_IF:case Me.OP_NOTIF:ie=!1,u&&(this.stack.length<1&&this.scriptEvaluationError("OP_IF and OP_NOTIF require at least one item on the stack when they are used!"),d=this.stacktop(-1),ie=this.castToBool(d),le===Me.OP_NOTIF&&(ie=!ie),this.stack.pop()),this.ifStack.push(ie);break;case Me.OP_ELSE:this.ifStack.length===0&&this.scriptEvaluationError("OP_ELSE requires a preceeding OP_IF."),this.ifStack[this.ifStack.length-1]=!this.ifStack[this.ifStack.length-1];break;case Me.OP_ENDIF:this.ifStack.length===0&&this.scriptEvaluationError("OP_ENDIF requires a preceeding OP_IF."),this.ifStack.pop();break;case Me.OP_VERIFY:this.stack.length<1&&this.scriptEvaluationError("OP_VERIFY requires at least one item to be on the stack."),d=this.stacktop(-1),ie=this.castToBool(d),ie?this.stack.pop():this.scriptEvaluationError("OP_VERIFY requires the top stack value to be truthy.");break;case Me.OP_RETURN:this.context==="UnlockingScript"?this.programCounter=this.unlockingScript.chunks.length:this.programCounter=this.lockingScript.chunks.length,this.ifStack=[];break;case Me.OP_TOALTSTACK:this.stack.length<1&&this.scriptEvaluationError("OP_TOALTSTACK requires at oeast one item to be on the stack."),this.altStack.push(this.stack.pop()??[]);break;case Me.OP_FROMALTSTACK:this.altStack.length<1&&this.scriptEvaluationError("OP_FROMALTSTACK requires at least one item to be on the stack."),this.stack.push(this.altStack.pop()??[]);break;case Me.OP_2DROP:this.stack.length<2&&this.scriptEvaluationError("OP_2DROP requires at least two items to be on the stack."),this.stack.pop(),this.stack.pop();break;case Me.OP_2DUP:this.stack.length<2&&this.scriptEvaluationError("OP_2DUP requires at least two items to be on the stack."),h=this.stacktop(-2),f=this.stacktop(-1),this.stack.push([...h]),this.stack.push([...f]);break;case Me.OP_3DUP:this.stack.length<3&&this.scriptEvaluationError("OP_3DUP requires at least three items to be on the stack."),h=this.stacktop(-3),f=this.stacktop(-2),p=this.stacktop(-1),this.stack.push([...h]),this.stack.push([...f]),this.stack.push([...p]);break;case Me.OP_2OVER:this.stack.length<4&&this.scriptEvaluationError("OP_2OVER requires at least four items to be on the stack."),h=this.stacktop(-4),f=this.stacktop(-3),this.stack.push([...h]),this.stack.push([...f]);break;case Me.OP_2ROT:this.stack.length<6&&this.scriptEvaluationError("OP_2ROT requires at least six items to be on the stack."),g=this.stack.splice(this.stack.length-6,2),this.stack.push(g[0]),this.stack.push(g[1]);break;case Me.OP_2SWAP:this.stack.length<4&&this.scriptEvaluationError("OP_2SWAP requires at least four items to be on the stack."),g=this.stack.splice(this.stack.length-4,2),this.stack.push(g[0]),this.stack.push(g[1]);break;case Me.OP_IFDUP:this.stack.length<1&&this.scriptEvaluationError("OP_IFDUP requires at least one item to be on the stack."),d=this.stacktop(-1),ie=this.castToBool(d),ie&&this.stack.push([...d]);break;case Me.OP_DEPTH:d=new et(this.stack.length).toScriptNum(),this.stack.push(d);break;case Me.OP_DROP:this.stack.length<1&&this.scriptEvaluationError("OP_DROP requires at least one item to be on the stack."),this.stack.pop();break;case Me.OP_DUP:this.stack.length<1&&this.scriptEvaluationError("OP_DUP requires at least one item to be on the stack."),this.stack.push([...this.stacktop(-1)]);break;case Me.OP_NIP:this.stack.length<2&&this.scriptEvaluationError("OP_NIP requires at least two items to be on the stack."),this.stack.splice(this.stack.length-2,1);break;case Me.OP_OVER:this.stack.length<2&&this.scriptEvaluationError("OP_OVER requires at least two items to be on the stack."),this.stack.push([...this.stacktop(-2)]);break;case Me.OP_PICK:case Me.OP_ROLL:this.stack.length<2&&this.scriptEvaluationError(`${Me[le]} requires at least two items to be on the stack.`),d=this.stacktop(-1),C=et.fromScriptNum(d,Xa),m=C.toNumber(),this.stack.pop(),(m<0||m>=this.stack.length)&&this.scriptEvaluationError(`${Me[le]} requires the top stack element to be 0 or a positive number less than the current size of the stack.`),d=this.stacktop(-m-1),le===Me.OP_ROLL&&this.stack.splice(this.stack.length-m-1,1),this.stack.push([...d]);break;case Me.OP_ROT:this.stack.length<3&&this.scriptEvaluationError("OP_ROT requires at least three items to be on the stack."),P=this.stacktop(-3),_=this.stacktop(-2),I=this.stacktop(-1),this.stack[this.stack.length-3]=_,this.stack[this.stack.length-2]=I,this.stack[this.stack.length-1]=P;break;case Me.OP_SWAP:this.stack.length<2&&this.scriptEvaluationError("OP_SWAP requires at least two items to be on the stack."),P=this.stacktop(-2),_=this.stacktop(-1),this.stack[this.stack.length-2]=_,this.stack[this.stack.length-1]=P;break;case Me.OP_TUCK:this.stack.length<2&&this.scriptEvaluationError("OP_TUCK requires at least two items to be on the stack."),this.stack.splice(this.stack.length-2,0,[...this.stacktop(-1)]);break;case Me.OP_SIZE:this.stack.length<1&&this.scriptEvaluationError("OP_SIZE requires at least one item to be on the stack."),C=new et(this.stacktop(-1).length),this.stack.push(C.toScriptNum());break;case Me.OP_AND:case Me.OP_OR:case Me.OP_XOR:switch(this.stack.length<2&&this.scriptEvaluationError(`${Me[le]} requires at least one item to be on the stack.`),h=this.stacktop(-2),f=this.stacktop(-1),h.length!==f.length&&this.scriptEvaluationError(`${Me[le]} requires the top two stack items to be the same size.`),le){case Me.OP_AND:for(let ae=0;ae<h.length;ae++)h[ae]&=f[ae];break;case Me.OP_OR:for(let ae=0;ae<h.length;ae++)h[ae]|=f[ae];break;case Me.OP_XOR:for(let ae=0;ae<h.length;ae++)h[ae]^=f[ae];break}this.stack.pop();break;case Me.OP_INVERT:this.stack.length<1&&this.scriptEvaluationError("OP_INVERT requires at least one item to be on the stack."),d=this.stacktop(-1);for(let ae=0;ae<d.length;ae++)d[ae]=~d[ae];break;case Me.OP_LSHIFT:case Me.OP_RSHIFT:if(this.stack.length<2&&this.scriptEvaluationError(`${Me[le]} requires at least two items to be on the stack.`),h=this.stacktop(-2),h.length===0)this.stack.pop();else{A=new et(h),M=et.fromScriptNum(this.stacktop(-1),Xa),m=M.toNumber(),m<0&&this.scriptEvaluationError(`${Me[le]} requires the top item on the stack not to be negative.`),this.stack.pop(),this.stack.pop();let ae;le===Me.OP_LSHIFT&&(ae=A.ushln(m)),le===Me.OP_RSHIFT&&(ae=A.ushrn(m));const _e=s(ae.toArray().slice(h.length*-1),h.length);this.stack.push(_e)}break;case Me.OP_EQUAL:case Me.OP_EQUALVERIFY:this.stack.length<2&&this.scriptEvaluationError(`${Me[le]} requires at least two items to be on the stack.`),h=this.stacktop(-2),f=this.stacktop(-1),pe=cn(h)===cn(f),this.stack.pop(),this.stack.pop(),this.stack.push(pe?[1]:[]),le===Me.OP_EQUALVERIFY&&(pe?this.stack.pop():this.scriptEvaluationError("OP_EQUALVERIFY requires the top two stack items to be equal."));break;case Me.OP_1ADD:case Me.OP_1SUB:case Me.OP_NEGATE:case Me.OP_ABS:case Me.OP_NOT:case Me.OP_0NOTEQUAL:switch(this.stack.length<1&&this.scriptEvaluationError(`${Me[le]} requires at least one items to be on the stack.`),d=this.stacktop(-1),C=et.fromScriptNum(d,Xa),le){case Me.OP_1ADD:C=C.addn(1);break;case Me.OP_1SUB:C=C.subn(1);break;case Me.OP_NEGATE:C=C.neg();break;case Me.OP_ABS:C.cmpn(0)<0&&(C=C.neg());break;case Me.OP_NOT:C=new et(C.cmpn(0)===0?1:0);break;case Me.OP_0NOTEQUAL:C=new et(C.cmpn(0)!==0?1:0);break}this.stack.pop(),this.stack.push(C.toScriptNum());break;case Me.OP_ADD:case Me.OP_SUB:case Me.OP_MUL:case Me.OP_MOD:case Me.OP_DIV:case Me.OP_BOOLAND:case Me.OP_BOOLOR:case Me.OP_NUMEQUAL:case Me.OP_NUMEQUALVERIFY:case Me.OP_NUMNOTEQUAL:case Me.OP_LESSTHAN:case Me.OP_GREATERTHAN:case Me.OP_LESSTHANOREQUAL:case Me.OP_GREATERTHANOREQUAL:case Me.OP_MIN:case Me.OP_MAX:switch(this.stack.length<2&&this.scriptEvaluationError(`${Me[le]} requires at least two items to be on the stack.`),A=et.fromScriptNum(this.stacktop(-2),Xa),M=et.fromScriptNum(this.stacktop(-1),Xa),C=new et(0),le){case Me.OP_ADD:C=A.add(M);break;case Me.OP_SUB:C=A.sub(M);break;case Me.OP_MUL:C=A.mul(M);break;case Me.OP_DIV:M.cmpn(0)===0&&this.scriptEvaluationError("OP_DIV cannot divide by zero!"),C=A.div(M);break;case Me.OP_MOD:M.cmpn(0)===0&&this.scriptEvaluationError("OP_MOD cannot divide by zero!"),C=A.mod(M);break;case Me.OP_BOOLAND:C=new et(A.cmpn(0)!==0&&M.cmpn(0)!==0?1:0);break;case Me.OP_BOOLOR:C=new et(A.cmpn(0)!==0||M.cmpn(0)!==0?1:0);break;case Me.OP_NUMEQUAL:C=new et(A.cmp(M)===0?1:0);break;case Me.OP_NUMEQUALVERIFY:C=new et(A.cmp(M)===0?1:0);break;case Me.OP_NUMNOTEQUAL:C=new et(A.cmp(M)!==0?1:0);break;case Me.OP_LESSTHAN:C=new et(A.cmp(M)<0?1:0);break;case Me.OP_GREATERTHAN:C=new et(A.cmp(M)>0?1:0);break;case Me.OP_LESSTHANOREQUAL:C=new et(A.cmp(M)<=0?1:0);break;case Me.OP_GREATERTHANOREQUAL:C=new et(A.cmp(M)>=0?1:0);break;case Me.OP_MIN:C=A.cmp(M)<0?A:M;break;case Me.OP_MAX:C=A.cmp(M)>0?A:M;break}this.stack.pop(),this.stack.pop(),this.stack.push(C.toScriptNum()),le===Me.OP_NUMEQUALVERIFY&&(this.castToBool(this.stacktop(-1))?this.stack.pop():this.scriptEvaluationError("OP_NUMEQUALVERIFY requires the top stack item to be truthy."));break;case Me.OP_WITHIN:this.stack.length<3&&this.scriptEvaluationError("OP_WITHIN requires at least three items to be on the stack."),A=et.fromScriptNum(this.stacktop(-3),Xa),M=et.fromScriptNum(this.stacktop(-2),Xa),k=et.fromScriptNum(this.stacktop(-1),Xa),ie=M.cmp(A)<=0&&A.cmp(k)<0,this.stack.pop(),this.stack.pop(),this.stack.pop(),this.stack.push(ie?[1]:[]);break;case Me.OP_RIPEMD160:case Me.OP_SHA1:case Me.OP_SHA256:case Me.OP_HASH160:case Me.OP_HASH256:{this.stack.length<1&&this.scriptEvaluationError(`${Me[le]} requires at least one item to be on the stack.`);let ae=[];d=this.stacktop(-1),le===Me.OP_RIPEMD160?ae=Tye(d):le===Me.OP_SHA1?ae=Iye(d):le===Me.OP_SHA256?ae=wl(d):le===Me.OP_HASH160?ae=AW(d):le===Me.OP_HASH256&&(ae=gl(d)),this.stack.pop(),this.stack.push(ae);break}case Me.OP_CODESEPARATOR:this.lastCodeSeparator=this.programCounter;break;case Me.OP_CHECKSIG:case Me.OP_CHECKSIGVERIFY:this.stack.length<2&&this.scriptEvaluationError(`${Me[le]} requires at least two items to be on the stack.`),O=this.stacktop(-2),B=this.stacktop(-1),(!a(O)||!c(B))&&this.scriptEvaluationError(`${Me[le]} requires correct encoding for the public key and signature.`),this.context==="UnlockingScript"?$=new Gf(this.unlockingScript.chunks.slice(this.lastCodeSeparator??0)):$=new Gf(this.lockingScript.chunks.slice(this.lastCodeSeparator??0)),$.findAndDelete(new Gf().writeBin(O));try{U=ls.fromChecksigFormat(O),q=sh.fromDER(B),ue=l(U,q,$)}catch{ue=!1}!ue&&O.length>0&&this.scriptEvaluationError(`${Me[le]} failed to verify the signature, and requires an empty signature when verification fails.`),this.stack.pop(),this.stack.pop(),this.stack.push(ue?[1]:[]),le===Me.OP_CHECKSIGVERIFY&&(ue?this.stack.pop():this.scriptEvaluationError("OP_CHECKSIGVERIFY requires that a valid signature is provided."));break;case Me.OP_CHECKMULTISIG:case Me.OP_CHECKMULTISIGVERIFY:K=1,this.stack.length<K&&this.scriptEvaluationError(`${Me[le]} requires at least 1 item to be on the stack.`),G=et.fromScriptNum(this.stacktop(-K),Xa).toNumber(),(G<0||G>fL)&&this.scriptEvaluationError(`${Me[le]} requires a key count between 0 and ${fL}.`),j=++K,K+=G,Q=G+2,this.stack.length<K&&this.scriptEvaluationError(`${Me[le]} requires the number of stack items not to be less than the number of keys used.`),se=et.fromScriptNum(this.stacktop(-K),Xa).toNumber(),(se<0||se>G)&&this.scriptEvaluationError(`${Me[le]} requires the number of signatures to be no greater than the number of keys.`),Z=++K,K+=se,this.stack.length<K&&this.scriptEvaluationError(`${Me[le]} requires the number of stack items not to be less than the number of signatures provided.`),this.context==="UnlockingScript"?$=new Gf(this.unlockingScript.chunks.slice(this.lastCodeSeparator??0)):$=new Gf(this.lockingScript.chunks.slice(this.lastCodeSeparator??0));for(let ae=0;ae<se;ae++)O=this.stacktop(-Z-ae),$.findAndDelete(new Gf().writeBin(O));for(ue=!0;ue&&se>0;){O=this.stacktop(-Z),B=this.stacktop(-j),(!a(O)||!c(B))&&this.scriptEvaluationError(`${Me[le]} requires correct encoding for the public key and signature.`);try{U=ls.fromChecksigFormat(O),q=sh.fromString(cn(B)),V=l(U,q,$)}catch{V=!1}V&&(Z++,se--),j++,G--,se>G&&(ue=!1)}for(;K-- >1;)!ue&&Q===0&&this.stacktop(-1).length>0&&this.scriptEvaluationError(`${Me[le]} failed to verify a signature, and requires an empty signature when verification fails.`),Q>0&&Q--,this.stack.pop();this.stack.length<1&&this.scriptEvaluationError(`${Me[le]} requires an extra item to be on the stack.`),this.stacktop(-1).length>0&&this.scriptEvaluationError(`${Me[le]} requires the extra stack item to be empty.`),this.stack.pop(),this.stack.push(ue?[1]:[]),le===Me.OP_CHECKMULTISIGVERIFY&&(ue?this.stack.pop():this.scriptEvaluationError("OP_CHECKMULTISIGVERIFY requires that a sufficient number of valid signatures are provided."));break;case Me.OP_CAT:this.stack.length<2&&this.scriptEvaluationError("OP_CAT requires at least two items to be on the stack."),h=this.stacktop(-2),f=this.stacktop(-1),h.length+f.length>mg&&this.scriptEvaluationError(`It's not currently possible to push data larger than ${mg} bytes.`),this.stack[this.stack.length-2]=[...h,...f],this.stack.pop();break;case Me.OP_SPLIT:this.stack.length<2&&this.scriptEvaluationError("OP_SPLIT requires at least two items to be on the stack."),h=this.stacktop(-2),m=et.fromScriptNum(this.stacktop(-1),Xa).toNumber(),(m<0||m>h.length)&&this.scriptEvaluationError("OP_SPLIT requires the first stack item to be a non-negative number less than or equal to the size of the second-from-top stack item."),f=[...h],this.stack[this.stack.length-2]=f.slice(0,m),this.stack[this.stack.length-1]=f.slice(m);break;case Me.OP_NUM2BIN:if(this.stack.length<2&&this.scriptEvaluationError("OP_NUM2BIN requires at least two items to be on the stack."),y=et.fromScriptNum(this.stacktop(-1),Xa).toNumber(),y>mg&&this.scriptEvaluationError(`It's not currently possible to push data larger than ${mg} bytes.`),this.stack.pop(),b=this.stacktop(-1),b=sL(b),b.length>y&&this.scriptEvaluationError("OP_NUM2BIN requires that the size expressed in the top stack item is large enough to hold the value expressed in the second-from-top stack item."),b.length===y){this.stack[this.stack.length-1]=b;break}for(S=0,b.length>0&&(S=b[b.length-1]&128,b[b.length-1]&=127),x=new Array(y),x.fill(0),m=0;m<y;m++)x[m]=b[m];for(m=b.length-1;m++<y-2;)x[m]=0;x[m]=S,this.stack[this.stack.length-1]=x;break;case Me.OP_BIN2NUM:this.stack.length<1&&this.scriptEvaluationError("OP_BIN2NUM requires at least one item to be on the stack."),h=this.stacktop(-1),f=sL(h),this.stack[this.stack.length-1]=f,i(f)||this.scriptEvaluationError("OP_BIN2NUM requires that the resulting number is valid.");break;default:this.scriptEvaluationError("Invalid opcode!")}this.programCounter++}validate(){for(this.unlockingScript.isPushOnly()||this.scriptEvaluationError("Unlocking scripts can only contain push operations, and no other opcodes.");this.step(),!(this.context==="LockingScript"&&this.programCounter>=this.lockingScript.chunks.length););return this.ifStack.length>0&&this.scriptEvaluationError("Every OP_IF must be terminated prior to the end of the script."),this.stack.length!==1&&this.scriptEvaluationError("The clean stack rule requires exactly one item to be on the stack after script execution."),this.castToBool(this.stacktop(-1))||this.scriptEvaluationError("The top stack element must be truthy after script evaluation."),!0}stacktop(e){return this.stack[this.stack.length+e]}castToBool(e){for(let n=0;n<e.length;n++)if(e[n]!==0)return!(n===e.length-1&&e[n]===128);return!1}scriptEvaluationError(e){throw new Error(`Script evaluation error: ${e}

Source TXID: ${this.sourceTXID}
Source output index: ${this.sourceOutputIndex}
Context: ${this.context}
Program counter: ${this.programCounter}
Stack size: ${this.stack.length}
Alt stack size: ${this.altStack.length}`)}};function hL(t){if(t==null)throw new Error("must have value");return t}let DW=class{lock(e){let n;if(typeof e=="string"){const r=RO(e);if(r.prefix[0]!==0&&r.prefix[0]!==111)throw new Error("only P2PKH is supported");n=r.data}else n=e;if(n.length!==20)throw new Error("P2PKH hash length must be 20 bytes");return new Py([{op:Me.OP_DUP},{op:Me.OP_HASH160},{op:n.length,data:n},{op:Me.OP_EQUALVERIFY},{op:Me.OP_CHECKSIG}])}unlock(e,n="all",r=!1,i,s){return{sign:async(o,a)=>{var y,b,x;let c=ls.SIGHASH_FORKID;n==="all"&&(c|=ls.SIGHASH_ALL),n==="none"&&(c|=ls.SIGHASH_NONE),n==="single"&&(c|=ls.SIGHASH_SINGLE),r&&(c|=ls.SIGHASH_ANYONECANPAY);const l=o.inputs[a],u=o.inputs.filter((S,P)=>P!==a),d=l.sourceTXID??((y=l.sourceTransaction)==null?void 0:y.id("hex"));if(d==null||d===void 0)throw new Error("The input sourceTXID or sourceTransaction is required for transaction signing.");if(d==="")throw new Error("The input sourceTXID or sourceTransaction is required for transaction signing.");if(i||(i=(b=l.sourceTransaction)==null?void 0:b.outputs[l.sourceOutputIndex].satoshis),i==null||i===void 0)throw new Error("The sourceSatoshis or input sourceTransaction is required for transaction signing.");if(s||(s=(x=l.sourceTransaction)==null?void 0:x.outputs[l.sourceOutputIndex].lockingScript),s==null)throw new Error("The lockingScript or input sourceTransaction is required for transaction signing.");const h=ls.format({sourceTXID:d,sourceOutputIndex:hL(l.sourceOutputIndex),sourceSatoshis:i,transactionVersion:o.version,otherInputs:u,inputIndex:a,outputs:o.outputs,inputSequence:hL(l.sequence),subscript:s,lockTime:o.lockTime,scope:c}),f=e.sign(wl(h)),g=new ls(f.r,f.s,c).toChecksigFormat(),m=e.toPublicKey().encode(!0);return new Y2([{op:g.length,data:g},{op:m.length,data:m}])},estimateLength:async()=>108}}};function pL(t){if(t==null)throw new Error("must have value");return t}const jye=t=>t.length===0?{op:0}:t.length===1&&t[0]===0?{op:0}:t.length===1&&t[0]>0&&t[0]<=16?{op:80+t[0]}:t.length===1&&t[0]===129?{op:79}:t.length<=75?{op:t.length,data:t}:t.length<=255?{op:76,data:t}:t.length<=65535?{op:77,data:t}:{op:78,data:t};let Zy=class{constructor(e,n){ze(this,"wallet");ze(this,"originator");this.wallet=e,this.originator=n}static decode(e){var i;const n=sh.fromString(cn(pL(e.chunks[0].data))),r=[];for(let s=2;s<e.chunks.length;s++){const o=(i=e.chunks[s+1])==null?void 0:i.op;let a=e.chunks[s].data??[];if(a.length===0&&(e.chunks[s].op>=80&&e.chunks[s].op<=95?a=[e.chunks[s].op-80]:e.chunks[s].op===0?a=[0]:e.chunks[s].op===79&&(a=[129])),r.push(a),o===Me.OP_DROP||o===Me.OP_2DROP)break}return{fields:r,lockingPublicKey:n}}async lock(e,n,r,i,s=!1,o=!0,a="before"){const{publicKey:c}=await this.wallet.getPublicKey({protocolID:n,keyID:r,counterparty:i,forSelf:s},this.originator),l=[],u=[];if(l.push({op:c.length/2,data:dt(c,"hex")}),l.push({op:Me.OP_CHECKSIG}),o){const h=e.reduce((p,g)=>[...p,...g],[]),{signature:f}=await this.wallet.createSignature({data:h,protocolID:n,keyID:r,counterparty:i},this.originator);e.push(f)}for(const h of e)u.push(jye(h));let d=e.length;for(;d>1;)u.push({op:Me.OP_2DROP}),d-=2;return d!==0&&u.push({op:Me.OP_DROP}),a==="before"?new Py([...l,...u]):new Py([...u,...l])}unlock(e,n,r,i="all",s=!1,o,a){return{sign:async(c,l)=>{var S,P,_;let u=ls.SIGHASH_FORKID;i==="all"&&(u|=ls.SIGHASH_ALL),i==="none"&&(u|=ls.SIGHASH_NONE),i==="single"&&(u|=ls.SIGHASH_SINGLE),s&&(u|=ls.SIGHASH_ANYONECANPAY);const d=c.inputs[l],h=c.inputs.filter((I,C)=>C!==l),f=d.sourceTXID??((S=d.sourceTransaction)==null?void 0:S.id("hex"));if(f==null||f===void 0)throw new Error("The input sourceTXID or sourceTransaction is required for transaction signing.");if(o||(o=(P=d.sourceTransaction)==null?void 0:P.outputs[d.sourceOutputIndex].satoshis),o==null||o===void 0)throw new Error("The sourceSatoshis or input sourceTransaction is required for transaction signing.");if(a||(a=(_=d.sourceTransaction)==null?void 0:_.outputs[d.sourceOutputIndex].lockingScript),a==null)throw new Error("The lockingScript or input sourceTransaction is required for transaction signing.");const p=ls.format({sourceTXID:f,sourceOutputIndex:pL(d.sourceOutputIndex),sourceSatoshis:o,transactionVersion:c.version,otherInputs:h,inputIndex:l,outputs:c.outputs,inputSequence:d.sequence??4294967295,subscript:a,lockTime:c.lockTime,scope:u}),g=wl(p),{signature:m}=await this.wallet.createSignature({data:g,protocolID:e,keyID:n,counterparty:r},this.originator),y=ih.fromDER([...m]),x=new ls(y.r,y.s,u).toChecksigFormat();return new Y2([{op:x.length,data:x}])},estimateLength:async()=>73}}},qye=class{constructor(e){ze(this,"value");this.value=e}async computeFee(e){const n=s=>s>4294967296?9:s>65536?5:s>253?3:1;let r=4;r+=n(e.inputs.length);for(let s=0;s<e.inputs.length;s++){const o=e.inputs[s];r+=40;let a;if(typeof o.unlockingScript=="object")a=o.unlockingScript.toBinary().length;else if(typeof o.unlockingScriptTemplate=="object")a=await o.unlockingScriptTemplate.estimateLength(e,s);else throw new Error("All inputs must have an unlocking script or an unlocking script template for sat/kb fee computation.");r+=n(a),r+=a}r+=n(e.outputs.length);for(const s of e.outputs){r+=8;const o=s.lockingScript.toBinary().length;r+=n(o),r+=o}return r+=4,Math.ceil(r/1e3*this.value)}},Kye=class{constructor(e){ze(this,"https");this.https=e}async request(e,n){return await new Promise((r,i)=>{const s=this.https.request(e,n,o=>{let a="";o.on("data",c=>{a+=c}),o.on("end",()=>{const c=o.statusCode>=200&&o.statusCode<=299,l=o.headers["content-type"],u=a!==""&&typeof l=="string"&&l.startsWith("application/json")?JSON.parse(a):a;r({status:o.statusCode,statusText:o.statusMessage,ok:c,data:u})})});s.on("error",o=>{i(o)}),n.data!==null&&n.data!==void 0&&s.write(JSON.stringify(n.data)),s.end()})}},Gye=class{constructor(e){ze(this,"fetch");this.fetch=e}async request(e,n){const r={method:n.method,headers:n.headers,body:JSON.stringify(n.data)},i=await this.fetch(e,r),s=i.headers.get("Content-Type"),o=(s==null?void 0:s.startsWith("application/json"))??!1?await i.json():await i.text();return{ok:i.ok,status:i.status,statusText:i.statusText,data:o}}};function sk(){const t={async request(...e){throw new Error("No method available to perform HTTP request")}};if(typeof window<"u"&&typeof window.fetch=="function")return new Gye(window.fetch.bind(window));if(typeof require<"u")try{const e=require("https");return new Kye(e)}catch{return t}else return t}function mL(){return`ts-sdk-${cn(yl(16))}`}let Xye=class{constructor(e,n){ze(this,"URL");ze(this,"apiKey");ze(this,"deploymentId");ze(this,"callbackUrl");ze(this,"callbackToken");ze(this,"headers");ze(this,"httpClient");if(this.URL=e,typeof n=="string")this.apiKey=n,this.httpClient=sk(),this.deploymentId=mL(),this.callbackToken=void 0,this.callbackUrl=void 0;else{const r=n??{},{apiKey:i,deploymentId:s,httpClient:o,callbackToken:a,callbackUrl:c,headers:l}=r;this.apiKey=i,this.httpClient=o??sk(),this.deploymentId=s??mL(),this.callbackToken=a,this.callbackUrl=c,this.headers=l}}requestHeaders(){const e={"Content-Type":"application/json","XDeployment-ID":this.deploymentId};if(this.apiKey!=null&&this.apiKey!==""&&(e.Authorization=`Bearer ${this.apiKey}`),this.callbackUrl!=null&&this.callbackUrl!==""&&(e["X-CallbackUrl"]=this.callbackUrl),this.callbackToken!=null&&this.callbackToken!==""&&(e["X-CallbackToken"]=this.callbackToken),this.headers!=null)for(const n in this.headers)e[n]=this.headers[n];return e}async broadcast(e){let n;try{n=e.toHexEF()}catch(i){if(i.message==="All inputs must have source transactions when serializing to EF format")n=e.toHex();else throw i}const r={method:"POST",headers:this.requestHeaders(),data:{rawTx:n}};try{const i=await this.httpClient.request(`${this.URL}/v1/tx`,r);if(i.ok){const{txid:s,extraInfo:o,txStatus:a,competingTxs:c}=i.data,l={status:"success",txid:s,message:`${a} ${o}`};return c!=null&&(l.competingTxs=c),l}else{const s=typeof i.status,o={status:"error",code:s==="number"||s==="string"?i.status.toString():"ERR_UNKNOWN",description:"Unknown error"};let a=i.data;if(typeof a=="string")try{a=JSON.parse(i.data)}catch{}return typeof a=="object"&&(a!==null&&(o.more=a),a!=null&&typeof a.txid=="string"&&(o.txid=a.txid),a!=null&&"detail"in a&&typeof a.detail=="string"&&(o.description=a.detail)),o}}catch(i){return{status:"error",code:"500",description:typeof i.message=="string"?i.message:"Internal Server Error"}}}async broadcastMany(e){const n=e.map(i=>{try{return{rawTx:i.toHexEF()}}catch(s){if(s.message==="All inputs must have source transactions when serializing to EF format")return{rawTx:i.toHex()};throw s}}),r={method:"POST",headers:this.requestHeaders(),data:n};try{return(await this.httpClient.request(`${this.URL}/v1/txs`,r)).data}catch(i){const s={status:"error",code:"500",description:typeof i.message=="string"?i.message:"Internal Server Error"};return e.map(()=>s)}}};function Yye(t=!1,e={}){return new Xye(t?"https://arc-test.taal.com":"https://arc.taal.com",e)}let Zye=class{constructor(e="main",n={}){ze(this,"network");ze(this,"apiKey");ze(this,"URL");ze(this,"httpClient");const{apiKey:r,httpClient:i}=n;this.network=e,this.URL=`https://api.whatsonchain.com/v1/bsv/${e}`,this.httpClient=i??sk(),this.apiKey=r??""}async isValidRootForHeight(e,n){const r={method:"GET",headers:this.getHttpHeaders()},i=await this.httpClient.request(`${this.URL}/block/${n}/header`,r);if(i.ok){const{merkleroot:s}=i.data;return s===e}else{if(i.status===404)return!1;throw new Error(`Failed to verify merkleroot for height ${n} because of an error: ${JSON.stringify(i.data)} `)}}async currentHeight(){try{const e={method:"GET",headers:this.getHttpHeaders()},n=await this.httpClient.request(`${this.URL}/block/headers`,e);if(n.ok)return n.data[0].height;throw new Error(`Failed to get current height because of an error: ${JSON.stringify(n.data)} `)}catch(e){throw new Error(`Failed to get current height because of an error: ${e instanceof Error?e.message:String(e)}`)}}getHttpHeaders(){const e={Accept:"application/json"};return typeof this.apiKey=="string"&&this.apiKey.trim()!==""&&(e.Authorization=this.apiKey),e}};function Jye(){return new Zye}let Qye=class xx{constructor(e,n,r=!0){ze(this,"blockHeight");ze(this,"path");this.blockHeight=e,this.path=n;const i=Array(this.path.length).fill(0).map(()=>new Set);this.path.forEach((o,a)=>{if(o.length===0&&a===0)throw new Error(`Empty level at height: ${a}`);const c=new Set;o.forEach(l=>{if(c.has(l.offset))throw new Error(`Duplicate offset: ${l.offset}, at height: ${a}`);if(c.add(l.offset),a===0){if(l.duplicate!==!0)for(let u=1;u<this.path.length;u++)i[u].add(l.offset>>u^1)}else if(r&&!i[a].has(l.offset))throw new Error(`Invalid offset: ${l.offset}, at height: ${a}, with legal offsets: ${Array.from(i[a]).join(", ")}`)})});let s;this.path[0].forEach((o,a)=>{if(a===0&&(s=this.computeRoot(o.hash)),s!==this.computeRoot(o.hash))throw new Error("Mismatched roots")})}static fromHex(e){return xx.fromBinary(dt(e,"hex"))}static fromReader(e,n=!0){const r=e.readVarIntNum(),i=e.readUInt8(),s=Array(i).fill(null).map(()=>[]);let o,a,c;for(let l=0;l<i;l++){for(c=e.readVarIntNum();c>0;){a=e.readVarIntNum(),o=e.readUInt8();const u={offset:a};(o&1)!==0?u.duplicate=!0:((o&2)!==0&&(u.txid=!0),u.hash=cn(e.read(32).reverse())),(!Array.isArray(s[l])||s[l].length===0)&&(s[l]=[]),s[l].push(u),c--}s[l].sort((u,d)=>u.offset-d.offset)}return new xx(r,s,n)}static fromBinary(e){const n=new pi(e);return xx.fromReader(n)}static fromCoinbaseTxidAndHeight(e,n){return new xx(n,[[{offset:0,hash:e,txid:!0}]])}toBinary(){const e=new In;e.writeVarIntNum(this.blockHeight);const n=this.path.length;e.writeUInt8(n);for(let r=0;r<n;r++){const i=Object.keys(this.path[r]).length;e.writeVarIntNum(i);for(const s of this.path[r]){e.writeVarIntNum(s.offset);let o=0;(s==null?void 0:s.duplicate)===!0&&(o|=1),(s==null?void 0:s.txid)!==void 0&&s.txid!==null&&(o|=2),e.writeUInt8(o),(o&1)===0&&e.write(dt(s.hash,"hex").reverse())}}return e.toArray()}toHex(){return cn(this.toBinary())}indexOf(e){const n=this.path[0].find(r=>r.hash===e);if(n==null)throw new Error(`Transaction ID ${e} not found in the Merkle Path`);return n.offset}computeRoot(e){if(typeof e!="string"){const s=this.path[0].find(o=>!!(o!=null&&o.hash));if(s==null)throw new Error("No valid leaf found in the Merkle Path");e=s.hash}if(typeof e!="string")throw new Error("Transaction ID is undefined");const n=this.indexOf(e);if(typeof n!="number")throw new Error(`This proof does not contain the txid: ${e??"undefined"}`);const r=s=>cn(gl(dt(s,"hex").reverse()).reverse());let i=e;if(this.path.length===1&&this.path[0].length===1)return i;for(let s=0;s<this.path.length;s++){this.path[s];const o=n>>s^1,a=this.findOrComputeLeaf(s,o);if(typeof a!="object")throw new Error(`Missing hash for index ${n} at height ${s}`);a.duplicate===!0?i=r((i??"")+(i??"")):o%2!==0?i=r((a.hash??"")+(i??"")):i=r((i??"")+(a.hash??""))}return i}findOrComputeLeaf(e,n){const r=u=>cn(gl(dt(u,"hex").reverse()).reverse());let i=this.path[e].find(u=>u.offset===n);if(i!=null)return i;if(e===0)return;const s=e-1,o=n<<1,a=this.findOrComputeLeaf(s,o);if(a==null||a.hash==null||a.hash==="")return;const c=this.findOrComputeLeaf(s,o+1);if(c==null)return;let l;return c.duplicate===!0?l=r(a.hash+a.hash):l=r((c.hash??"")+(a.hash??"")),i={offset:n,hash:l},i}async verify(e,n){const r=this.computeRoot(e);if(this.indexOf(e)===0){const i=await n.currentHeight();if(this.blockHeight+100<i)return!1}return await n.isValidRootForHeight(r,this.blockHeight)}combine(e){var s,o;if(this.blockHeight!==e.blockHeight)throw new Error("You cannot combine paths which do not have the same block height.");const n=this.computeRoot(),r=e.computeRoot();if(n!==r)throw new Error("You cannot combine paths which do not have the same root.");const i=[];for(let a=0;a<this.path.length;a++){i.push([]);for(let c=0;c<this.path[a].length;c++)i[a].push(this.path[a][c]);for(let c=0;c<e.path[a].length;c++)if(i[a].find(l=>l.offset===e.path[a][c].offset)===void 0)i[a].push(e.path[a][c]);else if(((s=e.path[a][c])==null?void 0:s.txid)!==void 0&&((o=e.path[a][c])==null?void 0:o.txid)!==null){const l=i[a].find(u=>u.offset===e.path[a][c].offset);l!=null&&(l.txid=!0)}}this.path=i,this.trim()}trim(){const e=(o,a)=>{(a.length===0||a.slice(-1)[0]!==o)&&a.push(o)},n=(o,a)=>{for(let c=o.length;c>=0;c--){const l=this.path[a].findIndex(u=>u.offset===o[c]);l>=0&&this.path[a].splice(l,1)}},r=o=>{const a=[];for(const c of o)e(c>>1,a);return a};let i=[],s=[];for(let o=0;o<this.path.length;o++)this.path[o].sort((a,c)=>a.offset-c.offset);for(let o=0;o<this.path[0].length;o++){const a=this.path[0][o];if(a.txid===!0)e(a.offset>>1,i);else{const c=a.offset%2===1,l=this.path[0][o+(c?-1:1)];(l.txid===void 0||l.txid===null||!l.txid)&&e(l.offset,s)}}n(s,0);for(let o=1;o<this.path.length;o++)s=i,i=r(i),n(s,o)}},TE=class em{constructor(e,n){ze(this,"_bumpIndex");ze(this,"_tx");ze(this,"_rawTx");ze(this,"_txid");ze(this,"inputTxids",[]);ze(this,"isValid");typeof e=="string"?this._txid=e:Array.isArray(e)?this._rawTx=e:this._tx=e,this.bumpIndex=n,this.updateInputTxids()}get bumpIndex(){return this._bumpIndex}set bumpIndex(e){this._bumpIndex=e,this.updateInputTxids()}get hasProof(){return this._bumpIndex!==void 0}get isTxidOnly(){return this._txid!==void 0&&this._txid!==null&&this._rawTx==null&&this._tx==null}get txid(){if(this._txid!==void 0&&this._txid!==null&&this._txid!=="")return this._txid;if(this._tx!=null)return this._txid=this._tx.id("hex"),this._txid;if(this._rawTx!=null)return this._txid=cn(gl(this._rawTx)),this._txid;throw new Error("Internal")}get tx(){if(this._tx!=null)return this._tx;if(this._rawTx!=null)return this._tx=yc.fromBinary(this._rawTx),this._tx}get rawTx(){if(this._rawTx!=null)return this._rawTx;if(this._tx!=null)return this._rawTx=this._tx.toBinary(),this._rawTx}static fromTx(e,n){return new em(e,n)}static fromRawTx(e,n){return new em(e,n)}static fromTxid(e,n){return new em(e,n)}updateInputTxids(){if(this.hasProof||this.tx==null)this.inputTxids=[];else{const e={};for(const n of this.tx.inputs)n.sourceTXID!==void 0&&n.sourceTXID!==null&&n.sourceTXID!==""&&(e[n.sourceTXID]=!0);this.inputTxids=Object.keys(e)}}toWriter(e,n){const r=a=>{e.writeUInt8(a)},i=()=>{if(this._txid==null)throw new Error("Transaction ID (_txid) is undefined");e.writeReverse(dt(this._txid,"hex"))},s=()=>{if(this._rawTx!=null)e.write(this._rawTx);else if(this._tx!=null)e.write(this._tx.toBinary());else throw new Error("a valid serialized Transaction is expected")},o=()=>{this.bumpIndex===void 0?r(wd.RAWTX):(r(wd.RAWTX_AND_BUMP_INDEX),e.writeVarIntNum(this.bumpIndex))};n===gy?this.isTxidOnly?(r(wd.TXID_ONLY),i()):this.bumpIndex!==void 0?(r(wd.RAWTX_AND_BUMP_INDEX),e.writeVarIntNum(this.bumpIndex),s()):(r(wd.RAWTX),s()):(s(),o())}static fromReader(e,n){let r,i,s;if(n===gy){const o=e.readUInt8();o===wd.TXID_ONLY?s=em.fromTxid(cn(e.readReverse(32))):(o===wd.RAWTX_AND_BUMP_INDEX&&(i=e.readVarIntNum()),r=yc.fromReader(e),s=em.fromTx(r,i))}else r=yc.fromReader(e),i=e.readUInt8()!==0?e.readVarIntNum():void 0,s=em.fromTx(r,i);return s}};function gL(t){if(t==null)throw new Error("Expected a valid value, but got undefined.");return t}const ok=4022206465,gy=4022206466,yL=16843009;var wd;(function(t){t[t.RAWTX=0]="RAWTX",t[t.RAWTX_AND_BUMP_INDEX=1]="RAWTX_AND_BUMP_INDEX",t[t.TXID_ONLY=2]="TXID_ONLY"})(wd||(wd={}));let eve=class iy{constructor(e=gy){ze(this,"bumps",[]);ze(this,"txs",[]);ze(this,"version",gy);ze(this,"atomicTxid");this.version=e}findTxid(e){return this.txs.find(n=>n.txid===e)}makeTxidOnly(e){const n=this.txs.findIndex(i=>i.txid===e);if(n===-1)return;let r=this.txs[n];return r.isTxidOnly||(this.txs.splice(n,1),r=this.mergeTxidOnly(e)),r}findBump(e){return this.bumps.find(n=>n.path[0].some(r=>r.hash===e))}findTransactionForSigning(e){const n=this.findTxid(e);if(!(n==null||n.tx==null)){for(const r of n.tx.inputs)if(r.sourceTransaction==null){const i=this.findTxid(gL(r.sourceTXID));i!=null&&(r.sourceTransaction=i.tx)}return n.tx}}findAtomicTransaction(e){const n=this.findTxid(e);if(n==null||n.tx==null)return;const r=(i,s)=>{const o=i.findBump(s.id("hex"));if(o!=null)s.merklePath=o;else for(const a of s.inputs){if(a.sourceTransaction==null){const c=i.findTxid(gL(a.sourceTXID));c!=null&&(a.sourceTransaction=c.tx)}if(a.sourceTransaction!=null){const c=i.findBump(a.sourceTransaction.id("hex"));c!=null?a.sourceTransaction.merklePath=c:r(i,a.sourceTransaction)}}};return r(this,n.tx),n.tx}mergeBump(e){let n;for(let i=0;i<this.bumps.length;i++){const s=this.bumps[i];if(s===e)return i;if(s.blockHeight===e.blockHeight){const o=s.computeRoot(),a=e.computeRoot();if(o===a){s.combine(e),n=i;break}}}n===void 0&&(n=this.bumps.length,this.bumps.push(e));const r=this.bumps[n];for(const i of this.txs){const s=i.txid;if(i.bumpIndex==null){for(const o of r.path[0])if(o.hash===s){i.bumpIndex=n,o.txid=!0;break}}}return n}mergeRawTx(e,n){const r=new TE(e,n);return this.removeExistingTxid(r.txid),this.txs.push(r),this.tryToValidateBumpIndex(r),r}mergeTransaction(e){const n=e.id("hex");this.removeExistingTxid(n);let r;e.merklePath!=null&&(r=this.mergeBump(e.merklePath));const i=new TE(e,r);if(this.txs.push(i),this.tryToValidateBumpIndex(i),r=i.bumpIndex,r===void 0)for(const s of e.inputs)s.sourceTransaction!=null&&this.mergeTransaction(s.sourceTransaction);return i}removeExistingTxid(e){const n=this.txs.findIndex(r=>r.txid===e);n>=0&&this.txs.splice(n,1)}mergeTxidOnly(e){let n=this.txs.find(r=>r.txid===e);return n==null&&(n=new TE(e),this.txs.push(n),this.tryToValidateBumpIndex(n)),n}mergeBeefTx(e){let n=this.findTxid(e.txid);if(e.isTxidOnly&&n==null?n=this.mergeTxidOnly(e.txid):e._tx!=null&&(n==null||n.isTxidOnly)?n=this.mergeTransaction(e._tx):e._rawTx!=null&&(n==null||n.isTxidOnly)&&(n=this.mergeRawTx(e._rawTx)),n==null)throw new Error(`Failed to merge BeefTx for txid: ${e.txid}`);return n}mergeBeef(e){const n=Array.isArray(e)?iy.fromBinary(e):e;for(const r of n.bumps)this.mergeBump(r);for(const r of n.txs)this.mergeBeefTx(r)}isValid(e){return this.verifyValid(e).valid}async verify(e,n){const r=this.verifyValid(n);if(!r.valid)return!1;for(const i of Object.keys(r.roots))if(!await e.isValidRootForHeight(r.roots[i],Number(i)))return!1;return!0}verifyValid(e){const n={valid:!1,roots:{}},r=this.sortTxs();if(r.missingInputs.length>0||r.notValid.length>0||r.txidOnly.length>0&&e!==!0||r.withMissingInputs.length>0)return n;const i={};for(const o of this.txs)if(o.isTxidOnly){if(e!==!0)return n;i[o.txid]=!0}const s=(o,a)=>{const c=o.computeRoot(a);return(n.roots[o.blockHeight]===void 0||n.roots[o.blockHeight]==="")&&(n.roots[o.blockHeight]=c),n.roots[o.blockHeight]===c};for(const o of this.bumps)for(const a of o.path[0])if(a.txid===!0&&typeof a.hash=="string"&&a.hash.length>0&&(i[a.hash]=!0,!s(o,a.hash)))return n;for(const o of this.txs)if(o.bumpIndex!==void 0&&this.bumps[o.bumpIndex].path[0].find(c=>c.hash===o.txid)==null)return n;for(const o of this.txs){for(const a of o.inputTxids)if(!i[a])return n;i[o.txid]=!0}return n.valid=!0,n}toWriter(e){e.writeUInt32LE(this.version),e.writeVarIntNum(this.bumps.length);for(const n of this.bumps)e.write(n.toBinary());e.writeVarIntNum(this.txs.length);for(const n of this.txs)n.toWriter(e,this.version)}toBinary(){this.sortTxs();const e=new In;return this.toWriter(e),e.toArray()}toBinaryAtomic(e){this.sortTxs();const n=this.findTxid(e);if(n==null)throw new Error(`${e} does not exist in this Beef`);const r=this.txs[this.txs.length-1]===n?this:this.clone();if(r!==this){const s=this.txs.findIndex(o=>o.txid===e);r.txs.splice(s+1)}const i=new In;return i.writeUInt32LE(yL),i.writeReverse(dt(e,"hex")),r.toWriter(i),i.toArray()}toHex(){return cn(this.toBinary())}static fromReader(e){let n=e.readUInt32LE(),r;if(n===yL&&(r=cn(e.readReverse(32)),n=e.readUInt32LE()),n!==ok&&n!==gy)throw new Error(`Serialized BEEF must start with ${ok} or ${gy} but starts with ${n}`);const i=new iy(n),s=e.readVarIntNum();for(let a=0;a<s;a++){const c=Qye.fromReader(e,!1);i.bumps.push(c)}const o=e.readVarIntNum();for(let a=0;a<o;a++){const c=TE.fromReader(e,n);i.txs.push(c)}return i.atomicTxid=r,i}static fromBinary(e){const n=new pi(e);return iy.fromReader(n)}static fromString(e,n="hex"){const r=dt(e,n),i=new pi(r);return iy.fromReader(i)}tryToValidateBumpIndex(e){if(e.bumpIndex!==void 0)return!0;const n=e.txid;for(let r=0;r<this.bumps.length;r++){const i=this.bumps[r].path[0].findIndex(s=>s.hash===n);if(i>=0)return e.bumpIndex=r,this.bumps[r].path[0][i].txid=!0,!0}return!1}sortTxs(){const e={},n={};let r=[];const i=[],s=[];for(const u of this.txs)n[u.txid]=u,u.isValid=u.hasProof,u.isValid?(e[u.txid]=!0,i.push(u)):u.isTxidOnly&&u.inputTxids.length===0?(e[u.txid]=!0,s.push(u)):r.push(u);const o={},a=[],c=r;r=[];for(const u of c){let d=!1;for(const h of u.inputTxids)n[h]===void 0&&(o[h]=!0,d=!0);d?a.push(u):r.push(u)}for(;r.length>0;){const u=r;r=[];for(const d of u)d.inputTxids.every(h=>e[h])?(e[d.txid]=!0,i.push(d)):r.push(d);if(u.length===r.length)break}const l=r;return this.txs=a.concat(l).concat(s).concat(i),{missingInputs:Object.keys(o),notValid:l.map(u=>u.txid),valid:Object.keys(e),withMissingInputs:a.map(u=>u.txid),txidOnly:s.map(u=>u.txid)}}clone(){const e=new iy;return e.version=this.version,e.bumps=Array.from(this.bumps),e.txs=Array.from(this.txs),e}trimKnownTxids(e){for(let n=0;n<this.txs.length;){const r=this.txs[n];r.isTxidOnly&&e.includes(r.txid)?this.txs.splice(n,1):n++}}getValidTxids(){return this.sortTxs().valid}toLogString(){var r;let e="";e+=`BEEF with ${this.bumps.length} BUMPS and ${this.txs.length} Transactions, isValid ${this.isValid().toString()}
`;let n=-1;for(const i of this.bumps)n++,e+=`  BUMP ${n}
    block: ${i.blockHeight}
    txids: [
${i.path[0].filter(s=>s.txid===!0).map(s=>`      '${s.hash??""}'`).join(`,
`)}
    ]
`;n=-1;for(const i of this.txs)n++,e+=`  TX ${n}
    txid: ${i.txid}
`,i.bumpIndex!==void 0&&(e+=`    bumpIndex: ${i.bumpIndex}
`),i.isTxidOnly?e+=`    txidOnly
`:e+=`    rawTx length=${((r=i.rawTx)==null?void 0:r.length)??0}
`,i.inputTxids.length>0&&(e+=`    inputs: [
${i.inputTxids.map(s=>`      '${s}'`).join(`,
`)}
    ]
`);return e}addComputedLeaves(){const e=n=>cn(gl(dt(n,"hex").reverse()).reverse());for(const n of this.bumps)for(let r=1;r<n.path.length;r++)for(const i of n.path[r-1])if(typeof i.hash=="string"&&(i.offset&1)===0){const s=n.path[r-1].find(a=>a.offset===i.offset+1),o=i.offset>>1;s!==void 0&&typeof s.hash=="string"&&n.path[r].every(a=>a.offset!==o)&&n.path[r].push({offset:o,hash:e(s.hash+i.hash)})}}},yc=class uc{constructor(e=1,n=[],r=[],i=0,s={},o){ze(this,"version");ze(this,"inputs");ze(this,"outputs");ze(this,"lockTime");ze(this,"metadata");ze(this,"merklePath");ze(this,"cachedHash");this.version=e,this.inputs=n,this.outputs=r,this.lockTime=i,this.metadata=s,this.merklePath=o}static addPathOrInputs(e,n,r){if(typeof e.pathIndex=="number"){const i=r[e.pathIndex];if(typeof i!="object")throw new Error("Invalid merkle path index found in BEEF!");e.tx.merklePath=i}else for(const i of e.tx.inputs){if(i.sourceTXID===void 0)throw new Error("Input sourceTXID is undefined");const s=n[i.sourceTXID];if(typeof s!="object")throw new Error(`Reference to unknown TXID in BEEF: ${i.sourceTXID??"undefined"}`);i.sourceTransaction=s.tx,this.addPathOrInputs(s,n,r)}}static fromBEEF(e,n){const{tx:r}=uc.fromAnyBeef(e,n);return r}static fromAtomicBEEF(e){const{tx:n,txid:r,beef:i}=uc.fromAnyBeef(e);if(r!==i.atomicTxid)throw i.atomicTxid?new Error(`Transaction with TXID ${i.atomicTxid} not found in BEEF data.`):new Error("beef must conform to BRC-95 and must contain the subject txid.");return n}static fromAnyBeef(e,n){const r=eve.fromBinary(e);if(r.txs.length<1)throw new Error("beef must include at least one transaction.");const i=n||r.atomicTxid||r.txs.slice(-1)[0].txid,s=r.findAtomicTransaction(i);if(s==null)throw n?new Error(`Transaction with TXID ${i} not found in BEEF data.`):new Error("beef does not contain transaction for atomic txid.");return{tx:s,beef:r,txid:i}}static fromEF(e){const n=new pi(e),r=n.readUInt32LE();if(cn(n.read(6))!=="0000000000ef")throw new Error("Invalid EF marker");const i=n.readVarIntNum(),s=[];for(let l=0;l<i;l++){const u=cn(n.readReverse(32)),d=n.readUInt32LE(),h=n.readVarIntNum(),f=n.read(h),p=Y2.fromBinary(f),g=n.readUInt32LE(),m=n.readUInt64LEBn().toNumber(),y=n.readVarIntNum(),b=n.read(y),x=Py.fromBinary(b),S=new uc(void 0,[],[],void 0);S.outputs=Array(d+1).fill(null),S.outputs[d]={satoshis:m,lockingScript:x},s.push({sourceTransaction:S,sourceTXID:u,sourceOutputIndex:d,unlockingScript:p,sequence:g})}const o=n.readVarIntNum(),a=[];for(let l=0;l<o;l++){const u=n.readUInt64LEBn().toNumber(),d=n.readVarIntNum(),h=n.read(d),f=Py.fromBinary(h);a.push({satoshis:u,lockingScript:f})}const c=n.readUInt32LE();return new uc(r,s,a,c)}static parseScriptOffsets(e){const n=new pi(e),r=[],i=[];n.pos+=4;const s=n.readVarIntNum();for(let a=0;a<s;a++){n.pos+=36;const c=n.readVarIntNum();r.push({vin:a,offset:n.pos,length:c}),n.pos+=c+4}const o=n.readVarIntNum();for(let a=0;a<o;a++){n.pos+=8;const c=n.readVarIntNum();i.push({vout:a,offset:n.pos,length:c}),n.pos+=c}return{inputs:r,outputs:i}}static fromReader(e){const n=e.readUInt32LE(),r=e.readVarIntNum(),i=[];for(let c=0;c<r;c++){const l=cn(e.readReverse(32)),u=e.readUInt32LE(),d=e.readVarIntNum(),h=e.read(d),f=Y2.fromBinary(h),p=e.readUInt32LE();i.push({sourceTXID:l,sourceOutputIndex:u,unlockingScript:f,sequence:p})}const s=e.readVarIntNum(),o=[];for(let c=0;c<s;c++){const l=e.readUInt64LEBn().toNumber(),u=e.readVarIntNum(),d=e.read(u),h=Py.fromBinary(d);o.push({satoshis:l,lockingScript:h})}const a=e.readUInt32LE();return new uc(n,i,o,a)}static fromBinary(e){const n=new pi(e);return uc.fromReader(n)}static fromHex(e){return uc.fromBinary(dt(e,"hex"))}static fromHexEF(e){return uc.fromEF(dt(e,"hex"))}static fromHexBEEF(e,n){return uc.fromBEEF(dt(e,"hex"),n)}addInput(e){if(typeof e.sourceTXID>"u"&&typeof e.sourceTransaction>"u")throw new Error("A reference to an an input transaction is required. If the input transaction itself cannot be referenced, its TXID must still be provided.");typeof e.sequence>"u"&&(e.sequence=4294967295),this.cachedHash=void 0,this.inputs.push(e)}addOutput(e){if(this.cachedHash=void 0,e.change!==!0){if(typeof e.satoshis>"u")throw new Error("either satoshis must be defined or change must be set to true");if(e.satoshis<0)throw new Error("satoshis must be a positive integer or zero")}if(e.lockingScript==null)throw new Error("lockingScript must be defined");this.outputs.push(e)}addP2PKHOutput(e,n){const r=new DW().lock(e);if(typeof n>"u")return this.addOutput({lockingScript:r,change:!0});this.addOutput({lockingScript:r,satoshis:n})}updateMetadata(e){this.metadata={...this.metadata,...e}}async fee(e=new qye(1),n="equal"){if(this.cachedHash=void 0,typeof e=="number"){const s=e;e={computeFee:async()=>s}}const r=await e.computeFee(this),i=this.calculateChange(r);if(i<=0){this.outputs=this.outputs.filter(s=>s.change!==!0);return}this.distributeChange(i,n)}calculateChange(e){let n=0;for(const r of this.inputs){if(typeof r.sourceTransaction!="object")throw new Error("Source transactions are required for all inputs during fee computation");n+=r.sourceTransaction.outputs[r.sourceOutputIndex].satoshis??0}n-=e;for(const r of this.outputs)r.change!==!0&&r.satoshis!==void 0&&(n-=r.satoshis);return n}distributeChange(e,n){let r=0;const i=this.outputs.filter(s=>s.change);if(n==="random"?r=this.distributeRandomChange(e,i):n==="equal"&&(r=this.distributeEqualChange(e,i)),r<e){const s=this.outputs[this.outputs.length-1];s.satoshis!==void 0?s.satoshis+=e-r:s.satoshis=e-r}}distributeRandomChange(e,n){let r=0,i=e;const s=Array(n.length).fill(1);i-=n.length,r+=n.length;for(let o=0;o<n.length-1;o++){const a=this.benfordNumber(0,i);s[o]=s[o]+a,r+=a,i-=a}for(const o of this.outputs)o.change===!0&&(o.satoshis=s.shift());return r}distributeEqualChange(e,n){let r=0;const i=Math.floor(e/n.length);for(const s of n)r+=i,s.satoshis=i;return r}benfordNumber(e,n){const r=Math.floor(Math.random()*9)+1;return Math.floor(e+(n-e)*Math.log10(1+1/r)/Math.log10(10))}getFee(){let e=0;for(const r of this.inputs){if(typeof r.sourceTransaction!="object")throw new Error("Source transactions or sourceSatoshis are required for all inputs to calculate fee");e+=r.sourceTransaction.outputs[r.sourceOutputIndex].satoshis??0}let n=0;for(const r of this.outputs)n+=r.satoshis??0;return e-n}async sign(){this.cachedHash=void 0;for(const n of this.outputs)if(typeof n.satoshis>"u")throw n.change===!0?new Error("There are still change outputs with uncomputed amounts. Use the fee() method to compute the change amounts and transaction fees prior to signing."):new Error("One or more transaction outputs is missing an amount. Ensure all output amounts are provided before signing.");const e=await Promise.all(this.inputs.map(async(n,r)=>{var i,s;return typeof this.inputs[r].unlockingScriptTemplate=="object"?await((s=(i=this.inputs[r])==null?void 0:i.unlockingScriptTemplate)==null?void 0:s.sign(this,r)):await Promise.resolve(void 0)}));for(let n=0,r=this.inputs.length;n<r;n++)typeof this.inputs[n].unlockingScriptTemplate=="object"&&(this.inputs[n].unlockingScript=e[n])}async broadcast(e=Yye()){return await e.broadcast(this)}toBinary(){const e=new In;e.writeUInt32LE(this.version),e.writeVarIntNum(this.inputs.length);for(const n of this.inputs){if(typeof n.sourceTXID>"u")if(n.sourceTransaction!=null)e.write(n.sourceTransaction.hash());else throw new Error("sourceTransaction is undefined");else e.writeReverse(dt(n.sourceTXID,"hex"));if(e.writeUInt32LE(n.sourceOutputIndex),n.unlockingScript==null)throw new Error("unlockingScript is undefined");const r=n.unlockingScript.toBinary();e.writeVarIntNum(r.length),e.write(r),e.writeUInt32LE(n.sequence??0)}e.writeVarIntNum(this.outputs.length);for(const n of this.outputs){e.writeUInt64LE(n.satoshis??0);const r=n.lockingScript.toBinary();e.writeVarIntNum(r.length),e.write(r)}return e.writeUInt32LE(this.lockTime),e.toArray()}toEF(){const e=new In;e.writeUInt32LE(this.version),e.write([0,0,0,0,0,239]),e.writeVarIntNum(this.inputs.length);for(const n of this.inputs){if(typeof n.sourceTransaction>"u")throw new Error("All inputs must have source transactions when serializing to EF format");if(typeof n.sourceTXID>"u"?e.write(n.sourceTransaction.hash()):e.write(dt(n.sourceTXID,"hex").reverse()),e.writeUInt32LE(n.sourceOutputIndex),n.unlockingScript==null)throw new Error("unlockingScript is undefined");const r=n.unlockingScript.toBinary();e.writeVarIntNum(r.length),e.write(r),e.writeUInt32LE(n.sequence??0),e.writeUInt64LE(n.sourceTransaction.outputs[n.sourceOutputIndex].satoshis??0);const i=n.sourceTransaction.outputs[n.sourceOutputIndex].lockingScript.toBinary();e.writeVarIntNum(i.length),e.write(i)}e.writeVarIntNum(this.outputs.length);for(const n of this.outputs){e.writeUInt64LE(n.satoshis??0);const r=n.lockingScript.toBinary();e.writeVarIntNum(r.length),e.write(r)}return e.writeUInt32LE(this.lockTime),e.toArray()}toHexEF(){return cn(this.toEF())}toHex(){return cn(this.toBinary())}toHexBEEF(){return cn(this.toBEEF())}toHexAtomicBEEF(){return cn(this.toAtomicBEEF())}hash(e){let n;return this.cachedHash!=null?n=this.cachedHash:(n=gl(this.toBinary()),this.cachedHash=n),e==="hex"?cn(n):n}id(e){const n=[...this.hash()];return n.reverse(),e==="hex"?cn(n):n}async verify(e=Jye(),n){const r=new Set,i=[this];for(;i.length>0;){const s=i.shift(),o=(s==null?void 0:s.id("hex"))??"";if(o!=null&&o!==""&&r.has(o))continue;if(typeof(s==null?void 0:s.merklePath)=="object"){if(e==="scripts only"){o!=null&&r.add(o);continue}else if(await s.merklePath.verify(o,e)){r.add(o);continue}}if(typeof n<"u"){if(s===void 0)throw new Error("Transaction is undefined");const l=uc.fromEF(s.toEF());if(delete l.outputs[0].satoshis,l.outputs[0].change=!0,await l.fee(n),s.getFee()<l.getFee())throw new Error(`Verification failed because the transaction ${o} has an insufficient fee and has not been mined.`)}let a=0;if(s===void 0)throw new Error("Transaction is undefined");for(let l=0;l<s.inputs.length;l++){const u=s.inputs[l];if(typeof u.sourceTransaction!="object")throw new Error(`Verification failed because the input at index ${l} of transaction ${o} is missing an associated source transaction. This source transaction is required for transaction verification because there is no merkle proof for the transaction spending a UTXO it contains.`);if(typeof u.unlockingScript!="object")throw new Error(`Verification failed because the input at index ${l} of transaction ${o} is missing an associated unlocking script. This script is required for transaction verification because there is no merkle proof for the transaction spending the UTXO.`);const d=u.sourceTransaction.outputs[u.sourceOutputIndex];a+=d.satoshis??0;const h=u.sourceTransaction.id("hex");r.has(h)||i.push(u.sourceTransaction);const f=s.inputs.filter((m,y)=>y!==l);if(typeof u.sourceTXID>"u"&&(u.sourceTXID=h),!new Wye({sourceTXID:u.sourceTXID,sourceOutputIndex:u.sourceOutputIndex,lockingScript:d.lockingScript,sourceSatoshis:d.satoshis??0,transactionVersion:s.version,otherInputs:f,unlockingScript:u.unlockingScript,inputSequence:u.sequence??0,inputIndex:l,outputs:s.outputs,lockTime:s.lockTime}).validate())return!1}let c=0;for(const l of s.outputs){if(typeof l.satoshis!="number")throw new Error("Every output must have a defined amount during transaction verification.");c+=l.satoshis}if(c>a)return!1;r.add(o)}return!0}toBEEF(e){const n=new In;n.writeUInt32LE(ok);const r=[],i=[],s=o=>{const a={tx:o},c=typeof o.merklePath=="object";if(c){let u=!1;for(let d=0;d<r.length;d++){if(r[d]===o.merklePath){a.pathIndex=d,u=!0;break}if(o.merklePath!==null&&o.merklePath!==void 0&&r[d].blockHeight===o.merklePath.blockHeight){const h=r[d].computeRoot(),f=o.merklePath.computeRoot();if(h===f){r[d].combine(o.merklePath),a.pathIndex=d,u=!0;break}}}u||(a.pathIndex=r.length,o.merklePath!==null&&o.merklePath!==void 0&&r.push(o.merklePath))}if(i.some(u=>u.tx.id("hex")===o.id("hex"))||i.unshift(a),!c)for(let u=0;u<o.inputs.length;u++){const d=o.inputs[u];if(typeof d.sourceTransaction=="object")s(d.sourceTransaction);else if(e===!1)throw new Error("A required source transaction is missing!")}};s(this),n.writeVarIntNum(r.length);for(const o of r)n.write(o.toBinary());n.writeVarIntNum(i.length);for(const o of i)n.write(o.tx.toBinary()),typeof o.pathIndex=="number"?(n.writeUInt8(1),n.writeVarIntNum(o.pathIndex)):n.writeUInt8(0);return n.toArray()}toAtomicBEEF(e){const n=new In;n.writeUInt32LE(16843009),n.write(this.hash());const r=this.toBEEF(e);return n.write(r),n.toArray()}};var ak;(function(t){t[t.Silent=0]="Silent",t[t.App=1]="App",t[t.Counterparty=2]="Counterparty"})(ak||(ak={}));let tve=class{constructor(e){ze(this,"rootKey");ze(this,"identityKey");e==="anyone"?this.rootKey=new RT(1):this.rootKey=e,this.identityKey=this.rootKey.toPublicKey().toString()}derivePublicKey(e,n,r,i=!1){return r=this.normalizeCounterparty(r),i?this.rootKey.deriveChild(r,this.computeInvoiceNumber(e,n)).toPublicKey():r.deriveChild(this.rootKey,this.computeInvoiceNumber(e,n))}derivePrivateKey(e,n,r){return r=this.normalizeCounterparty(r),this.rootKey.deriveChild(r,this.computeInvoiceNumber(e,n))}deriveSymmetricKey(e,n,r){var o,a;r==="anyone"&&(r=new RT(1).toPublicKey()),r=this.normalizeCounterparty(r);const i=this.derivePublicKey(e,n,r),s=this.derivePrivateKey(e,n,r);return new mP(((a=(o=s.deriveSharedSecret(i))==null?void 0:o.x)==null?void 0:a.toArray())??[])}revealCounterpartySecret(e){if(e==="self")throw new Error("Counterparty secrets cannot be revealed for counterparty=self.");e=this.normalizeCounterparty(e);const n=this.rootKey.toPublicKey(),r=this.rootKey.deriveChild(n,"test").toHex(),i=this.rootKey.deriveChild(e,"test").toHex();if(r===i)throw new Error("Counterparty secrets cannot be revealed for counterparty=self.");return this.rootKey.deriveSharedSecret(e).encode(!0)}revealSpecificSecret(e,n,r){e=this.normalizeCounterparty(e);const i=this.rootKey.deriveSharedSecret(e),s=dt(this.computeInvoiceNumber(n,r),"utf8");return Pw(i.encode(!0),s)}normalizeCounterparty(e){if(e==null)throw new Error("counterparty must be self, anyone or a public key!");return e==="self"?this.rootKey.toPublicKey():e==="anyone"?new RT(1).toPublicKey():typeof e=="string"?sh.fromString(e):e}computeInvoiceNumber(e,n){const r=e[0];if(!Number.isInteger(r)||r<0||r>2)throw new Error("Protocol security level must be 0, 1, or 2");const i=e[1].toLowerCase().trim();if(n.length>800)throw new Error("Key IDs must be 800 characters or less");if(n.length<1)throw new Error("Key IDs must be 1 character or more");if(i.length>400)if(i.startsWith("specific linkage revelation ")){if(i.length>430)throw new Error("Specific linkage revelation protocol names must be 430 characters or less")}else throw new Error("Protocol names must be 400 characters or less");if(i.length<5)throw new Error("Protocol names must be 5 characters or more");if(i.includes("  "))throw new Error('Protocol names cannot contain multiple consecutive spaces ("  ")');if(!/^[a-z0-9 ]+$/g.test(i))throw new Error("Protocol names can only contain letters, numbers and spaces");if(i.endsWith(" protocol"))throw new Error('No need to end your protocol name with " protocol"');return`${r}-${i}-${n}`}},nve=class{constructor(e){ze(this,"keyDeriver");typeof e.identityKey!="string"&&(e=new tve(e)),this.keyDeriver=e}async getPublicKey(e){if(e.identityKey){if(this.keyDeriver==null)throw new Error("keyDeriver is undefined");return{publicKey:this.keyDeriver.rootKey.toPublicKey().toString()}}else{if(e.protocolID==null||e.keyID==null||e.keyID==="")throw new Error("protocolID and keyID are required if identityKey is false or undefined.");return{publicKey:(this.keyDeriver??(()=>{throw new Error("keyDeriver is undefined")})()).derivePublicKey(e.protocolID,e.keyID,e.counterparty??"self",e.forSelf).toString()}}}async revealCounterpartyKeyLinkage(e){const{publicKey:n}=await this.getPublicKey({identityKey:!0});if(this.keyDeriver==null)throw new Error("keyDeriver is undefined");const r=this.keyDeriver.revealCounterpartySecret(e.counterparty),i=new Vye().generateProof(this.keyDeriver.rootKey,this.keyDeriver.rootKey.toPublicKey(),sh.fromString(e.counterparty),Md.fromDER(r)),s=[...i.R.encode(!0),...i.SPrime.encode(!0),...i.z.toArray()],o=new Date().toISOString(),{ciphertext:a}=await this.encrypt({plaintext:r,protocolID:[2,"counterparty linkage revelation"],keyID:o,counterparty:e.verifier}),{ciphertext:c}=await this.encrypt({plaintext:s,protocolID:[2,"counterparty linkage revelation"],keyID:o,counterparty:e.verifier});return{prover:n,verifier:e.verifier,counterparty:e.counterparty,revelationTime:o,encryptedLinkage:a,encryptedLinkageProof:c}}async revealSpecificKeyLinkage(e){const{publicKey:n}=await this.getPublicKey({identityKey:!0});if(this.keyDeriver==null)throw new Error("keyDeriver is undefined");const r=this.keyDeriver.revealSpecificSecret(e.counterparty,e.protocolID,e.keyID),{ciphertext:i}=await this.encrypt({plaintext:r,protocolID:[2,`specific linkage revelation ${e.protocolID[0]} ${e.protocolID[1]}`],keyID:e.keyID,counterparty:e.verifier}),{ciphertext:s}=await this.encrypt({plaintext:[0],protocolID:[2,`specific linkage revelation ${e.protocolID[0]} ${e.protocolID[1]}`],keyID:e.keyID,counterparty:e.verifier});return{prover:n,verifier:e.verifier,counterparty:e.counterparty,protocolID:e.protocolID,keyID:e.keyID,encryptedLinkage:i,encryptedLinkageProof:s,proofType:0}}async encrypt(e){if(this.keyDeriver==null)throw new Error("keyDeriver is undefined");return{ciphertext:this.keyDeriver.deriveSymmetricKey(e.protocolID,e.keyID,e.counterparty??"self").encrypt(e.plaintext)}}async decrypt(e){if(this.keyDeriver==null)throw new Error("keyDeriver is undefined");return{plaintext:this.keyDeriver.deriveSymmetricKey(e.protocolID,e.keyID,e.counterparty??"self").decrypt(e.ciphertext)}}async createHmac(e){if(this.keyDeriver==null)throw new Error("keyDeriver is undefined");const n=this.keyDeriver.deriveSymmetricKey(e.protocolID,e.keyID,e.counterparty??"self");return{hmac:Pw(n.toArray(),e.data)}}async verifyHmac(e){if(this.keyDeriver==null)throw new Error("keyDeriver is undefined");const n=this.keyDeriver.deriveSymmetricKey(e.protocolID,e.keyID,e.counterparty??"self"),r=Pw(n.toArray(),e.data).toString()===e.hmac.toString();if(!r){const i=new Error("HMAC is not valid");throw i.code="ERR_INVALID_HMAC",i}return{valid:r}}async createSignature(e){if(e.hashToDirectlySign==null&&e.data==null)throw new Error("args.data or args.hashToDirectlySign must be valid");const n=e.hashToDirectlySign??wl(e.data??[]),i=(this.keyDeriver??(()=>{throw new Error("keyDeriver is undefined")})()).derivePrivateKey(e.protocolID,e.keyID,e.counterparty??"anyone");return{signature:kW(new et(n),i,!0).toDER()}}async verifySignature(e){if(e.hashToDirectlyVerify==null&&e.data==null)throw new Error("args.data or args.hashToDirectlyVerify must be valid");const n=e.hashToDirectlyVerify??wl(e.data??[]),i=(this.keyDeriver??(()=>{throw new Error("keyDeriver is undefined")})()).derivePublicKey(e.protocolID,e.keyID,e.counterparty??"self",e.forSelf),s=c_(new et(n),ih.fromDER(e.signature),i);if(!s){const o=new Error("Signature is not valid");throw o.code="ERR_INVALID_SIGNATURE",o}return{valid:s}}};class vL{constructor(){ze(this,"CWI");if(typeof window!="object")throw new Error("The window.CWI substrate requires a global window object.");if(typeof window.CWI!="object")throw new Error("The window.CWI interface does not appear to be bound to the window object.");this.CWI=window.CWI}async createAction(e,n){return await this.CWI.createAction(e,n)}async signAction(e,n){return await this.CWI.signAction(e,n)}async abortAction(e,n){return await this.CWI.abortAction(e,n)}async listActions(e,n){return await this.CWI.listActions(e,n)}async internalizeAction(e,n){return await this.CWI.internalizeAction(e,n)}async listOutputs(e,n){return await this.CWI.listOutputs(e,n)}async relinquishOutput(e,n){return await this.CWI.relinquishOutput(e,n)}async getPublicKey(e,n){return await this.CWI.getPublicKey(e,n)}async revealCounterpartyKeyLinkage(e,n){return await this.CWI.revealCounterpartyKeyLinkage(e,n)}async revealSpecificKeyLinkage(e,n){return await this.CWI.revealSpecificKeyLinkage(e,n)}async encrypt(e,n){return await this.CWI.encrypt(e,n)}async decrypt(e,n){return await this.CWI.decrypt(e,n)}async createHmac(e,n){return await this.CWI.createHmac(e,n)}async verifyHmac(e,n){return await this.CWI.verifyHmac(e,n)}async createSignature(e,n){return await this.CWI.createSignature(e,n)}async verifySignature(e,n){return await this.CWI.verifySignature(e,n)}async acquireCertificate(e,n){return await this.CWI.acquireCertificate(e,n)}async listCertificates(e,n){return await this.CWI.listCertificates(e,n)}async proveCertificate(e,n){return await this.CWI.proveCertificate(e,n)}async relinquishCertificate(e,n){return await this.CWI.relinquishCertificate(e,n)}async discoverByIdentityKey(e,n){return await this.CWI.discoverByIdentityKey(e,n)}async discoverByAttributes(e,n){return await this.CWI.discoverByAttributes(e,n)}async isAuthenticated(e,n){return await this.CWI.isAuthenticated(e,n)}async waitForAuthentication(e,n){return await this.CWI.waitForAuthentication(e,n)}async getHeight(e,n){return await this.CWI.getHeight(e,n)}async getHeaderForHeight(e,n){return await this.CWI.getHeaderForHeight(e,n)}async getNetwork(e,n){return await this.CWI.getNetwork(e,n)}async getVersion(e,n){return await this.CWI.getVersion(e,n)}}let BW=class extends Error{constructor(n,r=1,i){super(n);ze(this,"code");ze(this,"isError",!0);this.code=r,this.name=this.constructor.name,i!=null&&i!==""?this.stack=i:Error.captureStackTrace(this,this.constructor)}};var bL;(function(t){t[t.unknownError=1]="unknownError",t[t.unsupportedAction=2]="unsupportedAction",t[t.invalidHmac=3]="invalidHmac",t[t.invalidSignature=4]="invalidSignature",t[t.reviewActions=5]="reviewActions"})(bL||(bL={}));class xL{constructor(e="*"){ze(this,"domain");if(typeof window!="object")throw new Error("The XDM substrate requires a global window object.");if(typeof window.postMessage!="function")throw new Error("The window object does not seem to support postMessage calls.");this.domain=e}async invoke(e,n){return await new Promise((r,i)=>{const s=To(yl(12)),o=a=>{if(!(a.data.type!=="CWI"||!a.isTrusted||a.data.id!==s||a.data.isInvocation===!0))if(typeof window.removeEventListener=="function"&&window.removeEventListener("message",o),a.data.status==="error"){const c=new BW(a.data.description,a.data.code);i(c)}else r(a.data.result)};window.addEventListener("message",o),window.parent.postMessage({type:"CWI",isInvocation:!0,id:s,call:e,args:n},this.domain)})}async createAction(e){return await this.invoke("createAction",e)}async signAction(e){return await this.invoke("signAction",e)}async abortAction(e){return await this.invoke("abortAction",e)}async listActions(e){return await this.invoke("listActions",e)}async internalizeAction(e){return await this.invoke("internalizeAction",e)}async listOutputs(e){return await this.invoke("listOutputs",e)}async relinquishOutput(e){return await this.invoke("relinquishOutput",e)}async getPublicKey(e){return await this.invoke("getPublicKey",e)}async revealCounterpartyKeyLinkage(e){return await this.invoke("revealCounterpartyKeyLinkage",e)}async revealSpecificKeyLinkage(e){return await this.invoke("revealSpecificKeyLinkage",e)}async encrypt(e){return await this.invoke("encrypt",e)}async decrypt(e){return await this.invoke("decrypt",e)}async createHmac(e){return await this.invoke("createHmac",e)}async verifyHmac(e){return await this.invoke("verifyHmac",e)}async createSignature(e){return await this.invoke("createSignature",e)}async verifySignature(e){return await this.invoke("verifySignature",e)}async acquireCertificate(e){return await this.invoke("acquireCertificate",e)}async listCertificates(e){return await this.invoke("listCertificates",e)}async proveCertificate(e){return await this.invoke("proveCertificate",e)}async relinquishCertificate(e){return await this.invoke("relinquishCertificate",e)}async discoverByIdentityKey(e){return await this.invoke("discoverByIdentityKey",e)}async discoverByAttributes(e){return await this.invoke("discoverByAttributes",e)}async isAuthenticated(e){return await this.invoke("isAuthenticated",e)}async waitForAuthentication(e){return await this.invoke("waitForAuthentication",e)}async getHeight(e){return await this.invoke("getHeight",e)}async getHeaderForHeight(e){return await this.invoke("getHeaderForHeight",e)}async getNetwork(e){return await this.invoke("getNetwork",e)}async getVersion(e){return await this.invoke("getVersion",e)}}let Vx=class FW{constructor(e,n,r,i,s,o,a){ze(this,"type");ze(this,"serialNumber");ze(this,"subject");ze(this,"certifier");ze(this,"revocationOutpoint");ze(this,"fields");ze(this,"signature");this.type=e,this.serialNumber=n,this.subject=r,this.certifier=i,this.revocationOutpoint=s,this.fields=o,this.signature=a}toBinary(e=!0){const n=new In,r=dt(this.type,"base64");n.write(r);const i=dt(this.serialNumber,"base64");n.write(i);const s=dt(this.subject,"hex");n.write(s);const o=dt(this.certifier,"hex");n.write(o);const[a,c]=this.revocationOutpoint.split("."),l=dt(a,"hex");n.write(l),n.writeVarIntNum(Number(c));const u=Object.keys(this.fields).sort();n.writeVarIntNum(u.length);for(const d of u){const h=this.fields[d],f=dt(d,"utf8");n.writeVarIntNum(f.length),n.write(f);const p=dt(h,"utf8");n.writeVarIntNum(p.length),n.write(p)}if(e&&(this.signature??"").length>0){const d=dt(this.signature,"hex");n.write(d)}return n.toArray()}static fromBinary(e){const n=new pi(e),r=n.read(32),i=To(r),s=n.read(32),o=To(s),a=n.read(33),c=cn(a),l=n.read(33),u=cn(l),d=n.read(32),h=cn(d),f=n.readVarIntNum(),p=`${h}.${f}`,g=n.readVarIntNum(),m={};for(let b=0;b<g;b++){const x=n.readVarIntNum(),S=n.read(x),P=gn(S),_=n.readVarIntNum(),I=n.read(_),C=gn(I);m[P]=C}let y;if(!n.eof()){const b=n.read();y=ih.fromDER(b).toString("hex")}return new FW(i,o,c,u,p,m,y)}async verify(){const e=new nve("anyone"),n=this.toBinary(!1),r=this.signature??"",{valid:i}=await e.verifySignature({signature:dt(r,"hex"),data:n,protocolID:[2,"certificate signature"],keyID:`${this.type} ${this.serialNumber}`,counterparty:this.certifier});return i}async sign(e){if(this.signature!=null&&this.signature.length>0)throw new Error(`Certificate has already been signed! Signature present: ${this.signature}`);this.certifier=(await e.getPublicKey({identityKey:!0})).publicKey;const n=this.toBinary(!1),{signature:r}=await e.createSignature({data:n,protocolID:[2,"certificate signature"],keyID:`${this.type} ${this.serialNumber}`});this.signature=cn(r)}static getCertificateFieldEncryptionDetails(e,n){return{protocolID:[2,"certificate field encryption"],keyID:n?`${n} ${e}`:e}}};var lk;(function(t){t[t.createAction=1]="createAction",t[t.signAction=2]="signAction",t[t.abortAction=3]="abortAction",t[t.listActions=4]="listActions",t[t.internalizeAction=5]="internalizeAction",t[t.listOutputs=6]="listOutputs",t[t.relinquishOutput=7]="relinquishOutput",t[t.getPublicKey=8]="getPublicKey",t[t.revealCounterpartyKeyLinkage=9]="revealCounterpartyKeyLinkage",t[t.revealSpecificKeyLinkage=10]="revealSpecificKeyLinkage",t[t.encrypt=11]="encrypt",t[t.decrypt=12]="decrypt",t[t.createHmac=13]="createHmac",t[t.verifyHmac=14]="verifyHmac",t[t.createSignature=15]="createSignature",t[t.verifySignature=16]="verifySignature",t[t.acquireCertificate=17]="acquireCertificate",t[t.listCertificates=18]="listCertificates",t[t.proveCertificate=19]="proveCertificate",t[t.relinquishCertificate=20]="relinquishCertificate",t[t.discoverByIdentityKey=21]="discoverByIdentityKey",t[t.discoverByAttributes=22]="discoverByAttributes",t[t.isAuthenticated=23]="isAuthenticated",t[t.waitForAuthentication=24]="waitForAuthentication",t[t.getHeight=25]="getHeight",t[t.getHeaderForHeight=26]="getHeaderForHeight",t[t.getNetwork=27]="getNetwork",t[t.getVersion=28]="getVersion"})(lk||(lk={}));const UW=lk;let wL=class{constructor(e){ze(this,"wire");this.wire=e}async transmit(e,n="",r=[]){const i=new In;i.writeUInt8(UW[e]);const s=dt(n,"utf8");i.writeUInt8(s.length),i.write(s),r.length>0&&i.write(r);const o=i.toArray(),a=await this.wire.transmitToWallet(o),c=new pi(a),l=c.readUInt8();if(l===0)return c.read();{const u=c.readVarIntNum(),d=c.read(u),h=gn(d),f=c.readVarIntNum(),p=c.read(f),g=gn(p);throw new BW(h,l,g)}}async createAction(e,n){const r=new In,i=dt(e.description,"utf8");if(r.writeVarIntNum(i.length),r.write(i),e.inputBEEF!=null?(r.writeVarIntNum(e.inputBEEF.length),r.write(e.inputBEEF)):r.writeVarIntNum(-1),e.inputs!=null){r.writeVarIntNum(e.inputs.length);for(const f of e.inputs){if(r.write(this.encodeOutpoint(f.outpoint)),f.unlockingScript!=null&&f.unlockingScript!==""){const g=dt(f.unlockingScript,"hex");r.writeVarIntNum(g.length),r.write(g)}else r.writeVarIntNum(-1),r.writeVarIntNum(f.unlockingScriptLength??0);const p=dt(f.inputDescription,"utf8");r.writeVarIntNum(p.length),r.write(p),typeof f.sequenceNumber=="number"?r.writeVarIntNum(f.sequenceNumber):r.writeVarIntNum(-1)}}else r.writeVarIntNum(-1);if(e.outputs!=null){r.writeVarIntNum(e.outputs.length);for(const f of e.outputs){const p=dt(f.lockingScript,"hex");r.writeVarIntNum(p.length),r.write(p),r.writeVarIntNum(f.satoshis);const g=dt(f.outputDescription,"utf8");if(r.writeVarIntNum(g.length),r.write(g),f.basket!=null&&f.basket!==""){const m=dt(f.basket,"utf8");r.writeVarIntNum(m.length),r.write(m)}else r.writeVarIntNum(-1);if(f.customInstructions!=null&&f.customInstructions!==""){const m=dt(f.customInstructions,"utf8");r.writeVarIntNum(m.length),r.write(m)}else r.writeVarIntNum(-1);if(f.tags!=null){r.writeVarIntNum(f.tags.length);for(const m of f.tags){const y=dt(m,"utf8");r.writeVarIntNum(y.length),r.write(y)}}else r.writeVarIntNum(-1)}}else r.writeVarIntNum(-1);if(typeof e.lockTime=="number"?r.writeVarIntNum(e.lockTime):r.writeVarIntNum(-1),typeof e.version=="number"?r.writeVarIntNum(e.version):r.writeVarIntNum(-1),e.labels!=null){r.writeVarIntNum(e.labels.length);for(const f of e.labels){const p=dt(f,"utf8");r.writeVarIntNum(p.length),r.write(p)}}else r.writeVarIntNum(-1);if(e.options!=null){if(r.writeInt8(1),typeof e.options.signAndProcess=="boolean"?r.writeInt8(e.options.signAndProcess?1:0):r.writeInt8(-1),typeof e.options.acceptDelayedBroadcast=="boolean"?r.writeInt8(e.options.acceptDelayedBroadcast?1:0):r.writeInt8(-1),e.options.trustSelf==="known"?r.writeInt8(1):r.writeInt8(-1),e.options.knownTxids!=null){r.writeVarIntNum(e.options.knownTxids.length);for(const f of e.options.knownTxids){const p=dt(f,"hex");r.write(p)}}else r.writeVarIntNum(-1);if(typeof e.options.returnTXIDOnly=="boolean"?r.writeInt8(e.options.returnTXIDOnly?1:0):r.writeInt8(-1),typeof e.options.noSend=="boolean"?r.writeInt8(e.options.noSend?1:0):r.writeInt8(-1),e.options.noSendChange!=null){r.writeVarIntNum(e.options.noSendChange.length);for(const f of e.options.noSendChange)r.write(this.encodeOutpoint(f))}else r.writeVarIntNum(-1);if(e.options.sendWith!=null){r.writeVarIntNum(e.options.sendWith.length);for(const f of e.options.sendWith){const p=dt(f,"hex");r.write(p)}}else r.writeVarIntNum(-1);typeof e.options.randomizeOutputs=="boolean"?r.writeInt8(e.options.randomizeOutputs?1:0):r.writeInt8(-1)}else r.writeInt8(0);const s=await this.transmit("createAction",n,r.toArray()),o=new pi(s),a={};if(o.readInt8()===1){const f=o.read(32);a.txid=cn(f)}if(o.readInt8()===1){const f=o.readVarIntNum();a.tx=o.read(f)}const u=o.readVarIntNum();if(u>=0){a.noSendChange=[];for(let f=0;f<u;f++){const p=this.readOutpoint(o);a.noSendChange.push(p)}}const d=o.readVarIntNum();if(d>=0){a.sendWithResults=[];for(let f=0;f<d;f++){const p=o.read(32),g=cn(p),m=o.readInt8();let y="unproven";m===1?y="unproven":m===2?y="sending":m===3&&(y="failed"),a.sendWithResults.push({txid:g,status:y})}}if(o.readInt8()===1){const f=o.readVarIntNum(),p=o.read(f),g=o.readVarIntNum(),m=o.read(g);a.signableTransaction={tx:p,reference:To(m)}}return a}async signAction(e,n){const r=new In,i=Object.keys(e.spends);r.writeVarIntNum(i.length);for(const h of i){r.writeVarIntNum(Number(h));const f=e.spends[Number(h)],p=dt(f.unlockingScript,"hex");r.writeVarIntNum(p.length),r.write(p),typeof f.sequenceNumber=="number"?r.writeVarIntNum(f.sequenceNumber):r.writeVarIntNum(-1)}const s=dt(e.reference,"base64");if(r.writeVarIntNum(s.length),r.write(s),e.options!=null)if(r.writeInt8(1),typeof e.options.acceptDelayedBroadcast=="boolean"?r.writeInt8(e.options.acceptDelayedBroadcast?1:0):r.writeInt8(-1),typeof e.options.returnTXIDOnly=="boolean"?r.writeInt8(e.options.returnTXIDOnly?1:0):r.writeInt8(-1),typeof e.options.noSend=="boolean"?r.writeInt8(e.options.noSend?1:0):r.writeInt8(-1),e.options.sendWith!=null){r.writeVarIntNum(e.options.sendWith.length);for(const h of e.options.sendWith){const f=dt(h,"hex");r.write(f)}}else r.writeVarIntNum(-1);else r.writeInt8(0);const o=await this.transmit("signAction",n,r.toArray()),a=new pi(o),c={};if(a.readInt8()===1){const h=a.read(32);c.txid=cn(h)}if(a.readInt8()===1){const h=a.readVarIntNum();c.tx=a.read(h)}const d=a.readVarIntNum();if(d>=0){c.sendWithResults=[];for(let h=0;h<d;h++){const f=a.read(32),p=cn(f),g=a.readInt8();let m="unproven";g===1?m="unproven":g===2?m="sending":g===3&&(m="failed"),c.sendWithResults.push({txid:p,status:m})}}return c}async abortAction(e,n){return await this.transmit("abortAction",n,dt(e.reference,"base64")),{aborted:!0}}async listActions(e,n){const r=new In;r.writeVarIntNum(e.labels.length);for(const l of e.labels){const u=dt(l,"utf8");r.writeVarIntNum(u.length),r.write(u)}e.labelQueryMode==="any"?r.writeInt8(1):e.labelQueryMode==="all"?r.writeInt8(2):r.writeInt8(-1);const i=[e.includeLabels,e.includeInputs,e.includeInputSourceLockingScripts,e.includeInputUnlockingScripts,e.includeOutputs,e.includeOutputLockingScripts];for(const l of i)typeof l=="boolean"?r.writeInt8(l?1:0):r.writeInt8(-1);typeof e.limit=="number"?r.writeVarIntNum(e.limit):r.writeVarIntNum(-1),typeof e.offset=="number"?r.writeVarIntNum(e.offset):r.writeVarIntNum(-1),r.writeInt8(typeof e.seekPermission=="boolean"?e.seekPermission?1:0:-1);const s=await this.transmit("listActions",n,r.toArray()),o=new pi(s),a=o.readVarIntNum(),c=[];for(let l=0;l<a;l++){const u=o.read(32),d=cn(u),h=o.readVarIntNum(),f=o.readInt8();let p;switch(f){case 1:p="completed";break;case 2:p="unprocessed";break;case 3:p="sending";break;case 4:p="unproven";break;case 5:p="unsigned";break;case 6:p="nosend";break;case 7:p="nonfinal";break;case 8:p="failed";break;default:throw new Error(`Unknown status code: ${f}`)}const g=o.readInt8()===1,m=o.readVarIntNum(),y=o.read(m),b=gn(y),x={txid:d,satoshis:h,status:p,isOutgoing:g,description:b,version:0,lockTime:0},S=o.readVarIntNum();if(S>=0){x.labels=[];for(let I=0;I<S;I++){const C=o.readVarIntNum(),A=o.read(C);x.labels.push(gn(A))}}x.version=o.readVarIntNum(),x.lockTime=o.readVarIntNum();const P=o.readVarIntNum();if(P>=0){x.inputs=[];for(let I=0;I<P;I++){const C=this.readOutpoint(o),A=o.readVarIntNum(),M=o.readVarIntNum();let k;if(M>=0){const V=o.read(M);k=cn(V)}const O=o.readVarIntNum();let B;if(O>=0){const V=o.read(O);B=cn(V)}const $=o.readVarIntNum(),U=o.read($),q=gn(U),K=o.readVarIntNum();x.inputs.push({sourceOutpoint:C,sourceSatoshis:A,sourceLockingScript:k,unlockingScript:B,inputDescription:q,sequenceNumber:K})}}const _=o.readVarIntNum();if(_>=0){x.outputs=[];for(let I=0;I<_;I++){const C=o.readVarIntNum(),A=o.readVarIntNum(),M=o.readVarIntNum();let k;if(M>=0){const se=o.read(M);k=cn(se)}const O=o.readInt8()===1,B=o.readVarIntNum(),$=o.read(B),U=gn($),q=o.readVarIntNum();let K;if(q>=0){const se=o.read(q);K=gn(se)}const V=o.readVarIntNum(),G=[];if(V>=0)for(let se=0;se<V;se++){const Z=o.readVarIntNum(),ie=o.read(Z);G.push(gn(ie))}const j=o.readVarIntNum();let Q;if(j>=0){const se=o.read(j);Q=gn(se)}x.outputs.push({outputIndex:C,satoshis:A,lockingScript:k,spendable:O,outputDescription:U,basket:K,tags:G,customInstructions:Q})}}c.push(x)}return{totalActions:a,actions:c}}async internalizeAction(e,n){var s,o,a;const r=new In;r.writeVarIntNum(e.tx.length),r.write(e.tx),r.writeVarIntNum(e.outputs.length);for(const c of e.outputs)if(r.writeVarIntNum(c.outputIndex),c.protocol==="wallet payment"){if(c.paymentRemittance==null)throw new Error("Payment remittance is required for wallet payment");r.writeUInt8(1),r.write(dt(c.paymentRemittance.senderIdentityKey,"hex"));const l=dt(c.paymentRemittance.derivationPrefix,"base64");r.writeVarIntNum(l.length),r.write(l);const u=dt(c.paymentRemittance.derivationSuffix,"base64");r.writeVarIntNum(u.length),r.write(u)}else{r.writeUInt8(2);const l=dt((s=c.insertionRemittance)==null?void 0:s.basket,"utf8");if(r.writeVarIntNum(l.length),r.write(l),typeof((o=c.insertionRemittance)==null?void 0:o.customInstructions)=="string"&&c.insertionRemittance.customInstructions!==""){const u=dt(c.insertionRemittance.customInstructions,"utf8");r.writeVarIntNum(u.length),r.write(u)}else r.writeVarIntNum(-1);if(typeof((a=c.insertionRemittance)==null?void 0:a.tags)=="object"){r.writeVarIntNum(c.insertionRemittance.tags.length);for(const u of c.insertionRemittance.tags){const d=dt(u,"utf8");r.writeVarIntNum(d.length),r.write(d)}}else r.writeVarIntNum(0)}if(typeof e.labels=="object"){r.writeVarIntNum(e.labels.length);for(const c of e.labels){const l=dt(c,"utf8");r.writeVarIntNum(l.length),r.write(l)}}else r.writeVarIntNum(-1);const i=dt(e.description);return r.writeVarIntNum(i.length),r.write(i),r.writeInt8(typeof e.seekPermission=="boolean"?e.seekPermission?1:0:-1),await this.transmit("internalizeAction",n,r.toArray()),{accepted:!0}}async listOutputs(e,n){const r=new In,i=dt(e.basket,"utf8");if(r.writeVarIntNum(i.length),r.write(i),typeof e.tags=="object"){r.writeVarIntNum(e.tags.length);for(const d of e.tags){const h=dt(d,"utf8");r.writeVarIntNum(h.length),r.write(h)}}else r.writeVarIntNum(0);e.tagQueryMode==="all"?r.writeInt8(1):e.tagQueryMode==="any"?r.writeInt8(2):r.writeInt8(-1),e.include==="locking scripts"?r.writeInt8(1):e.include==="entire transactions"?r.writeInt8(2):r.writeInt8(-1),typeof e.includeCustomInstructions=="boolean"?r.writeInt8(e.includeCustomInstructions?1:0):r.writeInt8(-1),typeof e.includeTags=="boolean"?r.writeInt8(e.includeTags?1:0):r.writeInt8(-1),typeof e.includeLabels=="boolean"?r.writeInt8(e.includeLabels?1:0):r.writeInt8(-1),typeof e.limit=="number"?r.writeVarIntNum(e.limit):r.writeVarIntNum(-1),typeof e.offset=="number"?r.writeVarIntNum(e.offset):r.writeVarIntNum(-1),r.writeInt8(typeof e.seekPermission=="boolean"?e.seekPermission?1:0:-1);const s=await this.transmit("listOutputs",n,r.toArray()),o=new pi(s),a=o.readVarIntNum(),c=o.readVarIntNum();let l;c>=0&&(l=o.read(c));const u=[];for(let d=0;d<a;d++){const h=this.readOutpoint(o),f=o.readVarIntNum(),p={spendable:!0,outpoint:h,satoshis:f},g=o.readVarIntNum();g>=0&&(p.lockingScript=cn(o.read(g)));const m=o.readVarIntNum();m>=0&&(p.customInstructions=gn(o.read(m)));const y=o.readVarIntNum();if(y!==-1){const x=[];for(let S=0;S<y;S++){const P=o.readVarIntNum();x.push(gn(o.read(P)))}p.tags=x}const b=o.readVarIntNum();if(b!==-1){const x=[];for(let S=0;S<b;S++){const P=o.readVarIntNum();x.push(gn(o.read(P)))}p.labels=x}u.push(p)}return{totalOutputs:a,BEEF:l,outputs:u}}async relinquishOutput(e,n){const r=new In,i=dt(e.basket,"utf8");return r.writeVarIntNum(i.length),r.write(i),r.write(this.encodeOutpoint(e.output)),await this.transmit("relinquishOutput",n,r.toArray()),{relinquished:!0}}encodeOutpoint(e){const n=new In,[r,i]=e.split(".");return n.write(dt(r,"hex")),n.writeVarIntNum(Number(i)),n.toArray()}readOutpoint(e){const n=cn(e.read(32)),r=e.readVarIntNum();return`${n}.${r}`}async getPublicKey(e,n){const r=new In;r.writeUInt8(e.identityKey?1:0),e.identityKey?r.write(this.encodePrivilegedParams(e.privileged,e.privilegedReason)):(r.write(this.encodeKeyRelatedParams(e.protocolID??(e.protocolID=[ak.Silent,"default"]),e.keyID??(e.keyID=""),e.counterparty,e.privileged,e.privilegedReason)),typeof e.forSelf=="boolean"?r.writeInt8(e.forSelf?1:0):r.writeInt8(-1)),r.writeInt8(typeof e.seekPermission=="boolean"?e.seekPermission?1:0:-1);const i=await this.transmit("getPublicKey",n,r.toArray());return{publicKey:cn(i)}}async revealCounterpartyKeyLinkage(e,n){const r=new In;r.write(this.encodePrivilegedParams(e.privileged,e.privilegedReason)),r.write(dt(e.counterparty,"hex")),r.write(dt(e.verifier,"hex"));const i=await this.transmit("revealCounterpartyKeyLinkage",n,r.toArray()),s=new pi(i),o=cn(s.read(33)),a=cn(s.read(33)),c=cn(s.read(33)),l=s.readVarIntNum(),u=gn(s.read(l)),d=s.readVarIntNum(),h=s.read(d),f=s.readVarIntNum(),p=s.read(f);return{prover:o,verifier:a,counterparty:c,revelationTime:u,encryptedLinkage:h,encryptedLinkageProof:p}}async revealSpecificKeyLinkage(e,n){const r=new In;r.write(this.encodeKeyRelatedParams(e.protocolID,e.keyID,e.counterparty,e.privileged,e.privilegedReason)),r.write(dt(e.verifier,"hex"));const i=await this.transmit("revealSpecificKeyLinkage",n,r.toArray()),s=new pi(i),o=cn(s.read(33)),a=cn(s.read(33)),c=cn(s.read(33)),l=s.readUInt8(),u=s.readVarIntNum(),d=gn(s.read(u)),h=s.readVarIntNum(),f=gn(s.read(h)),p=s.readVarIntNum(),g=s.read(p),m=s.readVarIntNum(),y=s.read(m),b=s.readUInt8();return{prover:o,verifier:a,counterparty:c,protocolID:[l,d],keyID:f,encryptedLinkage:g,encryptedLinkageProof:y,proofType:b}}async encrypt(e,n){const r=new In;return r.write(this.encodeKeyRelatedParams(e.protocolID,e.keyID,e.counterparty,e.privileged,e.privilegedReason)),r.writeVarIntNum(e.plaintext.length),r.write(e.plaintext),r.writeInt8(typeof e.seekPermission=="boolean"?e.seekPermission?1:0:-1),{ciphertext:await this.transmit("encrypt",n,r.toArray())}}async decrypt(e,n){const r=new In;return r.write(this.encodeKeyRelatedParams(e.protocolID,e.keyID,e.counterparty,e.privileged,e.privilegedReason)),r.writeVarIntNum(e.ciphertext.length),r.write(e.ciphertext),r.writeInt8(typeof e.seekPermission=="boolean"?e.seekPermission?1:0:-1),{plaintext:await this.transmit("decrypt",n,r.toArray())}}async createHmac(e,n){const r=new In;return r.write(this.encodeKeyRelatedParams(e.protocolID,e.keyID,e.counterparty,e.privileged,e.privilegedReason)),r.writeVarIntNum(e.data.length),r.write(e.data),r.writeInt8(typeof e.seekPermission=="boolean"?e.seekPermission?1:0:-1),{hmac:await this.transmit("createHmac",n,r.toArray())}}async verifyHmac(e,n){const r=new In;return r.write(this.encodeKeyRelatedParams(e.protocolID,e.keyID,e.counterparty,e.privileged,e.privilegedReason)),r.write(e.hmac),r.writeVarIntNum(e.data.length),r.write(e.data),r.writeInt8(typeof e.seekPermission=="boolean"?e.seekPermission?1:0:-1),await this.transmit("verifyHmac",n,r.toArray()),{valid:!0}}async createSignature(e,n){const r=new In;return r.write(this.encodeKeyRelatedParams(e.protocolID,e.keyID,e.counterparty,e.privileged,e.privilegedReason)),typeof e.data=="object"?(r.writeUInt8(1),r.writeVarIntNum(e.data.length),r.write(e.data)):(r.writeUInt8(2),r.write(e.hashToDirectlySign??(e.hashToDirectlySign=[]))),r.writeInt8(typeof e.seekPermission=="boolean"?e.seekPermission?1:0:-1),{signature:await this.transmit("createSignature",n,r.toArray())}}async verifySignature(e,n){const r=new In;return r.write(this.encodeKeyRelatedParams(e.protocolID,e.keyID,e.counterparty,e.privileged,e.privilegedReason)),typeof e.forSelf=="boolean"?r.writeInt8(e.forSelf?1:0):r.writeInt8(-1),r.writeVarIntNum(e.signature.length),r.write(e.signature),typeof e.data=="object"?(r.writeUInt8(1),r.writeVarIntNum(e.data.length),r.write(e.data)):(r.writeUInt8(2),r.write(e.hashToDirectlyVerify??[])),r.writeInt8(typeof e.seekPermission=="boolean"?e.seekPermission?1:0:-1),await this.transmit("verifySignature",n,r.toArray()),{valid:!0}}encodeKeyRelatedParams(e,n,r,i,s){const o=new In;o.writeUInt8(e[0]);const a=dt(e[1],"utf8");o.writeVarIntNum(a.length),o.write(a);const c=dt(n,"utf8");return o.writeVarIntNum(c.length),o.write(c),typeof r!="string"?o.writeUInt8(0):r==="self"?o.writeUInt8(11):r==="anyone"?o.writeUInt8(12):o.write(dt(r,"hex")),o.write(this.encodePrivilegedParams(i,s)),o.toArray()}async acquireCertificate(e,n){var a;const r=new In;r.write(dt(e.type,"base64")),r.write(dt(e.certifier,"hex"));const i=Object.entries(e.fields);r.writeVarIntNum(i.length);for(const[c,l]of i){const u=dt(c,"utf8"),d=dt(l,"utf8");r.writeVarIntNum(u.length),r.write(u),r.writeVarIntNum(d.length),r.write(d)}if(r.write(this.encodePrivilegedParams(e.privileged,e.privilegedReason)),r.writeUInt8(e.acquisitionProtocol==="direct"?1:2),e.acquisitionProtocol==="direct"){r.write(dt(e.serialNumber,"base64")),r.write(this.encodeOutpoint(e.revocationOutpoint??""));const c=dt(e.signature,"hex");r.writeVarIntNum(c.length),r.write(c);const l=e.keyringRevealer!=="certifier"?dt(e.keyringRevealer,"hex"):[11];r.write(l);const u=Object.keys(e.keyringForSubject??{});r.writeVarIntNum(u.length);for(let d=0;d<u.length;d++){const h=dt(u[d],"utf8");r.writeVarIntNum(h.length),r.write(h);const f=dt((a=e.keyringForSubject)==null?void 0:a[u[d]],"base64");r.writeVarIntNum(f.length),r.write(f)}}else{const c=dt(e.certifierUrl,"utf8");r.writeVarIntNum(c.length),r.write(c)}const s=await this.transmit("acquireCertificate",n,r.toArray()),o=Vx.fromBinary(s);return{...o,signature:o.signature}}encodePrivilegedParams(e,n){const r=new In;if(typeof e=="boolean"?r.writeInt8(e?1:0):r.writeInt8(-1),typeof n=="string"){const i=dt(n,"utf8");r.writeInt8(i.length),r.write(i)}else r.writeInt8(-1);return r.toArray()}async listCertificates(e,n){const r=new In;r.writeVarIntNum(e.certifiers.length);for(let c=0;c<e.certifiers.length;c++)r.write(dt(e.certifiers[c],"hex"));r.writeVarIntNum(e.types.length);for(let c=0;c<e.types.length;c++)r.write(dt(e.types[c],"base64"));typeof e.limit=="number"?r.writeVarIntNum(e.limit):r.writeVarIntNum(-1),typeof e.offset=="number"?r.writeVarIntNum(e.offset):r.writeVarIntNum(-1),r.write(this.encodePrivilegedParams(e.privileged,e.privilegedReason));const i=await this.transmit("listCertificates",n,r.toArray()),s=new pi(i),o=s.readVarIntNum(),a=[];for(let c=0;c<o;c++){const l=s.readVarIntNum(),u=s.read(l),d=Vx.fromBinary(u);a.push({...d,signature:d.signature})}return{totalCertificates:o,certificates:a}}async proveCertificate(e,n){const r=new In,i=dt(e.certificate.type,"base64");r.write(i);const s=dt(e.certificate.subject,"hex");r.write(s);const o=dt(e.certificate.serialNumber,"base64");r.write(o);const a=dt(e.certificate.certifier,"hex");r.write(a);const c=this.encodeOutpoint(e.certificate.revocationOutpoint??"");r.write(c);const l=dt(e.certificate.signature,"hex");r.writeVarIntNum(l.length),r.write(l);const u=Object.entries(e.certificate.fields??{});r.writeVarIntNum(u.length);for(const[g,m]of u){const y=dt(g,"utf8"),b=dt(m,"utf8");r.writeVarIntNum(y.length),r.write(y),r.writeVarIntNum(b.length),r.write(b)}r.writeVarIntNum(e.fieldsToReveal.length);for(const g of e.fieldsToReveal){const m=dt(g,"utf8");r.writeVarIntNum(m.length),r.write(m)}r.write(dt(e.verifier,"hex")),r.write(this.encodePrivilegedParams(e.privileged,e.privilegedReason));const d=await this.transmit("proveCertificate",n,r.toArray()),h=new pi(d),f=h.readVarIntNum(),p={};for(let g=0;g<f;g++){const m=h.readVarIntNum(),y=gn(h.read(m)),b=h.readVarIntNum();p[y]=To(h.read(b))}return{keyringForVerifier:p}}async relinquishCertificate(e,n){const r=new In,i=dt(e.type,"base64");r.write(i);const s=dt(e.serialNumber,"base64");r.write(s);const o=dt(e.certifier,"hex");return r.write(o),await this.transmit("relinquishCertificate",n,r.toArray()),{relinquished:!0}}parseDiscoveryResult(e){const n=new pi(e),r=n.readVarIntNum(),i=[];for(let s=0;s<r;s++){const o=n.readVarIntNum(),a=n.read(o),c=Vx.fromBinary(a),l=n.readVarIntNum(),u=gn(n.read(l)),d=n.readVarIntNum(),h=gn(n.read(d)),f=n.readVarIntNum(),p=gn(n.read(f)),g=n.readUInt8(),m={},y=n.readVarIntNum();for(let S=0;S<y;S++){const P=n.readVarIntNum(),_=gn(n.read(P)),I=n.readVarIntNum();m[_]=n.read(I)}const b={},x=n.readVarIntNum();for(let S=0;S<x;S++){const P=n.readVarIntNum(),_=gn(n.read(P)),I=n.readVarIntNum();b[_]=gn(n.read(I))}i.push({...c,signature:c.signature,certifierInfo:{iconUrl:h,name:u,description:p,trust:g},publiclyRevealedKeyring:m,decryptedFields:b})}return{totalCertificates:r,certificates:i}}async discoverByIdentityKey(e,n){const r=new In;r.write(dt(e.identityKey,"hex")),typeof e.limit=="number"?r.writeVarIntNum(e.limit):r.writeVarIntNum(-1),typeof e.offset=="number"?r.writeVarIntNum(e.offset):r.writeVarIntNum(-1),r.writeInt8(typeof e.seekPermission=="boolean"?e.seekPermission?1:0:-1);const i=await this.transmit("discoverByIdentityKey",n,r.toArray());return this.parseDiscoveryResult(i)}async discoverByAttributes(e,n){const r=new In,i=Object.keys(e.attributes);r.writeVarIntNum(i.length);for(let o=0;o<i.length;o++)r.writeVarIntNum(i[o].length),r.write(dt(i[o],"utf8")),r.writeVarIntNum(e.attributes[i[o]].length),r.write(dt(e.attributes[i[o]],"utf8"));typeof e.limit=="number"?r.writeVarIntNum(e.limit):r.writeVarIntNum(-1),typeof e.offset=="number"?r.writeVarIntNum(e.offset):r.writeVarIntNum(-1),r.writeInt8(typeof e.seekPermission=="boolean"?e.seekPermission?1:0:-1);const s=await this.transmit("discoverByAttributes",n,r.toArray());return this.parseDiscoveryResult(s)}async isAuthenticated(e,n){return{authenticated:(await this.transmit("isAuthenticated",n))[0]===1}}async waitForAuthentication(e,n){return await this.transmit("waitForAuthentication",n),{authenticated:!0}}async getHeight(e,n){const r=await this.transmit("getHeight",n);return{height:new pi(r).readVarIntNum()}}async getHeaderForHeight(e,n){const r=new In;r.writeVarIntNum(e.height);const i=await this.transmit("getHeaderForHeight",n,r.toArray());return{header:cn(i)}}async getNetwork(e,n){return{network:(await this.transmit("getNetwork",n))[0]===0?"mainnet":"testnet"}}async getVersion(e,n){const r=await this.transmit("getVersion",n);return{version:gn(r)}}},_L=class{constructor(e,n="http://localhost:3301",r=fetch){ze(this,"baseUrl");ze(this,"httpClient");ze(this,"originator");this.baseUrl=n,this.httpClient=r,this.originator=e}async transmitToWallet(e){const n=new pi(e),r=n.readUInt8(),i=UW[r];if(i===void 0||i==="")throw new Error(`Invalid call code: ${r}`);const s=n.readUInt8();let o;if(s>0){const u=n.read(s);o=gn(u)}const a=n.read(),l=await(await fetch(`${this.baseUrl}/${i}`,{method:"POST",headers:{"Content-Type":"application/octet-stream",Origin:o??""},body:new Uint8Array(a)})).arrayBuffer();return Array.from(new Uint8Array(l))}},rve=class extends Error{constructor(n,r,i,s,o){super("Undelayed createAction or signAction results require review.");ze(this,"reviewActionResults");ze(this,"sendWithResults");ze(this,"txid");ze(this,"tx");ze(this,"noSendChange");ze(this,"code");ze(this,"isError",!0);this.reviewActionResults=n,this.sendWithResults=r,this.txid=i,this.tx=s,this.noSendChange=o,this.code=5,this.name=this.constructor.name}},SL=class{constructor(e,n="http://localhost:3321",r=fetch){ze(this,"baseUrl");ze(this,"httpClient");ze(this,"originator");ze(this,"api");this.baseUrl=n,this.originator=e,this.httpClient=r,this.api=async(i,s)=>{const o=await await r(`${this.baseUrl}/${i}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Originator:this.originator??""},body:JSON.stringify(s)}),a=await o.json();if(!o.ok){if(o.status===400&&a.isError&&a.code===5)throw new rve(a.reviewActionResults,a.sendWithResults,a.txid,a.tx,a.noSendChange);{const c={call:i,args:s,message:a.message??`HTTP Client error ${o.status}`};throw new Error(JSON.stringify(c))}}return a}}async createAction(e){return await this.api("createAction",e)}async signAction(e){return await this.api("signAction",e)}async abortAction(e){return await this.api("abortAction",e)}async listActions(e){return await this.api("listActions",e)}async internalizeAction(e){return await this.api("internalizeAction",e)}async listOutputs(e){return await this.api("listOutputs",e)}async relinquishOutput(e){return await this.api("relinquishOutput",e)}async getPublicKey(e){return await this.api("getPublicKey",e)}async revealCounterpartyKeyLinkage(e){return await this.api("revealCounterpartyKeyLinkage",e)}async revealSpecificKeyLinkage(e){return await this.api("revealSpecificKeyLinkage",e)}async encrypt(e){return await this.api("encrypt",e)}async decrypt(e){return await this.api("decrypt",e)}async createHmac(e){return await this.api("createHmac",e)}async verifyHmac(e){return await this.api("verifyHmac",e)}async createSignature(e){return await this.api("createSignature",e)}async verifySignature(e){return await this.api("verifySignature",e)}async acquireCertificate(e){return await this.api("acquireCertificate",e)}async listCertificates(e){return await this.api("listCertificates",e)}async proveCertificate(e){return await this.api("proveCertificate",e)}async relinquishCertificate(e){return await this.api("relinquishCertificate",e)}async discoverByIdentityKey(e){return await this.api("discoverByIdentityKey",e)}async discoverByAttributes(e){return await this.api("discoverByAttributes",e)}async isAuthenticated(e){return await this.api("isAuthenticated",e)}async waitForAuthentication(e){return await this.api("waitForAuthentication",e)}async getHeight(e){return await this.api("getHeight",e)}async getHeaderForHeight(e){return await this.api("getHeaderForHeight",e)}async getNetwork(e){return await this.api("getNetwork",e)}async getVersion(e){return await this.api("getVersion",e)}};const ive=200;let gP=class{constructor(e="auto",n){ze(this,"substrate");ze(this,"originator");e==="Cicada"&&(e=new wL(new _L(n))),e==="window.CWI"&&(e=new vL),e==="XDM"&&(e=new xL),e==="json-api"&&(e=new SL(n)),this.substrate=e,this.originator=n}async connectToSubstrate(){if(typeof this.substrate=="object")return;let e;const n=async r=>{let i;if(typeof r=="number"?i=await Promise.race([e.getVersion({}),new Promise((s,o)=>setTimeout(()=>o(new Error("Timed out.")),r))]):i=await e.getVersion({}),typeof i!="object"||typeof i.version!="string")throw new Error("Failed to use substrate.")};try{e=new vL,await n(),this.substrate=e}catch{try{e=new xL,await n(ive),this.substrate=e}catch{try{e=new wL(new _L(this.originator)),await n(),this.substrate=e}catch{try{e=new SL(this.originator),await n(),this.substrate=e}catch{throw new Error("No wallet available over any communication substrate. Install a BSV wallet today!")}}}}}async createAction(e){return await this.connectToSubstrate(),await this.substrate.createAction(e,this.originator)}async signAction(e){return await this.connectToSubstrate(),await this.substrate.signAction(e,this.originator)}async abortAction(e){return await this.connectToSubstrate(),await this.substrate.abortAction(e,this.originator)}async listActions(e){return await this.connectToSubstrate(),await this.substrate.listActions(e,this.originator)}async internalizeAction(e){return await this.connectToSubstrate(),await this.substrate.internalizeAction(e,this.originator)}async listOutputs(e){return await this.connectToSubstrate(),await this.substrate.listOutputs(e,this.originator)}async relinquishOutput(e){return await this.connectToSubstrate(),await this.substrate.relinquishOutput(e,this.originator)}async getPublicKey(e){return await this.connectToSubstrate(),await this.substrate.getPublicKey(e,this.originator)}async revealCounterpartyKeyLinkage(e){return await this.connectToSubstrate(),await this.substrate.revealCounterpartyKeyLinkage(e,this.originator)}async revealSpecificKeyLinkage(e){return await this.connectToSubstrate(),await this.substrate.revealSpecificKeyLinkage(e,this.originator)}async encrypt(e){return await this.connectToSubstrate(),await this.substrate.encrypt(e,this.originator)}async decrypt(e){return await this.substrate.decrypt(e,this.originator)}async createHmac(e){return await this.connectToSubstrate(),await this.substrate.createHmac(e,this.originator)}async verifyHmac(e){return await this.connectToSubstrate(),await this.substrate.verifyHmac(e,this.originator)}async createSignature(e){return await this.connectToSubstrate(),await this.substrate.createSignature(e,this.originator)}async verifySignature(e){return await this.connectToSubstrate(),await this.substrate.verifySignature(e,this.originator)}async acquireCertificate(e){return await this.connectToSubstrate(),await this.substrate.acquireCertificate(e,this.originator)}async listCertificates(e){return await this.connectToSubstrate(),await this.substrate.listCertificates(e,this.originator)}async proveCertificate(e){return await this.connectToSubstrate(),await this.substrate.proveCertificate(e,this.originator)}async relinquishCertificate(e){return await this.connectToSubstrate(),await this.substrate.relinquishCertificate(e,this.originator)}async discoverByIdentityKey(e){return await this.connectToSubstrate(),await this.substrate.discoverByIdentityKey(e,this.originator)}async discoverByAttributes(e){return await this.connectToSubstrate(),await this.substrate.discoverByAttributes(e,this.originator)}async isAuthenticated(e={}){return await this.connectToSubstrate(),await this.substrate.isAuthenticated(e,this.originator)}async waitForAuthentication(e={}){return await this.connectToSubstrate(),await this.substrate.waitForAuthentication(e,this.originator)}async getHeight(e={}){return await this.connectToSubstrate(),await this.substrate.getHeight(e,this.originator)}async getHeaderForHeight(e){return await this.connectToSubstrate(),await this.substrate.getHeaderForHeight(e,this.originator)}async getNetwork(e={}){return await this.connectToSubstrate(),await this.substrate.getNetwork(e,this.originator)}async getVersion(e={}){return await this.connectToSubstrate(),await this.substrate.getVersion(e,this.originator)}},$W=class extends Vx{constructor(n,r,i,s,o,a,c,l,u){super(n,r,i,s,o,a,l);ze(this,"keyring");ze(this,"decryptedFields");this.keyring=c,this.decryptedFields=u}async decryptFields(n,r,i){if(this.keyring==null||Object.keys(this.keyring).length===0)throw new Error("A keyring is required to decrypt certificate fields for the verifier.");try{const s={};for(const o in this.keyring){const{plaintext:a}=await n.decrypt({ciphertext:dt(this.keyring[o],"base64"),...Vx.getCertificateFieldEncryptionDetails(o,this.serialNumber),counterparty:this.subject,privileged:r,privilegedReason:i}),c=new mP(a).decrypt(dt(this.fields[o],"base64"));s[o]=gn(c)}return s}catch(s){throw new Error(`Failed to decrypt selectively revealed certificate fields using keyring: ${String(s instanceof Error?s.message:s)}`)}}},zW=class{constructor(){ze(this,"sessionNonceToSession");ze(this,"identityKeyToNonces");this.sessionNonceToSession=new Map,this.identityKeyToNonces=new Map}addSession(e){if(typeof e.sessionNonce!="string")throw new Error("Invalid session: sessionNonce is required to add a session.");if(this.sessionNonceToSession.set(e.sessionNonce,e),typeof e.peerIdentityKey=="string"){let n=this.identityKeyToNonces.get(e.peerIdentityKey);n==null&&(n=new Set,this.identityKeyToNonces.set(e.peerIdentityKey,n)),n.add(e.sessionNonce)}}updateSession(e){this.removeSession(e),this.addSession(e)}getSession(e){const n=this.sessionNonceToSession.get(e);if(n!=null)return n;const r=this.identityKeyToNonces.get(e);if(r==null||r.size===0)return;let i;for(const s of r){const o=this.sessionNonceToSession.get(s);o!=null&&(i==null||(o.lastUpdate??0)>(i.lastUpdate??0))&&(i=o)}return i}removeSession(e){if(typeof e.sessionNonce=="string"&&this.sessionNonceToSession.delete(e.sessionNonce),typeof e.peerIdentityKey=="string"){const n=this.identityKeyToNonces.get(e.peerIdentityKey);n!=null&&(n.delete(e.sessionNonce??""),n.size===0&&this.identityKeyToNonces.delete(e.peerIdentityKey))}}hasSession(e){if(this.sessionNonceToSession.has(e))return!0;const r=this.identityKeyToNonces.get(e);return r!=null&&r.size>0}};async function IE(t,e,n="self"){const r=dt(t,"base64"),i=r.slice(0,16),s=r.slice(16),{valid:o}=await e.verifyHmac({data:i,hmac:s,protocolID:[2,"server hmac"],keyID:gn(i),counterparty:n});return o}async function ck(t,e="self"){const n=yl(16),{hmac:r}=await t.createHmac({protocolID:[2,"server hmac"],keyID:gn(n),data:n,counterparty:e}),i=[...n,...r];return To(i)}const kT=async(t,e,n)=>{const r=await t.listCertificates({certifiers:e.certifiers,types:Object.keys(e.types)});return await Promise.all(r.certificates.map(async i=>{const{keyringForVerifier:s}=await t.proveCertificate({certificate:i,fieldsToReveal:e.types[i.type],verifier:n});return new $W(i.type,i.serialNumber,i.subject,i.certifier,i.revocationOutpoint,i.fields,s,i.signature)}))},EL=async(t,e,n)=>{if(e.certificates==null||e.certificates.length===0)throw new Error("No certificates were provided in the AuthMessage.");await Promise.all(e.certificates.map(async r=>{if(r.subject!==e.identityKey)throw new Error(`The subject of one of your certificates ("${r.subject}") is not the same as the request sender ("${e.identityKey}").`);const i=new $W(r.type,r.serialNumber,r.subject,r.certifier,r.revocationOutpoint,r.fields,r.keyring,r.signature);if(!await i.verify())throw new Error(`The signature for the certificate with serial number ${i.serialNumber} is invalid!`);if(n!=null){const{certifiers:o,types:a}=n;if(!o.includes(i.certifier))throw new Error(`Certificate with serial number ${i.serialNumber} has an unrequested certifier: ${i.certifier}`);if(a[i.type]==null)throw new Error(`Certificate with type ${i.type} was not requested`)}await i.decryptFields(t)}))},yp="0.1";let TL=class{constructor(e,n,r,i,s){ze(this,"sessionManager");ze(this,"transport");ze(this,"wallet");ze(this,"certificatesToRequest");ze(this,"onGeneralMessageReceivedCallbacks",new Map);ze(this,"onCertificatesReceivedCallbacks",new Map);ze(this,"onCertificateRequestReceivedCallbacks",new Map);ze(this,"onInitialResponseReceivedCallbacks",new Map);ze(this,"callbackIdCounter",0);ze(this,"autoPersistLastSession",!0);ze(this,"lastInteractedWithPeer");this.wallet=e,this.transport=n,this.certificatesToRequest=r??{certifiers:[],types:{}},this.transport.onData(this.handleIncomingMessage.bind(this)).catch(o=>{throw o}),this.sessionManager=i??new zW,s===!1?this.autoPersistLastSession=!1:this.autoPersistLastSession=!0}async toPeer(e,n,r){this.autoPersistLastSession&&typeof this.lastInteractedWithPeer=="string"&&typeof n!="string"&&(n=this.lastInteractedWithPeer);const i=await this.getAuthenticatedSession(n,r),s=To(yl(32)),{signature:o}=await this.wallet.createSignature({data:e,protocolID:[2,"auth message signature"],keyID:`${s} ${i.peerNonce??""}`,counterparty:i.peerIdentityKey}),a={version:yp,messageType:"general",identityKey:(await this.wallet.getPublicKey({identityKey:!0})).publicKey,nonce:s,yourNonce:i.peerNonce,payload:e,signature:o};i.lastUpdate=Date.now(),this.sessionManager.updateSession(i);try{await this.transport.send(a)}catch(c){const l=new Error(`Failed to send message to peer ${i.peerIdentityKey??"unknown"}: ${String(c.message)}`);throw l.stack=c.stack,l}}async requestCertificates(e,n,r=1e4){this.autoPersistLastSession&&typeof this.lastInteractedWithPeer=="string"&&typeof n!="string"&&(n=this.lastInteractedWithPeer);const i=await this.getAuthenticatedSession(n,r),s=To(yl(32)),{signature:o}=await this.wallet.createSignature({data:dt(JSON.stringify(e),"utf8"),protocolID:[2,"auth message signature"],keyID:`${s} ${i.peerNonce??""}`,counterparty:i.peerIdentityKey}),a={version:yp,messageType:"certificateRequest",identityKey:(await this.wallet.getPublicKey({identityKey:!0})).publicKey,nonce:s,initialNonce:i.sessionNonce,yourNonce:i.peerNonce,requestedCertificates:e,signature:o};i.lastUpdate=Date.now(),this.sessionManager.updateSession(i);try{await this.transport.send(a)}catch(c){throw new Error(`Failed to send certificate request message to peer ${i.peerIdentityKey??"unknown"}: ${String(c.message)}`)}}async getAuthenticatedSession(e,n){if(this.transport===void 0)throw new Error("Peer transport is not connected!");let r;if(typeof e=="string"&&(r=this.sessionManager.getSession(e)),r==null||!r.isAuthenticated){const i=await this.initiateHandshake(e,n);if(r=this.sessionManager.getSession(i),r==null||!r.isAuthenticated)throw new Error("Unable to establish mutual authentication with peer!")}return r}listenForGeneralMessages(e){const n=this.callbackIdCounter++;return this.onGeneralMessageReceivedCallbacks.set(n,e),n}stopListeningForGeneralMessages(e){this.onGeneralMessageReceivedCallbacks.delete(e)}listenForCertificatesReceived(e){const n=this.callbackIdCounter++;return this.onCertificatesReceivedCallbacks.set(n,e),n}stopListeningForCertificatesReceived(e){this.onCertificatesReceivedCallbacks.delete(e)}listenForCertificatesRequested(e){const n=this.callbackIdCounter++;return this.onCertificateRequestReceivedCallbacks.set(n,e),n}stopListeningForCertificatesRequested(e){this.onCertificateRequestReceivedCallbacks.delete(e)}async initiateHandshake(e,n=1e4){const r=await ck(this.wallet),i=Date.now();this.sessionManager.addSession({isAuthenticated:!1,sessionNonce:r,peerIdentityKey:e,lastUpdate:i});const s={version:yp,messageType:"initialRequest",identityKey:(await this.wallet.getPublicKey({identityKey:!0})).publicKey,initialNonce:r,requestedCertificates:this.certificatesToRequest};return await this.transport.send(s),await this.waitForInitialResponse(r,n)}async waitForInitialResponse(e,n=1e4){return await new Promise((r,i)=>{const s=this.listenForInitialResponse(e,a=>{clearTimeout(o),this.stopListeningForInitialResponses(s),r(a)}),o=setTimeout(()=>{this.stopListeningForInitialResponses(s),i(new Error("Initial response timed out."))},n)})}listenForInitialResponse(e,n){const r=this.callbackIdCounter++;return this.onInitialResponseReceivedCallbacks.set(r,{callback:n,sessionNonce:e}),r}stopListeningForInitialResponses(e){this.onInitialResponseReceivedCallbacks.delete(e)}async handleIncomingMessage(e){if(typeof e.version!="string"||e.version!==yp)throw new Error(`Invalid or unsupported message auth version! Received: ${e.version}, expected: ${yp}`);switch(e.messageType){case"initialRequest":await this.processInitialRequest(e);break;case"initialResponse":await this.processInitialResponse(e);break;case"certificateRequest":await this.processCertificateRequest(e);break;case"certificateResponse":await this.processCertificateResponse(e);break;case"general":await this.processGeneralMessage(e);break;default:throw new Error(`Unknown message type of ${String(e.messageType)} from ${String(e.identityKey)}`)}}async processInitialRequest(e){if(typeof e.identityKey!="string"||typeof e.initialNonce!="string"||e.initialNonce==="")throw new Error("Missing required fields in initialRequest message.");const n=await ck(this.wallet),r=Date.now();this.sessionManager.addSession({isAuthenticated:!0,sessionNonce:n,peerNonce:e.initialNonce,peerIdentityKey:e.identityKey,lastUpdate:r});let i;e.requestedCertificates!=null&&Array.isArray(e.requestedCertificates.certifiers)&&e.requestedCertificates.certifiers.length>0&&(this.onCertificateRequestReceivedCallbacks.size>0?this.onCertificateRequestReceivedCallbacks.forEach(a=>{a(e.identityKey,e.requestedCertificates)}):i=await kT(this.wallet,e.requestedCertificates,e.identityKey));const{signature:s}=await this.wallet.createSignature({data:dt(e.initialNonce+n,"base64"),protocolID:[2,"auth message signature"],keyID:`${e.initialNonce} ${n}`,counterparty:e.identityKey}),o={version:yp,messageType:"initialResponse",identityKey:(await this.wallet.getPublicKey({identityKey:!0})).publicKey,initialNonce:n,yourNonce:e.initialNonce,certificates:i,requestedCertificates:this.certificatesToRequest,signature:s};this.lastInteractedWithPeer===void 0&&(this.lastInteractedWithPeer=e.identityKey),await this.transport.send(o)}async processInitialResponse(e){var o,a,c;if(!await IE(e.yourNonce,this.wallet))throw new Error(`Initial response nonce verification failed from peer: ${e.identityKey}`);const r=this.sessionManager.getSession(e.yourNonce);if(r==null)throw new Error(`Peer session not found for peer: ${e.identityKey}`);const i=dt((r.sessionNonce??"")+(e.initialNonce??""),"base64"),{valid:s}=await this.wallet.verifySignature({data:i,signature:e.signature,protocolID:[2,"auth message signature"],keyID:`${r.sessionNonce??""} ${e.initialNonce??""}`,counterparty:e.identityKey});if(!s)throw new Error(`Unable to verify initial response signature for peer: ${e.identityKey}`);if(r.peerNonce=e.initialNonce,r.peerIdentityKey=e.identityKey,r.isAuthenticated=!0,r.lastUpdate=Date.now(),this.sessionManager.updateSession(r),((a=(o=this.certificatesToRequest)==null?void 0:o.certifiers)==null?void 0:a.length)>0&&((c=e.certificates)==null?void 0:c.length)>0&&(await EL(this.wallet,e,this.certificatesToRequest),this.onCertificatesReceivedCallbacks.forEach(l=>l(e.identityKey,e.certificates))),this.lastInteractedWithPeer=e.identityKey,this.onInitialResponseReceivedCallbacks.forEach(l=>{l.sessionNonce===r.sessionNonce&&l.callback(r.sessionNonce)}),e.requestedCertificates!=null&&Array.isArray(e.requestedCertificates.certifiers)&&e.requestedCertificates.certifiers.length>0)if(this.onCertificateRequestReceivedCallbacks.size>0)this.onCertificateRequestReceivedCallbacks.forEach(l=>{l(e.identityKey,e.requestedCertificates)});else{const l=await kT(this.wallet,e.requestedCertificates,e.identityKey);await this.sendCertificateResponse(e.identityKey,l)}}async processCertificateRequest(e){if(!await IE(e.yourNonce,this.wallet))throw new Error(`Unable to verify nonce for certificate request message from: ${e.identityKey}`);const r=this.sessionManager.getSession(e.yourNonce);if(r==null)throw new Error(`Session not found for nonce: ${e.yourNonce}`);const{valid:i}=await this.wallet.verifySignature({data:dt(JSON.stringify(e.requestedCertificates),"utf8"),signature:e.signature,protocolID:[2,"auth message signature"],keyID:`${e.nonce??""} ${r.sessionNonce??""}`,counterparty:r.peerIdentityKey});if(!i)throw new Error(`Invalid signature in certificate request message from ${r.peerIdentityKey}`);if(r.lastUpdate=Date.now(),this.sessionManager.updateSession(r),e.requestedCertificates!=null&&Array.isArray(e.requestedCertificates.certifiers)&&e.requestedCertificates.certifiers.length>0)if(this.onCertificateRequestReceivedCallbacks.size>0)this.onCertificateRequestReceivedCallbacks.forEach(s=>{s(e.identityKey,e.requestedCertificates)});else{const s=await kT(this.wallet,e.requestedCertificates,e.identityKey);await this.sendCertificateResponse(e.identityKey,s)}}async sendCertificateResponse(e,n){const r=await this.getAuthenticatedSession(e),i=To(yl(32)),{signature:s}=await this.wallet.createSignature({data:dt(JSON.stringify(n),"utf8"),protocolID:[2,"auth message signature"],keyID:`${i} ${r.peerNonce??""}`,counterparty:r.peerIdentityKey}),o={version:yp,messageType:"certificateResponse",identityKey:(await this.wallet.getPublicKey({identityKey:!0})).publicKey,nonce:i,initialNonce:r.sessionNonce,yourNonce:r.peerNonce,certificates:n,signature:s};r.lastUpdate=Date.now(),this.sessionManager.updateSession(r);try{await this.transport.send(o)}catch(a){const c=a instanceof Error?a.message:String(a);throw new Error(`Failed to send certificate response message to peer ${r.peerIdentityKey??"unknown"}: ${c}`)}}async processCertificateResponse(e){if(!await IE(e.yourNonce,this.wallet))throw new Error(`Unable to verify nonce for certificate response from: ${e.identityKey}`);const r=this.sessionManager.getSession(e.yourNonce);if(r==null)throw new Error(`Session not found for nonce: ${e.yourNonce}`);const{valid:i}=await this.wallet.verifySignature({data:dt(JSON.stringify(e.certificates),"utf8"),signature:e.signature,protocolID:[2,"auth message signature"],keyID:`${e.nonce??""} ${r.sessionNonce??""}`,counterparty:e.identityKey});if(!i)throw new Error(`Unable to verify certificate response signature for peer: ${e.identityKey}`);await EL(this.wallet,e,e.requestedCertificates),this.onCertificatesReceivedCallbacks.forEach(s=>{s(e.identityKey,e.certificates??[])}),r.lastUpdate=Date.now(),this.sessionManager.updateSession(r)}async processGeneralMessage(e){if(!await IE(e.yourNonce,this.wallet))throw new Error(`Unable to verify nonce for general message from: ${e.identityKey}`);const r=this.sessionManager.getSession(e.yourNonce);if(r==null)throw new Error(`Session not found for nonce: ${e.yourNonce}`);const{valid:i}=await this.wallet.verifySignature({data:e.payload,signature:e.signature,protocolID:[2,"auth message signature"],keyID:`${e.nonce??""} ${r.sessionNonce??""}`,counterparty:r.peerIdentityKey});if(!i)throw new Error(`Invalid signature in generalMessage from ${r.peerIdentityKey}`);r.lastUpdate=Date.now(),this.sessionManager.updateSession(r),this.lastInteractedWithPeer=e.identityKey,this.onGeneralMessageReceivedCallbacks.forEach(s=>{s(e.identityKey,e.payload??[])})}};const sve=typeof window<"u"?fetch.bind(window):fetch;let IL=class{constructor(e,n=sve){ze(this,"onDataCallback");ze(this,"fetchClient");ze(this,"baseUrl");this.fetchClient=n,this.baseUrl=e}async send(e){if(!this.onDataCallback)throw new Error("Listen before you start speaking. God gave you two ears and one mouth for a reason.");if(e.messageType!=="general")return new Promise(async(n,r)=>{try{const i=this.fetchClient(`${this.baseUrl}/.well-known/auth`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});e.messageType!=="initialRequest"&&n();const s=await i;if(s.ok&&this.onDataCallback){const o=await s.json();this.onDataCallback(o)}else throw new Error("HTTP server failed to authenticate");e.messageType==="initialRequest"&&n()}catch(i){r(i);return}});{const n=this.deserializeRequestPayload(e.payload),r=`${this.baseUrl}${n.urlPostfix}`;let i=n;if(typeof n.headers!="object"&&(i.headers={}),i.headers["x-bsv-auth-version"]=e.version,i.headers["x-bsv-auth-identity-key"]=e.identityKey,i.headers["x-bsv-auth-nonce"]=e.nonce,i.headers["x-bsv-auth-your-nonce"]=e.yourNonce,i.headers["x-bsv-auth-signature"]=cn(e.signature),i.headers["x-bsv-auth-request-id"]=n.requestId,i.body){const u=i.headers;if(!u["content-type"])throw new Error("Content-Type header is required for requests with a body.");const d=u["content-type"];d.includes("application/json")||d.includes("application/x-www-form-urlencoded")||d.includes("text/plain")?i.body=gn(i.body):i.body=new Uint8Array(i.body)}const s=await this.fetchClient(r,{method:i.method,headers:i.headers,body:i.body});if(s.status===500&&!s.headers.get("x-bsv-auth-request-id")){const u=await s.json();throw new Error(`HTTP ${s.status} - ${JSON.stringify(u)}`)}const o=await s.arrayBuffer(),a=new In;a.write(dt(s.headers.get("x-bsv-auth-request-id"),"base64")),a.writeVarIntNum(s.status);const c=[];s.headers.forEach((u,d)=>{const h=d.toLowerCase();(h.startsWith("x-bsv-")||h==="authorization")&&!h.startsWith("x-bsv-auth")&&c.push([h,u])}),c.sort(([u],[d])=>u.localeCompare(d)),a.writeVarIntNum(c.length);for(let u=0;u<c.length;u++){const d=dt(c[u][0],"utf8");a.writeVarIntNum(d.length),a.write(d);const h=dt(c[u][1],"utf8");a.writeVarIntNum(h.length),a.write(h)}if(o){const u=Array.from(new Uint8Array(o));a.writeVarIntNum(u.length),a.write(u)}else a.writeVarIntNum(-1);const l={version:s.headers.get("x-bsv-auth-version"),messageType:s.headers.get("x-bsv-auth-message-type")==="certificateRequest"?"certificateRequest":"general",identityKey:s.headers.get("x-bsv-auth-identity-key"),nonce:s.headers.get("x-bsv-auth-nonce"),yourNonce:s.headers.get("x-bsv-auth-your-nonce"),requestedCertificates:JSON.parse(s.headers.get("x-bsv-auth-requested-certificates")),payload:a.toArray(),signature:dt(s.headers.get("x-bsv-auth-signature"),"hex")};if(!l.version)throw new Error("HTTP server failed to authenticate");this.onDataCallback(l)}}async onData(e){this.onDataCallback=n=>{e(n)}}deserializeRequestPayload(e){const n=new pi(e),r=To(n.read(32)),i=n.readVarIntNum();let s="GET";i>0&&(s=gn(n.read(i)));const o=n.readVarIntNum();let a="";o>0&&(a=gn(n.read(o)));const c=n.readVarIntNum();let l="";c>0&&(l=gn(n.read(c)));const u={},d=n.readVarIntNum();if(d>0)for(let p=0;p<d;p++){const g=n.readVarIntNum(),m=n.read(g),y=gn(m),b=n.readVarIntNum(),x=n.read(b),S=gn(x);u[y]=S}let h;const f=n.readVarIntNum();return f>0&&(h=n.read(f)),{urlPostfix:a+l,method:s,headers:u,body:h,requestId:r}}};const PL="1.0";let yP=class{constructor(e,n,r){ze(this,"sessionManager");ze(this,"wallet");ze(this,"callbacks",{});ze(this,"certificatesReceived",[]);ze(this,"requestedCertificates");ze(this,"peers",{});this.wallet=e,this.requestedCertificates=n,this.sessionManager=r||new zW}async fetch(e,n={}){if(typeof n.retryCounter=="number"){if(n.retryCounter<=0)throw new Error("Request failed after maximum number of retries.");n.retryCounter--}const r=await new Promise(async(i,s)=>{try{const{method:o="GET",headers:a={},body:c}=n,l=new URL(e),u=l.origin;let d;if(typeof this.peers[u]>"u"){const m=new IL(u);d={peer:new TL(this.wallet,m,this.requestedCertificates,this.sessionManager),pendingCertificateRequests:[]},this.peers[u]=d,this.peers[u].peer.listenForCertificatesReceived((y,b)=>{this.certificatesReceived.push(...b)}),this.peers[u].peer.listenForCertificatesRequested(async(y,b)=>{try{this.peers[u].pendingCertificateRequests.push(!0);const x=await kT(this.wallet,b,y);await this.peers[u].peer.sendCertificateResponse(y,x)}finally{await new Promise(x=>setTimeout(x,500)),this.peers[u].pendingCertificateRequests.shift()}})}else{if(this.peers[u].supportsMutualAuth===!1){try{const m=await this.handleFetchAndValidate(e,n,this.peers[u]);i(m)}catch(m){s(m)}return}d=this.peers[u]}const h=yl(32),f=To(h),p=await this.serializeRequest(o,a,c,l,h);this.callbacks[f]={resolve:i,reject:s};const g=d.peer.listenForGeneralMessages((m,y)=>{const b=new pi(y);if(To(b.read(32))!==f)return;d.peer.stopListeningForGeneralMessages(g),this.peers[u].identityKey=m,this.peers[u].supportsMutualAuth=!0;const S=b.readVarIntNum(),P={},_=b.readVarIntNum();if(_>0)for(let M=0;M<_;M++){const k=b.readVarIntNum(),O=b.read(k),B=gn(O),$=b.readVarIntNum(),U=b.read($),q=gn(U);P[B]=q}P["x-bsv-auth-identity-key"]=m;let I;const C=b.readVarIntNum();C>0&&(I=b.read(C));const A=new Response(I?new Uint8Array(I):null,{status:S,statusText:`${S}`,headers:new Headers(P)});this.callbacks[f].resolve(A),delete this.callbacks[f]});d.pendingCertificateRequests.length>0&&await new Promise(m=>{setInterval(()=>{d.pendingCertificateRequests.length===0&&m()},100)}),await d.peer.toPeer(p.toArray(),d.identityKey).catch(async m=>{if(m.message.includes("Session not found for nonce")){delete this.peers[u],n.retryCounter??(n.retryCounter=3);const y=await this.fetch(e,n);i(y);return}if(m.message.includes("HTTP server failed to authenticate"))try{const y=await this.handleFetchAndValidate(e,n,d);i(y);return}catch(y){s(y)}else s(m)})}catch(o){s(o)}});return r.status===402?await this.handlePaymentAndRetry(e,n,r):r}async sendCertificateRequest(e,n){const i=new URL(e).origin;let s;if(typeof this.peers[i]<"u")s={peer:this.peers[i].peer};else{const o=new IL(i);s={peer:new TL(this.wallet,o,this.requestedCertificates,this.sessionManager)},this.peers[i]=s}return await new Promise(async(o,a)=>{const c=s.peer.listenForCertificatesReceived((l,u)=>{s.peer.stopListeningForCertificatesReceived(c),this.certificatesReceived.push(...u),o(u)});try{await s.peer.requestCertificates(n,s.identityKey)}catch(l){s.peer.stopListeningForCertificatesReceived(c),a(l)}})}consumeReceivedCertificates(){return this.certificatesReceived.splice(0)}async serializeRequest(e,n,r,i,s){const o=new In;if(o.write(s),o.writeVarIntNum(e.length),o.write(dt(e)),i.pathname.length>0){const l=dt(i.pathname);o.writeVarIntNum(l.length),o.write(l)}else o.writeVarIntNum(-1);if(i.search.length>0){const l=dt(i.search);o.writeVarIntNum(l.length),o.write(l)}else o.writeVarIntNum(-1);const a=[];for(let[l,u]of Object.entries(n))if(l=l.toLowerCase(),l.startsWith("x-bsv-")||l==="authorization"){if(l.startsWith("x-bsv-auth"))throw new Error("No BSV auth headers allowed here!");a.push([l,u])}else if(l.startsWith("content-type"))u=u.split(";")[0].trim(),a.push([l,u]);else throw new Error("Unsupported header in the simplified fetch implementation. Only content-type, authorization, and x-bsv-* headers are supported.");a.sort(([l],[u])=>l.localeCompare(u)),o.writeVarIntNum(a.length);for(let l=0;l<a.length;l++){const u=dt(a[l][0],"utf8");o.writeVarIntNum(u.length),o.write(u);const d=dt(a[l][1],"utf8");o.writeVarIntNum(d.length),o.write(d)}if(["POST","PUT","PATCH","DELETE"].includes(e.toUpperCase())&&r===void 0){const l=a.find(([u])=>u==="content-type");l&&l[1].includes("application/json")?r="{}":r=""}if(r){const l=await this.normalizeBodyToNumberArray(r);o.writeVarIntNum(l.length),o.write(l)}else o.writeVarIntNum(-1);return o}async handleFetchAndValidate(e,n,r){const i=await fetch(e,n);if(i.headers.forEach(s=>{if(s.toLocaleLowerCase().startsWith("x-bsv"))throw new Error("The server is trying to claim it has been authenticated when it has not!")}),i.ok)return r.supportsMutualAuth=!1,i;throw new Error(`Request failed with status: ${i.status}`)}async handlePaymentAndRetry(e,n={},r){const i=r.headers.get("x-bsv-payment-version");if(!i||i!==PL)throw new Error(`Unsupported x-bsv-payment-version response header. Client version: ${PL}, Server version: ${i}`);const s=r.headers.get("x-bsv-payment-satoshis-required");if(!s)throw new Error("Missing x-bsv-payment-satoshis-required response header.");const o=parseInt(s);if(isNaN(o)||o<=0)throw new Error("Invalid x-bsv-payment-satoshis-required response header value.");const a=r.headers.get("x-bsv-auth-identity-key");if(!a)throw new Error("Missing x-bsv-auth-identity-key response header.");const c=r.headers.get("x-bsv-payment-derivation-prefix");if(typeof c!="string"||c.length<1)throw new Error("Missing x-bsv-payment-derivation-prefix response header.");const l=await ck(this.wallet),{publicKey:u}=await this.wallet.getPublicKey({protocolID:[2,"3241645161d8"],keyID:`${c} ${l}`,counterparty:a}),d=new DW().lock(sh.fromString(u).toAddress()).toHex(),{tx:h}=await this.wallet.createAction({description:`Payment for request to ${new URL(e).origin}`,outputs:[{satoshis:o,lockingScript:d,customInstructions:JSON.stringify({derivationPrefix:c,derivationSuffix:l,payee:a}),outputDescription:"HTTP request payment"}],options:{randomizeOutputs:!1}});return n.headers=n.headers||{},n.headers["x-bsv-payment"]=JSON.stringify({derivationPrefix:c,derivationSuffix:l,transaction:To(h)}),n.retryCounter??(n.retryCounter=3),this.fetch(e,n)}async normalizeBodyToNumberArray(e){if(e==null)return[];if(typeof e=="object")return dt(JSON.stringify(e,"utf8"));if(Array.isArray(e)&&e.every(n=>typeof n=="number"))return e;if(typeof e=="string")return dt(e,"utf8");if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)){const n=e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer);return Array.from(n)}if(e instanceof Blob){const n=await e.arrayBuffer();return Array.from(new Uint8Array(n))}if(e instanceof FormData){const n=[];e.forEach((i,s)=>{n.push([s,i.toString()])});const r=new URLSearchParams(n).toString();return dt(r,"utf8")}if(e instanceof URLSearchParams)return dt(e.toString(),"utf8");throw e instanceof ReadableStream?new Error("ReadableStream cannot be directly converted to number[]."):new Error("Unsupported body type in this SimplifiedFetch implementation.")}},HW=class{constructor(e){ze(this,"pushDrop");this.pushDrop=new Zy(e)}static decode(e){const n=Zy.decode(e);if(n.fields.length<4)throw new Error("Invalid SHIP/SLAP advertisement!");const r=gn(n.fields[0]);if(r!=="SHIP"&&r!=="SLAP")throw new Error("Invalid protocol type!");const i=cn(n.fields[1]),s=gn(n.fields[2]),o=gn(n.fields[3]);return{protocol:r,identityKey:i,domain:s,topicOrService:o}}async lock(e,n,r){const{publicKey:i}=await this.pushDrop.wallet.getPublicKey({identityKey:!0});return await this.pushDrop.lock([dt(e,"utf8"),dt(i,"hex"),dt(n,"utf8"),dt(r,"utf8")],[2,e==="SHIP"?"Service Host Interconnect":"Service Lookup Availability"],"1","self")}unlock(e){return this.pushDrop.unlock([2,e==="SHIP"?"Service Host Interconnect":"Service Lookup Availability"],"1","self")}};const ove=["https://users.bapp.dev"],ave=["https://testnet-users.bapp.dev"],lve=5e3;class cve{constructor(e=fetch,n=!1){ze(this,"fetchClient");ze(this,"allowHTTP");this.fetchClient=e,this.allowHTTP=n}async lookup(e,n,r=5e3){if(!e.startsWith("https:")&&!this.allowHTTP)throw new Error('HTTPS facilitator can only use URLs that start with "https:"');const i=new Promise((a,c)=>setTimeout(()=>c(new Error("Request timed out")),r)),s=fetch(`${e}/lookup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:n.service,query:n.query})}),o=await Promise.race([s,i]);if(o.ok)return await o.json();throw new Error("Failed to facilitate lookup")}}let mv=class{constructor(e={}){ze(this,"facilitator");ze(this,"slapTrackers");ze(this,"hostOverrides");ze(this,"additionalHosts");ze(this,"networkPreset");this.networkPreset=e.networkPreset??"mainnet",this.facilitator=e.facilitator??new cve(void 0,this.networkPreset==="local"),this.slapTrackers=e.slapTrackers??(this.networkPreset==="mainnet"?ove:ave),this.hostOverrides=e.hostOverrides??{},this.additionalHosts=e.additionalHosts??{}}async query(e,n){var a;let r=[];if(e.service==="ls_slap"?r=this.networkPreset==="local"?["http://localhost:8080"]:this.slapTrackers:this.hostOverrides[e.service]!=null?r=this.hostOverrides[e.service]:this.networkPreset==="local"?r=["http://localhost:8080"]:r=await this.findCompetentHosts(e.service),((a=this.additionalHosts[e.service])==null?void 0:a.length)>0&&(r=[...r,...this.additionalHosts[e.service]]),r.length<1)throw new Error(`No competent ${this.networkPreset} hosts found by the SLAP trackers for lookup service: ${e.service}`);const s=(await Promise.allSettled(r.map(async c=>await this.facilitator.lookup(c,e,n)))).filter(c=>c.status==="fulfilled").map(c=>c.value);if(s.length===0)throw new Error("No successful responses from any hosts");if(s[0].type==="freeform")return s[0];const o=new Map;for(const c of s)if(c.type==="output-list")try{for(const l of c.outputs)try{const u=String(yc.fromBEEF(l.beef).id("hex"));if(u!==""){const d=`${String(u)}.${String(l.outputIndex)}`;o.set(d,l)}else console.warn("Invalid transaction ID:",u)}catch{continue}}catch{}return{type:"output-list",outputs:Array.from(o.values())}}async findCompetentHosts(e){const n={service:"ls_slap",query:{service:e}},r=await Promise.allSettled(this.slapTrackers.map(async s=>await this.facilitator.lookup(s,n,lve))),i=new Set;for(const s of r)if(s.status==="fulfilled"){const o=s.value;if(o.type!=="output-list")continue;for(const a of o.outputs)try{const l=yc.fromBEEF(a.beef).outputs[a.outputIndex].lockingScript,u=HW.decode(l);if(u.topicOrService!==e||u.protocol!=="SLAP")continue;i.add(u.domain)}catch{continue}}else continue;return[...i]}};const uve=5e3;class dve{constructor(e=fetch,n=!1){ze(this,"httpClient");ze(this,"allowHTTP");this.httpClient=e,this.allowHTTP=n}async send(e,n){if(console.log(e),!e.startsWith("https:")&&!this.allowHTTP)throw new Error('HTTPS facilitator can only use URLs that start with "https:"');const r=await fetch(`${e}/submit`,{method:"POST",headers:{"Content-Type":"application/octet-stream","X-Topics":JSON.stringify(n.topics)},body:new Uint8Array(n.beef)});if(r.ok)return await r.json();throw new Error("Failed to facilitate broadcast")}}class fve{constructor(e,n={}){ze(this,"topics");ze(this,"facilitator");ze(this,"resolver");ze(this,"requireAcknowledgmentFromAllHostsForTopics");ze(this,"requireAcknowledgmentFromAnyHostForTopics");ze(this,"requireAcknowledgmentFromSpecificHostsForTopics");ze(this,"networkPreset");if(e.length===0)throw new Error("At least one topic is required for broadcast.");if(e.some(r=>!r.startsWith("tm_")))throw new Error('Every topic must start with "tm_".');this.topics=e,this.networkPreset=n.networkPreset??"mainnet",this.facilitator=n.facilitator??new dve(void 0,this.networkPreset==="local"),this.resolver=n.resolver??new mv({networkPreset:this.networkPreset}),this.requireAcknowledgmentFromAllHostsForTopics=n.requireAcknowledgmentFromAllHostsForTopics??[],this.requireAcknowledgmentFromAnyHostForTopics=n.requireAcknowledgmentFromAnyHostForTopics??"all",this.requireAcknowledgmentFromSpecificHostsForTopics=n.requireAcknowledgmentFromSpecificHostsForTopics??{}}async broadcast(e){console.log(e);let n;try{n=e.toBEEF()}catch{throw new Error("Transactions sent via SHIP to Overlay Services must be serializable to BEEF format.")}const r=await this.findInterestedHosts();if(console.log(r),Object.keys(r).length===0)return{status:"error",code:"ERR_NO_HOSTS_INTERESTED",description:`No ${this.networkPreset} hosts are interested in receiving this transaction.`};const i=Object.entries(r).map(async([h,f])=>{try{const p=await this.facilitator.send(h,{beef:n,topics:[...f]});if(p==null||Object.keys(p).length===0)throw new Error("Steak has no topics.");return{host:h,success:!0,steak:p}}catch(p){return console.error(p),{host:h,success:!1,error:p}}}),o=(await Promise.all(i)).filter(h=>h.success);if(o.length===0)return{status:"error",code:"ERR_ALL_HOSTS_REJECTED",description:`All ${this.networkPreset} topical hosts have rejected the transaction.`};const a={};for(const h of o){const f=h.host,p=h.steak,g=new Set;for(const[m,y]of Object.entries(p)){const b=y.outputsToAdmit,x=y.coinsToRetain,S=y.coinsRemoved;((b==null?void 0:b.length)>0||(x==null?void 0:x.length)>0||(S==null?void 0:S.length)>0)&&g.add(m)}a[f]=g}let c,l;if(this.requireAcknowledgmentFromAllHostsForTopics==="all"?(c=this.topics,l="all"):this.requireAcknowledgmentFromAllHostsForTopics==="any"?(c=this.topics,l="any"):Array.isArray(this.requireAcknowledgmentFromAllHostsForTopics)?(c=this.requireAcknowledgmentFromAllHostsForTopics,l="all"):(c=this.topics,l="all"),c.length>0&&!this.checkAcknowledgmentFromAllHosts(a,c,l))return{status:"error",code:"ERR_REQUIRE_ACK_FROM_ALL_HOSTS_FAILED",description:"Not all hosts acknowledged the required topics."};let u,d;return this.requireAcknowledgmentFromAnyHostForTopics==="all"?(u=this.topics,d="all"):this.requireAcknowledgmentFromAnyHostForTopics==="any"?(u=this.topics,d="any"):Array.isArray(this.requireAcknowledgmentFromAnyHostForTopics)?(u=this.requireAcknowledgmentFromAnyHostForTopics,d="all"):(u=[],d="all"),u.length>0&&!this.checkAcknowledgmentFromAnyHost(a,u,d)?{status:"error",code:"ERR_REQUIRE_ACK_FROM_ANY_HOST_FAILED",description:"No host acknowledged the required topics."}:Object.keys(this.requireAcknowledgmentFromSpecificHostsForTopics).length>0&&!this.checkAcknowledgmentFromSpecificHosts(a,this.requireAcknowledgmentFromSpecificHostsForTopics)?{status:"error",code:"ERR_REQUIRE_ACK_FROM_SPECIFIC_HOSTS_FAILED",description:"Specific hosts did not acknowledge the required topics."}:{status:"success",txid:e.id("hex"),message:`Sent to ${o.length} Overlay Services ${o.length===1?"host":"hosts"}.`}}checkAcknowledgmentFromAllHosts(e,n,r){for(const i of Object.values(e))if(r==="all"){for(const s of n)if(!i.has(s))return!1}else if(r==="any"){let s=!1;for(const o of n)if(i.has(o)){s=!0;break}if(!s)return!1}return!0}checkAcknowledgmentFromAnyHost(e,n,r){if(r==="all"){for(const i of Object.values(e)){let s=!0;for(const o of n)if(!i.has(o)){s=!1;break}if(s)return!0}return!1}else{for(const i of Object.values(e))for(const s of n)if(i.has(s))return!0;return!1}}checkAcknowledgmentFromSpecificHosts(e,n){for(const[r,i]of Object.entries(n)){const s=e[r];if(s==null)return!1;let o,a;if(i==="all"||i==="any")a=i,o=this.topics;else if(Array.isArray(i))o=i,a="all";else continue;if(a==="all"){for(const c of o)if(!s.has(c))return!1}else if(a==="any"){let c=!1;for(const l of o)if(s.has(l)){c=!0;break}if(!c)return!1}}return!0}async findInterestedHosts(){if(this.networkPreset==="local"){const r=new Set;for(let i=0;i<this.topics.length;i++)r.add(this.topics[i]);return{"http://localhost:8080":r}}const e={},n=await this.resolver.query({service:"ls_ship",query:{topics:this.topics}},uve);if(n.type!=="output-list")throw new Error("SHIP answer is not an output list.");for(const r of n.outputs)try{const s=yc.fromBEEF(r.beef).outputs[r.outputIndex].lockingScript,o=HW.decode(s);if(!this.topics.includes(o.topicOrService)||o.protocol!=="SHIP")continue;e[o.domain]===void 0&&(e[o.domain]=new Set),e[o.domain].add(o.topicOrService)}catch{continue}return e}}const hve=t=>(t.toLowerCase().startsWith("uhrp:")&&(t=t.slice(5)),t.startsWith("//")&&(t=t.slice(2)),t),pve=t=>{if(t.length!==32)throw new Error("Hash length must be 32 bytes (sha256)");return AO(t,dt("ce00","hex"))},mve=t=>{const e=wl(t);return pve(e)},VW=t=>{t=hve(t);const{data:e,prefix:n}=RO(t,void 0,2);if(e.length!==32)throw new Error("Invalid length!");if(cn(n)!=="ce00")throw new Error("Bad prefix");return e},NO=t=>{try{return VW(t),!0}catch{return!1}};let gve=class{constructor(e){ze(this,"authFetch");ze(this,"baseURL");this.baseURL=e.storageURL,this.authFetch=new yP(e.wallet)}async getUploadInfo(e,n){const r=`${this.baseURL}/upload`,i={fileSize:e,retentionPeriod:n},s=await this.authFetch.fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!s.ok)throw new Error(`Upload info request failed: HTTP ${s.status}`);const o=await s.json();if(o.status==="error")throw new Error("Upload route returned an error.");return{uploadURL:o.uploadURL,requiredHeaders:o.requiredHeaders,amount:o.amount}}async uploadFile(e,n,r){const i=Uint8Array.from(n.data),s=await fetch(e,{method:"PUT",body:i,headers:{"Content-Type":n.type,...r}});if(!s.ok)throw new Error(`File upload failed: HTTP ${s.status}`);return{published:!0,uhrpURL:await mve(n.data)}}async publishFile(e){const{file:n,retentionPeriod:r}=e,i=n.data.length,{uploadURL:s,requiredHeaders:o}=await this.getUploadInfo(i,r);return await this.uploadFile(s,n,o)}async findFile(e){const n=new URL(`${this.baseURL}/find`);n.searchParams.set("uhrpUrl",e);const r=await this.authFetch.fetch(n.toString(),{method:"GET"});if(!r.ok)throw new Error(`findFile request failed: HTTP ${r.status}`);const i=await r.json();if(i.status==="error"){const s=i.code??"unknown-code",o=i.description??"no-description";throw new Error(`findFile returned an error: ${s} - ${o}`)}return i.data}async listUploads(){const e=`${this.baseURL}/list`,n=await this.authFetch.fetch(e,{method:"GET"});if(!n.ok)throw new Error(`listUploads request failed: HTTP ${n.status}`);const r=await n.json();if(r.status==="error"){const i=r.code??"unknown-code",s=r.description??"no-description";throw new Error(`listUploads returned an error: ${i} - ${s}`)}return r.uploads}async renewFile(e,n){const r=`${this.baseURL}/renew`,i={uhrpUrl:e,additionalMinutes:n},s=await this.authFetch.fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!s.ok)throw new Error(`renewFile request failed: HTTP ${s.status}`);const o=await s.json();if(o.status==="error"){const a=o.code??"unknown-code",c=o.description??"no-description";throw new Error(`renewFile returned an error: ${a} - ${c}`)}return{status:o.status,prevExpiryTime:o.prevExpiryTime,newExpiryTime:o.newExpiryTime,amount:o.amount}}},WW=class{constructor(e){ze(this,"networkPreset","mainnet");this.networkPreset=e==null?void 0:e.networkPreset}async resolve(e){const r=await new mv({networkPreset:this.networkPreset}).query({service:"ls_uhrp",query:{uhrpUrl:e}});if(r.type!=="output-list")throw new Error("Lookup answer must be an output list");const i=[],s=Math.floor(Date.now()/1e3);for(let o=0;o<r.outputs.length;o++){const a=yc.fromBEEF(r.outputs[o].beef),{fields:c}=Zy.decode(a.outputs[r.outputs[o].outputIndex].lockingScript);new pi(c[3]).readVarIntNum()<s||i.push(gn(c[2]))}return i}async download(e){if(!NO(e))throw new Error("Invalid parameter UHRP url");const n=VW(e),r=await this.resolve(e);if(!Array.isArray(r)||r.length===0)throw new Error("No one currently hosts this file!");for(let i=0;i<r.length;i++)try{const s=await fetch(r[i],{method:"GET"});if(!s.ok||s.status>=400)continue;const o=await s.arrayBuffer(),a=[...new Uint8Array(o)],c=wl(a);for(let l=0;l<c.length;++l)if(c[l]!==n[l])throw new Error("Value of content does not match hash of the url given");return{data:a,mimeType:s.headers.get("Content-Type")}}catch{continue}throw new Error(`Unable to download content from ${e}`)}};const yve="https://metamarket-keyserver.babbage.systems",vve="http://localhost:3000";let uk;window.location.host.startsWith("localhost")?uk={keyServer:vve}:uk={keyServer:yve};const Z2=uk;async function bve({file:t,name:e,description:n,satoshis:r,publicKey:i,expiration:s,coverImage:o,setStatusText:a}){try{const c="https://nanostore.babbage.systems",l=mP.fromRandom(),u=Array.from(new Uint8Array(await t.arrayBuffer())),h={data:l.encrypt(u),type:t.type};if(!h)throw a("Error uploading STL file."),new Error("Could not prepare STL file.");const f=s*24*60,p=new gP("auto","localhost"),g=new gve({storageURL:c,wallet:p});a("Uploading files to UHRP...");const m=await g.publishFile({file:h,retentionPeriod:f});console.log(`STL File Url: ${m.uhrpURL}`),console.log(NO(m.uhrpURL));const b={data:Array.from(new Uint8Array(await o.arrayBuffer())),type:o.type},x=await g.publishFile({file:b,retentionPeriod:f}),S=Date.now()+s*60*60*24*1e3,P=[dt(m.uhrpURL,"utf8"),dt(e,"utf8"),dt(n,"utf8"),dt(""+r,"utf8"),dt(i,"utf8"),dt(""+t.size,"utf8"),dt(""+S,"utf8"),dt(x.uhrpURL,"utf8")],_=new Zy(p),I=await _.lock(P,[2,"metamarket"],"1","anyone",!0);console.log(`${m.uhrpURL}
${e}
${n}
${r}
${i}
${t.size}
${S}
${x.uhrpURL}`);const{txid:C,tx:A}=await p.createAction({outputs:[{lockingScript:I.toHex(),satoshis:1,outputDescription:"metamarket upload token"}],description:"publish to metamarket UHRP",options:{acceptDelayedBroadcast:!1,randomizeOutputs:!1}});if(!A)throw a("Error creating transcation data"),new Error("Error creating action");a("Broadcasting transcation");const k=await new fve(["tm_market"],{networkPreset:window.location.hostname==="localhost"?"local":"mainnet"}).broadcast(yc.fromAtomicBEEF(A));console.log("Backed server response:",k),a("Registering with MetaMarket...");const O=new yP(p),B={fileUrl:m.uhrpURL,encryptionKey:l.toHex(),satoshis:r,publicKey:i};try{const $=await O.fetch(`${Z2.keyServer}/submit`,{method:"POST",body:B,headers:{"Content-Type":"application/json"}});if(!$.ok)throw new Error($.statusText)}catch{a("Error uploading to MetaMarket"),await new Promise(Z=>setTimeout(Z,5e3));const U=C||"";if((await new mv({networkPreset:window.location.hostname==="localhost"?"local":"mainnet"}).query({service:"ls_market",query:{type:"deleteFile",value:{txid:U,outputIndex:0}}})).type!="output-list")throw new Error("Lookup answer must be an output-list");console.log(`Removed ${U} file from backend server`);const{signableTransaction:V}=await p.createAction({inputBEEF:A,inputs:[{outpoint:`${C}.0`,unlockingScriptLength:74,inputDescription:"metamarket upload token"}],description:"spending token from metamarket UHRP"});if(!V)throw new Error("Token must be spendable");const G=_.unlock([0,"signing"],"1","anyone",void 0,!0),j=yc.fromAtomicBEEF(V.tx),Q=await G.sign(j,0),se=await p.signAction({reference:V.reference,spends:{0:{unlockingScript:Q.toHex()}}});throw console.log("Token Spent:",se),new Error("Key server registration failed.")}return"Upload successful!!!"}catch(c){throw a(""),console.error("Error publishing commitment:",c),`Error publishing commitment: ${c}`}}const xve=async()=>{try{return(await new gP().getPublicKey({identityKey:!0})).publicKey}catch(t){throw console.error("Error fetching public key:",t),new Error("MetaNet Identity is missing. Please ensure you have the MetaNet Client installed and properly configured.")}},wve=()=>{const t=$z(),[e,n]=N.useState(!1),[r,i]=N.useState(""),[s,o]=N.useState(!1),[a,c]=N.useState(""),[l,u]=N.useState(null),[d,h]=N.useState(null),[f,p]=N.useState(!1),[g,m]=N.useState(null),[y,b]=N.useState(null),[x,S]=N.useState({name:{value:"",error:null},description:{value:"",error:null},satoshis:{value:"",error:null},expiration:{value:"7",error:null}}),P=A=>{var k;const M=((k=A.target.files)==null?void 0:k[0])||null;if(M){if(!M.name.endsWith(".stl")){u(null),m(null),c("Please upload a valid `.stl` file.");return}u(M),c(""),m(URL.createObjectURL(M))}},_=A=>{var O;const M=((O=A.target.files)==null?void 0:O[0])||null;if(!M)return;if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(M.type)){h(null),c("Please upload a valid image file (PNG, JPG, JPEG, or WebP).");return}if(M.size>1e3*1024){h(null),c("Cover image must not exceed 1MB.");return}h(M),b(URL.createObjectURL(M)),c("")},I=(A,M)=>{let k=null;(A==="satoshis"&&!/^\d*$/.test(M)||parseInt(M)<=0)&&(k="Only positive integers are allowed."),A==="expiration"&&(!/^\d*$/.test(M)||parseInt(M)<=0)&&(k="Expiration must be a positive integer."),S(O=>({...O,[A]:{value:M,error:k}}))},C=async A=>{if(A.preventDefault(),!l){c("An STL file is required.");return}if(!d){c("A cover image is required.");return}try{n(!0),c("");const M=await xve(),k={file:l,name:x.name.value,description:x.description.value,satoshis:Number(x.satoshis.value),publicKey:M,expiration:Number(x.expiration.value),coverImage:d,setStatusText:i};console.log(k);const O=await bve(k);o(!0),await new Promise(B=>setTimeout(B,5e3)),t("/")}catch(M){Br.error(M.message),c("Error uploading file, please try again"),console.error(M)}finally{n(!1)}};return H.jsxs(jw,{maxWidth:"lg",children:[H.jsx(ir,{variant:"h5",gutterBottom:!0,children:"Upload an STL File"}),H.jsx("form",{onSubmit:C,children:H.jsxs(eo,{container:!0,spacing:3,columns:{xs:1,md:12},children:[H.jsxs(eo,{size:{xs:1,md:6},order:{xs:2,md:1},children:[H.jsxs(iu,{elevation:3,sx:{p:3,border:"1px solid #ccc"},children:[H.jsx(ir,{variant:"h6",gutterBottom:!0,children:"File Info"}),H.jsx(Ns,{mb:2,children:H.jsx(dy,{fullWidth:!0,label:"Name",variant:"standard",required:!0,value:x.name.value,onChange:A=>I("name",A.target.value)})}),H.jsx(Ns,{mb:2,children:H.jsx(dy,{fullWidth:!0,label:"Description",variant:"standard",multiline:!0,minRows:3,value:x.description.value,onChange:A=>I("description",A.target.value)})}),H.jsx(Ns,{mb:2,children:H.jsx(dy,{fullWidth:!0,label:"Satoshis",variant:"standard",required:!0,inputProps:{inputMode:"numeric"},error:!!x.satoshis.error,helperText:x.satoshis.error,value:x.satoshis.value,onChange:A=>I("satoshis",A.target.value)})}),H.jsxs(Ns,{mb:2,children:[H.jsx(hl,{variant:"outlined",onClick:()=>p(A=>!A),children:f?"Hide Advanced Config":"Show Advanced Config"}),H.jsx(pR,{in:f,children:H.jsxs(iu,{elevation:2,sx:{mt:2,p:2,border:"1px solid #ccc"},children:[H.jsx(ir,{variant:"subtitle1",gutterBottom:!0,children:"Advanced Config"}),H.jsx(dy,{label:"Expiration Time (Days)",variant:"standard",inputProps:{inputMode:"numeric"},error:!!x.expiration.error,helperText:x.expiration.error,value:x.expiration.value,onChange:A=>I("expiration",A.target.value)})]})})]})]}),H.jsxs(Ns,{mt:3,children:[H.jsx(hl,{type:"submit",variant:"contained",disabled:e||!l||!d||Object.entries(x).some(([A,M])=>A!=="description"&&(M.error||!M.value)),children:e?"Uploading...":"Upload"}),a&&H.jsx(ir,{color:"error",variant:"body2",mt:2,children:a})]})]}),H.jsxs(eo,{size:{xs:1,md:6},order:{xs:1,md:2},children:[H.jsxs(Ns,{mb:3,sx:{position:"relative",border:"2px dashed #ccc",borderRadius:2,p:2,textAlign:"center",cursor:g?"default":"pointer","&:hover":{backgroundColor:g?"inherit":"#f9f9f9"}},onClick:()=>{var A;return!g&&((A=document.getElementById("stl-file-input"))==null?void 0:A.click())},children:[H.jsx("input",{id:"stl-file-input",type:"file",accept:".stl",onChange:P,style:{display:"none"}}),g?H.jsxs(H.Fragment,{children:[H.jsx(hl,{variant:"outlined",size:"small",sx:{position:"absolute",top:8,right:8,zIndex:1},onClick:()=>{var A;return(A=document.getElementById("stl-file-input"))==null?void 0:A.click()},children:"Change"}),H.jsx(ir,{variant:"h6",gutterBottom:!0,children:"STL Preview:"}),H.jsx(iye,{url:g,style:{width:"100%",height:"300px"},orbitControls:!0})]}):H.jsx(ir,{color:"textSecondary",children:"Click here to upload an STL file"})]}),H.jsxs(Ns,{mb:3,sx:{position:"relative",border:"2px dashed #ccc",borderRadius:2,p:2,textAlign:"center",cursor:y?"default":"pointer","&:hover":{backgroundColor:y?"inherit":"#f9f9f9"}},onClick:()=>{var A;return!y&&((A=document.getElementById("cover-image-input"))==null?void 0:A.click())},children:[H.jsx("input",{id:"cover-image-input",type:"file",accept:"image/png, image/jpg, image/jpeg, image/webp",onChange:_,style:{display:"none"}}),y?H.jsxs(H.Fragment,{children:[H.jsx(hl,{variant:"outlined",size:"small",sx:{position:"absolute",top:8,right:8,zIndex:1},onClick:A=>{var M;A.stopPropagation(),(M=document.getElementById("cover-image-input"))==null||M.click()},children:"Change"}),H.jsx(ir,{variant:"h6",gutterBottom:!0,children:"Cover Preview:"}),H.jsx(Ns,{component:"img",src:y,alt:"Cover Preview",sx:{maxWidth:"100%",maxHeight:300,borderRadius:2}})]}):H.jsx(ir,{color:"textSecondary",children:"Click here to upload a cover image"})]})]})]})}),H.jsx(JT,{open:e&&!s,sx:{zIndex:1301,color:"#fff"},children:H.jsxs(Ns,{textAlign:"center",children:[H.jsx(XT,{color:"inherit"}),H.jsx(ir,{variant:"h6",mt:2,children:r||"Processing..."})]})}),H.jsx(JT,{open:s,sx:{zIndex:1302,color:"#fff"},children:H.jsxs(Ns,{textAlign:"center",children:[H.jsx(ir,{variant:"h4",fontWeight:600,children:"Upload Successful!"}),H.jsx(ir,{variant:"body1",mt:1,children:"Redirecting to home in 5 seconds..."})]})})]})},_ve=()=>H.jsx(wve,{}),Sve=tz(H.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"})),Eve={},CL=t=>{let e;const n=new Set,r=(u,d)=>{const h=typeof u=="function"?u(e):u;if(!Object.is(h,e)){const f=e;e=d??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(p=>p(e,f))}},i=()=>e,c={setState:r,getState:i,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(Eve?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},l=e=t(r,i,c);return c},Tve=t=>t?CL(t):CL;var jM={exports:{}},qM={},KM={exports:{}},GM={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ML;function Ive(){if(ML)return GM;ML=1;var t=uu();function e(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(d,h){var f=h(),p=r({inst:{value:f,getSnapshot:h}}),g=p[0].inst,m=p[1];return s(function(){g.value=f,g.getSnapshot=h,c(g)&&m({inst:g})},[d,f,h]),i(function(){return c(g)&&m({inst:g}),d(function(){c(g)&&m({inst:g})})},[d]),o(f),f}function c(d){var h=d.getSnapshot;d=d.value;try{var f=h();return!n(d,f)}catch{return!0}}function l(d,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?l:a;return GM.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,GM}var AL;function Pve(){return AL||(AL=1,KM.exports=Ive()),KM.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RL;function Cve(){if(RL)return qM;RL=1;var t=uu(),e=Pve();function n(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,c=t.useDebugValue;return qM.useSyncExternalStoreWithSelector=function(l,u,d,h,f){var p=s(null);if(p.current===null){var g={hasValue:!1,value:null};p.current=g}else g=p.current;p=a(function(){function y(_){if(!b){if(b=!0,x=_,_=h(_),f!==void 0&&g.hasValue){var I=g.value;if(f(I,_))return S=I}return S=_}if(I=S,r(x,_))return I;var C=h(_);return f!==void 0&&f(I,C)?(x=_,I):(x=_,S=C)}var b=!1,x,S,P=d===void 0?null:d;return[function(){return y(u())},P===null?void 0:function(){return y(P())}]},[u,d,h,f]);var m=i(l,p[0],p[1]);return o(function(){g.hasValue=!0,g.value=m},[m]),c(m),m},qM}var kL;function Mve(){return kL||(kL=1,jM.exports=Cve()),jM.exports}var Ave=Mve();const Rve=ah(Ave),jW={},{useDebugValue:kve}=qt,{useSyncExternalStoreWithSelector:Ove}=Rve;let OL=!1;const Nve=t=>t;function Lve(t,e=Nve,n){(jW?"production":void 0)!=="production"&&n&&!OL&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),OL=!0);const r=Ove(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return kve(r),r}const NL=t=>{(jW?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?Tve(t):t,n=(r,i)=>Lve(e,r,i);return Object.assign(n,e),n},Dve=t=>t?NL(t):NL,Bve={};function qW(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var s;const o=c=>c===null?null:JSON.parse(c,void 0),a=(s=n.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>n.removeItem(i)}}const Cw=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Cw(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Cw(r)(n)}}}},Fve=(t,e)=>(n,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:m=>m,version:0,merge:(m,y)=>({...y,...m}),...e},o=!1;const a=new Set,c=new Set;let l;try{l=s.getStorage()}catch{}if(!l)return t((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...m)},r,i);const u=Cw(s.serialize),d=()=>{const m=s.partialize({...r()});let y;const b=u({state:m,version:s.version}).then(x=>l.setItem(s.name,x)).catch(x=>{y=x});if(y)throw y;return b},h=i.setState;i.setState=(m,y)=>{h(m,y),d()};const f=t((...m)=>{n(...m),d()},r,i);let p;const g=()=>{var m;if(!l)return;o=!1,a.forEach(b=>b(r()));const y=((m=s.onRehydrateStorage)==null?void 0:m.call(s,r()))||void 0;return Cw(l.getItem.bind(l))(s.name).then(b=>{if(b)return s.deserialize(b)}).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==s.version){if(s.migrate)return s.migrate(b.state,b.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return b.state}).then(b=>{var x;return p=s.merge(b,(x=r())!=null?x:f),n(p,!0),d()}).then(()=>{y==null||y(p,void 0),o=!0,c.forEach(b=>b(p))}).catch(b=>{y==null||y(void 0,b)})};return i.persist={setOptions:m=>{s={...s,...m},m.getStorage&&(l=m.getStorage())},clearStorage:()=>{l==null||l.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:m=>(a.add(m),()=>{a.delete(m)}),onFinishHydration:m=>(c.add(m),()=>{c.delete(m)})},g(),p||f},Uve=(t,e)=>(n,r,i)=>{let s={storage:qW(()=>localStorage),partialize:g=>g,version:0,merge:(g,m)=>({...m,...g}),...e},o=!1;const a=new Set,c=new Set;let l=s.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...g)},r,i);const u=()=>{const g=s.partialize({...r()});return l.setItem(s.name,{state:g,version:s.version})},d=i.setState;i.setState=(g,m)=>{d(g,m),u()};const h=t((...g)=>{n(...g),u()},r,i);i.getInitialState=()=>h;let f;const p=()=>{var g,m;if(!l)return;o=!1,a.forEach(b=>{var x;return b((x=r())!=null?x:h)});const y=((m=s.onRehydrateStorage)==null?void 0:m.call(s,(g=r())!=null?g:h))||void 0;return Cw(l.getItem.bind(l))(s.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==s.version){if(s.migrate)return[!0,s.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var x;const[S,P]=b;if(f=s.merge(P,(x=r())!=null?x:h),n(f,!0),S)return u()}).then(()=>{y==null||y(f,void 0),f=r(),o=!0,c.forEach(b=>b(f))}).catch(b=>{y==null||y(void 0,b)})};return i.persist={setOptions:g=>{s={...s,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},s.skipHydration||p(),f||h},$ve=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((Bve?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Fve(t,e)):Uve(t,e),zve=$ve,Hve=new WW,LL=Dve()(zve((t,e)=>({urls:{},async setResolvedURL(n){if(!e().urls[n]){if(!NO(n)){t(r=>({urls:{...r.urls,[n]:n}}));return}try{const[r]=await Hve.resolve(n);t(i=>({urls:{...i.urls,[n]:r}}))}catch(r){console.error(r)}}}}),{name:"uhrp-react-session",storage:qW(()=>sessionStorage)})),LO=({src:t,fallback:e,...n})=>{const r=LL(s=>s.urls[t]||""),i=LL(s=>s.setResolvedURL);return N.useEffect(()=>{i(t).catch(()=>{})},[t,i]),r?H.jsx("img",{src:r,...n}):H.jsx(H.Fragment,{children:e||null})};var Zb={},gg={},XM={},Jb={},vp={},tc={},PE={},DL;function Ni(){if(DL)return PE;DL=1,Object.defineProperty(PE,"__esModule",{value:!0});let t=class rr{static isBN(n){return n instanceof rr?!0:n!==null&&typeof n=="object"&&n.constructor.wordSize===rr.wordSize&&Array.isArray(n.words)}static max(n,r){return n.cmp(r)>0?n:r}static min(n,r){return n.cmp(r)<0?n:r}constructor(n=0,r=10,i="be"){if(this.negative=0,this.words=[],this.length=0,this.red=null,n!==null){if((r==="le"||r==="be")&&(i=r,r=10),typeof n=="number"){this.initNumber(n,r,i);return}if(typeof n=="object"){this.initArray(n,i);return}r==="hex"&&(r=16),this.assert(r===(r|0)&&r>=2&&r<=36),n=n.toString().replace(/\s+/g,"");let s=0;n.startsWith("-")&&(s++,this.negative=1),s<n.length&&(r===16?this.parseHex(n,s,i):(this.parseBase(n,r,s),i==="le"&&this.initArray(this.toArray(),i)))}}assert(n,r="Assertion failed"){if(!n)throw new Error(r)}initNumber(n,r,i){return n<0&&(this.negative=1,n=-n),n<67108864?(this.words=[n&67108863],this.length=1):n<4503599627370496?(this.words=[n&67108863,n/67108864&67108863],this.length=2):(this.assert(n<=9007199254740991,"The number is larger than 2 ^ 53 (unsafe)"),this.words=[n&67108863,n/67108864&67108863,1],this.length=3),i!=="le"?this:(this.initArray(this.toArray(),i),this)}initArray(n,r){if(this.assert(typeof n.length=="number","The number must have a length"),n.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(n.length/3),this.words=new Array(this.length);let i=0;for(;i<this.length;i++)this.words[i]=0;let s,o,a=0;if(r==="be")for(i=n.length-1,s=0;i>=0;i-=3)o=n[i]|n[i-1]<<8|n[i-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,a+=24,a>=26&&(a-=26,s++);else if(r==="le")for(i=0,s=0;i<n.length;i+=3)o=n[i]|n[i+1]<<8|n[i+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,a+=24,a>=26&&(a-=26,s++);return this.strip()}parseHex4Bits(n,r){const i=n.charCodeAt(r);if(i>=48&&i<=57)return i-48;if(i>=65&&i<=70)return i-55;if(i>=97&&i<=102)return i-87;throw new Error("Invalid character in "+n)}parseHexByte(n,r,i){let s=this.parseHex4Bits(n,i);return i-1>=r&&(s|=this.parseHex4Bits(n,i-1)<<4),s}parseHex(n,r,i){this.length=Math.ceil((n.length-r)/6),this.words=new Array(this.length).fill(0);let s=0,o=0;const a=c=>{const l=this.parseHexByte(n,r,c)<<s;this.words[o]|=l&67108863,s>=18?(s-=18,o+=1,this.words[o]|=l>>>26):s+=8};if(i==="be")for(let c=n.length-1;c>=r;c-=2)a(c);else{const c=n.length-r;for(let l=c%2===0?r+1:r;l<n.length;l+=2)a(l)}return this.strip()}parseBaseWord(n,r,i,s){let o=0,a=0;const c=Math.min(n.length,i);for(let l=r;l<c;l++){const u=n.charCodeAt(l)-48;o*=s,u>=49?a=u-49+10:u>=17?a=u-17+10:a=u,this.assert(u>=0&&a<s,"Invalid character"),o+=a}return o}parseBase(n,r,i){this.words=[0],this.length=1;let s=0,o=1;for(;o<=67108863;o*=r)s++;s--,o=o/r|0;const a=n.length-i,c=a%s,l=Math.min(a,a-c)+i;let u=0,d=i;for(;d<l;d+=s)u=this.parseBaseWord(n,d,d+s,r),this.imuln(o),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(c!==0){let h=1;for(u=this.parseBaseWord(n,d,n.length,r),d=0;d<c;d++)h*=r;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}return this.strip()}copy(n){n.words=new Array(this.length);for(let r=0;r<this.length;r++)n.words[r]=this.words[r];n.length=this.length,n.negative=this.negative,n.red=this.red}static move(n,r){n.words=r.words,n.length=r.length,n.negative=r.negative,n.red=r.red}clone(){const n=new rr;return this.copy(n),n}expand(n){for(;this.length<n;)this.words[this.length++]=0;return this}strip(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this.normSign()}normSign(){return this.length===1&&this.words[0]===0&&(this.negative=0),this}inspect(){return(this.red!==null?"<BN-R: ":"<BN: ")+this.toString(16)+">"}toString(n=10,r=1){if(n===16||n==="hex")return this.toHexString(r);if(n===(n|0)&&n>=2&&n<=36)return this.toBaseString(n,r);throw new Error("Base should be between 2 and 36")}toHexString(n){let r="",i=0,s=0;for(let o=0;o<this.length;o++){const a=this.words[o],c=((a<<i|s)&16777215).toString(16);s=a>>>24-i&16777215,i+=2,i>=26&&(i-=26,o--),s!==0||o!==this.length-1?r=rr.zeros[6-c.length]+c+r:r=c+r}if(s!==0&&(r=s.toString(16)+r),n===0&&r==="0")return"";for(;r.length%n!==0&&n!==0;)r="0"+r;return this.negative!==0&&(r="-"+r),r}toBaseString(n,r){const i=rr.groupSizes[n],s=rr.groupBases[n];let o="",a=this.clone();for(a.negative=0;!a.isZero();){const c=a.modrn(s).toString(n);a=a.idivn(s),a.isZero()?o=c+o:o=rr.zeros[i-c.length]+c+o}for(this.isZero()&&(o="0"+o);o.length%r!==0;)o="0"+o;return this.negative!==0&&(o="-"+o),o}toNumber(){let n=this.words[0];if(this.length===2)n+=this.words[1]*67108864;else if(this.length===3&&this.words[2]===1)n+=4503599627370496+this.words[1]*67108864;else if(this.length>2)throw new Error("Number can only safely store up to 53 bits");return this.negative!==0?-n:n}toJSON(){return this.toString(16)}toArrayLikeLE(n,r){let i=0,s=0;for(let o=0,a=0;o<this.length;o++){const c=this.words[o]<<a|s;n[i++]=c&255,i<n.length&&(n[i++]=c>>8&255),i<n.length&&(n[i++]=c>>16&255),a===6?(i<n.length&&(n[i++]=c>>24&255),s=0,a=0):(s=c>>>24,a+=2)}if(i<n.length)for(n[i++]=s;i<n.length;)n[i++]=0}toArrayLikeBE(n,r){let i=n.length-1,s=0;for(let o=0,a=0;o<this.length;o++){const c=this.words[o]<<a|s;n[i--]=c&255,i>=0&&(n[i--]=c>>8&255),i>=0&&(n[i--]=c>>16&255),a===6?(i>=0&&(n[i--]=c>>24&255),s=0,a=0):(s=c>>>24,a+=2)}if(i>=0)for(n[i--]=s;i>=0;)n[i--]=0}toArray(n="be",r){this.strip();const i=this.byteLength(),s=r??Math.max(1,i);this.assert(i<=s,"byte array longer than desired length"),this.assert(s>0,"Requested array length <= 0");const o=new Array(s);return n==="le"?this.toArrayLikeLE(o,i):this.toArrayLikeBE(o,i),o}countWordBits(n){if(typeof Math.clz32=="function")return 32-Math.clz32(n);let r=n,i=0;return r>=4096&&(i+=13,r>>>=13),r>=64&&(i+=7,r>>>=7),r>=8&&(i+=4,r>>>=4),r>=2&&(i+=2,r>>>=2),i+r}zeroWordBits(n){if(n===0)return 26;let r=n,i=0;return(r&8191)===0&&(i+=13,r>>>=13),(r&127)===0&&(i+=7,r>>>=7),(r&15)===0&&(i+=4,r>>>=4),(r&3)===0&&(i+=2,r>>>=2),(r&1)===0&&i++,i}bitLength(){const n=this.words[this.length-1],r=this.countWordBits(n);return(this.length-1)*26+r}static toBitArray(n){const r=new Array(n.bitLength());for(let i=0;i<r.length;i++){const s=i/26|0,o=i%26;r[i]=n.words[s]>>>o&1}return r}toBitArray(){return rr.toBitArray(this)}zeroBits(){if(this.isZero())return 0;let n=0;for(let r=0;r<this.length;r++){const i=this.zeroWordBits(this.words[r]);if(n+=i,i!==26)break}return n}byteLength(){return Math.ceil(this.bitLength()/8)}toTwos(n){return this.negative!==0?this.abs().inotn(n).iaddn(1):this.clone()}fromTwos(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()}isNeg(){return this.negative!==0}neg(){return this.clone().ineg()}ineg(){return this.isZero()||(this.negative^=1),this}iuor(n){for(;this.length<n.length;)this.words[this.length++]=0;for(let r=0;r<n.length;r++)this.words[r]=this.words[r]|n.words[r];return this.strip()}ior(n){return this.assert((this.negative|n.negative)===0),this.iuor(n)}or(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)}uor(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)}iuand(n){const r=Math.min(this.length,n.length);for(let i=0;i<r;i++)this.words[i]=this.words[i]&n.words[i];return this.length=r,this.strip()}iand(n){return this.assert((this.negative|n.negative)===0),this.iuand(n)}and(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)}uand(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)}iuxor(n){if(this.length>n.length)for(let r=0;r<n.length;r++)this.words[r]=this.words[r]^n.words[r];else{for(let r=0;r<this.length;r++)this.words[r]=this.words[r]^n.words[r];for(let r=this.length;r<n.length;r++)this.words[r]=n.words[r];this.length=n.length}return this.strip()}ixor(n){return this.assert((this.negative|n.negative)===0,"Neither number can be negative"),this.iuxor(n)}xor(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)}uxor(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)}inotn(n){this.assert(typeof n=="number"&&n>=0,"The width needs to be a number greater than zero");let r=Math.ceil(n/26)|0;const i=n%26;this.expand(r),i>0&&r--;let s=0;for(;s<r;s++)this.words[s]=~this.words[s]&67108863;return i>0&&(this.words[s]=~this.words[s]&67108863>>26-i),this.strip()}notn(n){return this.clone().inotn(n)}setn(n,r){this.assert(typeof n=="number"&&n>=0);const i=n/26|0,s=n%26;return this.expand(i+1),r===1||r===!0?this.words[i]=this.words[i]|1<<s:this.words[i]=this.words[i]&~(1<<s),this.strip()}iadd(n){let r;if(this.negative!==0&&n.negative===0)return this.negative=0,r=this.isub(n),this.negative^=1,this.normSign();if(this.negative===0&&n.negative!==0)return n.negative=0,r=this.isub(n),n.negative=1,r.normSign();let i,s;this.length>n.length?(i=this,s=n):(i=n,s=this);let o=0,a=0;for(;a<s.length;a++)r=(i.words[a]|0)+(s.words[a]|0)+o,this.words[a]=r&67108863,o=r>>>26;for(;o!==0&&a<i.length;a++)r=(i.words[a]|0)+o,this.words[a]=r&67108863,o=r>>>26;if(this.length=i.length,o!==0)this.words[this.length]=o,this.length++;else if(i!==this)for(;a<i.length;a++)this.words[a]=i.words[a];return this}add(n){let r;return n.negative!==0&&this.negative===0?(n.negative=0,r=this.sub(n),n.negative^=1,r):n.negative===0&&this.negative!==0?(this.negative=0,r=n.sub(this),this.negative=1,r):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)}isub(n){let r;if(n.negative!==0)return n.negative=0,r=this.iadd(n),n.negative=1,r.normSign();if(this.negative!==0)return this.negative=0,this.iadd(n),this.negative=1,this.normSign();const i=this.cmp(n);if(i===0)return this.negative=0,this.length=1,this.words[0]=0,this;let s,o;i>0?(s=this,o=n):(s=n,o=this);let a=0,c=0;for(;c<o.length;c++)r=(s.words[c]|0)-(o.words[c]|0)+a,a=r>>26,this.words[c]=r&67108863;for(;a!==0&&c<s.length;c++)r=(s.words[c]|0)+a,a=r>>26,this.words[c]=r&67108863;if(a===0&&c<s.length&&s!==this)for(;c<s.length;c++)this.words[c]=s.words[c];return this.length=Math.max(this.length,c),s!==this&&(this.negative=1),this.strip()}sub(n){return this.clone().isub(n)}smallMulTo(n,r,i){i.negative=r.negative^n.negative;let s=n.length+r.length|0;i.length=s,s=s-1|0;let o=n.words[0]|0,a=r.words[0]|0,c=o*a;const l=c&67108863;let u=c/67108864|0;i.words[0]=l;let d=1;for(;d<s;d++){let h=u>>>26,f=u&67108863;const p=Math.min(d,r.length-1);for(let g=Math.max(0,d-n.length+1);g<=p;g++){const m=d-g|0;o=n.words[m]|0,a=r.words[g]|0,c=o*a+f,h+=c/67108864|0,f=c&67108863}i.words[d]=f|0,u=h|0}return u!==0?i.words[d]=u|0:i.length--,i.strip()}comb10MulTo(n,r,i){const s=n.words,o=r.words,a=i.words;let c=0,l,u,d;const h=s[0]|0,f=h&8191,p=h>>>13,g=s[1]|0,m=g&8191,y=g>>>13,b=s[2]|0,x=b&8191,S=b>>>13,P=s[3]|0,_=P&8191,I=P>>>13,C=s[4]|0,A=C&8191,M=C>>>13,k=s[5]|0,O=k&8191,B=k>>>13,$=s[6]|0,U=$&8191,q=$>>>13,K=s[7]|0,V=K&8191,G=K>>>13,j=s[8]|0,Q=j&8191,se=j>>>13,Z=s[9]|0,ie=Z&8191,pe=Z>>>13,ue=o[0]|0,le=ue&8191,ae=ue>>>13,_e=o[1]|0,ye=_e&8191,Ae=_e>>>13,Oe=o[2]|0,Be=Oe&8191,ce=Oe>>>13,Ge=o[3]|0,Pe=Ge&8191,He=Ge>>>13,Re=o[4]|0,je=Re&8191,te=Re>>>13,ee=o[5]|0,X=ee&8191,we=ee>>>13,Ne=o[6]|0,We=Ne&8191,xe=Ne>>>13,Ve=o[7]|0,be=Ve&8191,ge=Ve>>>13,Se=o[8]|0,Ie=Se&8191,me=Se>>>13,Ee=o[9]|0,oe=Ee&8191,ne=Ee>>>13;i.negative=n.negative^r.negative,i.length=19,l=Math.imul(f,le),u=Math.imul(f,ae),u=u+Math.imul(p,le)|0,d=Math.imul(p,ae);let de=(c+l|0)+((u&8191)<<13)|0;c=(d+(u>>>13)|0)+(de>>>26)|0,de&=67108863,l=Math.imul(m,le),u=Math.imul(m,ae),u=u+Math.imul(y,le)|0,d=Math.imul(y,ae),l=l+Math.imul(f,ye)|0,u=u+Math.imul(f,Ae)|0,u=u+Math.imul(p,ye)|0,d=d+Math.imul(p,Ae)|0;let Te=(c+l|0)+((u&8191)<<13)|0;c=(d+(u>>>13)|0)+(Te>>>26)|0,Te&=67108863,l=Math.imul(x,le),u=Math.imul(x,ae),u=u+Math.imul(S,le)|0,d=Math.imul(S,ae),l=l+Math.imul(m,ye)|0,u=u+Math.imul(m,Ae)|0,u=u+Math.imul(y,ye)|0,d=d+Math.imul(y,Ae)|0,l=l+Math.imul(f,Be)|0,u=u+Math.imul(f,ce)|0,u=u+Math.imul(p,Be)|0,d=d+Math.imul(p,ce)|0;let ke=(c+l|0)+((u&8191)<<13)|0;c=(d+(u>>>13)|0)+(ke>>>26)|0,ke&=67108863,l=Math.imul(_,le),u=Math.imul(_,ae),u=u+Math.imul(I,le)|0,d=Math.imul(I,ae),l=l+Math.imul(x,ye)|0,u=u+Math.imul(x,Ae)|0,u=u+Math.imul(S,ye)|0,d=d+Math.imul(S,Ae)|0,l=l+Math.imul(m,Be)|0,u=u+Math.imul(m,ce)|0,u=u+Math.imul(y,Be)|0,d=d+Math.imul(y,ce)|0,l=l+Math.imul(f,Pe)|0,u=u+Math.imul(f,He)|0,u=u+Math.imul(p,Pe)|0,d=d+Math.imul(p,He)|0;let he=(c+l|0)+((u&8191)<<13)|0;c=(d+(u>>>13)|0)+(he>>>26)|0,he&=67108863,l=Math.imul(A,le),u=Math.imul(A,ae),u=u+Math.imul(M,le)|0,d=Math.imul(M,ae),l=l+Math.imul(_,ye)|0,u=u+Math.imul(_,Ae)|0,u=u+Math.imul(I,ye)|0,d=d+Math.imul(I,Ae)|0,l=l+Math.imul(x,Be)|0,u=u+Math.imul(x,ce)|0,u=u+Math.imul(S,Be)|0,d=d+Math.imul(S,ce)|0,l=l+Math.imul(m,Pe)|0,u=u+Math.imul(m,He)|0,u=u+Math.imul(y,Pe)|0,d=d+Math.imul(y,He)|0,l=l+Math.imul(f,je)|0,u=u+Math.imul(f,te)|0,u=u+Math.imul(p,je)|0,d=d+Math.imul(p,te)|0;let Xe=(c+l|0)+((u&8191)<<13)|0;c=(d+(u>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,l=Math.imul(O,le),u=Math.imul(O,ae),u=u+Math.imul(B,le)|0,d=Math.imul(B,ae),l=l+Math.imul(A,ye)|0,u=u+Math.imul(A,Ae)|0,u=u+Math.imul(M,ye)|0,d=d+Math.imul(M,Ae)|0,l=l+Math.imul(_,Be)|0,u=u+Math.imul(_,ce)|0,u=u+Math.imul(I,Be)|0,d=d+Math.imul(I,ce)|0,l=l+Math.imul(x,Pe)|0,u=u+Math.imul(x,He)|0,u=u+Math.imul(S,Pe)|0,d=d+Math.imul(S,He)|0,l=l+Math.imul(m,je)|0,u=u+Math.imul(m,te)|0,u=u+Math.imul(y,je)|0,d=d+Math.imul(y,te)|0,l=l+Math.imul(f,X)|0,u=u+Math.imul(f,we)|0,u=u+Math.imul(p,X)|0,d=d+Math.imul(p,we)|0;let $e=(c+l|0)+((u&8191)<<13)|0;c=(d+(u>>>13)|0)+($e>>>26)|0,$e&=67108863,l=Math.imul(U,le),u=Math.imul(U,ae),u=u+Math.imul(q,le)|0,d=Math.imul(q,ae),l=l+Math.imul(O,ye)|0,u=u+Math.imul(O,Ae)|0,u=u+Math.imul(B,ye)|0,d=d+Math.imul(B,Ae)|0,l=l+Math.imul(A,Be)|0,u=u+Math.imul(A,ce)|0,u=u+Math.imul(M,Be)|0,d=d+Math.imul(M,ce)|0,l=l+Math.imul(_,Pe)|0,u=u+Math.imul(_,He)|0,u=u+Math.imul(I,Pe)|0,d=d+Math.imul(I,He)|0,l=l+Math.imul(x,je)|0,u=u+Math.imul(x,te)|0,u=u+Math.imul(S,je)|0,d=d+Math.imul(S,te)|0,l=l+Math.imul(m,X)|0,u=u+Math.imul(m,we)|0,u=u+Math.imul(y,X)|0,d=d+Math.imul(y,we)|0,l=l+Math.imul(f,We)|0,u=u+Math.imul(f,xe)|0,u=u+Math.imul(p,We)|0,d=d+Math.imul(p,xe)|0;let Qe=(c+l|0)+((u&8191)<<13)|0;c=(d+(u>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,l=Math.imul(V,le),u=Math.imul(V,ae),u=u+Math.imul(G,le)|0,d=Math.imul(G,ae),l=l+Math.imul(U,ye)|0,u=u+Math.imul(U,Ae)|0,u=u+Math.imul(q,ye)|0,d=d+Math.imul(q,Ae)|0,l=l+Math.imul(O,Be)|0,u=u+Math.imul(O,ce)|0,u=u+Math.imul(B,Be)|0,d=d+Math.imul(B,ce)|0,l=l+Math.imul(A,Pe)|0,u=u+Math.imul(A,He)|0,u=u+Math.imul(M,Pe)|0,d=d+Math.imul(M,He)|0,l=l+Math.imul(_,je)|0,u=u+Math.imul(_,te)|0,u=u+Math.imul(I,je)|0,d=d+Math.imul(I,te)|0,l=l+Math.imul(x,X)|0,u=u+Math.imul(x,we)|0,u=u+Math.imul(S,X)|0,d=d+Math.imul(S,we)|0,l=l+Math.imul(m,We)|0,u=u+Math.imul(m,xe)|0,u=u+Math.imul(y,We)|0,d=d+Math.imul(y,xe)|0,l=l+Math.imul(f,be)|0,u=u+Math.imul(f,ge)|0,u=u+Math.imul(p,be)|0,d=d+Math.imul(p,ge)|0;let ut=(c+l|0)+((u&8191)<<13)|0;c=(d+(u>>>13)|0)+(ut>>>26)|0,ut&=67108863,l=Math.imul(Q,le),u=Math.imul(Q,ae),u=u+Math.imul(se,le)|0,d=Math.imul(se,ae),l=l+Math.imul(V,ye)|0,u=u+Math.imul(V,Ae)|0,u=u+Math.imul(G,ye)|0,d=d+Math.imul(G,Ae)|0,l=l+Math.imul(U,Be)|0,u=u+Math.imul(U,ce)|0,u=u+Math.imul(q,Be)|0,d=d+Math.imul(q,ce)|0,l=l+Math.imul(O,Pe)|0,u=u+Math.imul(O,He)|0,u=u+Math.imul(B,Pe)|0,d=d+Math.imul(B,He)|0,l=l+Math.imul(A,je)|0,u=u+Math.imul(A,te)|0,u=u+Math.imul(M,je)|0,d=d+Math.imul(M,te)|0,l=l+Math.imul(_,X)|0,u=u+Math.imul(_,we)|0,u=u+Math.imul(I,X)|0,d=d+Math.imul(I,we)|0,l=l+Math.imul(x,We)|0,u=u+Math.imul(x,xe)|0,u=u+Math.imul(S,We)|0,d=d+Math.imul(S,xe)|0,l=l+Math.imul(m,be)|0,u=u+Math.imul(m,ge)|0,u=u+Math.imul(y,be)|0,d=d+Math.imul(y,ge)|0,l=l+Math.imul(f,Ie)|0,u=u+Math.imul(f,me)|0,u=u+Math.imul(p,Ie)|0,d=d+Math.imul(p,me)|0;let gt=(c+l|0)+((u&8191)<<13)|0;c=(d+(u>>>13)|0)+(gt>>>26)|0,gt&=67108863,l=Math.imul(ie,le),u=Math.imul(ie,ae),u=u+Math.imul(pe,le)|0,d=Math.imul(pe,ae),l=l+Math.imul(Q,ye)|0,u=u+Math.imul(Q,Ae)|0,u=u+Math.imul(se,ye)|0,d=d+Math.imul(se,Ae)|0,l=l+Math.imul(V,Be)|0,u=u+Math.imul(V,ce)|0,u=u+Math.imul(G,Be)|0,d=d+Math.imul(G,ce)|0,l=l+Math.imul(U,Pe)|0,u=u+Math.imul(U,He)|0,u=u+Math.imul(q,Pe)|0,d=d+Math.imul(q,He)|0,l=l+Math.imul(O,je)|0,u=u+Math.imul(O,te)|0,u=u+Math.imul(B,je)|0,d=d+Math.imul(B,te)|0,l=l+Math.imul(A,X)|0,u=u+Math.imul(A,we)|0,u=u+Math.imul(M,X)|0,d=d+Math.imul(M,we)|0,l=l+Math.imul(_,We)|0,u=u+Math.imul(_,xe)|0,u=u+Math.imul(I,We)|0,d=d+Math.imul(I,xe)|0,l=l+Math.imul(x,be)|0,u=u+Math.imul(x,ge)|0,u=u+Math.imul(S,be)|0,d=d+Math.imul(S,ge)|0,l=l+Math.imul(m,Ie)|0,u=u+Math.imul(m,me)|0,u=u+Math.imul(y,Ie)|0,d=d+Math.imul(y,me)|0,l=l+Math.imul(f,oe)|0,u=u+Math.imul(f,ne)|0,u=u+Math.imul(p,oe)|0,d=d+Math.imul(p,ne)|0;let Tt=(c+l|0)+((u&8191)<<13)|0;c=(d+(u>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,l=Math.imul(ie,ye),u=Math.imul(ie,Ae),u=u+Math.imul(pe,ye)|0,d=Math.imul(pe,Ae),l=l+Math.imul(Q,Be)|0,u=u+Math.imul(Q,ce)|0,u=u+Math.imul(se,Be)|0,d=d+Math.imul(se,ce)|0,l=l+Math.imul(V,Pe)|0,u=u+Math.imul(V,He)|0,u=u+Math.imul(G,Pe)|0,d=d+Math.imul(G,He)|0,l=l+Math.imul(U,je)|0,u=u+Math.imul(U,te)|0,u=u+Math.imul(q,je)|0,d=d+Math.imul(q,te)|0,l=l+Math.imul(O,X)|0,u=u+Math.imul(O,we)|0,u=u+Math.imul(B,X)|0,d=d+Math.imul(B,we)|0,l=l+Math.imul(A,We)|0,u=u+Math.imul(A,xe)|0,u=u+Math.imul(M,We)|0,d=d+Math.imul(M,xe)|0,l=l+Math.imul(_,be)|0,u=u+Math.imul(_,ge)|0,u=u+Math.imul(I,be)|0,d=d+Math.imul(I,ge)|0,l=l+Math.imul(x,Ie)|0,u=u+Math.imul(x,me)|0,u=u+Math.imul(S,Ie)|0,d=d+Math.imul(S,me)|0,l=l+Math.imul(m,oe)|0,u=u+Math.imul(m,ne)|0,u=u+Math.imul(y,oe)|0,d=d+Math.imul(y,ne)|0;let Kt=(c+l|0)+((u&8191)<<13)|0;c=(d+(u>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,l=Math.imul(ie,Be),u=Math.imul(ie,ce),u=u+Math.imul(pe,Be)|0,d=Math.imul(pe,ce),l=l+Math.imul(Q,Pe)|0,u=u+Math.imul(Q,He)|0,u=u+Math.imul(se,Pe)|0,d=d+Math.imul(se,He)|0,l=l+Math.imul(V,je)|0,u=u+Math.imul(V,te)|0,u=u+Math.imul(G,je)|0,d=d+Math.imul(G,te)|0,l=l+Math.imul(U,X)|0,u=u+Math.imul(U,we)|0,u=u+Math.imul(q,X)|0,d=d+Math.imul(q,we)|0,l=l+Math.imul(O,We)|0,u=u+Math.imul(O,xe)|0,u=u+Math.imul(B,We)|0,d=d+Math.imul(B,xe)|0,l=l+Math.imul(A,be)|0,u=u+Math.imul(A,ge)|0,u=u+Math.imul(M,be)|0,d=d+Math.imul(M,ge)|0,l=l+Math.imul(_,Ie)|0,u=u+Math.imul(_,me)|0,u=u+Math.imul(I,Ie)|0,d=d+Math.imul(I,me)|0,l=l+Math.imul(x,oe)|0,u=u+Math.imul(x,ne)|0,u=u+Math.imul(S,oe)|0,d=d+Math.imul(S,ne)|0;let Zt=(c+l|0)+((u&8191)<<13)|0;c=(d+(u>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,l=Math.imul(ie,Pe),u=Math.imul(ie,He),u=u+Math.imul(pe,Pe)|0,d=Math.imul(pe,He),l=l+Math.imul(Q,je)|0,u=u+Math.imul(Q,te)|0,u=u+Math.imul(se,je)|0,d=d+Math.imul(se,te)|0,l=l+Math.imul(V,X)|0,u=u+Math.imul(V,we)|0,u=u+Math.imul(G,X)|0,d=d+Math.imul(G,we)|0,l=l+Math.imul(U,We)|0,u=u+Math.imul(U,xe)|0,u=u+Math.imul(q,We)|0,d=d+Math.imul(q,xe)|0,l=l+Math.imul(O,be)|0,u=u+Math.imul(O,ge)|0,u=u+Math.imul(B,be)|0,d=d+Math.imul(B,ge)|0,l=l+Math.imul(A,Ie)|0,u=u+Math.imul(A,me)|0,u=u+Math.imul(M,Ie)|0,d=d+Math.imul(M,me)|0,l=l+Math.imul(_,oe)|0,u=u+Math.imul(_,ne)|0,u=u+Math.imul(I,oe)|0,d=d+Math.imul(I,ne)|0;let Bt=(c+l|0)+((u&8191)<<13)|0;c=(d+(u>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,l=Math.imul(ie,je),u=Math.imul(ie,te),u=u+Math.imul(pe,je)|0,d=Math.imul(pe,te),l=l+Math.imul(Q,X)|0,u=u+Math.imul(Q,we)|0,u=u+Math.imul(se,X)|0,d=d+Math.imul(se,we)|0,l=l+Math.imul(V,We)|0,u=u+Math.imul(V,xe)|0,u=u+Math.imul(G,We)|0,d=d+Math.imul(G,xe)|0,l=l+Math.imul(U,be)|0,u=u+Math.imul(U,ge)|0,u=u+Math.imul(q,be)|0,d=d+Math.imul(q,ge)|0,l=l+Math.imul(O,Ie)|0,u=u+Math.imul(O,me)|0,u=u+Math.imul(B,Ie)|0,d=d+Math.imul(B,me)|0,l=l+Math.imul(A,oe)|0,u=u+Math.imul(A,ne)|0,u=u+Math.imul(M,oe)|0,d=d+Math.imul(M,ne)|0;let _n=(c+l|0)+((u&8191)<<13)|0;c=(d+(u>>>13)|0)+(_n>>>26)|0,_n&=67108863,l=Math.imul(ie,X),u=Math.imul(ie,we),u=u+Math.imul(pe,X)|0,d=Math.imul(pe,we),l=l+Math.imul(Q,We)|0,u=u+Math.imul(Q,xe)|0,u=u+Math.imul(se,We)|0,d=d+Math.imul(se,xe)|0,l=l+Math.imul(V,be)|0,u=u+Math.imul(V,ge)|0,u=u+Math.imul(G,be)|0,d=d+Math.imul(G,ge)|0,l=l+Math.imul(U,Ie)|0,u=u+Math.imul(U,me)|0,u=u+Math.imul(q,Ie)|0,d=d+Math.imul(q,me)|0,l=l+Math.imul(O,oe)|0,u=u+Math.imul(O,ne)|0,u=u+Math.imul(B,oe)|0,d=d+Math.imul(B,ne)|0;let hn=(c+l|0)+((u&8191)<<13)|0;c=(d+(u>>>13)|0)+(hn>>>26)|0,hn&=67108863,l=Math.imul(ie,We),u=Math.imul(ie,xe),u=u+Math.imul(pe,We)|0,d=Math.imul(pe,xe),l=l+Math.imul(Q,be)|0,u=u+Math.imul(Q,ge)|0,u=u+Math.imul(se,be)|0,d=d+Math.imul(se,ge)|0,l=l+Math.imul(V,Ie)|0,u=u+Math.imul(V,me)|0,u=u+Math.imul(G,Ie)|0,d=d+Math.imul(G,me)|0,l=l+Math.imul(U,oe)|0,u=u+Math.imul(U,ne)|0,u=u+Math.imul(q,oe)|0,d=d+Math.imul(q,ne)|0;let bn=(c+l|0)+((u&8191)<<13)|0;c=(d+(u>>>13)|0)+(bn>>>26)|0,bn&=67108863,l=Math.imul(ie,be),u=Math.imul(ie,ge),u=u+Math.imul(pe,be)|0,d=Math.imul(pe,ge),l=l+Math.imul(Q,Ie)|0,u=u+Math.imul(Q,me)|0,u=u+Math.imul(se,Ie)|0,d=d+Math.imul(se,me)|0,l=l+Math.imul(V,oe)|0,u=u+Math.imul(V,ne)|0,u=u+Math.imul(G,oe)|0,d=d+Math.imul(G,ne)|0;let Wn=(c+l|0)+((u&8191)<<13)|0;c=(d+(u>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,l=Math.imul(ie,Ie),u=Math.imul(ie,me),u=u+Math.imul(pe,Ie)|0,d=Math.imul(pe,me),l=l+Math.imul(Q,oe)|0,u=u+Math.imul(Q,ne)|0,u=u+Math.imul(se,oe)|0,d=d+Math.imul(se,ne)|0;let Un=(c+l|0)+((u&8191)<<13)|0;c=(d+(u>>>13)|0)+(Un>>>26)|0,Un&=67108863,l=Math.imul(ie,oe),u=Math.imul(ie,ne),u=u+Math.imul(pe,oe)|0,d=Math.imul(pe,ne);let Jn=(c+l|0)+((u&8191)<<13)|0;return c=(d+(u>>>13)|0)+(Jn>>>26)|0,Jn&=67108863,a[0]=de,a[1]=Te,a[2]=ke,a[3]=he,a[4]=Xe,a[5]=$e,a[6]=Qe,a[7]=ut,a[8]=gt,a[9]=Tt,a[10]=Kt,a[11]=Zt,a[12]=Bt,a[13]=_n,a[14]=hn,a[15]=bn,a[16]=Wn,a[17]=Un,a[18]=Jn,c!==0&&(a[19]=c,i.length++),i}bigMulTo(n,r,i){i.negative=r.negative^n.negative,i.length=n.length+r.length;let s=0,o=0,a=0;for(;a<i.length-1;a++){let c=o;o=0;let l=s&67108863;const u=Math.min(a,r.length-1);for(let d=Math.max(0,a-n.length+1);d<=u;d++){const h=a-d,f=n.words[h]|0,p=r.words[d]|0,g=f*p;let m=g&67108863;c=c+(g/67108864|0)|0,m=m+l|0,l=m&67108863,c=c+(m>>>26)|0,o+=c>>>26,c&=67108863}i.words[a]=l,s=c,c=o}return s!==0?i.words[a]=s:i.length--,i.strip()}mulTo(n,r){let i;const s=this.length+n.length;return this.length===10&&n.length===10?i=this.comb10MulTo(this,n,r):s<63?i=this.smallMulTo(this,n,r):i=this.bigMulTo(this,n,r),i}mul(n){const r=new rr;return r.words=new Array(this.length+n.length),this.mulTo(n,r)}imul(n){return this.clone().mulTo(n,this)}imuln(n){const r=n<0;r&&(n=-n),this.assert(typeof n=="number"),this.assert(n<67108864);let i=0,s=0;for(;s<this.length;s++){const o=(this.words[s]|0)*n,a=(o&67108863)+(i&67108863);i>>=26,i+=o/67108864|0,i+=a>>>26,this.words[s]=a&67108863}return i!==0&&(this.words[s]=i,this.length++),r?this.ineg():this}muln(n){return this.clone().imuln(n)}sqr(){return this.mul(this)}isqr(){return this.imul(this.clone())}pow(n){const r=rr.toBitArray(n);if(r.length===0)return new rr(1);let i=this,s=0;for(;s<r.length&&r[s]===0;s++,i=i.sqr());if(++s<r.length)for(let o=i.sqr();s<r.length;s++,o=o.sqr())r[s]!==0&&(i=i.mul(o));return i}iushln(n){this.assert(typeof n=="number"&&n>=0);const r=n%26,i=(n-r)/26,s=67108863>>>26-r<<26-r;let o;if(r!==0){let a=0;for(o=0;o<this.length;o++){const c=this.words[o]&s,l=(this.words[o]|0)-c<<r;this.words[o]=l|a,a=c>>>26-r}a!==0&&(this.words[o]=a,this.length++)}if(i!==0){for(o=this.length-1;o>=0;o--)this.words[o+i]=this.words[o];for(o=0;o<i;o++)this.words[o]=0;this.length+=i}return this.strip()}ishln(n){return this.assert(this.negative===0),this.iushln(n)}iushrn(n,r,i){this.assert(typeof n=="number"&&n>=0);let s;typeof r=="number"&&r!==0?s=(r-r%26)/26:s=0;const o=n%26,a=Math.min((n-o)/26,this.length),c=67108863^67108863>>>o<<o,l=i;s-=a,s=Math.max(0,s);let u=0;if(typeof l<"u"){for(;u<a;u++)l.words[u]=this.words[u];l.length=a}if(a!==0)if(this.length>a)for(this.length-=a,u=0;u<this.length;u++)this.words[u]=this.words[u+a];else this.words[0]=0,this.length=1;let d=0;for(u=this.length-1;u>=0&&(d!==0||u>=s);u--){const h=this.words[u]|0;this.words[u]=d<<26-o|h>>>o,d=h&c}return l!=null&&d!==0&&(l.words[l.length++]=d),this.length===0&&(this.words[0]=0,this.length=1),this.strip()}ishrn(n,r,i){return this.assert(this.negative===0),this.iushrn(n,r,i)}shln(n){return this.clone().ishln(n)}ushln(n){return this.clone().iushln(n)}shrn(n){return this.clone().ishrn(n)}ushrn(n){return this.clone().iushrn(n)}testn(n){this.assert(typeof n=="number"&&n>=0);const r=n%26,i=(n-r)/26,s=1<<r;return this.length<=i?!1:!!(this.words[i]&s)}imaskn(n){this.assert(typeof n=="number"&&n>=0);const r=n%26;let i=(n-r)/26;if(this.assert(this.negative===0,"imaskn works only with positive numbers"),this.length<=i)return this;if(r!==0&&i++,this.length=Math.min(i,this.length),r!==0){const s=67108863^67108863>>>r<<r;this.words[this.length-1]&=s}return this.strip()}maskn(n){return this.clone().imaskn(n)}iaddn(n){return this.assert(typeof n=="number"),this.assert(n<67108864,"num is too large"),n<0?this.isubn(-n):this.negative!==0?this.length===1&&(this.words[0]|0)<=n?(this.words[0]=n-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this):this._iaddn(n)}_iaddn(n){this.words[0]+=n;let r=0;for(;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this}isubn(n){if(this.assert(typeof n=="number"),this.assert(n<67108864),n<0)return this.iaddn(-n);if(this.negative!==0)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(let r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()}addn(n){return this.clone().iaddn(n)}subn(n){return this.clone().isubn(n)}iabs(){return this.negative=0,this}abs(){return this.clone().iabs()}_ishlnsubmul(n,r,i){const s=n.length+i;let o;this.expand(s);let a,c=0;for(o=0;o<n.length;o++){a=(this.words[o+i]|0)+c;const l=(n.words[o]|0)*r;a-=l&67108863,c=(a>>26)-(l/67108864|0),this.words[o+i]=a&67108863}for(;o<this.length-i;o++)a=(this.words[o+i]|0)+c,c=a>>26,this.words[o+i]=a&67108863;if(c===0)return this.strip();for(this.assert(c===-1,"carry must be -1"),c=0,o=0;o<this.length;o++)a=-(this.words[o]|0)+c,c=a>>26,this.words[o]=a&67108863;return this.negative=1,this.strip()}wordDiv(n,r){let i=this.length-n.length,s=this.clone(),o=n,a=o.words[o.length-1]|0;i=26-this.countWordBits(a),i!==0&&(o=o.ushln(i),s.iushln(i),a=o.words[o.length-1]|0);const l=s.length-o.length;let u;if(r!=="mod"){u=new rr,u.length=l+1,u.words=new Array(u.length);for(let h=0;h<u.length;h++)u.words[h]=0}const d=s.clone()._ishlnsubmul(o,1,l);d.negative===0&&(s=d,typeof u<"u"&&(u.words[l]=1));for(let h=l-1;h>=0;h--){let f=(s.words[o.length+h]|0)*67108864+(s.words[o.length+h-1]|0);for(f=Math.min(f/a|0,67108863),s._ishlnsubmul(o,f,h);s.negative!==0;)f--,s.negative=0,s._ishlnsubmul(o,1,h),s.isZero()||(s.negative^=1);typeof u<"u"&&(u.words[h]=f)}return typeof u<"u"&&u.strip(),s.strip(),r!=="div"&&i!==0&&s.iushrn(i),{div:u??null,mod:s}}divmod(n,r,i){if(this.assert(!n.isZero()),this.isZero())return{div:new rr(0),mod:new rr(0)};let s,o,a;return this.negative!==0&&n.negative===0?(a=this.neg().divmod(n,r),r!=="mod"&&(s=a.div.neg()),r!=="div"&&(o=a.mod.neg(),i===!0&&o.negative!==0&&o.iadd(n)),{div:s,mod:o}):this.negative===0&&n.negative!==0?(a=this.divmod(n.neg(),r),r!=="mod"&&(s=a.div.neg()),{div:s,mod:a.mod}):(this.negative&n.negative)!==0?(a=this.neg().divmod(n.neg(),r),r!=="div"&&(o=a.mod.neg(),i===!0&&o.negative!==0&&o.isub(n)),{div:a.div,mod:o}):n.length>this.length||this.cmp(n)<0?{div:new rr(0),mod:this}:n.length===1?r==="div"?{div:this.divn(n.words[0]),mod:null}:r==="mod"?{div:null,mod:new rr(this.modrn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new rr(this.modrn(n.words[0]))}:this.wordDiv(n,r)}div(n){return this.divmod(n,"div",!1).div}mod(n){return this.divmod(n,"mod",!1).mod}umod(n){return this.divmod(n,"mod",!0).mod}divRound(n){const r=this.divmod(n);if(r.mod.isZero())return r.div;const i=r.div.negative!==0?r.mod.isub(n):r.mod,s=n.ushrn(1),o=n.andln(1),a=i.cmp(s);return a<0||o===1&&a===0?r.div:r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)}modrn(n){const r=n<0;r&&(n=-n),this.assert(n<=67108863);const i=(1<<26)%n;let s=0;for(let o=this.length-1;o>=0;o--)s=(i*s+(this.words[o]|0))%n;return r?-s:s}idivn(n){const r=n<0;r&&(n=-n),this.assert(n<=67108863);let i=0;for(let s=this.length-1;s>=0;s--){const o=(this.words[s]|0)+i*67108864;this.words[s]=o/n|0,i=o%n}return this.strip(),r?this.ineg():this}divn(n){return this.clone().idivn(n)}egcd(n){this.assert(n.negative===0,"p must not be negative"),this.assert(!n.isZero(),"p must not be zero");let r=this;const i=n.clone();r.negative!==0?r=r.umod(n):r=r.clone();const s=new rr(1),o=new rr(0),a=new rr(0),c=new rr(1);let l=0;for(;r.isEven()&&i.isEven();)r.iushrn(1),i.iushrn(1),++l;const u=i.clone(),d=r.clone();for(;!r.isZero();){let h=0,f=1;for(;(r.words[0]&f)===0&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)(s.isOdd()||o.isOdd())&&(s.iadd(u),o.isub(d)),s.iushrn(1),o.iushrn(1);let p=0,g=1;for(;(i.words[0]&g)===0&&p<26;++p,g<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(u),c.isub(d)),a.iushrn(1),c.iushrn(1);r.cmp(i)>=0?(r.isub(i),s.isub(a),o.isub(c)):(i.isub(r),a.isub(s),c.isub(o))}return{a,b:c,gcd:i.iushln(l)}}_invmp(n){this.assert(n.negative===0,"p must not be negative"),this.assert(!n.isZero(),"p must not be zero");let r=this;const i=n.clone();r.negative!==0?r=r.umod(n):r=r.clone();const s=new rr(1),o=new rr(0),a=i.clone();for(;r.cmpn(1)>0&&i.cmpn(1)>0;){let l=0,u=1;for(;(r.words[0]&u)===0&&l<26;++l,u<<=1);if(l>0)for(r.iushrn(l);l-- >0;)s.isOdd()&&s.iadd(a),s.iushrn(1);let d=0,h=1;for(;(i.words[0]&h)===0&&d<26;++d,h<<=1);if(d>0)for(i.iushrn(d);d-- >0;)o.isOdd()&&o.iadd(a),o.iushrn(1);r.cmp(i)>=0?(r.isub(i),s.isub(o)):(i.isub(r),o.isub(s))}let c;return r.cmpn(1)===0?c=s:c=o,c.cmpn(0)<0&&c.iadd(n),c}gcd(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();let r=this.clone(),i=n.clone();r.negative=0,i.negative=0;let s=0;for(;r.isEven()&&i.isEven();s++)r.iushrn(1),i.iushrn(1);do{for(;r.isEven();)r.iushrn(1);for(;i.isEven();)i.iushrn(1);const o=r.cmp(i);if(o<0){const a=r;r=i,i=a}else if(o===0||i.cmpn(1)===0)break;r.isub(i)}while(!0);return i.iushln(s)}invm(n){return this.egcd(n).a.umod(n)}isEven(){return(this.words[0]&1)===0}isOdd(){return(this.words[0]&1)===1}andln(n){return this.words[0]&n}bincn(n){this.assert(typeof n=="number");const r=n%26,i=(n-r)/26,s=1<<r;if(this.length<=i)return this.expand(i+1),this.words[i]|=s,this;let o=s,a=i;for(;o!==0&&a<this.length;a++){let c=this.words[a]|0;c+=o,o=c>>>26,c&=67108863,this.words[a]=c}return o!==0&&(this.words[a]=o,this.length++),this}isZero(){return this.length===1&&this.words[0]===0}cmpn(n){const r=n<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this.strip();let i;if(this.length>1)i=1;else{r&&(n=-n),this.assert(n<=67108863,"Number is too big");const s=this.words[0]|0;i=s===n?0:s<n?-1:1}return this.negative!==0?-i|0:i}cmp(n){if(this.negative!==0&&n.negative===0)return-1;if(this.negative===0&&n.negative!==0)return 1;const r=this.ucmp(n);return this.negative!==0?-r|0:r}ucmp(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;let r=0;for(let i=this.length-1;i>=0;i--){const s=this.words[i]|0,o=n.words[i]|0;if(s!==o){s<o?r=-1:s>o&&(r=1);break}}return r}gtn(n){return this.cmpn(n)===1}gt(n){return this.cmp(n)===1}gten(n){return this.cmpn(n)>=0}gte(n){return this.cmp(n)>=0}ltn(n){return this.cmpn(n)===-1}lt(n){return this.cmp(n)===-1}lten(n){return this.cmpn(n)<=0}lte(n){return this.cmp(n)<=0}eqn(n){return this.cmpn(n)===0}eq(n){return this.cmp(n)===0}toRed(n){return this.assert(this.red==null,"Already a number in reduction context"),this.assert(this.negative===0,"red works only with positives"),n.convertTo(this).forceRed(n)}fromRed(){return this.assert(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)}forceRed(n){return this.red=n,this}redAdd(n){return this.assert(this.red,"redAdd works only with red numbers"),this.red.add(this,n)}redIAdd(n){return this.assert(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,n)}redSub(n){return this.assert(this.red,"redSub works only with red numbers"),this.red.sub(this,n)}redISub(n){return this.assert(this.red,"redISub works only with red numbers"),this.red.isub(this,n)}redShl(n){return this.assert(this.red,"redShl works only with red numbers"),this.red.shl(this,n)}redMul(n){return this.assert(this.red,"redMul works only with red numbers"),this.red.verify2(this,n),this.red.mul(this,n)}redIMul(n){return this.assert(this.red,"redMul works only with red numbers"),this.red.verify2(this,n),this.red.imul(this,n)}redSqr(){return this.assert(this.red,"redSqr works only with red numbers"),this.red.verify1(this),this.red.sqr(this)}redISqr(){return this.assert(this.red,"redISqr works only with red numbers"),this.red.verify1(this),this.red.isqr(this)}redSqrt(){return this.assert(this.red,"redSqrt works only with red numbers"),this.red.verify1(this),this.red.sqrt(this)}redInvm(){return this.assert(this.red,"redInvm works only with red numbers"),this.red.verify1(this),this.red.invm(this)}redNeg(){return this.assert(this.red,"redNeg works only with red numbers"),this.red.verify1(this),this.red.neg(this)}redPow(n){return this.assert(this.red!=null&&n.red==null,"redPow(normalNum)"),this.red.verify1(this),this.red.pow(this,n)}static fromHex(n,r){return r==="big"?new rr(n,16):new rr(n,16,"le")}toHex(n=0){return this.toString("hex",n*2)}static fromJSON(n){return new rr(n)}static fromNumber(n){return new rr(n)}static fromString(n,r){return new rr(n,r)}static fromSm(n,r="big"){let i=n;return n.length===0?new rr(0):(r==="little"&&(i=[...i],i=i.reverse()),(i[0]&128)!==0?(i=[...i],i[0]=i[0]&127,new rr(i).neg()):new rr(i))}toSm(n="big"){let r;return this.cmpn(0)===-1?(r=this.neg().toArray(),(r[0]&128)!==0?r=[128,...r]:r[0]=r[0]|128):(r=this.toArray(),(r[0]&128)!==0&&(r=[0,...r])),r.length===1&&r[0]===0&&(r=[]),n==="little"&&(r=r.reverse()),r}static fromBits(n,r=!1){if(n=(n&2147483648)!==0?n-4294967296:n,r&&(n&8388608)!==0)throw new Error("negative bit set");const i=n>>24,s=n&8388607;let o=[s>>24&255,s>>16&255,s>>8&255,s&255];if(i<=3)o=o.slice(1,1+i);else for(let a=0;a<i-3;a++)o.push(0);return(n&8388608)!==0?new rr(o).neg():new rr(o)}toBits(){let n;for(this.ltn(0)?n=this.neg().toArray("be"):n=this.toArray("be");n.length<4;)n.unshift(0);if(n.every(o=>o===0))return 0;for(;n[0]===0;)n.shift();let r=n.length,i=n.slice(0,3).reduce((o,a)=>o*256+a,0);(i&8388608)!==0&&(n.unshift(0),r+=1,i>>>=8);let s=r<<24|i;return this.ltn(0)&&(s|=8388608),s>>>0}static fromScriptNum(n,r,i){if(i===void 0&&(i=Number.MAX_SAFE_INTEGER),n.length>i)throw new Error("script number overflow");if(r===!0&&n.length>0&&(n[n.length-1]&127)===0&&(n.length<=1||(n[n.length-2]&128)===0))throw new Error("non-minimally encoded script number");return rr.fromSm(n,"little")}toScriptNum(){return this.toSm("little")}};return t.zeros=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],t.groupSizes=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],t.groupBases=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176],t.wordSize=26,PE.default=t,PE}var yg={},vg={},bg={},xg={},BL;function Vve(){if(BL)return xg;BL=1;var t=xg&&xg.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xg,"__esModule",{value:!0});const e=t(Ni());let n=class{constructor(i,s){this.name=i,this.p=new e.default(s,16),this.n=this.p.bitLength(),this.k=new e.default(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}_tmp(){const i=new e.default;return i.words=new Array(Math.ceil(this.n/13)),i}ireduce(i){let s=i,o;do this.split(s,this.tmp),s=this.imulK(s),s=s.iadd(this.tmp),o=s.bitLength();while(o>this.n);const a=o<this.n?-1:s.ucmp(this.p);return a===0?(s.words[0]=0,s.length=1):a>0?s.isub(this.p):(s.strip,s.strip()),s}split(i,s){i.iushrn(this.n,0,s)}imulK(i){return i.imul(this.k)}};return xg.default=n,xg}var FL;function Wve(){if(FL)return bg;FL=1;var t=bg&&bg.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bg,"__esModule",{value:!0});const e=t(Vve());let n=class extends e.default{constructor(){super("k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}split(i,s){const a=Math.min(i.length,9);let c=0;for(;c<a;c++)s.words[c]=i.words[c];if(s.length=a,i.length<=9){i.words[0]=0,i.length=1;return}let l=i.words[9];for(s.words[s.length++]=l&4194303,c=10;c<i.length;c++){const u=i.words[c]|0;i.words[c-10]=(u&4194303)<<4|l>>>22,l=u}l>>>=22,i.words[c-10]=l,l===0&&i.length>10?i.length-=10:i.length-=9}imulK(i){i.words[i.length]=0,i.words[i.length+1]=0,i.length+=2;let s=0;for(let o=0;o<i.length;o++){const a=i.words[o]|0;s+=a*977,i.words[o]=s&67108863,s=a*64+(s/67108864|0)}return i.words[i.length-1]===0&&(i.length--,i.words[i.length-1]===0&&i.length--),i}};return bg.default=n,bg}var UL;function DO(){if(UL)return vg;UL=1;var t=vg&&vg.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(vg,"__esModule",{value:!0});const e=t(Ni()),n=t(Wve());let r=class{constructor(s){if(s==="k256"){const o=new n.default;this.m=o.p,this.prime=o}else this.assert(s.gtn(1),"modulus must be greater than 1"),this.m=s,this.prime=null}assert(s,o="Assertion failed"){if(!s)throw new Error(o)}verify1(s){this.assert(s.negative===0,"red works only with positives"),this.assert(s.red,"red works only with red numbers")}verify2(s,o){this.assert((s.negative|o.negative)===0,"red works only with positives"),this.assert(s.red!=null&&s.red===o.red,"red works only with red numbers")}imod(s){return this.prime!=null?this.prime.ireduce(s).forceRed(this):(e.default.move(s,s.umod(this.m).forceRed(this)),s)}neg(s){return s.isZero()?s.clone():this.m.sub(s).forceRed(this)}add(s,o){this.verify2(s,o);const a=s.add(o);return a.cmp(this.m)>=0&&a.isub(this.m),a.forceRed(this)}iadd(s,o){this.verify2(s,o);const a=s.iadd(o);return a.cmp(this.m)>=0&&a.isub(this.m),a}sub(s,o){this.verify2(s,o);const a=s.sub(o);return a.cmpn(0)<0&&a.iadd(this.m),a.forceRed(this)}isub(s,o){this.verify2(s,o);const a=s.isub(o);return a.cmpn(0)<0&&a.iadd(this.m),a}shl(s,o){return this.verify1(s),this.imod(s.ushln(o))}imul(s,o){return this.verify2(s,o),this.imod(s.imul(o))}mul(s,o){return this.verify2(s,o),this.imod(s.mul(o))}isqr(s){return this.imul(s,s.clone())}sqr(s){return this.mul(s,s)}sqrt(s){if(s.isZero())return s.clone();const o=this.m.andln(3);if(this.assert(o%2===1),o===3){const b=this.m.add(new e.default(1)).iushrn(2);return this.pow(s,b)}const a=this.m.subn(1);let c=0;for(;!a.isZero()&&a.andln(1)===0;)c++,a.iushrn(1);this.assert(!a.isZero());const l=new e.default(1).toRed(this),u=l.redNeg(),d=this.m.subn(1).iushrn(1),h=this.m.bitLength(),f=new e.default(2*h*h).toRed(this);for(;this.pow(f,d).cmp(u)!==0;)f.redIAdd(u);let p=this.pow(f,a),g=this.pow(s,a.addn(1).iushrn(1)),m=this.pow(s,a),y=c;for(;m.cmp(l)!==0;){let b=m,x=0;for(;b.cmp(l)!==0;x++)b=b.redSqr();this.assert(x<y);const S=this.pow(p,new e.default(1).iushln(y-x-1));g=g.redMul(S),p=S.redSqr(),m=m.redMul(p),y=x}return g}invm(s){const o=s._invmp(this.m);return o.negative!==0?(o.negative=0,this.imod(o).redNeg()):this.imod(o)}pow(s,o){if(o.isZero())return new e.default(1).toRed(this);if(o.cmpn(1)===0)return s.clone();const a=4,c=new Array(1<<a);c[0]=new e.default(1).toRed(this),c[1]=s;let l=2;for(;l<c.length;l++)c[l]=this.mul(c[l-1],s);let u=c[0],d=0,h=0,f=o.bitLength()%26;for(f===0&&(f=26),l=o.length-1;l>=0;l--){const p=o.words[l];for(let g=f-1;g>=0;g--){const m=p>>g&1;if(u!==c[0]&&(u=this.sqr(u)),m===0&&d===0){h=0;continue}d<<=1,d|=m,h++,!(h!==a&&(l!==0||g!==0))&&(u=this.mul(u,c[d]),h=0,d=0)}f=26}return u}convertTo(s){const o=s.umod(this.m);return o===s?o.clone():o}convertFrom(s){const o=s.clone();return o.red=null,o}};return vg.default=r,vg}var wg={},$L;function jve(){if($L)return wg;$L=1;var t=wg&&wg.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(wg,"__esModule",{value:!0});const e=t(DO()),n=t(Ni());let r=class extends e.default{constructor(s){super(s),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n.default(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}convertTo(s){return this.imod(s.ushln(this.shift))}convertFrom(s){const o=this.imod(s.mul(this.rinv));return o.red=null,o}imul(s,o){if(s.isZero()||o.isZero())return s.words[0]=0,s.length=1,s;const a=s.imul(o),c=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),l=a.isub(c).iushrn(this.shift);let u=l;return l.cmp(this.m)>=0?u=l.isub(this.m):l.cmpn(0)<0&&(u=l.iadd(this.m)),u.forceRed(this)}mul(s,o){if(s.isZero()||o.isZero())return new n.default(0).forceRed(this);const a=s.mul(o),c=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),l=a.isub(c).iushrn(this.shift);let u=l;return l.cmp(this.m)>=0?u=l.isub(this.m):l.cmpn(0)<0&&(u=l.iadd(this.m)),u.forceRed(this)}invm(s){return this.imod(s._invmp(this.m).mul(this.r2)).forceRed(this)}};return wg.default=r,wg}var _g={},Sg={},zL;function KW(){if(zL)return Sg;zL=1;var t=Sg&&Sg.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Sg,"__esModule",{value:!0});const e=t(hu());let n=class{constructor(i){this.curve=new e.default,this.type=i,this.precomputed=null}};return Sg.default=n,Sg}var Eg={},HL;function qve(){if(HL)return Eg;HL=1;var t=Eg&&Eg.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Eg,"__esModule",{value:!0});const e=t(KW()),n=t(Ni()),r=t(gv());let i=class tm extends e.default{constructor(o,a,c){super("jacobian"),o===null&&a===null&&c===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new n.default(0)):(n.default.isBN(o)||(o=new n.default(o,16)),this.x=o,n.default.isBN(a)||(a=new n.default(a,16)),this.y=a,n.default.isBN(c)||(c=new n.default(c,16)),this.z=c),this.x.red==null&&(this.x=this.x.toRed(this.curve.red)),this.y.red==null&&(this.y=this.y.toRed(this.curve.red)),this.z.red==null&&(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}toP(){if(this.isInfinity())return new r.default(null,null);const o=this.z.redInvm(),a=o.redSqr(),c=this.x.redMul(a),l=this.y.redMul(a).redMul(o);return new r.default(c,l)}neg(){return new tm(this.x,this.y.redNeg(),this.z)}add(o){if(this.isInfinity())return o;if(o.isInfinity())return this;const a=o.z.redSqr(),c=this.z.redSqr(),l=this.x.redMul(a),u=o.x.redMul(c),d=this.y.redMul(a.redMul(o.z)),h=o.y.redMul(c.redMul(this.z)),f=l.redSub(u),p=d.redSub(h);if(f.cmpn(0)===0)return p.cmpn(0)!==0?new tm(null,null,null):this.dbl();const g=f.redSqr(),m=g.redMul(f),y=l.redMul(g),b=p.redSqr().redIAdd(m).redISub(y).redISub(y),x=p.redMul(y.redISub(b)).redISub(d.redMul(m)),S=this.z.redMul(o.z).redMul(f);return new tm(b,x,S)}mixedAdd(o){if(this.isInfinity())return o.toJ();if(o.isInfinity())return this;if(o.x===null||o.y===null)throw new Error("Point coordinates cannot be null");const a=this.z.redSqr(),c=this.x,l=o.x.redMul(a),u=this.y,d=o.y.redMul(a).redMul(this.z),h=c.redSub(l),f=u.redSub(d);if(h.cmpn(0)===0)return f.cmpn(0)!==0?new tm(null,null,null):this.dbl();const p=h.redSqr(),g=p.redMul(h),m=c.redMul(p),y=f.redSqr().redIAdd(g).redISub(m).redISub(m),b=f.redMul(m.redISub(y)).redISub(u.redMul(g)),x=this.z.redMul(h);return new tm(y,b,x)}dblp(o){if(o===0)return this;if(this.isInfinity())return this;if(typeof o>"u")return this.dbl();let a=this;for(let c=0;c<o;c++)a=a.dbl();return a}dbl(){if(this.isInfinity())return this;let o,a,c;if(this.zOne){const l=this.x.redSqr(),u=this.y.redSqr(),d=u.redSqr();let h=this.x.redAdd(u).redSqr().redISub(l).redISub(d);h=h.redIAdd(h);const f=l.redAdd(l).redIAdd(l),p=f.redSqr().redISub(h).redISub(h);let g=d.redIAdd(d);g=g.redIAdd(g),g=g.redIAdd(g),o=p,a=f.redMul(h.redISub(p)).redISub(g),c=this.y.redAdd(this.y)}else{const l=this.x.redSqr(),u=this.y.redSqr(),d=u.redSqr();let h=this.x.redAdd(u).redSqr().redISub(l).redISub(d);h=h.redIAdd(h);const f=l.redAdd(l).redIAdd(l),p=f.redSqr();let g=d.redIAdd(d);g=g.redIAdd(g),g=g.redIAdd(g),o=p.redISub(h).redISub(h),a=f.redMul(h.redISub(o)).redISub(g),c=this.y.redMul(this.z),c=c.redIAdd(c)}return new tm(o,a,c)}eq(o){if(o.type==="affine")return this.eq(o.toJ());if(this===o)return!0;const a=this.z.redSqr();o=o;const c=o.z.redSqr();if(this.x.redMul(c).redISub(o.x.redMul(a)).cmpn(0)!==0)return!1;const l=a.redMul(this.z),u=c.redMul(o.z);return this.y.redMul(u).redISub(o.y.redMul(l)).cmpn(0)===0}eqXToP(o){var a;const c=this.z.redSqr(),l=o.toRed((a=this.curve)===null||a===void 0?void 0:a.red).redMul(c);if(this.x.cmp(l)===0)return!0;const u=o.clone();if(this.curve===null||this.curve.redN==null)throw new Error("Curve or redN is not initialized.");const d=this.curve.redN.redMul(c);for(;u.cmp(this.curve.p)<0;){if(u.iadd(this.curve.n),u.cmp(this.curve.p)>=0)return!1;if(l.redIAdd(d),this.x.cmp(l)===0)return!0}return!1}inspect(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"}isInfinity(){return this.z.cmpn(0)===0}};return Eg.default=i,Eg}var Qb={},YM={},VL;function Li(){return VL||(VL=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.pbkdf2=t.sha512hmac=t.sha256hmac=t.hash160=t.hash256=t.sha512=t.sha256=t.sha1=t.ripemd160=t.SHA512HMAC=t.SHA1HMAC=t.SHA256HMAC=t.SHA512=t.SHA1=t.SHA256=t.RIPEMD160=t.toArray=void 0;const e=(oe,ne="Hash assertion failed")=>{if(!oe)throw new Error(ne)};class n{constructor(ne,de,Te,ke){this.pending=null,this.pendingTotal=0,this.blockSize=ne,this.outSize=de,this.hmacStrength=Te,this.padLength=ke/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}_update(ne,de){throw new Error("Not implemented")}_digest(){throw new Error("Not implemented")}_digestHex(){throw new Error("Not implemented")}update(ne,de){if(ne=i(ne,de),this.pending==null?this.pending=ne:this.pending=this.pending.concat(ne),this.pendingTotal+=ne.length,this.pending.length>=this._delta8){ne=this.pending;const Te=ne.length%this._delta8;this.pending=ne.slice(ne.length-Te,ne.length),this.pending.length===0&&(this.pending=null),ne=c(ne,0,ne.length-Te,this.endian);for(let ke=0;ke<ne.length;ke+=this._delta32)this._update(ne,ke)}return this}digest(){return this.update(this._pad()),e(this.pending===null),this._digest()}digestHex(){return this.update(this._pad()),e(this.pending===null),this._digestHex()}_pad(){let ne=this.pendingTotal;const de=this._delta8,Te=de-(ne+this.padLength)%de,ke=new Array(Te+this.padLength);ke[0]=128;let he;for(he=1;he<Te;he++)ke[he]=0;ne<<=3;let Xe;if(this.endian==="big"){for(Xe=8;Xe<this.padLength;Xe++)ke[he++]=0;ke[he++]=0,ke[he++]=0,ke[he++]=0,ke[he++]=0,ke[he++]=ne>>>24&255,ke[he++]=ne>>>16&255,ke[he++]=ne>>>8&255,ke[he++]=ne&255}else for(ke[he++]=ne&255,ke[he++]=ne>>>8&255,ke[he++]=ne>>>16&255,ke[he++]=ne>>>24&255,ke[he++]=0,ke[he++]=0,ke[he++]=0,ke[he++]=0,Xe=8;Xe<this.padLength;Xe++)ke[he++]=0;return ke}}function r(oe,ne){return(oe.charCodeAt(ne)&64512)!==55296||ne<0||ne+1>=oe.length?!1:(oe.charCodeAt(ne+1)&64512)===56320}function i(oe,ne){if(Array.isArray(oe))return oe.slice();if(!oe)return[];const de=[];if(typeof oe=="string")if(ne!=="hex"){let Te=0;for(let ke=0;ke<oe.length;ke++){let he=oe.charCodeAt(ke);he<128?de[Te++]=he:he<2048?(de[Te++]=he>>6|192,de[Te++]=he&63|128):r(oe,ke)?(he=65536+((he&1023)<<10)+(oe.charCodeAt(++ke)&1023),de[Te++]=he>>18|240,de[Te++]=he>>12&63|128,de[Te++]=he>>6&63|128,de[Te++]=he&63|128):(de[Te++]=he>>12|224,de[Te++]=he>>6&63|128,de[Te++]=he&63|128)}}else{oe=oe.replace(/[^a-z0-9]+/gi,""),oe.length%2!==0&&(oe="0"+oe);for(let Te=0;Te<oe.length;Te+=2)de.push(parseInt(oe[Te]+oe[Te+1],16))}else{oe=oe;for(let Te=0;Te<oe.length;Te++)de[Te]=oe[Te]|0}return de}t.toArray=i;function s(oe){return(oe>>>24|oe>>>8&65280|oe<<8&16711680|(oe&255)<<24)>>>0}function o(oe,ne){let de="";for(let Te=0;Te<oe.length;Te++){let ke=oe[Te];ne==="little"&&(ke=s(ke)),de+=a(ke.toString(16))}return de}function a(oe){return oe.length===7?"0"+oe:oe.length===6?"00"+oe:oe.length===5?"000"+oe:oe.length===4?"0000"+oe:oe.length===3?"00000"+oe:oe.length===2?"000000"+oe:oe.length===1?"0000000"+oe:oe}function c(oe,ne,de,Te){const ke=de-ne;e(ke%4===0);const he=new Array(ke/4);for(let Xe=0,$e=ne;Xe<he.length;Xe++,$e+=4){let Qe;Te==="big"?Qe=oe[$e]<<24|oe[$e+1]<<16|oe[$e+2]<<8|oe[$e+3]:Qe=oe[$e+3]<<24|oe[$e+2]<<16|oe[$e+1]<<8|oe[$e],he[Xe]=Qe>>>0}return he}function l(oe,ne){const de=new Array(oe.length*4);for(let Te=0,ke=0;Te<oe.length;Te++,ke+=4){const he=oe[Te];ne==="big"?(de[ke]=he>>>24,de[ke+1]=he>>>16&255,de[ke+2]=he>>>8&255,de[ke+3]=he&255):(de[ke+3]=he>>>24,de[ke+2]=he>>>16&255,de[ke+1]=he>>>8&255,de[ke]=he&255)}return de}function u(oe,ne){return oe>>>ne|oe<<32-ne}function d(oe,ne){return oe<<ne|oe>>>32-ne}function h(oe,ne){return oe+ne>>>0}function f(oe,ne,de){return oe+ne+de>>>0}function p(oe,ne,de,Te){return oe+ne+de+Te>>>0}function g(oe,ne,de,Te,ke){return oe+ne+de+Te+ke>>>0}function m(oe,ne,de,Te){if(oe===0)return y(ne,de,Te);if(oe===1||oe===3)return x(ne,de,Te);if(oe===2)return b(ne,de,Te)}function y(oe,ne,de){return oe&ne^~oe&de}function b(oe,ne,de){return oe&ne^oe&de^ne&de}function x(oe,ne,de){return oe^ne^de}function S(oe){return u(oe,2)^u(oe,13)^u(oe,22)}function P(oe){return u(oe,6)^u(oe,11)^u(oe,25)}function _(oe){return u(oe,7)^u(oe,18)^oe>>>3}function I(oe){return u(oe,17)^u(oe,19)^oe>>>10}const C=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],A=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],M=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],k=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];function O(oe,ne,de,Te){return oe<=15?ne^de^Te:oe<=31?ne&de|~ne&Te:oe<=47?(ne|~de)^Te:oe<=63?ne&Te|de&~Te:ne^(de|~Te)}function B(oe){return oe<=15?0:oe<=31?1518500249:oe<=47?1859775393:oe<=63?2400959708:2840853838}function $(oe){return oe<=15?1352829926:oe<=31?1548603684:oe<=47?1836072691:oe<=63?2053994217:0}function U(oe,ne,de,Te){const ke=oe[ne],he=oe[ne+1],Xe=Te+he>>>0,$e=(Xe<Te?1:0)+de+ke;oe[ne]=$e>>>0,oe[ne+1]=Xe}function q(oe,ne,de,Te){return(ne+Te>>>0<ne?1:0)+oe+de>>>0}function K(oe,ne,de,Te){return ne+Te>>>0}function V(oe,ne,de,Te,ke,he,Xe,$e){let Qe=0,ut=ne;return ut=ut+Te>>>0,Qe+=ut<ne?1:0,ut=ut+he>>>0,Qe+=ut<he?1:0,ut=ut+$e>>>0,Qe+=ut<$e?1:0,oe+de+ke+Xe+Qe>>>0}function G(oe,ne,de,Te,ke,he,Xe,$e){return ne+Te+he+$e>>>0}function j(oe,ne,de,Te,ke,he,Xe,$e,Qe,ut){let gt=0,Tt=ne;return Tt=Tt+Te>>>0,gt+=Tt<ne?1:0,Tt=Tt+he>>>0,gt+=Tt<he?1:0,Tt=Tt+$e>>>0,gt+=Tt<$e?1:0,Tt=Tt+ut>>>0,gt+=Tt<ut?1:0,oe+de+ke+Xe+Qe+gt>>>0}function Q(oe,ne,de,Te,ke,he,Xe,$e,Qe,ut){return ne+Te+he+$e+ut>>>0}function se(oe,ne,de){return(ne<<32-de|oe>>>de)>>>0}function Z(oe,ne,de){return(oe<<32-de|ne>>>de)>>>0}function ie(oe,ne,de){return oe>>>de}function pe(oe,ne,de){return(oe<<32-de|ne>>>de)>>>0}class ue extends n{constructor(){super(512,160,192,64),this.endian="little",this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}_update(ne,de){let Te=this.h[0],ke=this.h[1],he=this.h[2],Xe=this.h[3],$e=this.h[4],Qe=Te,ut=ke,gt=he,Tt=Xe,Kt=$e,Zt;for(let Bt=0;Bt<80;Bt++)Zt=h(d(p(Te,O(Bt,ke,he,Xe),ne[C[Bt]+de],B(Bt)),M[Bt]),$e),Te=$e,$e=Xe,Xe=d(he,10),he=ke,ke=Zt,Zt=h(d(p(Qe,O(79-Bt,ut,gt,Tt),ne[A[Bt]+de],$(Bt)),k[Bt]),Kt),Qe=Kt,Kt=Tt,Tt=d(gt,10),gt=ut,ut=Zt;Zt=f(this.h[1],he,Tt),this.h[1]=f(this.h[2],Xe,Kt),this.h[2]=f(this.h[3],$e,Qe),this.h[3]=f(this.h[4],Te,ut),this.h[4]=f(this.h[0],ke,gt),this.h[0]=Zt}_digest(){return l(this.h,"little")}_digestHex(){return o(this.h,"little")}}t.RIPEMD160=ue;class le extends n{constructor(){super(512,256,192,64),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],this.W=new Array(64)}_update(ne,de){const Te=this.W;de===void 0&&(de=0);let ke;for(ke=0;ke<16;ke++)Te[ke]=ne[de+ke];for(;ke<Te.length;ke++)Te[ke]=p(I(Te[ke-2]),Te[ke-7],_(Te[ke-15]),Te[ke-16]);let he=this.h[0],Xe=this.h[1],$e=this.h[2],Qe=this.h[3],ut=this.h[4],gt=this.h[5],Tt=this.h[6],Kt=this.h[7];for(e(this.k.length===Te.length),ke=0;ke<Te.length;ke++){const Zt=g(Kt,P(ut),y(ut,gt,Tt),this.k[ke],Te[ke]),Bt=h(S(he),b(he,Xe,$e));Kt=Tt,Tt=gt,gt=ut,ut=h(Qe,Zt),Qe=$e,$e=Xe,Xe=he,he=h(Zt,Bt)}this.h[0]=h(this.h[0],he),this.h[1]=h(this.h[1],Xe),this.h[2]=h(this.h[2],$e),this.h[3]=h(this.h[3],Qe),this.h[4]=h(this.h[4],ut),this.h[5]=h(this.h[5],gt),this.h[6]=h(this.h[6],Tt),this.h[7]=h(this.h[7],Kt)}_digest(){return l(this.h,"big")}_digestHex(){return o(this.h,"big")}}t.SHA256=le;class ae extends n{constructor(){super(512,160,80,64),this.k=[1518500249,1859775393,2400959708,3395469782],this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}_update(ne,de){const Te=this.W;de===void 0&&(de=0);let ke;for(ke=0;ke<16;ke++)Te[ke]=ne[de+ke];for(;ke<Te.length;ke++)Te[ke]=d(Te[ke-3]^Te[ke-8]^Te[ke-14]^Te[ke-16],1);let he=this.h[0],Xe=this.h[1],$e=this.h[2],Qe=this.h[3],ut=this.h[4];for(ke=0;ke<Te.length;ke++){const gt=~~(ke/20),Tt=g(d(he,5),m(gt,Xe,$e,Qe),ut,Te[ke],this.k[gt]);ut=Qe,Qe=$e,$e=d(Xe,30),Xe=he,he=Tt}this.h[0]=h(this.h[0],he),this.h[1]=h(this.h[1],Xe),this.h[2]=h(this.h[2],$e),this.h[3]=h(this.h[3],Qe),this.h[4]=h(this.h[4],ut)}_digest(){return l(this.h,"big")}_digestHex(){return o(this.h,"big")}}t.SHA1=ae;class _e extends n{constructor(){super(1024,512,192,128),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],this.W=new Array(160)}_prepareBlock(ne,de){const Te=this.W;let ke;for(ke=0;ke<32;ke++)Te[ke]=ne[de+ke];for(;ke<Te.length;ke+=2){const he=te(Te[ke-4],Te[ke-3]),Xe=ee(Te[ke-4],Te[ke-3]),$e=Te[ke-14],Qe=Te[ke-13],ut=Re(Te[ke-30],Te[ke-29]),gt=je(Te[ke-30],Te[ke-29]),Tt=Te[ke-32],Kt=Te[ke-31];Te[ke]=V(he,Xe,$e,Qe,ut,gt,Tt,Kt),Te[ke+1]=G(he,Xe,$e,Qe,ut,gt,Tt,Kt)}}_update(ne,de){this._prepareBlock(ne,de);const Te=this.W;let ke=this.h[0],he=this.h[1],Xe=this.h[2],$e=this.h[3],Qe=this.h[4],ut=this.h[5],gt=this.h[6],Tt=this.h[7],Kt=this.h[8],Zt=this.h[9],Bt=this.h[10],_n=this.h[11],hn=this.h[12],bn=this.h[13],Wn=this.h[14],Un=this.h[15];e(this.k.length===Te.length);for(let Jn=0;Jn<Te.length;Jn+=2){let ci=Wn,fr=Un,Ur=Pe(Kt,Zt),Zr=He(Kt,Zt);const jr=ye(Kt,Zt,Bt,_n,hn),Pi=Ae(Kt,Zt,Bt,_n,hn,bn),at=this.k[Jn],Je=this.k[Jn+1],At=Te[Jn],Ht=Te[Jn+1],nn=j(ci,fr,Ur,Zr,jr,Pi,at,Je,At,Ht),Vt=Q(ci,fr,Ur,Zr,jr,Pi,at,Je,At,Ht);ci=ce(ke,he),fr=Ge(ke,he),Ur=Oe(ke,he,Xe,$e,Qe),Zr=Be(ke,he,Xe,$e,Qe,ut);const Tn=q(ci,fr,Ur,Zr),ve=K(ci,fr,Ur,Zr);Wn=hn,Un=bn,hn=Bt,bn=_n,Bt=Kt,_n=Zt,Kt=q(gt,Tt,nn,Vt),Zt=K(Tt,Tt,nn,Vt),gt=Qe,Tt=ut,Qe=Xe,ut=$e,Xe=ke,$e=he,ke=q(nn,Vt,Tn,ve),he=K(nn,Vt,Tn,ve)}U(this.h,0,ke,he),U(this.h,2,Xe,$e),U(this.h,4,Qe,ut),U(this.h,6,gt,Tt),U(this.h,8,Kt,Zt),U(this.h,10,Bt,_n),U(this.h,12,hn,bn),U(this.h,14,Wn,Un)}_digest(){return l(this.h,"big")}_digestHex(){return o(this.h,"big")}}t.SHA512=_e;function ye(oe,ne,de,Te,ke,he){let Xe=oe&de^~oe&ke;return Xe<0&&(Xe+=4294967296),Xe}function Ae(oe,ne,de,Te,ke,he){let Xe=ne&Te^~ne&he;return Xe<0&&(Xe+=4294967296),Xe}function Oe(oe,ne,de,Te,ke,he){let Xe=oe&de^oe&ke^de&ke;return Xe<0&&(Xe+=4294967296),Xe}function Be(oe,ne,de,Te,ke,he){let Xe=ne&Te^ne&he^Te&he;return Xe<0&&(Xe+=4294967296),Xe}function ce(oe,ne){const de=se(oe,ne,28),Te=se(ne,oe,2),ke=se(ne,oe,7);let he=de^Te^ke;return he<0&&(he+=4294967296),he}function Ge(oe,ne){const de=Z(oe,ne,28),Te=Z(ne,oe,2),ke=Z(ne,oe,7);let he=de^Te^ke;return he<0&&(he+=4294967296),he}function Pe(oe,ne){const de=se(oe,ne,14),Te=se(oe,ne,18),ke=se(ne,oe,9);let he=de^Te^ke;return he<0&&(he+=4294967296),he}function He(oe,ne){const de=Z(oe,ne,14),Te=Z(oe,ne,18),ke=Z(ne,oe,9);let he=de^Te^ke;return he<0&&(he+=4294967296),he}function Re(oe,ne){const de=se(oe,ne,1),Te=se(oe,ne,8),ke=ie(oe,ne,7);let he=de^Te^ke;return he<0&&(he+=4294967296),he}function je(oe,ne){const de=Z(oe,ne,1),Te=Z(oe,ne,8),ke=pe(oe,ne,7);let he=de^Te^ke;return he<0&&(he+=4294967296),he}function te(oe,ne){const de=se(oe,ne,19),Te=se(ne,oe,29),ke=ie(oe,ne,6);let he=de^Te^ke;return he<0&&(he+=4294967296),he}function ee(oe,ne){const de=Z(oe,ne,19),Te=Z(ne,oe,29),ke=pe(oe,ne,6);let he=de^Te^ke;return he<0&&(he+=4294967296),he}class X{constructor(ne){this.blockSize=64,this.outSize=32,ne=i(ne,"hex"),ne.length>this.blockSize&&(ne=new le().update(ne).digest()),e(ne.length<=this.blockSize);let de;for(de=ne.length;de<this.blockSize;de++)ne.push(0);for(de=0;de<ne.length;de++)ne[de]^=54;for(this.inner=new le().update(ne),de=0;de<ne.length;de++)ne[de]^=106;this.outer=new le().update(ne)}update(ne,de){return this.inner.update(ne,de),this}digest(){return this.outer.update(this.inner.digest()),this.outer.digest()}digestHex(){return this.outer.update(this.inner.digest()),this.outer.digestHex()}}t.SHA256HMAC=X;class we{constructor(ne){this.blockSize=64,ne=i(ne,"hex"),ne.length>this.blockSize&&(ne=new ae().update(ne).digest());let de;for(de=ne.length;de<this.blockSize;de++)ne.push(0);for(de=0;de<ne.length;de++)ne[de]^=54;for(this.inner=new ae().update(ne),de=0;de<ne.length;de++)ne[de]^=106;this.outer=new ae().update(ne)}update(ne,de){return this.inner.update(ne,de),this}digest(){return this.outer.update(this.inner.digest()),this.outer.digest()}digestHex(){return this.outer.update(this.inner.digest()),this.outer.digestHex()}}t.SHA1HMAC=we;class Ne{constructor(ne){this.blockSize=128,this.outSize=32,ne=i(ne,"hex"),ne.length>this.blockSize&&(ne=new _e().update(ne).digest()),e(ne.length<=this.blockSize);let de;for(de=ne.length;de<this.blockSize;de++)ne.push(0);for(de=0;de<ne.length;de++)ne[de]^=54;for(this.inner=new _e().update(ne),de=0;de<ne.length;de++)ne[de]^=106;this.outer=new _e().update(ne)}update(ne,de){return this.inner.update(ne,de),this}digest(){return this.outer.update(this.inner.digest()),this.outer.digest()}digestHex(){return this.outer.update(this.inner.digest()),this.outer.digestHex()}}t.SHA512HMAC=Ne;const We=(oe,ne)=>new ue().update(oe,ne).digest();t.ripemd160=We;const xe=(oe,ne)=>new ae().update(oe,ne).digest();t.sha1=xe;const Ve=(oe,ne)=>new le().update(oe,ne).digest();t.sha256=Ve;const be=(oe,ne)=>new _e().update(oe,ne).digest();t.sha512=be;const ge=(oe,ne)=>{const de=new le().update(oe,ne).digest();return new le().update(de).digest()};t.hash256=ge;const Se=(oe,ne)=>{const de=new le().update(oe,ne).digest();return new ue().update(de).digest()};t.hash160=Se;const Ie=(oe,ne,de)=>new X(oe).update(ne,de).digest();t.sha256hmac=Ie;const me=(oe,ne,de)=>new Ne(oe).update(ne,de).digest();t.sha512hmac=me;function Ee(oe,ne,de,Te,ke="sha512"){if(ke!=="sha512")throw new Error("Only sha512 is supported in this PBKDF2 implementation");const he=new Array(Te),Xe=[...ne,0,0,0,0];let $e=0;const Qe=64,ut=Math.ceil(Te/Qe);for(let gt=1;gt<=ut;gt++){Xe[ne.length]=gt>>24&255,Xe[ne.length+1]=gt>>16&255,Xe[ne.length+2]=gt>>8&255,Xe[ne.length+3]=gt&255;const Tt=(0,t.sha512hmac)(oe,Xe);let Kt=Tt;for(let Zt=1;Zt<de;Zt++){Kt=(0,t.sha512hmac)(oe,Kt);for(let Bt=0;Bt<Qe;Bt++)Tt[Bt]^=Kt[Bt]}for(let Zt=0;Zt<Tt.length;Zt++)he[$e+Zt]=Tt[Zt];$e+=Qe}return he.slice(0,Te)}t.pbkdf2=Ee}(YM)),YM}var WL;function Yn(){return WL||(WL=1,function(t){var e=Qb&&Qb.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(t,"__esModule",{value:!0}),t.minimallyEncode=t.Reader=t.Writer=t.fromBase58Check=t.toBase58Check=t.toBase58=t.fromBase58=t.toBase64=t.encode=t.toUTF8=t.toArray=t.toHex=t.zero2=void 0;const n=e(Ni()),r=Li(),i=P=>P.length%2===1?"0"+P:P;t.zero2=i;const s=P=>{let _="";for(const I of P)_+=(0,t.zero2)(I.toString(16));return _};t.toHex=s;const o=(P,_)=>{if(Array.isArray(P))return P.slice();if(P===void 0)return[];if(typeof P!="string")return Array.from(P,I=>I|0);switch(_){case"hex":return a(P);case"base64":return c(P);default:return l(P)}};t.toArray=o;const a=P=>{P=P.replace(/[^a-z0-9]+/gi,""),P.length%2!==0&&(P="0"+P);const _=[];for(let I=0;I<P.length;I+=2)_.push(parseInt(P[I]+P[I+1],16));return _},c=P=>{const _="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I=[];let C=0,A=0;for(const M of P.replace(/=+$/,""))C=C<<6|_.indexOf(M),A+=6,A>=8&&(A-=8,I.push(C>>A&255),C&=(1<<A)-1);return I};function l(P){const _=[];for(let I=0;I<P.length;I++){const C=P.codePointAt(I);if(C===void 0)throw new Error(`Index out of range: ${I}`);let A=C;A>65535?I++:A>=55296&&A<=57343&&(A=65533),A<=127?_.push(A):A<=2047?_.push(192|A>>6,128|A&63):A<=65535?_.push(224|A>>12,128|A>>6&63,128|A&63):_.push(240|A>>18,128|A>>12&63,128|A>>6&63,128|A&63)}return _}const u=P=>{let _="",I=0;for(let C=0;C<P.length;C++){const A=P[C];if(I>0){I--;continue}if(A<=127)_+=String.fromCharCode(A);else if(A>=192&&A<=223){const M=P[C+1];I=1;const k=(A&31)<<6|M&63;_+=String.fromCharCode(k)}else if(A>=224&&A<=239){const M=P[C+1],k=P[C+2];I=2;const O=(A&15)<<12|(M&63)<<6|k&63;_+=String.fromCharCode(O)}else if(A>=240&&A<=247){const M=P[C+1],k=P[C+2],O=P[C+3];I=3;const B=(A&7)<<18|(M&63)<<12|(k&63)<<6|O&63,$=55296+(B-65536>>10),U=56320+(B-65536&1023);_+=String.fromCharCode($,U)}}return _};t.toUTF8=u;const d=(P,_)=>{switch(_){case"hex":return(0,t.toHex)(P);case"utf8":return(0,t.toUTF8)(P);default:return P}};t.encode=d;function h(P){const _="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";let I="",C;for(C=0;C<P.length;C+=3){const A=P[C],M=C+1<P.length?P[C+1]:0,k=C+2<P.length?P[C+2]:0,O=A>>2,B=(A&3)<<4|M>>4,$=(M&15)<<2|k>>6,U=k&63;I+=_.charAt(O)+_.charAt(B),I+=C+1<P.length?_.charAt($):"=",I+=C+2<P.length?_.charAt(U):"="}return I}t.toBase64=h;const f="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",p=P=>{var _;if(P===""||typeof P!="string")throw new Error(`Expected base58 string but got ${P}`);const I=P.match(/[IOl0]/gmu);if(I!==null)throw new Error(`Invalid base58 character ${I.join("")}`);const C=P.match(/^1+/gmu),A=C!==null?C[0].length:0,M=(P.length-A)*(Math.log(58)/Math.log(256))+1>>>0;return[...new Uint8Array([...new Uint8Array(A),...((_=P.match(/./gmu))!==null&&_!==void 0?_:[]).map(O=>f.indexOf(O)).reduce((O,B)=>(O=O.map($=>{const U=$*58+B;return B=U>>8,U}),O),new Uint8Array(M)).reverse().filter((O=>B=>O=O||B)(!1))])]};t.fromBase58=p;const g=P=>{const _=Array(256).fill(-1);for(let C=0;C<f.length;++C)_[f.charCodeAt(C)]=C;const I=[];for(const C of P){let A=C;for(let M=0;M<I.length;++M){const k=(_[I[M]]<<8)+A;I[M]=f.charCodeAt(k%58),A=k/58|0}for(;A!==0;)I.push(f.charCodeAt(A%58)),A=A/58|0}for(const C of P){if(C!==0)break;I.push(49)}return I.reverse(),String.fromCharCode(...I)};t.toBase58=g;const m=(P,_=[0])=>{let I=(0,r.hash256)([..._,...P]);return I=[..._,...P,...I.slice(0,4)],(0,t.toBase58)(I)};t.toBase58Check=m;const y=(P,_,I=1)=>{const C=(0,t.fromBase58)(P);let A=C.slice(0,I),M=C.slice(I,-4),k=[...A,...M];return k=(0,r.hash256)(k),C.slice(-4).forEach((O,B)=>{if(O!==k[B])throw new Error("Invalid checksum")}),_==="hex"&&(A=(0,t.toHex)(A),M=(0,t.toHex)(M)),{prefix:A,data:M}};t.fromBase58Check=y;class b{constructor(_){this.bufs=_!==void 0?_:[]}getLength(){let _=0;for(const I of this.bufs)_=_+I.length;return _}toArray(){const _=this.getLength(),I=new Array(_);let C=0;for(const A of this.bufs)for(const M of A)I[C++]=M;return I}write(_){return this.bufs.push(_),this}writeReverse(_){const I=new Array(_.length);for(let C=0;C<I.length;C++)I[C]=_[_.length-1-C];return this.bufs.push(I),this}writeUInt8(_){const I=new Array(1);return I[0]=_,this.write(I),this}writeInt8(_){const I=new Array(1);return I[0]=_&255,this.write(I),this}writeUInt16BE(_){return this.bufs.push([_>>8&255,_&255]),this}writeInt16BE(_){return this.writeUInt16BE(_&65535)}writeUInt16LE(_){return this.bufs.push([_&255,_>>8&255]),this}writeInt16LE(_){return this.writeUInt16LE(_&65535)}writeUInt32BE(_){return this.bufs.push([_>>24&255,_>>16&255,_>>8&255,_&255]),this}writeInt32BE(_){return this.writeUInt32BE(_>>>0)}writeUInt32LE(_){return this.bufs.push([_&255,_>>8&255,_>>16&255,_>>24&255]),this}writeInt32LE(_){return this.writeUInt32LE(_>>>0)}writeUInt64BEBn(_){const I=_.toArray("be",8);return this.write(I),this}writeUInt64LEBn(_){const I=_.toArray("be",8);return this.writeReverse(I),this}writeUInt64LE(_){const I=new n.default(_).toArray("be",8);return this.writeReverse(I),this}writeVarIntNum(_){const I=b.varIntNum(_);return this.write(I),this}writeVarIntBn(_){const I=b.varIntBn(_);return this.write(I),this}static varIntNum(_){let I;if(_<253)I=[_];else if(_<65536)I=[253,_&255,_>>8&255];else if(_<4294967296)I=[254,_&255,_>>8&255,_>>16&255,_>>24&255];else{const C=_&4294967295,A=Math.floor(_/4294967296)&4294967295;I=[255,C&255,C>>8&255,C>>16&255,C>>24&255,A&255,A>>8&255,A>>16&255,A>>24&255]}return I}static varIntBn(_){let I;if(_.ltn(253))I=[_.toNumber()];else if(_.ltn(65536)){const C=_.toNumber();I=[253,C&255,C>>8&255]}else if(_.lt(new n.default(4294967296))){const C=_.toNumber();I=[254,C&255,C>>8&255,C>>16&255,C>>24&255]}else{const C=new b;C.writeUInt8(255),C.writeUInt64LEBn(_),I=C.toArray()}return I}}t.Writer=b;class x{constructor(_=[],I=0){this.bin=_,this.pos=I}eof(){return this.pos>=this.bin.length}read(_=this.bin.length){const I=this.pos,C=this.pos+_;return this.pos=C,this.bin.slice(I,C)}readReverse(_=this.bin.length){const I=new Array(_);for(let C=0;C<_;C++)I[C]=this.bin[this.pos+_-1-C];return this.pos+=_,I}readUInt8(){const _=this.bin[this.pos];return this.pos+=1,_}readInt8(){const _=this.bin[this.pos];return this.pos+=1,(_&128)!==0?_-256:_}readUInt16BE(){const _=this.bin[this.pos]<<8|this.bin[this.pos+1];return this.pos+=2,_}readInt16BE(){const _=this.readUInt16BE();return(_&32768)!==0?_-65536:_}readUInt16LE(){const _=this.bin[this.pos]|this.bin[this.pos+1]<<8;return this.pos+=2,_}readInt16LE(){const _=this.readUInt16LE();return(_&32768)!==0?_-65536:_}readUInt32BE(){const _=this.bin[this.pos]*16777216+(this.bin[this.pos+1]<<16|this.bin[this.pos+2]<<8|this.bin[this.pos+3]);return this.pos+=4,_}readInt32BE(){const _=this.readUInt32BE();return(_&2147483648)!==0?_-4294967296:_}readUInt32LE(){const _=(this.bin[this.pos]|this.bin[this.pos+1]<<8|this.bin[this.pos+2]<<16|this.bin[this.pos+3]<<24)>>>0;return this.pos+=4,_}readInt32LE(){const _=this.readUInt32LE();return(_&2147483648)!==0?_-4294967296:_}readUInt64BEBn(){const _=this.bin.slice(this.pos,this.pos+8),I=new n.default(_);return this.pos=this.pos+8,I}readUInt64LEBn(){const _=this.readReverse(8);return new n.default(_)}readVarIntNum(){const _=this.readUInt8();let I;switch(_){case 253:return this.readUInt16LE();case 254:return this.readUInt32LE();case 255:if(I=this.readUInt64LEBn(),I.lte(new n.default(2).pow(new n.default(53))))return I.toNumber();throw new Error("number too large to retain precision - use readVarIntBn");default:return _}}readVarInt(){switch(this.bin[this.pos]){case 253:return this.read(3);case 254:return this.read(5);case 255:return this.read(9);default:return this.read(1)}}readVarIntBn(){const _=this.readUInt8();switch(_){case 253:return new n.default(this.readUInt16LE());case 254:return new n.default(this.readUInt32LE());case 255:return this.readUInt64LEBn();default:return new n.default(_)}}}t.Reader=x;const S=P=>{if(P.length===0)return P;const _=P[P.length-1];if((_&127)!==0)return P;if(P.length===1)return[];if((P[P.length-2]&128)!==0)return P;for(let I=P.length-1;I>0;I--)if(P[I-1]!==0)return(P[I-1]&128)!==0?(P[I]=_,P.slice(0,I+1)):(P[I-1]|=_,P.slice(0,I));return[]};t.minimallyEncode=S}(Qb)),Qb}var jL;function gv(){if(jL)return _g;jL=1;var t=_g&&_g.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(_g,"__esModule",{value:!0});const e=t(KW()),n=t(qve()),r=t(Ni()),i=Yn(),s=t(DO());let o=class xs extends e.default{static fromDER(c){if((c[0]===4||c[0]===6||c[0]===7)&&c.length-1===2*32){if(c[0]===6){if(c[c.length-1]%2!==0)throw new Error("Point string value is wrong length")}else if(c[0]===7&&c[c.length-1]%2!==1)throw new Error("Point string value is wrong length");return new xs(c.slice(1,33),c.slice(33,1+2*32))}else if((c[0]===2||c[0]===3)&&c.length-1===32)return xs.fromX(c.slice(1,33),c[0]===3);throw new Error("Unknown point format")}static fromString(c){const l=(0,i.toArray)(c,"hex");return xs.fromDER(l)}static redSqrtOptimized(c){const d=xs.red.m.addn(1).iushrn(2);return c.redPow(d)}static fromX(c,l){if(typeof BigInt=="function"){let f=function(C,A){return(C%A+A)%A},p=function(C,A,M){let k=BigInt(1);for(C=f(C,M);A>BigInt(0);)(A&BigInt(1))===BigInt(1)&&(k=f(k*C,M)),A>>=BigInt(1),C=f(C*C,M);return k},g=function(C,A){const M=A+BigInt(1)>>BigInt(2),k=p(C,M,A);return f(k*k,A)===f(C,A)?k:null};var u=f,d=p,h=g;const m=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F"),y=BigInt(7);let b;if(c instanceof r.default)b=BigInt("0x"+c.toString(16));else if(typeof c=="string")b=BigInt("0x"+c);else if(Array.isArray(c))b=BigInt("0x"+(0,i.toHex)(c).padStart(64,"0"));else if(typeof c=="number")b=BigInt(c);else throw new Error("Invalid x-coordinate type");b=f(b,m);const x=f(p(b,BigInt(3),m)+y,m);let S=g(x,m);if(S===null)throw new Error("Invalid point");const P=S%BigInt(2)===BigInt(1);(l&&!P||!l&&P)&&(S=m-S);const _=new r.default(b.toString(16),16),I=new r.default(S.toString(16),16);return new xs(_,I)}else{const f=new s.default("k256"),p=new r.default(0).toRed(f),g=new r.default(7).toRed(f),m=new r.default(0).toRed(f);r.default.isBN(c)||(c=new r.default(c,16)),c=c,c.red==null&&(c=c.toRed(f));const y=c.redSqr().redMul(c).redIAdd(c.redMul(p)).redIAdd(g);let b=y.redSqrt();if(b.redSqr().redSub(y).cmp(m)!==0)throw new Error("invalid point");const x=b.fromRed().isOdd();return(l&&!x||!l&&x)&&(b=b.redNeg()),new xs(c,b)}}static fromJSON(c,l){typeof c=="string"&&(c=JSON.parse(c));const u=new xs(c[0],c[1],l);if(typeof c[2]!="object")return u;const d=f=>new xs(f[0],f[1],l),h=c[2];return u.precomputed={beta:null,doubles:typeof h.doubles=="object"&&h.doubles!==null?{step:h.doubles.step,points:[u].concat(h.doubles.points.map(d))}:void 0,naf:typeof h.naf=="object"&&h.naf!==null?{wnd:h.naf.wnd,points:[u].concat(h.naf.points.map(d))}:void 0},u}constructor(c,l,u=!0){super("affine"),this.precomputed=null,c===null&&l===null?(this.x=null,this.y=null,this.inf=!0):(r.default.isBN(c)||(c=new r.default(c,16)),this.x=c,r.default.isBN(l)||(l=new r.default(l,16)),this.y=l,u&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red===null&&(this.x=this.x.toRed(this.curve.red)),this.y.red===null&&(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}validate(){return this.curve.validate(this)}encode(c=!0,l){const u=this.curve.p.byteLength(),d=this.getX().toArray("be",u);let h;return c?h=[this.getY().isEven()?2:3].concat(d):h=[4].concat(d,this.getY().toArray("be",u)),l!=="hex"?h:(0,i.toHex)(h)}toString(){return this.encode(!0,"hex")}toJSON(){return this.precomputed==null?[this.x,this.y]:[this.x,this.y,typeof this.precomputed=="object"&&this.precomputed!==null?{doubles:this.precomputed.doubles!=null?{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)}:void 0,naf:this.precomputed.naf!=null?{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}:void 0}:void 0]}inspect(){var c,l,u,d,h,f;return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+((u=(l=(c=this.x)===null||c===void 0?void 0:c.fromRed())===null||l===void 0?void 0:l.toString(16,2))!==null&&u!==void 0?u:"undefined")+" y: "+((f=(h=(d=this.y)===null||d===void 0?void 0:d.fromRed())===null||h===void 0?void 0:h.toString(16,2))!==null&&f!==void 0?f:"undefined")+">"}isInfinity(){return this.inf}add(c){var l,u,d,h,f,p,g,m,y,b,x,S;if(this.inf)return c;if(c.inf)return this;if(this.eq(c))return this.dbl();if(this.neg().eq(c))return new xs(new r.default(0),new r.default(0));if(((l=this.x)===null||l===void 0?void 0:l.cmp((u=c.x)!==null&&u!==void 0?u:new r.default(0)))===0)return new xs(new r.default(0),new r.default(0));let P=(f=(d=this.y)===null||d===void 0?void 0:d.redSub((h=c.y)!==null&&h!==void 0?h:new r.default(0)))!==null&&f!==void 0?f:new r.default(0);P.cmpn(0)!==0&&(P=P.redMul((m=(p=this.x)===null||p===void 0?void 0:p.redSub((g=c.x)!==null&&g!==void 0?g:new r.default(0)).redInvm())!==null&&m!==void 0?m:new r.default(1)));const _=P==null?void 0:P.redSqr().redISub((y=this.x)!==null&&y!==void 0?y:new r.default(0)).redISub((b=c.x)!==null&&b!==void 0?b:new r.default(0)),I=(P??new r.default(1)).redMul(((x=this.x)!==null&&x!==void 0?x:new r.default(0)).redSub(_??new r.default(0))).redISub((S=this.y)!==null&&S!==void 0?S:new r.default(0));return new xs(_??new r.default(0),I??new r.default(0))}dbl(){var c,l,u,d,h,f,p;if(this.inf)return this;const g=((c=this.y)!==null&&c!==void 0?c:new r.default(0)).redAdd((l=this.y)!==null&&l!==void 0?l:new r.default(0));if(g.cmpn(0)===0)return new xs(new r.default(0),new r.default(0));const m=this.curve.a,y=((u=this.x)!==null&&u!==void 0?u:new r.default(0)).redSqr(),b=g.redInvm(),x=y.redAdd(y).redIAdd(y).redIAdd(m).redMul(b),S=x.redSqr().redISub(((d=this.x)!==null&&d!==void 0?d:new r.default(0)).redAdd((h=this.x)!==null&&h!==void 0?h:new r.default(0))),P=x.redMul(((f=this.x)!==null&&f!==void 0?f:new r.default(0)).redSub(S)).redISub((p=this.y)!==null&&p!==void 0?p:new r.default(0));return new xs(S,P)}getX(){var c;return((c=this.x)!==null&&c!==void 0?c:new r.default(0)).fromRed()}getY(){var c;return((c=this.y)!==null&&c!==void 0?c:new r.default(0)).fromRed()}mul(c){return r.default.isBN(c)||(c=new r.default(c,16)),c=c,this.isInfinity()?this:this._hasDoubles(c)?this._fixedNafMul(c):this._endoWnafMulAdd([this],[c])}mulAdd(c,l,u){const d=[this,l],h=[c,u];return this._endoWnafMulAdd(d,h)}jmulAdd(c,l,u){const d=[this,l],h=[c,u];return this._endoWnafMulAdd(d,h,!0)}eq(c){var l,u,d,h;return this===c||this.inf===c.inf&&(this.inf||((l=this.x)!==null&&l!==void 0?l:new r.default(0)).cmp((u=c.x)!==null&&u!==void 0?u:new r.default(0))===0&&((d=this.y)!==null&&d!==void 0?d:new r.default(0)).cmp((h=c.y)!==null&&h!==void 0?h:new r.default(0))===0)}neg(c){var l;if(this.inf)return this;const u=new xs(this.x,((l=this.y)!==null&&l!==void 0?l:new r.default(0)).redNeg());if(c===!0&&this.precomputed!=null){const d=this.precomputed,h=f=>f.neg();u.precomputed={naf:d.naf!=null?{wnd:d.naf.wnd,points:d.naf.points.map(h)}:void 0,doubles:d.doubles!=null?{step:d.doubles.step,points:d.doubles.points.map(f=>f.neg())}:void 0,beta:void 0}}return u}dblp(c){let l=this;for(let u=0;u<c;u++)l=l.dbl();return l}toJ(){return this.inf?new n.default(null,null,null):new n.default(this.x,this.y,this.curve.one)}_getBeta(){var c;if(typeof this.curve.endo!="object")return;const l=this.precomputed;if(typeof l=="object"&&l!==null&&typeof l.beta=="object"&&l.beta!==null)return l.beta;const u=new xs(((c=this.x)!==null&&c!==void 0?c:new r.default(0)).redMul(this.curve.endo.beta),this.y);if(l!=null){const d=this.curve,h=f=>{if(f.x===null)throw new Error("p.x is null");if(d.endo===void 0||d.endo===null)throw new Error("curve.endo is undefined");return new xs(f.x.redMul(d.endo.beta),f.y)};l.beta=u,u.precomputed={beta:null,naf:l.naf!=null?{wnd:l.naf.wnd,points:l.naf.points.map(h)}:void 0,doubles:l.doubles!=null?{step:l.doubles.step,points:l.doubles.points.map(h)}:void 0}}return u}_fixedNafMul(c){if(typeof this.precomputed!="object"||this.precomputed===null)throw new Error("_fixedNafMul requires precomputed values for the point");const l=this._getDoubles(),u=this.curve.getNAF(c,1,this.curve._bitLength);let d=(1<<l.step+1)-(l.step%2===0?2:1);d/=3;const h=[];for(let g=0;g<u.length;g+=l.step){let m=0;for(let y=g+l.step-1;y>=g;y--)m=(m<<1)+u[y];h.push(m)}let f=new n.default(null,null,null),p=new n.default(null,null,null);for(let g=d;g>0;g--){for(let m=0;m<h.length;m++){const y=h[m];y===g?p=p.mixedAdd(l.points[m]):y===-g&&(p=p.mixedAdd(l.points[m].neg()))}f=f.add(p)}return f.toP()}_wnafMulAdd(c,l,u,d,h){var f,p,g,m;const y=this.curve._wnafT1.map(I=>I.toNumber()),b=this.curve._wnafT2.map(()=>[]),x=this.curve._wnafT3.map(()=>[]);let S=0;for(let I=0;I<d;I++){const A=l[I]._getNAFPoints(c);y[I]=A.wnd,b[I]=A.points}for(let I=d-1;I>=1;I-=2){const C=I-1,A=I;if(y[C]!==1||y[A]!==1){x[C]=this.curve.getNAF(u[C],y[C],this.curve._bitLength),x[A]=this.curve.getNAF(u[A],y[A],this.curve._bitLength),S=Math.max(x[C].length,S),S=Math.max(x[A].length,S);continue}const M=[l[C],null,null,l[A]];((f=l[C].y)!==null&&f!==void 0?f:new r.default(0)).cmp((p=l[A].y)!==null&&p!==void 0?p:new r.default(0))===0?(M[1]=l[C].add(l[A]),M[2]=l[C].toJ().mixedAdd(l[A].neg())):((g=l[C].y)!==null&&g!==void 0?g:new r.default(0)).cmp(((m=l[A].y)!==null&&m!==void 0?m:new r.default(0)).redNeg())===0?(M[1]=l[C].toJ().mixedAdd(l[A]),M[2]=l[C].add(l[A].neg())):(M[1]=l[C].toJ().mixedAdd(l[A]),M[2]=l[C].toJ().mixedAdd(l[A].neg()));const k=[-3,-1,-5,-7,0,7,5,1,3],O=this.curve.getJSF(u[C],u[A]);S=Math.max(O[0].length,S),x[C]=new Array(S),x[A]=new Array(S);for(let B=0;B<S;B++){const $=O[0][B]|0,U=O[1][B]|0;x[C][B]=k[($+1)*3+(U+1)],x[A][B]=0,b[C]=M}}let P=new n.default(null,null,null);const _=this.curve._wnafT4;for(let I=S;I>=0;I--){let C=0;for(;I>=0;){let k=!0;for(let O=0;O<d;O++)_[O]=new r.default(typeof x[O][I]=="number"?x[O][I]:0),_[O].isZero()||(k=!1);if(!k)break;C++,I--}if(I>=0&&C++,P=P.dblp(C),I<0)break;const A=new r.default(1),M=new r.default(2);for(let k=0;k<d;k++){const O=_[k];let B;O.cmpn(0)!==0&&(O.isNeg()?B=b[k][O.neg().sub(A).div(M).toNumber()].neg():B=b[k][O.sub(A).div(M).toNumber()],B.type==="affine"?P=P.mixedAdd(B):P=P.add(B))}}for(let I=0;I<d;I++)b[I]=[];return h===!0?P:P.toP()}_endoWnafMulAdd(c,l,u){var d;const h=new Array(c.length*2),f=new Array(c.length*2);let p;for(p=0;p<c.length;p++){const m=this.curve._endoSplit(l[p]);let y=c[p],b=(d=y._getBeta())!==null&&d!==void 0?d:new xs(new r.default(0),new r.default(0));m.k1.negative!==0&&(m.k1.ineg(),y=y.neg(!0)),m.k2.negative!==0&&(m.k2.ineg(),b=b.neg(!0)),h[p*2]=y,h[p*2+1]=b,f[p*2]=m.k1,f[p*2+1]=m.k2}const g=this._wnafMulAdd(1,h,f,p*2,u);for(let m=0;m<p*2;m++)h[m]=null,f[m]=null;return g}_hasDoubles(c){if(this.precomputed==null)return!1;const l=this.precomputed.doubles;return typeof l!="object"?!1:l.points.length>=Math.ceil((c.bitLength()+1)/l.step)}_getDoubles(c,l){if(typeof this.precomputed=="object"&&this.precomputed!==null&&typeof this.precomputed.doubles=="object"&&this.precomputed.doubles!==null)return this.precomputed.doubles;const u=[this];let d=this;for(let h=0;h<(l??0);h+=c??1){for(let f=0;f<(c??1);f++)d=d.dbl();u.push(d)}return{step:c??1,points:u}}_getNAFPoints(c){if(typeof this.precomputed=="object"&&this.precomputed!==null&&typeof this.precomputed.naf=="object"&&this.precomputed.naf!==null)return this.precomputed.naf;const l=[this],u=(1<<c)-1,d=u===1?null:this.dbl();for(let h=1;h<u;h++)d!==null&&(l[h]=l[h-1].add(d));return{wnd:c,points:l}}};return o.red=new s.default("k256"),o.a=new r.default(0).toRed(o.red),o.b=new r.default(7).toRed(o.red),o.zero=new r.default(0).toRed(o.red),_g.default=o,_g}var qL;function hu(){if(qL)return yg;qL=1;var t=yg&&yg.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(yg,"__esModule",{value:!0});const e=t(Ni()),n=t(DO()),r=t(jve()),i=t(gv()),s=Yn();let o,a=class GW{static assert(l,u="Elliptic curve assertion failed"){if(!l)throw new Error(u)}getNAF(l,u,d){const h=new Array(Math.max(l.bitLength(),d)+1);h.fill(0);const f=1<<u+1,p=l.clone();for(let g=0;g<h.length;g++){let m;const y=p.andln(f-1);p.isOdd()?(y>(f>>1)-1?m=(f>>1)-y:m=y,p.isubn(m)):m=0,h[g]=m,p.iushrn(1)}return h}getJSF(l,u){const d=[[],[]];l=l.clone(),u=u.clone();let h=0,f=0;for(;l.cmpn(-h)>0||u.cmpn(-f)>0;){let p=l.andln(3)+h&3,g=u.andln(3)+f&3;p===3&&(p=-1),g===3&&(g=-1);let m;if((p&1)===0)m=0;else{const b=l.andln(7)+h&7;(b===3||b===5)&&g===2?m=-p:m=p}d[0].push(m);let y;if((g&1)===0)y=0;else{const b=u.andln(7)+f&7;(b===3||b===5)&&p===2?y=-g:y=g}d[1].push(y),2*h===m+1&&(h=1-h),2*f===y+1&&(f=1-f),l.iushrn(1),u.iushrn(1)}return d}static cachedProperty(l,u,d){const h="_"+u;l.prototype[u]=function(){return this[h]!==void 0?this[h]:this[h]=d.call(this)}}static parseBytes(l){return typeof l=="string"?(0,s.toArray)(l,"hex"):l}static intFromLE(l){return new e.default(l,"hex","le")}constructor(){if(typeof o<"u")return o;o=this;const u={prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",{doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}]};this.p=new e.default(u.p,16),this.red=new n.default(u.prime),this.zero=new e.default(0).toRed(this.red),this.one=new e.default(1).toRed(this.red),this.two=new e.default(2).toRed(this.red),this.n=new e.default(u.n,16),this.g=i.default.fromJSON(u.g,u.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n.bitLength(),this.redN=this.n.toRed(this.red),this.a=new e.default(u.a,16).toRed(this.red),this.b=new e.default(u.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(u),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}_getEndomorphism(l){var u,d;if(!this.zeroA||this.p.modrn(3)!==1)return;let h,f;if(l.beta!==void 0)h=new e.default(l.beta,16).toRed(this.red);else{const g=this._getEndoRoots(this.p);if(g===null)throw new Error("Failed to get endomorphism roots for beta.");h=g[0].cmp(g[1])<0?g[0]:g[1],h=h.toRed(this.red)}if(l.lambda!==void 0)f=new e.default(l.lambda,16);else{const g=this._getEndoRoots(this.n);if(g===null)throw new Error("Failed to get endomorphism roots for lambda.");if(this.g==null)throw new Error("Curve generator point (g) is not defined.");const m=(u=this.g.mul(g[0]))===null||u===void 0?void 0:u.x,y=this.g.x!=null?this.g.x.redMul(h):void 0;if(m!=null&&y!=null&&m.cmp(y)===0)f=g[0];else{if(f=g[1],this.g==null)throw new Error("Curve generator point (g) is not defined.");const b=(d=this.g.mul(f))===null||d===void 0?void 0:d.x,x=this.g.x!=null?this.g.x.redMul(h):void 0;if(b==null||x==null)throw new Error("Lambda computation failed: g.mul(lambda).x or g.x.redMul(beta) is undefined.");GW.assert(b.cmp(x)===0,"Lambda selection does not match computed beta.")}}let p;return typeof l.basis=="object"&&l.basis!==null?p=l.basis.map(function(g){return{a:new e.default(g.a,16),b:new e.default(g.b,16)}}):p=this._getEndoBasis(f),{beta:h,lambda:f,basis:p}}_getEndoRoots(l){const u=l===this.p?this.red:new r.default(l),d=new e.default(2).toRed(u).redInvm(),h=d.redNeg(),f=new e.default(3).toRed(u).redNeg().redSqrt().redMul(d),p=h.redAdd(f).fromRed(),g=h.redSub(f).fromRed();return[p,g]}_getEndoBasis(l){const u=this.n.ushrn(Math.floor(this.n.bitLength()/2));let d=l,h=this.n.clone(),f=new e.default(1),p=new e.default(0),g=new e.default(0),m=new e.default(1),y,b,x,S,P,_,I=new e.default(0),C=0,A=new e.default(0),M=new e.default(0);for(;d.cmpn(0)!==0;){const B=h.div(d);A=h.sub(B.mul(d)),M=g.sub(B.mul(f));const $=m.sub(B.mul(p));if(x===void 0&&A.cmp(u)<0)y=I.neg(),b=f,x=A.neg(),S=M;else if(x!==void 0&&++C===2)break;I=A,h=d,d=A,g=f,f=M,m=p,p=$}if(y===void 0||b===void 0||x===void 0||S===void 0)throw new Error("Failed to compute Endo Basis values");P=A.neg(),_=M;const k=x.sqr().add(S.sqr());return P.sqr().add(_.sqr()).cmp(k)>=0&&(P=y,_=b),x.negative!==0&&(x=x.neg(),S=S.neg()),P.negative!==0&&(P=P.neg(),_=_.neg()),[{a:x,b:S},{a:P,b:_}]}_endoSplit(l){if(this.endo==null)throw new Error("Endomorphism is not defined.");const u=this.endo.basis,d=u[0],h=u[1],f=h.b.mul(l).divRound(this.n),p=d.b.neg().mul(l).divRound(this.n),g=f.mul(d.a),m=p.mul(h.a),y=f.mul(d.b),b=p.mul(h.b),x=l.sub(g).sub(m),S=y.add(b).neg();return{k1:x,k2:S}}validate(l){if(l.inf)return!0;const u=l.x,d=l.y;if(u===null||d===null)throw new Error("Point coordinates cannot be null");const h=this.a.redMul(u),f=u.redSqr().redMul(u).redIAdd(h).redIAdd(this.b);return d.redSqr().redISub(f).cmpn(0)===0}};return yg.default=a,yg}var Tg={},nd={},Ig={},KL;function yv(){if(KL)return Ig;KL=1;var t=Ig&&Ig.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Ig,"__esModule",{value:!0});const e=t(Ni()),n=t(Yd()),r=vv(),i=Li(),s=Yn(),o=t(gv()),a=t(hu());let c=class dk{static fromDER(u,d){const h=(S,P)=>{const _=S[P.place++];if((_&128)===0)return _;throw new Error("Invalid DER entity length")};class f{constructor(){this.place=0}}u=(0,s.toArray)(u,d);const p=new f;if(u[p.place++]!==48)throw new Error("Signature DER must start with 0x30");if(h(u,p)+p.place!==u.length)throw new Error("Signature DER invalid");if(u[p.place++]!==2)throw new Error("Signature DER invalid");const m=h(u,p);let y=u.slice(p.place,m+p.place);if(p.place+=m,u[p.place++]!==2)throw new Error("Signature DER invalid");const b=h(u,p);if(u.length!==b+p.place)throw new Error("Invalid R-length in signature DER");let x=u.slice(p.place,b+p.place);if(y[0]===0)if((y[1]&128)!==0)y=y.slice(1);else throw new Error("Invalid R-value in signature DER");if(x[0]===0)if((x[1]&128)!==0)x=x.slice(1);else throw new Error("Invalid S-value in signature DER");return new dk(new e.default(y),new e.default(x))}static fromCompact(u,d){if(u=(0,s.toArray)(u,d),u.length!==65)throw new Error("Invalid Compact Signature");const h=u[0];if(h<27||h>=35)throw new Error("Invalid Compact Byte");return new dk(new e.default(u.slice(1,33)),new e.default(u.slice(33,65)))}constructor(u,d){this.r=u,this.s=d}verify(u,d,h){const f=new e.default((0,i.sha256)(u,h),16);return(0,r.verify)(f,this,d)}toString(u){return this.toDER(u)}toDER(u){const d=(b,x)=>{if(x<128)b.push(x);else throw new Error("len must be < 0x80")},h=b=>{let x=0;const S=b.length-1;for(;b[x]===0&&(b[x+1]&128)===0&&x<S;)x++;return x===0?b:b.slice(x)};let f=this.r.toArray(),p=this.s.toArray();for((f[0]&128)!==0&&(f=[0].concat(f)),(p[0]&128)!==0&&(p=[0].concat(p)),f=h(f),p=h(p);p[0]===0&&(p[1]&128)===0;)p=p.slice(1);let g=[2];d(g,f.length),g=g.concat(f),g.push(2),d(g,p.length);const m=g.concat(p);let y=[48];return d(y,m.length),y=y.concat(m),u==="hex"?(0,s.toHex)(y):u==="base64"?(0,s.toBase64)(y):y}toCompact(u,d,h){if(u<0||u>3)throw new Error("Invalid recovery param");if(typeof d!="boolean")throw new Error("Invalid compressed param");let f=27+u;d&&(f+=4);let p=[f];return p=p.concat(this.r.toArray("be",32)),p=p.concat(this.s.toArray("be",32)),h==="hex"?(0,s.toHex)(p):h==="base64"?(0,s.toBase64)(p):p}RecoverPublicKey(u,d){const h=this.r,f=this.s,p=(u&1)!==0,g=u>>1,m=new a.default,y=m.n,b=m.g,x=g!==0?h.add(y):h,S=o.default.fromX(x,p);if(!S.mul(y).isInfinity())throw new Error("nR is not at infinity");const _=d.neg().umod(y),I=h.invm(y),C=I.mul(f).umod(y),A=I.mul(_).umod(y),M=b.mul(A).add(S.mul(C)),k=new n.default(M);return k.validate(),k}CalculateRecoveryFactor(u,d){for(let h=0;h<4;h++){let f;try{f=this.RecoverPublicKey(h,d)}catch{continue}if(u.eq(f))return h}throw new Error("Unable to find valid recovery factor")}};return Ig.default=c,Ig}var CE={},GL;function XW(){if(GL)return CE;GL=1,Object.defineProperty(CE,"__esModule",{value:!0});const t=Li(),e=Yn();let n=class{constructor(i,s){if(i=(0,e.toArray)(i,"hex"),s=(0,e.toArray)(s,"hex"),i.length<32)throw new Error("Not enough entropy. Minimum is 256 bits");const o=i.concat(s);this.K=new Array(32),this.V=new Array(32);for(let a=0;a<32;a++)this.K[a]=0,this.V[a]=1;this.update(o)}hmac(){return new t.SHA256HMAC(this.K)}update(i){let s=this.hmac().update(this.V).update([0]);i!==void 0&&(s=s.update(i)),this.K=s.digest(),this.V=this.hmac().update(this.V).digest(),i!==void 0&&(this.K=this.hmac().update(this.V).update([1]).update(i).digest(),this.V=this.hmac().update(this.V).digest())}generate(i){let s=[];for(;s.length<i;)this.V=this.hmac().update(this.V).digest(),s=s.concat(this.V);const o=s.slice(0,i);return this.update(),(0,e.toHex)(o)}};return CE.default=n,CE}var XL;function vv(){if(XL)return nd;XL=1;var t=nd&&nd.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(nd,"__esModule",{value:!0}),nd.verify=nd.sign=void 0;const e=t(Ni()),n=t(yv()),r=t(hu()),i=t(XW());function s(c,l,u=new r.default){const d=c.byteLength()*8-u.n.bitLength();return d>0&&c.iushrn(d),l===null&&c.cmp(u.n)>=0?c.sub(u.n):c}const o=(c,l,u=!1,d)=>{if(typeof BigInt=="function"){let B=function(le,ae){const _e=le.toString(16).padStart(ae*2,"0"),ye=new Uint8Array(ae);for(let Ae=0;Ae<ae;Ae++)ye[Ae]=parseInt(_e.substr(Ae*2,2),16);return ye},j=function(le,ae,_e=!0){const ye=le.toString(2).length,Ae=ae.toString(2).length,Oe=ye-Ae;return Oe>0&&(le=le>>BigInt(Oe)),!_e&&le>=ae?le-ae:le},Q=function(le){if(typeof le=="function"){const _e=le(G).toString(16);return BigInt("0x"+_e)}else if(le!=null&&e.default.isBN(le)){const ae=le.toString(16);return BigInt("0x"+ae)}else{const ae=K.generate($);return BigInt("0x"+ae)}},se=function(le,ae){return(le%ae+ae)%ae},Z=function(le,ae){let _e=S,ye=x,Ae=se(le,ae),Oe=ae;for(;Ae>S;){const Be=Oe/Ae,ce=ye-_e*Be,Ge=Oe-Ae*Be;ye=_e,_e=ce,Oe=Ae,Ae=Ge}return se(_e,ae)},ie=function(le,ae){if(le===null)return ae;if(ae===null)return le;if(le.x===ae.x&&le.y===se(-ae.y,I))return null;let _e;if(le.x===ae.x&&le.y===ae.y){if(le.y===x)return null;const Oe=se(BigInt(3)*le.x*le.x,I),Be=Z(P*le.y,I);_e=se(Oe*Be,I)}else{const Oe=se(ae.y-le.y,I),Be=Z(ae.x-le.x,I);_e=se(Oe*Be,I)}const ye=se(_e*_e-le.x-ae.x,I),Ae=se(_e*(le.x-ye)-le.y,I);return{x:ye,y:Ae}},pe=function(le,ae){var _e,ye;let Ae=ae,Oe=null;for(;le>BigInt(0);)le%BigInt(2)===BigInt(1)&&(Oe=Oe===null?Ae:(_e=ie(Oe,Ae))!==null&&_e!==void 0?_e:Oe),Ae=(ye=ie(Ae,Ae))!==null&&ye!==void 0?ye:Ae,le>>=BigInt(1);if(Oe===null)throw new Error("Scalar multiplication resulted in an invalid point.");return Oe};var h=B,f=j,p=Q,g=se,m=Z,y=ie,b=pe;const x=BigInt(0),S=BigInt(1),P=BigInt(2),_=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141"),I=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F"),C=BigInt("0x79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798"),A=BigInt("0x483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8"),M={x:C,y:A},k=BigInt("0x"+c.toString(16)),O=BigInt("0x"+l.toString(16));if(O<=x||O>=_)throw new Error("Invalid private key");const $=32,U=B(O,$),q=B(k,$),K=new i.default(Array.from(U),Array.from(q)),V=_-S;let G=0,ue=!1;for(;!ue;){G+=1,ue=!0,G+=1;let le=Q(d);if(le=j(le,_,!0),le<=S||le>=V){if(d instanceof e.default)throw new Error("Invalid fixed custom K value (must be more than 1 and less than N-1)");continue}const ae=pe(le,M);if(ae===null){if(d instanceof e.default)throw new Error("Invalid fixed custom K value (must not create a point at infinity when multiplied by the generator point)");continue}const _e=se(ae.x,_);if(_e===x){if(d instanceof e.default)throw new Error("Invalid fixed custom K value (when multiplied by G, the resulting x coordinate mod N must not be zero)");continue}const ye=Z(le,_),Ae=se(_e*O,_);let Oe=se(ye*(k+Ae),_);if(Oe===x){if(d instanceof e.default)throw new Error("Invalid fixed custom K value (when used with the key, it cannot create a zero value for S)");continue}u&&Oe>_/P&&(Oe=_-Oe);const Be=new e.default(_e.toString(16),16),ce=new e.default(Oe.toString(16),16);return new n.default(Be,ce)}}else{const x=new r.default;c=f(c);const S=x.n.byteLength(),P=l.toArray("be",S),_=c.toArray("be",S),I=new i.default(P,_),C=x.n.subn(1);for(let A=0;;A++){let M=typeof d=="function"?d(A):e.default.isBN(d)?d:new e.default(I.generate(S),16);if(M!=null)M=f(M,!0);else throw new Error("k is undefined");if(M.cmpn(1)<=0||M.cmp(C)>=0){if(e.default.isBN(d))throw new Error("Invalid fixed custom K value (must be more than 1 and less than N-1)");continue}const k=x.g.mul(M);if(k.isInfinity()){if(e.default.isBN(d))throw new Error("Invalid fixed custom K value (must not create a point at infinity when multiplied by the generator point)");continue}const B=k.getX().umod(x.n);if(B.cmpn(0)===0){if(e.default.isBN(d))throw new Error("Invalid fixed custom K value (when multiplied by G, the resulting x coordinate mod N must not be zero)");continue}let $=M.invm(x.n).mul(B.mul(l).iadd(c));if($=$.umod(x.n),$.cmpn(0)===0){if(e.default.isBN(d))throw new Error("Invalid fixed custom K value (when used with the key, it cannot create a zero value for S)");continue}return u&&$.cmp(x.n.ushrn(1))>0&&($=x.n.sub($)),new n.default(B,$)}}throw new Error("Failed to generate a valid signature")};nd.sign=o;const a=(c,l,u)=>{if(typeof BigInt=="function"){const d=BigInt(0),h=BigInt(1),f=BigInt(2),p=BigInt(3),g=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F"),m=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141"),y={x:BigInt("0x79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798"),y:BigInt("0x483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8")},b=(U,q)=>(U%q+q)%q,x=(U,q)=>{let[K,V]=[U,q],[G,j]=[BigInt(1),BigInt(0)];for(;V!==d;){const Q=K/V;[K,V]=[V,K-Q*V],[G,j]=[j,G-Q*j]}return K>h?d:b(G,q)},S=(U,q,K)=>b(U*q,K),P=(U,q,K)=>b(U-q,K),_=BigInt(4),I=BigInt(8),C=U=>{const{X:q,Y:K,Z:V}=U;if(K===d)return{X:d,Y:h,Z:d};const G=S(K,K,g),j=S(_,S(q,G,g),g),Q=S(p,S(q,q,g),g),se=P(S(Q,Q,g),S(f,j,g),g),Z=P(S(Q,P(j,se,g),g),S(I,S(G,G,g),g),g),ie=S(f,S(K,V,g),g);return{X:se,Y:Z,Z:ie}},A=(U,q)=>{if(U.Z===d)return q;if(q.Z===d)return U;const K=S(U.Z,U.Z,g),V=S(q.Z,q.Z,g),G=S(U.X,V,g),j=S(q.X,K,g),Q=S(U.Y,S(V,q.Z,g),g),se=S(q.Y,S(K,U.Z,g),g),Z=P(j,G,g),ie=P(se,Q,g);if(Z===d)return ie===d?C(U):{X:d,Y:h,Z:d};const pe=S(Z,Z,g),ue=S(Z,pe,g),le=S(G,pe,g),ae=P(P(S(ie,ie,g),ue,g),S(f,le,g),g),_e=P(S(ie,P(le,ae,g),g),S(Q,ue,g),g),ye=S(Z,S(U.Z,q.Z,g),g);return{X:ae,Y:_e,Z:ye}},M=(U,q)=>{const K={X:q.x,Y:q.y,Z:h};let V={X:d,Y:h,Z:d};const G=U.toString(2);for(let j=0;j<G.length;j++)V=C(V),G[j]==="1"&&(V=A(V,K));return V},k=(U,q,K)=>{const{r:V,s:G}=K,j=U;if(V<=d||V>=m||G<=d||G>=m)return!1;const Q=x(G,m);if(Q===d)return!1;const se=S(j,Q,m),Z=S(V,Q,m),ie=M(se,y),pe=M(Z,q),ue=A(ie,pe);if(ue.Z===d)return!1;const le=x(ue.Z,g);if(le===d)return!1;const ae=S(le,le,g),_e=S(ue.X,ae,g);return b(_e,m)===V},O=BigInt("0x"+c.toString(16));if(u.x==null||u.y==null)throw new Error("Invalid public key: missing coordinates.");const B={x:BigInt("0x"+u.x.toString(16)),y:BigInt("0x"+u.y.toString(16))},$={r:BigInt("0x"+l.r.toString(16)),s:BigInt("0x"+l.s.toString(16))};return k(O,B,$)}else{const d=new r.default;c=s(c);const h=l.r,f=l.s;if(h.cmpn(1)<0||h.cmp(d.n)>=0||f.cmpn(1)<0||f.cmp(d.n)>=0)return!1;const p=f.invm(d.n),g=p.mul(c).umod(d.n),m=p.mul(h).umod(d.n),y=d.g.jmulAdd(g,u,m);return y.isInfinity()?!1:y.eqXToP(h)}};return nd.verify=a,nd}var YL;function Yd(){if(YL)return Tg;YL=1;var t=Tg&&Tg.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Tg,"__esModule",{value:!0});const e=t(gv()),n=t(hu()),r=vv(),i=t(Ni()),s=Li(),o=t(yv()),a=Yn();let c=class wx extends e.default{static fromPrivateKey(u){const h=new n.default().g.mul(u);return new wx(h.x,h.y)}static fromString(u){const d=e.default.fromString(u);return new wx(d.x,d.y)}static fromDER(u){const d=e.default.fromDER(u);return new wx(d.x,d.y)}constructor(u,d=null,h=!0){if(u instanceof e.default)super(u.getX(),u.getY());else{if(d===null&&h&&typeof u=="string"&&(u.length===66||u.length===130))throw new Error('You are using the "new PublicKey()" constructor with a DER hex string. You need to use "PublicKey.fromString()" instead.');super(u,d,h)}}deriveSharedSecret(u){if(!this.validate())throw new Error("Public key not valid for ECDH secret derivation");return this.mul(u)}verify(u,d,h){const f=new i.default((0,s.sha256)(u,h),16);return(0,r.verify)(f,d,this)}toDER(u){return u==="hex"?this.encode(!0,u):this.encode(!0)}toHash(u){const d=(0,s.hash160)(this.encode(!0));return u==="hex"?(0,a.toHex)(d):d}toAddress(u=[0]){if(typeof u=="string")if(u==="testnet"||u==="test")u=[111];else if(u==="mainnet"||u==="main")u=[0];else throw new Error(`Invalid prefix ${u}`);return(0,a.toBase58Check)(this.toHash(),u)}deriveChild(u,d){const h=this.deriveSharedSecret(u),f=(0,a.toArray)(d,"utf8"),p=(0,s.sha256hmac)(h.encode(!0),f),m=new n.default().g.mul(new i.default(p)),y=this.add(m);return new wx(y.x,y.y)}static fromMsgHashAndCompactSignature(u,d,h){const f=(0,a.toArray)(d,h);if(f.length!==65)throw new Error("Invalid Compact Signature");const p=f[0];if(p<27||p>=35)throw new Error("Invalid Compact Byte");let g=f[0]-27;return g>3&&(g-=4),new o.default(new i.default(f.slice(1,33)),new i.default(f.slice(33,65))).RecoverPublicKey(g,u)}};return Tg.default=c,Tg}var Wo={},ME={};const Kve={},Gve=Object.freeze(Object.defineProperty({__proto__:null,default:Kve},Symbol.toStringTag,{value:"Module"})),BO=_l(Gve);var ZL;function Ao(){if(ZL)return ME;ZL=1,Object.defineProperty(ME,"__esModule",{value:!0});class t{constructor(){var r;const i=()=>{throw new Error("No secure random number generator is available in this environment.")};if(this._rand=i,typeof self=="object")!((r=self.crypto)===null||r===void 0)&&r.getRandomValues?this._rand=s=>{const o=new Uint8Array(s);return self.crypto.getRandomValues(o),[...o]}:this._rand=i;else try{const s=BO;typeof s.randomBytes=="function"&&(this._rand=o=>[...s.randomBytes(o)])}catch{this._rand=i}}generate(r){return this._rand(r)}}let e=null;return ME.default=n=>(e==null&&(e=new t),e.generate(n)),ME}var $f={},JL;function ZW(){if(JL)return $f;JL=1;var t=$f&&$f.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty($f,"__esModule",{value:!0}),$f.PointInFiniteField=void 0;const e=t(Ni()),n=t(hu()),r=t(Ao()),i=Yn();class s{constructor(c,l){const u=new n.default().p;this.x=c.umod(u),this.y=l.umod(u)}toString(){return(0,i.toBase58)(this.x.toArray())+"."+(0,i.toBase58)(this.y.toArray())}static fromString(c){const[l,u]=c.split(".");return new s(new e.default((0,i.fromBase58)(l)),new e.default((0,i.fromBase58)(u)))}}$f.PointInFiniteField=s;let o=class YW{constructor(c,l){this.points=c,this.threshold=l??c.length}static fromPrivateKey(c,l){const u=new n.default().p,d=[new s(new e.default(0),new e.default(c.toArray()))];for(let h=1;h<l;h++){const f=new e.default((0,r.default)(32)).umod(u),p=new e.default((0,r.default)(32)).umod(u);d.push(new s(f,p))}return new YW(d)}valueAt(c){const l=new n.default().p;let u=new e.default(0);for(let d=0;d<this.threshold;d++){let h=this.points[d].y;for(let f=0;f<this.threshold;f++)if(d!==f){const p=this.points[f].x,g=this.points[d].x,m=c.sub(p).umod(l),b=g.sub(p).umod(l).invm(l),x=m.mul(b).umod(l);h=h.mul(x).umod(l)}u=u.add(h).umod(l)}return u}};return $f.default=o,$f}var QL;function bv(){if(QL)return Wo;QL=1;var t=Wo&&Wo.__createBinding||(Object.create?function(p,g,m,y){y===void 0&&(y=m);var b=Object.getOwnPropertyDescriptor(g,m);(!b||("get"in b?!g.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return g[m]}}),Object.defineProperty(p,y,b)}:function(p,g,m,y){y===void 0&&(y=m),p[y]=g[m]}),e=Wo&&Wo.__setModuleDefault||(Object.create?function(p,g){Object.defineProperty(p,"default",{enumerable:!0,value:g})}:function(p,g){p.default=g}),n=Wo&&Wo.__importStar||function(p){if(p&&p.__esModule)return p;var g={};if(p!=null)for(var m in p)m!=="default"&&Object.prototype.hasOwnProperty.call(p,m)&&t(g,p,m);return e(g,p),g},r=Wo&&Wo.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.KeyShares=void 0;const i=r(Ni()),s=r(Yd()),o=r(hu()),a=vv(),c=Li(),l=r(Ao()),u=Yn(),d=n(ZW());class h{constructor(g,m,y){this.points=g,this.threshold=m,this.integrity=y}static fromBackupFormat(g){let m=0,y="";const b=g.map((x,S)=>{const P=x.split(".");if(P.length!==4)throw new Error("Invalid share format in share "+S.toString()+'. Expected format: "x.y.t.i" - received '+x);const[_,I,C,A]=P;if(C===void 0)throw new Error("Threshold not found in share "+S.toString());if(A===void 0)throw new Error("Integrity not found in share "+S.toString());const M=parseInt(C);if(S!==0&&m!==M)throw new Error("Threshold mismatch in share "+S.toString());if(S!==0&&y!==A)throw new Error("Integrity mismatch in share "+S.toString());return m=M,y=A,d.PointInFiniteField.fromString([_,I].join("."))});return new h(b,m,y)}toBackupFormat(){return this.points.map(g=>g.toString()+"."+this.threshold.toString()+"."+this.integrity)}}Wo.KeyShares=h;let f=class gd extends i.default{static fromRandom(){return new gd((0,l.default)(32))}static fromString(g,m="hex"){return new gd(super.fromString(g,m).toArray())}static fromHex(g){return new gd(super.fromHex(g,"big"))}static fromWif(g,m=1){const y=(0,u.fromBase58Check)(g,void 0,m);if(y.data.length!==33)throw new Error("Invalid WIF length");if(y.data[32]!==1)throw new Error("Invalid WIF padding");return new gd(y.data.slice(0,32))}constructor(g=0,m=10,y="be",b="apply"){if(g instanceof i.default?(super(),g.copy(this)):super(g,m,y),b!=="nocheck"){const x=this.checkInField();if(!x.inField){if(b==="error")throw new Error("Input is out of field");i.default.move(this,x.modN)}}}checkInField(){const g=new o.default,m=this.mod(g.n);return{inField:this.cmp(m)===0,modN:m}}isValid(){return this.checkInField().inField}sign(g,m,y=!0,b){const x=new i.default((0,c.sha256)(g,m),16);return(0,a.sign)(x,this,y,b)}verify(g,m,y){const b=new i.default((0,c.sha256)(g,y),16);return(0,a.verify)(b,m,this.toPublicKey())}toPublicKey(){const m=new o.default().g.mul(this);return new s.default(m.x,m.y)}toWif(g=[128]){if(!this.isValid())throw new Error("Value is out of field");return(0,u.toBase58Check)([...this.toArray("be",32),1],g)}toAddress(g=[0]){return this.toPublicKey().toAddress(g)}toHex(){return super.toHex(32)}toString(g="hex",m=64){return super.toString(g,m)}deriveSharedSecret(g){if(!g.validate())throw new Error("Public key not valid for ECDH secret derivation");return g.mul(this)}deriveChild(g,m){const y=this.deriveSharedSecret(g),b=(0,u.toArray)(m,"utf8"),x=(0,c.sha256hmac)(y.encode(!0),b),S=new o.default;return new gd(this.add(new i.default(x)).mod(S.n).toArray())}toKeyShares(g,m){if(typeof g!="number"||typeof m!="number")throw new Error("threshold and totalShares must be numbers");if(g<2)throw new Error("threshold must be at least 2");if(m<2)throw new Error("totalShares must be at least 2");if(g>m)throw new Error("threshold should be less than or equal to totalShares");const y=d.default.fromPrivateKey(this,g),b=[];for(let S=0;S<m;S++){const P=new i.default(gd.fromRandom().toArray()),_=y.valueAt(P);b.push(new d.PointInFiniteField(P,_))}const x=this.toPublicKey().toHash("hex").slice(0,8);return new h(b,g,x)}toBackupShares(g,m){return this.toKeyShares(g,m).toBackupFormat()}static fromBackupShares(g){return gd.fromKeyShares(h.fromBackupFormat(g))}static fromKeyShares(g){const{points:m,threshold:y,integrity:b}=g;if(y<2)throw new Error("threshold must be at least 2");if(m.length<y)throw new Error(`At least ${y} shares are required to reconstruct the private key`);for(let _=0;_<y;_++)for(let I=_+1;I<y;I++)if(m[_].x.eq(m[I].x))throw new Error("Duplicate share detected, each must be unique.");const x=new d.default(m,y),S=new gd(x.valueAt(new i.default(0)).toArray());if(S.toPublicKey().toHash("hex").slice(0,8)!==b)throw new Error("Integrity hash mismatch");return S}};return Wo.default=f,Wo}var Pg={},ZM={},eD;function Xve(){return eD||(eD=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AESGCMDecrypt=t.AESGCM=t.ghash=t.incrementLeastSignificantThirtyTwoBits=t.multiply=t.rightShift=t.exclusiveOR=t.getBytes=t.checkBit=t.AES=void 0;const e=[[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118],[202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192],[183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21],[4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117],[9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132],[83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207],[208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168],[81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210],[205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115],[96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219],[224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121],[231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8],[186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138],[112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158],[225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223],[140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22]],n=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]];function r(C,A,M){let k,O;for(k=0;k<4;k++)for(O=0;O<4;O++)C[k][O]=C[k][O]^A[M+O][k]}function i(C){let A,M;for(A=0;A<4;A++)for(M=0;M<4;M++)C[A][M]=e[(C[A][M]&240)>>4][C[A][M]&15]}function s(C){let A;for(A=0;A<4;A++)C[A]=e[(C[A]&240)>>4][C[A]&15]}function o(C){const A=C[0];C[0]=C[1],C[1]=C[2],C[2]=C[3],C[3]=A}function a(C){let A,M,k,O,B;for(A=1;A<4;A++)for(M=0;M<(A-1)%2+1;M++){for(B=C[A][M],k=M;O=k+A,O>=4&&(O=O-4),O!==M;)C[A][k]=C[A][O],k=O;C[A][k]=B}}function c(C,A){let M,k=0;for(M=0;M<8;M++)(A&1)!==0&&(k=k^C),(C&128)!==0?(C=C<<1,C=C^283):C=C<<1,A=A>>1;return k}function l(C){let A,M;const k=[[],[],[],[]];for(A=0;A<4;A++)k[0][A]=c(2,C[0][A])^c(3,C[1][A])^C[2][A]^C[3][A],k[1][A]=C[0][A]^c(2,C[1][A])^c(3,C[2][A])^C[3][A],k[2][A]=C[0][A]^C[1][A]^c(2,C[2][A])^c(3,C[3][A]),k[3][A]=c(3,C[0][A])^C[1][A]^C[2][A]^c(2,C[3][A]);for(A=0;A<4;A++)for(M=0;M<4;M++)C[A][M]=k[A][M]}function u(C,A){let M,k;const O=parseInt(String(A.length/4)),B=[];for(M=0;M<A.length;M++)M%4===0&&B.push([]),B[parseInt(String(M/4))].push(A[M]);for(M=O;M<4*C;M++){B[M]=[];const $=B[M-1].slice();if(M%O===0)for(o($),s($),k=0;k<4;k++)$[k]=$[k]^n[parseInt(String(M/O))][k];else O>6&&M%O===4&&s($);for(k=0;k<4;k++)B[M][k]=B[M-O][k]^$[k]}return B}function d(C,A){let M,k,O,B;const $=[[],[],[],[]],U=[],q=Array.from(A);if(q.length<=16){for(;q.length<16;)q.unshift(0);B=11}else if(q.length<=24){for(;q.length<24;)q.unshift(0);B=13}else if(A.length<=32){for(;q.length<32;)q.unshift(0);B=15}else throw new Error("Illegal key length: "+String(A.length));const K=u(B,q);for(M=0;M<15;M++)$[parseInt(String(M/4))].push(C[M*4%15]);for($[3].push(C[15]),r($,K,0),O=1;O<B;O++)i($),a($),O+1<B&&l($),r($,K,O*4);for(M=0;M<4;M++)for(k=0;k<4;k++)U.push($[k][M]);return U}t.AES=d;const h=function(C,A,M){return(C[A]&1<<M)!==0?1:0};t.checkBit=h;const f=function(C){return[(C&4278190080)>>>24,(C&16711680)>>16,(C&65280)>>8,C&255]};t.getBytes=f;const p=function(C){let A;const M=[];for(A=0;A<C;A++)M.push(0);return M},g=[225].concat(p(15)),m=function(C,A){let M;const k=[];for(M=0;M<C.length;M++)k[M]=C[M]^A[M];return k};t.exclusiveOR=m;const y=function(C){let A,M=0,k=0;for(A=0;A<C.length;A++)k=M,M=C[A]&1,C[A]=C[A]>>1,k!==0&&(C[A]=C[A]|128);return C};t.rightShift=y;const b=function(C,A){let M,k,O=A.slice(),B=p(16);for(M=0;M<16;M++)for(k=7;k!==-1;k--)(0,t.checkBit)(C,M,k)!==0&&(B=(0,t.exclusiveOR)(B,O)),(0,t.checkBit)(O,15,0)!==0?O=(0,t.exclusiveOR)((0,t.rightShift)(O),g):O=(0,t.rightShift)(O);return B};t.multiply=b;const x=function(C){let A;const M=C.slice();for(A=15;A!==11&&(M[A]=M[A]+1,M[A]===256);A--)M[A]=0;return M};t.incrementLeastSignificantThirtyTwoBits=x;function S(C,A){let M,k=p(16);for(M=0;M<C.length;M+=16)k=(0,t.multiply)((0,t.exclusiveOR)(k,C.slice(M,Math.min(M+16,C.length))),A);return k}t.ghash=S;function P(C,A,M){let k,O,B,$=A;const U=[];if(C.length===0)return C;const q=Math.ceil(C.length/16);for(k=0;k<q;k++){for(B=(0,t.exclusiveOR)(C.slice(k*16,Math.min((k+1)*16,C.length)),d($,M)),O=0;O<B.length;O++)U.push(B[O]);k+1<q&&($=(0,t.incrementLeastSignificantThirtyTwoBits)($))}return U}function _(C,A,M,k){let O,B;const $=d(p(16),k);O=[...M],M.length===12?O=O.concat(p(3)).concat([1]):(M.length%16!==0&&(O=O.concat(p(16-M.length%16))),O=O.concat(p(8)),O=S(O.concat(p(4)).concat((0,t.getBytes)(M.length*8)),$));const U=P(C,(0,t.incrementLeastSignificantThirtyTwoBits)(O),k);return B=A.slice(),A.length===0?B=B.concat(p(16)):A.length%16!==0&&(B=B.concat(p(16-A.length%16))),B=B.concat(U),U.length===0?B=B.concat(p(16)):U.length%16!==0&&(B=B.concat(p(16-U.length%16))),B=B.concat(p(4)).concat((0,t.getBytes)(A.length*8)).concat(p(4)).concat((0,t.getBytes)(U.length*8)),{result:U,authenticationTag:P(S(B,$),O,k)}}t.AESGCM=_;function I(C,A,M,k,O){let B,$;const U=d(p(16),O);B=[...M],M.length===12?B=B.concat(p(3)).concat([1]):(M.length%16!==0&&(B=B.concat(p(16-M.length%16))),B=B.concat(p(8)),B=S(B.concat(p(4)).concat((0,t.getBytes)(M.length*8)),U));const q=P(C,(0,t.incrementLeastSignificantThirtyTwoBits)(B),O);return $=A.slice(),A.length===0?$=$.concat(p(16)):A.length%16!==0&&($=$.concat(p(16-A.length%16))),$=$.concat(C),C.length===0?$=$.concat(p(16)):C.length%16!==0&&($=$.concat(p(16-C.length%16))),$=$.concat(p(4)).concat((0,t.getBytes)(A.length*8)).concat(p(4)).concat((0,t.getBytes)(C.length*8)),P(S($,U),B,O).join()!==k.join()?null:q}t.AESGCMDecrypt=I}(ZM)),ZM}var tD;function vP(){if(tD)return Pg;tD=1;var t=Pg&&Pg.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Pg,"__esModule",{value:!0});const e=t(Ni()),n=Xve(),r=t(Ao()),i=Yn();let s=class JW extends e.default{static fromRandom(){return new JW((0,r.default)(32))}encrypt(a,c){const l=(0,r.default)(32);a=(0,i.toArray)(a,c);const{result:u,authenticationTag:d}=(0,n.AESGCM)(a,[],l,this.toArray("be",32));return(0,i.encode)([...l,...u,...d],c)}decrypt(a,c){a=(0,i.toArray)(a,c);const l=a.slice(0,32),u=a.slice(32),d=u.slice(-16),h=u.slice(0,-16),f=(0,n.AESGCMDecrypt)(h,[],l,d,this.toArray());if(f===null)throw new Error("Decryption failed!");return(0,i.encode)(f,c)}};return Pg.default=s,Pg}var Ya={},nD;function bP(){if(nD)return Ya;nD=1;var t=Ya&&Ya.__createBinding||(Object.create?function(l,u,d,h){h===void 0&&(h=d);var f=Object.getOwnPropertyDescriptor(u,d);(!f||("get"in f?!u.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return u[d]}}),Object.defineProperty(l,h,f)}:function(l,u,d,h){h===void 0&&(h=d),l[h]=u[d]}),e=Ya&&Ya.__setModuleDefault||(Object.create?function(l,u){Object.defineProperty(l,"default",{enumerable:!0,value:u})}:function(l,u){l.default=u}),n=Ya&&Ya.__importStar||function(l){if(l&&l.__esModule)return l;var u={};if(l!=null)for(var d in l)d!=="default"&&Object.prototype.hasOwnProperty.call(l,d)&&t(u,l,d);return e(u,l),u},r=Ya&&Ya.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Ya,"__esModule",{value:!0});const i=r(yv()),s=r(Ni()),o=n(Li()),a=Yn();let c=class Wc extends i.default{static format(u){const d={sourceTXID:u.sourceTXID,sourceOutputIndex:u.sourceOutputIndex,sequence:u.inputSequence},h=[...u.otherInputs];h.splice(u.inputIndex,0,d);const f=()=>{const I=new a.Writer;for(const M of h){if(typeof M.sourceTXID>"u"){if(M.sourceTransaction==null)throw new Error("Missing sourceTransaction for input");I.write(M.sourceTransaction.hash())}else I.writeReverse((0,a.toArray)(M.sourceTXID,"hex"));I.writeUInt32LE(M.sourceOutputIndex)}const C=I.toArray();return o.hash256(C)},p=()=>{var I;const C=new a.Writer;for(const k of h){const O=(I=k.sequence)!==null&&I!==void 0?I:4294967295;C.writeUInt32LE(O)}const A=C.toArray();return o.hash256(A)};function g(I){var C,A,M,k,O,B;const $=new a.Writer;if(typeof I>"u")for(const K of u.outputs){const V=(C=K.satoshis)!==null&&C!==void 0?C:0;$.writeUInt64LE(V);const G=(M=(A=K.lockingScript)===null||A===void 0?void 0:A.toBinary())!==null&&M!==void 0?M:[];$.writeVarIntNum(G.length),$.write(G)}else{const K=u.outputs[I];if(K===void 0)throw new Error(`Output at index ${I} does not exist`);const V=(k=K.satoshis)!==null&&k!==void 0?k:0;$.writeUInt64LE(V);const G=(B=(O=K.lockingScript)===null||O===void 0?void 0:O.toBinary())!==null&&B!==void 0?B:[];$.writeVarIntNum(G.length),$.write(G)}const U=$.toArray();return o.hash256(U)}let m=new Array(32).fill(0),y=new Array(32).fill(0),b=new Array(32).fill(0);(u.scope&Wc.SIGHASH_ANYONECANPAY)===0&&(m=f()),(u.scope&Wc.SIGHASH_ANYONECANPAY)===0&&(u.scope&31)!==Wc.SIGHASH_SINGLE&&(u.scope&31)!==Wc.SIGHASH_NONE&&(y=p()),(u.scope&31)!==Wc.SIGHASH_SINGLE&&(u.scope&31)!==Wc.SIGHASH_NONE?b=g():(u.scope&31)===Wc.SIGHASH_SINGLE&&u.inputIndex<u.outputs.length&&(b=g(u.inputIndex));const x=new a.Writer;x.writeInt32LE(u.transactionVersion),x.write(m),x.write(y),x.writeReverse((0,a.toArray)(u.sourceTXID,"hex")),x.writeUInt32LE(u.sourceOutputIndex);const S=u.subscript.toBinary();x.writeVarIntNum(S.length),x.write(S),x.writeUInt64LE(u.sourceSatoshis);const P=d.sequence;return x.writeUInt32LE(P),x.write(b),x.writeUInt32LE(u.lockTime),x.writeUInt32LE(u.scope>>>0),x.toArray()}static fromChecksigFormat(u){if(u.length===0){const p=new s.default(1),g=new s.default(1),m=1;return new Wc(p,g,m)}const d=u[u.length-1],h=u.slice(0,u.length-1),f=i.default.fromDER(h);return new Wc(f.r,f.s,d)}constructor(u,d,h){super(u,d),this.scope=h}hasLowS(){return!(this.s.ltn(1)||this.s.gt(new s.default("7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0","hex")))}toChecksigFormat(){return[...this.toDER(),this.scope]}};return c.SIGHASH_ALL=1,c.SIGHASH_NONE=2,c.SIGHASH_SINGLE=3,c.SIGHASH_FORKID=64,c.SIGHASH_ANYONECANPAY=128,Ya.default=c,Ya}var Cg={},rD;function Yve(){if(rD)return Cg;rD=1;var t=Cg&&Cg.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Cg,"__esModule",{value:!0});const e=t(Ni()),n=t(hu()),r=Li(),i=pu();let s=class{constructor(){this.curve=new n.default}generateProof(a,c,l,u){const d=i.PrivateKey.fromRandom(),h=d.toPublicKey(),f=l.mul(d),p=this.computeChallenge(c,l,u,f,h),g=d.add(p.mul(a)).umod(this.curve.n);return{R:h,SPrime:f,z:g}}verifyProof(a,c,l,u){const{R:d,SPrime:h,z:f}=u,p=this.computeChallenge(a,c,l,h,d),g=this.curve.g.mul(f),m=d.add(a.mul(p));if(!g.eq(m))return!1;const y=c.mul(f),b=h.add(l.mul(p));return!!y.eq(b)}computeChallenge(a,c,l,u,d){const h=[...a.encode(!0),...c.encode(!0),...l.encode(!0),...u.encode(!0),...d.encode(!0)],f=(0,r.sha256)(h);return new e.default(f).umod(this.curve.n)}};return Cg.default=s,Cg}var iD;function pu(){return iD||(iD=1,function(t){var e=tc&&tc.__createBinding||(Object.create?function(y,b,x,S){S===void 0&&(S=x);var P=Object.getOwnPropertyDescriptor(b,x);(!P||("get"in P?!b.__esModule:P.writable||P.configurable))&&(P={enumerable:!0,get:function(){return b[x]}}),Object.defineProperty(y,S,P)}:function(y,b,x,S){S===void 0&&(S=x),y[S]=b[x]}),n=tc&&tc.__setModuleDefault||(Object.create?function(y,b){Object.defineProperty(y,"default",{enumerable:!0,value:b})}:function(y,b){y.default=b}),r=tc&&tc.__importStar||function(y){if(y&&y.__esModule)return y;var b={};if(y!=null)for(var x in y)x!=="default"&&Object.prototype.hasOwnProperty.call(y,x)&&e(b,y,x);return n(b,y),b},i=tc&&tc.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(t,"__esModule",{value:!0}),t.Schnorr=t.PointInFiniteField=t.Polynomial=t.TransactionSignature=t.Random=t.Hash=t.Utils=t.ECDSA=t.DRBG=t.SymmetricKey=t.KeyShares=t.PrivateKey=t.Signature=t.PublicKey=t.Point=t.Curve=t.BigNumber=void 0;var s=Ni();Object.defineProperty(t,"BigNumber",{enumerable:!0,get:function(){return i(s).default}});var o=hu();Object.defineProperty(t,"Curve",{enumerable:!0,get:function(){return i(o).default}});var a=gv();Object.defineProperty(t,"Point",{enumerable:!0,get:function(){return i(a).default}});var c=Yd();Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return i(c).default}});var l=yv();Object.defineProperty(t,"Signature",{enumerable:!0,get:function(){return i(l).default}});var u=bv();Object.defineProperty(t,"PrivateKey",{enumerable:!0,get:function(){return i(u).default}}),Object.defineProperty(t,"KeyShares",{enumerable:!0,get:function(){return u.KeyShares}});var d=vP();Object.defineProperty(t,"SymmetricKey",{enumerable:!0,get:function(){return i(d).default}});var h=XW();Object.defineProperty(t,"DRBG",{enumerable:!0,get:function(){return i(h).default}}),t.ECDSA=r(vv()),t.Utils=r(Yn()),t.Hash=r(Li());var f=Ao();Object.defineProperty(t,"Random",{enumerable:!0,get:function(){return i(f).default}});var p=bP();Object.defineProperty(t,"TransactionSignature",{enumerable:!0,get:function(){return i(p).default}});var g=ZW();Object.defineProperty(t,"Polynomial",{enumerable:!0,get:function(){return i(g).default}}),Object.defineProperty(t,"PointInFiniteField",{enumerable:!0,get:function(){return g.PointInFiniteField}});var m=Yve();Object.defineProperty(t,"Schnorr",{enumerable:!0,get:function(){return i(m).default}})}(tc)),tc}var rd={},AE={},sD;function u_(){if(sD)return AE;sD=1,Object.defineProperty(AE,"__esModule",{value:!0});const t={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_SPLIT:127,OP_LEFT:128,OP_NUM2BIN:128,OP_RIGHT:129,OP_BIN2NUM:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_NOP3:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_NOP11:186,OP_NOP12:187,OP_NOP13:188,OP_NOP14:189,OP_NOP15:190,OP_NOP16:191,OP_NOP17:192,OP_NOP18:193,OP_NOP19:194,OP_NOP20:195,OP_NOP21:196,OP_NOP22:197,OP_NOP23:198,OP_NOP24:199,OP_NOP25:200,OP_NOP26:201,OP_NOP27:202,OP_NOP28:203,OP_NOP29:204,OP_NOP30:205,OP_NOP31:206,OP_NOP32:207,OP_NOP33:208,OP_NOP34:209,OP_NOP35:210,OP_NOP36:211,OP_NOP37:212,OP_NOP38:213,OP_NOP39:214,OP_NOP40:215,OP_NOP41:216,OP_NOP42:217,OP_NOP43:218,OP_NOP44:219,OP_NOP45:220,OP_NOP46:221,OP_NOP47:222,OP_NOP48:223,OP_NOP49:224,OP_NOP50:225,OP_NOP51:226,OP_NOP52:227,OP_NOP53:228,OP_NOP54:229,OP_NOP55:230,OP_NOP56:231,OP_NOP57:232,OP_NOP58:233,OP_NOP59:234,OP_NOP60:235,OP_NOP61:236,OP_NOP62:237,OP_NOP63:238,OP_NOP64:239,OP_NOP65:240,OP_NOP66:241,OP_NOP67:242,OP_NOP68:243,OP_NOP69:244,OP_NOP70:245,OP_NOP71:246,OP_NOP72:247,OP_NOP73:248,OP_NOP77:252,OP_SMALLDATA:249,OP_SMALLINTEGER:250,OP_PUBKEYS:251,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};for(const e in t)t[t[e]]=e;return AE.default=t,AE}var Mg={},oD;function d_(){if(oD)return Mg;oD=1;var t=Mg&&Mg.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Mg,"__esModule",{value:!0});const e=t(u_()),n=Yn(),r=t(Ni());let i=class sy{static fromASM(o){const a=[],c=o.split(" ");let l=0;for(;l<c.length;){const u=c[l];let d,h=0;if(u.startsWith("OP_")&&typeof e.default[u]<"u"&&(d=u,h=e.default[u]),u==="0")h=0,a.push({op:h}),l=l+1;else if(u==="-1")h=e.default.OP_1NEGATE,a.push({op:h}),l=l+1;else if(d===void 0){let f=c[l];f.length%2!==0&&(f="0"+f);const p=(0,n.toArray)(f,"hex");if((0,n.encode)(p,"hex")!==f)throw new Error("invalid hex string in script");const g=p.length;g>=0&&g<e.default.OP_PUSHDATA1?h=g:g<Math.pow(2,8)?h=e.default.OP_PUSHDATA1:g<Math.pow(2,16)?h=e.default.OP_PUSHDATA2:g<Math.pow(2,32)&&(h=e.default.OP_PUSHDATA4),a.push({data:p,op:h}),l=l+1}else h===e.default.OP_PUSHDATA1||h===e.default.OP_PUSHDATA2||h===e.default.OP_PUSHDATA4?(a.push({data:(0,n.toArray)(c[l+2],"hex"),op:h}),l=l+3):(a.push({op:h}),l=l+1)}return new sy(a)}static fromHex(o){if(o.length===0)return sy.fromBinary([]);if(o.length%2!==0)throw new Error("There is an uneven number of characters in the string which suggests it is not hex encoded.");if(!/^[0-9a-fA-F]+$/.test(o))throw new Error("Some elements in this string are not hex encoded.");return sy.fromBinary((0,n.toArray)(o,"hex"))}static fromBinary(o){o=[...o];const a=[],c=new n.Reader(o);for(;!c.eof();){const l=c.readUInt8();let u=0,d=[];if(l>0&&l<e.default.OP_PUSHDATA1)u=l,a.push({data:c.read(u),op:l});else if(l===e.default.OP_PUSHDATA1){try{u=c.readUInt8(),d=c.read(u)}catch{c.read()}a.push({data:d,op:l})}else if(l===e.default.OP_PUSHDATA2){try{u=c.readUInt16LE(),d=c.read(u)}catch{c.read()}a.push({data:d,op:l})}else if(l===e.default.OP_PUSHDATA4){try{u=c.readUInt32LE(),d=c.read(u)}catch{c.read()}a.push({data:d,op:l})}else a.push({op:l})}return new sy(a)}constructor(o=[]){this.chunks=o}toASM(){let o="";for(let a=0;a<this.chunks.length;a++){const c=this.chunks[a];o+=this._chunkToString(c)}return o.slice(1)}toHex(){return(0,n.encode)(this.toBinary(),"hex")}toBinary(){const o=new n.Writer;for(let a=0;a<this.chunks.length;a++){const c=this.chunks[a],l=c.op;o.writeUInt8(l),c.data!=null&&(l<e.default.OP_PUSHDATA1?o.write(c.data):l===e.default.OP_PUSHDATA1?(o.writeUInt8(c.data.length),o.write(c.data)):l===e.default.OP_PUSHDATA2?(o.writeUInt16LE(c.data.length),o.write(c.data)):l===e.default.OP_PUSHDATA4&&(o.writeUInt32LE(c.data.length),o.write(c.data)))}return o.toArray()}writeScript(o){return this.chunks=this.chunks.concat(o.chunks),this}writeOpCode(o){return this.chunks.push({op:o}),this}setChunkOpCode(o,a){return this.chunks[o]={op:a},this}writeBn(o){if(o.cmpn(0)===e.default.OP_0)this.chunks.push({op:e.default.OP_0});else if(o.cmpn(-1)===0)this.chunks.push({op:e.default.OP_1NEGATE});else if(o.cmpn(1)>=0&&o.cmpn(16)<=0)this.chunks.push({op:o.toNumber()+e.default.OP_1-1});else{const a=o.toSm("little");this.writeBin(a)}return this}writeBin(o){let a;if(o.length>0&&o.length<e.default.OP_PUSHDATA1)a=o.length;else if(o.length===0)a=e.default.OP_0;else if(o.length<Math.pow(2,8))a=e.default.OP_PUSHDATA1;else if(o.length<Math.pow(2,16))a=e.default.OP_PUSHDATA2;else if(o.length<Math.pow(2,32))a=e.default.OP_PUSHDATA4;else throw new Error("You can't push that much data");return this.chunks.push({data:o,op:a}),this}writeNumber(o){return this.writeBn(new r.default(o)),this}removeCodeseparators(){const o=[];for(let a=0;a<this.chunks.length;a++)this.chunks[a].op!==e.default.OP_CODESEPARATOR&&o.push(this.chunks[a]);return this.chunks=o,this}findAndDelete(o){const a=o.toHex();for(let c=0;c<this.chunks.length;c++){const u=new sy([this.chunks[c]]).toHex();a===u&&this.chunks.splice(c,1)}return this}isPushOnly(){for(let o=0;o<this.chunks.length;o++)if(this.chunks[o].op>e.default.OP_16)return!1;return!0}isLockingScript(){throw new Error("Not implemented")}isUnlockingScript(){throw new Error("Not implemented")}_chunkToString(o){const a=o.op;let c="";if(typeof o.data>"u"){const l=e.default[a];c=`${c} ${l}`}else c=`${c} ${(0,n.toHex)(o.data)}`;return c}};return Mg.default=i,Mg}var Ag={},aD;function f_(){if(aD)return Ag;aD=1;var t=Ag&&Ag.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ag,"__esModule",{value:!0});const e=t(d_());let n=class extends e.default{isLockingScript(){return!0}isUnlockingScript(){return!1}};return Ag.default=n,Ag}var Rg={},lD;function xP(){if(lD)return Rg;lD=1;var t=Rg&&Rg.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Rg,"__esModule",{value:!0});const e=t(d_());let n=class extends e.default{isLockingScript(){return!1}isUnlockingScript(){return!0}};return Rg.default=n,Rg}var Za={},cD;function QW(){if(cD)return Za;cD=1;var t=Za&&Za.__createBinding||(Object.create?function(m,y,b,x){x===void 0&&(x=b);var S=Object.getOwnPropertyDescriptor(y,b);(!S||("get"in S?!y.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return y[b]}}),Object.defineProperty(m,x,S)}:function(m,y,b,x){x===void 0&&(x=b),m[x]=y[b]}),e=Za&&Za.__setModuleDefault||(Object.create?function(m,y){Object.defineProperty(m,"default",{enumerable:!0,value:y})}:function(m,y){m.default=y}),n=Za&&Za.__importStar||function(m){if(m&&m.__esModule)return m;var y={};if(m!=null)for(var b in m)b!=="default"&&Object.prototype.hasOwnProperty.call(m,b)&&t(y,m,b);return e(y,m),y},r=Za&&Za.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(Za,"__esModule",{value:!0});const i=r(d_()),s=r(Ni()),o=r(u_()),a=Yn(),c=n(Li()),l=r(bP()),u=r(Yd()),d=vv(),h=1024*1024*1024,f=Math.pow(2,31)-1,p=!0;let g=class{constructor(y){this.sourceTXID=y.sourceTXID,this.sourceOutputIndex=y.sourceOutputIndex,this.sourceSatoshis=y.sourceSatoshis,this.lockingScript=y.lockingScript,this.transactionVersion=y.transactionVersion,this.otherInputs=y.otherInputs,this.outputs=y.outputs,this.inputIndex=y.inputIndex,this.unlockingScript=y.unlockingScript,this.inputSequence=y.inputSequence,this.lockTime=y.lockTime,this.reset()}reset(){this.context="UnlockingScript",this.programCounter=0,this.lastCodeSeparator=null,this.stack=[],this.altStack=[],this.ifStack=[]}step(){var y,b,x,S,P,_;this.context==="UnlockingScript"&&this.programCounter>=this.unlockingScript.chunks.length&&(this.context="LockingScript",this.programCounter=0);let I;this.context==="UnlockingScript"?I=this.unlockingScript.chunks[this.programCounter]:I=this.lockingScript.chunks[this.programCounter];const C=Se=>Se===o.default.OP_2MUL||Se===o.default.OP_2DIV||Se===o.default.OP_VERIF||Se===o.default.OP_VERNOTIF||Se===o.default.OP_VER,A=Se=>{const Ie=Se.data,me=Se.op;return Array.isArray(Ie)?Ie.length===0?me===o.default.OP_0:Ie.length===1&&Ie[0]>=1&&Ie[0]<=16?me===o.default.OP_1+(Ie[0]-1):Ie.length===1&&Ie[0]===129?me===o.default.OP_1NEGATE:Ie.length<=75?me===Ie.length:Ie.length<=255?me===o.default.OP_PUSHDATA1:Ie.length<=65535?me===o.default.OP_PUSHDATA2:!0:!0},M=(Se,Ie=Number.MAX_SAFE_INTEGER)=>!(Se.length>Ie||Se.length>0&&(Se[Se.length-1]&127)===0&&(Se.length<=1||(Se[Se.length-2]&128)===0)),k=(Se,Ie)=>{const me=Se;for(;me.length<Ie;)me.unshift(0);return me},O=Se=>{if(Se.length<9||Se.length>73||Se[0]!==48||Se[1]!==Se.length-3)return!1;const Ie=Se[3];if(5+Ie>=Se.length)return!1;const me=Se[5+Ie];if(Ie+me+7!==Se.length)return!1;const Ee=Se.slice(4);if(Se[2]!==2||Ie===0||(Ee[0]&128)!==0||Ie>1&&Ee[0]===0&&(Ee[1]&128)===0)return!1;const oe=Se.slice(6+Ie);return!(Se[6+Ie-2]!==2||me===0||(oe[0]&128)!==0||me>1&&oe[0]===0&&(oe[1]&128)===0)},B=Se=>{if(Se.length===0)return!0;O(Se)||this.scriptEvaluationError("The signature format is invalid.");const Ie=l.default.fromChecksigFormat(Se);return Ie.hasLowS()||this.scriptEvaluationError("The signature must have a low S value."),(Ie.scope&l.default.SIGHASH_FORKID)===0?(this.scriptEvaluationError("The signature must use SIGHASH_FORKID."),!1):!0},$=Se=>(Se.length<33&&this.scriptEvaluationError("The public key is too short, it must be at least 33 bytes."),Se[0]===4?Se.length!==65&&this.scriptEvaluationError("The non-compressed public key must be 65 bytes."):Se[0]===2||Se[0]===3?Se.length!==33&&this.scriptEvaluationError("The compressed public key must be 33 bytes."):this.scriptEvaluationError("The public key is in an unknown format."),!0),U=(Se,Ie,me)=>{const Ee=l.default.format({sourceTXID:this.sourceTXID,sourceOutputIndex:this.sourceOutputIndex,sourceSatoshis:this.sourceSatoshis,transactionVersion:this.transactionVersion,otherInputs:this.otherInputs,outputs:this.outputs,inputIndex:this.inputIndex,subscript:me,inputSequence:this.inputSequence,lockTime:this.lockTime,scope:Se.scope}),oe=new s.default(c.hash256(Ee));return(0,d.verify)(oe,Se,Ie)},q=!this.ifStack.includes(!1);let K,V,G,j,Q,se,Z,ie,pe,ue,le,ae,_e,ye,Ae,Oe,Be,ce,Ge,Pe,He,Re,je,te,ee,X,we,Ne,We,xe,Ve,be;const ge=I.op;if(typeof ge>"u"&&this.scriptEvaluationError(`An opcode is missing in this chunk of the ${this.context}!`),Array.isArray(I.data)&&I.data.length>h&&this.scriptEvaluationError(`It's not currently possible to push data larger than ${h} bytes.`),q&&C(ge)&&this.scriptEvaluationError("This opcode is currently disabled."),q&&ge>=0&&ge<=o.default.OP_PUSHDATA4)A(I)||this.scriptEvaluationError("This data is not minimally-encoded."),Array.isArray(I.data)?this.stack.push(I.data):this.stack.push([]);else if(q||o.default.OP_IF<=ge&&ge<=o.default.OP_ENDIF)switch(ge){case o.default.OP_1NEGATE:case o.default.OP_1:case o.default.OP_2:case o.default.OP_3:case o.default.OP_4:case o.default.OP_5:case o.default.OP_6:case o.default.OP_7:case o.default.OP_8:case o.default.OP_9:case o.default.OP_10:case o.default.OP_11:case o.default.OP_12:case o.default.OP_13:case o.default.OP_14:case o.default.OP_15:case o.default.OP_16:se=ge-(o.default.OP_1-1),K=new s.default(se).toScriptNum(),this.stack.push(K);break;case o.default.OP_NOP:case o.default.OP_NOP2:case o.default.OP_NOP3:case o.default.OP_NOP1:case o.default.OP_NOP4:case o.default.OP_NOP5:case o.default.OP_NOP6:case o.default.OP_NOP7:case o.default.OP_NOP8:case o.default.OP_NOP9:case o.default.OP_NOP10:case o.default.OP_NOP11:case o.default.OP_NOP12:case o.default.OP_NOP13:case o.default.OP_NOP14:case o.default.OP_NOP15:case o.default.OP_NOP16:case o.default.OP_NOP17:case o.default.OP_NOP18:case o.default.OP_NOP19:case o.default.OP_NOP20:case o.default.OP_NOP21:case o.default.OP_NOP22:case o.default.OP_NOP23:case o.default.OP_NOP24:case o.default.OP_NOP25:case o.default.OP_NOP26:case o.default.OP_NOP27:case o.default.OP_NOP28:case o.default.OP_NOP29:case o.default.OP_NOP30:case o.default.OP_NOP31:case o.default.OP_NOP32:case o.default.OP_NOP33:case o.default.OP_NOP34:case o.default.OP_NOP35:case o.default.OP_NOP36:case o.default.OP_NOP37:case o.default.OP_NOP38:case o.default.OP_NOP39:case o.default.OP_NOP40:case o.default.OP_NOP41:case o.default.OP_NOP42:case o.default.OP_NOP43:case o.default.OP_NOP44:case o.default.OP_NOP45:case o.default.OP_NOP46:case o.default.OP_NOP47:case o.default.OP_NOP48:case o.default.OP_NOP49:case o.default.OP_NOP50:case o.default.OP_NOP51:case o.default.OP_NOP52:case o.default.OP_NOP53:case o.default.OP_NOP54:case o.default.OP_NOP55:case o.default.OP_NOP56:case o.default.OP_NOP57:case o.default.OP_NOP58:case o.default.OP_NOP59:case o.default.OP_NOP60:case o.default.OP_NOP61:case o.default.OP_NOP62:case o.default.OP_NOP63:case o.default.OP_NOP64:case o.default.OP_NOP65:case o.default.OP_NOP66:case o.default.OP_NOP67:case o.default.OP_NOP68:case o.default.OP_NOP69:case o.default.OP_NOP70:case o.default.OP_NOP71:case o.default.OP_NOP72:case o.default.OP_NOP73:case o.default.OP_NOP77:break;case o.default.OP_IF:case o.default.OP_NOTIF:xe=!1,q&&(this.stack.length<1&&this.scriptEvaluationError("OP_IF and OP_NOTIF require at least one item on the stack when they are used!"),K=this.stacktop(-1),xe=this.castToBool(K),ge===o.default.OP_NOTIF&&(xe=!xe),this.stack.pop()),this.ifStack.push(xe);break;case o.default.OP_ELSE:this.ifStack.length===0&&this.scriptEvaluationError("OP_ELSE requires a preceeding OP_IF."),this.ifStack[this.ifStack.length-1]=!this.ifStack[this.ifStack.length-1];break;case o.default.OP_ENDIF:this.ifStack.length===0&&this.scriptEvaluationError("OP_ENDIF requires a preceeding OP_IF."),this.ifStack.pop();break;case o.default.OP_VERIFY:this.stack.length<1&&this.scriptEvaluationError("OP_VERIFY requires at least one item to be on the stack."),K=this.stacktop(-1),xe=this.castToBool(K),xe?this.stack.pop():this.scriptEvaluationError("OP_VERIFY requires the top stack value to be truthy.");break;case o.default.OP_RETURN:this.context==="UnlockingScript"?this.programCounter=this.unlockingScript.chunks.length:this.programCounter=this.lockingScript.chunks.length,this.ifStack=[];break;case o.default.OP_TOALTSTACK:this.stack.length<1&&this.scriptEvaluationError("OP_TOALTSTACK requires at oeast one item to be on the stack."),this.altStack.push((y=this.stack.pop())!==null&&y!==void 0?y:[]);break;case o.default.OP_FROMALTSTACK:this.altStack.length<1&&this.scriptEvaluationError("OP_FROMALTSTACK requires at least one item to be on the stack."),this.stack.push((b=this.altStack.pop())!==null&&b!==void 0?b:[]);break;case o.default.OP_2DROP:this.stack.length<2&&this.scriptEvaluationError("OP_2DROP requires at least two items to be on the stack."),this.stack.pop(),this.stack.pop();break;case o.default.OP_2DUP:this.stack.length<2&&this.scriptEvaluationError("OP_2DUP requires at least two items to be on the stack."),V=this.stacktop(-2),G=this.stacktop(-1),this.stack.push([...V]),this.stack.push([...G]);break;case o.default.OP_3DUP:this.stack.length<3&&this.scriptEvaluationError("OP_3DUP requires at least three items to be on the stack."),V=this.stacktop(-3),G=this.stacktop(-2),j=this.stacktop(-1),this.stack.push([...V]),this.stack.push([...G]),this.stack.push([...j]);break;case o.default.OP_2OVER:this.stack.length<4&&this.scriptEvaluationError("OP_2OVER requires at least four items to be on the stack."),V=this.stacktop(-4),G=this.stacktop(-3),this.stack.push([...V]),this.stack.push([...G]);break;case o.default.OP_2ROT:this.stack.length<6&&this.scriptEvaluationError("OP_2ROT requires at least six items to be on the stack."),Q=this.stack.splice(this.stack.length-6,2),this.stack.push(Q[0]),this.stack.push(Q[1]);break;case o.default.OP_2SWAP:this.stack.length<4&&this.scriptEvaluationError("OP_2SWAP requires at least four items to be on the stack."),Q=this.stack.splice(this.stack.length-4,2),this.stack.push(Q[0]),this.stack.push(Q[1]);break;case o.default.OP_IFDUP:this.stack.length<1&&this.scriptEvaluationError("OP_IFDUP requires at least one item to be on the stack."),K=this.stacktop(-1),xe=this.castToBool(K),xe&&this.stack.push([...K]);break;case o.default.OP_DEPTH:K=new s.default(this.stack.length).toScriptNum(),this.stack.push(K);break;case o.default.OP_DROP:this.stack.length<1&&this.scriptEvaluationError("OP_DROP requires at least one item to be on the stack."),this.stack.pop();break;case o.default.OP_DUP:this.stack.length<1&&this.scriptEvaluationError("OP_DUP requires at least one item to be on the stack."),this.stack.push([...this.stacktop(-1)]);break;case o.default.OP_NIP:this.stack.length<2&&this.scriptEvaluationError("OP_NIP requires at least two items to be on the stack."),this.stack.splice(this.stack.length-2,1);break;case o.default.OP_OVER:this.stack.length<2&&this.scriptEvaluationError("OP_OVER requires at least two items to be on the stack."),this.stack.push([...this.stacktop(-2)]);break;case o.default.OP_PICK:case o.default.OP_ROLL:this.stack.length<2&&this.scriptEvaluationError(`${o.default[ge]} requires at least two items to be on the stack.`),K=this.stacktop(-1),ye=s.default.fromScriptNum(K,p),se=ye.toNumber(),this.stack.pop(),(se<0||se>=this.stack.length)&&this.scriptEvaluationError(`${o.default[ge]} requires the top stack element to be 0 or a positive number less than the current size of the stack.`),K=this.stacktop(-se-1),ge===o.default.OP_ROLL&&this.stack.splice(this.stack.length-se-1,1),this.stack.push([...K]);break;case o.default.OP_ROT:this.stack.length<3&&this.scriptEvaluationError("OP_ROT requires at least three items to be on the stack."),le=this.stacktop(-3),ae=this.stacktop(-2),_e=this.stacktop(-1),this.stack[this.stack.length-3]=ae,this.stack[this.stack.length-2]=_e,this.stack[this.stack.length-1]=le;break;case o.default.OP_SWAP:this.stack.length<2&&this.scriptEvaluationError("OP_SWAP requires at least two items to be on the stack."),le=this.stacktop(-2),ae=this.stacktop(-1),this.stack[this.stack.length-2]=ae,this.stack[this.stack.length-1]=le;break;case o.default.OP_TUCK:this.stack.length<2&&this.scriptEvaluationError("OP_TUCK requires at least two items to be on the stack."),this.stack.splice(this.stack.length-2,0,[...this.stacktop(-1)]);break;case o.default.OP_SIZE:this.stack.length<1&&this.scriptEvaluationError("OP_SIZE requires at least one item to be on the stack."),ye=new s.default(this.stacktop(-1).length),this.stack.push(ye.toScriptNum());break;case o.default.OP_AND:case o.default.OP_OR:case o.default.OP_XOR:switch(this.stack.length<2&&this.scriptEvaluationError(`${o.default[ge]} requires at least one item to be on the stack.`),V=this.stacktop(-2),G=this.stacktop(-1),V.length!==G.length&&this.scriptEvaluationError(`${o.default[ge]} requires the top two stack items to be the same size.`),ge){case o.default.OP_AND:for(let Se=0;Se<V.length;Se++)V[Se]&=G[Se];break;case o.default.OP_OR:for(let Se=0;Se<V.length;Se++)V[Se]|=G[Se];break;case o.default.OP_XOR:for(let Se=0;Se<V.length;Se++)V[Se]^=G[Se];break}this.stack.pop();break;case o.default.OP_INVERT:this.stack.length<1&&this.scriptEvaluationError("OP_INVERT requires at least one item to be on the stack."),K=this.stacktop(-1);for(let Se=0;Se<K.length;Se++)K[Se]=~K[Se];break;case o.default.OP_LSHIFT:case o.default.OP_RSHIFT:if(this.stack.length<2&&this.scriptEvaluationError(`${o.default[ge]} requires at least two items to be on the stack.`),V=this.stacktop(-2),V.length===0)this.stack.pop();else{Ae=new s.default(V),Oe=s.default.fromScriptNum(this.stacktop(-1),p),se=Oe.toNumber(),se<0&&this.scriptEvaluationError(`${o.default[ge]} requires the top item on the stack not to be negative.`),this.stack.pop(),this.stack.pop();let Se;ge===o.default.OP_LSHIFT&&(Se=Ae.ushln(se)),ge===o.default.OP_RSHIFT&&(Se=Ae.ushrn(se));const Ie=k(Se.toArray().slice(V.length*-1),V.length);this.stack.push(Ie)}break;case o.default.OP_EQUAL:case o.default.OP_EQUALVERIFY:this.stack.length<2&&this.scriptEvaluationError(`${o.default[ge]} requires at least two items to be on the stack.`),V=this.stacktop(-2),G=this.stacktop(-1),Ve=(0,a.toHex)(V)===(0,a.toHex)(G),this.stack.pop(),this.stack.pop(),this.stack.push(Ve?[1]:[]),ge===o.default.OP_EQUALVERIFY&&(Ve?this.stack.pop():this.scriptEvaluationError("OP_EQUALVERIFY requires the top two stack items to be equal."));break;case o.default.OP_1ADD:case o.default.OP_1SUB:case o.default.OP_NEGATE:case o.default.OP_ABS:case o.default.OP_NOT:case o.default.OP_0NOTEQUAL:switch(this.stack.length<1&&this.scriptEvaluationError(`${o.default[ge]} requires at least one items to be on the stack.`),K=this.stacktop(-1),ye=s.default.fromScriptNum(K,p),ge){case o.default.OP_1ADD:ye=ye.addn(1);break;case o.default.OP_1SUB:ye=ye.subn(1);break;case o.default.OP_NEGATE:ye=ye.neg();break;case o.default.OP_ABS:ye.cmpn(0)<0&&(ye=ye.neg());break;case o.default.OP_NOT:ye=new s.default(ye.cmpn(0)===0?1:0);break;case o.default.OP_0NOTEQUAL:ye=new s.default(ye.cmpn(0)!==0?1:0);break}this.stack.pop(),this.stack.push(ye.toScriptNum());break;case o.default.OP_ADD:case o.default.OP_SUB:case o.default.OP_MUL:case o.default.OP_MOD:case o.default.OP_DIV:case o.default.OP_BOOLAND:case o.default.OP_BOOLOR:case o.default.OP_NUMEQUAL:case o.default.OP_NUMEQUALVERIFY:case o.default.OP_NUMNOTEQUAL:case o.default.OP_LESSTHAN:case o.default.OP_GREATERTHAN:case o.default.OP_LESSTHANOREQUAL:case o.default.OP_GREATERTHANOREQUAL:case o.default.OP_MIN:case o.default.OP_MAX:switch(this.stack.length<2&&this.scriptEvaluationError(`${o.default[ge]} requires at least two items to be on the stack.`),Ae=s.default.fromScriptNum(this.stacktop(-2),p),Oe=s.default.fromScriptNum(this.stacktop(-1),p),ye=new s.default(0),ge){case o.default.OP_ADD:ye=Ae.add(Oe);break;case o.default.OP_SUB:ye=Ae.sub(Oe);break;case o.default.OP_MUL:ye=Ae.mul(Oe);break;case o.default.OP_DIV:Oe.cmpn(0)===0&&this.scriptEvaluationError("OP_DIV cannot divide by zero!"),ye=Ae.div(Oe);break;case o.default.OP_MOD:Oe.cmpn(0)===0&&this.scriptEvaluationError("OP_MOD cannot divide by zero!"),ye=Ae.mod(Oe);break;case o.default.OP_BOOLAND:ye=new s.default(Ae.cmpn(0)!==0&&Oe.cmpn(0)!==0?1:0);break;case o.default.OP_BOOLOR:ye=new s.default(Ae.cmpn(0)!==0||Oe.cmpn(0)!==0?1:0);break;case o.default.OP_NUMEQUAL:ye=new s.default(Ae.cmp(Oe)===0?1:0);break;case o.default.OP_NUMEQUALVERIFY:ye=new s.default(Ae.cmp(Oe)===0?1:0);break;case o.default.OP_NUMNOTEQUAL:ye=new s.default(Ae.cmp(Oe)!==0?1:0);break;case o.default.OP_LESSTHAN:ye=new s.default(Ae.cmp(Oe)<0?1:0);break;case o.default.OP_GREATERTHAN:ye=new s.default(Ae.cmp(Oe)>0?1:0);break;case o.default.OP_LESSTHANOREQUAL:ye=new s.default(Ae.cmp(Oe)<=0?1:0);break;case o.default.OP_GREATERTHANOREQUAL:ye=new s.default(Ae.cmp(Oe)>=0?1:0);break;case o.default.OP_MIN:ye=Ae.cmp(Oe)<0?Ae:Oe;break;case o.default.OP_MAX:ye=Ae.cmp(Oe)>0?Ae:Oe;break}this.stack.pop(),this.stack.pop(),this.stack.push(ye.toScriptNum()),ge===o.default.OP_NUMEQUALVERIFY&&(this.castToBool(this.stacktop(-1))?this.stack.pop():this.scriptEvaluationError("OP_NUMEQUALVERIFY requires the top stack item to be truthy."));break;case o.default.OP_WITHIN:this.stack.length<3&&this.scriptEvaluationError("OP_WITHIN requires at least three items to be on the stack."),Ae=s.default.fromScriptNum(this.stacktop(-3),p),Oe=s.default.fromScriptNum(this.stacktop(-2),p),Be=s.default.fromScriptNum(this.stacktop(-1),p),xe=Oe.cmp(Ae)<=0&&Ae.cmp(Be)<0,this.stack.pop(),this.stack.pop(),this.stack.pop(),this.stack.push(xe?[1]:[]);break;case o.default.OP_RIPEMD160:case o.default.OP_SHA1:case o.default.OP_SHA256:case o.default.OP_HASH160:case o.default.OP_HASH256:{this.stack.length<1&&this.scriptEvaluationError(`${o.default[ge]} requires at least one item to be on the stack.`);let Se=[];K=this.stacktop(-1),ge===o.default.OP_RIPEMD160?Se=c.ripemd160(K):ge===o.default.OP_SHA1?Se=c.sha1(K):ge===o.default.OP_SHA256?Se=c.sha256(K):ge===o.default.OP_HASH160?Se=c.hash160(K):ge===o.default.OP_HASH256&&(Se=c.hash256(K)),this.stack.pop(),this.stack.push(Se);break}case o.default.OP_CODESEPARATOR:this.lastCodeSeparator=this.programCounter;break;case o.default.OP_CHECKSIG:case o.default.OP_CHECKSIGVERIFY:this.stack.length<2&&this.scriptEvaluationError(`${o.default[ge]} requires at least two items to be on the stack.`),ce=this.stacktop(-2),Ge=this.stacktop(-1),(!B(ce)||!$(Ge))&&this.scriptEvaluationError(`${o.default[ge]} requires correct encoding for the public key and signature.`),this.context==="UnlockingScript"?Pe=new i.default(this.unlockingScript.chunks.slice((x=this.lastCodeSeparator)!==null&&x!==void 0?x:0)):Pe=new i.default(this.lockingScript.chunks.slice((S=this.lastCodeSeparator)!==null&&S!==void 0?S:0)),Pe.findAndDelete(new i.default().writeBin(ce));try{He=l.default.fromChecksigFormat(ce),Re=u.default.fromDER(Ge),be=U(He,Re,Pe)}catch{be=!1}!be&&ce.length>0&&this.scriptEvaluationError(`${o.default[ge]} failed to verify the signature, and requires an empty signature when verification fails.`),this.stack.pop(),this.stack.pop(),this.stack.push(be?[1]:[]),ge===o.default.OP_CHECKSIGVERIFY&&(be?this.stack.pop():this.scriptEvaluationError("OP_CHECKSIGVERIFY requires that a valid signature is provided."));break;case o.default.OP_CHECKMULTISIG:case o.default.OP_CHECKMULTISIGVERIFY:je=1,this.stack.length<je&&this.scriptEvaluationError(`${o.default[ge]} requires at least 1 item to be on the stack.`),ee=s.default.fromScriptNum(this.stacktop(-je),p).toNumber(),(ee<0||ee>f)&&this.scriptEvaluationError(`${o.default[ge]} requires a key count between 0 and ${f}.`),X=++je,je+=ee,we=ee+2,this.stack.length<je&&this.scriptEvaluationError(`${o.default[ge]} requires the number of stack items not to be less than the number of keys used.`),Ne=s.default.fromScriptNum(this.stacktop(-je),p).toNumber(),(Ne<0||Ne>ee)&&this.scriptEvaluationError(`${o.default[ge]} requires the number of signatures to be no greater than the number of keys.`),We=++je,je+=Ne,this.stack.length<je&&this.scriptEvaluationError(`${o.default[ge]} requires the number of stack items not to be less than the number of signatures provided.`),this.context==="UnlockingScript"?Pe=new i.default(this.unlockingScript.chunks.slice((P=this.lastCodeSeparator)!==null&&P!==void 0?P:0)):Pe=new i.default(this.lockingScript.chunks.slice((_=this.lastCodeSeparator)!==null&&_!==void 0?_:0));for(let Se=0;Se<Ne;Se++)ce=this.stacktop(-We-Se),Pe.findAndDelete(new i.default().writeBin(ce));for(be=!0;be&&Ne>0;){ce=this.stacktop(-We),Ge=this.stacktop(-X),(!B(ce)||!$(Ge))&&this.scriptEvaluationError(`${o.default[ge]} requires correct encoding for the public key and signature.`);try{He=l.default.fromChecksigFormat(ce),Re=u.default.fromString((0,a.toHex)(Ge)),te=U(He,Re,Pe)}catch{te=!1}te&&(We++,Ne--),X++,ee--,Ne>ee&&(be=!1)}for(;je-- >1;)!be&&we===0&&this.stacktop(-1).length>0&&this.scriptEvaluationError(`${o.default[ge]} failed to verify a signature, and requires an empty signature when verification fails.`),we>0&&we--,this.stack.pop();this.stack.length<1&&this.scriptEvaluationError(`${o.default[ge]} requires an extra item to be on the stack.`),this.stacktop(-1).length>0&&this.scriptEvaluationError(`${o.default[ge]} requires the extra stack item to be empty.`),this.stack.pop(),this.stack.push(be?[1]:[]),ge===o.default.OP_CHECKMULTISIGVERIFY&&(be?this.stack.pop():this.scriptEvaluationError("OP_CHECKMULTISIGVERIFY requires that a sufficient number of valid signatures are provided."));break;case o.default.OP_CAT:this.stack.length<2&&this.scriptEvaluationError("OP_CAT requires at least two items to be on the stack."),V=this.stacktop(-2),G=this.stacktop(-1),V.length+G.length>h&&this.scriptEvaluationError(`It's not currently possible to push data larger than ${h} bytes.`),this.stack[this.stack.length-2]=[...V,...G],this.stack.pop();break;case o.default.OP_SPLIT:this.stack.length<2&&this.scriptEvaluationError("OP_SPLIT requires at least two items to be on the stack."),V=this.stacktop(-2),se=s.default.fromScriptNum(this.stacktop(-1),p).toNumber(),(se<0||se>V.length)&&this.scriptEvaluationError("OP_SPLIT requires the first stack item to be a non-negative number less than or equal to the size of the second-from-top stack item."),G=[...V],this.stack[this.stack.length-2]=G.slice(0,se),this.stack[this.stack.length-1]=G.slice(se);break;case o.default.OP_NUM2BIN:if(this.stack.length<2&&this.scriptEvaluationError("OP_NUM2BIN requires at least two items to be on the stack."),Z=s.default.fromScriptNum(this.stacktop(-1),p).toNumber(),Z>h&&this.scriptEvaluationError(`It's not currently possible to push data larger than ${h} bytes.`),this.stack.pop(),ie=this.stacktop(-1),ie=(0,a.minimallyEncode)(ie),ie.length>Z&&this.scriptEvaluationError("OP_NUM2BIN requires that the size expressed in the top stack item is large enough to hold the value expressed in the second-from-top stack item."),ie.length===Z){this.stack[this.stack.length-1]=ie;break}for(ue=0,ie.length>0&&(ue=ie[ie.length-1]&128,ie[ie.length-1]&=127),pe=new Array(Z),pe.fill(0),se=0;se<Z;se++)pe[se]=ie[se];for(se=ie.length-1;se++<Z-2;)pe[se]=0;pe[se]=ue,this.stack[this.stack.length-1]=pe;break;case o.default.OP_BIN2NUM:this.stack.length<1&&this.scriptEvaluationError("OP_BIN2NUM requires at least one item to be on the stack."),V=this.stacktop(-1),G=(0,a.minimallyEncode)(V),this.stack[this.stack.length-1]=G,M(G)||this.scriptEvaluationError("OP_BIN2NUM requires that the resulting number is valid.");break;default:this.scriptEvaluationError("Invalid opcode!")}this.programCounter++}validate(){for(this.unlockingScript.isPushOnly()||this.scriptEvaluationError("Unlocking scripts can only contain push operations, and no other opcodes.");this.step(),!(this.context==="LockingScript"&&this.programCounter>=this.lockingScript.chunks.length););return this.ifStack.length>0&&this.scriptEvaluationError("Every OP_IF must be terminated prior to the end of the script."),this.stack.length!==1&&this.scriptEvaluationError("The clean stack rule requires exactly one item to be on the stack after script execution."),this.castToBool(this.stacktop(-1))||this.scriptEvaluationError("The top stack element must be truthy after script evaluation."),!0}stacktop(y){return this.stack[this.stack.length+y]}castToBool(y){for(let b=0;b<y.length;b++)if(y[b]!==0)return!(b===y.length-1&&y[b]===128);return!1}scriptEvaluationError(y){throw new Error(`Script evaluation error: ${y}

Source TXID: ${this.sourceTXID}
Source output index: ${this.sourceOutputIndex}
Context: ${this.context}
Program counter: ${this.programCounter}
Stack size: ${this.stack.length}
Alt stack size: ${this.altStack.length}`)}};return Za.default=g,Za}var e1={},kg={},uD;function FO(){if(uD)return kg;uD=1;var t=kg&&kg.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(kg,"__esModule",{value:!0});const e=t(u_()),n=Yn(),r=t(f_()),i=t(xP()),s=t(bP()),o=Li();function a(l){if(l==null)throw new Error("must have value");return l}let c=class{lock(u){let d;if(typeof u=="string"){const h=(0,n.fromBase58Check)(u);if(h.prefix[0]!==0&&h.prefix[0]!==111)throw new Error("only P2PKH is supported");d=h.data}else d=u;if(d.length!==20)throw new Error("P2PKH hash length must be 20 bytes");return new r.default([{op:e.default.OP_DUP},{op:e.default.OP_HASH160},{op:d.length,data:d},{op:e.default.OP_EQUALVERIFY},{op:e.default.OP_CHECKSIG}])}unlock(u,d="all",h=!1,f,p){return{sign:async(g,m)=>{var y,b,x,S;let P=s.default.SIGHASH_FORKID;d==="all"&&(P|=s.default.SIGHASH_ALL),d==="none"&&(P|=s.default.SIGHASH_NONE),d==="single"&&(P|=s.default.SIGHASH_SINGLE),h&&(P|=s.default.SIGHASH_ANYONECANPAY);const _=g.inputs[m],I=g.inputs.filter(($,U)=>U!==m),C=(y=_.sourceTXID)!==null&&y!==void 0?y:(b=_.sourceTransaction)===null||b===void 0?void 0:b.id("hex");if(C==null||C===void 0)throw new Error("The input sourceTXID or sourceTransaction is required for transaction signing.");if(C==="")throw new Error("The input sourceTXID or sourceTransaction is required for transaction signing.");if(f||(f=(x=_.sourceTransaction)===null||x===void 0?void 0:x.outputs[_.sourceOutputIndex].satoshis),f==null||f===void 0)throw new Error("The sourceSatoshis or input sourceTransaction is required for transaction signing.");if(p||(p=(S=_.sourceTransaction)===null||S===void 0?void 0:S.outputs[_.sourceOutputIndex].lockingScript),p==null)throw new Error("The lockingScript or input sourceTransaction is required for transaction signing.");const A=s.default.format({sourceTXID:C,sourceOutputIndex:a(_.sourceOutputIndex),sourceSatoshis:f,transactionVersion:g.version,otherInputs:I,inputIndex:m,outputs:g.outputs,inputSequence:a(_.sequence),subscript:p,lockTime:g.lockTime,scope:P}),M=u.sign((0,o.sha256)(A)),O=new s.default(M.r,M.s,P).toChecksigFormat(),B=u.toPublicKey().encode(!0);return new i.default([{op:O.length,data:O},{op:B.length,data:B}])},estimateLength:async()=>108}}};return kg.default=c,kg}var Og={},dD;function Zve(){if(dD)return Og;dD=1;var t=Og&&Og.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Og,"__esModule",{value:!0});const e=t(u_()),n=t(f_()),r=t(xP()),i=t(bv()),s=t(bP()),o=Li(),a=t(d_());let c=class{constructor(u="raw"){this.type="raw",this.type=u}lock(u){const d=[{op:e.default.OP_OVER},{op:e.default.OP_3},{op:e.default.OP_SPLIT},{op:e.default.OP_NIP},{op:e.default.OP_1},{op:e.default.OP_SPLIT},{op:e.default.OP_SWAP},{op:e.default.OP_SPLIT},{op:e.default.OP_DROP}];return this.type!=="raw"&&d.push({op:e.default["OP_"+this.type]}),d.push({op:u.length,data:u}),d.push({op:e.default.OP_EQUALVERIFY}),d.push({op:e.default.OP_CHECKSIG}),new n.default(d)}unlock(u,d,h="all",f=!1){return{sign:async(p,g)=>{var m,y,b,x,S,P,_,I,C,A;typeof d>"u"&&(d=i.default.fromRandom());let M=s.default.SIGHASH_FORKID;h==="all"&&(M|=s.default.SIGHASH_ALL),h==="none"&&(M|=s.default.SIGHASH_NONE),h==="single"&&(M|=s.default.SIGHASH_SINGLE),f&&(M|=s.default.SIGHASH_ANYONECANPAY);const k=[...p.inputs],[O]=k.splice(g,1);if(typeof O.sourceTransaction!="object")throw new Error("The source transaction is needed for transaction signing.");const B=s.default.format({sourceTXID:(y=(m=O.sourceTransaction)===null||m===void 0?void 0:m.id("hex"))!==null&&y!==void 0?y:"",sourceOutputIndex:(b=O.sourceOutputIndex)!==null&&b!==void 0?b:0,sourceSatoshis:(P=(S=(x=O.sourceTransaction)===null||x===void 0?void 0:x.outputs[O.sourceOutputIndex])===null||S===void 0?void 0:S.satoshis)!==null&&P!==void 0?P:0,transactionVersion:p.version,otherInputs:k,inputIndex:g,outputs:p.outputs,inputSequence:(_=O.sequence)!==null&&_!==void 0?_:4294967295,subscript:(A=(C=(I=O.sourceTransaction)===null||I===void 0?void 0:I.outputs[O.sourceOutputIndex])===null||C===void 0?void 0:C.lockingScript)!==null&&A!==void 0?A:new a.default,lockTime:p.lockTime,scope:M}),$=d.sign((0,o.sha256)(B),void 0,!0,u),q=new s.default($.r,$.s,M).toChecksigFormat(),K=d.toPublicKey().encode(!0);return new r.default([{op:q.length,data:q},{op:K.length,data:K}])},estimateLength:async()=>108}}};return Og.default=c,Og}var RE={},fD;function wP(){if(fD)return RE;fD=1,Object.defineProperty(RE,"__esModule",{value:!0});const t=_P(),e=pu();function n(s){if(s==null)throw new Error("must have value");return s}const r=s=>s.length===0?{op:0}:s.length===1&&s[0]===0?{op:0}:s.length===1&&s[0]>0&&s[0]<=16?{op:80+s[0]}:s.length===1&&s[0]===129?{op:79}:s.length<=75?{op:s.length,data:s}:s.length<=255?{op:76,data:s}:s.length<=65535?{op:77,data:s}:{op:78,data:s};let i=class{static decode(o){var a,c;const l=e.PublicKey.fromString(e.Utils.toHex(n(o.chunks[0].data))),u=[];for(let d=2;d<o.chunks.length;d++){const h=(a=o.chunks[d+1])===null||a===void 0?void 0:a.op;let f=(c=o.chunks[d].data)!==null&&c!==void 0?c:[];if(f.length===0&&(o.chunks[d].op>=80&&o.chunks[d].op<=95?f=[o.chunks[d].op-80]:o.chunks[d].op===0?f=[0]:o.chunks[d].op===79&&(f=[129])),u.push(f),h===t.OP.OP_DROP||h===t.OP.OP_2DROP)break}return{fields:u,lockingPublicKey:l}}constructor(o,a){this.wallet=o,this.originator=a}async lock(o,a,c,l,u=!1,d=!0,h="before"){const{publicKey:f}=await this.wallet.getPublicKey({protocolID:a,keyID:c,counterparty:l,forSelf:u},this.originator),p=[],g=[];if(p.push({op:f.length/2,data:e.Utils.toArray(f,"hex")}),p.push({op:t.OP.OP_CHECKSIG}),d){const y=o.reduce((x,S)=>[...x,...S],[]),{signature:b}=await this.wallet.createSignature({data:y,protocolID:a,keyID:c,counterparty:l},this.originator);o.push(b)}for(const y of o)g.push(r(y));let m=o.length;for(;m>1;)g.push({op:t.OP.OP_2DROP}),m-=2;return m!==0&&g.push({op:t.OP.OP_DROP}),h==="before"?new t.LockingScript([...p,...g]):new t.LockingScript([...g,...p])}unlock(o,a,c,l="all",u=!1,d,h){return{sign:async(f,p)=>{var g,m,y,b,x;let S=e.TransactionSignature.SIGHASH_FORKID;l==="all"&&(S|=e.TransactionSignature.SIGHASH_ALL),l==="none"&&(S|=e.TransactionSignature.SIGHASH_NONE),l==="single"&&(S|=e.TransactionSignature.SIGHASH_SINGLE),u&&(S|=e.TransactionSignature.SIGHASH_ANYONECANPAY);const P=f.inputs[p],_=f.inputs.filter(($,U)=>U!==p),I=(g=P.sourceTXID)!==null&&g!==void 0?g:(m=P.sourceTransaction)===null||m===void 0?void 0:m.id("hex");if(I==null||I===void 0)throw new Error("The input sourceTXID or sourceTransaction is required for transaction signing.");if(d||(d=(y=P.sourceTransaction)===null||y===void 0?void 0:y.outputs[P.sourceOutputIndex].satoshis),d==null||d===void 0)throw new Error("The sourceSatoshis or input sourceTransaction is required for transaction signing.");if(h||(h=(b=P.sourceTransaction)===null||b===void 0?void 0:b.outputs[P.sourceOutputIndex].lockingScript),h==null)throw new Error("The lockingScript or input sourceTransaction is required for transaction signing.");const C=e.TransactionSignature.format({sourceTXID:I,sourceOutputIndex:n(P.sourceOutputIndex),sourceSatoshis:d,transactionVersion:f.version,otherInputs:_,inputIndex:p,outputs:f.outputs,inputSequence:(x=P.sequence)!==null&&x!==void 0?x:4294967295,subscript:h,lockTime:f.lockTime,scope:S}),A=e.Hash.sha256(C),{signature:M}=await this.wallet.createSignature({data:A,protocolID:o,keyID:a,counterparty:c},this.originator),k=e.Signature.fromDER([...M]),B=new e.TransactionSignature(k.r,k.s,S).toChecksigFormat();return new t.UnlockingScript([{op:B.length,data:B}])},estimateLength:async()=>73}}};return RE.default=i,RE}var hD;function ej(){return hD||(hD=1,function(t){var e=e1&&e1.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(t,"__esModule",{value:!0}),t.PushDrop=t.RPuzzle=t.P2PKH=void 0;var n=FO();Object.defineProperty(t,"P2PKH",{enumerable:!0,get:function(){return e(n).default}});var r=Zve();Object.defineProperty(t,"RPuzzle",{enumerable:!0,get:function(){return e(r).default}});var i=wP();Object.defineProperty(t,"PushDrop",{enumerable:!0,get:function(){return e(i).default}})}(e1)),e1}var pD;function _P(){return pD||(pD=1,function(t){var e=rd&&rd.__createBinding||(Object.create?function(l,u,d,h){h===void 0&&(h=d);var f=Object.getOwnPropertyDescriptor(u,d);(!f||("get"in f?!u.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return u[d]}}),Object.defineProperty(l,h,f)}:function(l,u,d,h){h===void 0&&(h=d),l[h]=u[d]}),n=rd&&rd.__exportStar||function(l,u){for(var d in l)d!=="default"&&!Object.prototype.hasOwnProperty.call(u,d)&&e(u,l,d)},r=rd&&rd.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(t,"__esModule",{value:!0}),t.Spend=t.UnlockingScript=t.LockingScript=t.Script=t.OP=void 0;var i=u_();Object.defineProperty(t,"OP",{enumerable:!0,get:function(){return r(i).default}});var s=d_();Object.defineProperty(t,"Script",{enumerable:!0,get:function(){return r(s).default}});var o=f_();Object.defineProperty(t,"LockingScript",{enumerable:!0,get:function(){return r(o).default}});var a=xP();Object.defineProperty(t,"UnlockingScript",{enumerable:!0,get:function(){return r(a).default}});var c=QW();Object.defineProperty(t,"Spend",{enumerable:!0,get:function(){return r(c).default}}),n(ej(),t)}(rd)),rd}var id={},Ng={},kE={},mD;function tj(){if(mD)return kE;mD=1,Object.defineProperty(kE,"__esModule",{value:!0});let t=class{constructor(n){this.value=n}async computeFee(n){const r=o=>o>4294967296?9:o>65536?5:o>253?3:1;let i=4;i+=r(n.inputs.length);for(let o=0;o<n.inputs.length;o++){const a=n.inputs[o];i+=40;let c;if(typeof a.unlockingScript=="object")c=a.unlockingScript.toBinary().length;else if(typeof a.unlockingScriptTemplate=="object")c=await a.unlockingScriptTemplate.estimateLength(n,o);else throw new Error("All inputs must have an unlocking script or an unlocking script template for sat/kb fee computation.");i+=r(c),i+=c}i+=r(n.outputs.length);for(const o of n.outputs){i+=8;const a=o.lockingScript.toBinary().length;i+=r(a),i+=a}return i+=4,Math.ceil(i/1e3*this.value)}};return kE.default=t,kE}var bp={},Lg={};function Jve(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var t1={},n1={},gD;function nj(){if(gD)return n1;gD=1,Object.defineProperty(n1,"__esModule",{value:!0}),n1.NodejsHttpClient=void 0;let t=class{constructor(n){this.https=n}async request(n,r){return await new Promise((i,s)=>{const o=this.https.request(n,r,a=>{let c="";a.on("data",l=>{c+=l}),a.on("end",()=>{const l=a.statusCode>=200&&a.statusCode<=299,u=a.headers["content-type"],d=c!==""&&typeof u=="string"&&u.startsWith("application/json")?JSON.parse(c):c;i({status:a.statusCode,statusText:a.statusMessage,ok:l,data:d})})});o.on("error",a=>{s(a)}),r.data!==null&&r.data!==void 0&&o.write(JSON.stringify(r.data)),o.end()})}};return n1.NodejsHttpClient=t,n1}var r1={},yD;function rj(){if(yD)return r1;yD=1,Object.defineProperty(r1,"__esModule",{value:!0}),r1.FetchHttpClient=void 0;let t=class{constructor(n){this.fetch=n}async request(n,r){var i;const s={method:r.method,headers:r.headers,body:JSON.stringify(r.data)},o=await this.fetch(n,s),a=o.headers.get("Content-Type"),c=(i=a==null?void 0:a.startsWith("application/json"))!==null&&i!==void 0&&i?await o.json():await o.text();return{ok:o.ok,status:o.status,statusText:o.statusText,data:c}}};return r1.FetchHttpClient=t,r1}var vD;function SP(){if(vD)return t1;vD=1,Object.defineProperty(t1,"__esModule",{value:!0}),t1.defaultHttpClient=void 0;const t=nj(),e=rj();function n(){const r={async request(...i){throw new Error("No method available to perform HTTP request")}};if(typeof window<"u"&&typeof window.fetch=="function")return new e.FetchHttpClient(window.fetch.bind(window));if(typeof Jve<"u")try{const i=BO;return new t.NodejsHttpClient(i)}catch{return r}else return r}return t1.defaultHttpClient=n,t1}var bD;function ij(){if(bD)return Lg;bD=1;var t=Lg&&Lg.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Lg,"__esModule",{value:!0});const e=SP(),n=t(Ao()),r=Yn();function i(){return`ts-sdk-${(0,r.toHex)((0,n.default)(16))}`}class s{constructor(a,c){if(this.URL=a,typeof c=="string")this.apiKey=c,this.httpClient=(0,e.defaultHttpClient)(),this.deploymentId=i(),this.callbackToken=void 0,this.callbackUrl=void 0;else{const l=c??{},{apiKey:u,deploymentId:d,httpClient:h,callbackToken:f,callbackUrl:p,headers:g}=l;this.apiKey=u,this.httpClient=h??(0,e.defaultHttpClient)(),this.deploymentId=d??i(),this.callbackToken=f,this.callbackUrl=p,this.headers=g}}requestHeaders(){const a={"Content-Type":"application/json","XDeployment-ID":this.deploymentId};if(this.apiKey!=null&&this.apiKey!==""&&(a.Authorization=`Bearer ${this.apiKey}`),this.callbackUrl!=null&&this.callbackUrl!==""&&(a["X-CallbackUrl"]=this.callbackUrl),this.callbackToken!=null&&this.callbackToken!==""&&(a["X-CallbackToken"]=this.callbackToken),this.headers!=null)for(const c in this.headers)a[c]=this.headers[c];return a}async broadcast(a){let c;try{c=a.toHexEF()}catch(u){if(u.message==="All inputs must have source transactions when serializing to EF format")c=a.toHex();else throw u}const l={method:"POST",headers:this.requestHeaders(),data:{rawTx:c}};try{const u=await this.httpClient.request(`${this.URL}/v1/tx`,l);if(u.ok){const{txid:d,extraInfo:h,txStatus:f,competingTxs:p}=u.data,g={status:"success",txid:d,message:`${f} ${h}`};return p!=null&&(g.competingTxs=p),g}else{const d=typeof u.status,h={status:"error",code:d==="number"||d==="string"?u.status.toString():"ERR_UNKNOWN",description:"Unknown error"};let f=u.data;if(typeof f=="string")try{f=JSON.parse(u.data)}catch{}return typeof f=="object"&&(f!==null&&(h.more=f),f!=null&&typeof f.txid=="string"&&(h.txid=f.txid),f!=null&&"detail"in f&&typeof f.detail=="string"&&(h.description=f.detail)),h}}catch(u){return{status:"error",code:"500",description:typeof u.message=="string"?u.message:"Internal Server Error"}}}async broadcastMany(a){const c=a.map(u=>{try{return{rawTx:u.toHexEF()}}catch(d){if(d.message==="All inputs must have source transactions when serializing to EF format")return{rawTx:u.toHex()};throw d}}),l={method:"POST",headers:this.requestHeaders(),data:c};try{return(await this.httpClient.request(`${this.URL}/v1/txs`,l)).data}catch(u){const d={status:"error",code:"500",description:typeof u.message=="string"?u.message:"Internal Server Error"};return a.map(()=>d)}}}return Lg.default=s,Lg}var xD;function sj(){if(xD)return bp;xD=1;var t=bp&&bp.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bp,"__esModule",{value:!0}),bp.defaultBroadcaster=void 0;const e=t(ij());function n(r=!1,i={}){return new e.default(r?"https://arc-test.taal.com":"https://arc.taal.com",i)}return bp.defaultBroadcaster=n,bp}var xp={},OE={},wD;function oj(){if(wD)return OE;wD=1,Object.defineProperty(OE,"__esModule",{value:!0});const t=SP();class e{constructor(r="main",i={}){const{apiKey:s,httpClient:o}=i;this.network=r,this.URL=`https://api.whatsonchain.com/v1/bsv/${r}`,this.httpClient=o??(0,t.defaultHttpClient)(),this.apiKey=s??""}async isValidRootForHeight(r,i){const s={method:"GET",headers:this.getHttpHeaders()},o=await this.httpClient.request(`${this.URL}/block/${i}/header`,s);if(o.ok){const{merkleroot:a}=o.data;return a===r}else{if(o.status===404)return!1;throw new Error(`Failed to verify merkleroot for height ${i} because of an error: ${JSON.stringify(o.data)} `)}}async currentHeight(){try{const r={method:"GET",headers:this.getHttpHeaders()},i=await this.httpClient.request(`${this.URL}/block/headers`,r);if(i.ok)return i.data[0].height;throw new Error(`Failed to get current height because of an error: ${JSON.stringify(i.data)} `)}catch(r){throw new Error(`Failed to get current height because of an error: ${r instanceof Error?r.message:String(r)}`)}}getHttpHeaders(){const r={Accept:"application/json"};return typeof this.apiKey=="string"&&this.apiKey.trim()!==""&&(r.Authorization=this.apiKey),r}}return OE.default=e,OE}var _D;function aj(){if(_D)return xp;_D=1;var t=xp&&xp.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xp,"__esModule",{value:!0}),xp.defaultChainTracker=void 0;const e=t(oj());function n(){return new e.default}return xp.defaultChainTracker=n,xp}var i1={},NE={},SD;function lj(){if(SD)return NE;SD=1,Object.defineProperty(NE,"__esModule",{value:!0});const t=Yn(),e=Li();let n=class _x{static fromHex(i){return _x.fromBinary((0,t.toArray)(i,"hex"))}static fromReader(i,s=!0){const o=i.readVarIntNum(),a=i.readUInt8(),c=Array(a).fill(null).map(()=>[]);let l,u,d;for(let h=0;h<a;h++){for(d=i.readVarIntNum();d>0;){u=i.readVarIntNum(),l=i.readUInt8();const f={offset:u};(l&1)!==0?f.duplicate=!0:((l&2)!==0&&(f.txid=!0),f.hash=(0,t.toHex)(i.read(32).reverse())),(!Array.isArray(c[h])||c[h].length===0)&&(c[h]=[]),c[h].push(f),d--}c[h].sort((f,p)=>f.offset-p.offset)}return new _x(o,c,s)}static fromBinary(i){const s=new t.Reader(i);return _x.fromReader(s)}static fromCoinbaseTxidAndHeight(i,s){return new _x(s,[[{offset:0,hash:i,txid:!0}]])}constructor(i,s,o=!0){this.blockHeight=i,this.path=s;const a=Array(this.path.length).fill(0).map(()=>new Set);this.path.forEach((l,u)=>{if(l.length===0&&u===0)throw new Error(`Empty level at height: ${u}`);const d=new Set;l.forEach(h=>{if(d.has(h.offset))throw new Error(`Duplicate offset: ${h.offset}, at height: ${u}`);if(d.add(h.offset),u===0){if(h.duplicate!==!0)for(let f=1;f<this.path.length;f++)a[f].add(h.offset>>f^1)}else if(o&&!a[u].has(h.offset))throw new Error(`Invalid offset: ${h.offset}, at height: ${u}, with legal offsets: ${Array.from(a[u]).join(", ")}`)})});let c;this.path[0].forEach((l,u)=>{if(u===0&&(c=this.computeRoot(l.hash)),c!==this.computeRoot(l.hash))throw new Error("Mismatched roots")})}toBinary(){const i=new t.Writer;i.writeVarIntNum(this.blockHeight);const s=this.path.length;i.writeUInt8(s);for(let o=0;o<s;o++){const a=Object.keys(this.path[o]).length;i.writeVarIntNum(a);for(const c of this.path[o]){i.writeVarIntNum(c.offset);let l=0;(c==null?void 0:c.duplicate)===!0&&(l|=1),(c==null?void 0:c.txid)!==void 0&&c.txid!==null&&(l|=2),i.writeUInt8(l),(l&1)===0&&i.write((0,t.toArray)(c.hash,"hex").reverse())}}return i.toArray()}toHex(){return(0,t.toHex)(this.toBinary())}indexOf(i){const s=this.path[0].find(o=>o.hash===i);if(s==null)throw new Error(`Transaction ID ${i} not found in the Merkle Path`);return s.offset}computeRoot(i){var s,o;if(typeof i!="string"){const u=this.path[0].find(d=>!!(d!=null&&d.hash));if(u==null)throw new Error("No valid leaf found in the Merkle Path");i=u.hash}if(typeof i!="string")throw new Error("Transaction ID is undefined");const a=this.indexOf(i);if(typeof a!="number")throw new Error(`This proof does not contain the txid: ${i??"undefined"}`);const c=u=>(0,t.toHex)((0,e.hash256)((0,t.toArray)(u,"hex").reverse()).reverse());let l=i;if(this.path.length===1&&this.path[0].length===1)return l;for(let u=0;u<this.path.length;u++){this.path[u];const d=a>>u^1,h=this.findOrComputeLeaf(u,d);if(typeof h!="object")throw new Error(`Missing hash for index ${a} at height ${u}`);h.duplicate===!0?l=c((l??"")+(l??"")):d%2!==0?l=c(((s=h.hash)!==null&&s!==void 0?s:"")+(l??"")):l=c((l??"")+((o=h.hash)!==null&&o!==void 0?o:""))}return l}findOrComputeLeaf(i,s){var o,a;const c=g=>(0,t.toHex)((0,e.hash256)((0,t.toArray)(g,"hex").reverse()).reverse());let l=this.path[i].find(g=>g.offset===s);if(l!=null)return l;if(i===0)return;const u=i-1,d=s<<1,h=this.findOrComputeLeaf(u,d);if(h==null||h.hash==null||h.hash==="")return;const f=this.findOrComputeLeaf(u,d+1);if(f==null)return;let p;return f.duplicate===!0?p=c(h.hash+h.hash):p=c(((o=f.hash)!==null&&o!==void 0?o:"")+((a=h.hash)!==null&&a!==void 0?a:"")),l={offset:s,hash:p},l}async verify(i,s){const o=this.computeRoot(i);if(this.indexOf(i)===0){const a=await s.currentHeight();if(this.blockHeight+100<a)return!1}return await s.isValidRootForHeight(o,this.blockHeight)}combine(i){var s,o;if(this.blockHeight!==i.blockHeight)throw new Error("You cannot combine paths which do not have the same block height.");const a=this.computeRoot(),c=i.computeRoot();if(a!==c)throw new Error("You cannot combine paths which do not have the same root.");const l=[];for(let u=0;u<this.path.length;u++){l.push([]);for(let d=0;d<this.path[u].length;d++)l[u].push(this.path[u][d]);for(let d=0;d<i.path[u].length;d++)if(l[u].find(h=>h.offset===i.path[u][d].offset)===void 0)l[u].push(i.path[u][d]);else if(((s=i.path[u][d])===null||s===void 0?void 0:s.txid)!==void 0&&((o=i.path[u][d])===null||o===void 0?void 0:o.txid)!==null){const h=l[u].find(f=>f.offset===i.path[u][d].offset);h!=null&&(h.txid=!0)}}this.path=l,this.trim()}trim(){const i=(l,u)=>{(u.length===0||u.slice(-1)[0]!==l)&&u.push(l)},s=(l,u)=>{for(let d=l.length;d>=0;d--){const h=this.path[u].findIndex(f=>f.offset===l[d]);h>=0&&this.path[u].splice(h,1)}},o=l=>{const u=[];for(const d of l)i(d>>1,u);return u};let a=[],c=[];for(let l=0;l<this.path.length;l++)this.path[l].sort((u,d)=>u.offset-d.offset);for(let l=0;l<this.path[0].length;l++){const u=this.path[0][l];if(u.txid===!0)i(u.offset>>1,a);else{const d=u.offset%2===1,h=this.path[0][l+(d?-1:1)];(h.txid===void 0||h.txid===null||!h.txid)&&i(h.offset,c)}}s(c,0);for(let l=1;l<this.path.length;l++)c=a,a=o(a),s(c,l)}};return NE.default=n,NE}var Dg={},ED;function cj(){if(ED)return Dg;ED=1;var t=Dg&&Dg.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Dg,"__esModule",{value:!0});const e=Li(),n=Yn(),r=t(p_()),i=h_();let s=class nm{get bumpIndex(){return this._bumpIndex}set bumpIndex(a){this._bumpIndex=a,this.updateInputTxids()}get hasProof(){return this._bumpIndex!==void 0}get isTxidOnly(){return this._txid!==void 0&&this._txid!==null&&this._rawTx==null&&this._tx==null}get txid(){if(this._txid!==void 0&&this._txid!==null&&this._txid!=="")return this._txid;if(this._tx!=null)return this._txid=this._tx.id("hex"),this._txid;if(this._rawTx!=null)return this._txid=(0,n.toHex)((0,e.hash256)(this._rawTx)),this._txid;throw new Error("Internal")}get tx(){if(this._tx!=null)return this._tx;if(this._rawTx!=null)return this._tx=r.default.fromBinary(this._rawTx),this._tx}get rawTx(){if(this._rawTx!=null)return this._rawTx;if(this._tx!=null)return this._rawTx=this._tx.toBinary(),this._rawTx}constructor(a,c){this.inputTxids=[],this.isValid=void 0,typeof a=="string"?this._txid=a:Array.isArray(a)?this._rawTx=a:this._tx=a,this.bumpIndex=c,this.updateInputTxids()}static fromTx(a,c){return new nm(a,c)}static fromRawTx(a,c){return new nm(a,c)}static fromTxid(a,c){return new nm(a,c)}updateInputTxids(){if(this.hasProof||this.tx==null)this.inputTxids=[];else{const a={};for(const c of this.tx.inputs)c.sourceTXID!==void 0&&c.sourceTXID!==null&&c.sourceTXID!==""&&(a[c.sourceTXID]=!0);this.inputTxids=Object.keys(a)}}toWriter(a,c){const l=f=>{a.writeUInt8(f)},u=()=>{if(this._txid==null)throw new Error("Transaction ID (_txid) is undefined");a.writeReverse((0,n.toArray)(this._txid,"hex"))},d=()=>{if(this._rawTx!=null)a.write(this._rawTx);else if(this._tx!=null)a.write(this._tx.toBinary());else throw new Error("a valid serialized Transaction is expected")},h=()=>{this.bumpIndex===void 0?l(i.TX_DATA_FORMAT.RAWTX):(l(i.TX_DATA_FORMAT.RAWTX_AND_BUMP_INDEX),a.writeVarIntNum(this.bumpIndex))};c===i.BEEF_V2?this.isTxidOnly?(l(i.TX_DATA_FORMAT.TXID_ONLY),u()):this.bumpIndex!==void 0?(l(i.TX_DATA_FORMAT.RAWTX_AND_BUMP_INDEX),a.writeVarIntNum(this.bumpIndex),d()):(l(i.TX_DATA_FORMAT.RAWTX),d()):(d(),h())}static fromReader(a,c){let l,u,d;if(c===i.BEEF_V2){const h=a.readUInt8();h===i.TX_DATA_FORMAT.TXID_ONLY?d=nm.fromTxid((0,n.toHex)(a.readReverse(32))):(h===i.TX_DATA_FORMAT.RAWTX_AND_BUMP_INDEX&&(u=a.readVarIntNum()),l=r.default.fromReader(a),d=nm.fromTx(l,u))}else l=r.default.fromReader(a),u=a.readUInt8()!==0?a.readVarIntNum():void 0,d=nm.fromTx(l,u);return d}};return Dg.default=s,Dg}var TD;function h_(){return TD||(TD=1,function(t){var e=i1&&i1.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(t,"__esModule",{value:!0}),t.Beef=t.TX_DATA_FORMAT=t.ATOMIC_BEEF=t.BEEF_V2=t.BEEF_V1=void 0;const n=e(lj()),r=e(cj()),i=Yn(),s=Li();function o(l){if(l==null)throw new Error("Expected a valid value, but got undefined.");return l}t.BEEF_V1=4022206465,t.BEEF_V2=4022206466,t.ATOMIC_BEEF=16843009;var a;(function(l){l[l.RAWTX=0]="RAWTX",l[l.RAWTX_AND_BUMP_INDEX=1]="RAWTX_AND_BUMP_INDEX",l[l.TXID_ONLY=2]="TXID_ONLY"})(a||(t.TX_DATA_FORMAT=a={}));let c=class oy{constructor(u=t.BEEF_V2){this.bumps=[],this.txs=[],this.version=t.BEEF_V2,this.atomicTxid=void 0,this.version=u}findTxid(u){return this.txs.find(d=>d.txid===u)}makeTxidOnly(u){const d=this.txs.findIndex(f=>f.txid===u);if(d===-1)return;let h=this.txs[d];return h.isTxidOnly||(this.txs.splice(d,1),h=this.mergeTxidOnly(u)),h}findBump(u){return this.bumps.find(d=>d.path[0].some(h=>h.hash===u))}findTransactionForSigning(u){const d=this.findTxid(u);if(!(d==null||d.tx==null)){for(const h of d.tx.inputs)if(h.sourceTransaction==null){const f=this.findTxid(o(h.sourceTXID));f!=null&&(h.sourceTransaction=f.tx)}return d.tx}}findAtomicTransaction(u){const d=this.findTxid(u);if(d==null||d.tx==null)return;const h=(f,p)=>{const g=f.findBump(p.id("hex"));if(g!=null)p.merklePath=g;else for(const m of p.inputs){if(m.sourceTransaction==null){const y=f.findTxid(o(m.sourceTXID));y!=null&&(m.sourceTransaction=y.tx)}if(m.sourceTransaction!=null){const y=f.findBump(m.sourceTransaction.id("hex"));y!=null?m.sourceTransaction.merklePath=y:h(f,m.sourceTransaction)}}};return h(this,d.tx),d.tx}mergeBump(u){let d;for(let f=0;f<this.bumps.length;f++){const p=this.bumps[f];if(p===u)return f;if(p.blockHeight===u.blockHeight){const g=p.computeRoot(),m=u.computeRoot();if(g===m){p.combine(u),d=f;break}}}d===void 0&&(d=this.bumps.length,this.bumps.push(u));const h=this.bumps[d];for(const f of this.txs){const p=f.txid;if(f.bumpIndex==null){for(const g of h.path[0])if(g.hash===p){f.bumpIndex=d,g.txid=!0;break}}}return d}mergeRawTx(u,d){const h=new r.default(u,d);return this.removeExistingTxid(h.txid),this.txs.push(h),this.tryToValidateBumpIndex(h),h}mergeTransaction(u){const d=u.id("hex");this.removeExistingTxid(d);let h;u.merklePath!=null&&(h=this.mergeBump(u.merklePath));const f=new r.default(u,h);if(this.txs.push(f),this.tryToValidateBumpIndex(f),h=f.bumpIndex,h===void 0)for(const p of u.inputs)p.sourceTransaction!=null&&this.mergeTransaction(p.sourceTransaction);return f}removeExistingTxid(u){const d=this.txs.findIndex(h=>h.txid===u);d>=0&&this.txs.splice(d,1)}mergeTxidOnly(u){let d=this.txs.find(h=>h.txid===u);return d==null&&(d=new r.default(u),this.txs.push(d),this.tryToValidateBumpIndex(d)),d}mergeBeefTx(u){let d=this.findTxid(u.txid);if(u.isTxidOnly&&d==null?d=this.mergeTxidOnly(u.txid):u._tx!=null&&(d==null||d.isTxidOnly)?d=this.mergeTransaction(u._tx):u._rawTx!=null&&(d==null||d.isTxidOnly)&&(d=this.mergeRawTx(u._rawTx)),d==null)throw new Error(`Failed to merge BeefTx for txid: ${u.txid}`);return d}mergeBeef(u){const d=Array.isArray(u)?oy.fromBinary(u):u;for(const h of d.bumps)this.mergeBump(h);for(const h of d.txs)this.mergeBeefTx(h)}isValid(u){return this.verifyValid(u).valid}async verify(u,d){const h=this.verifyValid(d);if(!h.valid)return!1;for(const f of Object.keys(h.roots))if(!await u.isValidRootForHeight(h.roots[f],Number(f)))return!1;return!0}verifyValid(u){const d={valid:!1,roots:{}},h=this.sortTxs();if(h.missingInputs.length>0||h.notValid.length>0||h.txidOnly.length>0&&u!==!0||h.withMissingInputs.length>0)return d;const f={};for(const g of this.txs)if(g.isTxidOnly){if(u!==!0)return d;f[g.txid]=!0}const p=(g,m)=>{const y=g.computeRoot(m);return(d.roots[g.blockHeight]===void 0||d.roots[g.blockHeight]==="")&&(d.roots[g.blockHeight]=y),d.roots[g.blockHeight]===y};for(const g of this.bumps)for(const m of g.path[0])if(m.txid===!0&&typeof m.hash=="string"&&m.hash.length>0&&(f[m.hash]=!0,!p(g,m.hash)))return d;for(const g of this.txs)if(g.bumpIndex!==void 0&&this.bumps[g.bumpIndex].path[0].find(y=>y.hash===g.txid)==null)return d;for(const g of this.txs){for(const m of g.inputTxids)if(!f[m])return d;f[g.txid]=!0}return d.valid=!0,d}toWriter(u){u.writeUInt32LE(this.version),u.writeVarIntNum(this.bumps.length);for(const d of this.bumps)u.write(d.toBinary());u.writeVarIntNum(this.txs.length);for(const d of this.txs)d.toWriter(u,this.version)}toBinary(){this.sortTxs();const u=new i.Writer;return this.toWriter(u),u.toArray()}toBinaryAtomic(u){this.sortTxs();const d=this.findTxid(u);if(d==null)throw new Error(`${u} does not exist in this Beef`);const h=this.txs[this.txs.length-1]===d?this:this.clone();if(h!==this){const p=this.txs.findIndex(g=>g.txid===u);h.txs.splice(p+1)}const f=new i.Writer;return f.writeUInt32LE(t.ATOMIC_BEEF),f.writeReverse((0,i.toArray)(u,"hex")),h.toWriter(f),f.toArray()}toHex(){return(0,i.toHex)(this.toBinary())}static fromReader(u){let d=u.readUInt32LE(),h;if(d===t.ATOMIC_BEEF&&(h=(0,i.toHex)(u.readReverse(32)),d=u.readUInt32LE()),d!==t.BEEF_V1&&d!==t.BEEF_V2)throw new Error(`Serialized BEEF must start with ${t.BEEF_V1} or ${t.BEEF_V2} but starts with ${d}`);const f=new oy(d),p=u.readVarIntNum();for(let m=0;m<p;m++){const y=n.default.fromReader(u,!1);f.bumps.push(y)}const g=u.readVarIntNum();for(let m=0;m<g;m++){const y=r.default.fromReader(u,d);f.txs.push(y)}return f.atomicTxid=h,f}static fromBinary(u){const d=new i.Reader(u);return oy.fromReader(d)}static fromString(u,d="hex"){const h=(0,i.toArray)(u,d),f=new i.Reader(h);return oy.fromReader(f)}tryToValidateBumpIndex(u){if(u.bumpIndex!==void 0)return!0;const d=u.txid;for(let h=0;h<this.bumps.length;h++){const f=this.bumps[h].path[0].findIndex(p=>p.hash===d);if(f>=0)return u.bumpIndex=h,this.bumps[h].path[0][f].txid=!0,!0}return!1}sortTxs(){const u={},d={};let h=[];const f=[],p=[];for(const x of this.txs)d[x.txid]=x,x.isValid=x.hasProof,x.isValid?(u[x.txid]=!0,f.push(x)):x.isTxidOnly&&x.inputTxids.length===0?(u[x.txid]=!0,p.push(x)):h.push(x);const g={},m=[],y=h;h=[];for(const x of y){let S=!1;for(const P of x.inputTxids)d[P]===void 0&&(g[P]=!0,S=!0);S?m.push(x):h.push(x)}for(;h.length>0;){const x=h;h=[];for(const S of x)S.inputTxids.every(P=>u[P])?(u[S.txid]=!0,f.push(S)):h.push(S);if(x.length===h.length)break}const b=h;return this.txs=m.concat(b).concat(p).concat(f),{missingInputs:Object.keys(g),notValid:b.map(x=>x.txid),valid:Object.keys(u),withMissingInputs:m.map(x=>x.txid),txidOnly:p.map(x=>x.txid)}}clone(){const u=new oy;return u.version=this.version,u.bumps=Array.from(this.bumps),u.txs=Array.from(this.txs),u}trimKnownTxids(u){for(let d=0;d<this.txs.length;){const h=this.txs[d];h.isTxidOnly&&u.includes(h.txid)?this.txs.splice(d,1):d++}}getValidTxids(){return this.sortTxs().valid}toLogString(){var u,d;let h="";h+=`BEEF with ${this.bumps.length} BUMPS and ${this.txs.length} Transactions, isValid ${this.isValid().toString()}
`;let f=-1;for(const p of this.bumps)f++,h+=`  BUMP ${f}
    block: ${p.blockHeight}
    txids: [
${p.path[0].filter(g=>g.txid===!0).map(g=>{var m;return`      '${(m=g.hash)!==null&&m!==void 0?m:""}'`}).join(`,
`)}
    ]
`;f=-1;for(const p of this.txs)f++,h+=`  TX ${f}
    txid: ${p.txid}
`,p.bumpIndex!==void 0&&(h+=`    bumpIndex: ${p.bumpIndex}
`),p.isTxidOnly?h+=`    txidOnly
`:h+=`    rawTx length=${(d=(u=p.rawTx)===null||u===void 0?void 0:u.length)!==null&&d!==void 0?d:0}
`,p.inputTxids.length>0&&(h+=`    inputs: [
${p.inputTxids.map(g=>`      '${g}'`).join(`,
`)}
    ]
`);return h}addComputedLeaves(){const u=d=>(0,i.toHex)((0,s.hash256)((0,i.toArray)(d,"hex").reverse()).reverse());for(const d of this.bumps)for(let h=1;h<d.path.length;h++)for(const f of d.path[h-1])if(typeof f.hash=="string"&&(f.offset&1)===0){const p=d.path[h-1].find(m=>m.offset===f.offset+1),g=f.offset>>1;p!==void 0&&typeof p.hash=="string"&&d.path[h].every(m=>m.offset!==g)&&d.path[h].push({offset:g,hash:u(p.hash+f.hash)})}}};t.Beef=c}(i1)),i1}var ID;function p_(){if(ID)return Ng;ID=1;var t=Ng&&Ng.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(Ng,"__esModule",{value:!0});const e=t(xP()),n=t(f_()),r=Yn(),i=Li(),s=t(tj()),o=t(QW()),a=sj(),c=aj(),l=h_(),u=t(FO());class d{static addPathOrInputs(f,p,g){var m;if(typeof f.pathIndex=="number"){const y=g[f.pathIndex];if(typeof y!="object")throw new Error("Invalid merkle path index found in BEEF!");f.tx.merklePath=y}else for(const y of f.tx.inputs){if(y.sourceTXID===void 0)throw new Error("Input sourceTXID is undefined");const b=p[y.sourceTXID];if(typeof b!="object")throw new Error(`Reference to unknown TXID in BEEF: ${(m=y.sourceTXID)!==null&&m!==void 0?m:"undefined"}`);y.sourceTransaction=b.tx,this.addPathOrInputs(b,p,g)}}static fromBEEF(f,p){const{tx:g}=d.fromAnyBeef(f,p);return g}static fromAtomicBEEF(f){const{tx:p,txid:g,beef:m}=d.fromAnyBeef(f);if(g!==m.atomicTxid)throw m.atomicTxid?new Error(`Transaction with TXID ${m.atomicTxid} not found in BEEF data.`):new Error("beef must conform to BRC-95 and must contain the subject txid.");return p}static fromAnyBeef(f,p){const g=l.Beef.fromBinary(f);if(g.txs.length<1)throw new Error("beef must include at least one transaction.");const m=p||g.atomicTxid||g.txs.slice(-1)[0].txid,y=g.findAtomicTransaction(m);if(y==null)throw p?new Error(`Transaction with TXID ${m} not found in BEEF data.`):new Error("beef does not contain transaction for atomic txid.");return{tx:y,beef:g,txid:m}}static fromEF(f){const p=new r.Reader(f),g=p.readUInt32LE();if((0,r.toHex)(p.read(6))!=="0000000000ef")throw new Error("Invalid EF marker");const m=p.readVarIntNum(),y=[];for(let P=0;P<m;P++){const _=(0,r.toHex)(p.readReverse(32)),I=p.readUInt32LE(),C=p.readVarIntNum(),A=p.read(C),M=e.default.fromBinary(A),k=p.readUInt32LE(),O=p.readUInt64LEBn().toNumber(),B=p.readVarIntNum(),$=p.read(B),U=n.default.fromBinary($),q=new d(void 0,[],[],void 0);q.outputs=Array(I+1).fill(null),q.outputs[I]={satoshis:O,lockingScript:U},y.push({sourceTransaction:q,sourceTXID:_,sourceOutputIndex:I,unlockingScript:M,sequence:k})}const b=p.readVarIntNum(),x=[];for(let P=0;P<b;P++){const _=p.readUInt64LEBn().toNumber(),I=p.readVarIntNum(),C=p.read(I),A=n.default.fromBinary(C);x.push({satoshis:_,lockingScript:A})}const S=p.readUInt32LE();return new d(g,y,x,S)}static parseScriptOffsets(f){const p=new r.Reader(f),g=[],m=[];p.pos+=4;const y=p.readVarIntNum();for(let x=0;x<y;x++){p.pos+=36;const S=p.readVarIntNum();g.push({vin:x,offset:p.pos,length:S}),p.pos+=S+4}const b=p.readVarIntNum();for(let x=0;x<b;x++){p.pos+=8;const S=p.readVarIntNum();m.push({vout:x,offset:p.pos,length:S}),p.pos+=S}return{inputs:g,outputs:m}}static fromReader(f){const p=f.readUInt32LE(),g=f.readVarIntNum(),m=[];for(let S=0;S<g;S++){const P=(0,r.toHex)(f.readReverse(32)),_=f.readUInt32LE(),I=f.readVarIntNum(),C=f.read(I),A=e.default.fromBinary(C),M=f.readUInt32LE();m.push({sourceTXID:P,sourceOutputIndex:_,unlockingScript:A,sequence:M})}const y=f.readVarIntNum(),b=[];for(let S=0;S<y;S++){const P=f.readUInt64LEBn().toNumber(),_=f.readVarIntNum(),I=f.read(_),C=n.default.fromBinary(I);b.push({satoshis:P,lockingScript:C})}const x=f.readUInt32LE();return new d(p,m,b,x)}static fromBinary(f){const p=new r.Reader(f);return d.fromReader(p)}static fromHex(f){return d.fromBinary((0,r.toArray)(f,"hex"))}static fromHexEF(f){return d.fromEF((0,r.toArray)(f,"hex"))}static fromHexBEEF(f,p){return d.fromBEEF((0,r.toArray)(f,"hex"),p)}constructor(f=1,p=[],g=[],m=0,y={},b){this.version=f,this.inputs=p,this.outputs=g,this.lockTime=m,this.metadata=y,this.merklePath=b}addInput(f){if(typeof f.sourceTXID>"u"&&typeof f.sourceTransaction>"u")throw new Error("A reference to an an input transaction is required. If the input transaction itself cannot be referenced, its TXID must still be provided.");typeof f.sequence>"u"&&(f.sequence=4294967295),this.cachedHash=void 0,this.inputs.push(f)}addOutput(f){if(this.cachedHash=void 0,f.change!==!0){if(typeof f.satoshis>"u")throw new Error("either satoshis must be defined or change must be set to true");if(f.satoshis<0)throw new Error("satoshis must be a positive integer or zero")}if(f.lockingScript==null)throw new Error("lockingScript must be defined");this.outputs.push(f)}addP2PKHOutput(f,p){const g=new u.default().lock(f);if(typeof p>"u")return this.addOutput({lockingScript:g,change:!0});this.addOutput({lockingScript:g,satoshis:p})}updateMetadata(f){this.metadata={...this.metadata,...f}}async fee(f=new s.default(1),p="equal"){if(this.cachedHash=void 0,typeof f=="number"){const y=f;f={computeFee:async()=>y}}const g=await f.computeFee(this),m=this.calculateChange(g);if(m<=0){this.outputs=this.outputs.filter(y=>y.change!==!0);return}this.distributeChange(m,p)}calculateChange(f){var p;let g=0;for(const m of this.inputs){if(typeof m.sourceTransaction!="object")throw new Error("Source transactions are required for all inputs during fee computation");g+=(p=m.sourceTransaction.outputs[m.sourceOutputIndex].satoshis)!==null&&p!==void 0?p:0}g-=f;for(const m of this.outputs)m.change!==!0&&m.satoshis!==void 0&&(g-=m.satoshis);return g}distributeChange(f,p){let g=0;const m=this.outputs.filter(y=>y.change);if(p==="random"?g=this.distributeRandomChange(f,m):p==="equal"&&(g=this.distributeEqualChange(f,m)),g<f){const y=this.outputs[this.outputs.length-1];y.satoshis!==void 0?y.satoshis+=f-g:y.satoshis=f-g}}distributeRandomChange(f,p){let g=0,m=f;const y=Array(p.length).fill(1);m-=p.length,g+=p.length;for(let b=0;b<p.length-1;b++){const x=this.benfordNumber(0,m);y[b]=y[b]+x,g+=x,m-=x}for(const b of this.outputs)b.change===!0&&(b.satoshis=y.shift());return g}distributeEqualChange(f,p){let g=0;const m=Math.floor(f/p.length);for(const y of p)g+=m,y.satoshis=m;return g}benfordNumber(f,p){const g=Math.floor(Math.random()*9)+1;return Math.floor(f+(p-f)*Math.log10(1+1/g)/Math.log10(10))}getFee(){var f,p;let g=0;for(const y of this.inputs){if(typeof y.sourceTransaction!="object")throw new Error("Source transactions or sourceSatoshis are required for all inputs to calculate fee");g+=(f=y.sourceTransaction.outputs[y.sourceOutputIndex].satoshis)!==null&&f!==void 0?f:0}let m=0;for(const y of this.outputs)m+=(p=y.satoshis)!==null&&p!==void 0?p:0;return g-m}async sign(){this.cachedHash=void 0;for(const p of this.outputs)if(typeof p.satoshis>"u")throw p.change===!0?new Error("There are still change outputs with uncomputed amounts. Use the fee() method to compute the change amounts and transaction fees prior to signing."):new Error("One or more transaction outputs is missing an amount. Ensure all output amounts are provided before signing.");const f=await Promise.all(this.inputs.map(async(p,g)=>{var m,y;return typeof this.inputs[g].unlockingScriptTemplate=="object"?await((y=(m=this.inputs[g])===null||m===void 0?void 0:m.unlockingScriptTemplate)===null||y===void 0?void 0:y.sign(this,g)):await Promise.resolve(void 0)}));for(let p=0,g=this.inputs.length;p<g;p++)typeof this.inputs[p].unlockingScriptTemplate=="object"&&(this.inputs[p].unlockingScript=f[p])}async broadcast(f=(0,a.defaultBroadcaster)()){return await f.broadcast(this)}toBinary(){var f,p;const g=new r.Writer;g.writeUInt32LE(this.version),g.writeVarIntNum(this.inputs.length);for(const m of this.inputs){if(typeof m.sourceTXID>"u")if(m.sourceTransaction!=null)g.write(m.sourceTransaction.hash());else throw new Error("sourceTransaction is undefined");else g.writeReverse((0,r.toArray)(m.sourceTXID,"hex"));if(g.writeUInt32LE(m.sourceOutputIndex),m.unlockingScript==null)throw new Error("unlockingScript is undefined");const y=m.unlockingScript.toBinary();g.writeVarIntNum(y.length),g.write(y),g.writeUInt32LE((f=m.sequence)!==null&&f!==void 0?f:0)}g.writeVarIntNum(this.outputs.length);for(const m of this.outputs){g.writeUInt64LE((p=m.satoshis)!==null&&p!==void 0?p:0);const y=m.lockingScript.toBinary();g.writeVarIntNum(y.length),g.write(y)}return g.writeUInt32LE(this.lockTime),g.toArray()}toEF(){var f,p,g;const m=new r.Writer;m.writeUInt32LE(this.version),m.write([0,0,0,0,0,239]),m.writeVarIntNum(this.inputs.length);for(const y of this.inputs){if(typeof y.sourceTransaction>"u")throw new Error("All inputs must have source transactions when serializing to EF format");if(typeof y.sourceTXID>"u"?m.write(y.sourceTransaction.hash()):m.write((0,r.toArray)(y.sourceTXID,"hex").reverse()),m.writeUInt32LE(y.sourceOutputIndex),y.unlockingScript==null)throw new Error("unlockingScript is undefined");const b=y.unlockingScript.toBinary();m.writeVarIntNum(b.length),m.write(b),m.writeUInt32LE((f=y.sequence)!==null&&f!==void 0?f:0),m.writeUInt64LE((p=y.sourceTransaction.outputs[y.sourceOutputIndex].satoshis)!==null&&p!==void 0?p:0);const x=y.sourceTransaction.outputs[y.sourceOutputIndex].lockingScript.toBinary();m.writeVarIntNum(x.length),m.write(x)}m.writeVarIntNum(this.outputs.length);for(const y of this.outputs){m.writeUInt64LE((g=y.satoshis)!==null&&g!==void 0?g:0);const b=y.lockingScript.toBinary();m.writeVarIntNum(b.length),m.write(b)}return m.writeUInt32LE(this.lockTime),m.toArray()}toHexEF(){return(0,r.toHex)(this.toEF())}toHex(){return(0,r.toHex)(this.toBinary())}toHexBEEF(){return(0,r.toHex)(this.toBEEF())}toHexAtomicBEEF(){return(0,r.toHex)(this.toAtomicBEEF())}hash(f){let p;return this.cachedHash!=null?p=this.cachedHash:(p=(0,i.hash256)(this.toBinary()),this.cachedHash=p),f==="hex"?(0,r.toHex)(p):p}id(f){const p=[...this.hash()];return p.reverse(),f==="hex"?(0,r.toHex)(p):p}async verify(f=(0,c.defaultChainTracker)(),p){var g,m,y,b;const x=new Set,S=[this];for(;S.length>0;){const P=S.shift(),_=(g=P==null?void 0:P.id("hex"))!==null&&g!==void 0?g:"";if(_!=null&&_!==""&&x.has(_))continue;if(typeof(P==null?void 0:P.merklePath)=="object"){if(f==="scripts only"){_!=null&&x.add(_);continue}else if(await P.merklePath.verify(_,f)){x.add(_);continue}}if(typeof p<"u"){if(P===void 0)throw new Error("Transaction is undefined");const A=d.fromEF(P.toEF());if(delete A.outputs[0].satoshis,A.outputs[0].change=!0,await A.fee(p),P.getFee()<A.getFee())throw new Error(`Verification failed because the transaction ${_} has an insufficient fee and has not been mined.`)}let I=0;if(P===void 0)throw new Error("Transaction is undefined");for(let A=0;A<P.inputs.length;A++){const M=P.inputs[A];if(typeof M.sourceTransaction!="object")throw new Error(`Verification failed because the input at index ${A} of transaction ${_} is missing an associated source transaction. This source transaction is required for transaction verification because there is no merkle proof for the transaction spending a UTXO it contains.`);if(typeof M.unlockingScript!="object")throw new Error(`Verification failed because the input at index ${A} of transaction ${_} is missing an associated unlocking script. This script is required for transaction verification because there is no merkle proof for the transaction spending the UTXO.`);const k=M.sourceTransaction.outputs[M.sourceOutputIndex];I+=(m=k.satoshis)!==null&&m!==void 0?m:0;const O=M.sourceTransaction.id("hex");x.has(O)||S.push(M.sourceTransaction);const B=P.inputs.filter((q,K)=>K!==A);if(typeof M.sourceTXID>"u"&&(M.sourceTXID=O),!new o.default({sourceTXID:M.sourceTXID,sourceOutputIndex:M.sourceOutputIndex,lockingScript:k.lockingScript,sourceSatoshis:(y=k.satoshis)!==null&&y!==void 0?y:0,transactionVersion:P.version,otherInputs:B,unlockingScript:M.unlockingScript,inputSequence:(b=M.sequence)!==null&&b!==void 0?b:0,inputIndex:A,outputs:P.outputs,lockTime:P.lockTime}).validate())return!1}let C=0;for(const A of P.outputs){if(typeof A.satoshis!="number")throw new Error("Every output must have a defined amount during transaction verification.");C+=A.satoshis}if(C>I)return!1;x.add(_)}return!0}toBEEF(f){const p=new r.Writer;p.writeUInt32LE(l.BEEF_V1);const g=[],m=[],y=b=>{const x={tx:b},S=typeof b.merklePath=="object";if(S){let _=!1;for(let I=0;I<g.length;I++){if(g[I]===b.merklePath){x.pathIndex=I,_=!0;break}if(b.merklePath!==null&&b.merklePath!==void 0&&g[I].blockHeight===b.merklePath.blockHeight){const C=g[I].computeRoot(),A=b.merklePath.computeRoot();if(C===A){g[I].combine(b.merklePath),x.pathIndex=I,_=!0;break}}}_||(x.pathIndex=g.length,b.merklePath!==null&&b.merklePath!==void 0&&g.push(b.merklePath))}if(m.some(_=>_.tx.id("hex")===b.id("hex"))||m.unshift(x),!S)for(let _=0;_<b.inputs.length;_++){const I=b.inputs[_];if(typeof I.sourceTransaction=="object")y(I.sourceTransaction);else if(f===!1)throw new Error("A required source transaction is missing!")}};y(this),p.writeVarIntNum(g.length);for(const b of g)p.write(b.toBinary());p.writeVarIntNum(m.length);for(const b of m)p.write(b.tx.toBinary()),typeof b.pathIndex=="number"?(p.writeUInt8(1),p.writeVarIntNum(b.pathIndex)):p.writeUInt8(0);return p.toArray()}toAtomicBEEF(f){const p=new r.Writer;p.writeUInt32LE(16843009),p.write(this.hash());const g=this.toBEEF(f);return p.write(g),p.toArray()}}return Ng.default=d,Ng}var wp={},PD;function Qve(){if(PD)return wp;PD=1,Object.defineProperty(wp,"__esModule",{value:!0}),wp.isBroadcastFailure=wp.isBroadcastResponse=void 0;function t(n){return n.status==="success"}wp.isBroadcastResponse=t;function e(n){return n.status==="error"}return wp.isBroadcastFailure=e,wp}var Bg={},CD;function ebe(){if(CD)return Bg;CD=1,Object.defineProperty(Bg,"__esModule",{value:!0}),Bg.BeefParty=void 0;const t=h_();let e=class extends t.Beef{constructor(r){if(super(),this.knownTo={},r!=null)for(const i of r)this.addParty(i)}isParty(r){return Object.keys(this.knownTo).includes(r)}addParty(r){if(this.isParty(r))throw new Error(`Party ${r} already exists.`);this.knownTo[r]={}}getKnownTxidsForParty(r){const i=this.knownTo[r];if(i===void 0)throw new Error(`Party ${r} is unknown.`);return Object.keys(i)}getTrimmedBeefForParty(r){const i=this.getKnownTxidsForParty(r),s=this.clone();return s.trimKnownTxids(i),s}addKnownTxidsForParty(r,i){this.isParty(r)||this.addParty(r);const s=this.knownTo[r];for(const o of i)s[o]=!0,this.mergeTxidOnly(o)}mergeBeefFromParty(r,i){const s=Array.isArray(i)?t.Beef.fromBinary(i):i,o=s.getValidTxids();this.mergeBeef(s),this.addKnownTxidsForParty(r,o)}};return Bg.BeefParty=e,Bg.default=e,Bg}var MD;function m_(){return MD||(MD=1,function(t){var e=id&&id.__createBinding||(Object.create?function(l,u,d,h){h===void 0&&(h=d);var f=Object.getOwnPropertyDescriptor(u,d);(!f||("get"in f?!u.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return u[d]}}),Object.defineProperty(l,h,f)}:function(l,u,d,h){h===void 0&&(h=d),l[h]=u[d]}),n=id&&id.__exportStar||function(l,u){for(var d in l)d!=="default"&&!Object.prototype.hasOwnProperty.call(u,d)&&e(u,l,d)},r=id&&id.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(t,"__esModule",{value:!0}),t.BeefParty=t.BeefTx=t.isBroadcastFailure=t.isBroadcastResponse=t.MerklePath=t.Transaction=void 0;var i=p_();Object.defineProperty(t,"Transaction",{enumerable:!0,get:function(){return r(i).default}});var s=lj();Object.defineProperty(t,"MerklePath",{enumerable:!0,get:function(){return r(s).default}});var o=Qve();Object.defineProperty(t,"isBroadcastResponse",{enumerable:!0,get:function(){return o.isBroadcastResponse}}),Object.defineProperty(t,"isBroadcastFailure",{enumerable:!0,get:function(){return o.isBroadcastFailure}});var a=cj();Object.defineProperty(t,"BeefTx",{enumerable:!0,get:function(){return r(a).default}}),n(h_(),t);var c=ebe();Object.defineProperty(t,"BeefParty",{enumerable:!0,get:function(){return r(c).default}})}(id)),id}var s1={},AD;function tbe(){return AD||(AD=1,function(t){var e=s1&&s1.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(t,"__esModule",{value:!0}),t.SatoshisPerKilobyte=void 0;var n=tj();Object.defineProperty(t,"SatoshisPerKilobyte",{enumerable:!0,get:function(){return e(n).default}})}(s1)),s1}var o1={},LE={},RD;function nbe(){if(RD)return LE;RD=1,Object.defineProperty(LE,"__esModule",{value:!0});const t=SP();let e=class{constructor(r="main",i=(0,t.defaultHttpClient)()){this.network=r,this.URL=`https://api.whatsonchain.com/v1/bsv/${r}/tx/raw`,this.httpClient=i}async broadcast(r){var i,s;const o=r.toHex(),a={method:"POST",headers:{"Content-Type":"application/json",Accept:"text/plain"},data:{txhex:o}};try{const c=await this.httpClient.request(this.URL,a);return c.ok?{status:"success",txid:c.data,message:"broadcast successful"}:{status:"error",code:(i=c.status.toString())!==null&&i!==void 0?i:"ERR_UNKNOWN",description:(s=c.data)!==null&&s!==void 0?s:"Unknown error"}}catch(c){return{status:"error",code:"500",description:typeof c.message=="string"?c.message:"Internal Server Error"}}}};return LE.default=e,LE}var kD;function rbe(){return kD||(kD=1,function(t){var e=o1&&o1.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultBroadcaster=t.WhatsOnChainBroadcaster=t.ARC=void 0;var n=ij();Object.defineProperty(t,"ARC",{enumerable:!0,get:function(){return e(n).default}});var r=nbe();Object.defineProperty(t,"WhatsOnChainBroadcaster",{enumerable:!0,get:function(){return e(r).default}});var i=sj();Object.defineProperty(t,"defaultBroadcaster",{enumerable:!0,get:function(){return i.defaultBroadcaster}})}(o1)),o1}var a1={},OD;function ibe(){return OD||(OD=1,function(t){var e=a1&&a1.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultChainTracker=t.WhatsOnChain=void 0;var n=oj();Object.defineProperty(t,"WhatsOnChain",{enumerable:!0,get:function(){return e(n).default}});var r=aj();Object.defineProperty(t,"defaultChainTracker",{enumerable:!0,get:function(){return r.defaultChainTracker}})}(a1)),a1}var JM={},ND;function sbe(){return ND||(ND=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.FetchHttpClient=t.NodejsHttpClient=t.defaultHttpClient=void 0;var e=SP();Object.defineProperty(t,"defaultHttpClient",{enumerable:!0,get:function(){return e.defaultHttpClient}});var n=nj();Object.defineProperty(t,"NodejsHttpClient",{enumerable:!0,get:function(){return n.NodejsHttpClient}});var r=rj();Object.defineProperty(t,"FetchHttpClient",{enumerable:!0,get:function(){return r.FetchHttpClient}})}(JM)),JM}var va={},sd={},LD;function obe(){if(LD)return sd;LD=1;var t=sd&&sd.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(sd,"__esModule",{value:!0}),sd.verify=sd.sign=void 0;const e=t(Yd()),n=t(bv()),r=t(yv()),i=t(hu()),s=t(Ao()),o=Yn(),a="42423301",c=(u,d,h)=>{const f=typeof h!="object";if(f){const P=new i.default,_=new n.default(1),I=P.g.mul(_);h=new e.default(I.x,I.y)}const p=(0,s.default)(32),m=`2-message signing-${(0,o.toBase64)(p)}`,b=d.deriveChild(h,m).sign(u).toDER(),x=d.toPublicKey().encode(!0);return[...(0,o.toArray)(a,"hex"),...x,...f?[0]:h.encode(!0),...p,...b]};sd.sign=c;const l=(u,d,h)=>{const f=new o.Reader(d),p=(0,o.toHex)(f.read(4));if(p!==a)throw new Error(`Message version mismatch: Expected ${a}, received ${p}`);const g=e.default.fromString((0,o.toHex)(f.read(33))),[m]=f.read(1);if(m===0)h=new n.default(1);else{const I=f.read(32),C=(0,o.toHex)([m,...I]);if(typeof h!="object")throw new Error(`This signature can only be verified with knowledge of a specific private key. The associated public key is: ${C}`);const A=h.toPublicKey().encode(!0,"hex");if(C!==A)throw new Error(`The recipient public key is ${A} but the signature requres the recipient to have public key ${C}`)}const y=(0,o.toBase64)(f.read(32)),b=(0,o.toHex)(f.read(f.bin.length-f.pos)),x=r.default.fromDER(b,"hex"),S=`2-message signing-${y}`;return g.deriveChild(h,S).verify(u,x)};return sd.verify=l,sd}var od={},DD;function abe(){if(DD)return od;DD=1;var t=od&&od.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(od,"__esModule",{value:!0}),od.decrypt=od.encrypt=void 0;const e=t(Yd()),n=t(vP()),r=t(Ao()),i=Yn(),s="42421033",o=(c,l,u)=>{const d=(0,r.default)(32),f=`2-message encryption-${(0,i.toBase64)(d)}`,p=l.deriveChild(u,f),g=u.deriveChild(l,f),m=p.deriveSharedSecret(g),b=new n.default(m.encode(!0).slice(1)).encrypt(c),x=l.toPublicKey().encode(!0);return[...(0,i.toArray)(s,"hex"),...x,...u.encode(!0),...d,...b]};od.encrypt=o;const a=(c,l)=>{const u=new i.Reader(c),d=(0,i.toHex)(u.read(4));if(d!==s)throw new Error(`Message version mismatch: Expected ${s}, received ${d}`);const h=e.default.fromString((0,i.toHex)(u.read(33))),f=(0,i.toHex)(u.read(33)),p=l.toPublicKey().encode(!0,"hex");if(f!==p)throw new Error(`The encrypted message expects a recipient public key of ${f}, but the provided key is ${p}`);const g=(0,i.toBase64)(u.read(32)),m=u.read(u.bin.length-u.pos),y=`2-message encryption-${g}`,b=h.deriveChild(l,y),x=l.deriveChild(h,y),S=b.deriveSharedSecret(x);return new n.default(S.encode(!0).slice(1)).decrypt(m)};return od.decrypt=a,od}var BD;function lbe(){if(BD)return va;BD=1;var t=va&&va.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,a)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),e=va&&va.__setModuleDefault||(Object.create?function(r,i){Object.defineProperty(r,"default",{enumerable:!0,value:i})}:function(r,i){r.default=i}),n=va&&va.__importStar||function(r){if(r&&r.__esModule)return r;var i={};if(r!=null)for(var s in r)s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)&&t(i,r,s);return e(i,r),i};return Object.defineProperty(va,"__esModule",{value:!0}),va.EncryptedMessage=va.SignedMessage=void 0,va.SignedMessage=n(obe()),va.EncryptedMessage=n(abe()),va}var nc={},rc={},FD;function cbe(){return FD||(FD=1,function(t){var e=rc&&rc.__createBinding||(Object.create?function(f,p,g,m){m===void 0&&(m=g);var y=Object.getOwnPropertyDescriptor(p,g);(!y||("get"in y?!p.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return p[g]}}),Object.defineProperty(f,m,y)}:function(f,p,g,m){m===void 0&&(m=g),f[m]=p[g]}),n=rc&&rc.__setModuleDefault||(Object.create?function(f,p){Object.defineProperty(f,"default",{enumerable:!0,value:p})}:function(f,p){f.default=p}),r=rc&&rc.__importStar||function(f){if(f&&f.__esModule)return f;var p={};if(f!=null)for(var g in f)g!=="default"&&Object.prototype.hasOwnProperty.call(f,g)&&e(p,f,g);return n(p,f),p},i=rc&&rc.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(t,"__esModule",{value:!0}),t.verify=t.sign=t.magicHash=void 0;const s=i(Ni()),o=Yn(),a=r(vv()),c=r(Li()),l=`Bitcoin Signed Message:
`,u=f=>{const p=new o.Writer;p.writeVarIntNum(l.length),p.write((0,o.toArray)(l,"utf8")),p.writeVarIntNum(f.length),p.write(f);const g=p.toArray();return c.hash256(g)};t.magicHash=u;const d=(f,p,g="base64")=>{const m=(0,t.magicHash)(f),y=a.sign(new s.default(m),p,!0);if(g==="raw")return y;const b=new s.default(m),x=y.CalculateRecoveryFactor(p.toPublicKey(),b);return y.toCompact(x,!0,"base64")};t.sign=d;const h=(f,p,g)=>{const m=(0,t.magicHash)(f);return a.verify(new s.default(m),p,g)};t.verify=h}(rc)),rc}var Ja={},UD;function ube(){if(UD)return Ja;UD=1;var t=Ja&&Ja.__createBinding||(Object.create?function(h,f,p,g){g===void 0&&(g=p);var m=Object.getOwnPropertyDescriptor(f,p);(!m||("get"in m?!f.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return f[p]}}),Object.defineProperty(h,g,m)}:function(h,f,p,g){g===void 0&&(g=p),h[g]=f[p]}),e=Ja&&Ja.__setModuleDefault||(Object.create?function(h,f){Object.defineProperty(h,"default",{enumerable:!0,value:f})}:function(h,f){h.default=f}),n=Ja&&Ja.__importStar||function(h){if(h&&h.__esModule)return h;var f={};if(h!=null)for(var p in h)p!=="default"&&Object.prototype.hasOwnProperty.call(h,p)&&t(f,h,p);return e(f,h),f},r=Ja&&Ja.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(Ja,"__esModule",{value:!0});const i=Yn(),s=n(Li()),o=r(hu()),a=r(bv()),c=r(Yd()),l=r(Ao()),u=r(Ni());let d=class OT{constructor(f,p,g,m,y,b,x){this.constants={pubKey:76067358,privKey:76066276},this.versionBytesNum=f,this.depth=p,this.parentFingerPrint=g,this.childIndex=m,this.chainCode=y,this.privKey=b,this.pubKey=x}fromRandom(){return this.versionBytesNum=this.constants.privKey,this.depth=0,this.parentFingerPrint=[0,0,0,0],this.childIndex=0,this.chainCode=(0,l.default)(32),this.privKey=a.default.fromRandom(),this.pubKey=this.privKey.toPublicKey(),this}static fromRandom(){return new this().fromRandom()}static fromString(f){return new this().fromString(f)}fromString(f){const p=(0,i.fromBase58Check)(f);return this.fromBinary([...p.prefix,...p.data])}static fromSeed(f){return new this().fromSeed(f)}fromSeed(f){if(f.length<128/8)throw new Error("Need more than 128 bits of entropy");if(f.length>512/8)throw new Error("More than 512 bits of entropy is nonstandard");const p=s.sha512hmac((0,i.toArray)("Bitcoin seed","utf8"),f);return this.depth=0,this.parentFingerPrint=[0,0,0,0],this.childIndex=0,this.chainCode=p.slice(32,64),this.versionBytesNum=this.constants.privKey,this.privKey=new a.default(p.slice(0,32)),this.pubKey=this.privKey.toPublicKey(),this}static fromBinary(f){return new this().fromBinary(f)}fromBinary(f){if(f.length!==78)throw new Error("incorrect bip32 data length");const p=new i.Reader(f);this.versionBytesNum=p.readUInt32BE(),this.depth=p.readUInt8(),this.parentFingerPrint=p.read(4),this.childIndex=p.readUInt32BE(),this.chainCode=p.read(32);const g=p.read(33),m=this.versionBytesNum===this.constants.privKey,y=this.versionBytesNum===this.constants.pubKey;if(m&&g[0]===0)this.privKey=new a.default(g.slice(1,33)),this.pubKey=this.privKey.toPublicKey();else if(y&&(g[0]===2||g[0]===3))this.pubKey=c.default.fromString((0,i.toHex)(g));else throw new Error("Invalid key");return this}toString(){const f=this.toBinary();return(0,i.toBase58Check)(f,[])}derive(f){if(f==="m")return this;const p=f.split("/");let g=this;for(const[m,y]of p.entries()){if(m===0){if(y!=="m")throw new Error("invalid path");continue}if(parseInt(y.replace("'",""),10).toString()!==y.replace("'",""))throw new Error("invalid path");const b=y.length>1&&y[y.length-1]==="'";let x=parseInt(b?y.slice(0,y.length-1):y,10)&2147483647;b&&(x+=2147483648),g=g.deriveChild(x)}return g}deriveChild(f){if(typeof f!="number")throw new Error("i must be a number");const p=[];p.push(f>>24&255),p.push(f>>16&255),p.push(f>>8&255),p.push(f&255);const g=[...p],m=(f&2147483648)!==0,y=this.versionBytesNum===this.constants.privKey;if(m&&(this.privKey===null||this.privKey===void 0||!y))throw new Error("Cannot do private key derivation without private key");let b=null;if(this.privKey!==null&&this.privKey!==void 0){let S=null;m?S=[0,...this.privKey.toArray("be",32),...g]:S=[...this.pubKey.encode(!0),...g];const P=s.sha512hmac(this.chainCode,S),_=new u.default(P.slice(0,32)),I=P.slice(32,64),C=_.add(this.privKey).mod(new o.default().n);b=new OT,b.chainCode=I,b.privKey=new a.default(C.toArray()),b.pubKey=b.privKey.toPublicKey()}else{const S=[...this.pubKey.encode(!0),...g],P=s.sha512hmac(this.chainCode,S),_=new u.default(P.slice(0,32)),I=P.slice(32,64),C=new o.default().g.mul(_),A=this.pubKey,M=C.add(A),k=new c.default(M.x,M.y);b=new OT,b.chainCode=I,b.pubKey=k}b.childIndex=f;const x=s.hash160(this.pubKey.encode(!0));return b.parentFingerPrint=x.slice(0,4),b.versionBytesNum=this.versionBytesNum,b.depth=this.depth+1,b}toPublic(){const f=new OT(this.versionBytesNum,this.depth,this.parentFingerPrint,this.childIndex,this.chainCode,this.privKey,this.pubKey);return f.versionBytesNum=this.constants.pubKey,f.privKey=void 0,f}toBinary(){const f=this.versionBytesNum===this.constants.privKey,p=this.versionBytesNum===this.constants.pubKey;if(f)return new i.Writer().writeUInt32BE(this.versionBytesNum).writeUInt8(this.depth).write(this.parentFingerPrint).writeUInt32BE(this.childIndex).write(this.chainCode).writeUInt8(0).write(this.privKey.toArray("be",32)).toArray();if(p)return new i.Writer().writeUInt32BE(this.versionBytesNum).writeUInt8(this.depth).write(this.parentFingerPrint).writeUInt32BE(this.childIndex).write(this.chainCode).write(this.pubKey.encode(!0)).toArray();throw new Error("bip32: invalid versionBytesNum byte")}isPrivate(){return this.versionBytesNum===this.constants.privKey}};return Ja.default=d,Ja}var Qa={},l1={},$D;function dbe(){return $D||($D=1,Object.defineProperty(l1,"__esModule",{value:!0}),l1.wordList=void 0,l1.wordList={value:["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"],space:" "}),l1}var zD;function fbe(){if(zD)return Qa;zD=1;var t=Qa&&Qa.__createBinding||(Object.create?function(l,u,d,h){h===void 0&&(h=d);var f=Object.getOwnPropertyDescriptor(u,d);(!f||("get"in f?!u.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return u[d]}}),Object.defineProperty(l,h,f)}:function(l,u,d,h){h===void 0&&(h=d),l[h]=u[d]}),e=Qa&&Qa.__setModuleDefault||(Object.create?function(l,u){Object.defineProperty(l,"default",{enumerable:!0,value:u})}:function(l,u){l.default=u}),n=Qa&&Qa.__importStar||function(l){if(l&&l.__esModule)return l;var u={};if(l!=null)for(var d in l)d!=="default"&&Object.prototype.hasOwnProperty.call(l,d)&&t(u,l,d);return e(u,l),u},r=Qa&&Qa.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Qa,"__esModule",{value:!0});const i=dbe(),s=Yn(),o=n(Li()),a=r(Ao());let c=class uj{constructor(u,d,h=i.wordList){this.mnemonic=u??"",this.seed=d??[],this.Wordlist=h}toBinary(){const u=new s.Writer;if(this.mnemonic!==""){const d=(0,s.toArray)(this.mnemonic,"utf8");u.writeVarIntNum(d.length),u.write(d)}else u.writeVarIntNum(0);return this.seed.length>0?(u.writeVarIntNum(this.seed.length),u.write(this.seed)):u.writeVarIntNum(0),u.toArray()}fromBinary(u){const d=new s.Reader(u),h=d.readVarIntNum();h>0&&(this.mnemonic=(0,s.encode)(d.read(h),"utf8"));const f=d.readVarIntNum();return f>0&&(this.seed=d.read(f)),this}fromRandom(u){if((u==null||isNaN(u)||u===0)&&(u=128),u%32!==0)throw new Error("bits must be multiple of 32");if(u<128)throw new Error("bits must be at least 128");const d=(0,a.default)(u/8);return this.entropy2Mnemonic(d),this.mnemonic2Seed(),this}static fromRandom(u){return new this().fromRandom(u)}fromEntropy(u){return this.entropy2Mnemonic(u),this}static fromEntropy(u){return new this().fromEntropy(u)}fromString(u){return this.mnemonic=u,this}static fromString(u){return new this().fromString(u)}toString(){return this.mnemonic}toSeed(u){return this.mnemonic2Seed(u),this.seed}entropy2Mnemonic(u){if(u.length<128/8)throw new Error("Entropy is less than 128 bits. It must be 128 bits or more.");const d=o.sha256(u);let h="";const f=u.length*8;for(let m=0;m<u.length;m++)h=h+("00000000"+u[m].toString(2)).slice(-8);let p=d[0].toString(2);if(p=("00000000"+p).slice(-8).slice(0,f/32),h=h+p,h.length%11!==0)throw new Error("internal error - entropy not an even multiple of 11 bits - "+h.length.toString());let g="";for(let m=0;m<h.length/11;m++){g!==""&&(g=g+this.Wordlist.space);const y=parseInt(h.slice(m*11,(m+1)*11),2);g=g+this.Wordlist.value[y]}return this.mnemonic=g,this}check(){const d=this.mnemonic.split(this.Wordlist.space);let h="";for(let x=0;x<d.length;x++){const S=this.Wordlist.value.indexOf(d[x]);if(S<0)return!1;h=h+("00000000000"+S.toString(2)).slice(-11)}if(h.length%11!==0)throw new Error("internal error - entropy not an even multiple of 11 bits - "+h.length.toString());const f=h.length/33,p=h.slice(-f),g=h.slice(0,h.length-f),m=[];for(let x=0;x<g.length/8;x++)m.push(parseInt(h.slice(x*8,(x+1)*8),2));let b=o.sha256(m.slice(0,g.length/8))[0].toString(2);return b=("00000000"+b).slice(-8).slice(0,f),b===p}mnemonic2Seed(u=""){let d=this.mnemonic;if(!this.check())throw new Error("Mnemonic does not pass the check - was the mnemonic typed incorrectly? Are there extra spaces?");if(typeof u!="string")throw new Error("passphrase must be a string or undefined");d=d.normalize("NFKD"),u=u.normalize("NFKD");const h=(0,s.toArray)(d,"utf8"),f=[...(0,s.toArray)("mnemonic","utf8"),...(0,s.toArray)(u,"utf8")];return this.seed=o.pbkdf2(h,f,2048,64,"sha512"),this}isValid(u=""){let d;try{this.mnemonic2Seed(u),d=!0}catch{d=!1}return d}static isValid(u,d=""){return new uj(u).isValid(d)}};return Qa.default=c,Qa}var el={},HD;function hbe(){if(HD)return el;HD=1;var t=el&&el.__createBinding||(Object.create?function(g,m,y,b){b===void 0&&(b=y);var x=Object.getOwnPropertyDescriptor(m,y);(!x||("get"in x?!m.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return m[y]}}),Object.defineProperty(g,b,x)}:function(g,m,y,b){b===void 0&&(b=y),g[b]=m[y]}),e=el&&el.__setModuleDefault||(Object.create?function(g,m){Object.defineProperty(g,"default",{enumerable:!0,value:m})}:function(g,m){g.default=m}),n=el&&el.__importStar||function(g){if(g&&g.__esModule)return g;var m={};if(g!=null)for(var y in g)y!=="default"&&Object.prototype.hasOwnProperty.call(g,y)&&t(m,g,y);return e(m,g),m},r=el&&el.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(el,"__esModule",{value:!0});const i=r(Ao()),s=r(bv()),o=r(Yd()),a=r(gv()),c=n(Li()),l=Yn();function u(g){this._tables[0][0][0]===0&&this._precompute();let m,y,b;const x=this._tables[0][4],S=this._tables[1],P=g.length;let _=1;if(P!==4&&P!==6&&P!==8)throw new Error("invalid aes key size");this._key=[y=g.slice(0),b=[]];let I;for(I=P;I<4*P+28;I++)m=y[I-1],(I%P===0||P===8&&I%P===4)&&(m=x[m>>>24]<<24^x[m>>16&255]<<16^x[m>>8&255]<<8^x[m&255],I%P===0&&(m=m<<8^m>>>24^_<<24,_=_<<1^(_>>7)*283)),y[I]=y[I-P]^m;for(let C=0;I>0;C++,I--)m=y[(C&3)!==0?I:I-4],I<=4||C<4?b[C]=m:b[C]=S[0][x[m>>>24]]^S[1][x[m>>16&255]]^S[2][x[m>>8&255]]^S[3][x[m&255]]}u.prototype={encrypt:function(g){return this._crypt(g,0)},decrypt:function(g){return this._crypt(g,1)},_tables:[[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)]],_precompute:function(){const g=this._tables[0],m=this._tables[1],y=g[4],b=m[4];let x,S,P;const _=new Uint8Array(256),I=new Uint8Array(256);let C,A,M,k,O,B;for(x=0;x<256;x++)I[(_[x]=x<<1^(x>>7)*283)^x]=x;for(S=P=0;y[S]===0;S^=C!==0?C:1,P=I[P]!==0?I[P]:1)for(k=P^P<<1^P<<2^P<<3^P<<4,k=k>>8^k&255^99,y[S]=k,b[k]=S,M=_[A=_[C=_[S]]],B=M*16843009^A*65537^C*257^S*16843008,O=_[k]*257^k*16843008,x=0;x<4;x++)g[x][S]=O=O<<24^O>>>8,m[x][k]=B=B<<24^B>>>8},_crypt:function(g,m){if(g.length!==4)throw new Error("invalid aes block size");const y=this._key[m];let b=g[0]^y[0],x=g[m===1?3:1]^y[1],S=g[2]^y[2],P=g[m===1?1:3]^y[3],_,I,C;const A=y.length/4-2;let M,k=4;const O=new Uint32Array(4),B=this._tables[m],$=B[0],U=B[1],q=B[2],K=B[3],V=B[4];for(M=0;M<A;M++)_=$[b>>>24]^U[x>>16&255]^q[S>>8&255]^K[P&255]^y[k],I=$[x>>>24]^U[S>>16&255]^q[P>>8&255]^K[b&255]^y[k+1],C=$[S>>>24]^U[P>>16&255]^q[b>>8&255]^K[x&255]^y[k+2],P=$[P>>>24]^U[b>>16&255]^q[x>>8&255]^K[S&255]^y[k+3],k+=4,b=_,x=I,S=C;for(M=0;M<4;M++)O[m===1?3&-M:M]=V[b>>>24]<<24^V[x>>16&255]<<16^V[S>>8&255]<<8^V[P&255]^y[k++],_=b,b=x,x=S,S=P,P=_;return O}};class d{static encrypt(m,y){const b=d.buf2Words(y),x=d.buf2Words(m),P=new u(b).encrypt(x);return d.words2Buf(P)}static decrypt(m,y){const b=d.buf2Words(m),x=d.buf2Words(y),P=new u(x).decrypt(b);return d.words2Buf(P)}static buf2Words(m){if(m.length%4!==0)throw new Error("buf length must be a multiple of 4");const y=[];for(let b=0;b<m.length/4;b++){const x=m[b*4]*16777216+(m[b*4+1]<<16|m[b*4+2]<<8|m[b*4+3]);y.push(x)}return y}static words2Buf(m){const y=new Array(m.length*4);for(let b=0;b<m.length;b++){const x=m[b];y[b*4]=x>>>24&255,y[b*4+1]=x>>>16&255,y[b*4+2]=x>>>8&255,y[b*4+3]=x&255}return y}}class h{static buf2BlocksBuf(m,y){const b=y/8,x=[];for(let S=0;S<=m.length/b;S++){let P=m.slice(S*b,S*b+b);P.length<y&&(P=h.pkcs7Pad(P,y)),x.push(P)}return x}static blockBufs2Buf(m){let y=m[m.length-1];return y=h.pkcs7Unpad(y),m[m.length-1]=y,m.flat()}static encrypt(m,y,b,x){const S=y.length*8,P=h.buf2BlocksBuf(m,S);return h.encryptBlocks(P,y,b,x).flat()}static decrypt(m,y,b,x){const S=y.length,P=[];for(let C=0;C<m.length/S;C++)P.push(m.slice(C*S,C*S+S));const _=h.decryptBlocks(P,y,b,x);return h.blockBufs2Buf(_)}static encryptBlock(m,y,b,x){const S=h.xorBufs(m,y);return b.encrypt(S,x)}static decryptBlock(m,y,b,x){const S=b.decrypt(m,x);return h.xorBufs(S,y)}static encryptBlocks(m,y,b,x){const S=[];for(let P=0;P<m.length;P++){const _=m[P],I=h.encryptBlock(_,y,b,x);S.push(I),y=I}return S}static decryptBlocks(m,y,b,x){const S=[];for(let P=0;P<m.length;P++){const _=m[P],I=h.decryptBlock(_,y,b,x);S.push(I),y=_}return S}static pkcs7Pad(m,y){const x=y/8-m.length,S=new Array(x);return S.fill(x),[...m,...S]}static pkcs7Unpad(m){const y=m[m.length-1],b=m.slice(m.length-y,m.length),x=new Array(y);if(x.fill(y),(0,l.toHex)(b)!==(0,l.toHex)(x))throw new Error("invalid padding");return m.slice(0,m.length-y)}static xorBufs(m,y){if(m.length!==y.length)throw new Error("bufs must have the same length");const b=new Array(m.length);for(let x=0;x<m.length;x++)b[x]=m[x]^y[x];return b}}class f{static encrypt(m,y,b,x=!0){b=b??(0,i.default)(128/8);const S=h.encrypt(m,b,d,y);return x?[...b,...S]:[...S]}static decrypt(m,y,b){if(b==null){b=m.slice(0,128/8);const x=m.slice(128/8);return h.decrypt(x,b,d,y)}else{const x=m;return h.decrypt(x,b,d,y)}}}let p=class fk{static ivkEkM(m,y){const b=m,S=y.mul(b),_=new o.default(S.x,S.y).encode(!0),I=c.sha512(_);return{iv:I.slice(0,16),kE:I.slice(16,32),kM:I.slice(32,64)}}static electrumEncrypt(m,y,b,x=!1){let S=null;b==null&&(b=s.default.fromRandom()),x||(S=b.toPublicKey().encode(!0));const{iv:P,kE:_,kM:I}=fk.ivkEkM(b,y),C=f.encrypt(m,_,P,!1),A=(0,l.toArray)("BIE1","utf8");let M;S!=null&&S.length>0?M=[...A,...S,...C]:M=[...A,...C];const k=c.sha256hmac(I,M);return[...M,...k]}static electrumDecrypt(m,y,b){const S=m.slice(0,4);if((0,l.encode)(S,"utf8")!=="BIE1")throw new Error("Invalid Magic");let P=4,_=null;if(m.length-P-32>=33){const B=m[P];B===2||B===3?(_=m.slice(P,P+33),P+=33):B===4&&(_=m.slice(P,P+65),P+=65)}if(_!==null)b==null&&(b=o.default.fromString((0,l.toHex)(_)));else if(b==null)throw new Error("Sender public key is required");const{iv:I,kE:C,kM:A}=fk.ivkEkM(y,b),M=m.slice(P,m.length-32),k=m.slice(m.length-32,m.length),O=c.sha256hmac(A,m.slice(0,m.length-32));if((0,l.toHex)(k)!==(0,l.toHex)(O))throw new Error("Invalid checksum");return f.decrypt(M,C,I)}static bitcoreEncrypt(m,y,b,x){b==null&&(b=s.default.fromRandom()),x==null&&(x=(0,i.default)(16));const S=b,_=b.toPublicKey().encode(!0),M=y.mul(S).getX().toArray("be",32),k=c.sha512(M),O=k.slice(0,32),B=k.slice(32,64),$=f.encrypt(m,O,x),U=c.sha256hmac(B,[...$]);return[..._,...$,...U]}static bitcoreDecrypt(m,y){const b=y,P=o.default.fromString((0,l.toHex)(m.slice(0,33))).mul(b);if(P.eq(new a.default(0,0)))throw new Error("P equals 0");const I=P.getX().toArray("be",32),C=c.sha512(I),A=C.slice(0,32),M=C.slice(32,64),k=m.slice(33,m.length-32),O=m.slice(m.length-32,m.length),B=c.sha256hmac(M,k);if((0,l.toHex)(O)!==(0,l.toHex)(B))throw new Error("Invalid checksum");return[...f.decrypt(k,A)]}};return el.default=p,el}var Fg={},VD;function pbe(){if(VD)return Fg;VD=1;var t=Fg&&Fg.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Fg,"__esModule",{value:!0});const e=t(p_()),n=t(f_());function r(i,s){const o=new e.default(0,[],[],0);return o.outputs=Array(i.vout+1).fill(null),o.outputs[i.vout]={satoshis:i.satoshis,lockingScript:n.default.fromHex(i.script)},{sourceTransaction:o,sourceTXID:i.txid,sourceOutputIndex:i.vout,unlockingScriptTemplate:s,sequence:4294967295}}return Fg.default=r,Fg}var WD;function mbe(){return WD||(WD=1,function(t){var e=nc&&nc.__createBinding||(Object.create?function(l,u,d,h){h===void 0&&(h=d);var f=Object.getOwnPropertyDescriptor(u,d);(!f||("get"in f?!u.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return u[d]}}),Object.defineProperty(l,h,f)}:function(l,u,d,h){h===void 0&&(h=d),l[h]=u[d]}),n=nc&&nc.__setModuleDefault||(Object.create?function(l,u){Object.defineProperty(l,"default",{enumerable:!0,value:u})}:function(l,u){l.default=u}),r=nc&&nc.__importStar||function(l){if(l&&l.__esModule)return l;var u={};if(l!=null)for(var d in l)d!=="default"&&Object.prototype.hasOwnProperty.call(l,d)&&e(u,l,d);return n(u,l),u},i=nc&&nc.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(t,"__esModule",{value:!0}),t.fromUtxo=t.ECIES=t.Mnemonic=t.HD=t.BSM=void 0,t.BSM=r(cbe());var s=ube();Object.defineProperty(t,"HD",{enumerable:!0,get:function(){return i(s).default}});var o=fbe();Object.defineProperty(t,"Mnemonic",{enumerable:!0,get:function(){return i(o).default}});var a=hbe();Object.defineProperty(t,"ECIES",{enumerable:!0,get:function(){return i(a).default}});var c=pbe();Object.defineProperty(t,"fromUtxo",{enumerable:!0,get:function(){return i(c).default}})}(nc)),nc}var _p={},Sp={},jD;function gbe(){if(jD)return Sp;jD=1;var t=Sp&&Sp.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Sp,"__esModule",{value:!0}),Sp.TOTP=void 0;const e=Li(),n=t(Ni());class r{static generate(a,c){const l=this.withDefaultOptions(c),u=this.getCounter(l.timestamp,l.period);return i(a,u,l)}static validate(a,c,l){const u=this.withDefaultValidateOptions(l);if(c=c.trim(),c.length!==u.digits)return!1;const d=this.getCounter(u.timestamp,u.period),h=[d];for(let f=1;f<=u.skew;f++)h.push(d+f),h.push(d-f);for(const f of h)if(c===i(a,f,u))return!0;return!1}static getCounter(a,c){const l=Math.floor(a/1e3);return Math.floor(l/c)}static withDefaultOptions(a){return{digits:2,algorithm:"SHA-1",period:30,timestamp:Date.now(),...a}}static withDefaultValidateOptions(a){return{skew:1,...this.withDefaultOptions(a)}}}Sp.TOTP=r;function i(o,a,c){const l=new n.default(a).toArray("be",8),d=s(o,l,c.algorithm).digest(),h=d[d.length-1]&15,f=d.slice(h,h+4);return(new n.default(f).toNumber()&2147483647).toString().slice(-c.digits)}function s(o,a,c){switch(c){case"SHA-1":return new e.SHA1HMAC(o).update(a);case"SHA-256":return new e.SHA256HMAC(o).update(a);case"SHA-512":return new e.SHA512HMAC(o).update(a);default:throw new Error("unsupported HMAC algorithm")}}return Sp}var qD;function ybe(){return qD||(qD=1,function(t){var e=_p&&_p.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,a)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=_p&&_p.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(gbe(),t)}(_p)),_p}var ad={},c1={},KD;function dj(){if(KD)return c1;KD=1,Object.defineProperty(c1,"__esModule",{value:!0}),c1.SecurityLevels=void 0;var t;return function(e){e[e.Silent=0]="Silent",e[e.App=1]="App",e[e.Counterparty=2]="Counterparty"}(t||(c1.SecurityLevels=t={})),c1}var Ug={},GD;function UO(){if(GD)return Ug;GD=1,Object.defineProperty(Ug,"__esModule",{value:!0}),Ug.KeyDeriver=void 0;const t=pu();let e=class{constructor(r){r==="anyone"?this.rootKey=new t.PrivateKey(1):this.rootKey=r,this.identityKey=this.rootKey.toPublicKey().toString()}derivePublicKey(r,i,s,o=!1){return s=this.normalizeCounterparty(s),o?this.rootKey.deriveChild(s,this.computeInvoiceNumber(r,i)).toPublicKey():s.deriveChild(this.rootKey,this.computeInvoiceNumber(r,i))}derivePrivateKey(r,i,s){return s=this.normalizeCounterparty(s),this.rootKey.deriveChild(s,this.computeInvoiceNumber(r,i))}deriveSymmetricKey(r,i,s){var o,a,c;s==="anyone"&&(s=new t.PrivateKey(1).toPublicKey()),s=this.normalizeCounterparty(s);const l=this.derivePublicKey(r,i,s),u=this.derivePrivateKey(r,i,s);return new t.SymmetricKey((c=(a=(o=u.deriveSharedSecret(l))===null||o===void 0?void 0:o.x)===null||a===void 0?void 0:a.toArray())!==null&&c!==void 0?c:[])}revealCounterpartySecret(r){if(r==="self")throw new Error("Counterparty secrets cannot be revealed for counterparty=self.");r=this.normalizeCounterparty(r);const i=this.rootKey.toPublicKey(),s=this.rootKey.deriveChild(i,"test").toHex(),o=this.rootKey.deriveChild(r,"test").toHex();if(s===o)throw new Error("Counterparty secrets cannot be revealed for counterparty=self.");return this.rootKey.deriveSharedSecret(r).encode(!0)}revealSpecificSecret(r,i,s){r=this.normalizeCounterparty(r);const o=this.rootKey.deriveSharedSecret(r),a=t.Utils.toArray(this.computeInvoiceNumber(i,s),"utf8");return t.Hash.sha256hmac(o.encode(!0),a)}normalizeCounterparty(r){if(r==null)throw new Error("counterparty must be self, anyone or a public key!");return r==="self"?this.rootKey.toPublicKey():r==="anyone"?new t.PrivateKey(1).toPublicKey():typeof r=="string"?t.PublicKey.fromString(r):r}computeInvoiceNumber(r,i){const s=r[0];if(!Number.isInteger(s)||s<0||s>2)throw new Error("Protocol security level must be 0, 1, or 2");const o=r[1].toLowerCase().trim();if(i.length>800)throw new Error("Key IDs must be 800 characters or less");if(i.length<1)throw new Error("Key IDs must be 1 character or more");if(o.length>400)if(o.startsWith("specific linkage revelation ")){if(o.length>430)throw new Error("Specific linkage revelation protocol names must be 430 characters or less")}else throw new Error("Protocol names must be 400 characters or less");if(o.length<5)throw new Error("Protocol names must be 5 characters or more");if(o.includes("  "))throw new Error('Protocol names cannot contain multiple consecutive spaces ("  ")');if(!/^[a-z0-9 ]+$/g.test(o))throw new Error("Protocol names can only contain letters, numbers and spaces");if(o.endsWith(" protocol"))throw new Error('No need to end your protocol name with " protocol"');return`${s}-${o}-${i}`}};return Ug.KeyDeriver=e,Ug.default=e,Ug}var DE={},XD;function vbe(){if(XD)return DE;XD=1,Object.defineProperty(DE,"__esModule",{value:!0});const t=pu(),e=UO();let n=class{constructor(i,s){this.keyDeriver=new e.KeyDeriver(i),this.cache=new Map;const o=s==null?void 0:s.maxCacheSize;this.maxCacheSize=o!=null&&!isNaN(o)&&o>0?o:1e3}derivePublicKey(i,s,o,a=!1){const c=this.generateCacheKey("derivePublicKey",i,s,o,a);if(this.cache.has(c)){const l=this.cacheGet(c);if(l===void 0)throw new Error("Cached value is undefined");return l}else{const l=this.keyDeriver.derivePublicKey(i,s,o,a);return this.cacheSet(c,l),l}}derivePrivateKey(i,s,o){const a=this.generateCacheKey("derivePrivateKey",i,s,o);if(this.cache.has(a)){const c=this.cacheGet(a);if(c===void 0)throw new Error("Cached value is undefined");return c}else{const c=this.keyDeriver.derivePrivateKey(i,s,o);return this.cacheSet(a,c),c}}deriveSymmetricKey(i,s,o){const a=this.generateCacheKey("deriveSymmetricKey",i,s,o);if(this.cache.has(a)){const c=this.cacheGet(a);if(c===void 0)throw new Error("Cached value is undefined");return c}else{const c=this.keyDeriver.deriveSymmetricKey(i,s,o);return this.cacheSet(a,c),c}}revealCounterpartySecret(i){const s=this.generateCacheKey("revealCounterpartySecret",i);if(this.cache.has(s)){const o=this.cacheGet(s);if(o===void 0)throw new Error("Cached value is undefined");return o}else{const o=this.keyDeriver.revealCounterpartySecret(i);return this.cacheSet(s,o),o}}revealSpecificSecret(i,s,o){const a=this.generateCacheKey("revealSpecificSecret",i,s,o);if(this.cache.has(a)){const c=this.cacheGet(a);if(c===void 0)throw new Error("Cached value is undefined");return c}else{const c=this.keyDeriver.revealSpecificSecret(i,s,o);return this.cacheSet(a,c),c}}generateCacheKey(i,...s){const o=s.map(a=>this.serializeArgument(a)).join("|");return`${i}|${o}`}serializeArgument(i){return i instanceof t.PublicKey||i instanceof t.PrivateKey?i.toString():Array.isArray(i)?i.map(s=>this.serializeArgument(s)).join(","):typeof i=="object"&&i!==null?JSON.stringify(i):String(i)}cacheGet(i){const s=this.cache.get(i);return this.cache.delete(i),s!==void 0&&this.cache.set(i,s),s}cacheSet(i,s){if(this.cache.size>=this.maxCacheSize){const o=this.cache.keys().next().value;this.cache.delete(o)}this.cache.set(i,s)}};return DE.default=n,DE}var $g={},YD;function fj(){if(YD)return $g;YD=1,Object.defineProperty($g,"__esModule",{value:!0}),$g.ProtoWallet=void 0;const t=UO(),e=pu();let n=class{constructor(i){typeof i.identityKey!="string"&&(i=new t.KeyDeriver(i)),this.keyDeriver=i}async getPublicKey(i){var s,o;if(i.identityKey){if(this.keyDeriver==null)throw new Error("keyDeriver is undefined");return{publicKey:this.keyDeriver.rootKey.toPublicKey().toString()}}else{if(i.protocolID==null||i.keyID==null||i.keyID==="")throw new Error("protocolID and keyID are required if identityKey is false or undefined.");return{publicKey:((s=this.keyDeriver)!==null&&s!==void 0?s:(()=>{throw new Error("keyDeriver is undefined")})()).derivePublicKey(i.protocolID,i.keyID,(o=i.counterparty)!==null&&o!==void 0?o:"self",i.forSelf).toString()}}}async revealCounterpartyKeyLinkage(i){const{publicKey:s}=await this.getPublicKey({identityKey:!0});if(this.keyDeriver==null)throw new Error("keyDeriver is undefined");const o=this.keyDeriver.revealCounterpartySecret(i.counterparty),a=new e.Schnorr().generateProof(this.keyDeriver.rootKey,this.keyDeriver.rootKey.toPublicKey(),e.PublicKey.fromString(i.counterparty),e.Point.fromDER(o)),c=[...a.R.encode(!0),...a.SPrime.encode(!0),...a.z.toArray()],l=new Date().toISOString(),{ciphertext:u}=await this.encrypt({plaintext:o,protocolID:[2,"counterparty linkage revelation"],keyID:l,counterparty:i.verifier}),{ciphertext:d}=await this.encrypt({plaintext:c,protocolID:[2,"counterparty linkage revelation"],keyID:l,counterparty:i.verifier});return{prover:s,verifier:i.verifier,counterparty:i.counterparty,revelationTime:l,encryptedLinkage:u,encryptedLinkageProof:d}}async revealSpecificKeyLinkage(i){const{publicKey:s}=await this.getPublicKey({identityKey:!0});if(this.keyDeriver==null)throw new Error("keyDeriver is undefined");const o=this.keyDeriver.revealSpecificSecret(i.counterparty,i.protocolID,i.keyID),{ciphertext:a}=await this.encrypt({plaintext:o,protocolID:[2,`specific linkage revelation ${i.protocolID[0]} ${i.protocolID[1]}`],keyID:i.keyID,counterparty:i.verifier}),{ciphertext:c}=await this.encrypt({plaintext:[0],protocolID:[2,`specific linkage revelation ${i.protocolID[0]} ${i.protocolID[1]}`],keyID:i.keyID,counterparty:i.verifier});return{prover:s,verifier:i.verifier,counterparty:i.counterparty,protocolID:i.protocolID,keyID:i.keyID,encryptedLinkage:a,encryptedLinkageProof:c,proofType:0}}async encrypt(i){var s;if(this.keyDeriver==null)throw new Error("keyDeriver is undefined");return{ciphertext:this.keyDeriver.deriveSymmetricKey(i.protocolID,i.keyID,(s=i.counterparty)!==null&&s!==void 0?s:"self").encrypt(i.plaintext)}}async decrypt(i){var s;if(this.keyDeriver==null)throw new Error("keyDeriver is undefined");return{plaintext:this.keyDeriver.deriveSymmetricKey(i.protocolID,i.keyID,(s=i.counterparty)!==null&&s!==void 0?s:"self").decrypt(i.ciphertext)}}async createHmac(i){var s;if(this.keyDeriver==null)throw new Error("keyDeriver is undefined");const o=this.keyDeriver.deriveSymmetricKey(i.protocolID,i.keyID,(s=i.counterparty)!==null&&s!==void 0?s:"self");return{hmac:e.Hash.sha256hmac(o.toArray(),i.data)}}async verifyHmac(i){var s;if(this.keyDeriver==null)throw new Error("keyDeriver is undefined");const o=this.keyDeriver.deriveSymmetricKey(i.protocolID,i.keyID,(s=i.counterparty)!==null&&s!==void 0?s:"self"),a=e.Hash.sha256hmac(o.toArray(),i.data).toString()===i.hmac.toString();if(!a){const c=new Error("HMAC is not valid");throw c.code="ERR_INVALID_HMAC",c}return{valid:a}}async createSignature(i){var s,o,a,c;if(i.hashToDirectlySign==null&&i.data==null)throw new Error("args.data or args.hashToDirectlySign must be valid");const l=(s=i.hashToDirectlySign)!==null&&s!==void 0?s:e.Hash.sha256((o=i.data)!==null&&o!==void 0?o:[]),d=((a=this.keyDeriver)!==null&&a!==void 0?a:(()=>{throw new Error("keyDeriver is undefined")})()).derivePrivateKey(i.protocolID,i.keyID,(c=i.counterparty)!==null&&c!==void 0?c:"anyone");return{signature:e.ECDSA.sign(new e.BigNumber(l),d,!0).toDER()}}async verifySignature(i){var s,o,a,c;if(i.hashToDirectlyVerify==null&&i.data==null)throw new Error("args.data or args.hashToDirectlyVerify must be valid");const l=(s=i.hashToDirectlyVerify)!==null&&s!==void 0?s:e.Hash.sha256((o=i.data)!==null&&o!==void 0?o:[]),d=((a=this.keyDeriver)!==null&&a!==void 0?a:(()=>{throw new Error("keyDeriver is undefined")})()).derivePublicKey(i.protocolID,i.keyID,(c=i.counterparty)!==null&&c!==void 0?c:"self",i.forSelf),h=e.ECDSA.verify(new e.BigNumber(l),e.Signature.fromDER(i.signature),d);if(!h){const f=new Error("Signature is not valid");throw f.code="ERR_INVALID_SIGNATURE",f}return{valid:h}}};return $g.ProtoWallet=n,$g.default=n,$g}var zg={},BE={},ZD;function hj(){if(ZD)return BE;ZD=1,Object.defineProperty(BE,"__esModule",{value:!0});class t{constructor(){if(typeof window!="object")throw new Error("The window.CWI substrate requires a global window object.");if(typeof window.CWI!="object")throw new Error("The window.CWI interface does not appear to be bound to the window object.");this.CWI=window.CWI}async createAction(n,r){return await this.CWI.createAction(n,r)}async signAction(n,r){return await this.CWI.signAction(n,r)}async abortAction(n,r){return await this.CWI.abortAction(n,r)}async listActions(n,r){return await this.CWI.listActions(n,r)}async internalizeAction(n,r){return await this.CWI.internalizeAction(n,r)}async listOutputs(n,r){return await this.CWI.listOutputs(n,r)}async relinquishOutput(n,r){return await this.CWI.relinquishOutput(n,r)}async getPublicKey(n,r){return await this.CWI.getPublicKey(n,r)}async revealCounterpartyKeyLinkage(n,r){return await this.CWI.revealCounterpartyKeyLinkage(n,r)}async revealSpecificKeyLinkage(n,r){return await this.CWI.revealSpecificKeyLinkage(n,r)}async encrypt(n,r){return await this.CWI.encrypt(n,r)}async decrypt(n,r){return await this.CWI.decrypt(n,r)}async createHmac(n,r){return await this.CWI.createHmac(n,r)}async verifyHmac(n,r){return await this.CWI.verifyHmac(n,r)}async createSignature(n,r){return await this.CWI.createSignature(n,r)}async verifySignature(n,r){return await this.CWI.verifySignature(n,r)}async acquireCertificate(n,r){return await this.CWI.acquireCertificate(n,r)}async listCertificates(n,r){return await this.CWI.listCertificates(n,r)}async proveCertificate(n,r){return await this.CWI.proveCertificate(n,r)}async relinquishCertificate(n,r){return await this.CWI.relinquishCertificate(n,r)}async discoverByIdentityKey(n,r){return await this.CWI.discoverByIdentityKey(n,r)}async discoverByAttributes(n,r){return await this.CWI.discoverByAttributes(n,r)}async isAuthenticated(n,r){return await this.CWI.isAuthenticated(n,r)}async waitForAuthentication(n,r){return await this.CWI.waitForAuthentication(n,r)}async getHeight(n,r){return await this.CWI.getHeight(n,r)}async getHeaderForHeight(n,r){return await this.CWI.getHeaderForHeight(n,r)}async getNetwork(n,r){return await this.CWI.getNetwork(n,r)}async getVersion(n,r){return await this.CWI.getVersion(n,r)}}return BE.default=t,BE}var tl={},zf={},JD;function J2(){if(JD)return zf;JD=1,Object.defineProperty(zf,"__esModule",{value:!0}),zf.walletErrors=zf.WalletError=void 0;class t extends Error{constructor(r,i=1,s){super(r),this.isError=!0,this.code=i,this.name=this.constructor.name,s!=null&&s!==""?this.stack=s:Error.captureStackTrace(this,this.constructor)}}zf.WalletError=t;var e;return function(n){n[n.unknownError=1]="unknownError",n[n.unsupportedAction=2]="unsupportedAction",n[n.invalidHmac=3]="invalidHmac",n[n.invalidSignature=4]="invalidSignature",n[n.reviewActions=5]="reviewActions"}(e||(zf.walletErrors=e={})),zf.default=t,zf}var QD;function pj(){if(QD)return tl;QD=1;var t=tl&&tl.__createBinding||(Object.create?function(c,l,u,d){d===void 0&&(d=u);var h=Object.getOwnPropertyDescriptor(l,u);(!h||("get"in h?!l.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(c,d,h)}:function(c,l,u,d){d===void 0&&(d=u),c[d]=l[u]}),e=tl&&tl.__setModuleDefault||(Object.create?function(c,l){Object.defineProperty(c,"default",{enumerable:!0,value:l})}:function(c,l){c.default=l}),n=tl&&tl.__importStar||function(c){if(c&&c.__esModule)return c;var l={};if(c!=null)for(var u in c)u!=="default"&&Object.prototype.hasOwnProperty.call(c,u)&&t(l,c,u);return e(l,c),l},r=tl&&tl.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(tl,"__esModule",{value:!0});const i=r(Ao()),s=n(Yn()),o=J2();class a{constructor(l="*"){if(typeof window!="object")throw new Error("The XDM substrate requires a global window object.");if(typeof window.postMessage!="function")throw new Error("The window object does not seem to support postMessage calls.");this.domain=l}async invoke(l,u){return await new Promise((d,h)=>{const f=s.toBase64((0,i.default)(12)),p=g=>{if(!(g.data.type!=="CWI"||!g.isTrusted||g.data.id!==f||g.data.isInvocation===!0))if(typeof window.removeEventListener=="function"&&window.removeEventListener("message",p),g.data.status==="error"){const m=new o.WalletError(g.data.description,g.data.code);h(m)}else d(g.data.result)};window.addEventListener("message",p),window.parent.postMessage({type:"CWI",isInvocation:!0,id:f,call:l,args:u},this.domain)})}async createAction(l){return await this.invoke("createAction",l)}async signAction(l){return await this.invoke("signAction",l)}async abortAction(l){return await this.invoke("abortAction",l)}async listActions(l){return await this.invoke("listActions",l)}async internalizeAction(l){return await this.invoke("internalizeAction",l)}async listOutputs(l){return await this.invoke("listOutputs",l)}async relinquishOutput(l){return await this.invoke("relinquishOutput",l)}async getPublicKey(l){return await this.invoke("getPublicKey",l)}async revealCounterpartyKeyLinkage(l){return await this.invoke("revealCounterpartyKeyLinkage",l)}async revealSpecificKeyLinkage(l){return await this.invoke("revealSpecificKeyLinkage",l)}async encrypt(l){return await this.invoke("encrypt",l)}async decrypt(l){return await this.invoke("decrypt",l)}async createHmac(l){return await this.invoke("createHmac",l)}async verifyHmac(l){return await this.invoke("verifyHmac",l)}async createSignature(l){return await this.invoke("createSignature",l)}async verifySignature(l){return await this.invoke("verifySignature",l)}async acquireCertificate(l){return await this.invoke("acquireCertificate",l)}async listCertificates(l){return await this.invoke("listCertificates",l)}async proveCertificate(l){return await this.invoke("proveCertificate",l)}async relinquishCertificate(l){return await this.invoke("relinquishCertificate",l)}async discoverByIdentityKey(l){return await this.invoke("discoverByIdentityKey",l)}async discoverByAttributes(l){return await this.invoke("discoverByAttributes",l)}async isAuthenticated(l){return await this.invoke("isAuthenticated",l)}async waitForAuthentication(l){return await this.invoke("waitForAuthentication",l)}async getHeight(l){return await this.invoke("getHeight",l)}async getHeaderForHeight(l){return await this.invoke("getHeaderForHeight",l)}async getNetwork(l){return await this.invoke("getNetwork",l)}async getVersion(l){return await this.invoke("getVersion",l)}}return tl.default=a,tl}var nl={},rl={},eB;function xv(){if(eB)return rl;eB=1;var t=rl&&rl.__createBinding||(Object.create?function(c,l,u,d){d===void 0&&(d=u);var h=Object.getOwnPropertyDescriptor(l,u);(!h||("get"in h?!l.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(c,d,h)}:function(c,l,u,d){d===void 0&&(d=u),c[d]=l[u]}),e=rl&&rl.__setModuleDefault||(Object.create?function(c,l){Object.defineProperty(c,"default",{enumerable:!0,value:l})}:function(c,l){c.default=l}),n=rl&&rl.__importStar||function(c){if(c&&c.__esModule)return c;var l={};if(c!=null)for(var u in c)u!=="default"&&Object.prototype.hasOwnProperty.call(c,u)&&t(l,c,u);return e(l,c),l},r=rl&&rl.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(rl,"__esModule",{value:!0});const i=n(Yn()),s=r(fj()),o=r(yv());class a{constructor(l,u,d,h,f,p,g){this.type=l,this.serialNumber=u,this.subject=d,this.certifier=h,this.revocationOutpoint=f,this.fields=p,this.signature=g}toBinary(l=!0){var u;const d=new i.Writer,h=i.toArray(this.type,"base64");d.write(h);const f=i.toArray(this.serialNumber,"base64");d.write(f);const p=i.toArray(this.subject,"hex");d.write(p);const g=i.toArray(this.certifier,"hex");d.write(g);const[m,y]=this.revocationOutpoint.split("."),b=i.toArray(m,"hex");d.write(b),d.writeVarIntNum(Number(y));const x=Object.keys(this.fields).sort();d.writeVarIntNum(x.length);for(const S of x){const P=this.fields[S],_=i.toArray(S,"utf8");d.writeVarIntNum(_.length),d.write(_);const I=i.toArray(P,"utf8");d.writeVarIntNum(I.length),d.write(I)}if(l&&((u=this.signature)!==null&&u!==void 0?u:"").length>0){const S=i.toArray(this.signature,"hex");d.write(S)}return d.toArray()}static fromBinary(l){const u=new i.Reader(l),d=u.read(32),h=i.toBase64(d),f=u.read(32),p=i.toBase64(f),g=u.read(33),m=i.toHex(g),y=u.read(33),b=i.toHex(y),x=u.read(32),S=i.toHex(x),P=u.readVarIntNum(),_=`${S}.${P}`,I=u.readVarIntNum(),C={};for(let M=0;M<I;M++){const k=u.readVarIntNum(),O=u.read(k),B=i.toUTF8(O),$=u.readVarIntNum(),U=u.read($),q=i.toUTF8(U);C[B]=q}let A;if(!u.eof()){const M=u.read();A=o.default.fromDER(M).toString("hex")}return new a(h,p,m,b,_,C,A)}async verify(){var l;const u=new s.default("anyone"),d=this.toBinary(!1),h=(l=this.signature)!==null&&l!==void 0?l:"",{valid:f}=await u.verifySignature({signature:i.toArray(h,"hex"),data:d,protocolID:[2,"certificate signature"],keyID:`${this.type} ${this.serialNumber}`,counterparty:this.certifier});return f}async sign(l){if(this.signature!=null&&this.signature.length>0)throw new Error(`Certificate has already been signed! Signature present: ${this.signature}`);this.certifier=(await l.getPublicKey({identityKey:!0})).publicKey;const u=this.toBinary(!1),{signature:d}=await l.createSignature({data:u,protocolID:[2,"certificate signature"],keyID:`${this.type} ${this.serialNumber}`});this.signature=i.toHex(d)}static getCertificateFieldEncryptionDetails(l,u){return{protocolID:[2,"certificate field encryption"],keyID:u?`${u} ${l}`:l}}}return rl.default=a,rl}var FE={},tB;function EP(){if(tB)return FE;tB=1,Object.defineProperty(FE,"__esModule",{value:!0});var t;return function(e){e[e.createAction=1]="createAction",e[e.signAction=2]="signAction",e[e.abortAction=3]="abortAction",e[e.listActions=4]="listActions",e[e.internalizeAction=5]="internalizeAction",e[e.listOutputs=6]="listOutputs",e[e.relinquishOutput=7]="relinquishOutput",e[e.getPublicKey=8]="getPublicKey",e[e.revealCounterpartyKeyLinkage=9]="revealCounterpartyKeyLinkage",e[e.revealSpecificKeyLinkage=10]="revealSpecificKeyLinkage",e[e.encrypt=11]="encrypt",e[e.decrypt=12]="decrypt",e[e.createHmac=13]="createHmac",e[e.verifyHmac=14]="verifyHmac",e[e.createSignature=15]="createSignature",e[e.verifySignature=16]="verifySignature",e[e.acquireCertificate=17]="acquireCertificate",e[e.listCertificates=18]="listCertificates",e[e.proveCertificate=19]="proveCertificate",e[e.relinquishCertificate=20]="relinquishCertificate",e[e.discoverByIdentityKey=21]="discoverByIdentityKey",e[e.discoverByAttributes=22]="discoverByAttributes",e[e.isAuthenticated=23]="isAuthenticated",e[e.waitForAuthentication=24]="waitForAuthentication",e[e.getHeight=25]="getHeight",e[e.getHeaderForHeight=26]="getHeaderForHeight",e[e.getNetwork=27]="getNetwork",e[e.getVersion=28]="getVersion"}(t||(t={})),FE.default=t,FE}var nB;function mj(){if(nB)return nl;nB=1;var t=nl&&nl.__createBinding||(Object.create?function(u,d,h,f){f===void 0&&(f=h);var p=Object.getOwnPropertyDescriptor(d,h);(!p||("get"in p?!d.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return d[h]}}),Object.defineProperty(u,f,p)}:function(u,d,h,f){f===void 0&&(f=h),u[f]=d[h]}),e=nl&&nl.__setModuleDefault||(Object.create?function(u,d){Object.defineProperty(u,"default",{enumerable:!0,value:d})}:function(u,d){u.default=d}),n=nl&&nl.__importStar||function(u){if(u&&u.__esModule)return u;var d={};if(u!=null)for(var h in u)h!=="default"&&Object.prototype.hasOwnProperty.call(u,h)&&t(d,u,h);return e(d,u),d},r=nl&&nl.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(nl,"__esModule",{value:!0});const i=dj(),s=r(xv()),o=n(Yn()),a=r(EP()),c=J2();let l=class{constructor(d){this.wire=d}async transmit(d,h="",f=[]){const p=new o.Writer;p.writeUInt8(a.default[d]);const g=o.toArray(h,"utf8");p.writeUInt8(g.length),p.write(g),f.length>0&&p.write(f);const m=p.toArray(),y=await this.wire.transmitToWallet(m),b=new o.Reader(y),x=b.readUInt8();if(x===0)return b.read();{const S=b.readVarIntNum(),P=b.read(S),_=o.toUTF8(P),I=b.readVarIntNum(),C=b.read(I),A=o.toUTF8(C);throw new c.WalletError(_,x,A)}}async createAction(d,h){var f;const p=new o.Writer,g=o.toArray(d.description,"utf8");if(p.writeVarIntNum(g.length),p.write(g),d.inputBEEF!=null?(p.writeVarIntNum(d.inputBEEF.length),p.write(d.inputBEEF)):p.writeVarIntNum(-1),d.inputs!=null){p.writeVarIntNum(d.inputs.length);for(const C of d.inputs){if(p.write(this.encodeOutpoint(C.outpoint)),C.unlockingScript!=null&&C.unlockingScript!==""){const M=o.toArray(C.unlockingScript,"hex");p.writeVarIntNum(M.length),p.write(M)}else p.writeVarIntNum(-1),p.writeVarIntNum((f=C.unlockingScriptLength)!==null&&f!==void 0?f:0);const A=o.toArray(C.inputDescription,"utf8");p.writeVarIntNum(A.length),p.write(A),typeof C.sequenceNumber=="number"?p.writeVarIntNum(C.sequenceNumber):p.writeVarIntNum(-1)}}else p.writeVarIntNum(-1);if(d.outputs!=null){p.writeVarIntNum(d.outputs.length);for(const C of d.outputs){const A=o.toArray(C.lockingScript,"hex");p.writeVarIntNum(A.length),p.write(A),p.writeVarIntNum(C.satoshis);const M=o.toArray(C.outputDescription,"utf8");if(p.writeVarIntNum(M.length),p.write(M),C.basket!=null&&C.basket!==""){const k=o.toArray(C.basket,"utf8");p.writeVarIntNum(k.length),p.write(k)}else p.writeVarIntNum(-1);if(C.customInstructions!=null&&C.customInstructions!==""){const k=o.toArray(C.customInstructions,"utf8");p.writeVarIntNum(k.length),p.write(k)}else p.writeVarIntNum(-1);if(C.tags!=null){p.writeVarIntNum(C.tags.length);for(const k of C.tags){const O=o.toArray(k,"utf8");p.writeVarIntNum(O.length),p.write(O)}}else p.writeVarIntNum(-1)}}else p.writeVarIntNum(-1);if(typeof d.lockTime=="number"?p.writeVarIntNum(d.lockTime):p.writeVarIntNum(-1),typeof d.version=="number"?p.writeVarIntNum(d.version):p.writeVarIntNum(-1),d.labels!=null){p.writeVarIntNum(d.labels.length);for(const C of d.labels){const A=o.toArray(C,"utf8");p.writeVarIntNum(A.length),p.write(A)}}else p.writeVarIntNum(-1);if(d.options!=null){if(p.writeInt8(1),typeof d.options.signAndProcess=="boolean"?p.writeInt8(d.options.signAndProcess?1:0):p.writeInt8(-1),typeof d.options.acceptDelayedBroadcast=="boolean"?p.writeInt8(d.options.acceptDelayedBroadcast?1:0):p.writeInt8(-1),d.options.trustSelf==="known"?p.writeInt8(1):p.writeInt8(-1),d.options.knownTxids!=null){p.writeVarIntNum(d.options.knownTxids.length);for(const C of d.options.knownTxids){const A=o.toArray(C,"hex");p.write(A)}}else p.writeVarIntNum(-1);if(typeof d.options.returnTXIDOnly=="boolean"?p.writeInt8(d.options.returnTXIDOnly?1:0):p.writeInt8(-1),typeof d.options.noSend=="boolean"?p.writeInt8(d.options.noSend?1:0):p.writeInt8(-1),d.options.noSendChange!=null){p.writeVarIntNum(d.options.noSendChange.length);for(const C of d.options.noSendChange)p.write(this.encodeOutpoint(C))}else p.writeVarIntNum(-1);if(d.options.sendWith!=null){p.writeVarIntNum(d.options.sendWith.length);for(const C of d.options.sendWith){const A=o.toArray(C,"hex");p.write(A)}}else p.writeVarIntNum(-1);typeof d.options.randomizeOutputs=="boolean"?p.writeInt8(d.options.randomizeOutputs?1:0):p.writeInt8(-1)}else p.writeInt8(0);const m=await this.transmit("createAction",h,p.toArray()),y=new o.Reader(m),b={};if(y.readInt8()===1){const C=y.read(32);b.txid=o.toHex(C)}if(y.readInt8()===1){const C=y.readVarIntNum();b.tx=y.read(C)}const P=y.readVarIntNum();if(P>=0){b.noSendChange=[];for(let C=0;C<P;C++){const A=this.readOutpoint(y);b.noSendChange.push(A)}}const _=y.readVarIntNum();if(_>=0){b.sendWithResults=[];for(let C=0;C<_;C++){const A=y.read(32),M=o.toHex(A),k=y.readInt8();let O="unproven";k===1?O="unproven":k===2?O="sending":k===3&&(O="failed"),b.sendWithResults.push({txid:M,status:O})}}if(y.readInt8()===1){const C=y.readVarIntNum(),A=y.read(C),M=y.readVarIntNum(),k=y.read(M);b.signableTransaction={tx:A,reference:o.toBase64(k)}}return b}async signAction(d,h){const f=new o.Writer,p=Object.keys(d.spends);f.writeVarIntNum(p.length);for(const _ of p){f.writeVarIntNum(Number(_));const I=d.spends[Number(_)],C=o.toArray(I.unlockingScript,"hex");f.writeVarIntNum(C.length),f.write(C),typeof I.sequenceNumber=="number"?f.writeVarIntNum(I.sequenceNumber):f.writeVarIntNum(-1)}const g=o.toArray(d.reference,"base64");if(f.writeVarIntNum(g.length),f.write(g),d.options!=null)if(f.writeInt8(1),typeof d.options.acceptDelayedBroadcast=="boolean"?f.writeInt8(d.options.acceptDelayedBroadcast?1:0):f.writeInt8(-1),typeof d.options.returnTXIDOnly=="boolean"?f.writeInt8(d.options.returnTXIDOnly?1:0):f.writeInt8(-1),typeof d.options.noSend=="boolean"?f.writeInt8(d.options.noSend?1:0):f.writeInt8(-1),d.options.sendWith!=null){f.writeVarIntNum(d.options.sendWith.length);for(const _ of d.options.sendWith){const I=o.toArray(_,"hex");f.write(I)}}else f.writeVarIntNum(-1);else f.writeInt8(0);const m=await this.transmit("signAction",h,f.toArray()),y=new o.Reader(m),b={};if(y.readInt8()===1){const _=y.read(32);b.txid=o.toHex(_)}if(y.readInt8()===1){const _=y.readVarIntNum();b.tx=y.read(_)}const P=y.readVarIntNum();if(P>=0){b.sendWithResults=[];for(let _=0;_<P;_++){const I=y.read(32),C=o.toHex(I),A=y.readInt8();let M="unproven";A===1?M="unproven":A===2?M="sending":A===3&&(M="failed"),b.sendWithResults.push({txid:C,status:M})}}return b}async abortAction(d,h){return await this.transmit("abortAction",h,o.toArray(d.reference,"base64")),{aborted:!0}}async listActions(d,h){const f=new o.Writer;f.writeVarIntNum(d.labels.length);for(const x of d.labels){const S=o.toArray(x,"utf8");f.writeVarIntNum(S.length),f.write(S)}d.labelQueryMode==="any"?f.writeInt8(1):d.labelQueryMode==="all"?f.writeInt8(2):f.writeInt8(-1);const p=[d.includeLabels,d.includeInputs,d.includeInputSourceLockingScripts,d.includeInputUnlockingScripts,d.includeOutputs,d.includeOutputLockingScripts];for(const x of p)typeof x=="boolean"?f.writeInt8(x?1:0):f.writeInt8(-1);typeof d.limit=="number"?f.writeVarIntNum(d.limit):f.writeVarIntNum(-1),typeof d.offset=="number"?f.writeVarIntNum(d.offset):f.writeVarIntNum(-1),f.writeInt8(typeof d.seekPermission=="boolean"?d.seekPermission?1:0:-1);const g=await this.transmit("listActions",h,f.toArray()),m=new o.Reader(g),y=m.readVarIntNum(),b=[];for(let x=0;x<y;x++){const S=m.read(32),P=o.toHex(S),_=m.readVarIntNum(),I=m.readInt8();let C;switch(I){case 1:C="completed";break;case 2:C="unprocessed";break;case 3:C="sending";break;case 4:C="unproven";break;case 5:C="unsigned";break;case 6:C="nosend";break;case 7:C="nonfinal";break;case 8:C="failed";break;default:throw new Error(`Unknown status code: ${I}`)}const A=m.readInt8()===1,M=m.readVarIntNum(),k=m.read(M),O=o.toUTF8(k),B={txid:P,satoshis:_,status:C,isOutgoing:A,description:O,version:0,lockTime:0},$=m.readVarIntNum();if($>=0){B.labels=[];for(let K=0;K<$;K++){const V=m.readVarIntNum(),G=m.read(V);B.labels.push(o.toUTF8(G))}}B.version=m.readVarIntNum(),B.lockTime=m.readVarIntNum();const U=m.readVarIntNum();if(U>=0){B.inputs=[];for(let K=0;K<U;K++){const V=this.readOutpoint(m),G=m.readVarIntNum(),j=m.readVarIntNum();let Q;if(j>=0){const ae=m.read(j);Q=o.toHex(ae)}const se=m.readVarIntNum();let Z;if(se>=0){const ae=m.read(se);Z=o.toHex(ae)}const ie=m.readVarIntNum(),pe=m.read(ie),ue=o.toUTF8(pe),le=m.readVarIntNum();B.inputs.push({sourceOutpoint:V,sourceSatoshis:G,sourceLockingScript:Q,unlockingScript:Z,inputDescription:ue,sequenceNumber:le})}}const q=m.readVarIntNum();if(q>=0){B.outputs=[];for(let K=0;K<q;K++){const V=m.readVarIntNum(),G=m.readVarIntNum(),j=m.readVarIntNum();let Q;if(j>=0){const Oe=m.read(j);Q=o.toHex(Oe)}const se=m.readInt8()===1,Z=m.readVarIntNum(),ie=m.read(Z),pe=o.toUTF8(ie),ue=m.readVarIntNum();let le;if(ue>=0){const Oe=m.read(ue);le=o.toUTF8(Oe)}const ae=m.readVarIntNum(),_e=[];if(ae>=0)for(let Oe=0;Oe<ae;Oe++){const Be=m.readVarIntNum(),ce=m.read(Be);_e.push(o.toUTF8(ce))}const ye=m.readVarIntNum();let Ae;if(ye>=0){const Oe=m.read(ye);Ae=o.toUTF8(Oe)}B.outputs.push({outputIndex:V,satoshis:G,lockingScript:Q,spendable:se,outputDescription:pe,basket:le,tags:_e,customInstructions:Ae})}}b.push(B)}return{totalActions:y,actions:b}}async internalizeAction(d,h){var f,p,g;const m=new o.Writer;m.writeVarIntNum(d.tx.length),m.write(d.tx),m.writeVarIntNum(d.outputs.length);for(const b of d.outputs)if(m.writeVarIntNum(b.outputIndex),b.protocol==="wallet payment"){if(b.paymentRemittance==null)throw new Error("Payment remittance is required for wallet payment");m.writeUInt8(1),m.write(o.toArray(b.paymentRemittance.senderIdentityKey,"hex"));const x=o.toArray(b.paymentRemittance.derivationPrefix,"base64");m.writeVarIntNum(x.length),m.write(x);const S=o.toArray(b.paymentRemittance.derivationSuffix,"base64");m.writeVarIntNum(S.length),m.write(S)}else{m.writeUInt8(2);const x=o.toArray((f=b.insertionRemittance)===null||f===void 0?void 0:f.basket,"utf8");if(m.writeVarIntNum(x.length),m.write(x),typeof((p=b.insertionRemittance)===null||p===void 0?void 0:p.customInstructions)=="string"&&b.insertionRemittance.customInstructions!==""){const S=o.toArray(b.insertionRemittance.customInstructions,"utf8");m.writeVarIntNum(S.length),m.write(S)}else m.writeVarIntNum(-1);if(typeof((g=b.insertionRemittance)===null||g===void 0?void 0:g.tags)=="object"){m.writeVarIntNum(b.insertionRemittance.tags.length);for(const S of b.insertionRemittance.tags){const P=o.toArray(S,"utf8");m.writeVarIntNum(P.length),m.write(P)}}else m.writeVarIntNum(0)}if(typeof d.labels=="object"){m.writeVarIntNum(d.labels.length);for(const b of d.labels){const x=o.toArray(b,"utf8");m.writeVarIntNum(x.length),m.write(x)}}else m.writeVarIntNum(-1);const y=o.toArray(d.description);return m.writeVarIntNum(y.length),m.write(y),m.writeInt8(typeof d.seekPermission=="boolean"?d.seekPermission?1:0:-1),await this.transmit("internalizeAction",h,m.toArray()),{accepted:!0}}async listOutputs(d,h){const f=new o.Writer,p=o.toArray(d.basket,"utf8");if(f.writeVarIntNum(p.length),f.write(p),typeof d.tags=="object"){f.writeVarIntNum(d.tags.length);for(const P of d.tags){const _=o.toArray(P,"utf8");f.writeVarIntNum(_.length),f.write(_)}}else f.writeVarIntNum(0);d.tagQueryMode==="all"?f.writeInt8(1):d.tagQueryMode==="any"?f.writeInt8(2):f.writeInt8(-1),d.include==="locking scripts"?f.writeInt8(1):d.include==="entire transactions"?f.writeInt8(2):f.writeInt8(-1),typeof d.includeCustomInstructions=="boolean"?f.writeInt8(d.includeCustomInstructions?1:0):f.writeInt8(-1),typeof d.includeTags=="boolean"?f.writeInt8(d.includeTags?1:0):f.writeInt8(-1),typeof d.includeLabels=="boolean"?f.writeInt8(d.includeLabels?1:0):f.writeInt8(-1),typeof d.limit=="number"?f.writeVarIntNum(d.limit):f.writeVarIntNum(-1),typeof d.offset=="number"?f.writeVarIntNum(d.offset):f.writeVarIntNum(-1),f.writeInt8(typeof d.seekPermission=="boolean"?d.seekPermission?1:0:-1);const g=await this.transmit("listOutputs",h,f.toArray()),m=new o.Reader(g),y=m.readVarIntNum(),b=m.readVarIntNum();let x;b>=0&&(x=m.read(b));const S=[];for(let P=0;P<y;P++){const _=this.readOutpoint(m),I=m.readVarIntNum(),C={spendable:!0,outpoint:_,satoshis:I},A=m.readVarIntNum();A>=0&&(C.lockingScript=o.toHex(m.read(A)));const M=m.readVarIntNum();M>=0&&(C.customInstructions=o.toUTF8(m.read(M)));const k=m.readVarIntNum();if(k!==-1){const B=[];for(let $=0;$<k;$++){const U=m.readVarIntNum();B.push(o.toUTF8(m.read(U)))}C.tags=B}const O=m.readVarIntNum();if(O!==-1){const B=[];for(let $=0;$<O;$++){const U=m.readVarIntNum();B.push(o.toUTF8(m.read(U)))}C.labels=B}S.push(C)}return{totalOutputs:y,BEEF:x,outputs:S}}async relinquishOutput(d,h){const f=new o.Writer,p=o.toArray(d.basket,"utf8");return f.writeVarIntNum(p.length),f.write(p),f.write(this.encodeOutpoint(d.output)),await this.transmit("relinquishOutput",h,f.toArray()),{relinquished:!0}}encodeOutpoint(d){const h=new o.Writer,[f,p]=d.split(".");return h.write(o.toArray(f,"hex")),h.writeVarIntNum(Number(p)),h.toArray()}readOutpoint(d){const h=o.toHex(d.read(32)),f=d.readVarIntNum();return`${h}.${f}`}async getPublicKey(d,h){var f,p;const g=new o.Writer;g.writeUInt8(d.identityKey?1:0),d.identityKey?g.write(this.encodePrivilegedParams(d.privileged,d.privilegedReason)):(g.write(this.encodeKeyRelatedParams((f=d.protocolID)!==null&&f!==void 0?f:d.protocolID=[i.SecurityLevels.Silent,"default"],(p=d.keyID)!==null&&p!==void 0?p:d.keyID="",d.counterparty,d.privileged,d.privilegedReason)),typeof d.forSelf=="boolean"?g.writeInt8(d.forSelf?1:0):g.writeInt8(-1)),g.writeInt8(typeof d.seekPermission=="boolean"?d.seekPermission?1:0:-1);const m=await this.transmit("getPublicKey",h,g.toArray());return{publicKey:o.toHex(m)}}async revealCounterpartyKeyLinkage(d,h){const f=new o.Writer;f.write(this.encodePrivilegedParams(d.privileged,d.privilegedReason)),f.write(o.toArray(d.counterparty,"hex")),f.write(o.toArray(d.verifier,"hex"));const p=await this.transmit("revealCounterpartyKeyLinkage",h,f.toArray()),g=new o.Reader(p),m=o.toHex(g.read(33)),y=o.toHex(g.read(33)),b=o.toHex(g.read(33)),x=g.readVarIntNum(),S=o.toUTF8(g.read(x)),P=g.readVarIntNum(),_=g.read(P),I=g.readVarIntNum(),C=g.read(I);return{prover:m,verifier:y,counterparty:b,revelationTime:S,encryptedLinkage:_,encryptedLinkageProof:C}}async revealSpecificKeyLinkage(d,h){const f=new o.Writer;f.write(this.encodeKeyRelatedParams(d.protocolID,d.keyID,d.counterparty,d.privileged,d.privilegedReason)),f.write(o.toArray(d.verifier,"hex"));const p=await this.transmit("revealSpecificKeyLinkage",h,f.toArray()),g=new o.Reader(p),m=o.toHex(g.read(33)),y=o.toHex(g.read(33)),b=o.toHex(g.read(33)),x=g.readUInt8(),S=g.readVarIntNum(),P=o.toUTF8(g.read(S)),_=g.readVarIntNum(),I=o.toUTF8(g.read(_)),C=g.readVarIntNum(),A=g.read(C),M=g.readVarIntNum(),k=g.read(M),O=g.readUInt8();return{prover:m,verifier:y,counterparty:b,protocolID:[x,P],keyID:I,encryptedLinkage:A,encryptedLinkageProof:k,proofType:O}}async encrypt(d,h){const f=new o.Writer;return f.write(this.encodeKeyRelatedParams(d.protocolID,d.keyID,d.counterparty,d.privileged,d.privilegedReason)),f.writeVarIntNum(d.plaintext.length),f.write(d.plaintext),f.writeInt8(typeof d.seekPermission=="boolean"?d.seekPermission?1:0:-1),{ciphertext:await this.transmit("encrypt",h,f.toArray())}}async decrypt(d,h){const f=new o.Writer;return f.write(this.encodeKeyRelatedParams(d.protocolID,d.keyID,d.counterparty,d.privileged,d.privilegedReason)),f.writeVarIntNum(d.ciphertext.length),f.write(d.ciphertext),f.writeInt8(typeof d.seekPermission=="boolean"?d.seekPermission?1:0:-1),{plaintext:await this.transmit("decrypt",h,f.toArray())}}async createHmac(d,h){const f=new o.Writer;return f.write(this.encodeKeyRelatedParams(d.protocolID,d.keyID,d.counterparty,d.privileged,d.privilegedReason)),f.writeVarIntNum(d.data.length),f.write(d.data),f.writeInt8(typeof d.seekPermission=="boolean"?d.seekPermission?1:0:-1),{hmac:await this.transmit("createHmac",h,f.toArray())}}async verifyHmac(d,h){const f=new o.Writer;return f.write(this.encodeKeyRelatedParams(d.protocolID,d.keyID,d.counterparty,d.privileged,d.privilegedReason)),f.write(d.hmac),f.writeVarIntNum(d.data.length),f.write(d.data),f.writeInt8(typeof d.seekPermission=="boolean"?d.seekPermission?1:0:-1),await this.transmit("verifyHmac",h,f.toArray()),{valid:!0}}async createSignature(d,h){var f;const p=new o.Writer;return p.write(this.encodeKeyRelatedParams(d.protocolID,d.keyID,d.counterparty,d.privileged,d.privilegedReason)),typeof d.data=="object"?(p.writeUInt8(1),p.writeVarIntNum(d.data.length),p.write(d.data)):(p.writeUInt8(2),p.write((f=d.hashToDirectlySign)!==null&&f!==void 0?f:d.hashToDirectlySign=[])),p.writeInt8(typeof d.seekPermission=="boolean"?d.seekPermission?1:0:-1),{signature:await this.transmit("createSignature",h,p.toArray())}}async verifySignature(d,h){var f;const p=new o.Writer;return p.write(this.encodeKeyRelatedParams(d.protocolID,d.keyID,d.counterparty,d.privileged,d.privilegedReason)),typeof d.forSelf=="boolean"?p.writeInt8(d.forSelf?1:0):p.writeInt8(-1),p.writeVarIntNum(d.signature.length),p.write(d.signature),typeof d.data=="object"?(p.writeUInt8(1),p.writeVarIntNum(d.data.length),p.write(d.data)):(p.writeUInt8(2),p.write((f=d.hashToDirectlyVerify)!==null&&f!==void 0?f:[])),p.writeInt8(typeof d.seekPermission=="boolean"?d.seekPermission?1:0:-1),await this.transmit("verifySignature",h,p.toArray()),{valid:!0}}encodeKeyRelatedParams(d,h,f,p,g){const m=new o.Writer;m.writeUInt8(d[0]);const y=o.toArray(d[1],"utf8");m.writeVarIntNum(y.length),m.write(y);const b=o.toArray(h,"utf8");return m.writeVarIntNum(b.length),m.write(b),typeof f!="string"?m.writeUInt8(0):f==="self"?m.writeUInt8(11):f==="anyone"?m.writeUInt8(12):m.write(o.toArray(f,"hex")),m.write(this.encodePrivilegedParams(p,g)),m.toArray()}async acquireCertificate(d,h){var f,p,g;const m=new o.Writer;m.write(o.toArray(d.type,"base64")),m.write(o.toArray(d.certifier,"hex"));const y=Object.entries(d.fields);m.writeVarIntNum(y.length);for(const[S,P]of y){const _=o.toArray(S,"utf8"),I=o.toArray(P,"utf8");m.writeVarIntNum(_.length),m.write(_),m.writeVarIntNum(I.length),m.write(I)}if(m.write(this.encodePrivilegedParams(d.privileged,d.privilegedReason)),m.writeUInt8(d.acquisitionProtocol==="direct"?1:2),d.acquisitionProtocol==="direct"){m.write(o.toArray(d.serialNumber,"base64")),m.write(this.encodeOutpoint((f=d.revocationOutpoint)!==null&&f!==void 0?f:""));const S=o.toArray(d.signature,"hex");m.writeVarIntNum(S.length),m.write(S);const P=d.keyringRevealer!=="certifier"?o.toArray(d.keyringRevealer,"hex"):[11];m.write(P);const _=Object.keys((p=d.keyringForSubject)!==null&&p!==void 0?p:{});m.writeVarIntNum(_.length);for(let I=0;I<_.length;I++){const C=o.toArray(_[I],"utf8");m.writeVarIntNum(C.length),m.write(C);const A=o.toArray((g=d.keyringForSubject)===null||g===void 0?void 0:g[_[I]],"base64");m.writeVarIntNum(A.length),m.write(A)}}else{const S=o.toArray(d.certifierUrl,"utf8");m.writeVarIntNum(S.length),m.write(S)}const b=await this.transmit("acquireCertificate",h,m.toArray()),x=s.default.fromBinary(b);return{...x,signature:x.signature}}encodePrivilegedParams(d,h){const f=new o.Writer;if(typeof d=="boolean"?f.writeInt8(d?1:0):f.writeInt8(-1),typeof h=="string"){const p=o.toArray(h,"utf8");f.writeInt8(p.length),f.write(p)}else f.writeInt8(-1);return f.toArray()}async listCertificates(d,h){const f=new o.Writer;f.writeVarIntNum(d.certifiers.length);for(let b=0;b<d.certifiers.length;b++)f.write(o.toArray(d.certifiers[b],"hex"));f.writeVarIntNum(d.types.length);for(let b=0;b<d.types.length;b++)f.write(o.toArray(d.types[b],"base64"));typeof d.limit=="number"?f.writeVarIntNum(d.limit):f.writeVarIntNum(-1),typeof d.offset=="number"?f.writeVarIntNum(d.offset):f.writeVarIntNum(-1),f.write(this.encodePrivilegedParams(d.privileged,d.privilegedReason));const p=await this.transmit("listCertificates",h,f.toArray()),g=new o.Reader(p),m=g.readVarIntNum(),y=[];for(let b=0;b<m;b++){const x=g.readVarIntNum(),S=g.read(x),P=s.default.fromBinary(S);y.push({...P,signature:P.signature})}return{totalCertificates:m,certificates:y}}async proveCertificate(d,h){var f,p;const g=new o.Writer,m=o.toArray(d.certificate.type,"base64");g.write(m);const y=o.toArray(d.certificate.subject,"hex");g.write(y);const b=o.toArray(d.certificate.serialNumber,"base64");g.write(b);const x=o.toArray(d.certificate.certifier,"hex");g.write(x);const S=this.encodeOutpoint((f=d.certificate.revocationOutpoint)!==null&&f!==void 0?f:"");g.write(S);const P=o.toArray(d.certificate.signature,"hex");g.writeVarIntNum(P.length),g.write(P);const _=Object.entries((p=d.certificate.fields)!==null&&p!==void 0?p:{});g.writeVarIntNum(_.length);for(const[k,O]of _){const B=o.toArray(k,"utf8"),$=o.toArray(O,"utf8");g.writeVarIntNum(B.length),g.write(B),g.writeVarIntNum($.length),g.write($)}g.writeVarIntNum(d.fieldsToReveal.length);for(const k of d.fieldsToReveal){const O=o.toArray(k,"utf8");g.writeVarIntNum(O.length),g.write(O)}g.write(o.toArray(d.verifier,"hex")),g.write(this.encodePrivilegedParams(d.privileged,d.privilegedReason));const I=await this.transmit("proveCertificate",h,g.toArray()),C=new o.Reader(I),A=C.readVarIntNum(),M={};for(let k=0;k<A;k++){const O=C.readVarIntNum(),B=o.toUTF8(C.read(O)),$=C.readVarIntNum();M[B]=o.toBase64(C.read($))}return{keyringForVerifier:M}}async relinquishCertificate(d,h){const f=new o.Writer,p=o.toArray(d.type,"base64");f.write(p);const g=o.toArray(d.serialNumber,"base64");f.write(g);const m=o.toArray(d.certifier,"hex");return f.write(m),await this.transmit("relinquishCertificate",h,f.toArray()),{relinquished:!0}}parseDiscoveryResult(d){const h=new o.Reader(d),f=h.readVarIntNum(),p=[];for(let g=0;g<f;g++){const m=h.readVarIntNum(),y=h.read(m),b=s.default.fromBinary(y),x=h.readVarIntNum(),S=o.toUTF8(h.read(x)),P=h.readVarIntNum(),_=o.toUTF8(h.read(P)),I=h.readVarIntNum(),C=o.toUTF8(h.read(I)),A=h.readUInt8(),M={},k=h.readVarIntNum();for(let $=0;$<k;$++){const U=h.readVarIntNum(),q=o.toUTF8(h.read(U)),K=h.readVarIntNum();M[q]=h.read(K)}const O={},B=h.readVarIntNum();for(let $=0;$<B;$++){const U=h.readVarIntNum(),q=o.toUTF8(h.read(U)),K=h.readVarIntNum();O[q]=o.toUTF8(h.read(K))}p.push({...b,signature:b.signature,certifierInfo:{iconUrl:_,name:S,description:C,trust:A},publiclyRevealedKeyring:M,decryptedFields:O})}return{totalCertificates:f,certificates:p}}async discoverByIdentityKey(d,h){const f=new o.Writer;f.write(o.toArray(d.identityKey,"hex")),typeof d.limit=="number"?f.writeVarIntNum(d.limit):f.writeVarIntNum(-1),typeof d.offset=="number"?f.writeVarIntNum(d.offset):f.writeVarIntNum(-1),f.writeInt8(typeof d.seekPermission=="boolean"?d.seekPermission?1:0:-1);const p=await this.transmit("discoverByIdentityKey",h,f.toArray());return this.parseDiscoveryResult(p)}async discoverByAttributes(d,h){const f=new o.Writer,p=Object.keys(d.attributes);f.writeVarIntNum(p.length);for(let m=0;m<p.length;m++)f.writeVarIntNum(p[m].length),f.write(o.toArray(p[m],"utf8")),f.writeVarIntNum(d.attributes[p[m]].length),f.write(o.toArray(d.attributes[p[m]],"utf8"));typeof d.limit=="number"?f.writeVarIntNum(d.limit):f.writeVarIntNum(-1),typeof d.offset=="number"?f.writeVarIntNum(d.offset):f.writeVarIntNum(-1),f.writeInt8(typeof d.seekPermission=="boolean"?d.seekPermission?1:0:-1);const g=await this.transmit("discoverByAttributes",h,f.toArray());return this.parseDiscoveryResult(g)}async isAuthenticated(d,h){return{authenticated:(await this.transmit("isAuthenticated",h))[0]===1}}async waitForAuthentication(d,h){return await this.transmit("waitForAuthentication",h),{authenticated:!0}}async getHeight(d,h){const f=await this.transmit("getHeight",h);return{height:new o.Reader(f).readVarIntNum()}}async getHeaderForHeight(d,h){const f=new o.Writer;f.writeVarIntNum(d.height);const p=await this.transmit("getHeaderForHeight",h,f.toArray());return{header:o.toHex(p)}}async getNetwork(d,h){return{network:(await this.transmit("getNetwork",h))[0]===0?"mainnet":"testnet"}}async getVersion(d,h){const f=await this.transmit("getVersion",h);return{version:o.toUTF8(f)}}};return nl.default=l,nl}var il={},rB;function gj(){if(rB)return il;rB=1;var t=il&&il.__createBinding||(Object.create?function(a,c,l,u){u===void 0&&(u=l);var d=Object.getOwnPropertyDescriptor(c,l);(!d||("get"in d?!c.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return c[l]}}),Object.defineProperty(a,u,d)}:function(a,c,l,u){u===void 0&&(u=l),a[u]=c[l]}),e=il&&il.__setModuleDefault||(Object.create?function(a,c){Object.defineProperty(a,"default",{enumerable:!0,value:c})}:function(a,c){a.default=c}),n=il&&il.__importStar||function(a){if(a&&a.__esModule)return a;var c={};if(a!=null)for(var l in a)l!=="default"&&Object.prototype.hasOwnProperty.call(a,l)&&t(c,a,l);return e(c,a),c},r=il&&il.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(il,"__esModule",{value:!0});const i=r(EP()),s=n(Yn());let o=class{constructor(c,l="http://localhost:3301",u=fetch){this.baseUrl=l,this.httpClient=u,this.originator=c}async transmitToWallet(c){const l=new s.Reader(c),u=l.readUInt8(),d=i.default[u];if(d===void 0||d==="")throw new Error(`Invalid call code: ${u}`);const h=l.readUInt8();let f;if(h>0){const y=l.read(h);f=s.toUTF8(y)}const p=l.read(),m=await(await fetch(`${this.baseUrl}/${d}`,{method:"POST",headers:{"Content-Type":"application/octet-stream",Origin:f??""},body:new Uint8Array(p)})).arrayBuffer();return Array.from(new Uint8Array(m))}};return il.default=o,il}var UE={},Hg={},iB;function yj(){if(iB)return Hg;iB=1,Object.defineProperty(Hg,"__esModule",{value:!0}),Hg.WERR_REVIEW_ACTIONS=void 0;let t=class extends Error{constructor(n,r,i,s,o){super("Undelayed createAction or signAction results require review."),this.reviewActionResults=n,this.sendWithResults=r,this.txid=i,this.tx=s,this.noSendChange=o,this.isError=!0,this.code=5,this.name=this.constructor.name}};return Hg.WERR_REVIEW_ACTIONS=t,Hg.default=t,Hg}var sB;function vj(){if(sB)return UE;sB=1,Object.defineProperty(UE,"__esModule",{value:!0});const t=yj();let e=class{constructor(r,i="http://localhost:3321",s=fetch){this.baseUrl=i,this.originator=r,this.httpClient=s,this.api=async(o,a)=>{var c,l;const u=await await s(`${this.baseUrl}/${o}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Originator:(c=this.originator)!==null&&c!==void 0?c:""},body:JSON.stringify(a)}),d=await u.json();if(!u.ok){if(u.status===400&&d.isError&&d.code===5)throw new t.WERR_REVIEW_ACTIONS(d.reviewActionResults,d.sendWithResults,d.txid,d.tx,d.noSendChange);{const h={call:o,args:a,message:(l=d.message)!==null&&l!==void 0?l:`HTTP Client error ${u.status}`};throw new Error(JSON.stringify(h))}}return d}}async createAction(r){return await this.api("createAction",r)}async signAction(r){return await this.api("signAction",r)}async abortAction(r){return await this.api("abortAction",r)}async listActions(r){return await this.api("listActions",r)}async internalizeAction(r){return await this.api("internalizeAction",r)}async listOutputs(r){return await this.api("listOutputs",r)}async relinquishOutput(r){return await this.api("relinquishOutput",r)}async getPublicKey(r){return await this.api("getPublicKey",r)}async revealCounterpartyKeyLinkage(r){return await this.api("revealCounterpartyKeyLinkage",r)}async revealSpecificKeyLinkage(r){return await this.api("revealSpecificKeyLinkage",r)}async encrypt(r){return await this.api("encrypt",r)}async decrypt(r){return await this.api("decrypt",r)}async createHmac(r){return await this.api("createHmac",r)}async verifyHmac(r){return await this.api("verifyHmac",r)}async createSignature(r){return await this.api("createSignature",r)}async verifySignature(r){return await this.api("verifySignature",r)}async acquireCertificate(r){return await this.api("acquireCertificate",r)}async listCertificates(r){return await this.api("listCertificates",r)}async proveCertificate(r){return await this.api("proveCertificate",r)}async relinquishCertificate(r){return await this.api("relinquishCertificate",r)}async discoverByIdentityKey(r){return await this.api("discoverByIdentityKey",r)}async discoverByAttributes(r){return await this.api("discoverByAttributes",r)}async isAuthenticated(r){return await this.api("isAuthenticated",r)}async waitForAuthentication(r){return await this.api("waitForAuthentication",r)}async getHeight(r){return await this.api("getHeight",r)}async getHeaderForHeight(r){return await this.api("getHeaderForHeight",r)}async getNetwork(r){return await this.api("getNetwork",r)}async getVersion(r){return await this.api("getVersion",r)}};return UE.default=e,UE}var oB;function bj(){if(oB)return zg;oB=1;var t=zg&&zg.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(zg,"__esModule",{value:!0});const e=t(hj()),n=t(pj()),r=t(mj()),i=t(gj()),s=t(vj()),o=200;let a=class{constructor(l="auto",u){l==="Cicada"&&(l=new r.default(new i.default(u))),l==="window.CWI"&&(l=new e.default),l==="XDM"&&(l=new n.default),l==="json-api"&&(l=new s.default(u)),this.substrate=l,this.originator=u}async connectToSubstrate(){if(typeof this.substrate=="object")return;let l;const u=async d=>{let h;if(typeof d=="number"?h=await Promise.race([l.getVersion({}),new Promise((f,p)=>setTimeout(()=>p(new Error("Timed out.")),d))]):h=await l.getVersion({}),typeof h!="object"||typeof h.version!="string")throw new Error("Failed to use substrate.")};try{l=new e.default,await u(),this.substrate=l}catch{try{l=new n.default,await u(o),this.substrate=l}catch{try{l=new r.default(new i.default(this.originator)),await u(),this.substrate=l}catch{try{l=new s.default(this.originator),await u(),this.substrate=l}catch{throw new Error("No wallet available over any communication substrate. Install a BSV wallet today!")}}}}}async createAction(l){return await this.connectToSubstrate(),await this.substrate.createAction(l,this.originator)}async signAction(l){return await this.connectToSubstrate(),await this.substrate.signAction(l,this.originator)}async abortAction(l){return await this.connectToSubstrate(),await this.substrate.abortAction(l,this.originator)}async listActions(l){return await this.connectToSubstrate(),await this.substrate.listActions(l,this.originator)}async internalizeAction(l){return await this.connectToSubstrate(),await this.substrate.internalizeAction(l,this.originator)}async listOutputs(l){return await this.connectToSubstrate(),await this.substrate.listOutputs(l,this.originator)}async relinquishOutput(l){return await this.connectToSubstrate(),await this.substrate.relinquishOutput(l,this.originator)}async getPublicKey(l){return await this.connectToSubstrate(),await this.substrate.getPublicKey(l,this.originator)}async revealCounterpartyKeyLinkage(l){return await this.connectToSubstrate(),await this.substrate.revealCounterpartyKeyLinkage(l,this.originator)}async revealSpecificKeyLinkage(l){return await this.connectToSubstrate(),await this.substrate.revealSpecificKeyLinkage(l,this.originator)}async encrypt(l){return await this.connectToSubstrate(),await this.substrate.encrypt(l,this.originator)}async decrypt(l){return await this.substrate.decrypt(l,this.originator)}async createHmac(l){return await this.connectToSubstrate(),await this.substrate.createHmac(l,this.originator)}async verifyHmac(l){return await this.connectToSubstrate(),await this.substrate.verifyHmac(l,this.originator)}async createSignature(l){return await this.connectToSubstrate(),await this.substrate.createSignature(l,this.originator)}async verifySignature(l){return await this.connectToSubstrate(),await this.substrate.verifySignature(l,this.originator)}async acquireCertificate(l){return await this.connectToSubstrate(),await this.substrate.acquireCertificate(l,this.originator)}async listCertificates(l){return await this.connectToSubstrate(),await this.substrate.listCertificates(l,this.originator)}async proveCertificate(l){return await this.connectToSubstrate(),await this.substrate.proveCertificate(l,this.originator)}async relinquishCertificate(l){return await this.connectToSubstrate(),await this.substrate.relinquishCertificate(l,this.originator)}async discoverByIdentityKey(l){return await this.connectToSubstrate(),await this.substrate.discoverByIdentityKey(l,this.originator)}async discoverByAttributes(l){return await this.connectToSubstrate(),await this.substrate.discoverByAttributes(l,this.originator)}async isAuthenticated(l={}){return await this.connectToSubstrate(),await this.substrate.isAuthenticated(l,this.originator)}async waitForAuthentication(l={}){return await this.connectToSubstrate(),await this.substrate.waitForAuthentication(l,this.originator)}async getHeight(l={}){return await this.connectToSubstrate(),await this.substrate.getHeight(l,this.originator)}async getHeaderForHeight(l){return await this.connectToSubstrate(),await this.substrate.getHeaderForHeight(l,this.originator)}async getNetwork(l={}){return await this.connectToSubstrate(),await this.substrate.getNetwork(l,this.originator)}async getVersion(l={}){return await this.connectToSubstrate(),await this.substrate.getVersion(l,this.originator)}};return zg.default=a,zg}var ld={},QM={},aB;function bbe(){return aB||(aB=1,Object.defineProperty(QM,"__esModule",{value:!0})),QM}var sl={},lB;function xbe(){if(lB)return sl;lB=1;var t=sl&&sl.__createBinding||(Object.create?function(c,l,u,d){d===void 0&&(d=u);var h=Object.getOwnPropertyDescriptor(l,u);(!h||("get"in h?!l.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(c,d,h)}:function(c,l,u,d){d===void 0&&(d=u),c[d]=l[u]}),e=sl&&sl.__setModuleDefault||(Object.create?function(c,l){Object.defineProperty(c,"default",{enumerable:!0,value:l})}:function(c,l){c.default=l}),n=sl&&sl.__importStar||function(c){if(c&&c.__esModule)return c;var l={};if(c!=null)for(var u in c)u!=="default"&&Object.prototype.hasOwnProperty.call(c,u)&&t(l,c,u);return e(l,c),l},r=sl&&sl.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(sl,"__esModule",{value:!0});const i=n(Yn()),s=r(EP()),o=r(xv());let a=class{constructor(l){this.wallet=l}decodeOutpoint(l){const u=l.read(32),d=i.toHex(u),h=l.readVarIntNum();return`${d}.${h}`}encodeOutpoint(l){const u=new i.Writer,[d,h]=l.split(".");return u.write(i.toArray(d,"hex")),u.writeVarIntNum(Number(h)),u.toArray()}async transmitToWallet(l){const u=new i.Reader(l);try{const d=u.readUInt8(),h=s.default[d];if(h===void 0||h==="")throw new Error(`Invalid call code: ${d}`);const f=u.readUInt8(),p=u.read(f),g=i.toUTF8(p),m=u;switch(h){case"createAction":{const y={},b=m.readVarIntNum(),x=m.read(b);y.description=i.toUTF8(x);const S=m.readVarIntNum();S>=0?y.inputBEEF=m.read(S):y.inputBEEF=void 0;const P=m.readVarIntNum();if(P>=0){y.inputs=[];for(let $=0;$<P;$++){const U={};U.outpoint=this.decodeOutpoint(m);const q=m.readVarIntNum();if(q>=0){const j=m.read(q);U.unlockingScript=i.toHex(j)}else{U.unlockingScript=void 0;const j=m.readVarIntNum();U.unlockingScriptLength=j}const K=m.readVarIntNum(),V=m.read(K);U.inputDescription=i.toUTF8(V);const G=m.readVarIntNum();G>=0?U.sequenceNumber=G:U.sequenceNumber=void 0,y.inputs.push(U)}}else y.inputs=void 0;const _=m.readVarIntNum();if(_>=0){y.outputs=[];for(let $=0;$<_;$++){const U={},q=m.readVarIntNum(),K=m.read(q);U.lockingScript=i.toHex(K),U.satoshis=m.readVarIntNum();const V=m.readVarIntNum(),G=m.read(V);U.outputDescription=i.toUTF8(G);const j=m.readVarIntNum();if(j>=0){const Z=m.read(j);U.basket=i.toUTF8(Z)}else U.basket=void 0;const Q=m.readVarIntNum();if(Q>=0){const Z=m.read(Q);U.customInstructions=i.toUTF8(Z)}else U.customInstructions=void 0;const se=m.readVarIntNum();if(se>=0){U.tags=[];for(let Z=0;Z<se;Z++){const ie=m.readVarIntNum(),pe=m.read(ie),ue=i.toUTF8(pe);U.tags.push(ue)}}else U.tags=void 0;y.outputs.push(U)}}else y.outputs=void 0;const I=m.readVarIntNum();I>=0?y.lockTime=I:y.lockTime=void 0;const C=m.readVarIntNum();C>=0?y.version=C:y.version=void 0;const A=m.readVarIntNum();if(A>=0){y.labels=[];for(let $=0;$<A;$++){const U=m.readVarIntNum(),q=m.read(U),K=i.toUTF8(q);y.labels.push(K)}}else y.labels=void 0;if(m.readInt8()===1){y.options={};const $=m.readInt8();$===-1?y.options.signAndProcess=void 0:y.options.signAndProcess=$===1;const U=m.readInt8();U===-1?y.options.acceptDelayedBroadcast=void 0:y.options.acceptDelayedBroadcast=U===1;const q=m.readInt8();q===-1?y.options.trustSelf=void 0:q===1&&(y.options.trustSelf="known");const K=m.readVarIntNum();if(K>=0){y.options.knownTxids=[];for(let Z=0;Z<K;Z++){const ie=m.read(32),pe=i.toHex(ie);y.options.knownTxids.push(pe)}}else y.options.knownTxids=void 0;const V=m.readInt8();V===-1?y.options.returnTXIDOnly=void 0:y.options.returnTXIDOnly=V===1;const G=m.readInt8();G===-1?y.options.noSend=void 0:y.options.noSend=G===1;const j=m.readVarIntNum();if(j>=0){y.options.noSendChange=[];for(let Z=0;Z<j;Z++){const ie=this.decodeOutpoint(m);y.options.noSendChange.push(ie)}}else y.options.noSendChange=void 0;const Q=m.readVarIntNum();if(Q>=0){y.options.sendWith=[];for(let Z=0;Z<Q;Z++){const ie=m.read(32),pe=i.toHex(ie);y.options.sendWith.push(pe)}}else y.options.sendWith=void 0;const se=m.readInt8();se===-1?y.options.randomizeOutputs=void 0:y.options.randomizeOutputs=se===1}else y.options=void 0;const k=await this.wallet.createAction(y,g),O=new i.Writer;if(k.txid!=null&&k.txid!==""?(O.writeInt8(1),O.write(i.toArray(k.txid,"hex"))):O.writeInt8(0),k.tx!=null?(O.writeInt8(1),O.writeVarIntNum(k.tx.length),O.write(k.tx)):O.writeInt8(0),k.noSendChange!=null){O.writeVarIntNum(k.noSendChange.length);for(const $ of k.noSendChange)O.write(this.encodeOutpoint($))}else O.writeVarIntNum(-1);if(k.sendWithResults!=null){O.writeVarIntNum(k.sendWithResults.length);for(const $ of k.sendWithResults){O.write(i.toArray($.txid,"hex"));let U;$.status==="unproven"?U=1:$.status==="sending"?U=2:$.status==="failed"&&(U=3),O.writeInt8(U)}}else O.writeVarIntNum(-1);if(k.signableTransaction!=null){O.writeInt8(1),O.writeVarIntNum(k.signableTransaction.tx.length),O.write(k.signableTransaction.tx);const $=i.toArray(k.signableTransaction.reference,"base64");O.writeVarIntNum($.length),O.write($)}else O.writeInt8(0);const B=new i.Writer;return B.writeUInt8(0),B.write(O.toArray()),B.toArray()}case"signAction":{const y={},b=m.readVarIntNum();y.spends={};for(let A=0;A<b;A++){const M=m.readVarIntNum(),k={},O=m.readVarIntNum(),B=m.read(O);k.unlockingScript=i.toHex(B);const $=m.readVarIntNum();$>=0?k.sequenceNumber=$:k.sequenceNumber=void 0,y.spends[M]=k}const x=m.readVarIntNum(),S=m.read(x);if(y.reference=i.toBase64(S),m.readInt8()===1){y.options={};const A=m.readInt8();A===-1?y.options.acceptDelayedBroadcast=void 0:y.options.acceptDelayedBroadcast=A===1;const M=m.readInt8();M===-1?y.options.returnTXIDOnly=void 0:y.options.returnTXIDOnly=M===1;const k=m.readInt8();k===-1?y.options.noSend=void 0:y.options.noSend=k===1;const O=m.readVarIntNum();if(O>=0){y.options.sendWith=[];for(let B=0;B<O;B++){const $=m.read(32),U=i.toHex($);y.options.sendWith.push(U)}}else y.options.sendWith=void 0}else y.options=void 0;const _=await this.wallet.signAction(y,g),I=new i.Writer;if(_.txid!=null&&_.txid!==""?(I.writeInt8(1),I.write(i.toArray(_.txid,"hex"))):I.writeInt8(0),_.tx!=null?(I.writeInt8(1),I.writeVarIntNum(_.tx.length),I.write(_.tx)):I.writeInt8(0),_.sendWithResults!=null){I.writeVarIntNum(_.sendWithResults.length);for(const A of _.sendWithResults){I.write(i.toArray(A.txid,"hex"));let M;A.status==="unproven"?M=1:A.status==="sending"?M=2:A.status==="failed"&&(M=3),I.writeInt8(M)}}else I.writeVarIntNum(-1);const C=new i.Writer;return C.writeUInt8(0),C.write(I.toArray()),C.toArray()}case"abortAction":{const y=m.read(),b=i.toBase64(y);await this.wallet.abortAction({reference:b},g);const x=new i.Writer;return x.writeUInt8(0),x.toArray()}case"listActions":{const y={},b=m.readVarIntNum();y.labels=[];for(let k=0;k<b;k++){const O=m.readVarIntNum(),B=m.read(O);y.labels.push(i.toUTF8(B))}const x=m.readInt8();x===-1?y.labelQueryMode=void 0:x===1?y.labelQueryMode="any":x===2&&(y.labelQueryMode="all");const S=["includeLabels","includeInputs","includeInputSourceLockingScripts","includeInputUnlockingScripts","includeOutputs","includeOutputLockingScripts"];for(const k of S){const O=m.readInt8();O===-1?y[k]=void 0:y[k]=O===1}const P=m.readVarIntNum();P>=0?y.limit=P:y.limit=void 0;const _=m.readVarIntNum();_>=0?y.offset=_:y.offset=void 0;const I=m.readInt8();I>=0?y.seekPermission=I===1:y.seekPermission=void 0;const C=await this.wallet.listActions(y,g),A=new i.Writer;A.writeVarIntNum(C.totalActions);for(const k of C.actions){A.write(i.toArray(k.txid,"hex")),A.writeVarIntNum(k.satoshis);let O;switch(k.status){case"completed":O=1;break;case"unprocessed":O=2;break;case"sending":O=3;break;case"unproven":O=4;break;case"unsigned":O=5;break;case"nosend":O=6;break;case"nonfinal":O=7;break;case"failed":O=8;break;default:O=-1;break}A.writeInt8(O),A.writeInt8(k.isOutgoing?1:0);const B=i.toArray(k.description,"utf8");if(A.writeVarIntNum(B.length),A.write(B),k.labels!==void 0){A.writeVarIntNum(k.labels.length);for(const $ of k.labels){const U=i.toArray($,"utf8");A.writeVarIntNum(U.length),A.write(U)}}else A.writeVarIntNum(-1);if(A.writeVarIntNum(k.version),A.writeVarIntNum(k.lockTime),k.inputs!==void 0){A.writeVarIntNum(k.inputs.length);for(const $ of k.inputs){if(A.write(this.encodeOutpoint($.sourceOutpoint)),A.writeVarIntNum($.sourceSatoshis),$.sourceLockingScript!==void 0){const q=i.toArray($.sourceLockingScript,"hex");A.writeVarIntNum(q.length),A.write(q)}else A.writeVarIntNum(-1);if($.unlockingScript!==void 0){const q=i.toArray($.unlockingScript,"hex");A.writeVarIntNum(q.length),A.write(q)}else A.writeVarIntNum(-1);const U=i.toArray($.inputDescription,"utf8");A.writeVarIntNum(U.length),A.write(U),A.writeVarIntNum($.sequenceNumber)}}else A.writeVarIntNum(-1);if(k.outputs!==void 0){A.writeVarIntNum(k.outputs.length);for(const $ of k.outputs){if(A.writeVarIntNum($.outputIndex),A.writeVarIntNum($.satoshis),$.lockingScript!==void 0){const q=i.toArray($.lockingScript,"hex");A.writeVarIntNum(q.length),A.write(q)}else A.writeVarIntNum(-1);A.writeInt8($.spendable?1:0);const U=i.toArray($.outputDescription,"utf8");if(A.writeVarIntNum(U.length),A.write(U),$.basket!==void 0){const q=i.toArray($.basket,"utf8");A.writeVarIntNum(q.length),A.write(q)}else A.writeVarIntNum(-1);if($.tags!==void 0){A.writeVarIntNum($.tags.length);for(const q of $.tags){const K=i.toArray(q,"utf8");A.writeVarIntNum(K.length),A.write(K)}}else A.writeVarIntNum(-1);if($.customInstructions!==void 0){const q=i.toArray($.customInstructions,"utf8");A.writeVarIntNum(q.length),A.write(q)}else A.writeVarIntNum(-1)}}else A.writeVarIntNum(-1)}const M=new i.Writer;return M.writeUInt8(0),M.write(A.toArray()),M.toArray()}case"internalizeAction":{const y={},b=m.readVarIntNum();y.tx=m.read(b);const x=m.readVarIntNum();y.outputs=[];for(let C=0;C<x;C++){const A={};A.outputIndex=m.readVarIntNum();const M=m.readUInt8();if(M===1){A.protocol="wallet payment",A.paymentRemittance={};const k=m.read(33);A.paymentRemittance.senderIdentityKey=i.toHex(k);const O=m.readVarIntNum(),B=m.read(O);A.paymentRemittance.derivationPrefix=i.toBase64(B);const $=m.readVarIntNum(),U=m.read($);A.paymentRemittance.derivationSuffix=i.toBase64(U)}else if(M===2){A.protocol="basket insertion",A.insertionRemittance={};const k=m.readVarIntNum(),O=m.read(k);A.insertionRemittance.basket=i.toUTF8(O);const B=m.readVarIntNum();if(B>=0){const U=m.read(B);A.insertionRemittance.customInstructions=i.toUTF8(U)}const $=m.readVarIntNum();if($>0){A.insertionRemittance.tags=[];for(let U=0;U<$;U++){const q=m.readVarIntNum(),K=m.read(q);A.insertionRemittance.tags.push(i.toUTF8(K))}}else A.insertionRemittance.tags=[]}y.outputs.push(A)}const S=m.readVarIntNum();if(S>=0){y.labels=[];for(let C=0;C<S;C++){const A=m.readVarIntNum();y.labels.push(i.toUTF8(m.read(A)))}}const P=m.readVarIntNum();y.description=i.toUTF8(m.read(P));const _=m.readInt8();_>=0?y.seekPermission=_===1:y.seekPermission=void 0,await this.wallet.internalizeAction(y,g);const I=new i.Writer;return I.writeUInt8(0),I.toArray()}case"listOutputs":{const y={},b=m.readVarIntNum(),x=m.read(b);y.basket=i.toUTF8(x);const S=m.readVarIntNum();if(S>0){y.tags=[];for(let q=0;q<S;q++){const K=m.readVarIntNum(),V=m.read(K);y.tags.push(i.toUTF8(V))}}else y.tags=void 0;const P=m.readInt8();P===1?y.tagQueryMode="all":P===2?y.tagQueryMode="any":y.tagQueryMode=void 0;const _=m.readInt8();_===1?y.include="locking scripts":_===2?y.include="entire transactions":y.include=void 0;const I=m.readInt8();I===-1?y.includeCustomInstructions=void 0:y.includeCustomInstructions=I===1;const C=m.readInt8();C===-1?y.includeTags=void 0:y.includeTags=C===1;const A=m.readInt8();A===-1?y.includeLabels=void 0:y.includeLabels=A===1;const M=m.readVarIntNum();M>=0?y.limit=M:y.limit=void 0;const k=m.readVarIntNum();k>=0?y.offset=k:y.offset=void 0;const O=m.readInt8();O>=0?y.seekPermission=O===1:y.seekPermission=void 0;const B=await this.wallet.listOutputs(y,g),$=new i.Writer;$.writeVarIntNum(B.totalOutputs),B.BEEF!=null?($.writeVarIntNum(B.BEEF.length),$.write(B.BEEF)):$.writeVarIntNum(-1);for(const q of B.outputs){if($.write(this.encodeOutpoint(q.outpoint)),$.writeVarIntNum(q.satoshis),q.lockingScript!==void 0){const K=i.toArray(q.lockingScript,"hex");$.writeVarIntNum(K.length),$.write(K)}else $.writeVarIntNum(-1);if(q.customInstructions!==void 0){const K=i.toArray(q.customInstructions,"utf8");$.writeVarIntNum(K.length),$.write(K)}else $.writeVarIntNum(-1);if(q.tags!==void 0){$.writeVarIntNum(q.tags.length);for(const K of q.tags){const V=i.toArray(K,"utf8");$.writeVarIntNum(V.length),$.write(V)}}else $.writeVarIntNum(-1);if(q.labels!==void 0){$.writeVarIntNum(q.labels.length);for(const K of q.labels){const V=i.toArray(K,"utf8");$.writeVarIntNum(V.length),$.write(V)}}else $.writeVarIntNum(-1)}const U=new i.Writer;return U.writeUInt8(0),U.write($.toArray()),U.toArray()}case"relinquishOutput":{const y={},b=m.readVarIntNum(),x=m.read(b);y.basket=i.toUTF8(x),y.output=this.decodeOutpoint(m),await this.wallet.relinquishOutput(y,g);const S=new i.Writer;return S.writeUInt8(0),S.toArray()}case"getPublicKey":{const y={},b=m.readUInt8();if(y.identityKey=b===1,y.identityKey!==!0){y.protocolID=this.decodeProtocolID(m),y.keyID=this.decodeString(m),y.counterparty=this.decodeCounterparty(m);const I=m.readInt8();I===-1?y.privileged=void 0:y.privileged=I===1;const C=m.readInt8();if(C!==-1){const M=m.read(C);y.privilegedReason=i.toUTF8(M)}else y.privilegedReason=void 0;const A=m.readInt8();A===-1?y.forSelf=void 0:y.forSelf=A===1}else{const I=m.readInt8();I===-1?y.privileged=void 0:y.privileged=I===1;const C=m.readInt8();if(C!==-1){const A=m.read(C);y.privilegedReason=i.toUTF8(A)}else y.privilegedReason=void 0}const x=m.readInt8();x>=0?y.seekPermission=x===1:y.seekPermission=void 0;const S=await this.wallet.getPublicKey(y,g),P=new i.Writer;P.writeUInt8(0);const _=i.toArray(S.publicKey,"hex");return P.write(_),P.toArray()}case"encrypt":{const y=this.decodeKeyRelatedParams(m),b=m.readVarIntNum();y.plaintext=m.read(b);const x=m.readInt8();x>=0?y.seekPermission=x===1:y.seekPermission=void 0;const S=await this.wallet.encrypt(y,g),P=new i.Writer;return P.writeUInt8(0),P.write(S.ciphertext),P.toArray()}case"decrypt":{const y=this.decodeKeyRelatedParams(m),b=m.readVarIntNum();y.ciphertext=m.read(b);const x=m.readInt8();x>=0?y.seekPermission=x===1:y.seekPermission=void 0;const S=await this.wallet.decrypt(y,g),P=new i.Writer;return P.writeUInt8(0),P.write(S.plaintext),P.toArray()}case"createHmac":{const y=this.decodeKeyRelatedParams(m),b=m.readVarIntNum();y.data=m.read(b);const x=m.readInt8();x>=0?y.seekPermission=x===1:y.seekPermission=void 0;const S=await this.wallet.createHmac(y,g),P=new i.Writer;return P.writeUInt8(0),P.write(S.hmac),P.toArray()}case"verifyHmac":{const y=this.decodeKeyRelatedParams(m);y.hmac=m.read(32);const b=m.readVarIntNum();y.data=m.read(b);const x=m.readInt8();x>=0?y.seekPermission=x===1:y.seekPermission=void 0,await this.wallet.verifyHmac(y,g);const S=new i.Writer;return S.writeUInt8(0),S.toArray()}case"createSignature":{const y=this.decodeKeyRelatedParams(m),b=m.readUInt8();if(b===1){const _=m.readVarIntNum();y.data=m.read(_)}else b===2&&(y.hashToDirectlySign=m.read(32));const x=m.readInt8();x>=0?y.seekPermission=x===1:y.seekPermission=void 0;const S=await this.wallet.createSignature(y,g),P=new i.Writer;return P.writeUInt8(0),P.write(S.signature),P.toArray()}case"verifySignature":{const y=this.decodeKeyRelatedParams(m),b=m.readInt8();b===-1?y.forSelf=void 0:y.forSelf=b===1;const x=m.readVarIntNum();y.signature=m.read(x);const S=m.readUInt8();if(S===1){const I=m.readVarIntNum();y.data=m.read(I)}else S===2&&(y.hashToDirectlyVerify=m.read(32));const P=m.readInt8();P>=0?y.seekPermission=P===1:y.seekPermission=void 0,await this.wallet.verifySignature(y,g);const _=new i.Writer;return _.writeUInt8(0),_.toArray()}case"isAuthenticated":{const y=await this.wallet.isAuthenticated({},g),b=new i.Writer;return b.writeUInt8(0),b.writeUInt8(y.authenticated?1:0),b.toArray()}case"waitForAuthentication":{await this.wallet.waitForAuthentication({},g);const y=new i.Writer;return y.writeUInt8(0),y.toArray()}case"getHeight":{const y=await this.wallet.getHeight({},g),b=new i.Writer;return b.writeUInt8(0),b.writeVarIntNum(y.height),b.toArray()}case"getHeaderForHeight":{const y={};y.height=m.readVarIntNum();const b=await this.wallet.getHeaderForHeight(y,g),x=new i.Writer;x.writeUInt8(0);const S=i.toArray(b.header,"hex");return x.write(S),x.toArray()}case"getNetwork":{const y=await this.wallet.getNetwork({},g),b=new i.Writer;return b.writeUInt8(0),b.writeUInt8(y.network==="mainnet"?0:1),b.toArray()}case"getVersion":{const y=await this.wallet.getVersion({},g),b=new i.Writer;b.writeUInt8(0);const x=i.toArray(y.version,"utf8");return b.write(x),b.toArray()}case"revealCounterpartyKeyLinkage":{const y={},b=m.readInt8();b===-1?y.privileged=void 0:y.privileged=b===1;const x=m.readInt8();if(x===-1)y.privilegedReason=void 0;else{const M=m.read(x);y.privilegedReason=i.toUTF8(M)}const S=m.read(33);y.counterparty=i.toHex(S);const P=m.read(33);y.verifier=i.toHex(P);const _=await this.wallet.revealCounterpartyKeyLinkage(y,g),I=new i.Writer;I.write(i.toArray(_.prover,"hex")),I.write(i.toArray(_.verifier,"hex")),I.write(i.toArray(_.counterparty,"hex"));const C=i.toArray(_.revelationTime,"utf8");I.writeVarIntNum(C.length),I.write(C),I.writeVarIntNum(_.encryptedLinkage.length),I.write(_.encryptedLinkage),I.writeVarIntNum(_.encryptedLinkageProof.length),I.write(_.encryptedLinkageProof);const A=new i.Writer;return A.writeUInt8(0),A.write(I.toArray()),A.toArray()}case"revealSpecificKeyLinkage":{const y=this.decodeKeyRelatedParams(m),b=m.read(33);y.verifier=i.toHex(b);const x=await this.wallet.revealSpecificKeyLinkage(y,g),S=new i.Writer;S.write(i.toArray(x.prover,"hex")),S.write(i.toArray(x.verifier,"hex")),S.write(i.toArray(x.counterparty,"hex")),S.writeUInt8(x.protocolID[0]);const P=i.toArray(x.protocolID[1],"utf8");S.writeVarIntNum(P.length),S.write(P);const _=i.toArray(x.keyID,"utf8");S.writeVarIntNum(_.length),S.write(_),S.writeVarIntNum(x.encryptedLinkage.length),S.write(x.encryptedLinkage),S.writeVarIntNum(x.encryptedLinkageProof.length),S.write(x.encryptedLinkageProof),S.writeUInt8(x.proofType);const I=new i.Writer;return I.writeUInt8(0),I.write(S.toArray()),I.toArray()}case"acquireCertificate":{const y={},b=m.read(32);y.type=i.toBase64(b);const x=m.read(33);y.certifier=i.toHex(x);const S=m.readVarIntNum();y.fields={};for(let O=0;O<S;O++){const B=m.readVarIntNum(),$=m.read(B),U=i.toUTF8($),q=m.readVarIntNum(),K=m.read(q),V=i.toUTF8(K);y.fields[U]=V}const P=m.readInt8();P===-1?y.privileged=void 0:y.privileged=P===1;const _=m.readInt8();if(_===-1)y.privilegedReason=void 0;else{const O=m.read(_);y.privilegedReason=i.toUTF8(O)}const I=m.readUInt8();if(y.acquisitionProtocol=I===1?"direct":"issuance",y.acquisitionProtocol==="direct"){const O=m.read(32);y.serialNumber=i.toBase64(O),y.revocationOutpoint=this.decodeOutpoint(m);const B=m.readVarIntNum(),$=m.read(B);y.signature=i.toHex($);const U=m.readUInt8();if(U===11)y.keyringRevealer="certifier";else{const K=[U].concat(m.read(32));y.keyringRevealer=i.toHex(K)}const q=m.readVarIntNum();y.keyringForSubject={};for(let K=0;K<q;K++){const V=m.readVarIntNum(),G=m.read(V),j=i.toUTF8(G),Q=m.readVarIntNum(),se=m.read(Q),Z=i.toBase64(se);y.keyringForSubject[j]=Z}}else{const O=m.readVarIntNum(),B=m.read(O);y.certifierUrl=i.toUTF8(B)}const C=await this.wallet.acquireCertificate(y,g),M=new o.default(C.type,C.serialNumber,C.subject,C.certifier,C.revocationOutpoint,C.fields,C.signature).toBinary(),k=new i.Writer;return k.writeUInt8(0),k.write(M),k.toArray()}case"listCertificates":{const y={},b=m.readVarIntNum();y.certifiers=[];for(let k=0;k<b;k++){const O=m.read(33);y.certifiers.push(i.toHex(O))}const x=m.readVarIntNum();y.types=[];for(let k=0;k<x;k++){const O=m.read(32);y.types.push(i.toBase64(O))}const S=m.readVarIntNum();S>=0?y.limit=S:y.limit=void 0;const P=m.readVarIntNum();P>=0?y.offset=P:y.offset=void 0;const _=m.readInt8();_===-1?y.privileged=void 0:y.privileged=_===1;const I=m.readInt8();if(I===-1)y.privilegedReason=void 0;else{const k=m.read(I);y.privilegedReason=i.toUTF8(k)}const C=await this.wallet.listCertificates(y,g),A=new i.Writer;A.writeVarIntNum(C.totalCertificates);for(const k of C.certificates){const B=new o.default(k.type,k.serialNumber,k.subject,k.certifier,k.revocationOutpoint,k.fields,k.signature).toBinary();A.writeVarIntNum(B.length),A.write(B)}const M=new i.Writer;return M.writeUInt8(0),M.write(A.toArray()),M.toArray()}case"proveCertificate":{const y={},b={},x=m.read(32);b.type=i.toBase64(x);const S=m.read(33);b.subject=i.toHex(S);const P=m.read(32);b.serialNumber=i.toBase64(P);const _=m.read(33);b.certifier=i.toHex(_),b.revocationOutpoint=this.decodeOutpoint(m);const I=m.readVarIntNum(),C=m.read(I);b.signature=i.toHex(C);const A=m.readVarIntNum();b.fields={};for(let V=0;V<A;V++){const G=m.readVarIntNum(),j=m.read(G),Q=i.toUTF8(j),se=m.readVarIntNum(),Z=m.read(se),ie=i.toUTF8(Z);b.fields[Q]=ie}y.certificate=b;const M=m.readVarIntNum();y.fieldsToReveal=[];for(let V=0;V<M;V++){const G=m.readVarIntNum(),j=m.read(G),Q=i.toUTF8(j);y.fieldsToReveal.push(Q)}const k=m.read(33);y.verifier=i.toHex(k);const O=m.readInt8();O===-1?y.privileged=void 0:y.privileged=O===1;const B=m.readInt8();if(B===-1)y.privilegedReason=void 0;else{const V=m.read(B);y.privilegedReason=i.toUTF8(V)}const $=await this.wallet.proveCertificate(y,g),U=new i.Writer,q=Object.entries($.keyringForVerifier);U.writeVarIntNum(q.length);for(const[V,G]of q){const j=i.toArray(V,"utf8");U.writeVarIntNum(j.length),U.write(j);const Q=i.toArray(G,"base64");U.writeVarIntNum(Q.length),U.write(Q)}const K=new i.Writer;return K.writeUInt8(0),K.write(U.toArray()),K.toArray()}case"relinquishCertificate":{const y={},b=m.read(32);y.type=i.toBase64(b);const x=m.read(32);y.serialNumber=i.toBase64(x);const S=m.read(33);y.certifier=i.toHex(S),await this.wallet.relinquishCertificate(y,g);const P=new i.Writer;return P.writeUInt8(0),P.toArray()}case"discoverByIdentityKey":{const y={},b=m.read(33);y.identityKey=i.toHex(b);const x=m.readVarIntNum();x>=0?y.limit=x:y.limit=void 0;const S=m.readVarIntNum();S>=0?y.offset=S:y.offset=void 0;const P=m.readInt8();P>=0?y.seekPermission=P===1:y.seekPermission=void 0;const _=await this.wallet.discoverByIdentityKey(y,g),I=this.serializeDiscoveryResult(_),C=new i.Writer;return C.writeUInt8(0),C.write(I),C.toArray()}case"discoverByAttributes":{const y={},b=m.readVarIntNum();y.attributes={};for(let A=0;A<b;A++){const M=m.readVarIntNum(),k=m.read(M),O=i.toUTF8(k),B=m.readVarIntNum(),$=m.read(B),U=i.toUTF8($);y.attributes[O]=U}const x=m.readVarIntNum();x>=0?y.limit=x:y.limit=void 0;const S=m.readVarIntNum();S>=0?y.offset=S:y.offset=void 0;const P=m.readInt8();P>=0?y.seekPermission=P===1:y.seekPermission=void 0;const _=await this.wallet.discoverByAttributes(y,g),I=this.serializeDiscoveryResult(_),C=new i.Writer;return C.writeUInt8(0),C.write(I),C.toArray()}default:throw new Error(`Method ${h} not implemented`)}}catch(d){const h=new i.Writer;h.writeUInt8(typeof d.code=="number"?d.code:1);const f=typeof d.message=="string"?d.message:"Unknown error",p=i.toArray(f,"utf8");h.writeVarIntNum(p.length),h.write(p);const g=typeof d.stack=="string"?d.stack:"",m=i.toArray(g,"utf8");return h.writeVarIntNum(m.length),h.write(m),h.toArray()}}decodeProtocolID(l){const u=l.readUInt8(),d=l.readVarIntNum(),h=l.read(d),f=i.toUTF8(h);return[u,f]}decodeString(l){const u=l.readVarIntNum(),d=l.read(u);return i.toUTF8(d)}decodeCounterparty(l){const u=l.readUInt8();if(u===11)return"self";if(u===12)return"anyone";if(u===0)return;{const d=l.read(32);return i.toHex([u,...d])}}serializeDiscoveryResult(l){const u=new i.Writer;u.writeVarIntNum(l.totalCertificates);for(const d of l.certificates){const f=new o.default(d.type,d.serialNumber,d.subject,d.certifier,d.revocationOutpoint,d.fields,d.signaturre).toBinary();u.writeVarIntNum(f.length),u.write(f);const p=i.toArray(d.certifierInfo.name,"utf8");u.writeVarIntNum(p.length),u.write(p);const g=i.toArray(d.certifierInfo.iconUrl,"utf8");u.writeVarIntNum(g.length),u.write(g);const m=i.toArray(d.certifierInfo.description,"utf8");u.writeVarIntNum(m.length),u.write(m),u.writeUInt8(d.certifierInfo.trust);const y=Object.entries(d.publiclyRevealedKeyring);u.writeVarIntNum(y.length);for(const[x,S]of y){const P=i.toArray(x,"utf8");u.writeVarIntNum(P.length),u.write(P);const _=i.toArray(S,"base64");u.writeVarIntNum(_.length),u.write(_)}const b=Object.entries(d.decryptedFields);u.writeVarIntNum(b.length);for(const[x,S]of b){const P=i.toArray(x,"utf8");u.writeVarIntNum(P.length),u.write(P);const _=i.toArray(S,"utf8");u.writeVarIntNum(_.length),u.write(_)}}return u.toArray()}decodeKeyRelatedParams(l){const u={};u.protocolID=this.decodeProtocolID(l);const d=l.readVarIntNum(),h=l.read(d);u.keyID=i.toUTF8(h),u.counterparty=this.decodeCounterparty(l);const f=l.readInt8();f===-1?u.privileged=void 0:u.privileged=f===1;const p=l.readInt8();if(p===-1)u.privilegedReason=void 0;else{const g=l.read(p);u.privilegedReason=i.toUTF8(g)}return u}};return sl.default=a,sl}var cB;function xj(){return cB||(cB=1,function(t){var e=ld&&ld.__createBinding||(Object.create?function(u,d,h,f){f===void 0&&(f=h);var p=Object.getOwnPropertyDescriptor(d,h);(!p||("get"in p?!d.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return d[h]}}),Object.defineProperty(u,f,p)}:function(u,d,h,f){f===void 0&&(f=h),u[f]=d[h]}),n=ld&&ld.__exportStar||function(u,d){for(var h in u)h!=="default"&&!Object.prototype.hasOwnProperty.call(d,h)&&e(d,u,h)},r=ld&&ld.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(t,"__esModule",{value:!0}),t.HTTPWalletJSON=t.HTTPWalletWire=t.WalletWireProcessor=t.WalletWireTransceiver=t.XDM=t.WindowCWISubstrate=void 0;var i=hj();Object.defineProperty(t,"WindowCWISubstrate",{enumerable:!0,get:function(){return r(i).default}});var s=pj();Object.defineProperty(t,"XDM",{enumerable:!0,get:function(){return r(s).default}}),n(bbe(),t),n(EP(),t);var o=mj();Object.defineProperty(t,"WalletWireTransceiver",{enumerable:!0,get:function(){return r(o).default}});var a=xbe();Object.defineProperty(t,"WalletWireProcessor",{enumerable:!0,get:function(){return r(a).default}});var c=gj();Object.defineProperty(t,"HTTPWalletWire",{enumerable:!0,get:function(){return r(c).default}});var l=vj();Object.defineProperty(t,"HTTPWalletJSON",{enumerable:!0,get:function(){return r(l).default}})}(ld)),ld}var uB;function TP(){return uB||(uB=1,function(t){var e=ad&&ad.__createBinding||(Object.create?function(l,u,d,h){h===void 0&&(h=d);var f=Object.getOwnPropertyDescriptor(u,d);(!f||("get"in f?!u.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return u[d]}}),Object.defineProperty(l,h,f)}:function(l,u,d,h){h===void 0&&(h=d),l[h]=u[d]}),n=ad&&ad.__exportStar||function(l,u){for(var d in l)d!=="default"&&!Object.prototype.hasOwnProperty.call(u,d)&&e(u,l,d)},r=ad&&ad.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(t,"__esModule",{value:!0}),t.WERR_REVIEW_ACTIONS=t.WalletErrors=t.WalletClient=t.ProtoWallet=t.CachedKeyDeriver=void 0,n(dj(),t),n(UO(),t);var i=vbe();Object.defineProperty(t,"CachedKeyDeriver",{enumerable:!0,get:function(){return r(i).default}});var s=fj();Object.defineProperty(t,"ProtoWallet",{enumerable:!0,get:function(){return r(s).default}});var o=bj();Object.defineProperty(t,"WalletClient",{enumerable:!0,get:function(){return r(o).default}});var a=J2();Object.defineProperty(t,"WalletErrors",{enumerable:!0,get:function(){return r(a).default}});var c=yj();Object.defineProperty(t,"WERR_REVIEW_ACTIONS",{enumerable:!0,get:function(){return r(c).default}}),n(J2(),t),n(xj(),t)}(ad)),ad}var Ep={},cd={},ba={},dB;function wbe(){if(dB)return ba;dB=1;var t=ba&&ba.__createBinding||(Object.create?function(l,u,d,h){h===void 0&&(h=d);var f=Object.getOwnPropertyDescriptor(u,d);(!f||("get"in f?!u.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return u[d]}}),Object.defineProperty(l,h,f)}:function(l,u,d,h){h===void 0&&(h=d),l[h]=u[d]}),e=ba&&ba.__setModuleDefault||(Object.create?function(l,u){Object.defineProperty(l,"default",{enumerable:!0,value:u})}:function(l,u){l.default=u}),n=ba&&ba.__importStar||function(l){if(l&&l.__esModule)return l;var u={};if(l!=null)for(var d in l)d!=="default"&&Object.prototype.hasOwnProperty.call(l,d)&&t(u,l,d);return e(u,l),u},r=ba&&ba.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(ba,"__esModule",{value:!0}),ba.MasterCertificate=void 0;const i=r(xv()),s=n(Yn()),o=r(vP()),a=r(Ao());let c=class wj extends i.default{constructor(u,d,h,f,p,g,m,y){super(u,d,h,f,p,g,y);for(const b of Object.keys(g))if(m[b]===void 0||m[b]==="")throw new Error(`Master keyring must contain a value for every field. Missing or empty key for field: "${b}".`);this.masterKeyring=m}static async createCertificateFields(u,d,h,f,p){const g={},m={};for(const[y,b]of Object.entries(h)){const x=o.default.fromRandom(),S=x.encrypt(s.toArray(b,"utf8"));g[y]=s.toBase64(S);const{ciphertext:P}=await u.encrypt({plaintext:x.toArray(),...i.default.getCertificateFieldEncryptionDetails(y),counterparty:d,privileged:f,privilegedReason:p});m[y]=s.toBase64(P)}return{certificateFields:g,masterKeyring:m}}static async createKeyringForVerifier(u,d,h,f,p,g,m,y,b){if(!Array.isArray(p))throw new Error("fieldsToReveal must be an array of strings");const x={};for(const S of p){if(f[S]===void 0||f[S]===null||f[S]==="")throw new Error(`Fields to reveal must be a subset of the certificate fields. Missing the "${S}" field.`);const P=(await this.decryptField(u,g,S,f[S],d,y,b)).fieldRevelationKey,{ciphertext:_}=await u.encrypt({plaintext:P,...i.default.getCertificateFieldEncryptionDetails(S,m),counterparty:h,privileged:y,privilegedReason:b});x[S]=s.toBase64(_)}return x}static async issueCertificateForSubject(u,d,h,f,p=async m=>"Certificate revocation not tracked.",g){const m=g??s.toBase64((0,a.default)(32)),{certificateFields:y,masterKeyring:b}=await this.createCertificateFields(u,d,h),x=await p(m),S=new wj(f,m,d,(await u.getPublicKey({identityKey:!0})).publicKey,x,y,b);return await S.sign(u),S}static async decryptFields(u,d,h,f,p,g){if(d==null||Object.keys(d).length===0)throw new Error("A MasterCertificate must have a valid masterKeyring!");try{const m={};for(const y of Object.keys(h))m[y]=(await this.decryptField(u,d,y,h[y],f,p,g)).decryptedFieldValue;return m}catch{throw new Error("Failed to decrypt all master certificate fields.")}}static async decryptField(u,d,h,f,p,g,m){if(d==null||Object.keys(d).length===0)throw new Error("A MasterCertificate must have a valid masterKeyring!");try{const{plaintext:y}=await u.decrypt({ciphertext:s.toArray(d[h],"base64"),...i.default.getCertificateFieldEncryptionDetails(h),counterparty:p,privileged:g,privilegedReason:m}),b=new o.default(y).decrypt(s.toArray(f,"base64"));return{fieldRevelationKey:y,decryptedFieldValue:s.toUTF8(b)}}catch{throw new Error("Failed to decrypt certificate field!")}}};return ba.MasterCertificate=c,ba}var xa={},fB;function $O(){if(fB)return xa;fB=1;var t=xa&&xa.__createBinding||(Object.create?function(c,l,u,d){d===void 0&&(d=u);var h=Object.getOwnPropertyDescriptor(l,u);(!h||("get"in h?!l.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(c,d,h)}:function(c,l,u,d){d===void 0&&(d=u),c[d]=l[u]}),e=xa&&xa.__setModuleDefault||(Object.create?function(c,l){Object.defineProperty(c,"default",{enumerable:!0,value:l})}:function(c,l){c.default=l}),n=xa&&xa.__importStar||function(c){if(c&&c.__esModule)return c;var l={};if(c!=null)for(var u in c)u!=="default"&&Object.prototype.hasOwnProperty.call(c,u)&&t(l,c,u);return e(l,c),l},r=xa&&xa.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(xa,"__esModule",{value:!0}),xa.VerifiableCertificate=void 0;const i=r(vP()),s=n(Yn()),o=r(xv());let a=class extends o.default{constructor(l,u,d,h,f,p,g,m,y){super(l,u,d,h,f,p,m),this.keyring=g,this.decryptedFields=y}async decryptFields(l,u,d){if(this.keyring==null||Object.keys(this.keyring).length===0)throw new Error("A keyring is required to decrypt certificate fields for the verifier.");try{const h={};for(const f in this.keyring){const{plaintext:p}=await l.decrypt({ciphertext:s.toArray(this.keyring[f],"base64"),...o.default.getCertificateFieldEncryptionDetails(f,this.serialNumber),counterparty:this.subject,privileged:u,privilegedReason:d}),g=new i.default(p).decrypt(s.toArray(this.fields[f],"base64"));h[f]=s.toUTF8(g)}return h}catch(h){throw new Error(`Failed to decrypt selectively revealed certificate fields using keyring: ${String(h instanceof Error?h.message:h)}`)}}};return xa.VerifiableCertificate=a,xa}var Tp={},hB;function _be(){if(hB)return Tp;hB=1;var t=Tp&&Tp.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Tp,"__esModule",{value:!0}),Tp.CompletedProtoWallet=void 0;const e=t(bv()),n=TP();let r=class extends n.ProtoWallet{constructor(s){if(super(s),s instanceof n.KeyDeriver)this.keyDeriver=s;else if(typeof s=="string"||s instanceof e.default)this.keyDeriver=new n.KeyDeriver(s);else throw new Error("Invalid key deriver provided")}async isAuthenticated(){throw new Error("not implemented")}async waitForAuthentication(){throw new Error("not implemented")}async getNetwork(){throw new Error("not implemented")}async getVersion(){throw new Error("not implemented")}async getPublicKey(s){if(s.privileged===!0)throw new Error("no privilege support");if(s.identityKey===!0){if(this.keyDeriver===null||this.keyDeriver===void 0)throw new Error("keyDeriver is not initialized");return{publicKey:this.keyDeriver.rootKey.toPublicKey().toString()}}else{if(s.protocolID==null||typeof s.keyID!="string"||s.keyID.trim()==="")throw new Error("protocolID and keyID are required if identityKey is false or undefined.");if(this.keyDeriver===null||this.keyDeriver===void 0)throw new Error("keyDeriver is not initialized");return{publicKey:this.keyDeriver.derivePublicKey(s.protocolID,s.keyID,typeof s.counterparty=="string"&&s.counterparty.trim()!==""?s.counterparty:"self",!!s.forSelf).toString()}}}async createAction(){throw new Error("not implemented")}async signAction(){throw new Error("not implemented")}async abortAction(){throw new Error("not implemented")}async listActions(){throw new Error("not implemented")}async internalizeAction(){throw new Error("not implemented")}async listOutputs(){throw new Error("not implemented")}async relinquishOutput(){throw new Error("not implemented")}async acquireCertificate(){throw new Error("not implemented")}async listCertificates(){throw new Error("not implemented")}async proveCertificate(){throw new Error("not implemented")}async relinquishCertificate(){throw new Error("not implemented")}async discoverByIdentityKey(){throw new Error("not implemented")}async discoverByAttributes(){throw new Error("not implemented")}async getHeight(){throw new Error("not implemented")}async getHeaderForHeight(){throw new Error("not implemented")}};return Tp.CompletedProtoWallet=r,Tp}var pB;function Sbe(){return pB||(pB=1,function(t){var e=cd&&cd.__createBinding||(Object.create?function(s,o,a,c){c===void 0&&(c=a);var l=Object.getOwnPropertyDescriptor(o,a);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(s,c,l)}:function(s,o,a,c){c===void 0&&(c=a),s[c]=o[a]}),n=cd&&cd.__exportStar||function(s,o){for(var a in s)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&e(o,s,a)},r=cd&&cd.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(t,"__esModule",{value:!0}),t.Certificate=void 0;var i=xv();Object.defineProperty(t,"Certificate",{enumerable:!0,get:function(){return r(i).default}}),n(wbe(),t),n($O(),t),n(_be(),t)}(cd)),cd}var wa={},u1={},mB;function zO(){if(mB)return u1;mB=1,Object.defineProperty(u1,"__esModule",{value:!0}),u1.SessionManager=void 0;let t=class{constructor(){this.sessionNonceToSession=new Map,this.identityKeyToNonces=new Map}addSession(n){if(typeof n.sessionNonce!="string")throw new Error("Invalid session: sessionNonce is required to add a session.");if(this.sessionNonceToSession.set(n.sessionNonce,n),typeof n.peerIdentityKey=="string"){let r=this.identityKeyToNonces.get(n.peerIdentityKey);r==null&&(r=new Set,this.identityKeyToNonces.set(n.peerIdentityKey,r)),r.add(n.sessionNonce)}}updateSession(n){this.removeSession(n),this.addSession(n)}getSession(n){var r,i;const s=this.sessionNonceToSession.get(n);if(s!=null)return s;const o=this.identityKeyToNonces.get(n);if(o==null||o.size===0)return;let a;for(const c of o){const l=this.sessionNonceToSession.get(c);l!=null&&(a==null||((r=l.lastUpdate)!==null&&r!==void 0?r:0)>((i=a.lastUpdate)!==null&&i!==void 0?i:0))&&(a=l)}return a}removeSession(n){var r;if(typeof n.sessionNonce=="string"&&this.sessionNonceToSession.delete(n.sessionNonce),typeof n.peerIdentityKey=="string"){const i=this.identityKeyToNonces.get(n.peerIdentityKey);i!=null&&(i.delete((r=n.sessionNonce)!==null&&r!==void 0?r:""),i.size===0&&this.identityKeyToNonces.delete(n.peerIdentityKey))}}hasSession(n){if(this.sessionNonceToSession.has(n))return!0;const i=this.identityKeyToNonces.get(n);return i!=null&&i.size>0}};return u1.SessionManager=t,u1}var Ip={},ic={},gB;function Ebe(){if(gB)return ic;gB=1;var t=ic&&ic.__createBinding||(Object.create?function(s,o,a,c){c===void 0&&(c=a);var l=Object.getOwnPropertyDescriptor(o,a);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(s,c,l)}:function(s,o,a,c){c===void 0&&(c=a),s[c]=o[a]}),e=ic&&ic.__setModuleDefault||(Object.create?function(s,o){Object.defineProperty(s,"default",{enumerable:!0,value:o})}:function(s,o){s.default=o}),n=ic&&ic.__importStar||function(s){if(s&&s.__esModule)return s;var o={};if(s!=null)for(var a in s)a!=="default"&&Object.prototype.hasOwnProperty.call(s,a)&&t(o,s,a);return e(o,s),o};Object.defineProperty(ic,"__esModule",{value:!0}),ic.verifyNonce=void 0;const r=n(Yn());async function i(s,o,a="self"){const c=r.toArray(s,"base64"),l=c.slice(0,16),u=c.slice(16),{valid:d}=await o.verifyHmac({data:l,hmac:u,protocolID:[2,"server hmac"],keyID:r.toUTF8(l),counterparty:a});return d}return ic.verifyNonce=i,ic}var _a={},yB;function _j(){if(yB)return _a;yB=1;var t=_a&&_a.__createBinding||(Object.create?function(a,c,l,u){u===void 0&&(u=l);var d=Object.getOwnPropertyDescriptor(c,l);(!d||("get"in d?!c.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return c[l]}}),Object.defineProperty(a,u,d)}:function(a,c,l,u){u===void 0&&(u=l),a[u]=c[l]}),e=_a&&_a.__setModuleDefault||(Object.create?function(a,c){Object.defineProperty(a,"default",{enumerable:!0,value:c})}:function(a,c){a.default=c}),n=_a&&_a.__importStar||function(a){if(a&&a.__esModule)return a;var c={};if(a!=null)for(var l in a)l!=="default"&&Object.prototype.hasOwnProperty.call(a,l)&&t(c,a,l);return e(c,a),c},r=_a&&_a.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(_a,"__esModule",{value:!0}),_a.createNonce=void 0;const i=n(Yn()),s=r(Ao());async function o(a,c="self"){const l=(0,s.default)(16),{hmac:u}=await a.createHmac({protocolID:[2,"server hmac"],keyID:i.toUTF8(l),data:l,counterparty:c}),d=[...l,...u];return i.toBase64(d)}return _a.createNonce=o,_a}var d1={},vB;function Tbe(){if(vB)return d1;vB=1,Object.defineProperty(d1,"__esModule",{value:!0}),d1.getVerifiableCertificates=void 0;const t=$O(),e=async(n,r,i)=>{const s=await n.listCertificates({certifiers:r.certifiers,types:Object.keys(r.types)});return await Promise.all(s.certificates.map(async o=>{const{keyringForVerifier:a}=await n.proveCertificate({certificate:o,fieldsToReveal:r.types[o.type],verifier:i});return new t.VerifiableCertificate(o.type,o.serialNumber,o.subject,o.certifier,o.revocationOutpoint,o.fields,a,o.signature)}))};return d1.getVerifiableCertificates=e,d1}var f1={},bB;function Ibe(){if(bB)return f1;bB=1,Object.defineProperty(f1,"__esModule",{value:!0}),f1.validateCertificates=void 0;const t=$O(),e=async(n,r,i)=>{if(r.certificates==null||r.certificates.length===0)throw new Error("No certificates were provided in the AuthMessage.");await Promise.all(r.certificates.map(async s=>{if(s.subject!==r.identityKey)throw new Error(`The subject of one of your certificates ("${s.subject}") is not the same as the request sender ("${r.identityKey}").`);const o=new t.VerifiableCertificate(s.type,s.serialNumber,s.subject,s.certifier,s.revocationOutpoint,s.fields,s.keyring,s.signature);if(!await o.verify())throw new Error(`The signature for the certificate with serial number ${o.serialNumber} is invalid!`);if(i!=null){const{certifiers:c,types:l}=i;if(!c.includes(o.certifier))throw new Error(`Certificate with serial number ${o.serialNumber} has an unrequested certifier: ${o.certifier}`);if(l[o.type]==null)throw new Error(`Certificate with type ${o.type} was not requested`)}await o.decryptFields(n)}))};return f1.validateCertificates=e,f1}var xB;function HO(){return xB||(xB=1,function(t){var e=Ip&&Ip.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,a)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=Ip&&Ip.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(Ebe(),t),n(_j(),t),n(Tbe(),t),n(Ibe(),t)}(Ip)),Ip}var wB;function Sj(){if(wB)return wa;wB=1;var t=wa&&wa.__createBinding||(Object.create?function(u,d,h,f){f===void 0&&(f=h);var p=Object.getOwnPropertyDescriptor(d,h);(!p||("get"in p?!d.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return d[h]}}),Object.defineProperty(u,f,p)}:function(u,d,h,f){f===void 0&&(f=h),u[f]=d[h]}),e=wa&&wa.__setModuleDefault||(Object.create?function(u,d){Object.defineProperty(u,"default",{enumerable:!0,value:d})}:function(u,d){u.default=d}),n=wa&&wa.__importStar||function(u){if(u&&u.__esModule)return u;var d={};if(u!=null)for(var h in u)h!=="default"&&Object.prototype.hasOwnProperty.call(u,h)&&t(d,u,h);return e(d,u),d},r=wa&&wa.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(wa,"__esModule",{value:!0}),wa.Peer=void 0;const i=zO(),s=HO(),o=r(Ao()),a=n(Yn()),c="0.1";let l=class{constructor(d,h,f,p,g){this.onGeneralMessageReceivedCallbacks=new Map,this.onCertificatesReceivedCallbacks=new Map,this.onCertificateRequestReceivedCallbacks=new Map,this.onInitialResponseReceivedCallbacks=new Map,this.callbackIdCounter=0,this.autoPersistLastSession=!0,this.wallet=d,this.transport=h,this.certificatesToRequest=f??{certifiers:[],types:{}},this.transport.onData(this.handleIncomingMessage.bind(this)).catch(m=>{throw m}),this.sessionManager=p??new i.SessionManager,g===!1?this.autoPersistLastSession=!1:this.autoPersistLastSession=!0}async toPeer(d,h,f){var p,g;this.autoPersistLastSession&&typeof this.lastInteractedWithPeer=="string"&&typeof h!="string"&&(h=this.lastInteractedWithPeer);const m=await this.getAuthenticatedSession(h,f),y=a.toBase64((0,o.default)(32)),{signature:b}=await this.wallet.createSignature({data:d,protocolID:[2,"auth message signature"],keyID:`${y} ${(p=m.peerNonce)!==null&&p!==void 0?p:""}`,counterparty:m.peerIdentityKey}),x={version:c,messageType:"general",identityKey:(await this.wallet.getPublicKey({identityKey:!0})).publicKey,nonce:y,yourNonce:m.peerNonce,payload:d,signature:b};m.lastUpdate=Date.now(),this.sessionManager.updateSession(m);try{await this.transport.send(x)}catch(S){const P=new Error(`Failed to send message to peer ${(g=m.peerIdentityKey)!==null&&g!==void 0?g:"unknown"}: ${String(S.message)}`);throw P.stack=S.stack,P}}async requestCertificates(d,h,f=1e4){var p,g;this.autoPersistLastSession&&typeof this.lastInteractedWithPeer=="string"&&typeof h!="string"&&(h=this.lastInteractedWithPeer);const m=await this.getAuthenticatedSession(h,f),y=a.toBase64((0,o.default)(32)),{signature:b}=await this.wallet.createSignature({data:a.toArray(JSON.stringify(d),"utf8"),protocolID:[2,"auth message signature"],keyID:`${y} ${(p=m.peerNonce)!==null&&p!==void 0?p:""}`,counterparty:m.peerIdentityKey}),x={version:c,messageType:"certificateRequest",identityKey:(await this.wallet.getPublicKey({identityKey:!0})).publicKey,nonce:y,initialNonce:m.sessionNonce,yourNonce:m.peerNonce,requestedCertificates:d,signature:b};m.lastUpdate=Date.now(),this.sessionManager.updateSession(m);try{await this.transport.send(x)}catch(S){throw new Error(`Failed to send certificate request message to peer ${(g=m.peerIdentityKey)!==null&&g!==void 0?g:"unknown"}: ${String(S.message)}`)}}async getAuthenticatedSession(d,h){if(this.transport===void 0)throw new Error("Peer transport is not connected!");let f;if(typeof d=="string"&&(f=this.sessionManager.getSession(d)),f==null||!f.isAuthenticated){const p=await this.initiateHandshake(d,h);if(f=this.sessionManager.getSession(p),f==null||!f.isAuthenticated)throw new Error("Unable to establish mutual authentication with peer!")}return f}listenForGeneralMessages(d){const h=this.callbackIdCounter++;return this.onGeneralMessageReceivedCallbacks.set(h,d),h}stopListeningForGeneralMessages(d){this.onGeneralMessageReceivedCallbacks.delete(d)}listenForCertificatesReceived(d){const h=this.callbackIdCounter++;return this.onCertificatesReceivedCallbacks.set(h,d),h}stopListeningForCertificatesReceived(d){this.onCertificatesReceivedCallbacks.delete(d)}listenForCertificatesRequested(d){const h=this.callbackIdCounter++;return this.onCertificateRequestReceivedCallbacks.set(h,d),h}stopListeningForCertificatesRequested(d){this.onCertificateRequestReceivedCallbacks.delete(d)}async initiateHandshake(d,h=1e4){const f=await(0,s.createNonce)(this.wallet),p=Date.now();this.sessionManager.addSession({isAuthenticated:!1,sessionNonce:f,peerIdentityKey:d,lastUpdate:p});const g={version:c,messageType:"initialRequest",identityKey:(await this.wallet.getPublicKey({identityKey:!0})).publicKey,initialNonce:f,requestedCertificates:this.certificatesToRequest};return await this.transport.send(g),await this.waitForInitialResponse(f,h)}async waitForInitialResponse(d,h=1e4){return await new Promise((f,p)=>{const g=this.listenForInitialResponse(d,y=>{clearTimeout(m),this.stopListeningForInitialResponses(g),f(y)}),m=setTimeout(()=>{this.stopListeningForInitialResponses(g),p(new Error("Initial response timed out."))},h)})}listenForInitialResponse(d,h){const f=this.callbackIdCounter++;return this.onInitialResponseReceivedCallbacks.set(f,{callback:h,sessionNonce:d}),f}stopListeningForInitialResponses(d){this.onInitialResponseReceivedCallbacks.delete(d)}async handleIncomingMessage(d){if(typeof d.version!="string"||d.version!==c)throw new Error(`Invalid or unsupported message auth version! Received: ${d.version}, expected: ${c}`);switch(d.messageType){case"initialRequest":await this.processInitialRequest(d);break;case"initialResponse":await this.processInitialResponse(d);break;case"certificateRequest":await this.processCertificateRequest(d);break;case"certificateResponse":await this.processCertificateResponse(d);break;case"general":await this.processGeneralMessage(d);break;default:throw new Error(`Unknown message type of ${String(d.messageType)} from ${String(d.identityKey)}`)}}async processInitialRequest(d){if(typeof d.identityKey!="string"||typeof d.initialNonce!="string"||d.initialNonce==="")throw new Error("Missing required fields in initialRequest message.");const h=await(0,s.createNonce)(this.wallet),f=Date.now();this.sessionManager.addSession({isAuthenticated:!0,sessionNonce:h,peerNonce:d.initialNonce,peerIdentityKey:d.identityKey,lastUpdate:f});let p;d.requestedCertificates!=null&&Array.isArray(d.requestedCertificates.certifiers)&&d.requestedCertificates.certifiers.length>0&&(this.onCertificateRequestReceivedCallbacks.size>0?this.onCertificateRequestReceivedCallbacks.forEach(y=>{y(d.identityKey,d.requestedCertificates)}):p=await(0,s.getVerifiableCertificates)(this.wallet,d.requestedCertificates,d.identityKey));const{signature:g}=await this.wallet.createSignature({data:a.toArray(d.initialNonce+h,"base64"),protocolID:[2,"auth message signature"],keyID:`${d.initialNonce} ${h}`,counterparty:d.identityKey}),m={version:c,messageType:"initialResponse",identityKey:(await this.wallet.getPublicKey({identityKey:!0})).publicKey,initialNonce:h,yourNonce:d.initialNonce,certificates:p,requestedCertificates:this.certificatesToRequest,signature:g};this.lastInteractedWithPeer===void 0&&(this.lastInteractedWithPeer=d.identityKey),await this.transport.send(m)}async processInitialResponse(d){var h,f,p,g,m,y,b;if(!await(0,s.verifyNonce)(d.yourNonce,this.wallet))throw new Error(`Initial response nonce verification failed from peer: ${d.identityKey}`);const S=this.sessionManager.getSession(d.yourNonce);if(S==null)throw new Error(`Peer session not found for peer: ${d.identityKey}`);const P=a.toArray(((h=S.sessionNonce)!==null&&h!==void 0?h:"")+((f=d.initialNonce)!==null&&f!==void 0?f:""),"base64"),{valid:_}=await this.wallet.verifySignature({data:P,signature:d.signature,protocolID:[2,"auth message signature"],keyID:`${(p=S.sessionNonce)!==null&&p!==void 0?p:""} ${(g=d.initialNonce)!==null&&g!==void 0?g:""}`,counterparty:d.identityKey});if(!_)throw new Error(`Unable to verify initial response signature for peer: ${d.identityKey}`);if(S.peerNonce=d.initialNonce,S.peerIdentityKey=d.identityKey,S.isAuthenticated=!0,S.lastUpdate=Date.now(),this.sessionManager.updateSession(S),((y=(m=this.certificatesToRequest)===null||m===void 0?void 0:m.certifiers)===null||y===void 0?void 0:y.length)>0&&((b=d.certificates)===null||b===void 0?void 0:b.length)>0&&(await(0,s.validateCertificates)(this.wallet,d,this.certificatesToRequest),this.onCertificatesReceivedCallbacks.forEach(I=>I(d.identityKey,d.certificates))),this.lastInteractedWithPeer=d.identityKey,this.onInitialResponseReceivedCallbacks.forEach(I=>{I.sessionNonce===S.sessionNonce&&I.callback(S.sessionNonce)}),d.requestedCertificates!=null&&Array.isArray(d.requestedCertificates.certifiers)&&d.requestedCertificates.certifiers.length>0)if(this.onCertificateRequestReceivedCallbacks.size>0)this.onCertificateRequestReceivedCallbacks.forEach(I=>{I(d.identityKey,d.requestedCertificates)});else{const I=await(0,s.getVerifiableCertificates)(this.wallet,d.requestedCertificates,d.identityKey);await this.sendCertificateResponse(d.identityKey,I)}}async processCertificateRequest(d){var h,f;if(!await(0,s.verifyNonce)(d.yourNonce,this.wallet))throw new Error(`Unable to verify nonce for certificate request message from: ${d.identityKey}`);const g=this.sessionManager.getSession(d.yourNonce);if(g==null)throw new Error(`Session not found for nonce: ${d.yourNonce}`);const{valid:m}=await this.wallet.verifySignature({data:a.toArray(JSON.stringify(d.requestedCertificates),"utf8"),signature:d.signature,protocolID:[2,"auth message signature"],keyID:`${(h=d.nonce)!==null&&h!==void 0?h:""} ${(f=g.sessionNonce)!==null&&f!==void 0?f:""}`,counterparty:g.peerIdentityKey});if(!m)throw new Error(`Invalid signature in certificate request message from ${g.peerIdentityKey}`);if(g.lastUpdate=Date.now(),this.sessionManager.updateSession(g),d.requestedCertificates!=null&&Array.isArray(d.requestedCertificates.certifiers)&&d.requestedCertificates.certifiers.length>0)if(this.onCertificateRequestReceivedCallbacks.size>0)this.onCertificateRequestReceivedCallbacks.forEach(y=>{y(d.identityKey,d.requestedCertificates)});else{const y=await(0,s.getVerifiableCertificates)(this.wallet,d.requestedCertificates,d.identityKey);await this.sendCertificateResponse(d.identityKey,y)}}async sendCertificateResponse(d,h){var f,p;const g=await this.getAuthenticatedSession(d),m=a.toBase64((0,o.default)(32)),{signature:y}=await this.wallet.createSignature({data:a.toArray(JSON.stringify(h),"utf8"),protocolID:[2,"auth message signature"],keyID:`${m} ${(f=g.peerNonce)!==null&&f!==void 0?f:""}`,counterparty:g.peerIdentityKey}),b={version:c,messageType:"certificateResponse",identityKey:(await this.wallet.getPublicKey({identityKey:!0})).publicKey,nonce:m,initialNonce:g.sessionNonce,yourNonce:g.peerNonce,certificates:h,signature:y};g.lastUpdate=Date.now(),this.sessionManager.updateSession(g);try{await this.transport.send(b)}catch(x){const S=x instanceof Error?x.message:String(x);throw new Error(`Failed to send certificate response message to peer ${(p=g.peerIdentityKey)!==null&&p!==void 0?p:"unknown"}: ${S}`)}}async processCertificateResponse(d){var h,f;if(!await(0,s.verifyNonce)(d.yourNonce,this.wallet))throw new Error(`Unable to verify nonce for certificate response from: ${d.identityKey}`);const g=this.sessionManager.getSession(d.yourNonce);if(g==null)throw new Error(`Session not found for nonce: ${d.yourNonce}`);const{valid:m}=await this.wallet.verifySignature({data:a.toArray(JSON.stringify(d.certificates),"utf8"),signature:d.signature,protocolID:[2,"auth message signature"],keyID:`${(h=d.nonce)!==null&&h!==void 0?h:""} ${(f=g.sessionNonce)!==null&&f!==void 0?f:""}`,counterparty:d.identityKey});if(!m)throw new Error(`Unable to verify certificate response signature for peer: ${d.identityKey}`);await(0,s.validateCertificates)(this.wallet,d,d.requestedCertificates),this.onCertificatesReceivedCallbacks.forEach(y=>{var b;y(d.identityKey,(b=d.certificates)!==null&&b!==void 0?b:[])}),g.lastUpdate=Date.now(),this.sessionManager.updateSession(g)}async processGeneralMessage(d){var h,f;if(!await(0,s.verifyNonce)(d.yourNonce,this.wallet))throw new Error(`Unable to verify nonce for general message from: ${d.identityKey}`);const g=this.sessionManager.getSession(d.yourNonce);if(g==null)throw new Error(`Session not found for nonce: ${d.yourNonce}`);const{valid:m}=await this.wallet.verifySignature({data:d.payload,signature:d.signature,protocolID:[2,"auth message signature"],keyID:`${(h=d.nonce)!==null&&h!==void 0?h:""} ${(f=g.sessionNonce)!==null&&f!==void 0?f:""}`,counterparty:g.peerIdentityKey});if(!m)throw new Error(`Invalid signature in generalMessage from ${g.peerIdentityKey}`);g.lastUpdate=Date.now(),this.sessionManager.updateSession(g),this.lastInteractedWithPeer=d.identityKey,this.onGeneralMessageReceivedCallbacks.forEach(y=>{var b;y(d.identityKey,(b=d.payload)!==null&&b!==void 0?b:[])})}};return wa.Peer=l,wa}var eA={},_B;function Pbe(){return _B||(_B=1,Object.defineProperty(eA,"__esModule",{value:!0})),eA}var Pp={},Sa={},sc={},SB;function Ej(){if(SB)return sc;SB=1;var t=sc&&sc.__createBinding||(Object.create?function(o,a,c,l){l===void 0&&(l=c);var u=Object.getOwnPropertyDescriptor(a,c);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[c]}}),Object.defineProperty(o,l,u)}:function(o,a,c,l){l===void 0&&(l=c),o[l]=a[c]}),e=sc&&sc.__setModuleDefault||(Object.create?function(o,a){Object.defineProperty(o,"default",{enumerable:!0,value:a})}:function(o,a){o.default=a}),n=sc&&sc.__importStar||function(o){if(o&&o.__esModule)return o;var a={};if(o!=null)for(var c in o)c!=="default"&&Object.prototype.hasOwnProperty.call(o,c)&&t(a,o,c);return e(a,o),a};Object.defineProperty(sc,"__esModule",{value:!0}),sc.SimplifiedFetchTransport=void 0;const r=n(Yn()),i=typeof window<"u"?fetch.bind(window):fetch;let s=class{constructor(a,c=i){this.fetchClient=c,this.baseUrl=a}async send(a){if(!this.onDataCallback)throw new Error("Listen before you start speaking. God gave you two ears and one mouth for a reason.");if(a.messageType!=="general")return new Promise(async(c,l)=>{try{const u=this.fetchClient(`${this.baseUrl}/.well-known/auth`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});a.messageType!=="initialRequest"&&c();const d=await u;if(d.ok&&this.onDataCallback){const h=await d.json();this.onDataCallback(h)}else throw new Error("HTTP server failed to authenticate");a.messageType==="initialRequest"&&c()}catch(u){l(u);return}});{const c=this.deserializeRequestPayload(a.payload),l=`${this.baseUrl}${c.urlPostfix}`;let u=c;if(typeof c.headers!="object"&&(u.headers={}),u.headers["x-bsv-auth-version"]=a.version,u.headers["x-bsv-auth-identity-key"]=a.identityKey,u.headers["x-bsv-auth-nonce"]=a.nonce,u.headers["x-bsv-auth-your-nonce"]=a.yourNonce,u.headers["x-bsv-auth-signature"]=r.toHex(a.signature),u.headers["x-bsv-auth-request-id"]=c.requestId,u.body){const m=u.headers;if(!m["content-type"])throw new Error("Content-Type header is required for requests with a body.");const y=m["content-type"];y.includes("application/json")||y.includes("application/x-www-form-urlencoded")||y.includes("text/plain")?u.body=r.toUTF8(u.body):u.body=new Uint8Array(u.body)}const d=await this.fetchClient(l,{method:u.method,headers:u.headers,body:u.body});if(d.status===500&&!d.headers.get("x-bsv-auth-request-id")){const m=await d.json();throw new Error(`HTTP ${d.status} - ${JSON.stringify(m)}`)}const h=await d.arrayBuffer(),f=new r.Writer;f.write(r.toArray(d.headers.get("x-bsv-auth-request-id"),"base64")),f.writeVarIntNum(d.status);const p=[];d.headers.forEach((m,y)=>{const b=y.toLowerCase();(b.startsWith("x-bsv-")||b==="authorization")&&!b.startsWith("x-bsv-auth")&&p.push([b,m])}),p.sort(([m],[y])=>m.localeCompare(y)),f.writeVarIntNum(p.length);for(let m=0;m<p.length;m++){const y=r.toArray(p[m][0],"utf8");f.writeVarIntNum(y.length),f.write(y);const b=r.toArray(p[m][1],"utf8");f.writeVarIntNum(b.length),f.write(b)}if(h){const m=Array.from(new Uint8Array(h));f.writeVarIntNum(m.length),f.write(m)}else f.writeVarIntNum(-1);const g={version:d.headers.get("x-bsv-auth-version"),messageType:d.headers.get("x-bsv-auth-message-type")==="certificateRequest"?"certificateRequest":"general",identityKey:d.headers.get("x-bsv-auth-identity-key"),nonce:d.headers.get("x-bsv-auth-nonce"),yourNonce:d.headers.get("x-bsv-auth-your-nonce"),requestedCertificates:JSON.parse(d.headers.get("x-bsv-auth-requested-certificates")),payload:f.toArray(),signature:r.toArray(d.headers.get("x-bsv-auth-signature"),"hex")};if(!g.version)throw new Error("HTTP server failed to authenticate");this.onDataCallback(g)}}async onData(a){this.onDataCallback=c=>{a(c)}}deserializeRequestPayload(a){const c=new r.Reader(a),l=r.toBase64(c.read(32)),u=c.readVarIntNum();let d="GET";u>0&&(d=r.toUTF8(c.read(u)));const h=c.readVarIntNum();let f="";h>0&&(f=r.toUTF8(c.read(h)));const p=c.readVarIntNum();let g="";p>0&&(g=r.toUTF8(c.read(p)));const m={},y=c.readVarIntNum();if(y>0)for(let S=0;S<y;S++){const P=c.readVarIntNum(),_=c.read(P),I=r.toUTF8(_),C=c.readVarIntNum(),A=c.read(C),M=r.toUTF8(A);m[I]=M}let b;const x=c.readVarIntNum();return x>0&&(b=c.read(x)),{urlPostfix:f+g,method:d,headers:m,body:b,requestId:l}}};return sc.SimplifiedFetchTransport=s,sc}var EB;function Tj(){if(EB)return Sa;EB=1;var t=Sa&&Sa.__createBinding||(Object.create?function(g,m,y,b){b===void 0&&(b=y);var x=Object.getOwnPropertyDescriptor(m,y);(!x||("get"in x?!m.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return m[y]}}),Object.defineProperty(g,b,x)}:function(g,m,y,b){b===void 0&&(b=y),g[b]=m[y]}),e=Sa&&Sa.__setModuleDefault||(Object.create?function(g,m){Object.defineProperty(g,"default",{enumerable:!0,value:m})}:function(g,m){g.default=m}),n=Sa&&Sa.__importStar||function(g){if(g&&g.__esModule)return g;var m={};if(g!=null)for(var y in g)y!=="default"&&Object.prototype.hasOwnProperty.call(g,y)&&t(m,g,y);return e(m,g),m},r=Sa&&Sa.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.AuthFetch=void 0;const i=n(Yn()),s=r(Ao()),o=r(FO()),a=r(Yd()),c=_j(),l=Sj(),u=Ej(),d=zO(),h=HO(),f="1.0";let p=class{constructor(m,y,b){this.callbacks={},this.certificatesReceived=[],this.peers={},this.wallet=m,this.requestedCertificates=y,this.sessionManager=b||new d.SessionManager}async fetch(m,y={}){if(typeof y.retryCounter=="number"){if(y.retryCounter<=0)throw new Error("Request failed after maximum number of retries.");y.retryCounter--}const b=await new Promise(async(x,S)=>{try{const{method:P="GET",headers:_={},body:I}=y,C=new URL(m),A=C.origin;let M;if(typeof this.peers[A]>"u"){const U=new u.SimplifiedFetchTransport(A);M={peer:new l.Peer(this.wallet,U,this.requestedCertificates,this.sessionManager),pendingCertificateRequests:[]},this.peers[A]=M,this.peers[A].peer.listenForCertificatesReceived((q,K)=>{this.certificatesReceived.push(...K)}),this.peers[A].peer.listenForCertificatesRequested(async(q,K)=>{try{this.peers[A].pendingCertificateRequests.push(!0);const V=await(0,h.getVerifiableCertificates)(this.wallet,K,q);await this.peers[A].peer.sendCertificateResponse(q,V)}finally{await new Promise(V=>setTimeout(V,500)),this.peers[A].pendingCertificateRequests.shift()}})}else{if(this.peers[A].supportsMutualAuth===!1){try{const U=await this.handleFetchAndValidate(m,y,this.peers[A]);x(U)}catch(U){S(U)}return}M=this.peers[A]}const k=(0,s.default)(32),O=i.toBase64(k),B=await this.serializeRequest(P,_,I,C,k);this.callbacks[O]={resolve:x,reject:S};const $=M.peer.listenForGeneralMessages((U,q)=>{const K=new i.Reader(q);if(i.toBase64(K.read(32))!==O)return;M.peer.stopListeningForGeneralMessages($),this.peers[A].identityKey=U,this.peers[A].supportsMutualAuth=!0;const G=K.readVarIntNum(),j={},Q=K.readVarIntNum();if(Q>0)for(let pe=0;pe<Q;pe++){const ue=K.readVarIntNum(),le=K.read(ue),ae=i.toUTF8(le),_e=K.readVarIntNum(),ye=K.read(_e),Ae=i.toUTF8(ye);j[ae]=Ae}j["x-bsv-auth-identity-key"]=U;let se;const Z=K.readVarIntNum();Z>0&&(se=K.read(Z));const ie=new Response(se?new Uint8Array(se):null,{status:G,statusText:`${G}`,headers:new Headers(j)});this.callbacks[O].resolve(ie),delete this.callbacks[O]});M.pendingCertificateRequests.length>0&&await new Promise(U=>{setInterval(()=>{M.pendingCertificateRequests.length===0&&U()},100)}),await M.peer.toPeer(B.toArray(),M.identityKey).catch(async U=>{var q;if(U.message.includes("Session not found for nonce")){delete this.peers[A],(q=y.retryCounter)!==null&&q!==void 0||(y.retryCounter=3);const K=await this.fetch(m,y);x(K);return}if(U.message.includes("HTTP server failed to authenticate"))try{const K=await this.handleFetchAndValidate(m,y,M);x(K);return}catch(K){S(K)}else S(U)})}catch(P){S(P)}});return b.status===402?await this.handlePaymentAndRetry(m,y,b):b}async sendCertificateRequest(m,y){const x=new URL(m).origin;let S;if(typeof this.peers[x]<"u")S={peer:this.peers[x].peer};else{const P=new u.SimplifiedFetchTransport(x);S={peer:new l.Peer(this.wallet,P,this.requestedCertificates,this.sessionManager)},this.peers[x]=S}return await new Promise(async(P,_)=>{const I=S.peer.listenForCertificatesReceived((C,A)=>{S.peer.stopListeningForCertificatesReceived(I),this.certificatesReceived.push(...A),P(A)});try{await S.peer.requestCertificates(y,S.identityKey)}catch(C){S.peer.stopListeningForCertificatesReceived(I),_(C)}})}consumeReceivedCertificates(){return this.certificatesReceived.splice(0)}async serializeRequest(m,y,b,x,S){const P=new i.Writer;if(P.write(S),P.writeVarIntNum(m.length),P.write(i.toArray(m)),x.pathname.length>0){const C=i.toArray(x.pathname);P.writeVarIntNum(C.length),P.write(C)}else P.writeVarIntNum(-1);if(x.search.length>0){const C=i.toArray(x.search);P.writeVarIntNum(C.length),P.write(C)}else P.writeVarIntNum(-1);const _=[];for(let[C,A]of Object.entries(y))if(C=C.toLowerCase(),C.startsWith("x-bsv-")||C==="authorization"){if(C.startsWith("x-bsv-auth"))throw new Error("No BSV auth headers allowed here!");_.push([C,A])}else if(C.startsWith("content-type"))A=A.split(";")[0].trim(),_.push([C,A]);else throw new Error("Unsupported header in the simplified fetch implementation. Only content-type, authorization, and x-bsv-* headers are supported.");_.sort(([C],[A])=>C.localeCompare(A)),P.writeVarIntNum(_.length);for(let C=0;C<_.length;C++){const A=i.toArray(_[C][0],"utf8");P.writeVarIntNum(A.length),P.write(A);const M=i.toArray(_[C][1],"utf8");P.writeVarIntNum(M.length),P.write(M)}if(["POST","PUT","PATCH","DELETE"].includes(m.toUpperCase())&&b===void 0){const C=_.find(([A])=>A==="content-type");C&&C[1].includes("application/json")?b="{}":b=""}if(b){const C=await this.normalizeBodyToNumberArray(b);P.writeVarIntNum(C.length),P.write(C)}else P.writeVarIntNum(-1);return P}async handleFetchAndValidate(m,y,b){const x=await fetch(m,y);if(x.headers.forEach(S=>{if(S.toLocaleLowerCase().startsWith("x-bsv"))throw new Error("The server is trying to claim it has been authenticated when it has not!")}),x.ok)return b.supportsMutualAuth=!1,x;throw new Error(`Request failed with status: ${x.status}`)}async handlePaymentAndRetry(m,y={},b){var x;const S=b.headers.get("x-bsv-payment-version");if(!S||S!==f)throw new Error(`Unsupported x-bsv-payment-version response header. Client version: ${f}, Server version: ${S}`);const P=b.headers.get("x-bsv-payment-satoshis-required");if(!P)throw new Error("Missing x-bsv-payment-satoshis-required response header.");const _=parseInt(P);if(isNaN(_)||_<=0)throw new Error("Invalid x-bsv-payment-satoshis-required response header value.");const I=b.headers.get("x-bsv-auth-identity-key");if(!I)throw new Error("Missing x-bsv-auth-identity-key response header.");const C=b.headers.get("x-bsv-payment-derivation-prefix");if(typeof C!="string"||C.length<1)throw new Error("Missing x-bsv-payment-derivation-prefix response header.");const A=await(0,c.createNonce)(this.wallet),{publicKey:M}=await this.wallet.getPublicKey({protocolID:[2,"3241645161d8"],keyID:`${C} ${A}`,counterparty:I}),k=new o.default().lock(a.default.fromString(M).toAddress()).toHex(),{tx:O}=await this.wallet.createAction({description:`Payment for request to ${new URL(m).origin}`,outputs:[{satoshis:_,lockingScript:k,customInstructions:JSON.stringify({derivationPrefix:C,derivationSuffix:A,payee:I}),outputDescription:"HTTP request payment"}],options:{randomizeOutputs:!1}});return y.headers=y.headers||{},y.headers["x-bsv-payment"]=JSON.stringify({derivationPrefix:C,derivationSuffix:A,transaction:i.toBase64(O)}),(x=y.retryCounter)!==null&&x!==void 0||(y.retryCounter=3),this.fetch(m,y)}async normalizeBodyToNumberArray(m){if(m==null)return[];if(typeof m=="object")return i.toArray(JSON.stringify(m,"utf8"));if(Array.isArray(m)&&m.every(y=>typeof y=="number"))return m;if(typeof m=="string")return i.toArray(m,"utf8");if(m instanceof ArrayBuffer||ArrayBuffer.isView(m)){const y=m instanceof ArrayBuffer?new Uint8Array(m):new Uint8Array(m.buffer);return Array.from(y)}if(m instanceof Blob){const y=await m.arrayBuffer();return Array.from(new Uint8Array(y))}if(m instanceof FormData){const y=[];m.forEach((x,S)=>{y.push([S,x.toString()])});const b=new URLSearchParams(y).toString();return i.toArray(b,"utf8")}if(m instanceof URLSearchParams)return i.toArray(m.toString(),"utf8");throw m instanceof ReadableStream?new Error("ReadableStream cannot be directly converted to number[]."):new Error("Unsupported body type in this SimplifiedFetch implementation.")}};return Sa.AuthFetch=p,Sa}var TB;function Ij(){return TB||(TB=1,function(t){var e=Pp&&Pp.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,a)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=Pp&&Pp.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(Tj(),t)}(Pp)),Pp}var Cp={},IB;function Cbe(){return IB||(IB=1,function(t){var e=Cp&&Cp.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,a)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=Cp&&Cp.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(Ej(),t)}(Cp)),Cp}var PB;function Mbe(){return PB||(PB=1,function(t){var e=Ep&&Ep.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,a)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=Ep&&Ep.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(Sbe(),t),n(Sj(),t),n(zO(),t),n(Pbe(),t),n(HO(),t),n(Ij(),t),n(Cbe(),t)}(Ep)),Ep}var ud={},h1={},Vg={},CB;function VO(){if(CB)return Vg;CB=1;var t=Vg&&Vg.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Vg,"__esModule",{value:!0});const e=t(wP()),n=pu();let r=class{static decode(s){const o=e.default.decode(s);if(o.fields.length<4)throw new Error("Invalid SHIP/SLAP advertisement!");const a=n.Utils.toUTF8(o.fields[0]);if(a!=="SHIP"&&a!=="SLAP")throw new Error("Invalid protocol type!");const c=n.Utils.toHex(o.fields[1]),l=n.Utils.toUTF8(o.fields[2]),u=n.Utils.toUTF8(o.fields[3]);return{protocol:a,identityKey:c,domain:l,topicOrService:u}}constructor(s){this.pushDrop=new e.default(s)}async lock(s,o,a){const{publicKey:c}=await this.pushDrop.wallet.getPublicKey({identityKey:!0});return await this.pushDrop.lock([n.Utils.toArray(s,"utf8"),n.Utils.toArray(c,"hex"),n.Utils.toArray(o,"utf8"),n.Utils.toArray(a,"utf8")],[2,s==="SHIP"?"Service Host Interconnect":"Service Lookup Availability"],"1","self")}unlock(s){return this.pushDrop.unlock([2,s==="SHIP"?"Service Host Interconnect":"Service Lookup Availability"],"1","self")}};return Vg.default=r,Vg}var MB;function hk(){return MB||(MB=1,function(t){var e=h1&&h1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(t,"__esModule",{value:!0}),t.HTTPSOverlayLookupFacilitator=t.DEFAULT_TESTNET_SLAP_TRACKERS=t.DEFAULT_SLAP_TRACKERS=void 0;const n=m_(),r=e(VO());t.DEFAULT_SLAP_TRACKERS=["https://users.bapp.dev"],t.DEFAULT_TESTNET_SLAP_TRACKERS=["https://testnet-users.bapp.dev"];const i=5e3;class s{constructor(c=fetch,l=!1){this.fetchClient=c,this.allowHTTP=l}async lookup(c,l,u=5e3){if(!c.startsWith("https:")&&!this.allowHTTP)throw new Error('HTTPS facilitator can only use URLs that start with "https:"');const d=new Promise((p,g)=>setTimeout(()=>g(new Error("Request timed out")),u)),h=fetch(`${c}/lookup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:l.service,query:l.query})}),f=await Promise.race([h,d]);if(f.ok)return await f.json();throw new Error("Failed to facilitate lookup")}}t.HTTPSOverlayLookupFacilitator=s;let o=class{constructor(c={}){var l,u,d,h,f;this.networkPreset=(l=c.networkPreset)!==null&&l!==void 0?l:"mainnet",this.facilitator=(u=c.facilitator)!==null&&u!==void 0?u:new s(void 0,this.networkPreset==="local"),this.slapTrackers=(d=c.slapTrackers)!==null&&d!==void 0?d:this.networkPreset==="mainnet"?t.DEFAULT_SLAP_TRACKERS:t.DEFAULT_TESTNET_SLAP_TRACKERS,this.hostOverrides=(h=c.hostOverrides)!==null&&h!==void 0?h:{},this.additionalHosts=(f=c.additionalHosts)!==null&&f!==void 0?f:{}}async query(c,l){var u;let d=[];if(c.service==="ls_slap"?d=this.networkPreset==="local"?["http://localhost:8080"]:this.slapTrackers:this.hostOverrides[c.service]!=null?d=this.hostOverrides[c.service]:this.networkPreset==="local"?d=["http://localhost:8080"]:d=await this.findCompetentHosts(c.service),((u=this.additionalHosts[c.service])===null||u===void 0?void 0:u.length)>0&&(d=[...d,...this.additionalHosts[c.service]]),d.length<1)throw new Error(`No competent ${this.networkPreset} hosts found by the SLAP trackers for lookup service: ${c.service}`);const f=(await Promise.allSettled(d.map(async g=>await this.facilitator.lookup(g,c,l)))).filter(g=>g.status==="fulfilled").map(g=>g.value);if(f.length===0)throw new Error("No successful responses from any hosts");if(f[0].type==="freeform")return f[0];const p=new Map;for(const g of f)if(g.type==="output-list")try{for(const m of g.outputs)try{const y=String(n.Transaction.fromBEEF(m.beef).id("hex"));if(y!==""){const b=`${String(y)}.${String(m.outputIndex)}`;p.set(b,m)}else console.warn("Invalid transaction ID:",y)}catch{continue}}catch{}return{type:"output-list",outputs:Array.from(p.values())}}async findCompetentHosts(c){const l={service:"ls_slap",query:{service:c}},u=await Promise.allSettled(this.slapTrackers.map(async h=>await this.facilitator.lookup(h,l,i))),d=new Set;for(const h of u)if(h.status==="fulfilled"){const f=h.value;if(f.type!=="output-list")continue;for(const p of f.outputs)try{const m=n.Transaction.fromBEEF(p.beef).outputs[p.outputIndex].lockingScript,y=r.default.decode(m);if(y.topicOrService!==c||y.protocol!=="SLAP")continue;d.add(y.domain)}catch{continue}}else continue;return[...d]}};t.default=o}(h1)),h1}var Hf={},AB;function $E(){if(AB)return Hf;AB=1;var t=Hf&&Hf.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Hf,"__esModule",{value:!0}),Hf.HTTPSOverlayBroadcastFacilitator=void 0;const e=m_(),n=t(hk()),r=t(VO()),i=5e3;class s{constructor(c=fetch,l=!1){this.httpClient=c,this.allowHTTP=l}async send(c,l){if(console.log(c),!c.startsWith("https:")&&!this.allowHTTP)throw new Error('HTTPS facilitator can only use URLs that start with "https:"');const u=await fetch(`${c}/submit`,{method:"POST",headers:{"Content-Type":"application/octet-stream","X-Topics":JSON.stringify(l.topics)},body:new Uint8Array(l.beef)});if(u.ok)return await u.json();throw new Error("Failed to facilitate broadcast")}}Hf.HTTPSOverlayBroadcastFacilitator=s;class o{constructor(c,l={}){var u,d,h,f,p,g;if(c.length===0)throw new Error("At least one topic is required for broadcast.");if(c.some(m=>!m.startsWith("tm_")))throw new Error('Every topic must start with "tm_".');this.topics=c,this.networkPreset=(u=l.networkPreset)!==null&&u!==void 0?u:"mainnet",this.facilitator=(d=l.facilitator)!==null&&d!==void 0?d:new s(void 0,this.networkPreset==="local"),this.resolver=(h=l.resolver)!==null&&h!==void 0?h:new n.default({networkPreset:this.networkPreset}),this.requireAcknowledgmentFromAllHostsForTopics=(f=l.requireAcknowledgmentFromAllHostsForTopics)!==null&&f!==void 0?f:[],this.requireAcknowledgmentFromAnyHostForTopics=(p=l.requireAcknowledgmentFromAnyHostForTopics)!==null&&p!==void 0?p:"all",this.requireAcknowledgmentFromSpecificHostsForTopics=(g=l.requireAcknowledgmentFromSpecificHostsForTopics)!==null&&g!==void 0?g:{}}async broadcast(c){console.log(c);let l;try{l=c.toBEEF()}catch{throw new Error("Transactions sent via SHIP to Overlay Services must be serializable to BEEF format.")}const u=await this.findInterestedHosts();if(console.log(u),Object.keys(u).length===0)return{status:"error",code:"ERR_NO_HOSTS_INTERESTED",description:`No ${this.networkPreset} hosts are interested in receiving this transaction.`};const d=Object.entries(u).map(async([x,S])=>{try{const P=await this.facilitator.send(x,{beef:l,topics:[...S]});if(P==null||Object.keys(P).length===0)throw new Error("Steak has no topics.");return{host:x,success:!0,steak:P}}catch(P){return console.error(P),{host:x,success:!1,error:P}}}),f=(await Promise.all(d)).filter(x=>x.success);if(f.length===0)return{status:"error",code:"ERR_ALL_HOSTS_REJECTED",description:`All ${this.networkPreset} topical hosts have rejected the transaction.`};const p={};for(const x of f){const S=x.host,P=x.steak,_=new Set;for(const[I,C]of Object.entries(P)){const A=C.outputsToAdmit,M=C.coinsToRetain,k=C.coinsRemoved;((A==null?void 0:A.length)>0||(M==null?void 0:M.length)>0||(k==null?void 0:k.length)>0)&&_.add(I)}p[S]=_}let g,m;if(this.requireAcknowledgmentFromAllHostsForTopics==="all"?(g=this.topics,m="all"):this.requireAcknowledgmentFromAllHostsForTopics==="any"?(g=this.topics,m="any"):Array.isArray(this.requireAcknowledgmentFromAllHostsForTopics)?(g=this.requireAcknowledgmentFromAllHostsForTopics,m="all"):(g=this.topics,m="all"),g.length>0&&!this.checkAcknowledgmentFromAllHosts(p,g,m))return{status:"error",code:"ERR_REQUIRE_ACK_FROM_ALL_HOSTS_FAILED",description:"Not all hosts acknowledged the required topics."};let y,b;return this.requireAcknowledgmentFromAnyHostForTopics==="all"?(y=this.topics,b="all"):this.requireAcknowledgmentFromAnyHostForTopics==="any"?(y=this.topics,b="any"):Array.isArray(this.requireAcknowledgmentFromAnyHostForTopics)?(y=this.requireAcknowledgmentFromAnyHostForTopics,b="all"):(y=[],b="all"),y.length>0&&!this.checkAcknowledgmentFromAnyHost(p,y,b)?{status:"error",code:"ERR_REQUIRE_ACK_FROM_ANY_HOST_FAILED",description:"No host acknowledged the required topics."}:Object.keys(this.requireAcknowledgmentFromSpecificHostsForTopics).length>0&&!this.checkAcknowledgmentFromSpecificHosts(p,this.requireAcknowledgmentFromSpecificHostsForTopics)?{status:"error",code:"ERR_REQUIRE_ACK_FROM_SPECIFIC_HOSTS_FAILED",description:"Specific hosts did not acknowledge the required topics."}:{status:"success",txid:c.id("hex"),message:`Sent to ${f.length} Overlay Services ${f.length===1?"host":"hosts"}.`}}checkAcknowledgmentFromAllHosts(c,l,u){for(const d of Object.values(c))if(u==="all"){for(const h of l)if(!d.has(h))return!1}else if(u==="any"){let h=!1;for(const f of l)if(d.has(f)){h=!0;break}if(!h)return!1}return!0}checkAcknowledgmentFromAnyHost(c,l,u){if(u==="all"){for(const d of Object.values(c)){let h=!0;for(const f of l)if(!d.has(f)){h=!1;break}if(h)return!0}return!1}else{for(const d of Object.values(c))for(const h of l)if(d.has(h))return!0;return!1}}checkAcknowledgmentFromSpecificHosts(c,l){for(const[u,d]of Object.entries(l)){const h=c[u];if(h==null)return!1;let f,p;if(d==="all"||d==="any")p=d,f=this.topics;else if(Array.isArray(d))f=d,p="all";else continue;if(p==="all"){for(const g of f)if(!h.has(g))return!1}else if(p==="any"){let g=!1;for(const m of f)if(h.has(m)){g=!0;break}if(!g)return!1}}return!0}async findInterestedHosts(){if(this.networkPreset==="local"){const u=new Set;for(let d=0;d<this.topics.length;d++)u.add(this.topics[d]);return{"http://localhost:8080":u}}const c={},l=await this.resolver.query({service:"ls_ship",query:{topics:this.topics}},i);if(l.type!=="output-list")throw new Error("SHIP answer is not an output list.");for(const u of l.outputs)try{const h=e.Transaction.fromBEEF(u.beef).outputs[u.outputIndex].lockingScript,f=r.default.decode(h);if(!this.topics.includes(f.topicOrService)||f.protocol!=="SHIP")continue;c[f.domain]===void 0&&(c[f.domain]=new Set),c[f.domain].add(f.topicOrService)}catch{continue}return c}}return Hf.default=o,Hf}var RB;function IP(){return RB||(RB=1,function(t){var e=ud&&ud.__createBinding||(Object.create?function(l,u,d,h){h===void 0&&(h=d);var f=Object.getOwnPropertyDescriptor(u,d);(!f||("get"in f?!u.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return u[d]}}),Object.defineProperty(l,h,f)}:function(l,u,d,h){h===void 0&&(h=d),l[h]=u[d]}),n=ud&&ud.__exportStar||function(l,u){for(var d in l)d!=="default"&&!Object.prototype.hasOwnProperty.call(u,d)&&e(u,l,d)},r=ud&&ud.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(t,"__esModule",{value:!0}),t.SHIPCast=t.SHIPBroadcaster=t.TopicBroadcaster=t.LookupResolver=t.OverlayAdminTokenTemplate=void 0,n(hk(),t),n($E(),t);var i=VO();Object.defineProperty(t,"OverlayAdminTokenTemplate",{enumerable:!0,get:function(){return r(i).default}});var s=hk();Object.defineProperty(t,"LookupResolver",{enumerable:!0,get:function(){return r(s).default}});var o=$E();Object.defineProperty(t,"TopicBroadcaster",{enumerable:!0,get:function(){return r(o).default}});var a=$E();Object.defineProperty(t,"SHIPBroadcaster",{enumerable:!0,get:function(){return r(a).default}});var c=$E();Object.defineProperty(t,"SHIPCast",{enumerable:!0,get:function(){return r(c).default}})}(ud)),ud}var dd={},tA={},kB;function Pj(){return kB||(kB=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isValidURL=t.getHashFromURL=t.getURLForFile=t.getURLForHash=t.normalizeURL=void 0;const e=Li(),n=Yn(),r=c=>(c.toLowerCase().startsWith("uhrp:")&&(c=c.slice(5)),c.startsWith("//")&&(c=c.slice(2)),c);t.normalizeURL=r;const i=c=>{if(c.length!==32)throw new Error("Hash length must be 32 bytes (sha256)");return(0,n.toBase58Check)(c,(0,n.toArray)("ce00","hex"))};t.getURLForHash=i;const s=c=>{const l=(0,e.sha256)(c);return(0,t.getURLForHash)(l)};t.getURLForFile=s;const o=c=>{c=(0,t.normalizeURL)(c);const{data:l,prefix:u}=(0,n.fromBase58Check)(c,void 0,2);if(l.length!==32)throw new Error("Invalid length!");if((0,n.toHex)(u)!=="ce00")throw new Error("Bad prefix");return l};t.getHashFromURL=o;const a=c=>{try{return(0,t.getHashFromURL)(c),!0}catch{return!1}};t.isValidURL=a}(tA)),tA}var oc={},OB;function Abe(){if(OB)return oc;OB=1;var t=oc&&oc.__createBinding||(Object.create?function(o,a,c,l){l===void 0&&(l=c);var u=Object.getOwnPropertyDescriptor(a,c);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[c]}}),Object.defineProperty(o,l,u)}:function(o,a,c,l){l===void 0&&(l=c),o[l]=a[c]}),e=oc&&oc.__setModuleDefault||(Object.create?function(o,a){Object.defineProperty(o,"default",{enumerable:!0,value:a})}:function(o,a){o.default=a}),n=oc&&oc.__importStar||function(o){if(o&&o.__esModule)return o;var a={};if(o!=null)for(var c in o)c!=="default"&&Object.prototype.hasOwnProperty.call(o,c)&&t(a,o,c);return e(a,o),a};Object.defineProperty(oc,"__esModule",{value:!0}),oc.StorageUploader=void 0;const r=Tj(),i=n(Pj());let s=class{constructor(a){this.baseURL=a.storageURL,this.authFetch=new r.AuthFetch(a.wallet)}async getUploadInfo(a,c){const l=`${this.baseURL}/upload`,u={fileSize:a,retentionPeriod:c},d=await this.authFetch.fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!d.ok)throw new Error(`Upload info request failed: HTTP ${d.status}`);const h=await d.json();if(h.status==="error")throw new Error("Upload route returned an error.");return{uploadURL:h.uploadURL,requiredHeaders:h.requiredHeaders,amount:h.amount}}async uploadFile(a,c,l){const u=Uint8Array.from(c.data),d=await fetch(a,{method:"PUT",body:u,headers:{"Content-Type":c.type,...l}});if(!d.ok)throw new Error(`File upload failed: HTTP ${d.status}`);return{published:!0,uhrpURL:await i.getURLForFile(c.data)}}async publishFile(a){const{file:c,retentionPeriod:l}=a,u=c.data.length,{uploadURL:d,requiredHeaders:h}=await this.getUploadInfo(u,l);return await this.uploadFile(d,c,h)}async findFile(a){var c,l;const u=new URL(`${this.baseURL}/find`);u.searchParams.set("uhrpUrl",a);const d=await this.authFetch.fetch(u.toString(),{method:"GET"});if(!d.ok)throw new Error(`findFile request failed: HTTP ${d.status}`);const h=await d.json();if(h.status==="error"){const f=(c=h.code)!==null&&c!==void 0?c:"unknown-code",p=(l=h.description)!==null&&l!==void 0?l:"no-description";throw new Error(`findFile returned an error: ${f} - ${p}`)}return h.data}async listUploads(){var a,c;const l=`${this.baseURL}/list`,u=await this.authFetch.fetch(l,{method:"GET"});if(!u.ok)throw new Error(`listUploads request failed: HTTP ${u.status}`);const d=await u.json();if(d.status==="error"){const h=(a=d.code)!==null&&a!==void 0?a:"unknown-code",f=(c=d.description)!==null&&c!==void 0?c:"no-description";throw new Error(`listUploads returned an error: ${h} - ${f}`)}return d.uploads}async renewFile(a,c){var l,u;const d=`${this.baseURL}/renew`,h={uhrpUrl:a,additionalMinutes:c},f=await this.authFetch.fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(!f.ok)throw new Error(`renewFile request failed: HTTP ${f.status}`);const p=await f.json();if(p.status==="error"){const g=(l=p.code)!==null&&l!==void 0?l:"unknown-code",m=(u=p.description)!==null&&u!==void 0?u:"no-description";throw new Error(`renewFile returned an error: ${g} - ${m}`)}return{status:p.status,prevExpiryTime:p.prevExpiryTime,newExpiryTime:p.newExpiryTime,amount:p.amount}}};return oc.StorageUploader=s,oc}var Mp={},NB;function Rbe(){if(NB)return Mp;NB=1;var t=Mp&&Mp.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Mp,"__esModule",{value:!0}),Mp.StorageDownloader=void 0;const e=IP(),n=Cj(),r=t(wP()),i=t(p_()),s=pu();let o=class{constructor(c){this.networkPreset="mainnet",this.networkPreset=c==null?void 0:c.networkPreset}async resolve(c){const u=await new e.LookupResolver({networkPreset:this.networkPreset}).query({service:"ls_uhrp",query:{uhrpUrl:c}});if(u.type!=="output-list")throw new Error("Lookup answer must be an output list");const d=[],h=Math.floor(Date.now()/1e3);for(let f=0;f<u.outputs.length;f++){const p=i.default.fromBEEF(u.outputs[f].beef),{fields:g}=r.default.decode(p.outputs[u.outputs[f].outputIndex].lockingScript);new s.Utils.Reader(g[3]).readVarIntNum()<h||d.push(s.Utils.toUTF8(g[2]))}return d}async download(c){if(!n.StorageUtils.isValidURL(c))throw new Error("Invalid parameter UHRP url");const l=n.StorageUtils.getHashFromURL(c),u=await this.resolve(c);if(!Array.isArray(u)||u.length===0)throw new Error("No one currently hosts this file!");for(let d=0;d<u.length;d++)try{const h=await fetch(u[d],{method:"GET"});if(!h.ok||h.status>=400)continue;const f=await h.arrayBuffer(),p=[...new Uint8Array(f)],g=s.Hash.sha256(p);for(let m=0;m<g.length;++m)if(g[m]!==l[m])throw new Error("Value of content does not match hash of the url given");return{data:p,mimeType:h.headers.get("Content-Type")}}catch{continue}throw new Error(`Unable to download content from ${c}`)}};return Mp.StorageDownloader=o,Mp}var LB;function Cj(){return LB||(LB=1,function(t){var e=dd&&dd.__createBinding||(Object.create?function(o,a,c,l){l===void 0&&(l=c);var u=Object.getOwnPropertyDescriptor(a,c);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[c]}}),Object.defineProperty(o,l,u)}:function(o,a,c,l){l===void 0&&(l=c),o[l]=a[c]}),n=dd&&dd.__setModuleDefault||(Object.create?function(o,a){Object.defineProperty(o,"default",{enumerable:!0,value:a})}:function(o,a){o.default=a}),r=dd&&dd.__importStar||function(o){if(o&&o.__esModule)return o;var a={};if(o!=null)for(var c in o)c!=="default"&&Object.prototype.hasOwnProperty.call(o,c)&&e(a,o,c);return n(a,o),a};Object.defineProperty(t,"__esModule",{value:!0}),t.StorageDownloader=t.StorageUploader=t.StorageUtils=void 0,t.StorageUtils=r(Pj());var i=Abe();Object.defineProperty(t,"StorageUploader",{enumerable:!0,get:function(){return i.StorageUploader}});var s=Rbe();Object.defineProperty(t,"StorageDownloader",{enumerable:!0,get:function(){return s.StorageDownloader}})}(dd)),dd}var Ap={},Rp={},fd={},DB;function Mj(){return DB||(DB=1,Object.defineProperty(fd,"__esModule",{value:!0}),fd.KNOWN_IDENTITY_TYPES=fd.DEFAULT_IDENTITY_CLIENT_OPTIONS=fd.defaultIdentity=void 0,fd.defaultIdentity={name:"Unknown Identity",avatarURL:"XUUB8bbn9fEthk15Ge3zTQXypUShfC94vFjp65v7u5CQ8qkpxzst",identityKey:"",abbreviatedKey:"",badgeIconURL:"XUUV39HVPkpmMzYNTx7rpKzJvXfeiVyQWg2vfSpjBAuhunTCA9uG",badgeLabel:"Not verified by anyone you trust.",badgeClickURL:"https://projectbabbage.com/docs/unknown-identity"},fd.DEFAULT_IDENTITY_CLIENT_OPTIONS={protocolID:[1,"identity"],keyID:"1",tokenAmount:1,outputIndex:0},fd.KNOWN_IDENTITY_TYPES={identiCert:"z40BOInXkI8m7f/wBrv4MJ09bZfzZbTj2fJqCtONqCY=",discordCert:"2TgqRC35B1zehGmB21xveZNc7i5iqHc0uxMb+1NMPW4=",phoneCert:"mffUklUzxbHr65xLohn0hRL0Tq2GjW1GYF/OPfzqJ6A=",xCert:"vdDWvftf1H+5+ZprUw123kjHlywH+v20aPQTuXgMpNc=",registrant:"YoPsbfR6YQczjzPdHCoGC7nJsOdPQR50+SYqcWpJ0y0=",emailCert:"exOl3KM0dIJ04EW5pZgbZmPag6MdJXd3/a1enmUU/BA=",anyone:"mfkOMfLDQmrr3SBxBQ5WeE+6Hy3VJRFq6w4A5Ljtlis=",self:"Hkge6X5JRxt1cWXtHLCrSTg6dCVTxjQJJ48iOYd7n3g=",coolCert:"AGfk/WrT1eBDXpz3mcw386Zww2HmqcIn3uY6x4Af1eo="}),fd}var BB;function kbe(){if(BB)return Rp;BB=1;var t=Rp&&Rp.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Rp,"__esModule",{value:!0}),Rp.IdentityClient=void 0;const e=Ij(),n=Mj(),r=TP(),i=m_(),s=t(xv()),o=_P(),a=pu(),c=IP();let l=class pk{constructor(d,h=n.DEFAULT_IDENTITY_CLIENT_OPTIONS,f){this.options=h,this.originator=f,this.wallet=d??new r.WalletClient,this.authClient=new e.AuthFetch(this.wallet)}async publiclyRevealAttributes(d,h){if(Object.keys(d.fields).length===0)throw new Error("Public reveal failed: Certificate has no fields to reveal!");if(h.length===0)throw new Error("Public reveal failed: You must reveal at least one field!");try{await new s.default(d.type,d.serialNumber,d.subject,d.certifier,d.revocationOutpoint,d.fields,d.signature).verify()}catch{throw new Error("Public reveal failed: Certificate verification failed!")}const{keyringForVerifier:f}=await this.wallet.proveCertificate({certificate:d,fieldsToReveal:h,verifier:new a.PrivateKey(1).toPublicKey().toString()}),p=await new o.PushDrop(this.wallet).lock([a.Utils.toArray(JSON.stringify({...d,keyring:f}))],this.options.protocolID,this.options.keyID,"anyone",!0,!0),{tx:g}=await this.wallet.createAction({description:"Create a new Identity Token",outputs:[{satoshis:this.options.tokenAmount,lockingScript:p.toHex(),outputDescription:"Identity Token"}],options:{randomizeOutputs:!1}});if(g!==void 0)return await new c.TopicBroadcaster(["tm_identity"],{networkPreset:(await this.wallet.getNetwork({})).network}).broadcast(i.Transaction.fromAtomicBEEF(g));throw new Error("Public reveal failed: failed to create action!")}async resolveByIdentityKey(d){const{certificates:h}=await this.wallet.discoverByIdentityKey(d,this.originator);return h.map(f=>pk.parseIdentity(f))}async resolveByAttributes(d){const{certificates:h}=await this.wallet.discoverByAttributes(d,this.originator);return h.map(f=>pk.parseIdentity(f))}static parseIdentity(d){const{type:h,decryptedFields:f,certifierInfo:p}=d;let g,m,y,b,x;switch(h){case n.KNOWN_IDENTITY_TYPES.xCert:g=f.userName,m=f.profilePhoto,y=`X account certified by ${p.name}`,b=p.iconUrl,x="https://socialcert.net";break;case n.KNOWN_IDENTITY_TYPES.discordCert:g=f.userName,m=f.profilePhoto,y=`Discord account certified by ${p.name}`,b=p.iconUrl,x="https://socialcert.net";break;case n.KNOWN_IDENTITY_TYPES.emailCert:g=f.email,m="XUTZxep7BBghAJbSBwTjNfmcsDdRFs5EaGEgkESGSgjJVYgMEizu",y=`Email certified by ${p.name}`,b=p.iconUrl,x="https://socialcert.net";break;case n.KNOWN_IDENTITY_TYPES.phoneCert:g=f.phoneNumber,m="XUTLxtX3ELNUwRhLwL7kWNGbdnFM8WG2eSLv84J7654oH8HaJWrU",y=`Phone certified by ${p.name}`,b=p.iconUrl,x="https://socialcert.net";break;case n.KNOWN_IDENTITY_TYPES.identiCert:g=`${f.firstName} ${f.lastName}`,m=f.profilePhoto,y=`Government ID certified by ${p.name}`,b=p.iconUrl,x="https://identicert.me";break;case n.KNOWN_IDENTITY_TYPES.registrant:g=f.name,m=f.icon,y=`Entity certified by ${p.name}`,b=p.iconUrl,x="https://projectbabbage.com/docs/registrant";break;case n.KNOWN_IDENTITY_TYPES.coolCert:g=f.cool==="true"?"Cool Person!":"Not cool!";break;case n.KNOWN_IDENTITY_TYPES.anyone:g="Anyone",m="XUT4bpQ6cpBaXi1oMzZsXfpkWGbtp2JTUYAoN7PzhStFJ6wLfoeR",y="Represents the ability for anyone to access this information.",b="XUUV39HVPkpmMzYNTx7rpKzJvXfeiVyQWg2vfSpjBAuhunTCA9uG",x="https://projectbabbage.com/docs/anyone-identity";break;case n.KNOWN_IDENTITY_TYPES.self:g="You",m="XUT9jHGk2qace148jeCX5rDsMftkSGYKmigLwU2PLLBc7Hm63VYR",y="Represents your ability to access this information.",b="XUUV39HVPkpmMzYNTx7rpKzJvXfeiVyQWg2vfSpjBAuhunTCA9uG",x="https://projectbabbage.com/docs/self-identity";break;default:g=n.defaultIdentity.name,m=f.profilePhoto,y=n.defaultIdentity.badgeLabel,b=n.defaultIdentity.badgeIconURL,x=n.defaultIdentity.badgeClickURL;break}return{name:g,avatarURL:m,abbreviatedKey:d.subject.length>0?`${d.subject.substring(0,10)}...`:"",identityKey:d.subject,badgeIconURL:b,badgeLabel:y,badgeClickURL:x}}};return Rp.IdentityClient=l,Rp}var FB;function Obe(){return FB||(FB=1,function(t){var e=Ap&&Ap.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,a)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=Ap&&Ap.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(kbe(),t),n(Mj(),t)}(Ap)),Ap}var kp={},Op={},UB;function Nbe(){if(UB)return Op;UB=1,Object.defineProperty(Op,"__esModule",{value:!0}),Op.deserializeWalletProtocol=Op.RegistryClient=void 0;const t=TP(),e=pu(),n=m_(),r=IP(),i=_P(),s=1;let o=class{constructor(l=new t.WalletClient){this.wallet=l}async registerDefinition(l){var u;const d=(await this.wallet.getPublicKey({identityKey:!0})).publicKey,h=new i.PushDrop(this.wallet),f=this.buildPushDropFields(l,d),p=this.mapDefinitionTypeToWalletProtocol(l.definitionType),g=await h.lock(f,p,"1","anyone",!0),{tx:m}=await this.wallet.createAction({description:`Register a new ${l.definitionType} item`,outputs:[{satoshis:s,lockingScript:g.toHex(),outputDescription:`New ${l.definitionType} registration token`,basket:this.mapDefinitionTypeToBasketName(l.definitionType)}],options:{randomizeOutputs:!1}});if(m===void 0)throw new Error(`Failed to create ${l.definitionType} registration transaction!`);return await new r.TopicBroadcaster([this.mapDefinitionTypeToTopic(l.definitionType)],{networkPreset:(u=this.network)!==null&&u!==void 0?u:this.network=(await this.wallet.getNetwork({})).network}).broadcast(n.Transaction.fromAtomicBEEF(m))}async resolve(l,u){const d=new r.LookupResolver,h=this.mapDefinitionTypeToServiceName(l),f=await d.query({service:h,query:u});if(f.type!=="output-list")return[];const p=[];for(const g of f.outputs)try{const y=n.Transaction.fromBEEF(g.beef).outputs[g.outputIndex].lockingScript,b=await this.parseLockingScript(l,y);p.push(b)}catch{}return p}async listOwnRegistryEntries(l){const u=this.mapDefinitionTypeToBasketName(l),{outputs:d,BEEF:h}=await this.wallet.listOutputs({basket:u,include:"entire transactions"}),f=[];for(const p of d)if(p.spendable)try{const[g,m]=p.outpoint.split("."),b=n.Transaction.fromBEEF(h).outputs[m].lockingScript,x=await this.parseLockingScript(l,b);f.push({...x,txid:g,outputIndex:Number(m),satoshis:p.satoshis,lockingScript:b.toHex(),beef:h})}catch{}return f}async revokeOwnRegistryEntry(l){var u;if(l.txid===void 0||typeof l.outputIndex>"u"||l.lockingScript===void 0)throw new Error("Invalid registry record. Missing txid, outputIndex, or lockingScript.");const d=(await this.wallet.getPublicKey({identityKey:!0})).publicKey;if(l.registryOperator!==d)throw new Error("This registry token does not belong to the current wallet.");const h=l.definitionType==="basket"?l.basketID:l.definitionType==="protocol"?l.name:l.definitionType==="certificate"?l.name!==void 0?l.name:l.type:"unknown",f=`${l.txid}.${l.outputIndex}`,{signableTransaction:p}=await this.wallet.createAction({description:`Revoke ${l.definitionType} item: ${h}`,inputBEEF:l.beef,inputs:[{outpoint:f,unlockingScriptLength:73,inputDescription:`Revoking ${l.definitionType} token`}]});if(p===void 0)throw new Error("Failed to create signable transaction.");const g=n.Transaction.fromBEEF(p.tx),b=await(await new i.PushDrop(this.wallet).unlock(this.mapDefinitionTypeToWalletProtocol(l.definitionType),"1","anyone","all",!1,l.satoshis,i.LockingScript.fromHex(l.lockingScript))).sign(g,l.outputIndex),{tx:x}=await this.wallet.signAction({reference:p.reference,spends:{[l.outputIndex]:{unlockingScript:b.toHex()}},options:{acceptDelayedBroadcast:!1}});if(x===void 0)throw new Error("Failed to finalize the transaction signature.");return await new r.TopicBroadcaster([this.mapDefinitionTypeToTopic(l.definitionType)],{networkPreset:(u=this.network)!==null&&u!==void 0?u:this.network=(await this.wallet.getNetwork({})).network}).broadcast(n.Transaction.fromAtomicBEEF(x))}buildPushDropFields(l,u){let d;switch(l.definitionType){case"basket":d=[l.basketID,l.name,l.iconURL,l.description,l.documentationURL];break;case"protocol":d=[JSON.stringify(l.protocolID),l.name,l.iconURL,l.description,l.documentationURL];break;case"certificate":d=[l.type,l.name,l.iconURL,l.description,l.documentationURL,JSON.stringify(l.fields)];break;default:throw new Error("Unsupported definition type")}return d.push(u),d.map(h=>e.Utils.toArray(h))}async parseLockingScript(l,u){const d=i.PushDrop.decode(u);if(d.fields.length===0)throw new Error("Not a valid registry pushdrop script.");let h,f;switch(l){case"basket":{if(d.fields.length!==7)throw new Error("Unexpected field count for basket type.");const[p,g,m,y,b,x]=d.fields;h=e.Utils.toUTF8(x),f={definitionType:"basket",basketID:e.Utils.toUTF8(p),name:e.Utils.toUTF8(g),iconURL:e.Utils.toUTF8(m),description:e.Utils.toUTF8(y),documentationURL:e.Utils.toUTF8(b)};break}case"protocol":{if(d.fields.length!==7)throw new Error("Unexpected field count for protocol type.");const[p,g,m,y,b,x]=d.fields;h=e.Utils.toUTF8(x),f={definitionType:"protocol",protocolID:a(e.Utils.toUTF8(p)),name:e.Utils.toUTF8(g),iconURL:e.Utils.toUTF8(m),description:e.Utils.toUTF8(y),documentationURL:e.Utils.toUTF8(b)};break}case"certificate":{if(d.fields.length!==8)throw new Error("Unexpected field count for certificate type.");const[p,g,m,y,b,x,S]=d.fields;h=e.Utils.toUTF8(S);let P={};try{P=JSON.parse(e.Utils.toUTF8(x))}catch{}f={definitionType:"certificate",type:e.Utils.toUTF8(p),name:e.Utils.toUTF8(g),iconURL:e.Utils.toUTF8(m),description:e.Utils.toUTF8(y),documentationURL:e.Utils.toUTF8(b),fields:P};break}default:throw new Error(`Unsupported definition type: ${l}`)}return{...f,registryOperator:h}}mapDefinitionTypeToWalletProtocol(l){switch(l){case"basket":return[1,"basketmap"];case"protocol":return[1,"protomap"];case"certificate":return[1,"certmap"];default:throw new Error(`Unknown definition type: ${l}`)}}mapDefinitionTypeToBasketName(l){switch(l){case"basket":return"basketmap";case"protocol":return"protomap";case"certificate":return"certmap";default:throw new Error(`Unknown definition type: ${l}`)}}mapDefinitionTypeToTopic(l){switch(l){case"basket":return"tm_basketmap";case"protocol":return"tm_protomap";case"certificate":return"tm_certmap";default:throw new Error(`Unknown definition type: ${l}`)}}mapDefinitionTypeToServiceName(l){switch(l){case"basket":return"ls_basketmap";case"protocol":return"ls_protomap";case"certificate":return"ls_certmap";default:throw new Error(`Unknown definition type: ${l}`)}}};Op.RegistryClient=o;function a(c){const l=JSON.parse(c);if(!Array.isArray(l)||l.length!==2)throw new Error("Invalid wallet protocol format.");const[u,d]=l;if(![0,1,2].includes(u))throw new Error("Invalid security level.");if(typeof d!="string")throw new Error("Invalid protocolID");return[u,d]}return Op.deserializeWalletProtocol=a,Op}var nA={},$B;function Lbe(){return $B||($B=1,Object.defineProperty(nA,"__esModule",{value:!0})),nA}var zB;function Dbe(){return zB||(zB=1,function(t){var e=kp&&kp.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,a)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=kp&&kp.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(Nbe(),t),n(Lbe(),t)}(kp)),kp}var p1={},ol={},HB;function Bbe(){if(HB)return ol;HB=1;var t=ol&&ol.__createBinding||(Object.create?function(u,d,h,f){f===void 0&&(f=h);var p=Object.getOwnPropertyDescriptor(d,h);(!p||("get"in p?!d.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return d[h]}}),Object.defineProperty(u,f,p)}:function(u,d,h,f){f===void 0&&(f=h),u[f]=d[h]}),e=ol&&ol.__setModuleDefault||(Object.create?function(u,d){Object.defineProperty(u,"default",{enumerable:!0,value:d})}:function(u,d){u.default=d}),n=ol&&ol.__importStar||function(u){if(u&&u.__esModule)return u;var d={};if(u!=null)for(var h in u)h!=="default"&&Object.prototype.hasOwnProperty.call(u,h)&&t(d,u,h);return e(d,u),d},r=ol&&ol.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(ol,"__esModule",{value:!0});const i=r(wP()),s=n(Yn()),o=r(bj()),a=r(p_()),c=h_();let l=class{constructor(d=new o.default,h="kvstore default",f=!0,p){if(typeof h!="string"||h.length<1)throw new Error("A context in which to operate is required.");this.wallet=d,this.context=h,this.encrypt=f,this.originator=p}getProtocol(d){return{protocolID:[2,this.context],keyID:d}}async getOutputs(d,h){return await this.wallet.listOutputs({basket:this.context,tags:[d],tagQueryMode:"all",include:"entire transactions",limit:h})}async get(d,h=void 0){return(await this.lookupValue(d,h,5)).value}getLockingScript(d,h){var f;const[p,g]=d.outpoint.split("."),m=(f=h.findTxid(p))===null||f===void 0?void 0:f.tx;if(m==null)throw new Error(`beef must contain txid ${p}`);return m.outputs[Number(g)].lockingScript}async lookupValue(d,h,f){const p=await this.getOutputs(d,f),g={value:h,outpoint:void 0,lor:p},{outputs:m}=p;if(m.length===0)return g;const y=m.slice(-1)[0];g.outpoint=y.outpoint;let b;try{if(p.BEEF===void 0)throw new Error("entire transactions listOutputs option must return valid BEEF");const x=this.getLockingScript(y,c.Beef.fromBinary(p.BEEF)),S=i.default.decode(x);if(S.fields.length<1||S.fields.length>2)throw new Error("Invalid token.");b=S.fields[0]}catch{throw new Error(`Invalid value found. You need to call set to collapse the corrupted state (or relinquish the corrupted ${m[0].outpoint} output from the ${this.context} basket) before you can get this value again.`)}if(!this.encrypt)g.value=s.toUTF8(b);else{const{plaintext:x}=await this.wallet.decrypt({...this.getProtocol(d),ciphertext:b});g.value=s.toUTF8(x)}return g}getInputs(d){const h=[];for(let f=0;f<d.length;f++)h.push({outpoint:d[f].outpoint,unlockingScriptLength:74,inputDescription:"Previous key-value token"});return h}async getSpends(d,h,f,p){const g=this.getProtocol(d),m=a.default.fromAtomicBEEF(p),y={};for(let b=0;b<h.length;b++){const S=await f.unlock(g.protocolID,g.keyID,"self").sign(m,b);y[b]={unlockingScript:S.toHex()}}return y}async set(d,h){const f=await this.lookupValue(d,void 0,10);if(f.value===h){if(f.outpoint===void 0)throw new Error("outpoint must be valid when value is valid and unchanged");return f.outpoint}const p=this.getProtocol(d);let g=s.toArray(h,"utf8");if(this.encrypt){const{ciphertext:P}=await this.wallet.encrypt({...p,plaintext:g});g=P}const m=new i.default(this.wallet,this.originator),y=await m.lock([g],p.protocolID,p.keyID,"self"),{outputs:b,BEEF:x}=f.lor;let S;try{const P=this.getInputs(b),{txid:_,signableTransaction:I}=await this.wallet.createAction({description:`Update ${d} in ${this.context}`,inputBEEF:x,inputs:P,outputs:[{basket:this.context,tags:[d],lockingScript:y.toHex(),satoshis:1,outputDescription:"Key-value token"}],options:{acceptDelayedBroadcast:!1,randomizeOutputs:!1}});if(b.length>0&&typeof I!="object")throw new Error("Wallet did not return a signable transaction when expected.");if(I==null)S=`${_}.0`;else{const C=await this.getSpends(d,b,m,I.tx),{txid:A}=await this.wallet.signAction({reference:I.reference,spends:C});S=`${A}.0`}}catch{throw new Error(`There are ${b.length} outputs with tag ${d} that cannot be unlocked.`)}return S}async remove(d){const h=[];for(;;){const{outputs:f,BEEF:p,totalOutputs:g}=await this.getOutputs(d);if(f.length>0){const m=new i.default(this.wallet,this.originator);try{const y=this.getInputs(f),{signableTransaction:b}=await this.wallet.createAction({description:`Remove ${d} in ${this.context}`,inputBEEF:p,inputs:y,options:{acceptDelayedBroadcast:!1}});if(typeof b!="object")throw new Error("Wallet did not return a signable transaction when expected.");const x=await this.getSpends(d,f,m,b.tx),{txid:S}=await this.wallet.signAction({reference:b.reference,spends:x});if(S===void 0)throw new Error("signAction must return a valid txid");h.push(S)}catch{throw new Error(`There are ${g} outputs with tag ${d} that cannot be unlocked.`)}}if(f.length===g)break}return h}};return ol.default=l,ol}var VB;function Fbe(){return VB||(VB=1,function(t){var e=p1&&p1.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(t,"__esModule",{value:!0}),t.LocalKVStore=void 0;var n=Bbe();Object.defineProperty(t,"LocalKVStore",{enumerable:!0,get:function(){return e(n).default}})}(p1)),p1}var WB;function sr(){return WB||(WB=1,function(t){var e=vp&&vp.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,a)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=vp&&vp.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(pu(),t),n(_P(),t),n(ej(),t),n(m_(),t),n(tbe(),t),n(rbe(),t),n(ibe(),t),n(sbe(),t),n(lbe(),t),n(mbe(),t),n(ybe(),t),n(TP(),t),n(xj(),t),n(Mbe(),t),n(IP(),t),n(Cj(),t),n(Obe(),t),n(Dbe(),t),n(Fbe(),t)}(vp)),vp}var m1={},jB;function Aj(){if(jB)return m1;jB=1,Object.defineProperty(m1,"__esModule",{value:!0}),m1.formatAmountWithCurrency=void 0;function t(e,n,r){const{decimalPlaces:i,useCommas:s=!0,useUnderscores:o=!1}=r||{};let a=i??(e<1&&e!==0?Math.min(Math.max(2,-Math.floor(Math.log10(e))+1),4):["BSV","SATS"].includes(n)?8:2),c=parseFloat(e.toFixed(a)).toString(),[l,u]=c.split(".");o?l=l.replace(/\B(?=(\d{3})+(?!\d))/g,"_"):s&&(l=l.replace(/\B(?=(\d{3})+(?!\d))/g,",")),c=u?`${l}.${u}`:l;let d="";switch(n){case"USD":d="$";break;case"GBP":d="";break;case"EUR":d="";break;case"SATS":d=" satoshis";break;case"BSV":d=" BSV";break}c=n==="SATS"||n==="BSV"?c+d:d+c;let h={formattedAmount:c};return e<.01&&(h.hoverText=c,n==="BSV"?h.formattedAmount=`< 0.01${d}`:h.formattedAmount=`< ${d}0.01`),h}return m1.formatAmountWithCurrency=t,m1}var ac={},Np={},g1={},qB;function Rj(){if(qB)return g1;qB=1,Object.defineProperty(g1,"__esModule",{value:!0}),g1.WalletError=void 0;let t=class mk extends Error{constructor(n,r,i,s){super(r),this.details=s,this.isError=!0,this.name=n,i&&(this.stack=i)}get code(){return this.name}set code(n){this.name=n}get description(){return this.message}set description(n){this.message=n}static fromUnknown(n){let r="WERR_UNKNOWN",i="",s;const o={};n!==null&&typeof n=="object"&&(n.name==="Error"||n.name==="FetchError"?r=n.code||n.status||"WERR_UNKNOWN":r=n.name||n.code||n.status||"WERR_UNKNOWN",typeof r!="string"&&(r="WERR_UNKNOWN"),i=n.message||n.description||"",typeof i!="string"&&(i="WERR_UNKNOWN"),typeof n.stack=="string"&&(s=n.stack),typeof n.sql=="string"&&(o.sql=n.sql),typeof n.sqlMessage=="string"&&(o.sqlMessage=n.sqlMessage));const a=new mk(r,i,s,Object.keys(o).length>0?o:void 0);if(n!==null&&typeof n=="object"){for(const[c,l]of Object.entries(n))if(!(c!=="walletError"&&typeof l!="string"&&typeof l!="number"&&!Array.isArray(l)))switch(c){case"walletError":a[c]=mk.fromUnknown(l);break;case"status":break;case"name":break;case"code":break;case"message":break;case"description":break;case"stack":break;case"sql":break;case"sqlMessage":break;default:a[c]=l;break}}return a}asStatus(){return{status:"error",code:this.name,description:this.message}}};return g1.WalletError=t,g1}var rA={},KB;function Ube(){return KB||(KB=1,Object.defineProperty(rA,"__esModule",{value:!0})),rA}var iA={},GB;function $be(){return GB||(GB=1,Object.defineProperty(iA,"__esModule",{value:!0})),iA}var Cr={},XB;function zbe(){if(XB)return Cr;XB=1,Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.WERR_REVIEW_ACTIONS=Cr.WERR_INVALID_PUBLIC_KEY=Cr.WERR_INSUFFICIENT_FUNDS=Cr.WERR_NOT_ACTIVE=Cr.WERR_UNAUTHORIZED=Cr.WERR_NETWORK_CHAIN=Cr.WERR_BAD_REQUEST=Cr.WERR_MISSING_PARAMETER=Cr.WERR_INVALID_PARAMETER=Cr.WERR_BROADCAST_UNAVAILABLE=Cr.WERR_INVALID_OPERATION=Cr.WERR_INTERNAL=Cr.WERR_NOT_IMPLEMENTED=void 0;const t=Rj();class e extends t.WalletError{constructor(g){super("WERR_NOT_IMPLEMENTED",g??"Not implemented.")}}Cr.WERR_NOT_IMPLEMENTED=e;class n extends t.WalletError{constructor(g){super("WERR_INTERNAL",g??"An internal error has occurred.")}}Cr.WERR_INTERNAL=n;class r extends t.WalletError{constructor(g){super("WERR_INVALID_OPERATION",g??"An invalid operation was requested.")}}Cr.WERR_INVALID_OPERATION=r;class i extends t.WalletError{constructor(g){super("WERR_BROADCAST_UNAVAILABLE","Unable to broadcast transaction at this time.")}}Cr.WERR_BROADCAST_UNAVAILABLE=i;class s extends t.WalletError{constructor(g,m){super("WERR_INVALID_PARAMETER",`The ${g} parameter must be ${m??"valid."}`),this.parameter=g}}Cr.WERR_INVALID_PARAMETER=s;class o extends t.WalletError{constructor(g){super("WERR_MISSING_PARAMETER",`The required ${g} parameter is missing.`),this.parameter=g}}Cr.WERR_MISSING_PARAMETER=o;class a extends t.WalletError{constructor(g){super("WERR_BAD_REQUEST",g??"The request is invalid.")}}Cr.WERR_BAD_REQUEST=a;class c extends t.WalletError{constructor(g){super("WERR_NETWORK_CHAIN",g??"Configured network chain is invalid or does not match across services.")}}Cr.WERR_NETWORK_CHAIN=c;class l extends t.WalletError{constructor(g){super("WERR_UNAUTHORIZED",g??"Access is denied due to an authorization error.")}}Cr.WERR_UNAUTHORIZED=l;class u extends t.WalletError{constructor(g){super("WERR_NOT_ACTIVE",g??"WalletStorageManager is not accessing user's active storage or there are conflicting active stores configured.")}}Cr.WERR_NOT_ACTIVE=u;class d extends t.WalletError{constructor(g,m){super("WERR_INSUFFICIENT_FUNDS",`Insufficient funds in the available inputs to cover the cost of the required outputs and the transaction fee (${m} more satoshis are needed, for a total of ${g}), plus whatever would be required in order to pay the fee to unlock and spend the outputs used to provide the additional satoshis.`),this.totalSatoshisNeeded=g,this.moreSatoshisNeeded=m}}Cr.WERR_INSUFFICIENT_FUNDS=d;class h extends t.WalletError{constructor(g,m="mainnet"){const y=m==="mainnet"?`The provided public key "${g}" is invalid or malformed.`:"The provided public key is invalid or malformed.";super("WERR_INVALID_PUBLIC_KEY",y),this.key=g}}Cr.WERR_INVALID_PUBLIC_KEY=h;class f extends t.WalletError{constructor(g,m,y,b,x){super("WERR_REVIEW_ACTIONS","Undelayed createAction or signAction results require review."),this.reviewActionResults=g,this.sendWithResults=m,this.txid=y,this.tx=b,this.noSendChange=x}}return Cr.WERR_REVIEW_ACTIONS=f,Cr}var nr={},YB;function Hbe(){if(YB)return nr;YB=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.parseWalletOutpoint=n,nr.validateSatoshis=u,nr.validateOptionalInteger=d,nr.validateInteger=h,nr.validatePositiveIntegerOrZero=f,nr.validateStringLength=p,nr.isHexString=C,nr.validateCreateActionInput=A,nr.validateCreateActionOutput=M,nr.validateCreateActionOptions=k,nr.validateCreateActionArgs=O,nr.validateSignActionOptions=B,nr.validateSignActionArgs=$,nr.validateAbortActionArgs=U,nr.validateWalletPayment=q,nr.validateBasketInsertion=K,nr.validateInternalizeOutput=V,nr.validateOriginator=G,nr.validateInternalizeActionArgs=j,nr.validateOptionalOutpointString=Q,nr.validateOutpointString=se,nr.validateRelinquishOutputArgs=Z,nr.validateRelinquishCertificateArgs=ie,nr.validateListCertificatesArgs=pe,nr.validateAcquireCertificateArgs=Ae,nr.validateAcquireIssuanceCertificateArgs=Oe,nr.validateAcquireDirectCertificateArgs=Be,nr.validateProveCertificateArgs=ce,nr.validateDiscoverByIdentityKeyArgs=Ge,nr.validateDiscoverByAttributesArgs=He,nr.validateListOutputsArgs=Re,nr.validateListActionsArgs=je;const t=sr(),e=Fn();function n(te){const[ee,X]=te.split(".");return{txid:ee,vout:Number(X)}}function r(te){return te??!0}function i(te){return te??!1}function s(te){return te??0}function o(te){return te??4294967295}function a(te){return te??1}function c(te){return te??[]}function l(te,ee,X,we){if(te!==void 0)return p(te,ee,X,we)}function u(te,ee,X){if(te===void 0||!Number.isInteger(te)||te<0||te>21e14)throw new e.sdk.WERR_INVALID_PARAMETER(ee,"a valid number of satoshis");if(X!==void 0&&te<X)throw new e.sdk.WERR_INVALID_PARAMETER(ee,`at least ${X} satoshis.`);return te}function d(te,ee,X,we){if(te!==void 0)return h(te,ee,void 0,X,we)}function h(te,ee,X,we,Ne){if(te===void 0){if(X!==void 0)return X;throw new e.sdk.WERR_INVALID_PARAMETER(ee,"a valid integer")}if(!Number.isInteger(te))throw new e.sdk.WERR_INVALID_PARAMETER(ee,"an integer");if(te=Number(te),we!==void 0&&te<we)throw new e.sdk.WERR_INVALID_PARAMETER(ee,`at least ${we} length.`);if(Ne!==void 0&&te>Ne)throw new e.sdk.WERR_INVALID_PARAMETER(ee,`no more than ${Ne} length.`);return te}function f(te,ee){return h(te,ee,0,0)}function p(te,ee,X,we){const Ne=t.Utils.toArray(te,"utf8").length;if(X!==void 0&&Ne<X)throw new e.sdk.WERR_INVALID_PARAMETER(ee,`at least ${X} length.`);if(we!==void 0&&Ne>we)throw new e.sdk.WERR_INVALID_PARAMETER(ee,`no more than ${we} length.`);return te}function g(te){if(te!==void 0)return m(te)}function m(te){return x(te,"basket",1,300)}function y(te){return x(te,"label",1,300)}function b(te){return x(te,"tag",1,300)}function x(te,ee,X,we){te=te.trim().toLowerCase();const Ne=t.Utils.toArray(te,"utf8").length;if(Ne<X)throw new e.sdk.WERR_INVALID_PARAMETER(ee,`at least ${X} length.`);if(Ne>we)throw new e.sdk.WERR_INVALID_PARAMETER(ee,`no more than ${we} length.`);return te}function S(te,ee,X,we){if(te!==void 0)return P(te,ee)}function P(te,ee,X,we){te=te.trim();const Ne=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,We=/=+$/.exec(te),xe=We?We[0].length:0;if(xe>2||te.length%4!==0&&xe!==0||!Ne.test(te))throw new e.sdk.WERR_INVALID_PARAMETER(ee,"balid base64 string");return t.Utils.toArray(te,"base64").length,te}function _(te,ee,X,we){if(te!==void 0)return I(te,ee,X,we)}function I(te,ee,X,we){if(te=te.trim().toLowerCase(),te.length%2===1)throw new e.sdk.WERR_INVALID_PARAMETER(ee,`even length, not ${te.length}.`);if(!/^[0-9A-Fa-f]+$/.test(te))throw new e.sdk.WERR_INVALID_PARAMETER(ee,"hexadecimal string.");if(X!==void 0&&te.length<X)throw new e.sdk.WERR_INVALID_PARAMETER(ee,`at least ${X} length.`);if(we!==void 0&&te.length>we)throw new e.sdk.WERR_INVALID_PARAMETER(ee,`no more than ${we} length.`);return te}function C(te){return te=te.trim(),!(te.length%2===1||!/^[0-9A-Fa-f]+$/.test(te))}function A(te){var ee;if(te.unlockingScript===void 0&&te.unlockingScriptLength===void 0)throw new e.sdk.WERR_INVALID_PARAMETER("unlockingScript, unlockingScriptLength","at least one valid value.");const X=_(te.unlockingScript,"unlockingScript"),we=(ee=te.unlockingScriptLength)!==null&&ee!==void 0?ee:X.length/2;if(X&&we!==X.length/2)throw new e.sdk.WERR_INVALID_PARAMETER("unlockingScriptLength","length unlockingScript if both valid.");return{outpoint:n(te.outpoint),inputDescription:p(te.inputDescription,"inputDescription",5,2e3),unlockingScript:X,unlockingScriptLength:we,sequenceNumber:o(te.sequenceNumber)}}function M(te){return{lockingScript:I(te.lockingScript,"lockingScript"),satoshis:u(te.satoshis,"satoshis"),outputDescription:p(te.outputDescription,"outputDescription",5,2e3),basket:g(te.basket),customInstructions:te.customInstructions,tags:c(te.tags).map(X=>b(X))}}function k(te){const ee=te||{};return{signAndProcess:r(ee.signAndProcess),acceptDelayedBroadcast:r(ee.acceptDelayedBroadcast),knownTxids:c(ee.knownTxids),returnTXIDOnly:i(ee.returnTXIDOnly),noSend:i(ee.noSend),noSendChange:c(ee.noSendChange).map(we=>n(we)),sendWith:c(ee.sendWith),randomizeOutputs:r(ee.randomizeOutputs)}}function O(te){var ee;const X={description:p(te.description,"description",5,2e3),inputBEEF:te.inputBEEF,inputs:c(te.inputs).map(we=>A(we)),outputs:c(te.outputs).map(we=>M(we)),lockTime:s(te.lockTime),version:a(te.version),labels:c((ee=te.labels)===null||ee===void 0?void 0:ee.map(we=>y(we))),options:k(te.options),isSendWith:!1,isDelayed:!1,isNoSend:!1,isNewTx:!1,isRemixChange:!1,isSignAction:!1,randomVals:void 0,includeAllSourceTransactions:!1};return X.isSendWith=X.options.sendWith.length>0,X.isRemixChange=!X.isSendWith&&X.inputs.length===0&&X.outputs.length===0,X.isNewTx=X.isRemixChange||X.inputs.length>0||X.outputs.length>0,X.isSignAction=X.isNewTx&&(X.options.signAndProcess===!1||X.inputs.some(we=>we.unlockingScript===void 0)),X.isDelayed=X.options.acceptDelayedBroadcast,X.isNoSend=X.options.noSend,X}function B(te){const ee=te||{};return{acceptDelayedBroadcast:r(ee.acceptDelayedBroadcast),returnTXIDOnly:i(ee.returnTXIDOnly),noSend:i(ee.noSend),sendWith:c(ee.sendWith)}}function $(te){const ee={spends:te.spends,reference:te.reference,options:B(te.options),isSendWith:!1,isDelayed:!1,isNoSend:!1,isNewTx:!0,isRemixChange:!1};return ee.isSendWith=ee.options.sendWith.length>0,ee.isDelayed=ee.options.acceptDelayedBroadcast,ee.isNoSend=ee.options.noSend,ee}function U(te){return{reference:P(te.reference,"reference")}}function q(te){return te===void 0?void 0:{derivationPrefix:P(te.derivationPrefix,"derivationPrefix"),derivationSuffix:P(te.derivationSuffix,"derivationSuffix"),senderIdentityKey:I(te.senderIdentityKey,"senderIdentityKey")}}function K(te){return te===void 0?void 0:{basket:m(te.basket),customInstructions:l(te.customInstructions,"customInstructions",0,1e3),tags:c(te.tags).map(X=>b(X))}}function V(te){if(te.protocol!=="basket insertion"&&te.protocol!=="wallet payment")throw new e.sdk.WERR_INVALID_PARAMETER("protocol","'basket insertion' or 'wallet payment'");return{outputIndex:f(te.outputIndex,"outputIndex"),protocol:te.protocol,paymentRemittance:q(te.paymentRemittance),insertionRemittance:K(te.insertionRemittance)}}function G(te){if(te===void 0)return;te=te.trim().toLowerCase(),p(te,"originator",1,250);const ee=te.split(".");for(const X of ee)p(X,"originator part",1,63)}function j(te){const ee={tx:te.tx,outputs:te.outputs.map(X=>V(X)),description:p(te.description,"description",5,2e3),labels:(te.labels||[]).map(X=>y(X)),seekPermission:r(te.seekPermission)};try{if(t.Beef.fromBinary(ee.tx).txs.length<1)throw new e.sdk.WERR_INVALID_PARAMETER("tx","at least one transaction to internalize an output from")}catch{throw new e.sdk.WERR_INVALID_PARAMETER("tx","valid with at least one transaction to internalize an output from")}if(ee.outputs.length<1)throw new e.sdk.WERR_INVALID_PARAMETER("outputs","at least one output to internalize from the transaction");return ee}function Q(te,ee){if(te!==void 0)return se(te,ee)}function se(te,ee){const X=te.split(".");if(X.length!==2||!Number.isInteger(Number(X[1])))throw new e.sdk.WERR_INVALID_PARAMETER(ee,"txid as hex string and numeric output index joined with '.'");const we=I(X[0],`${ee} txid`,void 0,64),Ne=f(Number(X[1]),`${ee} vout`);return`${we}.${Ne}`}function Z(te){return{basket:m(te.basket),output:se(te.output,"output")}}function ie(te){return{type:P(te.type,"type"),serialNumber:P(te.serialNumber,"serialNumber"),certifier:I(te.certifier,"certifier")}}function pe(te){return{certifiers:c(te.certifiers.map(X=>I(X.trim(),"certifiers"))),types:c(te.types.map(X=>P(X.trim(),"types"))),limit:h(te.limit,"limit",10,1,1e4),offset:f(s(te.offset),"offset"),privileged:i(te.privileged),privilegedReason:l(te.privilegedReason,"privilegedReason",5,50),partial:void 0}}function ue(te){for(const ee of Object.keys(te))p(ee,"field name",1,50);return te}function le(te,ee){return te==="certifier"?te:I(te,ee)}function ae(te,ee){if(te!==void 0)return le(te,ee)}function _e(te,ee){for(const X of Object.keys(te))p(X,`${ee} field name`,1,50),P(te[X],`${ee} field value`);return te}function ye(te,ee){if(te!==void 0)return _e(te,ee)}async function Ae(te){const ee={acquisitionProtocol:te.acquisitionProtocol,type:P(te.type,"type"),serialNumber:S(te.serialNumber,"serialNumber"),certifier:I(te.certifier,"certifier"),revocationOutpoint:Q(te.revocationOutpoint,"revocationOutpoint"),fields:ue(te.fields),signature:_(te.signature,"signature"),certifierUrl:te.certifierUrl,keyringRevealer:ae(te.keyringRevealer,"keyringRevealer"),keyringForSubject:ye(te.keyringForSubject,"keyringForSubject"),privileged:i(te.privileged),privilegedReason:l(te.privilegedReason,"privilegedReason",5,50)};if(ee.privileged&&!ee.privilegedReason)throw new e.sdk.WERR_INVALID_PARAMETER("privilegedReason","valid when 'privileged' is true ");if(ee.acquisitionProtocol==="direct"){if(!ee.serialNumber)throw new e.sdk.WERR_INVALID_PARAMETER("serialNumber",'valid when acquisitionProtocol is "direct"');if(!ee.signature)throw new e.sdk.WERR_INVALID_PARAMETER("signature",'valid when acquisitionProtocol is "direct"');if(!ee.revocationOutpoint)throw new e.sdk.WERR_INVALID_PARAMETER("revocationOutpoint",'valid when acquisitionProtocol is "direct"')}return ee}function Oe(te){if(te.acquisitionProtocol!=="issuance")throw new e.sdk.WERR_INTERNAL("Only acquire certificate via issuance requests allowed here.");if(te.serialNumber)throw new e.sdk.WERR_INVALID_PARAMETER("serialNumber",'valid when acquisitionProtocol is "direct"');if(te.signature)throw new e.sdk.WERR_INVALID_PARAMETER("signature",'valid when acquisitionProtocol is "direct"');if(te.revocationOutpoint)throw new e.sdk.WERR_INVALID_PARAMETER("revocationOutpoint",'valid when acquisitionProtocol is "direct"');if(te.keyringRevealer)throw new e.sdk.WERR_INVALID_PARAMETER("keyringRevealer",'valid when acquisitionProtocol is "direct"');if(te.keyringForSubject)throw new e.sdk.WERR_INVALID_PARAMETER("keyringForSubject",'valid when acquisitionProtocol is "direct"');if(!te.certifierUrl)throw new e.sdk.WERR_INVALID_PARAMETER("certifierUrl",'valid when acquisitionProtocol is "issuance"');if(te.privileged&&!te.privilegedReason)throw new e.sdk.WERR_INVALID_PARAMETER("privilegedReason","valid when 'privileged' is true ");return{type:P(te.type,"type"),certifier:I(te.certifier,"certifier"),certifierUrl:te.certifierUrl,fields:ue(te.fields),privileged:i(te.privileged),privilegedReason:l(te.privilegedReason,"privilegedReason",5,50),subject:""}}function Be(te){if(te.acquisitionProtocol!=="direct")throw new e.sdk.WERR_INTERNAL("Only acquire direct certificate requests allowed here.");if(!te.serialNumber)throw new e.sdk.WERR_INVALID_PARAMETER("serialNumber",'valid when acquisitionProtocol is "direct"');if(!te.signature)throw new e.sdk.WERR_INVALID_PARAMETER("signature",'valid when acquisitionProtocol is "direct"');if(!te.revocationOutpoint)throw new e.sdk.WERR_INVALID_PARAMETER("revocationOutpoint",'valid when acquisitionProtocol is "direct"');if(!te.keyringRevealer)throw new e.sdk.WERR_INVALID_PARAMETER("keyringRevealer",'valid when acquisitionProtocol is "direct"');if(!te.keyringForSubject)throw new e.sdk.WERR_INVALID_PARAMETER("keyringForSubject",'valid when acquisitionProtocol is "direct"');if(te.privileged&&!te.privilegedReason)throw new e.sdk.WERR_INVALID_PARAMETER("privilegedReason","valid when 'privileged' is true ");return{type:P(te.type,"type"),serialNumber:P(te.serialNumber,"serialNumber"),certifier:I(te.certifier,"certifier"),revocationOutpoint:se(te.revocationOutpoint,"revocationOutpoint"),fields:ue(te.fields),signature:I(te.signature,"signature"),keyringRevealer:le(te.keyringRevealer,"keyringRevealer"),keyringForSubject:_e(te.keyringForSubject,"keyringForSubject"),privileged:i(te.privileged),privilegedReason:l(te.privilegedReason,"privilegedReason",5,50),subject:""}}function ce(te){if(te.privileged&&!te.privilegedReason)throw new e.sdk.WERR_INVALID_PARAMETER("privilegedReason","valid when 'privileged' is true ");return{type:S(te.certificate.type,"certificate.type"),serialNumber:S(te.certificate.serialNumber,"certificate.serialNumber"),certifier:_(te.certificate.certifier,"certificate.certifier"),subject:_(te.certificate.subject,"certificate.subject"),revocationOutpoint:Q(te.certificate.revocationOutpoint,"certificate.revocationOutpoint"),signature:_(te.certificate.signature,"certificate.signature"),fieldsToReveal:c(te.fieldsToReveal).map(X=>p(X,`fieldsToReveal ${X}`,1,50)),verifier:I(te.verifier,"verifier"),privileged:i(te.privileged),privilegedReason:l(te.privilegedReason,"privilegedReason",5,50)}}function Ge(te){return{identityKey:I(te.identityKey,"identityKey",66,66),limit:h(te.limit,"limit",10,1,1e4),offset:f(s(te.offset),"offset"),seekPermission:i(te.seekPermission)}}function Pe(te){for(const ee of Object.keys(te))p(ee,`field name ${ee}`,1,50);return te}function He(te){return{attributes:Pe(te.attributes),limit:h(te.limit,"limit",10,1,1e4),offset:f(s(te.offset),"offset"),seekPermission:i(te.seekPermission)}}function Re(te){let ee;if(te.tagQueryMode===void 0||te.tagQueryMode==="any")ee="any";else if(te.tagQueryMode==="all")ee="all";else throw new e.sdk.WERR_INVALID_PARAMETER("tagQueryMode","undefined, 'any', or 'all'");return{basket:p(te.basket,"basket",1,300),tags:(te.tags||[]).map(we=>p(we,"tag",1,300)),tagQueryMode:ee,includeLockingScripts:te.include==="locking scripts",includeTransactions:te.include==="entire transactions",includeCustomInstructions:i(te.includeCustomInstructions),includeTags:i(te.includeTags),includeLabels:i(te.includeLabels),limit:h(te.limit,"limit",10,1,1e4),offset:h(te.offset,"offset",0,0),seekPermission:r(te.seekPermission),knownTxids:[]}}function je(te){let ee;if(te.labelQueryMode===void 0||te.labelQueryMode==="any")ee="any";else if(te.labelQueryMode==="all")ee="all";else throw new e.sdk.WERR_INVALID_PARAMETER("labelQueryMode","undefined, 'any', or 'all'");return{labels:(te.labels||[]).map(we=>y(we)),labelQueryMode:ee,includeLabels:i(te.includeLabels),includeInputs:i(te.includeInputs),includeInputSourceLockingScripts:i(te.includeInputSourceLockingScripts),includeInputUnlockingScripts:i(te.includeInputUnlockingScripts),includeOutputs:i(te.includeOutputs),includeOutputLockingScripts:i(te.includeOutputLockingScripts),limit:h(te.limit,"limit",10,1,1e4),offset:h(te.offset,"offset",0,0),seekPermission:r(te.seekPermission)}}return nr}var sA={},ZB;function Vbe(){return ZB||(ZB=1,Object.defineProperty(sA,"__esModule",{value:!0})),sA}var oA={},JB;function Wbe(){return JB||(JB=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.specOpThrowReviewActions=t.specOpFailedActions=t.specOpNoSendActions=t.specOpSetWalletChangeParams=t.specOpInvalidChange=t.specOpWalletBalance=t.ProvenTxReqNonTerminalStatus=t.ProvenTxReqTerminalStatus=void 0,t.isListOutputsSpecOp=e,t.isListActionsSpecOp=n,t.isCreateActionSpecOp=r,t.ProvenTxReqTerminalStatus=["completed","invalid","doubleSpend"],t.ProvenTxReqNonTerminalStatus=["sending","unsent","nosend","unknown","nonfinal","unprocessed","unmined","callback","unconfirmed"],t.specOpWalletBalance="893b7646de0e1c9f741bd6e9169b76a8847ae34adef7bef1e6a285371206d2e8",t.specOpInvalidChange="5a76fd430a311f8bc0553859061710a4475c19fed46e2ff95969aa918e612e57",t.specOpSetWalletChangeParams="a4979d28ced8581e9c1c92f1001cc7cb3aabf8ea32e10888ad898f0a509a3929";function e(i){return[t.specOpWalletBalance,t.specOpInvalidChange,t.specOpSetWalletChangeParams].indexOf(i)>=0}t.specOpNoSendActions="ac6b20a3bb320adafecd637b25c84b792ad828d3aa510d05dc841481f664277d",t.specOpFailedActions="97d4eb1e49215e3374cc2c1939a7c43a55e95c7427bf2d45ed63e3b4e0c88153";function n(i){return[t.specOpNoSendActions,t.specOpFailedActions].indexOf(i)>=0}t.specOpThrowReviewActions="a496e747fc3ad5fabdd4ae8f91184e71f87539bd3d962aa2548942faaaf0047a";function r(i){return[t.specOpThrowReviewActions].indexOf(i)>=0}}(oA)),oA}var aA={},QB;function jbe(){return QB||(QB=1,Object.defineProperty(aA,"__esModule",{value:!0})),aA}var y1={},eF;function WO(){if(eF)return y1;eF=1,Object.defineProperty(y1,"__esModule",{value:!0}),y1.PrivilegedKeyManager=void 0;const t=sr();let e=class{constructor(r,i=12e4){this.chunkPropNames=[],this.chunkPadPropNames=[],this.decoyPropNamesDestroy=[],this.decoyPropNamesRemain=[],this.CHUNK_COUNT=4,this.keyGetter=r,this.retentionPeriod=i;for(let s=0;s<2;s++){const o=this.generateRandomPropName();this[o]=Uint8Array.from((0,t.Random)(16)),this.decoyPropNamesRemain.push(o)}}destroyKey(){try{for(const r of this.chunkPropNames){const i=this[r];i&&i.fill(0),delete this[r]}for(const r of this.chunkPadPropNames){const i=this[r];i&&i.fill(0),delete this[r]}for(const r of this.decoyPropNamesDestroy){const i=this[r];i&&i.fill(0),delete this[r]}this.chunkPropNames=[],this.chunkPadPropNames=[],this.decoyPropNamesDestroy=[]}catch{}finally{this.destroyTimer&&(clearTimeout(this.destroyTimer),this.destroyTimer=void 0)}}scheduleKeyDestruction(){this.destroyTimer&&clearTimeout(this.destroyTimer),this.destroyTimer=setTimeout(()=>{this.destroyKey()},this.retentionPeriod)}xorBytes(r,i){const s=new Uint8Array(r.length);for(let o=0;o<r.length;o++)s[o]=r[o]^i[o];return s}splitKeyIntoChunks(r){const i=Math.floor(r.length/this.CHUNK_COUNT),s=[];let o=0;for(let a=0;a<this.CHUNK_COUNT;a++){const c=a===this.CHUNK_COUNT-1?r.length-o:i;s.push(r.slice(o,o+c)),o+=c}return s}reassembleKeyFromChunks(){try{const r=[];for(let a=0;a<this.chunkPropNames.length;a++){const c=this[this.chunkPropNames[a]],l=this[this.chunkPadPropNames[a]];if(!c||!l||c.length!==l.length)return null;const u=this.xorBytes(c,l);r.push(u)}const i=r.reduce((a,c)=>a+c.length,0);if(i!==32)return null;const s=new Uint8Array(i);let o=0;for(const a of r)s.set(a,o),o+=a.length,a.fill(0);return s}catch{return null}}generateRandomPropName(){return`_${t.Utils.toHex((0,t.Random)(4))}_${Math.floor(Math.random()*1e6)}`}get32ByteRepresentation(r){const i=r.toArray();if(i.length>32)throw new Error("PrivilegedKeyManager: Expected a 32-byte key, but got more.");const s=new Uint8Array(32);return s.set(i,32-i.length),s}async getPrivilegedKey(r){if(this.chunkPropNames.length>0&&this.chunkPadPropNames.length>0){const a=this.reassembleKeyFromChunks();if(a&&a.length===32){const c=t.Utils.toHex([...a]);return a.fill(0),this.scheduleKeyDestruction(),new t.PrivateKey(c,"hex")}}const i=await this.keyGetter(r),s=this.get32ByteRepresentation(i);this.destroyKey();const o=this.splitKeyIntoChunks(s);for(let a=0;a<o.length;a++){const c=this.generateRandomPropName(),l=this.generateRandomPropName();this.chunkPropNames.push(c),this.chunkPadPropNames.push(l);const u=Uint8Array.from((0,t.Random)(o[a].length)),d=this.xorBytes(o[a],u);this[c]=d,this[l]=u}for(let a=0;a<2;a++){const c=this.generateRandomPropName();this[c]=Uint8Array.from((0,t.Random)(32)),this.decoyPropNamesDestroy.push(c)}return s.fill(0),this.scheduleKeyDestruction(),i}async getPublicKey(r){return new t.ProtoWallet(await this.getPrivilegedKey(r.privilegedReason)).getPublicKey(r)}async revealCounterpartyKeyLinkage(r){return new t.ProtoWallet(await this.getPrivilegedKey(r.privilegedReason)).revealCounterpartyKeyLinkage(r)}async revealSpecificKeyLinkage(r){return new t.ProtoWallet(await this.getPrivilegedKey(r.privilegedReason)).revealSpecificKeyLinkage(r)}async encrypt(r){return new t.ProtoWallet(await this.getPrivilegedKey(r.privilegedReason)).encrypt(r)}async decrypt(r){return new t.ProtoWallet(await this.getPrivilegedKey(r.privilegedReason)).decrypt(r)}async createHmac(r){return new t.ProtoWallet(await this.getPrivilegedKey(r.privilegedReason)).createHmac(r)}async verifyHmac(r){return new t.ProtoWallet(await this.getPrivilegedKey(r.privilegedReason)).verifyHmac(r)}async createSignature(r){return new t.ProtoWallet(await this.getPrivilegedKey(r.privilegedReason)).createSignature(r)}async verifySignature(r){return new t.ProtoWallet(await this.getPrivilegedKey(r.privilegedReason)).verifySignature(r)}};return y1.PrivilegedKeyManager=e,y1}var tF;function oh(){return tF||(tF=1,function(t){var e=Np&&Np.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,a)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=Np&&Np.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(Rj(),t),n(Ube(),t),n($be(),t),n(zbe(),t),n(Hbe(),t),n(Vbe(),t),n(Wbe(),t),n(jbe(),t),n(WO(),t)}(Np)),Np}var Lp={},v1={},nF;function qbe(){if(nF)return v1;nF=1,Object.defineProperty(v1,"__esModule",{value:!0}),v1.stampLog=t,v1.stampLogFormat=e;function t(n,r){const i=`${new Date().toISOString()} ${r}
`;if(typeof n=="object"&&typeof n.log=="string")return n.log=n.log+i;if(typeof n=="string")return n+i}function e(n){if(typeof n!="string")return"";const r=n.split(`
`),i=[];let s=0;const o=[];for(const l of r){const u=l.indexOf(" ");if(u>-1){const d=new Date(l.substring(0,u)).getTime(),h=l.substring(u+1),f=d-(s||d),p=h.indexOf("**NETWORK**")>-1;p&&o.push(i.length),i.push({when:d,rest:h,delta:f,newClock:p}),s=d}}const a=i[i.length-1].when-i[0].when;if(o.length%2===0){let l=a,u=0;for(const h of o)l-=i[h-1].when-i[u].when,u=h;l-=i[i.length-1].when-i[u].when;let d=o.length;for(const h of o){const f=d>1?Math.floor(l/d):l;i[h].delta=f,l-=f,d--}}let c=`${new Date(i[0].when).toISOString()} Total = ${a} msecs
`;for(const l of i){let u=l.delta.toString();u=`${" ".repeat(8-u.length)}${u}`,c+=`${u} ${l.rest}
`}return c}return v1}var lA={},rF;function kj(){return rF||(rF=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ScriptTemplateBRC29=t.brc29ProtocolID=void 0;const e=Nj(),n=sr();t.brc29ProtocolID=[2,"3241645161d8"];class r{constructor(s){this.params=s,this.unlockLength=108,this.p2pkh=new n.P2PKH,(0,e.verifyTruthy)(s.derivationPrefix),(0,e.verifyTruthy)(s.derivationSuffix)}getKeyID(){return`${this.params.derivationPrefix} ${this.params.derivationSuffix}`}getKeyDeriver(s){return typeof s=="string"&&(s=n.PrivateKey.fromHex(s)),!this.params.keyDeriver||this.params.keyDeriver.rootKey.toHex()!==s.toHex()?new n.KeyDeriver(s):this.params.keyDeriver}lock(s,o){const a=this.getKeyDeriver(s).derivePublicKey(t.brc29ProtocolID,this.getKeyID(),o,!1).toAddress();return this.p2pkh.lock(a)}unlock(s,o,a,c){const l=this.getKeyDeriver(s).derivePrivateKey(t.brc29ProtocolID,this.getKeyID(),o).toHex();return this.p2pkh.unlock((0,e.asBsvSdkPrivateKey)(l),"all",!1,a,c)}}t.ScriptTemplateBRC29=r}(lA)),lA}var zE={},iF;function Kbe(){if(iF)return zE;iF=1,Object.defineProperty(zE,"__esModule",{value:!0}),zE.parseTxScriptOffsets=e;const t=sr();function e(n){const r=new t.Utils.Reader(n),i=[],s=[];r.pos+=4;const o=r.readVarIntNum();for(let c=0;c<o;c++){r.pos+=36;const l=r.readVarIntNum();i.push({vin:c,offset:r.pos,length:l}),r.pos+=l+4}const a=r.readVarIntNum();for(let c=0;c<a;c++){r.pos+=8;const l=r.readVarIntNum();s.push({vout:c,offset:r.pos,length:l}),r.pos+=l}return{inputs:i,outputs:s}}return zE}var HE={},sF;function Oj(){if(sF)return HE;sF=1,Object.defineProperty(HE,"__esModule",{value:!0}),HE.convertProofToMerklePath=e;const t=sr();function e(n,r){const i=r.height,s=r.nodes.length,o=Array(s).fill(0).map(()=>[]);let a=r.index;for(let c=0;c<s;c++){const l=r.nodes[c],u=a%2===1,h={offset:u?a-1:a+1};if(l==="*"||c===0&&l===n?h.duplicate=!0:h.hash=l,o[c].push(h),c===0){const f={offset:r.index,hash:n,txid:!0};u?o[0].push(f):o[0].unshift(f)}a=a>>1}return new t.MerklePath(i,o)}return HE}var Mr={},oF;function PP(){if(oF)return Mr;oF=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.getIdentityKey=n,Mr.toWalletNetwork=r,Mr.makeAtomicBeef=i,Mr.asBsvSdkTx=s,Mr.asBsvSdkScript=o,Mr.asBsvSdkPrivateKey=a,Mr.asBsvSdkPublickKey=c,Mr.verifyTruthy=l,Mr.verifyHexString=u,Mr.verifyOptionalHexString=d,Mr.verifyNumber=h,Mr.verifyInteger=f,Mr.verifyId=p,Mr.verifyOneOrNone=g,Mr.verifyOne=m,Mr.wait=y,Mr.randomBytes=b,Mr.randomBytesHex=x,Mr.randomBytesBase64=S,Mr.validateSecondsSinceEpoch=P,Mr.arraysEqual=_,Mr.optionalArraysEqual=I,Mr.maxDate=C,Mr.sha256Hash=A,Mr.doubleSha256HashLE=M,Mr.doubleSha256BE=k;const t=sr(),e=Fn();async function n(O){return(await O.getPublicKey({identityKey:!0})).publicKey}function r(O){return O==="main"?"mainnet":"testnet"}function i(O,B){return Array.isArray(B)&&(B=t.Beef.fromBinary(B)),B.mergeTransaction(O),B.toBinaryAtomic(O.id("hex"))}function s(O){return Array.isArray(O)?O=t.Transaction.fromBinary(O):typeof O=="string"&&(O=t.Transaction.fromHex(O)),O}function o(O){return Array.isArray(O)?O=t.Script.fromBinary(O):typeof O=="string"&&(O=t.Script.fromHex(O)),O}function a(O){return t.PrivateKey.fromString(O,"hex")}function c(O){return t.PublicKey.fromString(O)}function l(O,B){if(!O)throw new e.sdk.WERR_INTERNAL(B??"A truthy value is required.");return O}function u(O){if(typeof O!="string")throw new e.sdk.WERR_INTERNAL("A string is required.");return O=O.trim().toLowerCase(),O}function d(O){if(O)return u(O)}function h(O){if(typeof O!="number")throw new e.sdk.WERR_INTERNAL("A number is required.");return O}function f(O){if(typeof O!="number"||!Number.isInteger(O))throw new e.sdk.WERR_INTERNAL("An integer is required.");return O}function p(O){if(O=f(O),O<1)throw new e.sdk.WERR_INTERNAL("id must be valid integer greater than zero.");return O}function g(O){if(O.length>1)throw new e.sdk.WERR_BAD_REQUEST("Result must be unique.");return O[0]}function m(O,B){if(O.length!==1)throw new e.sdk.WERR_BAD_REQUEST(B??"Result must exist and be unique.");return O[0]}function y(O){return new Promise(B=>setTimeout(B,O))}function b(O){return(0,t.Random)(O)}function x(O){return t.Utils.toHex((0,t.Random)(O))}function S(O){return t.Utils.toBase64((0,t.Random)(O))}function P(O){const B=new Date(O*1e3);if(B.getTime()/1e3!==O||O<16e8||O>1e11)throw new e.sdk.WERR_INVALID_PARAMETER("time",'valid "since epoch" unix time');return B}function _(O,B){if(O.length!==B.length)return!1;for(let $=0;$<O.length;$++)if(O[$]!==B[$])return!1;return!0}function I(O,B){return!O&&!B?!0:!O||!B?!1:_(O,B)}function C(O,B){if(O&&B)return O>B?O:B;if(O)return O;if(B)return B}function A(O){return new t.Hash.SHA256().update(O).digest()}function M(O){const B=new t.Hash.SHA256().update(O).digest();return new t.Hash.SHA256().update(B).digest()}function k(O){return M(O).reverse()}return Mr}var b1={},aF;function Gbe(){if(aF)return b1;aF=1,Object.defineProperty(b1,"__esModule",{value:!0}),b1.asString=e,b1.asArray=n;const t=sr();function e(r){return typeof r=="string"?r:t.Utils.toHex(r)}function n(r){return Array.isArray(r)?r:t.Utils.toArray(r,"hex")}return b1}var lF;function Nj(){return lF||(lF=1,function(t){var e=Lp&&Lp.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,a)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=Lp&&Lp.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(qbe(),t),n(kj(),t),n(Kbe(),t),n(Oj(),t),n(PP(),t),n(Gbe(),t)}(Lp)),Lp}var x1={},cF;function Xbe(){if(cF)return x1;cF=1,Object.defineProperty(x1,"__esModule",{value:!0}),x1.WalletSigner=void 0;let t=class{constructor(n,r,i){this.isWalletSigner=!0,this.chain=n,this.keyDeriver=r,this.storage=i}};return x1.WalletSigner=t,x1}var w1={},uF;function Ybe(){if(uF)return w1;uF=1,Object.defineProperty(w1,"__esModule",{value:!0}),w1.WalletPermissionsManager=void 0;const t=sr(),e=oh(),n={protocol:"admin protocol-permission",basket:"admin basket-access",certificate:"admin certificate-access",spending:"admin spending-authorization"};let r=class yd{constructor(s,o,a={}){this.callbacks={onProtocolPermissionRequested:[],onBasketAccessRequested:[],onCertificateAccessRequested:[],onSpendingAuthorizationRequested:[]},this.activeRequests=new Map,this.underlying=s,this.adminOriginator=o,this.config={seekProtocolPermissionsForSigning:!0,seekProtocolPermissionsForEncrypting:!0,seekProtocolPermissionsForHMAC:!0,seekPermissionsForKeyLinkageRevelation:!0,seekPermissionsForPublicKeyRevelation:!0,seekPermissionsForIdentityKeyRevelation:!0,seekPermissionsForIdentityResolution:!0,seekBasketInsertionPermissions:!0,seekBasketRemovalPermissions:!0,seekBasketListingPermissions:!0,seekPermissionWhenApplyingActionLabels:!0,seekPermissionWhenListingActionsByLabel:!0,seekCertificateDisclosurePermissions:!0,seekCertificateAcquisitionPermissions:!0,seekCertificateRelinquishmentPermissions:!0,seekCertificateListingPermissions:!0,encryptWalletMetadata:!0,seekSpendingPermissions:!0,differentiatePrivilegedOperations:!0,...a}}bindCallback(s,o){const a=this.callbacks[s];return a.push(o),a.length-1}unbindCallback(s,o){if(!this.callbacks[s])return!1;const a=this.callbacks[s];if(typeof o=="number")return a[o]?(a[o]=null,!0):!1;{const c=a.indexOf(o);return c!==-1?(a[c]=null,!0):!1}}async callEvent(s,o){const a=this.callbacks[s]||[];for(const c of a)if(typeof c=="function")try{await c(o)}catch{}}async grantPermission(s){const o=this.activeRequests.get(s.requestID);if(!o)throw new Error("Request ID not found.");for(const a of o.pending)a.resolve(!0);this.activeRequests.delete(s.requestID),s.ephemeral||(o.request.renewal?await this.renewPermissionOnChain(o.request.previousToken,o.request,s.expiry||Math.floor(Date.now()/1e3)+3600*24*30,s.amount):await this.createPermissionOnChain(o.request,s.expiry||Math.floor(Date.now()/1e3)+3600*24*30,s.amount))}async denyPermission(s){const o=this.activeRequests.get(s);if(!o)throw new Error("Request ID not found.");for(const a of o.pending)a.reject(new Error("Permission denied."));this.activeRequests.delete(s)}async ensureProtocolPermission({originator:s,privileged:o,protocolID:a,counterparty:c,reason:l,seekPermission:u=!0,usageType:d}){if(this.isAdminOriginator(s))return!0;const[h,f]=a;if(h===0)return!0;if(this.isAdminProtocol(a))throw new Error(`Protocol ${f} is admin-only.`);if(d==="signing"&&!this.config.seekProtocolPermissionsForSigning||d==="encrypting"&&!this.config.seekProtocolPermissionsForEncrypting||d==="hmac"&&!this.config.seekProtocolPermissionsForHMAC||d==="publicKey"&&!this.config.seekPermissionsForPublicKeyRevelation||d==="identityKey"&&!this.config.seekPermissionsForIdentityKeyRevelation||d==="linkageRevelation"&&!this.config.seekPermissionsForKeyLinkageRevelation)return!0;this.config.differentiatePrivilegedOperations||(o=!1);const p=await this.findProtocolToken(s,o,a,c,!0);if(p)if(this.isTokenExpired(p.expiry)){if(!u)throw new Error("Protocol permission expired and no further user consent allowed (seekPermission=false).");return await this.requestPermissionFlow({type:"protocol",originator:s,privileged:o,protocolID:a,counterparty:c,reason:l,renewal:!0,previousToken:p})}else return!0;else{if(!u)throw new Error("No protocol permission token found (seekPermission=false).");return await this.requestPermissionFlow({type:"protocol",originator:s,privileged:o,protocolID:a,counterparty:c,reason:l,renewal:!1})}}async ensureBasketAccess({originator:s,basket:o,reason:a,seekPermission:c=!0,usageType:l}){if(this.isAdminOriginator(s))return!0;if(this.isAdminBasket(o))throw new Error(`Basket ${o} is admin-only.`);if(l==="insertion"&&!this.config.seekBasketInsertionPermissions||l==="removal"&&!this.config.seekBasketRemovalPermissions||l==="listing"&&!this.config.seekBasketListingPermissions)return!0;const u=await this.findBasketToken(s,o,!0);if(u)if(this.isTokenExpired(u.expiry)){if(!c)throw new Error("Basket permission expired (seekPermission=false).");return await this.requestPermissionFlow({type:"basket",originator:s,basket:o,reason:a,renewal:!0,previousToken:u})}else return!0;else{if(!c)throw new Error("No basket permission found, and no user consent allowed (seekPermission=false).");return await this.requestPermissionFlow({type:"basket",originator:s,basket:o,reason:a,renewal:!1})}}async ensureCertificateAccess({originator:s,privileged:o,verifier:a,certType:c,fields:l,reason:u,seekPermission:d=!0,usageType:h}){if(this.isAdminOriginator(s)||h==="disclosure"&&!this.config.seekCertificateDisclosurePermissions)return!0;this.config.differentiatePrivilegedOperations||(o=!1);const f=await this.findCertificateToken(s,o,a,c,l,!0);if(f)if(this.isTokenExpired(f.expiry)){if(!d)throw new Error("Certificate permission expired (seekPermission=false).");return await this.requestPermissionFlow({type:"certificate",originator:s,privileged:o,certificate:{verifier:a,certType:c,fields:l},reason:u,renewal:!0,previousToken:f})}else return!0;else{if(!d)throw new Error("No certificate permission found (seekPermission=false).");return await this.requestPermissionFlow({type:"certificate",originator:s,privileged:o,certificate:{verifier:a,certType:c,fields:l},reason:u,renewal:!1})}}async ensureSpendingAuthorization({originator:s,satoshis:o,lineItems:a,reason:c,seekPermission:l=!0}){if(this.isAdminOriginator(s)||!this.config.seekSpendingPermissions)return!0;const u=await this.findSpendingToken(s);if(u!=null&&u.authorizedAmount){if(await this.querySpentSince(u)+o<=u.authorizedAmount)return!0;if(!l)throw new Error(`Spending authorization insufficient for ${o}, no user consent (seekPermission=false).`);return await this.requestPermissionFlow({type:"spending",originator:s,spending:{satoshis:o,lineItems:a},reason:c,renewal:!0,previousToken:u})}else{if(!l)throw new Error("No spending authorization found, (seekPermission=false).");return await this.requestPermissionFlow({type:"spending",originator:s,spending:{satoshis:o,lineItems:a},reason:c,renewal:!1})}}async ensureLabelAccess({originator:s,label:o,reason:a,seekPermission:c=!0,usageType:l}){if(this.isAdminOriginator(s))return!0;if(this.isAdminLabel(o))throw new Error(`Label ${o} is admin-only.`);return l==="apply"&&!this.config.seekPermissionWhenApplyingActionLabels||l==="list"&&!this.config.seekPermissionWhenListingActionsByLabel?!0:await this.ensureProtocolPermission({originator:s,privileged:!1,protocolID:[1,`action label ${o}`],counterparty:"self",reason:a,seekPermission:c,usageType:"generic"})}async requestPermissionFlow(s){const o=this.buildRequestKey(s),a=this.activeRequests.get(o);return a&&a.pending.length>0?new Promise((c,l)=>{a.pending.push({resolve:c,reject:l})}):new Promise(async(c,l)=>{switch(this.activeRequests.set(o,{request:s,pending:[{resolve:c,reject:l}]}),s.type){case"protocol":await this.callEvent("onProtocolPermissionRequested",{...s,requestID:o});break;case"basket":await this.callEvent("onBasketAccessRequested",{...s,requestID:o});break;case"certificate":await this.callEvent("onCertificateAccessRequested",{...s,requestID:o});break;case"spending":await this.callEvent("onSpendingAuthorizationRequested",{...s,requestID:o});break}})}async encryptPermissionTokenField(s){const o=typeof s=="string"?t.Utils.toArray(s,"utf8"):s,{ciphertext:a}=await this.underlying.encrypt({plaintext:o,protocolID:yd.PERM_TOKEN_ENCRYPTION_PROTOCOL,keyID:"1"},this.adminOriginator);return a}async decryptPermissionTokenField(s){try{const{plaintext:o}=await this.underlying.decrypt({ciphertext:s,protocolID:yd.PERM_TOKEN_ENCRYPTION_PROTOCOL,keyID:"1"},this.adminOriginator);return o}catch{return s}}async maybeEncryptMetadata(s){if(!this.config.encryptWalletMetadata)return s;const{ciphertext:o}=await this.underlying.encrypt({plaintext:t.Utils.toArray(s,"utf8"),protocolID:yd.METADATA_ENCRYPTION_PROTOCOL,keyID:"1"},this.adminOriginator);return t.Utils.toBase64(o)}async maybeDecryptMetadata(s){try{const{plaintext:o}=await this.underlying.decrypt({ciphertext:t.Utils.toArray(s,"base64"),protocolID:yd.METADATA_ENCRYPTION_PROTOCOL,keyID:"1"},this.adminOriginator);return t.Utils.toUTF8(o)}catch{return s}}isTokenExpired(s){const o=Math.floor(Date.now()/1e3);return s>0&&s<o}async findProtocolToken(s,o,a,c,l){const[u,d]=a,h=await this.underlying.listOutputs({basket:n.protocol,tags:[`originator ${s}`,`privileged ${!!o}`,`protocolName ${d}`,`protocolSecurityLevel ${u}`,`counterparty ${c}`],tagQueryMode:"all",include:"entire transactions"},this.adminOriginator);for(const f of h.outputs){const[p,g]=f.outpoint.split("."),m=t.Transaction.fromBEEF(h.BEEF,p),y=t.PushDrop.decode(m.outputs[Number(g)].lockingScript);if(!y||!y.fields||y.fields.length<6)continue;const b=y.fields[0],x=y.fields[1],S=y.fields[2],P=y.fields[3],_=y.fields[4],I=y.fields[5],C=t.Utils.toUTF8(await this.decryptPermissionTokenField(b)),A=parseInt(t.Utils.toUTF8(await this.decryptPermissionTokenField(x)),10),M=t.Utils.toUTF8(await this.decryptPermissionTokenField(S))==="true",k=parseInt(t.Utils.toUTF8(await this.decryptPermissionTokenField(P)),10),O=t.Utils.toUTF8(await this.decryptPermissionTokenField(_)),B=t.Utils.toUTF8(await this.decryptPermissionTokenField(I));if(!(C!==s||M!==!!o||k!==u||O!==d||B!==c)&&!(!l&&this.isTokenExpired(A)))return{tx:m.toBEEF(),txid:f.outpoint.split(".")[0],outputIndex:parseInt(f.outpoint.split(".")[1],10),outputScript:m.outputs[Number(g)].lockingScript.toHex(),satoshis:f.satoshis,originator:s,privileged:o,protocol:d,securityLevel:u,expiry:A,counterparty:B}}}async findBasketToken(s,o,a){const c=await this.underlying.listOutputs({basket:n.basket,tags:[`originator ${s}`,`basket ${o}`],tagQueryMode:"all",include:"entire transactions"},this.adminOriginator);for(const l of c.outputs){const[u,d]=l.outpoint.split("."),h=t.Transaction.fromBEEF(c.BEEF,u),f=t.PushDrop.decode(h.outputs[Number(d)].lockingScript);if(!(f!=null&&f.fields)||f.fields.length<3)continue;const p=f.fields[0],g=f.fields[1],m=f.fields[2],y=t.Utils.toUTF8(await this.decryptPermissionTokenField(p)),b=parseInt(t.Utils.toUTF8(await this.decryptPermissionTokenField(g)),10),x=t.Utils.toUTF8(await this.decryptPermissionTokenField(m));if(!(y!==s||x!==o)&&!(!a&&this.isTokenExpired(b)))return{tx:h.toBEEF(),txid:l.outpoint.split(".")[0],outputIndex:parseInt(l.outpoint.split(".")[1],10),outputScript:h.outputs[Number(d)].lockingScript.toHex(),satoshis:l.satoshis,originator:s,basketName:x,expiry:b}}}async findCertificateToken(s,o,a,c,l,u){const d=await this.underlying.listOutputs({basket:n.certificate,tags:[`originator ${s}`,`privileged ${!!o}`,`type ${c}`,`verifier ${a}`],tagQueryMode:"all",include:"entire transactions"},this.adminOriginator);for(const h of d.outputs){const[f,p]=h.outpoint.split("."),g=t.Transaction.fromBEEF(d.BEEF,f),m=t.PushDrop.decode(g.outputs[Number(p)].lockingScript);if(!(m!=null&&m.fields)||m.fields.length<6)continue;const[y,b,x,S,P,_]=m.fields,I=t.Utils.toUTF8(await this.decryptPermissionTokenField(y)),C=parseInt(t.Utils.toUTF8(await this.decryptPermissionTokenField(b)),10),A=t.Utils.toUTF8(await this.decryptPermissionTokenField(x))==="true",M=t.Utils.toUTF8(await this.decryptPermissionTokenField(S)),k=t.Utils.toUTF8(await this.decryptPermissionTokenField(_)),O=await this.decryptPermissionTokenField(P),B=JSON.parse(t.Utils.toUTF8(O));if(I!==s||A!==!!o||M!==c||k!==a)continue;const $=new Set(B);if(!l.some(U=>!$.has(U))&&!(!u&&this.isTokenExpired(C)))return{tx:g.toBEEF(),txid:h.outpoint.split(".")[0],outputIndex:parseInt(h.outpoint.split(".")[1],10),outputScript:g.outputs[Number(p)].lockingScript.toHex(),satoshis:h.satoshis,originator:s,privileged:o,verifier:k,certType:M,certFields:B,expiry:C}}}async findSpendingToken(s){const o=await this.underlying.listOutputs({basket:n.spending,tags:[`originator ${s}`],tagQueryMode:"all",include:"entire transactions"},this.adminOriginator);for(const a of o.outputs){const[c,l]=a.outpoint.split("."),u=t.Transaction.fromBEEF(o.BEEF,c),d=t.PushDrop.decode(u.outputs[Number(l)].lockingScript);if(!(d!=null&&d.fields)||d.fields.length<2)continue;const h=d.fields[0],f=d.fields[1];if(t.Utils.toUTF8(await this.decryptPermissionTokenField(h))!==s)continue;const g=t.Utils.toUTF8(await this.decryptPermissionTokenField(f)),m=parseInt(g,10);return{tx:u.toBEEF(),txid:a.outpoint.split(".")[0],outputIndex:parseInt(a.outpoint.split(".")[1],10),outputScript:u.outputs[Number(l)].lockingScript.toHex(),satoshis:a.satoshis,originator:s,authorizedAmount:m,expiry:0}}}getCurrentMonthYearUTC(){const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0");return`${o}-${a}`}async querySpentSince(s){const{actions:o}=await this.underlying.listActions({labels:[`admin originator ${s.originator}`,`admin month ${this.getCurrentMonthYearUTC()}`],labelQueryMode:"all"},this.adminOriginator);return o.reduce((a,c)=>a+c.satoshis,0)}async createPermissionOnChain(s,o,a){const c=n[s.type];if(!c)return;const l=await this.buildPushdropFields(s,o,a),u=await new t.PushDrop(this.underlying).lock(l,yd.PERM_TOKEN_ENCRYPTION_PROTOCOL,"1","self",!0,!0),d=this.buildTagsForRequest(s);await this.createAction({description:`Grant ${s.type} permission`,outputs:[{lockingScript:u.toHex(),satoshis:1,outputDescription:`${s.type} permission token`,basket:c,tags:d}],options:{acceptDelayedBroadcast:!1}},this.adminOriginator)}async renewPermissionOnChain(s,o,a,c){const l=await this.buildPushdropFields(o,a,c),u=await new t.PushDrop(this.underlying).lock(l,yd.PERM_TOKEN_ENCRYPTION_PROTOCOL,"1","self",!0,!0),d=this.buildTagsForRequest(o),h=`${s.txid}.${s.outputIndex}`,{signableTransaction:f}=await this.createAction({description:`Renew ${o.type} permission`,inputBEEF:s.tx,inputs:[{outpoint:h,unlockingScriptLength:73,inputDescription:`Consume old ${o.type} token`}],outputs:[{lockingScript:u.toHex(),satoshis:1,outputDescription:`Renewed ${o.type} permission token`,basket:n[o.type],tags:d}],options:{acceptDelayedBroadcast:!1}},this.adminOriginator),p=t.Transaction.fromBEEF(f.tx),m=await new t.PushDrop(this.underlying).unlock(yd.PERM_TOKEN_ENCRYPTION_PROTOCOL,"1","self","all",!1,1,t.LockingScript.fromHex(s.outputScript)).sign(p,0);await this.underlying.signAction({reference:f.reference,spends:{0:{unlockingScript:m.toHex()}}})}async buildPushdropFields(s,o,a){var c;switch(s.type){case"protocol":{const[l,u]=s.protocolID;return[await this.encryptPermissionTokenField(s.originator),await this.encryptPermissionTokenField(String(o)),await this.encryptPermissionTokenField(s.privileged===!0?"true":"false"),await this.encryptPermissionTokenField(String(l)),await this.encryptPermissionTokenField(u),await this.encryptPermissionTokenField(s.counterparty)]}case"basket":return[await this.encryptPermissionTokenField(s.originator),await this.encryptPermissionTokenField(String(o)),await this.encryptPermissionTokenField(s.basket)];case"certificate":{const{certType:l,fields:u,verifier:d}=s.certificate;return[await this.encryptPermissionTokenField(s.originator),await this.encryptPermissionTokenField(String(o)),await this.encryptPermissionTokenField(s.privileged?"true":"false"),await this.encryptPermissionTokenField(l),await this.encryptPermissionTokenField(JSON.stringify(u)),await this.encryptPermissionTokenField(d)]}case"spending":{const l=a??(((c=s.spending)===null||c===void 0?void 0:c.satoshis)||0);return[await this.encryptPermissionTokenField(s.originator),await this.encryptPermissionTokenField(String(l))]}}}buildTagsForRequest(s){const o=[`originator ${s.originator}`];switch(s.type){case"protocol":{o.push(`privileged ${!!s.privileged}`),o.push(`protocolName ${s.protocolID[1]}`),o.push(`protocolSecurityLevel ${s.protocolID[0]}`),o.push(`counterparty ${s.counterparty}`);break}case"basket":{o.push(`basket ${s.basket}`);break}case"certificate":{o.push(`privileged ${!!s.privileged}`),o.push(`type ${s.certificate.certType}`),o.push(`verifier ${s.certificate.verifier}`);break}}return o}async listProtocolPermissions({originator:s}){const o=n.protocol,a=s?[`originator ${s}`]:[],c=await this.underlying.listOutputs({basket:o,tags:a,tagQueryMode:"all",include:"entire transactions",limit:100},this.adminOriginator),l=[];for(const u of c.outputs){const[d,h]=u.outpoint.split("."),f=t.Transaction.fromBEEF(c.BEEF,d),p=t.PushDrop.decode(f.outputs[Number(h)].lockingScript);if(!(p!=null&&p.fields)||p.fields.length<6)continue;const[g,m,y,b,x,S]=p.fields,P=t.Utils.toUTF8(await this.decryptPermissionTokenField(g)),_=parseInt(t.Utils.toUTF8(await this.decryptPermissionTokenField(m)),10),I=t.Utils.toUTF8(await this.decryptPermissionTokenField(y))==="true",C=parseInt(t.Utils.toUTF8(await this.decryptPermissionTokenField(b)),10),A=t.Utils.toUTF8(await this.decryptPermissionTokenField(x)),M=t.Utils.toUTF8(await this.decryptPermissionTokenField(S));l.push({tx:f.toBEEF(),txid:u.outpoint.split(".")[0],outputIndex:parseInt(u.outpoint.split(".")[1],10),outputScript:f.outputs[Number(h)].lockingScript.toHex(),satoshis:u.satoshis,originator:P,expiry:_,privileged:I,securityLevel:C,protocol:A,counterparty:M})}return l}async hasProtocolPermission(s){try{return await this.ensureProtocolPermission({...s,reason:"hasProtocolPermission",seekPermission:!1,usageType:"generic"}),!0}catch{return!1}}async listBasketAccess(s){const o=n.basket,a=[];s.originator&&a.push(`originator ${s.originator}`);const c=await this.underlying.listOutputs({basket:o,tags:a,tagQueryMode:"all",include:"entire transactions",limit:1e4},this.adminOriginator),l=[];for(const u of c.outputs){const[d,h]=u.outpoint.split("."),f=t.Transaction.fromBEEF(c.BEEF,d),p=t.PushDrop.decode(f.outputs[Number(h)].lockingScript);if(!(p!=null&&p.fields)||p.fields.length<3)continue;const[g,m,y]=p.fields,b=t.Utils.toUTF8(await this.decryptPermissionTokenField(g)),x=parseInt(t.Utils.toUTF8(await this.decryptPermissionTokenField(m)),10),S=t.Utils.toUTF8(await this.decryptPermissionTokenField(y));l.push({tx:f.toBEEF(),txid:u.outpoint.split(".")[0],outputIndex:parseInt(u.outpoint.split(".")[1],10),satoshis:u.satoshis,outputScript:f.outputs[Number(h)].lockingScript.toHex(),originator:b,basketName:S,expiry:x})}return l}async hasBasketAccess(s){try{return await this.ensureBasketAccess({originator:s.originator,basket:s.basket,seekPermission:!1,usageType:"insertion"}),!0}catch{return!1}}async listSpendingAuthorizations(s){const o=n.spending,a=[];s.originator&&a.push(`originator ${s.originator}`);const c=await this.underlying.listOutputs({basket:o,tags:a,tagQueryMode:"all",include:"entire transactions",limit:1e4},this.adminOriginator),l=[];for(const u of c.outputs){const[d,h]=u.outpoint.split("."),f=t.Transaction.fromBEEF(c.BEEF,d),p=t.PushDrop.decode(f.outputs[Number(h)].lockingScript);if(!(p!=null&&p.fields)||p.fields.length<2)continue;const[g,m]=p.fields,y=t.Utils.toUTF8(await this.decryptPermissionTokenField(g)),b=t.Utils.toUTF8(await this.decryptPermissionTokenField(m)),x=parseInt(b,10);l.push({tx:f.toBEEF(),txid:u.outpoint.split(".")[0],outputIndex:parseInt(u.outpoint.split(".")[1],10),satoshis:u.satoshis,outputScript:f.outputs[Number(h)].lockingScript.toHex(),originator:y,authorizedAmount:x,expiry:0})}return l}async hasSpendingAuthorization(s){try{return await this.ensureSpendingAuthorization({originator:s.originator,satoshis:s.satoshis,seekPermission:!1}),!0}catch{return!1}}async listCertificateAccess(s){const o=n.certificate,a=[];s.originator&&a.push(`originator ${s.originator}`);const c=await this.underlying.listOutputs({basket:o,tags:a,tagQueryMode:"all",include:"entire transactions",limit:1e4},this.adminOriginator),l=[];for(const u of c.outputs){const[d,h]=u.outpoint.split("."),f=t.Transaction.fromBEEF(c.BEEF,d),p=t.PushDrop.decode(f.outputs[Number(h)].lockingScript);if(!(p!=null&&p.fields)||p.fields.length<6)continue;const[g,m,y,b,x,S]=p.fields,P=t.Utils.toUTF8(await this.decryptPermissionTokenField(g)),_=parseInt(t.Utils.toUTF8(await this.decryptPermissionTokenField(m)),10),I=t.Utils.toUTF8(await this.decryptPermissionTokenField(y))==="true",C=t.Utils.toUTF8(await this.decryptPermissionTokenField(b)),A=t.Utils.toUTF8(await this.decryptPermissionTokenField(S)),M=await this.decryptPermissionTokenField(x),k=JSON.parse(t.Utils.toUTF8(M));l.push({tx:f.toBEEF(),txid:u.outpoint.split(".")[0],outputIndex:parseInt(u.outpoint.split(".")[1],10),satoshis:u.satoshis,outputScript:f.outputs[Number(h)].lockingScript.toHex(),originator:P,privileged:I,certType:C,certFields:k,verifier:A,expiry:_})}return l}async hasCertificateAccess(s){try{return await this.ensureCertificateAccess({originator:s.originator,privileged:s.privileged,verifier:s.verifier,certType:s.certType,fields:s.fields,seekPermission:!1,usageType:"disclosure"}),!0}catch{return!1}}async revokePermission(s){const o=`${s.txid}.${s.outputIndex}`,{signableTransaction:a}=await this.createAction({description:"Revoke permission",inputBEEF:s.tx,inputs:[{outpoint:o,unlockingScriptLength:73,inputDescription:"Consume old permission token"}],options:{acceptDelayedBroadcast:!1}},this.adminOriginator),c=t.Transaction.fromBEEF(a.tx),u=await new t.PushDrop(this.underlying).unlock(yd.PERM_TOKEN_ENCRYPTION_PROTOCOL,"1","self","all",!1,1,t.LockingScript.fromHex(s.outputScript)).sign(c,0);await this.underlying.signAction({reference:a.reference,spends:{0:{unlockingScript:u.toHex()}}})}async createAction(s,o){if(s.outputs)for(const S of s.outputs)S.basket&&await this.ensureBasketAccess({originator:o,basket:S.basket,reason:s.description,usageType:"insertion"});if(s.labels)for(const S of s.labels)await this.ensureLabelAccess({originator:o,label:S,reason:s.description,usageType:"apply"});const a={...s.options||{}};if(a.signAndProcess!==!0)a.signAndProcess=!1;else if(!this.isAdminOriginator(o))throw new Error("Only the admin originator can set signAndProcess=true explicitly.");const c=s.description,l={},u={};s.description=await this.maybeEncryptMetadata(s.description);for(let S=0;S<(s.inputs||[]).length;S++)s.inputs[S].inputDescription&&(l[S]=s.inputs[S].inputDescription,s.inputs[S].inputDescription=await this.maybeEncryptMetadata(s.inputs[S].inputDescription));for(let S=0;S<(s.outputs||[]).length;S++)s.outputs[S].outputDescription&&(u[S]=s.outputs[S].outputDescription,s.outputs[S].outputDescription=await this.maybeEncryptMetadata(s.outputs[S].outputDescription)),s.outputs[S].customInstructions&&(s.outputs[S].customInstructions=await this.maybeEncryptMetadata(s.outputs[S].customInstructions));const d=await this.underlying.createAction({...s,options:a,labels:[...s.labels||[],`admin originator ${o}`,`admin month ${this.getCurrentMonthYearUTC()}`]},o);if(!d.signableTransaction)return d;const h=t.Transaction.fromAtomicBEEF(d.signableTransaction.tx),f=d.signableTransaction.reference;let p=0;const g=[];let m=0;for(const S of h.inputs){const P=`${S.sourceTXID}.${S.sourceOutputIndex}`,_=(s.inputs||[]).findIndex(I=>I.outpoint===P);if(_!==-1){const I=S.sourceTransaction.outputs[S.sourceOutputIndex].satoshis;m+=I,g.push({type:"input",description:l[_]||"No input description provided",satoshis:I})}}const y=(s.outputs||[]).reduce((S,P)=>S+P.satoshis,0);for(const S in s.outputs||[]){const P=s.outputs[S];g.push({type:"output",satoshis:P.satoshis,description:u[S]||"No output description provided"})}if(g.push({type:"fee",satoshis:h.getFee(),description:"Network fee"}),p=y+h.getFee()-m,p>0)try{await this.ensureSpendingAuthorization({originator:o,satoshis:p,lineItems:g,reason:c})}catch(S){throw await this.underlying.abortAction({reference:f}),S}if((0,e.validateCreateActionArgs)(s).isSignAction)return d;const x=await this.underlying.signAction({reference:f,spends:{},options:s.options},o);return{...d,...x,signableTransaction:void 0}}async signAction(...s){return this.underlying.signAction(...s)}async abortAction(...s){return this.underlying.abortAction(...s)}async listActions(...s){const[o,a]=s;if(o.labels)for(const l of o.labels)await this.ensureLabelAccess({originator:a,label:l,reason:"listActions",usageType:"list"});const c=await this.underlying.listActions(...s);if(c.actions)for(let l=0;l<c.actions.length;l++){if(c.actions[l].description&&(c.actions[l].description=await this.maybeDecryptMetadata(c.actions[l].description)),c.actions[l].inputs)for(let u=0;u<c.actions[l].inputs.length;u++)c.actions[l].inputs[u].inputDescription&&(c.actions[l].inputs[u].inputDescription=await this.maybeDecryptMetadata(c.actions[l].inputs[u].inputDescription));if(c.actions[l].outputs)for(let u=0;u<c.actions[l].outputs.length;u++)c.actions[l].outputs[u].outputDescription&&(c.actions[l].outputs[u].outputDescription=await this.maybeDecryptMetadata(c.actions[l].outputs[u].outputDescription)),c.actions[l].outputs[u].customInstructions&&(c.actions[l].outputs[u].customInstructions=await this.maybeDecryptMetadata(c.actions[l].outputs[u].customInstructions))}return c}async internalizeAction(...s){const[o,a]=s;for(const c in o.outputs){const l=o.outputs[c];l.protocol==="basket insertion"&&(await this.ensureBasketAccess({originator:a,basket:l.insertionRemittance.basket,reason:o.description,usageType:"insertion"}),l.insertionRemittance.customInstructions&&(o.outputs[c].insertionRemittance.customInstructions=await this.maybeEncryptMetadata(l.insertionRemittance.customInstructions)))}return this.underlying.internalizeAction(...s)}async listOutputs(...s){const[o,a]=s;await this.ensureBasketAccess({originator:a,basket:o.basket,reason:"listOutputs",usageType:"listing"});const c=await this.underlying.listOutputs(...s);if(c.outputs)for(let l=0;l<c.outputs.length;l++)c.outputs[l].customInstructions&&(c.outputs[l].customInstructions=await this.maybeDecryptMetadata(c.outputs[l].customInstructions));return c}async relinquishOutput(...s){const[o,a]=s;return await this.ensureBasketAccess({originator:a,basket:o.basket,reason:"relinquishOutput",usageType:"removal"}),this.underlying.relinquishOutput(...s)}async getPublicKey(...s){const[o,a]=s;return o.protocolID&&await this.ensureProtocolPermission({originator:a,privileged:o.privileged,protocolID:o.protocolID,counterparty:o.counterparty||"self",reason:o.privilegedReason,usageType:"publicKey"}),o.identityKey&&await this.ensureProtocolPermission({originator:a,privileged:o.privileged,protocolID:[1,"identity key retrieval"],counterparty:"self",reason:o.privilegedReason,usageType:"identityKey"}),this.underlying.getPublicKey(...s)}async revealCounterpartyKeyLinkage(...s){const[o,a]=s;return await this.ensureProtocolPermission({originator:a,privileged:o.privileged,protocolID:[2,`counterparty key linkage revelation ${o.counterparty}`],counterparty:o.verifier,reason:o.privilegedReason,usageType:"linkageRevelation"}),this.underlying.revealCounterpartyKeyLinkage(...s)}async revealSpecificKeyLinkage(...s){const[o,a]=s;return await this.ensureProtocolPermission({originator:a,privileged:o.privileged,protocolID:[2,`specific key linkage revelation ${o.protocolID[1]} ${o.protocolID[0]===2?o.keyID:"all"}`],counterparty:o.verifier,reason:o.privilegedReason,usageType:"linkageRevelation"}),this.underlying.revealSpecificKeyLinkage(...s)}async encrypt(...s){const[o,a]=s;return await this.ensureProtocolPermission({originator:a,protocolID:o.protocolID,privileged:o.privileged,counterparty:o.counterparty||"self",reason:o.privilegedReason,usageType:"encrypting"}),this.underlying.encrypt(...s)}async decrypt(...s){const[o,a]=s;return await this.ensureProtocolPermission({originator:a,privileged:o.privileged,protocolID:o.protocolID,counterparty:o.counterparty||"self",reason:o.privilegedReason,usageType:"encrypting"}),this.underlying.decrypt(...s)}async createHmac(...s){const[o,a]=s;return await this.ensureProtocolPermission({originator:a,privileged:o.privileged,protocolID:o.protocolID,counterparty:o.counterparty||"self",reason:o.privilegedReason,usageType:"hmac"}),this.underlying.createHmac(...s)}async verifyHmac(...s){const[o,a]=s;return await this.ensureProtocolPermission({originator:a,privileged:o.privileged,protocolID:o.protocolID,counterparty:o.counterparty||"self",reason:o.privilegedReason,usageType:"hmac"}),this.underlying.verifyHmac(...s)}async createSignature(...s){const[o,a]=s;return await this.ensureProtocolPermission({originator:a,privileged:o.privileged,protocolID:o.protocolID,counterparty:o.counterparty||"self",reason:o.privilegedReason,usageType:"signing"}),this.underlying.createSignature(...s)}async verifySignature(...s){const[o,a]=s;return await this.ensureProtocolPermission({originator:a,privileged:o.privileged,protocolID:o.protocolID,counterparty:o.counterparty||"self",reason:o.privilegedReason,usageType:"signing"}),this.underlying.verifySignature(...s)}async acquireCertificate(...s){const[o,a]=s;return this.config.seekCertificateAcquisitionPermissions&&await this.ensureProtocolPermission({originator:a,privileged:o.privileged,protocolID:[1,`certificate acquisition ${o.type}`],counterparty:"self",reason:o.privilegedReason,usageType:"generic"}),this.underlying.acquireCertificate(...s)}async listCertificates(...s){const[o,a]=s;return this.config.seekCertificateListingPermissions&&await this.ensureProtocolPermission({originator:a,privileged:o.privileged,protocolID:[1,"certificate list"],counterparty:"self",reason:o.privilegedReason,usageType:"generic"}),this.underlying.listCertificates(...s)}async proveCertificate(...s){const[o,a]=s;return await this.ensureCertificateAccess({originator:a,privileged:o.privileged,verifier:o.verifier,certType:o.certificate.type,fields:o.fieldsToReveal,reason:"proveCertificate",usageType:"disclosure"}),this.underlying.proveCertificate(...s)}async relinquishCertificate(...s){const[o,a]=s;return this.config.seekCertificateRelinquishmentPermissions&&await this.ensureProtocolPermission({originator:a,privileged:!!o.privileged,protocolID:[1,`certificate relinquishment ${o.type}`],counterparty:"self",reason:o.privilegedReason||"relinquishCertificate",usageType:"generic"}),this.underlying.relinquishCertificate(...s)}async discoverByIdentityKey(...s){const[o,a]=s;return this.config.seekPermissionsForIdentityResolution&&await this.ensureProtocolPermission({originator:a,privileged:!1,protocolID:[1,"identity resolution"],counterparty:"self",reason:"discoverByIdentityKey",usageType:"generic"}),this.underlying.discoverByIdentityKey(...s)}async discoverByAttributes(...s){const[o,a]=s;return this.config.seekPermissionsForIdentityResolution&&await this.ensureProtocolPermission({originator:a,privileged:!1,protocolID:[1,"identity resolution"],counterparty:"self",reason:"discoverByAttributes",usageType:"generic"}),this.underlying.discoverByAttributes(...s)}async isAuthenticated(...s){return this.underlying.isAuthenticated(...s)}async waitForAuthentication(...s){return this.underlying.waitForAuthentication(...s)}async getHeight(...s){return this.underlying.getHeight(...s)}async getHeaderForHeight(...s){return this.underlying.getHeaderForHeight(...s)}async getNetwork(...s){return this.underlying.getNetwork(...s)}async getVersion(...s){return this.underlying.getVersion(...s)}isAdminOriginator(s){return s===this.adminOriginator}isAdminProtocol(s){const o=s[1];return!!(o.startsWith("admin")||o.startsWith("p "))}isAdminLabel(s){return!!s.startsWith("admin")}isAdminBasket(s){return!!(s==="default"||s.startsWith("admin")||s.startsWith("p "))}buildRequestKey(s){var o,a,c,l;switch(s.type){case"protocol":return`proto:${s.originator}:${!!s.privileged}:${(o=s.protocolID)===null||o===void 0?void 0:o.join(",")}:${s.counterparty}`;case"basket":return`basket:${s.originator}:${s.basket}`;case"certificate":return`cert:${s.originator}:${!!s.privileged}:${(a=s.certificate)===null||a===void 0?void 0:a.verifier}:${(c=s.certificate)===null||c===void 0?void 0:c.certType}:${(l=s.certificate)===null||l===void 0?void 0:l.fields.join("|")}`;case"spending":return`spend:${s.originator}`}}};return w1.WalletPermissionsManager=r,r.PERM_TOKEN_ENCRYPTION_PROTOCOL=[2,"admin permission token encryption"],r.METADATA_ENCRYPTION_PROTOCOL=[2,"admin metadata encryption"],w1}var cA={},dF;function Lj(){return dF||(dF=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CWIStyleWalletManager=t.OverlayUMPTokenInteractor=t.DEFAULT_PROFILE_ID=t.PBKDF2_NUM_ROUNDS=void 0;const e=sr(),n=WO();t.PBKDF2_NUM_ROUNDS=7777,t.DEFAULT_PROFILE_ID=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class r{constructor(o=new e.LookupResolver,a=new e.SHIPBroadcaster(["tm_users"])){this.resolver=o,this.broadcaster=a}async findByPresentationKeyHash(o){const a={service:"ls_users",query:{presentationHash:e.Utils.toHex(o)}},c=await this.resolver.query(a);return this.parseLookupAnswer(c)}async findByRecoveryKeyHash(o){const a={service:"ls_users",query:{recoveryHash:e.Utils.toHex(o)}},c=await this.resolver.query(a);return this.parseLookupAnswer(c)}async buildAndSend(o,a,c,l){const u=[];u[0]=c.passwordSalt,u[1]=c.passwordPresentationPrimary,u[2]=c.passwordRecoveryPrimary,u[3]=c.presentationRecoveryPrimary,u[4]=c.passwordPrimaryPrivileged,u[5]=c.presentationRecoveryPrivileged,u[6]=c.presentationHash,u[7]=c.recoveryHash,u[8]=c.presentationKeyEncrypted,u[9]=c.passwordKeyEncrypted,u[10]=c.recoveryKeyEncrypted,c.profilesEncrypted&&(u[11]=c.profilesEncrypted);const d=await new e.PushDrop(o,a).lock(u,[2,"admin user management token"],"1","self",!0,!0),h=[];let f;l!=null&&l.currentOutpoint&&(h.push({outpoint:l.currentOutpoint,unlockingScriptLength:73,inputDescription:"Consume old UMP token"}),f=await this.findByOutpoint(l.currentOutpoint));const p=[{lockingScript:d.toHex(),satoshis:1,outputDescription:"New UMP token output"}],g=await o.createAction({description:l?"Renew UMP token (consume old, create new)":"Create new UMP token",inputs:h,outputs:p,inputBEEF:f==null?void 0:f.beef,options:{randomizeOutputs:!1,acceptDelayedBroadcast:!1}},a);if(!g.signableTransaction){const x=g.txid||(g.tx?e.Transaction.fromAtomicBEEF(g.tx).id("hex"):void 0);if(!x)throw new Error("No signableTransaction and no final TX found.");const S=e.Transaction.fromAtomicBEEF(g.tx),P=await this.broadcaster.broadcast(S);return console.log("BROADCAST RESULT",P),`${x}.0`}let m="";const y=g.signableTransaction.reference,b=e.Transaction.fromBEEF(g.signableTransaction.tx);if(l!=null&&l.currentOutpoint){const S=await new e.PushDrop(o,a).unlock([2,"admin user management token"],"1","self").sign(b,0),P=await o.signAction({reference:y,spends:{0:{unlockingScript:S.toHex()}}},a);if(m=P.txid||(P.tx?e.Transaction.fromAtomicBEEF(P.tx).id("hex"):""),!m)throw new Error("Could not finalize transaction for renewed UMP token.");const _=P.tx;if(!_)throw new Error("Final transaction data missing after signing renewed UMP token.");const I=e.Transaction.fromAtomicBEEF(_),C=await this.broadcaster.broadcast(I);return console.log("BROADCAST RESULT",C),`${m}.0`}else{const x=await o.signAction({reference:y,spends:{}},a);if(m=x.txid||(x.tx?e.Transaction.fromAtomicBEEF(x.tx).id("hex"):""),!m)throw new Error("Failed to finalize new UMP token transaction.");const S=x.tx;if(!S)throw new Error("Final transaction data missing after signing new UMP token.");const P=e.Transaction.fromAtomicBEEF(S),_=await this.broadcaster.broadcast(P);return console.log("BROADCAST RESULT",_),`${m}.0`}}parseLookupAnswer(o){var a;if(o.type!=="output-list"||!o.outputs||o.outputs.length===0)return;const{beef:c,outputIndex:l}=o.outputs[0];try{const u=e.Transaction.fromBEEF(c),d=`${u.id("hex")}.${l}`,h=e.PushDrop.decode(u.outputs[l].lockingScript);if(!h.fields||h.fields.length<11){console.warn(`Unexpected number of fields in UMP token: ${(a=h.fields)===null||a===void 0?void 0:a.length}`);return}return{passwordSalt:h.fields[0],passwordPresentationPrimary:h.fields[1],passwordRecoveryPrimary:h.fields[2],presentationRecoveryPrimary:h.fields[3],passwordPrimaryPrivileged:h.fields[4],presentationRecoveryPrivileged:h.fields[5],presentationHash:h.fields[6],recoveryHash:h.fields[7],presentationKeyEncrypted:h.fields[8],passwordKeyEncrypted:h.fields[9],recoveryKeyEncrypted:h.fields[10],profilesEncrypted:h.fields[12]?h.fields[11]:void 0,currentOutpoint:d}}catch(u){console.error("Failed to parse or decode UMP token:",u);return}}async findByOutpoint(o){const a=await this.resolver.query({service:"ls_users",query:{outpoint:o}});if(a.type==="output-list"&&!(!a.outputs||!a.outputs.length))return a.outputs[0]}}t.OverlayUMPTokenInteractor=r;class i{constructor(o,a,c=new r,l,u,d,h){this.authenticationMode="presentation-key-and-password",this.authenticationFlow="new-user",this.activeProfileId=t.DEFAULT_PROFILE_ID,this.profiles=[],this.adminOriginator=o,this.walletBuilder=a,this.UMPTokenInteractor=c,this.recoveryKeySaver=l,this.passwordRetriever=u,this.authenticated=!1,this.newWalletFunder=d,h&&this.loadSnapshot(h).catch(f=>{console.error("Failed to load snapshot during construction:",f),this.destroy()})}async providePresentationKey(o){if(this.authenticated)throw new Error("User is already authenticated");if(this.authenticationMode==="recovery-key-and-password")throw new Error("Presentation key is not needed in this mode");const a=e.Hash.sha256(o),c=await this.UMPTokenInteractor.findByPresentationKeyHash(a);c?(this.authenticationFlow="existing-user",this.presentationKey=o,this.currentUMPToken=c):(this.authenticationFlow="new-user",this.presentationKey=o)}async providePassword(o){if(this.authenticated)throw new Error("User is already authenticated");if(this.authenticationMode==="presentation-key-and-recovery-key")throw new Error("Password is not needed in this mode");if(this.authenticationFlow==="existing-user"){if(!this.currentUMPToken)throw new Error("Provide presentation or recovery key first.");const a=e.Hash.pbkdf2(e.Utils.toArray(o,"utf8"),this.currentUMPToken.passwordSalt,t.PBKDF2_NUM_ROUNDS,32,"sha512");let c,l;if(this.authenticationMode==="presentation-key-and-password"){if(!this.presentationKey)throw new Error("No presentation key found!");const u=this.XOR(this.presentationKey,a);c=new e.SymmetricKey(u).decrypt(this.currentUMPToken.passwordPresentationPrimary)}else{if(!this.recoveryKey)throw new Error("No recovery key found!");const u=this.XOR(this.recoveryKey,a);c=new e.SymmetricKey(u).decrypt(this.currentUMPToken.passwordRecoveryPrimary);const d=this.XOR(c,a);l=new e.SymmetricKey(d).decrypt(this.currentUMPToken.passwordPrimaryPrivileged)}await this.setupRootInfrastructure(c,l),await this.switchProfile(this.activeProfileId)}else{if(this.authenticationMode!=="presentation-key-and-password")throw new Error("New-user flow requires presentation key and password mode.");if(!this.presentationKey)throw new Error("No presentation key provided for new-user flow.");const a=(0,e.Random)(32);await this.recoveryKeySaver(a);const c=(0,e.Random)(32),l=e.Hash.pbkdf2(e.Utils.toArray(o,"utf8"),c,t.PBKDF2_NUM_ROUNDS,32,"sha512"),u=(0,e.Random)(32),d=(0,e.Random)(32),h=new e.SymmetricKey(this.XOR(this.presentationKey,l)),f=new e.SymmetricKey(this.XOR(this.presentationKey,a)),p=new e.SymmetricKey(this.XOR(a,l)),g=new e.SymmetricKey(this.XOR(u,l)),m=new n.PrivilegedKeyManager(async()=>new e.PrivateKey(d)),y={passwordSalt:c,passwordPresentationPrimary:h.encrypt(u),passwordRecoveryPrimary:p.encrypt(u),presentationRecoveryPrimary:f.encrypt(u),passwordPrimaryPrivileged:g.encrypt(d),presentationRecoveryPrivileged:f.encrypt(d),presentationHash:e.Hash.sha256(this.presentationKey),recoveryHash:e.Hash.sha256(a),presentationKeyEncrypted:(await m.encrypt({plaintext:this.presentationKey,protocolID:[2,"admin key wrapping"],keyID:"1"})).ciphertext,passwordKeyEncrypted:(await m.encrypt({plaintext:l,protocolID:[2,"admin key wrapping"],keyID:"1"})).ciphertext,recoveryKeyEncrypted:(await m.encrypt({plaintext:a,protocolID:[2,"admin key wrapping"],keyID:"1"})).ciphertext,profilesEncrypted:void 0};if(this.currentUMPToken=y,await this.setupRootInfrastructure(u),await this.switchProfile(t.DEFAULT_PROFILE_ID),this.newWalletFunder&&this.underlying)try{await this.newWalletFunder(this.presentationKey,this.underlying,this.adminOriginator)}catch(b){console.error("Error funding new wallet:",b)}if(!this.underlying)throw new Error("Default profile wallet not built before attempting to publish UMP token.");this.currentUMPToken.currentOutpoint=await this.UMPTokenInteractor.buildAndSend(this.underlying,this.adminOriginator,y)}}async provideRecoveryKey(o){if(this.authenticated)throw new Error("Already authenticated");if(this.authenticationFlow==="new-user")throw new Error("Do not submit recovery key in new-user flow");if(this.authenticationMode==="presentation-key-and-password")throw new Error("No recovery key required in this mode");if(this.authenticationMode==="recovery-key-and-password"){const a=e.Hash.sha256(o),c=await this.UMPTokenInteractor.findByRecoveryKeyHash(a);if(!c)throw new Error("No user found with this recovery key");this.recoveryKey=o,this.currentUMPToken=c}else{if(!this.presentationKey)throw new Error("Provide the presentation key first");if(!this.currentUMPToken)throw new Error("Current UMP token not found");const a=this.XOR(this.presentationKey,o),c=new e.SymmetricKey(a).decrypt(this.currentUMPToken.presentationRecoveryPrimary),l=new e.SymmetricKey(a).decrypt(this.currentUMPToken.presentationRecoveryPrivileged);await this.setupRootInfrastructure(c,l),await this.switchProfile(this.activeProfileId)}}saveSnapshot(){if(!this.rootPrimaryKey||!this.currentUMPToken)throw new Error("No root primary key or current UMP token set");const o=(0,e.Random)(32),a=new e.Utils.Writer;if(a.write(this.rootPrimaryKey),!this.currentUMPToken.currentOutpoint)throw new Error("UMP token cannot be saved without a current outpoint.");const c=this.serializeUMPToken(this.currentUMPToken);a.writeVarIntNum(c.length),a.write(c);const l=a.toArray(),u=new e.SymmetricKey(o).encrypt(l),d=new e.Utils.Writer;return d.writeUInt8(2),d.write(o),d.write(this.activeProfileId),d.write(u),d.toArray()}async loadSnapshot(o){try{const a=new e.Utils.Reader(o),c=a.readUInt8();let l,u,d=t.DEFAULT_PROFILE_ID;if(c===1)l=a.read(32),u=a.read();else if(c===2)l=a.read(32),d=a.read(16),u=a.read();else throw new Error(`Unsupported snapshot version: ${c}`);const h=new e.SymmetricKey(l).decrypt(u),f=new e.Utils.Reader(h),p=f.read(32),g=f.readVarIntNum(),m=f.read(g),y=this.deserializeUMPToken(m);this.currentUMPToken=y,await this.setupRootInfrastructure(p),await this.switchProfile(d),this.authenticationFlow="existing-user"}catch(a){throw this.destroy(),new Error(`Failed to load snapshot: ${a.message}`)}}destroy(){this.underlying=void 0,this.rootPrivilegedKeyManager=void 0,this.authenticated=!1,this.rootPrimaryKey=void 0,this.currentUMPToken=void 0,this.presentationKey=void 0,this.recoveryKey=void 0,this.profiles=[],this.activeProfileId=t.DEFAULT_PROFILE_ID,this.authenticationMode="presentation-key-and-password",this.authenticationFlow="new-user"}listProfiles(){if(!this.authenticated)throw new Error("Not authenticated.");return[{id:t.DEFAULT_PROFILE_ID,name:"default",createdAt:null,active:this.activeProfileId.every(a=>a===0)},...this.profiles.map(a=>({id:a.id,name:a.name,createdAt:a.createdAt,active:this.activeProfileId.every((c,l)=>c===a.id[l])}))]}async addProfile(o){if(!this.authenticated||!this.rootPrimaryKey||!this.currentUMPToken||!this.rootPrivilegedKeyManager)throw new Error("Wallet not fully initialized or authenticated.");if(o==="default"||this.profiles.some(c=>c.name.toLowerCase()===o.toLowerCase()))throw new Error(`Profile name "${o}" is already in use.`);const a={name:o,id:(0,e.Random)(16),primaryPad:(0,e.Random)(32),privilegedPad:(0,e.Random)(32),createdAt:Math.floor(Date.now()/1e3)};return this.profiles.push(a),await this.updateAuthFactors(this.currentUMPToken.passwordSalt,await this.getFactor("passwordKey"),await this.getFactor("presentationKey"),await this.getFactor("recoveryKey"),this.rootPrimaryKey,await this.getFactor("privilegedKey"),this.profiles),a.id}async deleteProfile(o){if(!this.authenticated||!this.rootPrimaryKey||!this.currentUMPToken||!this.rootPrivilegedKeyManager)throw new Error("Wallet not fully initialized or authenticated.");if(o.every(c=>c===0))throw new Error("Cannot delete the default profile.");const a=this.profiles.findIndex(c=>c.id.every((l,u)=>l===o[u]));if(a===-1)throw new Error("Profile not found.");this.profiles.splice(a,1),this.activeProfileId.every((c,l)=>c===o[l])&&await this.switchProfile(t.DEFAULT_PROFILE_ID),await this.updateAuthFactors(this.currentUMPToken.passwordSalt,await this.getFactor("passwordKey"),await this.getFactor("presentationKey"),await this.getFactor("recoveryKey"),this.rootPrimaryKey,await this.getFactor("privilegedKey"),this.profiles)}async switchProfile(o){if(!this.authenticated||!this.rootPrimaryKey||!this.rootPrivilegedKeyManager)throw new Error("Cannot switch profile: Wallet not authenticated or root keys missing.");let a,c;if(o.every(u=>u===0))a=this.rootPrimaryKey,c=void 0,this.activeProfileId=t.DEFAULT_PROFILE_ID;else{const u=this.profiles.find(d=>d.id.every((h,f)=>h===o[f]));if(!u)throw new Error("Profile not found.");a=this.XOR(this.rootPrimaryKey,u.primaryPad),c=u.privilegedPad,this.activeProfileId=o}const l=new n.PrivilegedKeyManager(async u=>{const h=(await this.rootPrivilegedKeyManager.getPrivilegedKey(u)).toArray(),f=c?this.XOR(h,c):h;return new e.PrivateKey(f)});this.underlying=await this.walletBuilder(a,l,this.activeProfileId)}async changePassword(o){if(!this.authenticated||!this.currentUMPToken||!this.rootPrimaryKey||!this.rootPrivilegedKeyManager)throw new Error("Not authenticated or missing required data.");const a=(0,e.Random)(32),c=e.Hash.pbkdf2(e.Utils.toArray(o,"utf8"),a,t.PBKDF2_NUM_ROUNDS,32,"sha512"),l=await this.getFactor("recoveryKey"),u=await this.getFactor("presentationKey"),d=await this.getFactor("privilegedKey");await this.updateAuthFactors(a,c,u,l,this.rootPrimaryKey,d,this.profiles)}async getRecoveryKey(){if(!this.authenticated||!this.currentUMPToken||!this.rootPrivilegedKeyManager)throw new Error("Not authenticated or missing required data.");return this.getFactor("recoveryKey")}async changeRecoveryKey(){if(!this.authenticated||!this.currentUMPToken||!this.rootPrimaryKey||!this.rootPrivilegedKeyManager)throw new Error("Not authenticated or missing required data.");const o=await this.getFactor("passwordKey"),a=await this.getFactor("presentationKey"),c=await this.getFactor("privilegedKey"),l=(0,e.Random)(32);await this.recoveryKeySaver(l),await this.updateAuthFactors(this.currentUMPToken.passwordSalt,o,a,l,this.rootPrimaryKey,c,this.profiles)}async changePresentationKey(o){if(!this.authenticated||!this.currentUMPToken||!this.rootPrimaryKey||!this.rootPrivilegedKeyManager)throw new Error("Not authenticated or missing required data.");if(o.length!==32)throw new Error("Presentation key must be 32 bytes.");const a=await this.getFactor("recoveryKey"),c=await this.getFactor("passwordKey"),l=await this.getFactor("privilegedKey");await this.updateAuthFactors(this.currentUMPToken.passwordSalt,c,o,a,this.rootPrimaryKey,l,this.profiles),this.presentationKey&&(this.presentationKey=o)}XOR(o,a){if(o.length!==a.length)throw new Error(`XOR length mismatch: ${o.length} vs ${a.length}`);const c=new Array(o.length);for(let l=0;l<o.length;l++)c[l]=o[l]^a[l];return c}async getFactor(o){if(!this.authenticated||!this.currentUMPToken||!this.rootPrivilegedKeyManager)throw new Error(`Cannot get factor "${o}": Wallet not ready.`);const a=[2,"admin key wrapping"],c="1";try{switch(o){case"passwordKey":return(await this.rootPrivilegedKeyManager.decrypt({ciphertext:this.currentUMPToken.passwordKeyEncrypted,protocolID:a,keyID:c})).plaintext;case"presentationKey":return(await this.rootPrivilegedKeyManager.decrypt({ciphertext:this.currentUMPToken.presentationKeyEncrypted,protocolID:a,keyID:c})).plaintext;case"recoveryKey":return(await this.rootPrivilegedKeyManager.decrypt({ciphertext:this.currentUMPToken.recoveryKeyEncrypted,protocolID:a,keyID:c})).plaintext;case"privilegedKey":return(await this.rootPrivilegedKeyManager.getPrivilegedKey("UMP token update",!0)).toArray();default:throw new Error(`Unknown factor name: ${o}`)}}catch(l){throw console.error(`Error decrypting factor ${o}:`,l),new Error(`Failed to decrypt factor "${o}": ${l.message}`)}}async updateAuthFactors(o,a,c,l,u,d,h){if(!this.authenticated||!this.rootPrimaryKey||!this.currentUMPToken)throw new Error("Wallet is not properly authenticated or missing data for update.");const f={...this.currentUMPToken};if(!f.currentOutpoint)throw new Error("Cannot update UMP token: Old token has no outpoint.");const p=new e.SymmetricKey(this.XOR(c,a)),g=new e.SymmetricKey(this.XOR(c,l)),m=new e.SymmetricKey(this.XOR(l,a)),y=new e.SymmetricKey(this.XOR(u,a)),b=new n.PrivilegedKeyManager(async()=>new e.PrivateKey(d));let x;if(h&&h.length>0){const I=JSON.stringify(h),C=e.Utils.toArray(I,"utf8");x=new e.SymmetricKey(u).encrypt(C)}const S={passwordSalt:o,passwordPresentationPrimary:p.encrypt(u),passwordRecoveryPrimary:m.encrypt(u),presentationRecoveryPrimary:g.encrypt(u),passwordPrimaryPrivileged:y.encrypt(d),presentationRecoveryPrivileged:g.encrypt(d),presentationHash:e.Hash.sha256(c),recoveryHash:e.Hash.sha256(l),presentationKeyEncrypted:(await b.encrypt({plaintext:c,protocolID:[2,"admin key wrapping"],keyID:"1"})).ciphertext,passwordKeyEncrypted:(await b.encrypt({plaintext:a,protocolID:[2,"admin key wrapping"],keyID:"1"})).ciphertext,recoveryKeyEncrypted:(await b.encrypt({plaintext:l,protocolID:[2,"admin key wrapping"],keyID:"1"})).ciphertext,profilesEncrypted:x},P=this.activeProfileId;let _=this.underlying;if(P.every(I=>I===0)||(console.log("Temporarily switching to default profile to update UMP token..."),await this.switchProfile(t.DEFAULT_PROFILE_ID),_=this.underlying),!_)throw new Error("Default profile wallet could not be activated for UMP token update.");try{S.currentOutpoint=await this.UMPTokenInteractor.buildAndSend(_,this.adminOriginator,S,f),this.currentUMPToken=S}finally{P.every(I=>I===0)||(console.log("Switching back to original profile..."),await this.switchProfile(P))}}serializeUMPToken(o){if(!o.currentOutpoint)throw new Error("Token must have outpoint for serialization");const a=new e.Utils.Writer;a.writeUInt8(2);const c=u=>{a.writeVarIntNum(u.length),a.write(u)};c(o.passwordSalt),c(o.passwordPresentationPrimary),c(o.passwordRecoveryPrimary),c(o.presentationRecoveryPrimary),c(o.passwordPrimaryPrivileged),c(o.presentationRecoveryPrivileged),c(o.presentationHash),c(o.recoveryHash),c(o.presentationKeyEncrypted),c(o.passwordKeyEncrypted),c(o.recoveryKeyEncrypted),o.profilesEncrypted&&o.profilesEncrypted.length>0?(a.writeUInt8(1),c(o.profilesEncrypted)):a.writeUInt8(0);const l=e.Utils.toArray(o.currentOutpoint,"utf8");return a.writeVarIntNum(l.length),a.write(l),a.toArray()}deserializeUMPToken(o){const a=new e.Utils.Reader(o),c=a.readUInt8();if(c!==1&&c!==2)throw new Error(`Unsupported UMP token serialization version: ${c}`);const l=()=>{const M=a.readVarIntNum();return a.read(M)},u=l(),d=l(),h=l(),f=l(),p=l(),g=l(),m=l(),y=l(),b=l(),x=l(),S=l();let P;c===2&&a.readUInt8()===1&&(P=l());const _=a.readVarIntNum(),I=a.read(_),C=e.Utils.toUTF8(I);return{passwordSalt:u,passwordPresentationPrimary:d,passwordRecoveryPrimary:h,presentationRecoveryPrimary:f,passwordPrimaryPrivileged:p,presentationRecoveryPrivileged:g,presentationHash:m,recoveryHash:y,presentationKeyEncrypted:b,passwordKeyEncrypted:x,recoveryKeyEncrypted:S,profilesEncrypted:P,currentOutpoint:C}}async setupRootInfrastructure(o,a){if(!this.currentUMPToken)throw new Error("A UMP token must exist before setting up root infrastructure!");this.rootPrimaryKey=o;let c=a?new e.PrivateKey(a):void 0;if(this.rootPrivilegedKeyManager=new n.PrivilegedKeyManager(async l=>{if(c){const p=c;return c=void 0,p}const u=await this.passwordRetriever(l,p=>{try{const g=e.Hash.pbkdf2(e.Utils.toArray(p,"utf8"),this.currentUMPToken.passwordSalt,t.PBKDF2_NUM_ROUNDS,32,"sha512"),m=this.XOR(this.rootPrimaryKey,g);return!!new e.SymmetricKey(m).decrypt(this.currentUMPToken.passwordPrimaryPrivileged)}catch{return!1}}),d=e.Hash.pbkdf2(e.Utils.toArray(u,"utf8"),this.currentUMPToken.passwordSalt,t.PBKDF2_NUM_ROUNDS,32,"sha512"),h=this.XOR(this.rootPrimaryKey,d),f=new e.SymmetricKey(h).decrypt(this.currentUMPToken.passwordPrimaryPrivileged);return new e.PrivateKey(f)}),this.profiles=[],this.currentUMPToken.profilesEncrypted&&this.currentUMPToken.profilesEncrypted.length>0)try{const l=new e.SymmetricKey(o).decrypt(this.currentUMPToken.profilesEncrypted),u=e.Utils.toUTF8(l);this.profiles=JSON.parse(u)}catch(l){throw console.error("Failed to decrypt or parse profiles:",l),this.profiles=[],new Error(`Failed to load profiles: ${l.message}`)}this.authenticated=!0}checkAuthAndUnderlying(o){if(!this.authenticated)throw new Error("User is not authenticated.");if(!this.underlying)throw new Error("Underlying wallet for the active profile is not initialized.");if(o===this.adminOriginator)throw new Error("External applications are not allowed to use the admin originator.")}async getPublicKey(o,a){return this.checkAuthAndUnderlying(a),this.underlying.getPublicKey(o,a)}async revealCounterpartyKeyLinkage(o,a){return this.checkAuthAndUnderlying(a),this.underlying.revealCounterpartyKeyLinkage(o,a)}async revealSpecificKeyLinkage(o,a){return this.checkAuthAndUnderlying(a),this.underlying.revealSpecificKeyLinkage(o,a)}async encrypt(o,a){return this.checkAuthAndUnderlying(a),this.underlying.encrypt(o,a)}async decrypt(o,a){return this.checkAuthAndUnderlying(a),this.underlying.decrypt(o,a)}async createHmac(o,a){return this.checkAuthAndUnderlying(a),this.underlying.createHmac(o,a)}async verifyHmac(o,a){return this.checkAuthAndUnderlying(a),this.underlying.verifyHmac(o,a)}async createSignature(o,a){return this.checkAuthAndUnderlying(a),this.underlying.createSignature(o,a)}async verifySignature(o,a){return this.checkAuthAndUnderlying(a),this.underlying.verifySignature(o,a)}async createAction(o,a){return this.checkAuthAndUnderlying(a),this.underlying.createAction(o,a)}async signAction(o,a){return this.checkAuthAndUnderlying(a),this.underlying.signAction(o,a)}async abortAction(o,a){return this.checkAuthAndUnderlying(a),this.underlying.abortAction(o,a)}async listActions(o,a){return this.checkAuthAndUnderlying(a),this.underlying.listActions(o,a)}async internalizeAction(o,a){return this.checkAuthAndUnderlying(a),this.underlying.internalizeAction(o,a)}async listOutputs(o,a){return this.checkAuthAndUnderlying(a),this.underlying.listOutputs(o,a)}async relinquishOutput(o,a){return this.checkAuthAndUnderlying(a),this.underlying.relinquishOutput(o,a)}async acquireCertificate(o,a){return this.checkAuthAndUnderlying(a),this.underlying.acquireCertificate(o,a)}async listCertificates(o,a){return this.checkAuthAndUnderlying(a),this.underlying.listCertificates(o,a)}async proveCertificate(o,a){return this.checkAuthAndUnderlying(a),this.underlying.proveCertificate(o,a)}async relinquishCertificate(o,a){return this.checkAuthAndUnderlying(a),this.underlying.relinquishCertificate(o,a)}async discoverByIdentityKey(o,a){return this.checkAuthAndUnderlying(a),this.underlying.discoverByIdentityKey(o,a)}async discoverByAttributes(o,a){return this.checkAuthAndUnderlying(a),this.underlying.discoverByAttributes(o,a)}async isAuthenticated(o,a){if(!this.authenticated)throw new Error("User is not authenticated.");if(a===this.adminOriginator)throw new Error("External applications are not allowed to use the admin originator.");return{authenticated:!0}}async waitForAuthentication(o,a){if(a===this.adminOriginator)throw new Error("External applications are not allowed to use the admin originator.");for(;!this.authenticated||!this.underlying;)await new Promise(c=>setTimeout(c,100));return{authenticated:!0}}async getHeight(o,a){return this.checkAuthAndUnderlying(a),this.underlying.getHeight({},a)}async getHeaderForHeight(o,a){return this.checkAuthAndUnderlying(a),this.underlying.getHeaderForHeight(o,a)}async getNetwork(o,a){return this.checkAuthAndUnderlying(a),this.underlying.getNetwork({},a)}async getVersion(o,a){return this.checkAuthAndUnderlying(a),this.underlying.getVersion({},a)}}t.CWIStyleWalletManager=i}(cA)),cA}var _1={},fF;function Zbe(){if(fF)return _1;fF=1,Object.defineProperty(_1,"__esModule",{value:!0}),_1.WalletAuthenticationManager=void 0;const t=Lj(),e=sr();let n=class extends t.CWIStyleWalletManager{constructor(i,s,o=new t.OverlayUMPTokenInteractor,a,c,l,u,d){super(i,s,o,a,c,async(h,f,p)=>{debugger;const{paymentData:g}=await this.wabClient.requestFaucet(e.Utils.toHex(h));if(!g.k||!g.tx)throw new Error("Invalid");const m=e.Transaction.fromAtomicBEEF(g.tx);console.log(g);const y=await f.createAction({inputBEEF:m.toBEEF(),inputs:[{outpoint:`${g.txid}.0`,unlockingScriptLength:108,inputDescription:"Fund from faucet"}],description:"Fund wallet",options:{acceptDelayedBroadcast:!1}},p),b=e.Transaction.fromAtomicBEEF(y.signableTransaction.tx),x=new e.RPuzzle,S=e.PrivateKey.fromRandom(),_=await x.unlock(new e.BigNumber(g.k,16),S).sign(b,0),I=await f.signAction({reference:y.signableTransaction.reference,spends:{0:{unlockingScript:_.toHex()}}});console.log("Sign action result:",I)},d),this.wabClient=l,this.authMethod=u}setAuthMethod(i){this.authMethod=i}async startAuth(i){if(!this.authMethod)throw new Error("No AuthMethod selected in WalletAuthenticationManager");this.tempPresentationKey=this.generateTemporaryPresentationKey();const s=await this.wabClient.startAuthMethod(this.authMethod,this.tempPresentationKey,i);if(!s.success)throw new Error(s.message||"Failed to start WAB auth method")}async completeAuth(i){if(!this.authMethod||!this.tempPresentationKey)throw new Error("No AuthMethod selected in WalletAuthenticationManager or startAuth has yet to be called.");const s=this.tempPresentationKey;this.tempPresentationKey=void 0;const o=await this.wabClient.completeAuthMethod(this.authMethod,s,i);if(!o.success||!o.presentationKey)throw new Error(o.message||"Failed to complete WAB auth");const a=o.presentationKey,c=e.Utils.toArray(a,"hex");await this.providePresentationKey(c)}generateTemporaryPresentationKey(){const i=(0,e.Random)(32);return e.Utils.toHex(i)}};return _1.WalletAuthenticationManager=n,_1}var Dp={},hF;function Jbe(){if(hF)return Dp;hF=1;var t=Dp&&Dp.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Dp,"__esModule",{value:!0}),Dp.WABClient=void 0;const e=t(BO);let n=class{constructor(i){this.serverUrl=i}async getInfo(){return(await fetch(`${this.serverUrl}/info`)).json()}generateRandomPresentationKey(){return e.default.randomBytes(32).toString("hex")}async startAuthMethod(i,s,o){return i.startAuth(this.serverUrl,s,o)}async completeAuthMethod(i,s,o){return i.completeAuth(this.serverUrl,s,o)}async listLinkedMethods(i){return(await fetch(`${this.serverUrl}/user/linkedMethods`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({presentationKey:i})})).json()}async unlinkMethod(i,s){return(await fetch(`${this.serverUrl}/user/unlinkMethod`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({presentationKey:i,authMethodId:s})})).json()}async requestFaucet(i){return(await fetch(`${this.serverUrl}/faucet/request`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({presentationKey:i})})).json()}async deleteUser(i){return(await fetch(`${this.serverUrl}/user/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({presentationKey:i})})).json()}};return Dp.WABClient=n,Dp}var S1={},E1={},pF;function jO(){if(pF)return E1;pF=1,Object.defineProperty(E1,"__esModule",{value:!0}),E1.AuthMethodInteractor=void 0;let t=class{};return E1.AuthMethodInteractor=t,E1}var mF;function Qbe(){if(mF)return S1;mF=1,Object.defineProperty(S1,"__esModule",{value:!0}),S1.TwilioPhoneInteractor=void 0;const t=jO();let e=class extends t.AuthMethodInteractor{constructor(){super(...arguments),this.methodType="TwilioPhone"}async startAuth(r,i,s){const o=await fetch(`${r}/auth/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({methodType:this.methodType,presentationKey:i,payload:s})});return o.ok?o.json():{success:!1,message:`HTTP error ${o.status}`}}async completeAuth(r,i,s){const o=await fetch(`${r}/auth/complete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({methodType:this.methodType,presentationKey:i,payload:s})});return o.ok?o.json():{success:!1,message:`HTTP error ${o.status}`}}};return S1.TwilioPhoneInteractor=e,S1}var T1={},gF;function e1e(){if(gF)return T1;gF=1,Object.defineProperty(T1,"__esModule",{value:!0}),T1.PersonaIDInteractor=void 0;const t=jO();let e=class extends t.AuthMethodInteractor{constructor(){super(...arguments),this.methodType="PersonaID"}async startAuth(r,i,s){return(await fetch(`${r}/auth/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({methodType:this.methodType,presentationKey:i,payload:s})})).json()}async completeAuth(r,i,s){return(await fetch(`${r}/auth/complete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({methodType:this.methodType,presentationKey:i,payload:s})})).json()}};return T1.PersonaIDInteractor=e,T1}var Bp={},I1={},yF;function t1e(){if(yF)return I1;yF=1,Object.defineProperty(I1,"__esModule",{value:!0}),I1.ServiceCollection=void 0;let t=class Dj{constructor(n){this.services=n||[],this._index=0}add(n){return this.services.push(n),this}remove(n){this.services=this.services.filter(r=>r.name!==n)}get name(){return this.services[this._index].name}get service(){return this.services[this._index].service}get allServices(){return this.services.map(n=>n.service)}get count(){return this.services.length}get index(){return this._index}reset(){this._index=0}next(){return this._index=(this._index+1)%this.count,this._index}clone(){return new Dj([...this.services])}};return I1.ServiceCollection=t,I1}var P1={},Fp={},Up={},C1={},vF;function Fj(){if(vF)return C1;vF=1,Object.defineProperty(C1,"__esModule",{value:!0}),C1.ChaintracksServiceClient=void 0;const t=Fn();let e=class Bj{static createChaintracksServiceClientOptions(){return{useAuthrite:!1}}constructor(r,i,s){this.chain=r,this.serviceUrl=i,this.options=s||Bj.createChaintracksServiceClientOptions()}async currentHeight(){return await this.getPresentHeight()}async isValidRootForHeight(r,i){const s=await this.findHeaderForHeight(i);return s?r===(0,t.asString)(s.merkleRoot):!1}async getJsonOrUndefined(r){let i;for(let s=0;s<3;s++){try{const a=await(await fetch(`${this.serviceUrl}${r}`)).json();if(a.status==="success")return a.value;i=new Error(JSON.stringify(a))}catch(o){i=o}if(i&&i.name!=="ECONNRESET")break}if(i)throw i}async getJson(r){const i=await this.getJsonOrUndefined(r);if(i===void 0)throw new Error("Value was undefined. Requested object may not exist.");return i}async postJsonVoid(r,i){const s={};s["Content-Type"]="application/json";const o=await fetch(`${this.serviceUrl}${r}`,{body:JSON.stringify(i),method:"POST",headers:s});try{const a=await o.json();if(a.status==="success")return;throw new Error(JSON.stringify(a))}catch(a){throw console.log(`Exception: ${JSON.stringify(a)}`),new Error(JSON.stringify(a))}}async addHeader(r){const i=await this.postJsonVoid("/addHeaderHex",r);if(typeof i=="string")throw new Error(i)}async startListening(){return await this.getJsonOrUndefined("/startListening")}async listening(){return await this.getJsonOrUndefined("/listening")}async getChain(){return this.chain}async isListening(){return await this.getJson("/isListening")}async isSynchronized(){return await this.getJson("/isSynchronized")}async getPresentHeight(){return await this.getJson("/getPresentHeight")}async findChainTipHeader(){return await this.getJson("/findChainTipHeaderHex")}async findChainTipHashHex(){return await this.getJson("/findChainTipHashHex")}async getHeaders(r,i){return await this.getJson(`/getHeaders?height=${r}&count=${i}`)}async findHeaderForHeight(r){return await this.getJsonOrUndefined(`/findHeaderHexForHeight?height=${r}`)}async findChainWorkForBlockHash(r){return await this.getJsonOrUndefined(`/findChainWorkHexForBlockHash?hash=${(0,t.asString)(r)}`)}async findHeaderForBlockHash(r){return await this.getJsonOrUndefined(`/findHeaderHexForBlockHash?hash=${(0,t.asString)(r)}`)}async findHeaderForMerkleRoot(r,i){return await this.getJsonOrUndefined(`/findHeaderHexForMerkleRoot?root=${(0,t.asString)(r)}&height=${i}`)}};return C1.ChaintracksServiceClient=e,C1}var $p={},bF;function n1e(){if(bF)return $p;bF=1,Object.defineProperty($p,"__esModule",{value:!0}),$p.isLive=t,$p.isBaseBlockHeader=e,$p.isBlockHeader=n,$p.isLiveBlockHeader=r;function t(i){return i.headerId!==void 0}function e(i){return typeof i.previousHash=="string"}function n(i){return"height"in i&&typeof i.previousHash=="string"}function r(i){return"chainwork"in i&&typeof i.previousHash=="string"}return $p}var xF;function r1e(){return xF||(xF=1,function(t){var e=Up&&Up.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,a)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=Up&&Up.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(Fj(),t),n(n1e(),t)}(Up)),Up}var M1={},wF;function i1e(){if(wF)return M1;wF=1,Object.defineProperty(M1,"__esModule",{value:!0}),M1.ChaintracksChainTracker=void 0;const t=Fn(),e=Fj();let n=class{constructor(i,s,o){i||(i="main"),this.chaintracks=s??new e.ChaintracksServiceClient(i,`https://npm-registry.babbage.systems:808${i==="main"?"4":"3"}`),this.cache={},this.options=o||{}}async currentHeight(){return await this.chaintracks.getPresentHeight()}async isValidRootForHeight(i,s){const o=this.cache[s];if(o)return o===i;let a;const c=this.options.maxRetries||3;let l;for(let u=1;u<=c;u++)try{if(a=await this.chaintracks.findHeaderForHeight(s),!a)return!1;break}catch(d){if(l=t.sdk.WalletError.fromUnknown(d),u>c)throw l;await(0,t.wait)(1e3)}if(!a)throw new t.sdk.WERR_INTERNAL("no header should have returned false or thrown an error.");return this.cache[s]=a.merkleRoot,a.merkleRoot===i}};return M1.ChaintracksChainTracker=n,M1}var _F;function Uj(){return _F||(_F=1,function(t){var e=Fp&&Fp.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,a)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=Fp&&Fp.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(r1e(),t),n(i1e(),t)}(Fp)),Fp}var SF;function s1e(){if(SF)return P1;SF=1,Object.defineProperty(P1,"__esModule",{value:!0}),P1.createDefaultWalletServicesOptions=n,P1.arcDefaultUrl=r;const t=Fn(),e=Uj();function n(i){const s=i==="main"?"mainnet_9596de07e92300c6287e4393594ae39c":"testnet_0e6cf72133b43ea2d7861da2a38684e3";return{chain:i,taalApiKey:s,bsvExchangeRate:{timestamp:new Date("2023-12-13"),base:"USD",rate:47.52},bsvUpdateMsecs:1e3*60*15,fiatExchangeRates:{timestamp:new Date("2023-12-13"),base:"USD",rates:{USD:1,GBP:.8,EUR:.93}},fiatUpdateMsecs:1e3*60*60*24,disableMapiCallback:!0,exchangeratesapiKey:"bd539d2ff492bcb5619d5f27726a766f",chaintracksFiatExchangeRatesUrl:`https://npm-registry.babbage.systems:${i==="main"?8084:8083}/getFiatExchangeRates`,chaintracks:new e.ChaintracksServiceClient(i,`https://npm-registry.babbage.systems:${i==="main"?8084:8083}`),arcUrl:r(i),arcConfig:{apiKey:s,deploymentId:`wallet-toolbox-${(0,t.randomBytesHex)(16)}`}}}function r(i){return i==="main"?"https://arc.taal.com":"https://arc-test.taal.com"}return P1}var zp={},VE={},EF;function o1e(){if(EF)return VE;EF=1,Object.defineProperty(VE,"__esModule",{value:!0});const t=sr();let e=class{constructor(r="main",i={}){const{apiKey:s,httpClient:o}=i;this.network=r,this.URL=`https://api.whatsonchain.com/v1/bsv/${r}`,this.httpClient=o??(0,t.defaultHttpClient)(),this.apiKey=s??""}async isValidRootForHeight(r,i){const s={method:"GET",headers:this.getHttpHeaders()},o=await this.httpClient.request(`${this.URL}/block/${i}/header`,s);if(o.ok){const{merkleroot:a}=o.data;return a===r}else{if(o.status===404)return!1;throw new Error(`Failed to verify merkleroot for height ${i} because of an error: ${JSON.stringify(o.data)} `)}}async currentHeight(){try{const r={method:"GET",headers:this.getHttpHeaders()},i=await this.httpClient.request(`${this.URL}/block/headers`,r);if(i.ok)return i.data[0].height;throw new Error(`Failed to get current height because of an error: ${JSON.stringify(i.data)} `)}catch(r){throw new Error(`Failed to get current height because of an error: ${r instanceof Error?r.message:String(r)}`)}}getHttpHeaders(){const r={Accept:"application/json"};return typeof this.apiKey=="string"&&this.apiKey.trim()!==""&&(r.Authorization=this.apiKey),r}};return VE.default=e,VE}var TF;function a1e(){if(TF)return zp;TF=1;var t=zp&&zp.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(zp,"__esModule",{value:!0}),zp.WhatsOnChain=void 0;const e=sr(),n=Fn(),r=Oj(),i=t(o1e()),s=oh();let o=class extends i.default{constructor(c="main",l={},u){super(c,l),this.services=u||new n.Services(c)}async getStatusForTxids(c){const l={name:"WoC",status:"error",error:void 0,results:[]},u={method:"POST",headers:this.getHttpHeaders(),data:{txids:c}},d=`${this.URL}/txs/status`;try{const h=await this.httpClient.request(d,u);if(!h.data||!h.ok||h.status!==200)throw new n.sdk.WERR_INVALID_OPERATION("Unable to get status for txids at this timei.");const f=h.data;for(const p of c){const g=f.find(m=>m.txid===p);!g||g.error==="unknown"?l.results.push({txid:p,status:"unknown",depth:void 0}):g.error!==void 0?(console.log(`WhatsOnChain getStatusForTxids unexpected error ${g.error} ${p}`),l.results.push({txid:p,status:"unknown",depth:void 0})):g.confirmations===void 0?l.results.push({txid:p,status:"known",depth:0}):l.results.push({txid:p,status:"mined",depth:g.confirmations})}l.status="success"}catch(h){const f=n.sdk.WalletError.fromUnknown(h);l.error=f}return l}async getTxPropagation(c){const l={method:"GET",headers:this.getHttpHeaders()},u=await this.httpClient.request(`${this.URL}/tx/hash/${c}/propagation`,l);if(!u.data||!u.ok||u.status!==200)throw new n.sdk.WERR_INVALID_PARAMETER("txid",`valid transaction. '${c}' response ${u.statusText}`);return 0}async getRawTx(c){const l=this.getHttpHeaders();l["Cache-Control"]="no-cache";const u={method:"GET",headers:l},d=`${this.URL}/tx/${c}/hex`;for(let h=0;h<2;h++){const f=await this.httpClient.request(d,u);if(f.statusText==="Too Many Requests"&&h<2){await(0,n.wait)(2e3);continue}if(f.status===404&&f.statusText==="Not Found")return;if(!f.data||!f.ok||f.status!==200)throw new n.sdk.WERR_INVALID_PARAMETER("txid",`valid transaction. '${c}' response ${f.statusText}`);return f.data}throw new n.sdk.WERR_INTERNAL}async getRawTxResult(c){const l={name:"WoC",txid:(0,n.asString)(c)};try{const u=await this.getRawTx(c);u&&(l.rawTx=(0,n.asArray)(u))}catch(u){l.error=n.sdk.WalletError.fromUnknown(u)}return l}async postBeef(c,l){const u={name:"WoC",status:"success",txidResults:[],notes:[]};let d=!1;const h=()=>({name:"WoCpostBeef",when:new Date().toISOString()}),f=()=>({...h(),beef:c.toHex(),txids:l.join(",")});for(const p of l){const g=e.Utils.toHex(c.findTxid(p).rawTx);d&&await(0,n.wait)(3e3),d=!0;const m=await this.postRawTx(g);p!==m.txid&&m.notes.push({...f(),what:"postRawTxTxidChanged",txid:p,trTxid:m.txid}),u.txidResults.push(m),u.status==="success"&&m.status!=="success"&&(u.status="error")}return u.status==="success"?u.notes.push({...h(),what:"postBeefSuccess"}):u.notes.push({...f(),what:"postBeefError"}),u}async postRawTx(c){let l=e.Utils.toHex((0,n.doubleSha256BE)(e.Utils.toArray(c,"hex")));const u={txid:l,status:"success",notes:[]},d=this.getHttpHeaders();d["Content-Type"]="application/json",d.Accept="text/plain";const h={method:"POST",headers:d,data:{txhex:c}},f=`${this.URL}/tx/raw`,p=()=>({name:"WoCpostRawTx",when:new Date().toISOString()}),g=()=>({...p(),rawTx:c,txid:l,url:f}),m=5;for(let y=0;y<m;y++){try{const b=await this.httpClient.request(f,h);if(b.statusText==="Too Many Requests"&&y<2){u.notes.push({...p(),what:"postRawTxRateLimit"}),await(0,n.wait)(2e3);continue}if(b.ok){const x=b.data;u.notes.push({...p(),what:"postRawTxSuccess"})}else if(b.data==="unexpected response code 500: Transaction already in the mempool")u.notes.push({...g(),what:"postRawTxSuccessAlreadyInMempool"});else if(u.status="error",b.data==="unexpected response code 500: 258: txn-mempool-conflict")u.doubleSpend=!0,u.competingTxs=void 0,u.notes.push({...g(),what:"postRawTxErrorMempoolConflict"});else if(b.data==="unexpected response code 500: Missing inputs")u.doubleSpend=!0,u.competingTxs=void 0,u.notes.push({...g(),what:"postRawTxErrorMissingInputs"});else{const x={...g(),what:"postRawTxError"};typeof b.data=="string"?(x.data=b.data.slice(0,128),u.data=b.data):u.data="",typeof b.statusText=="string"&&(x.statusText=b.statusText.slice(0,128),u.data+=`,${b.statusText}`),typeof b.status=="string"&&(x.status=b.status.slice(0,128),u.data+=`,${b.status}`),typeof b.status=="number"&&(x.status=b.status,u.data+=`,${b.status}`),u.notes.push(x)}}catch(b){u.status="error";const x=n.sdk.WalletError.fromUnknown(b);u.notes.push({...g(),what:"postRawTxCatch",code:x.code,description:x.description}),u.serviceError=!0,u.data=`${x.code} ${x.description}`}return u}return u.status="error",u.serviceError=!0,u.notes.push({...g(),what:"postRawTxRetryLimit",retryLimit:m}),u}async getMerklePath(c,l){const u={name:"WoCTsc",notes:[]},h={method:"GET",headers:this.getHttpHeaders()};for(let f=0;f<2;f++){try{const p=await this.httpClient.request(`${this.URL}/tx/${c}/proof/tsc`,h);if(p.statusText==="Too Many Requests"&&f<2){u.notes.push({what:"getMerklePathRetry",name:u.name,status:p.status,statusText:p.statusText}),await(0,n.wait)(2e3);continue}if(p.status===404&&p.statusText==="Not Found")return u.notes.push({what:"getMerklePathNotFound",name:u.name,status:p.status,statusText:p.statusText}),u;if(!p.ok||p.status!==200)throw u.notes.push({what:"getMerklePathBadStatus",name:u.name,status:p.status,statusText:p.statusText}),new n.sdk.WERR_INVALID_PARAMETER("txid",`valid transaction. '${c}' response ${p.statusText}`);if(!p.data)return u.notes.push({what:"getMerklePathNoData",name:u.name,status:p.status,statusText:p.statusText}),u;if(Array.isArray(p.data)||(p.data=[p.data]),p.data.length!=1)return u;const g=p.data[0],m=await l.hashToHeader(g.target);if(m){const y={index:g.index,nodes:g.nodes,height:m.height};u.merklePath=(0,r.convertProofToMerklePath)(c,y),u.header=m,u.notes.push({what:"getMerklePathSuccess",name:u.name,status:p.status,statusText:p.statusText})}else throw u.notes.push({what:"getMerklePathNoHeader",target:g.target,name:u.name,status:p.status,statusText:p.statusText}),new n.sdk.WERR_INVALID_PARAMETER("blockhash","a valid on-chain block hash")}catch(p){const g=n.sdk.WalletError.fromUnknown(p);u.notes.push({what:"getMerklePathError",name:u.name,code:g.code,description:g.description}),u.error=g}return u}throw u.notes.push({what:"getMerklePathInternal",name:u.name}),new n.sdk.WERR_INTERNAL}async updateBsvExchangeRate(c,l){if(c&&(l||(l=1e3*60*15),new Date(Date.now()-l)<c.timestamp))return c;const u={method:"GET",headers:this.getHttpHeaders()};for(let d=0;d<2;d++){const h=await this.httpClient.request(`${this.URL}/exchangerate`,u);if(h.statusText==="Too Many Requests"&&d<2){await(0,n.wait)(2e3);continue}if(!h.data||!h.ok||h.status!==200)throw new n.sdk.WERR_INVALID_OPERATION(`WoC exchangerate response ${h.statusText}`);const f=h.data;return f.currency!=="USD"&&(f.rate=NaN),{timestamp:new Date,base:"USD",rate:f.rate}}throw new n.sdk.WERR_INTERNAL}async getUtxoStatus(c,l,u){const d={name:"WoC",status:"error",error:new n.sdk.WERR_INTERNAL,details:[]};for(let h=0;;h++){let f="";try{const p=(0,n.validateScriptHash)(c,l),g={method:"GET",headers:this.getHttpHeaders()},m=await this.httpClient.request(`${this.URL}/script/${p}/unspent/all`,g);if(m.statusText==="Too Many Requests"&&h<2){await(0,n.wait)(2e3);continue}if(!m.data||!m.ok||m.status!==200)throw new n.sdk.WERR_INVALID_OPERATION(`WoC getUtxoStatus response ${m.statusText}`);const y=m.data;if(y.script!==p||!Array.isArray(y.result))throw new n.sdk.WERR_INTERNAL("data. is not an array");if(y.result.length===0)d.status="success",d.error=void 0,d.isUtxo=!1;else{d.status="success",d.error=void 0;for(const b of y.result)d.details.push({txid:b.tx_hash,satoshis:b.value,height:b.height,index:b.tx_pos});if(u){const{txid:b,vout:x}=(0,s.parseWalletOutpoint)(u);d.isUtxo=d.details.find(S=>S.txid===b&&S.index===x)!==void 0}else d.isUtxo=d.details.length>0}return d}catch(p){if(n.sdk.WalletError.fromUnknown(p).code!=="ECONNRESET"||h>2)return d.error=new n.sdk.WERR_INTERNAL(`service failure: ${f}, error: ${JSON.stringify(n.sdk.WalletError.fromUnknown(p))}`),d}}}async getScriptHashConfirmedHistory(c){const l={name:"WoC",status:"error",error:void 0,history:[]};c=e.Utils.toHex(e.Utils.toArray(c,"hex").reverse());const u=`${this.URL}/script/${c}/confirmed/history`;for(let d=0;;d++)try{const h={method:"GET",headers:this.getHttpHeaders()},f=await this.httpClient.request(u,h);if(f.statusText==="Too Many Requests"&&d<2){await(0,n.wait)(2e3);continue}return!f.ok&&f.status===404?(l.status="success",l):!f.data||!f.ok||f.status!==200?(l.error=new n.sdk.WERR_BAD_REQUEST(`WoC getScriptHashConfirmedHistory response ${f.ok} ${f.status} ${f.statusText}`),l):f.data.error?(l.error=new n.sdk.WERR_BAD_REQUEST(`WoC getScriptHashConfirmedHistory error ${f.data.error}`),l):(l.history=f.data.result.map(p=>({txid:p.tx_hash,height:p.height})),l.status="success",l)}catch(h){if(n.sdk.WalletError.fromUnknown(h).code!=="ECONNRESET"||d>2)return l.error=new n.sdk.WERR_INTERNAL(`WoC getScriptHashConfirmedHistory service failure: ${u}, error: ${JSON.stringify(n.sdk.WalletError.fromUnknown(h))}`),l}return l}async getScriptHashUnconfirmedHistory(c){const l={name:"WoC",status:"error",error:void 0,history:[]};c=e.Utils.toHex(e.Utils.toArray(c,"hex").reverse());const u=`${this.URL}/script/${c}/unconfirmed/history`;for(let d=0;;d++)try{const h={method:"GET",headers:this.getHttpHeaders()},f=await this.httpClient.request(u,h);if(f.statusText==="Too Many Requests"&&d<2){await(0,n.wait)(2e3);continue}return!f.ok&&f.status===404?(l.status="success",l):!f.data||!f.ok||f.status!==200?(l.error=new n.sdk.WERR_BAD_REQUEST(`WoC getScriptHashUnconfirmedHistory response ${f.ok} ${f.status} ${f.statusText}`),l):f.data.error?(l.error=new n.sdk.WERR_BAD_REQUEST(`WoC getScriptHashUnconfirmedHistory error ${f.data.error}`),l):(l.history=f.data.result.map(p=>({txid:p.tx_hash,height:p.height})),l.status="success",l)}catch(h){if(n.sdk.WalletError.fromUnknown(h).code!=="ECONNRESET"||d>2)return l.error=new n.sdk.WERR_INTERNAL(`WoC getScriptHashUnconfirmedHistory service failure: ${u}, error: ${JSON.stringify(n.sdk.WalletError.fromUnknown(h))}`),l}return l}async getScriptHashHistory(c){const l=await this.getScriptHashConfirmedHistory(c);if(l.error||l.status!=="success")return l;const u=await this.getScriptHashUnconfirmedHistory(c);return u.error||u.status!=="success"?u:(l.history=l.history.concat(u.history),l)}};return zp.WhatsOnChain=o,zp}var Wg={},IF;function l1e(){if(IF)return Wg;IF=1,Object.defineProperty(Wg,"__esModule",{value:!0}),Wg.updateChaintracksFiatExchangeRates=e,Wg.updateExchangeratesapi=n,Wg.getExchangeRatesIo=r;const t=Fn();async function e(i,s){const o=s.chaintracksFiatExchangeRatesUrl;if(!o)throw new t.sdk.WERR_MISSING_PARAMETER("options.chaintracksFiatExchangeRatesUrl");const a=await fetch(o),c=await a.json(),l={status:a.status,data:c};if(l.status!==200||!l.data||l.data.status!="success")throw new t.sdk.WERR_BAD_REQUEST(`${o} returned status ${l.status}`);const u=l.data.value;return u.timestamp=new Date(u.timestamp),u}async function n(i,s){if(!s.exchangeratesapiKey)throw new t.sdk.WERR_MISSING_PARAMETER("options.exchangeratesapiKey");const o=await r(s.exchangeratesapiKey);if(!o.success)throw new t.sdk.WERR_BAD_REQUEST(`getExchangeRatesIo returned success ${o.success}`);if(!o.rates.USD||!o.rates[o.base])throw new t.sdk.WERR_BAD_REQUEST("getExchangeRatesIo missing rates for 'USD' or base");const a={timestamp:new Date(o.timestamp*1e3),base:"USD",rates:{}},c=o.rates[o.base]/o.rates.USD;let l=0;for(const[u,d]of Object.entries(o.rates))i.indexOf(u)>-1&&(a.rates[u]=d*c,l++);if(l!==i.length)throw new t.sdk.WERR_BAD_REQUEST("getExchangeRatesIo failed to update all target currencies");return a}async function r(i){const s=`http://api.exchangeratesapi.io/v1/latest?access_key=${i}`,o=await fetch(s),a=await o.json(),c={status:o.status,data:a};if(c.status!==200||!c.data)throw new t.sdk.WERR_BAD_REQUEST(`getExchangeRatesIo returned status ${c.status}`);return c.data}return Wg}var A1={},PF;function c1e(){if(PF)return A1;PF=1,Object.defineProperty(A1,"__esModule",{value:!0}),A1.ARC=void 0;const t=sr(),e=Fn();function n(){return`ts-sdk-${t.Utils.toHex((0,t.Random)(16))}`}let r=class{constructor(s,o){if(this.URL=s,typeof o=="string")this.apiKey=o,this.httpClient=(0,t.defaultHttpClient)(),this.deploymentId=n(),this.callbackToken=void 0,this.callbackUrl=void 0;else{const a=o??{},{apiKey:c,deploymentId:l,httpClient:u,callbackToken:d,callbackUrl:h,headers:f}=a;this.apiKey=c,this.httpClient=u??(0,t.defaultHttpClient)(),this.deploymentId=l??n(),this.callbackToken=d,this.callbackUrl=h,this.headers=f}}requestHeaders(){const s={"Content-Type":"application/json","XDeployment-ID":this.deploymentId};if(this.apiKey!=null&&this.apiKey!==""&&(s.Authorization=`Bearer ${this.apiKey}`),this.callbackUrl!=null&&this.callbackUrl!==""&&(s["X-CallbackUrl"]=this.callbackUrl),this.callbackToken!=null&&this.callbackToken!==""&&(s["X-CallbackToken"]=this.callbackToken),this.headers!=null)for(const o in this.headers)s[o]=this.headers[o];return s}async postRawTx(s,o){let a=t.Utils.toHex((0,e.doubleSha256BE)(t.Utils.toArray(s,"hex")));o?a=o.slice(-1)[0]:o=[a];const c={method:"POST",headers:this.requestHeaders(),data:{rawTx:s}},l={txid:a,status:"success",notes:[]},u=`${this.URL}/v1/tx`,d=()=>({name:"ARCv1tx",when:new Date().toISOString()}),h=()=>({...d(),rawTx:s,txids:o.join(","),url:u});try{const f=await this.httpClient.request(u,c),{txid:p,extraInfo:g,txStatus:m,competingTxs:y}=f.data,b=()=>({txid:p,extraInfo:g,txStatus:m,competingTxs:y==null?void 0:y.join(",")});if(f.ok)l.data=`${m} ${g}`,l.txid!==p&&(l.data+=` txid altered from ${l.txid} to ${p}`),l.txid=p,m==="DOUBLE_SPEND_ATTEMPTED"||m==="SEEN_IN_ORPHAN_MEMPOOL"?(l.status="error",l.doubleSpend=!0,l.competingTxs=y,l.notes.push({...h(),...b(),what:"postRawTxDoubleSpend"})):l.notes.push({...d(),...b(),what:"postRawTxSuccess"});else if(typeof f=="string")l.notes.push({...h(),what:"postRawTxString",response:f}),l.status="error",l.serviceError=!0;else{l.status="error",l.serviceError=!0;const x={...d(),...h(),...b(),what:"postRawTxError"},S={};l.data=S;const P=typeof f.status;P==="number"||P==="string"?(x.status=f.status,S.status=f.status.toString()):(x.status=P,S.status="ERR_UNKNOWN");let _=f.data;if(_&&typeof _=="string"){x.data=f.data.slice(0,128);try{_=JSON.parse(_)}catch{}}else _&&typeof _=="object"&&(S.more=_,S.detail=_.detail,typeof S.detail!="string"&&(S.detail=void 0),S.detail&&(x.detail=S.detail));l.notes.push(x)}}catch(f){const p=e.sdk.WalletError.fromUnknown(f);l.status="error",l.serviceError=!0,l.data=`${p.code} ${p.message}`,l.notes.push({...h(),what:"postRawTxCatch",code:p.code,description:p.description})}return l}async postBeef(s,o){const a={name:"ARC",status:"success",txidResults:[],notes:[]},c=()=>({name:"ARCpostBeef",when:new Date().toISOString()});s.version===t.BEEF_V2&&s.txs.every(d=>!d.isTxidOnly)&&(s.version=t.BEEF_V1,a.notes.push({...c(),what:"postBeefV2ToV1"}));const l=s.toHex(),u=await this.postRawTx(l,o);a.status=u.status,a.txidResults=[u];for(const d of o){if(u.txid===d)continue;const h={txid:d,status:"success",notes:[]},f=await this.getTxData(d);f.txid!==d?(h.status="error",h.data="internal error",h.notes.push({...c(),what:"postBeefGetTxDataInternal",txid:d,returnedTxid:f.txid})):f.txStatus==="SEEN_ON_NETWORK"||f.txStatus==="STORED"?(h.data=f.txStatus,h.notes.push({...c(),what:"postBeefGetTxDataSuccess",txid:d,txStatus:f.txStatus})):(h.status="error",h.data=f,h.notes.push({...c(),what:"postBeefGetTxDataError",txid:d,txStatus:f.txStatus})),a.txidResults.push(h),a.status==="success"&&h.status==="error"&&(a.status="error")}return a}async getTxData(s){const o={method:"GET",headers:this.requestHeaders()};return(await this.httpClient.request(`${this.URL}/v1/tx/${s}`,o)).data}};return A1.ARC=r,A1}var R1={},CF;function u1e(){if(CF)return R1;CF=1,Object.defineProperty(R1,"__esModule",{value:!0}),R1.Bitails=void 0;const t=sr(),e=Fn();let n=class{constructor(i="main",s={}){const{apiKey:o,httpClient:a}=s;this.chain=i,this.URL=i==="main"?"https://api.bitails.io/":"https://test-api.bitails.io/",this.httpClient=a??(0,t.defaultHttpClient)(),this.apiKey=o??""}getHttpHeaders(){const i={Accept:"application/json"};return typeof this.apiKey=="string"&&this.apiKey.trim()!==""&&(i.Authorization=this.apiKey),i}async postBeef(i,s){const o=()=>({name:"BitailsPostBeef",when:new Date().toISOString()}),a=()=>({...o(),beef:i.toHex(),txids:s.join(",")}),c={...o(),what:"postBeef"},l=[];for(const d of s){const h=t.Utils.toHex(i.findTxid(d).rawTx);l.push(h)}const u=await this.postRaws(l,s);return u.notes.unshift(c),u.status!=="success"?u.notes.push({...a(),what:"postBeefError"}):u.notes.push({...o(),what:"postBeefSuccess"}),u}async postRaws(i,s){const o={name:"BitailsPostRaws",status:"success",txidResults:[],notes:[]},a=[];for(const p of i){const g=t.Utils.toHex((0,e.doubleSha256BE)(t.Utils.toArray(p,"hex")));a.push(g),(!s||s.indexOf(g)>=0)&&o.txidResults.push({txid:g,status:"success",notes:[]})}const c=this.getHttpHeaders();c["Content-Type"]="application/json";const u={method:"POST",headers:c,data:{raws:i}},d=`${this.URL}tx/broadcast/multi`,h=()=>({name:"BitailsPostRawTx",when:new Date().toISOString()}),f=()=>({...h(),raws:i.join(","),txids:o.txidResults.map(p=>p.txid).join(","),url:d});try{const p=await this.httpClient.request(d,u);if(p.ok){const g=p.data;if(g.length!==i.length)o.status="error",o.notes.push({...f(),what:"postRawsErrorResultsCount"});else{let m=-1;for(const y of g)m++,y.txid?y.txid!==a[m]&&(o.status="error",o.notes.push({...h(),what:"postRawsResultTxids",i:m,txid:y.txid,rawsTxid:a[m]})):(y.txid=a[m],o.notes.push({...h(),what:"postRawsResultMissingTxids",i:m,rawsTxid:a[m]}));if(o.status==="success")for(const y of o.txidResults){const b=g.find(S=>S.txid===y.txid),x=y.txid;if(b.error){const{code:S,message:P}=b.error;S===-27?y.notes.push({...f(),what:"postRawsSuccessAlreadyInMempool"}):(y.status="error",S===-25?(y.doubleSpend=!0,y.competingTxs=void 0,y.notes.push({...f(),what:"postRawsErrorMissingInputs"})):b.code==="ECONNRESET"?y.notes.push({...f(),what:"postRawsErrorECONNRESET",txid:x,message:P}):y.notes.push({...f(),what:"postRawsError",txid:x,code:S,message:P}))}else y.notes.push({...h(),what:"postRawsSuccess"});y.status!=="success"&&o.status==="success"&&(o.status="error")}}}else{o.status="error";const g={...f(),what:"postRawsError"};o.notes.push(g)}}catch(p){o.status="error";const g=e.sdk.WalletError.fromUnknown(p),{code:m,description:y}=g;o.notes.push({...f(),what:"postRawsCatch",code:m,description:y})}return o}async getMerklePath(i,s){const o={name:"BitailsTsc",notes:[]},a=`${this.URL}tx/${i}/proof/tsc`,c=()=>({name:"BitailsProofTsc",when:new Date().toISOString(),txid:i,url:a}),u={method:"GET",headers:this.getHttpHeaders()};try{const d=await this.httpClient.request(a,u),h=()=>({...c(),txid:i,url:a,status:d.status,statusText:d.statusText});if(d.status===404&&d.statusText==="Not Found")o.notes.push({...c(),what:"getMerklePathNotFound"});else if(!d.ok||d.status!==200||d.statusText!=="OK")o.notes.push({...h(),what:"getMerklePathBadStatus"});else if(!d.data)o.notes.push({...h(),what:"getMerklePathNoData"});else{const f=d.data,p=await s.hashToHeader(f.target);if(p){const g={index:f.index,nodes:f.nodes,height:p.height};o.merklePath=(0,e.convertProofToMerklePath)(i,g),o.header=p,o.notes.push({...h(),what:"getMerklePathSuccess"})}else o.notes.push({...h(),what:"getMerklePathNoHeader",target:f.target})}}catch(d){const h=e.sdk.WalletError.fromUnknown(d),{code:f,description:p}=h;o.notes.push({...c(),what:"getMerklePathCatch",code:f,description:p}),o.error=h}return o}};return R1.Bitails=n,R1}var MF;function d1e(){if(MF)return Bp;MF=1,Object.defineProperty(Bp,"__esModule",{value:!0}),Bp.Services=void 0,Bp.validateScriptHash=u,Bp.toBinaryBaseBlockHeader=d;const t=sr(),e=Fn(),n=t1e(),r=s1e(),i=Uj(),s=a1e(),o=l1e(),a=c1e(),c=u1e();let l=class $j{static createDefaultOptions(f){return(0,r.createDefaultWalletServicesOptions)(f)}constructor(f){this.postBeefCount=0,this.targetCurrencies=["USD","GBP","EUR"],this.chain=typeof f=="string"?f:f.chain,this.options=typeof f=="string"?$j.createDefaultOptions(this.chain):f,this.whatsonchain=new s.WhatsOnChain(this.chain,{apiKey:this.options.whatsOnChainApiKey},this),this.arc=new a.ARC(this.options.arcUrl,this.options.arcConfig),this.bitails=new c.Bitails(this.chain),this.getMerklePathServices=new n.ServiceCollection().add({name:"WhatsOnChain",service:this.whatsonchain.getMerklePath.bind(this.whatsonchain)}).add({name:"Bitails",service:this.bitails.getMerklePath.bind(this.bitails)}),this.getRawTxServices=new n.ServiceCollection().add({name:"WhatsOnChain",service:this.whatsonchain.getRawTxResult.bind(this.whatsonchain)}),this.postBeefServices=new n.ServiceCollection().add({name:"TaalArcBeef",service:this.arc.postBeef.bind(this.arc)}).add({name:"WhatsOnChain",service:this.whatsonchain.postBeef.bind(this.whatsonchain)}).add({name:"Bitails",service:this.bitails.postBeef.bind(this.bitails)}),this.getUtxoStatusServices=new n.ServiceCollection().add({name:"WhatsOnChain",service:this.whatsonchain.getUtxoStatus.bind(this.whatsonchain)}),this.getStatusForTxidsServices=new n.ServiceCollection().add({name:"WhatsOnChain",service:this.whatsonchain.getStatusForTxids.bind(this.whatsonchain)}),this.getScriptHashHistoryServices=new n.ServiceCollection().add({name:"WhatsOnChain",service:this.whatsonchain.getScriptHashHistory.bind(this.whatsonchain)}),this.updateFiatExchangeRateServices=new n.ServiceCollection().add({name:"ChaintracksService",service:o.updateChaintracksFiatExchangeRates}).add({name:"exchangeratesapi",service:o.updateExchangeratesapi})}async getChainTracker(){if(!this.options.chaintracks)throw new e.sdk.WERR_INVALID_PARAMETER("options.chaintracks","valid to enable 'getChainTracker' service.");return new i.ChaintracksChainTracker(this.chain,this.options.chaintracks)}async getBsvExchangeRate(){return this.options.bsvExchangeRate=await this.whatsonchain.updateBsvExchangeRate(this.options.bsvExchangeRate,this.options.bsvUpdateMsecs),this.options.bsvExchangeRate.rate}async getFiatExchangeRate(f,p){const g=await this.updateFiatExchangeRates(this.options.fiatExchangeRates,this.options.fiatUpdateMsecs);return this.options.fiatExchangeRates=g,p||(p="USD"),g.rates[f]/g.rates[p]}get getProofsCount(){return this.getMerklePathServices.count}get getRawTxsCount(){return this.getRawTxServices.count}get postBeefServicesCount(){return this.postBeefServices.count}get getUtxoStatsCount(){return this.getUtxoStatusServices.count}async getStatusForTxids(f,p){const g=this.getStatusForTxidsServices;p&&g.next();let m={name:"<noservices>",status:"error",error:new e.sdk.WERR_INTERNAL("No services available."),results:[]};for(let y=0;y<g.count;y++){const b=g.service,x=await b(f);if(x.status==="success"){m=x;break}g.next()}return m}hashOutputScript(f){return t.Utils.toHex((0,e.sha256Hash)(t.Utils.toArray(f,"hex")))}async getUtxoStatus(f,p,g,m){const y=this.getUtxoStatusServices;m&&y.next();let b={name:"<noservices>",status:"error",error:new e.sdk.WERR_INTERNAL("No services available."),details:[]};for(let x=0;x<2;x++){for(let S=0;S<y.count;S++){const P=y.service,_=await P(f,p,g);if(_.status==="success"){b=_;break}y.next()}if(b.status==="success")break;await(0,e.wait)(2e3)}return b}async getScriptHashHistory(f,p){const g=this.getScriptHashHistoryServices;p&&g.next();let m={name:"<noservices>",status:"error",error:new e.sdk.WERR_INTERNAL("No services available."),history:[]};for(let y=0;y<g.count;y++){const b=g.service,x=await b(f);if(x.status==="success"){m=x;break}g.next()}return m}async postBeef(f,p){this.postBeefCount++;const g=[...this.postBeefServices.allServices];for(let y=this.postBeefCount%g.length;y>0;y--)g.unshift(g.pop());return await Promise.all(g.map(async y=>await y(f,p)))}async getRawTx(f,p){p&&this.getRawTxServices.next();const g={txid:f};for(let m=0;m<this.getRawTxServices.count;m++){const y=this.getRawTxServices.service,b=await y(f,this.chain);if(b.rawTx){const x=(0,e.asString)((0,e.doubleSha256BE)(b.rawTx));if(x===(0,e.asString)(f)){g.rawTx=b.rawTx,g.name=b.name,g.error=void 0;break}b.error=new e.sdk.WERR_INTERNAL(`computed txid ${x} doesn't match requested value ${f}`),b.rawTx=void 0}b.error&&!g.error&&!g.rawTx&&(g.error=b.error),this.getRawTxServices.next()}return g}async invokeChaintracksWithRetry(f){if(!this.options.chaintracks)throw new e.sdk.WERR_INVALID_PARAMETER("options.chaintracks","valid for this service operation.");for(let p=0;p<3;p++)try{return await f()}catch(g){if(e.sdk.WalletError.fromUnknown(g).code!="ECONNRESET")throw g}throw new e.sdk.WERR_INVALID_OPERATION("hashToHeader service unavailable")}async getHeaderForHeight(f){const p=async()=>{const g=await this.options.chaintracks.findHeaderForHeight(f);if(!g)throw new e.sdk.WERR_INVALID_PARAMETER("hash",`valid height '${f}' on mined chain ${this.chain}`);return d(g)};return this.invokeChaintracksWithRetry(p)}async getHeight(){const f=async()=>await this.options.chaintracks.currentHeight();return this.invokeChaintracksWithRetry(f)}async hashToHeader(f){const p=async()=>{const g=await this.options.chaintracks.findHeaderForBlockHash(f);if(!g)throw new e.sdk.WERR_INVALID_PARAMETER("hash",`valid blockhash '${f}' on mined chain ${this.chain}`);return g};return this.invokeChaintracksWithRetry(p)}async getMerklePath(f,p){p&&this.getMerklePathServices.next();const g={notes:[]};for(let m=0;m<this.getMerklePathServices.count;m++){const y=this.getMerklePathServices.service,b=await y(f,this);if(b.notes&&g.notes.push(...b.notes),g.name||(g.name=b.name),b.merklePath){g.merklePath=b.merklePath,g.header=b.header,g.name=b.name,g.error=void 0;break}else b.error&&!g.error&&(g.error=b.error);this.getMerklePathServices.next()}return g}async updateFiatExchangeRates(f,p){p||(p=1e3*60*15);const g=new Date(Date.now()-p);if(f&&(p||(p=1e3*60*15),f.timestamp>g))return f;const m=this.updateFiatExchangeRateServices.clone();let y;for(let b=0;b<m.count;b++){const x=m.service;try{const S=await x(this.targetCurrencies,this.options);if(this.targetCurrencies.every(P=>typeof S.rates[P]=="number")){y=S;break}}catch(S){const P=e.sdk.WalletError.fromUnknown(S);console.error(`updateFiatExchangeRates servcice name ${x.name} error ${P.message}`)}m.next()}if(!y){if(console.error("Failed to update fiat exchange rates."),!f)throw new e.sdk.WERR_INTERNAL;return f}return y}async nLockTimeIsFinal(f){let m;if(typeof f=="number")m=f;else if(typeof f=="string"?f=t.Transaction.fromHex(f):Array.isArray(f)&&(f=t.Transaction.fromBinary(f)),f instanceof t.Transaction){if(f.inputs.every(b=>b.sequence===4294967295))return!0;m=f.lockTime}else throw new e.sdk.WERR_INTERNAL("Should be either @bsv/sdk Transaction or babbage-bsv Transaction");if(m>=5e8){const b=Math.floor(Date.now()/1e3);return m<b}const y=await this.getHeight();return m<y}};Bp.Services=l;function u(h,f){let p=(0,e.asArray)(h);switch(f||(p.length===32?f="hashLE":f="script"),f){case"hashBE":break;case"hashLE":p=p.reverse();break;case"script":p=(0,e.sha256Hash)(p).reverse();break;default:throw new e.sdk.WERR_INVALID_PARAMETER("outputFormat",`not be ${f}`)}return(0,e.asString)(p)}function d(h){const f=new t.Utils.Writer;return f.writeUInt32BE(h.version),f.writeReverse((0,e.asArray)(h.previousHash)),f.writeReverse((0,e.asArray)(h.merkleRoot)),f.writeUInt32BE(h.time),f.writeUInt32BE(h.bits),f.writeUInt32BE(h.nonce),f.toArray()}return Bp}var k1={},AF;function f1e(){if(AF)return k1;AF=1,Object.defineProperty(k1,"__esModule",{value:!0}),k1.SimpleWalletManager=void 0;const t=sr();let e=class{constructor(r,i,s){this.authenticated=!1,this.adminOriginator=r,this.walletBuilder=i,s&&this.loadSnapshot(s)}async providePrimaryKey(r){this.primaryKey=r,await this.tryBuildUnderlying()}async providePrivilegedKeyManager(r){this.underlyingPrivilegedKeyManager=r,await this.tryBuildUnderlying()}async tryBuildUnderlying(){if(this.authenticated)throw new Error("The user is already authenticated.");!this.primaryKey||!this.underlyingPrivilegedKeyManager||(this.underlying=await this.walletBuilder(this.primaryKey,this.underlyingPrivilegedKeyManager),this.authenticated=!0)}destroy(){this.underlying=void 0,this.underlyingPrivilegedKeyManager=void 0,this.authenticated=!1,this.primaryKey=void 0}saveSnapshot(){if(!this.primaryKey)throw new Error("No primary key is set; cannot save snapshot.");const r=(0,t.Random)(32),i=new t.Utils.Writer;i.writeUInt8(1),i.writeVarIntNum(this.primaryKey.length),i.write(this.primaryKey);const s=i.toArray(),o=new t.SymmetricKey(r).encrypt(s),a=new t.Utils.Writer;return a.write(r),a.write(o),a.toArray()}async loadSnapshot(r){try{const i=new t.Utils.Reader(r),s=i.read(32),o=i.read(),a=new t.SymmetricKey(s).decrypt(o),c=new t.Utils.Reader(a),l=c.readUInt8();if(l!==1)throw new Error(`Unsupported snapshot version: ${l}`);const u=c.readVarIntNum(),d=c.read(u);this.primaryKey=d,await this.tryBuildUnderlying()}catch(i){throw new Error(`Failed to load snapshot: ${i.message}`)}}async isAuthenticated(r,i){return this.ensureCanCall(i),{authenticated:!0}}async waitForAuthentication(r,i){if(i===this.adminOriginator)throw new Error("External applications cannot use the admin originator.");for(;!this.authenticated;)await new Promise(s=>setTimeout(s,100));return{authenticated:!0}}async getPublicKey(r,i){return this.ensureCanCall(i),this.underlying.getPublicKey(r,i)}async revealCounterpartyKeyLinkage(r,i){return this.ensureCanCall(i),this.underlying.revealCounterpartyKeyLinkage(r,i)}async revealSpecificKeyLinkage(r,i){return this.ensureCanCall(i),this.underlying.revealSpecificKeyLinkage(r,i)}async encrypt(r,i){return this.ensureCanCall(i),this.underlying.encrypt(r,i)}async decrypt(r,i){return this.ensureCanCall(i),this.underlying.decrypt(r,i)}async createHmac(r,i){return this.ensureCanCall(i),this.underlying.createHmac(r,i)}async verifyHmac(r,i){return this.ensureCanCall(i),this.underlying.verifyHmac(r,i)}async createSignature(r,i){return this.ensureCanCall(i),this.underlying.createSignature(r,i)}async verifySignature(r,i){return this.ensureCanCall(i),this.underlying.verifySignature(r,i)}async createAction(r,i){return this.ensureCanCall(i),this.underlying.createAction(r,i)}async signAction(r,i){return this.ensureCanCall(i),this.underlying.signAction(r,i)}async abortAction(r,i){return this.ensureCanCall(i),this.underlying.abortAction(r,i)}async listActions(r,i){return this.ensureCanCall(i),this.underlying.listActions(r,i)}async internalizeAction(r,i){return this.ensureCanCall(i),this.underlying.internalizeAction(r,i)}async listOutputs(r,i){return this.ensureCanCall(i),this.underlying.listOutputs(r,i)}async relinquishOutput(r,i){return this.ensureCanCall(i),this.underlying.relinquishOutput(r,i)}async acquireCertificate(r,i){return this.ensureCanCall(i),this.underlying.acquireCertificate(r,i)}async listCertificates(r,i){return this.ensureCanCall(i),this.underlying.listCertificates(r,i)}async proveCertificate(r,i){return this.ensureCanCall(i),this.underlying.proveCertificate(r,i)}async relinquishCertificate(r,i){return this.ensureCanCall(i),this.underlying.relinquishCertificate(r,i)}async discoverByIdentityKey(r,i){return this.ensureCanCall(i),this.underlying.discoverByIdentityKey(r,i)}async discoverByAttributes(r,i){return this.ensureCanCall(i),this.underlying.discoverByAttributes(r,i)}async getHeight(r,i){return this.ensureCanCall(i),this.underlying.getHeight({},i)}async getHeaderForHeight(r,i){return this.ensureCanCall(i),this.underlying.getHeaderForHeight(r,i)}async getNetwork(r,i){return this.ensureCanCall(i),this.underlying.getNetwork({},i)}async getVersion(r,i){return this.ensureCanCall(i),this.underlying.getVersion({},i)}ensureCanCall(r){if(r===this.adminOriginator)throw new Error("External applications cannot use the admin originator.");if(!this.authenticated)throw new Error("User is not authenticated.")}};return k1.SimpleWalletManager=e,k1}var Hp={},lc={},Vp={},jg={},RF;function h1e(){if(RF)return jg;RF=1,Object.defineProperty(jg,"__esModule",{value:!0}),jg.EntityBase=void 0,jg.createSyncMap=e;let t=class{constructor(r){this.api=r}toApi(){return this.updateApi(),this.api}};jg.EntityBase=t;function e(){return{provenTx:{entityName:"provenTx",idMap:{},maxUpdated_at:void 0,count:0},outputBasket:{entityName:"outputBasket",idMap:{},maxUpdated_at:void 0,count:0},transaction:{entityName:"transaction",idMap:{},maxUpdated_at:void 0,count:0},provenTxReq:{entityName:"provenTxReq",idMap:{},maxUpdated_at:void 0,count:0},txLabel:{entityName:"txLabel",idMap:{},maxUpdated_at:void 0,count:0},txLabelMap:{entityName:"txLabelMap",idMap:{},maxUpdated_at:void 0,count:0},output:{entityName:"output",idMap:{},maxUpdated_at:void 0,count:0},outputTag:{entityName:"outputTag",idMap:{},maxUpdated_at:void 0,count:0},outputTagMap:{entityName:"outputTagMap",idMap:{},maxUpdated_at:void 0,count:0},certificate:{entityName:"certificate",idMap:{},maxUpdated_at:void 0,count:0},certificateField:{entityName:"certificateField",idMap:{},maxUpdated_at:void 0,count:0},commission:{entityName:"commission",idMap:{},maxUpdated_at:void 0,count:0}}}return jg}var O1={},kF;function p1e(){if(kF)return O1;kF=1,Object.defineProperty(O1,"__esModule",{value:!0}),O1.EntitySyncState=void 0;const t=Es(),e=Fn();let n=class dc extends t.EntityBase{constructor(i){const s=new Date;super(i||{syncStateId:0,created_at:s,updated_at:s,userId:0,storageIdentityKey:"",storageName:"",init:!1,refNum:"",status:"unknown",when:void 0,errorLocal:void 0,errorOther:void 0,satoshis:void 0,syncMap:JSON.stringify((0,t.createSyncMap)())}),this.errorLocal=this.api.errorLocal?JSON.parse(this.api.errorLocal):void 0,this.errorOther=this.api.errorOther?JSON.parse(this.api.errorOther):void 0,this.syncMap=JSON.parse(this.api.syncMap),this.validateSyncMap(this.syncMap)}validateSyncMap(i){for(const s of Object.keys(i)){const o=i[s];typeof o.maxUpdated_at=="string"&&(o.maxUpdated_at=new Date(o.maxUpdated_at))}}static async fromStorage(i,s,o){const{user:a}=(0,e.verifyTruthy)(await i.findOrInsertUser(s));let{syncState:c}=(0,e.verifyTruthy)(await i.findOrInsertSyncStateAuth({userId:a.userId,identityKey:s},o.storageIdentityKey,o.storageName));return(!c.syncMap||c.syncMap==="{}")&&(c.syncMap=JSON.stringify((0,t.createSyncMap)())),new dc(c)}async updateStorage(i,s,o){if(this.updated_at=new Date,this.updateApi(s&&this.id>0),this.id===0)await i.insertSyncState(this.api);else{const a={...this.api};s&&delete a.syncMap,delete a.created_at,await i.updateSyncState((0,e.verifyId)(this.id),a,o)}}updateApi(i){this.api.errorLocal=this.apiErrorLocal,this.api.errorOther=this.apiErrorOther,i||(this.api.syncMap=this.apiSyncMap)}set created_at(i){this.api.created_at=i}get created_at(){return this.api.created_at}set updated_at(i){this.api.updated_at=i}get updated_at(){return this.api.updated_at}set userId(i){this.api.userId=i}get userId(){return this.api.userId}set storageIdentityKey(i){this.api.storageIdentityKey=i}get storageIdentityKey(){return this.api.storageIdentityKey}set storageName(i){this.api.storageName=i}get storageName(){return this.api.storageName}set init(i){this.api.init=i}get init(){return this.api.init}set refNum(i){this.api.refNum=i}get refNum(){return this.api.refNum}set status(i){this.api.status=i}get status(){return this.api.status}set when(i){this.api.when=i}get when(){return this.api.when}set satoshis(i){this.api.satoshis=i}get satoshis(){return this.api.satoshis}get apiErrorLocal(){return this.errorToString(this.errorLocal)}get apiErrorOther(){return this.errorToString(this.errorOther)}get apiSyncMap(){return JSON.stringify(this.syncMap)}get id(){return this.api.syncStateId}set id(i){this.api.syncStateId=i}get entityName(){return"syncState"}get entityTable(){return"sync_states"}static mergeIdMap(i,s){for(const[o,a]of Object.entries(i)){const c=i[o],l=s[o];if(l!==void 0&&l!==c)throw new e.sdk.WERR_INVALID_PARAMETER("syncMap",`an unmapped id or the same mapped id. ${o} maps to ${l} not equal to ${c}`);l===void 0&&(s[o]=a)}}mergeSyncMap(i){dc.mergeIdMap(i.provenTx.idMap,this.syncMap.provenTx.idMap),dc.mergeIdMap(i.outputBasket.idMap,this.syncMap.outputBasket.idMap),dc.mergeIdMap(i.transaction.idMap,this.syncMap.transaction.idMap),dc.mergeIdMap(i.provenTxReq.idMap,this.syncMap.provenTxReq.idMap),dc.mergeIdMap(i.txLabel.idMap,this.syncMap.txLabel.idMap),dc.mergeIdMap(i.output.idMap,this.syncMap.output.idMap),dc.mergeIdMap(i.outputTag.idMap,this.syncMap.outputTag.idMap),dc.mergeIdMap(i.certificate.idMap,this.syncMap.certificate.idMap),dc.mergeIdMap(i.commission.idMap,this.syncMap.commission.idMap)}errorToString(i){if(!i)return;const s={code:i.code,description:i.description,stack:i.stack};return JSON.stringify(s)}equals(i,s){return!1}async mergeNew(i,s,o,a){}async mergeExisting(i,s,o,a,c){return!1}makeRequestSyncChunkArgs(i,s,o,a){const c={identityKey:i,maxRoughSize:o||1e7,maxItems:a||1e3,offsets:[],since:this.when,fromStorageIdentityKey:this.storageIdentityKey,toStorageIdentityKey:s};for(const l of[this.syncMap.provenTx,this.syncMap.outputBasket,this.syncMap.outputTag,this.syncMap.txLabel,this.syncMap.transaction,this.syncMap.output,this.syncMap.txLabelMap,this.syncMap.outputTagMap,this.syncMap.certificate,this.syncMap.certificateField,this.syncMap.commission,this.syncMap.provenTxReq]){if(!l||!l.entityName)debugger;c.offsets.push({name:l.entityName,offset:l.count})}return c}static syncChunkSummary(i){let s="";if(s+=`SYNC CHUNK SUMMARY
  from storage: ${i.fromStorageIdentityKey}
  to storage: ${i.toStorageIdentityKey}
  for user: ${i.userIdentityKey}
`,i.user&&(s+=`  USER activeStorage ${i.user.activeStorage}
`),i.provenTxs){s+=`  PROVEN_TXS
`;for(const o of i.provenTxs)s+=`    ${o.provenTxId} ${o.txid}
`}if(i.provenTxReqs){s+=`  PROVEN_TX_REQS
`;for(const o of i.provenTxReqs)s+=`    ${o.provenTxReqId} ${o.txid} ${o.status} ${o.provenTxId||""}
`}if(i.transactions){s+=`  TRANSACTIONS
`;for(const o of i.transactions)s+=`    ${o.transactionId} ${o.txid} ${o.status} ${o.provenTxId||""} sats:${o.satoshis}
`}if(i.outputs){s+=`  OUTPUTS
`;for(const o of i.outputs)s+=`    ${o.outputId} ${o.txid}.${o.vout} ${o.transactionId} ${o.spendable?"spendable":""} sats:${o.satoshis}
`}return s}async processSyncChunk(i,s,o){var a;const c=[new t.MergeEntity(o.provenTxs,t.EntityProvenTx.mergeFind,this.syncMap.provenTx),new t.MergeEntity(o.outputBaskets,t.EntityOutputBasket.mergeFind,this.syncMap.outputBasket),new t.MergeEntity(o.outputTags,t.EntityOutputTag.mergeFind,this.syncMap.outputTag),new t.MergeEntity(o.txLabels,t.EntityTxLabel.mergeFind,this.syncMap.txLabel),new t.MergeEntity(o.transactions,t.EntityTransaction.mergeFind,this.syncMap.transaction),new t.MergeEntity(o.outputs,t.EntityOutput.mergeFind,this.syncMap.output),new t.MergeEntity(o.txLabelMaps,t.EntityTxLabelMap.mergeFind,this.syncMap.txLabelMap),new t.MergeEntity(o.outputTagMaps,t.EntityOutputTagMap.mergeFind,this.syncMap.outputTagMap),new t.MergeEntity(o.certificates,t.EntityCertificate.mergeFind,this.syncMap.certificate),new t.MergeEntity(o.certificateFields,t.EntityCertificateField.mergeFind,this.syncMap.certificateField),new t.MergeEntity(o.commissions,t.EntityCommission.mergeFind,this.syncMap.commission),new t.MergeEntity(o.provenTxReqs,t.EntityProvenTxReq.mergeFind,this.syncMap.provenTxReq)];let l=0,u=0,d,h=!0;if(o.user){const f=o.user,{found:p,eo:g}=await t.EntityUser.mergeFind(i,this.userId,f);p&&await g.mergeExisting(i,s.since,f)&&(d=(0,e.maxDate)(d,f.updated_at),l++)}for(const f of c){const p=await f.merge(s.since,i,this.userId,this.syncMap);f.esm.count+=((a=f.stateArray)===null||a===void 0?void 0:a.length)||0,l+=p.updates,u+=p.inserts,d=(0,e.maxDate)(d,f.esm.maxUpdated_at),(f.stateArray===void 0||f.stateArray.length>0)&&(h=!1)}if(h){this.when=d;for(const f of c)f.esm.count=0}return await this.updateStorage(i,!1),{done:h,maxUpdated_at:d,updates:l,inserts:u}}};return O1.EntitySyncState=n,O1}var N1={},OF;function m1e(){if(OF)return N1;OF=1,Object.defineProperty(N1,"__esModule",{value:!0}),N1.EntityProvenTx=void 0;const t=sr(),e=Fn(),n=Es();let r=class rm extends n.EntityBase{static async fromTxid(s,o,a){var c;const l={proven:void 0,rawTx:a};if(o.chain,!l.rawTx){const d=await o.getRawTx(s);if(!(d!=null&&d.rawTx))return l;l.rawTx=d.rawTx}const u=await o.getMerklePath(s);if(u.merklePath&&u.header){const d=(c=u.merklePath.path[0].find(h=>h.hash===s))===null||c===void 0?void 0:c.offset;if(d!==void 0){const h={created_at:new Date,updated_at:new Date,provenTxId:0,txid:s,height:u.header.height,index:d,merklePath:u.merklePath.toBinary(),rawTx:l.rawTx,blockHash:u.header.hash,merkleRoot:u.header.merkleRoot};l.proven=new rm(h)}}return l}constructor(s){const o=new Date;super(s||{provenTxId:0,created_at:o,updated_at:o,txid:"",height:0,index:0,merklePath:[],rawTx:[],blockHash:"",merkleRoot:""})}updateApi(){}getMerklePath(){return this._mp||(this._mp=t.MerklePath.fromBinary(this.api.merklePath)),this._mp}get provenTxId(){return this.api.provenTxId}set provenTxId(s){this.api.provenTxId=s}get created_at(){return this.api.created_at}set created_at(s){this.api.created_at=s}get updated_at(){return this.api.updated_at}set updated_at(s){this.api.updated_at=s}get txid(){return this.api.txid}set txid(s){this.api.txid=s}get height(){return this.api.height}set height(s){this.api.height=s}get index(){return this.api.index}set index(s){this.api.index=s}get merklePath(){return this.api.merklePath}set merklePath(s){this.api.merklePath=s}get rawTx(){return this.api.rawTx}set rawTx(s){this.api.rawTx=s}get blockHash(){return this.api.blockHash}set blockHash(s){this.api.blockHash=s}get merkleRoot(){return this.api.merkleRoot}set merkleRoot(s){this.api.merkleRoot=s}get id(){return this.api.provenTxId}set id(s){this.api.provenTxId=s}get entityName(){return"provenTx"}get entityTable(){return"proven_txs"}equals(s,o){const a=this.toApi();if(a.txid!=s.txid||a.height!=s.height||a.index!=s.index||!(0,e.arraysEqual)(a.merklePath,s.merklePath)||!(0,e.arraysEqual)(a.rawTx,s.rawTx)||a.blockHash!==s.blockHash||a.merkleRoot!==s.merkleRoot)return!1;if(o){if(a.provenTxId!==o.provenTx.idMap[s.provenTxId])return!1}else if(a.provenTxId!==s.provenTxId)return!1;return!0}static async mergeFind(s,o,a,c,l){const u=(0,e.verifyOneOrNone)(await s.findProvenTxs({partial:{txid:a.txid},trx:l}));return{found:!!u,eo:new rm(u||{...a}),eiId:(0,e.verifyId)(a.provenTxId)}}async mergeNew(s,o,a,c){this.provenTxId=0,this.provenTxId=await s.insertProvenTx(this.toApi(),c)}async mergeExisting(s,o,a,c,l){return!1}static async fromReq(s,o,a){if(!s.txid)throw new e.sdk.WERR_MISSING_PARAMETER("req.txid");if(!s.rawTx)throw new e.sdk.WERR_MISSING_PARAMETER("req.rawTx");if(!s.rawTx)throw new e.sdk.WERR_INTERNAL("rawTx must be valid");for(const l of o.notes||[])s.addHistoryNote(l,!0);if(!o.name&&!o.merklePath&&!o.error)return;if(!o.merklePath){if(s.created_at){const l=Date.now()-s.created_at.getTime(),u=Math.ceil(l<1?0:l/(1e3*60));if(s.attempts>rm.getProofAttemptsLimit&&u>rm.getProofMinutes){const d=rm.getProofAttemptsLimit,{attempts:h}=s;s.addHistoryNote({what:"getMerklePathGiveUp",attempts:h,limit:d,ageInMinutes:u},!0),s.notified=!1,s.status="invalid"}}return}a&&s.attempts++;const c=Array.isArray(o.merklePath)?o.merklePath:[o.merklePath];for(const l of c)try{const u=new Date,d=l.path[0].find(f=>f.txid===!0&&f.hash===s.txid);if(!d)throw s.addHistoryNote({what:"getMerklePathTxidNotFound"},!0),new e.sdk.WERR_INTERNAL("merkle path does not contain leaf for txid");return new rm({created_at:u,updated_at:u,provenTxId:0,txid:s.txid,height:l.blockHeight,index:d.offset,merklePath:l.toBinary(),rawTx:s.rawTx,merkleRoot:o.header.merkleRoot,blockHash:o.header.hash})}catch(u){const{code:d,description:h}=e.sdk.WalletError.fromUnknown(u),{attempts:f}=s;s.addHistoryNote({what:"getMerklePathProvenError",attempts:f,code:d,description:h},!0)}}};return N1.EntityProvenTx=r,r.getProofAttemptsLimit=8,r.getProofMinutes=60,N1}var L1={},NF;function g1e(){if(NF)return L1;NF=1,Object.defineProperty(L1,"__esModule",{value:!0}),L1.EntityProvenTxReq=void 0;const t=Fn(),e=Es();let n=class vd extends e.EntityBase{static async fromStorageTxid(i,s,o){const a=(0,t.verifyOneOrNone)(await i.findProvenTxReqs({partial:{txid:s},trx:o}));if(a)return new vd(a)}static async fromStorageId(i,s,o){const a=(0,t.verifyOneOrNone)(await i.findProvenTxReqs({partial:{provenTxReqId:s},trx:o}));if(!a)throw new t.sdk.WERR_INTERNAL(`proven_tx_reqs with id ${s} is missing.`);return new vd(a)}static fromTxid(i,s,o){const a=new Date;return new vd({provenTxReqId:0,created_at:a,updated_at:a,txid:i,inputBEEF:o,rawTx:s,status:"unknown",history:"{}",notify:"{}",attempts:0,notified:!1})}packApiHistory(){this.api.history=JSON.stringify(this.history)}packApiNotify(){this.api.notify=JSON.stringify(this.notify)}unpackApiHistory(){this.history=JSON.parse(this.api.history)}unpackApiNotify(){this.notify=JSON.parse(this.api.notify)}get apiHistory(){return this.packApiHistory(),this.api.history}get apiNotify(){return this.packApiNotify(),this.api.notify}set apiHistory(i){this.api.history=i,this.unpackApiHistory()}set apiNotify(i){this.api.notify=i,this.unpackApiNotify()}updateApi(){this.packApiHistory(),this.packApiNotify()}unpackApi(){if(this.unpackApiHistory(),this.unpackApiNotify(),this.notify.transactionIds){const i=[];for(const s of this.notify.transactionIds)Number.isInteger(s)&&!i.some(o=>o===s)&&i.push(s);this.notify.transactionIds=i}}async refreshFromStorage(i,s){const o=(0,t.verifyOne)(await i.findProvenTxReqs({partial:{provenTxReqId:this.id},trx:s}));this.api=o,this.unpackApi()}constructor(i){const s=new Date;super(i||{provenTxReqId:0,created_at:s,updated_at:s,txid:"",rawTx:[],history:"",notify:"",attempts:0,status:"unknown",notified:!1}),this.history={},this.notify={},this.unpackApi()}historySince(i){const s={notes:[]},o=i.toISOString(),a=this.history.notes;if(a&&s.notes)for(const c of a)c.when&&c.when>o&&s.notes.push(c);return s}historyPretty(i,s=0){const o=i?this.historySince(i):{...this.history};if(!o.notes)return"";const a=i?i.toISOString():void 0;let c="";for(const l of o.notes)a&&l.when&&l.when<a||(c+=this.prettyNote(l)+`
`);return c}prettyNote(i){let s=`${i.when}: ${i.what}`;for(const[o,a]of Object.entries(i))o!=="when"&&o!=="what"&&(typeof a=="string"?s+=" "+o+":`"+a+"`":s+=" "+o+":"+a);return s}getHistorySummary(){const i={setToCompleted:!1,setToUnmined:!1,setToCallback:!1,setToDoubleSpend:!1,setToSending:!1,setToUnconfirmed:!1},s=this.history;if(s.notes)for(const o of s.notes)this.parseHistoryNote(o,i);return i}parseHistoryNote(i,s){const o=s||{setToCompleted:!1,setToUnmined:!1,setToCallback:!1,setToDoubleSpend:!1,setToSending:!1,setToUnconfirmed:!1};let a=this.prettyNote(i);try{switch(i.what){case"status":switch(i.status_now){case"completed":o.setToCompleted=!0;break;case"unmined":o.setToUnmined=!0;break;case"callback":o.setToCallback=!0;break;case"doubleSpend":o.setToDoubleSpend=!0;break;case"sending":o.setToSending=!0;break;case"unconfirmed":o.setToUnconfirmed=!0;break;default:break}break;default:break}}catch{}return a}addNotifyTransactionId(i){if(!Number.isInteger(i))throw new t.sdk.WERR_INVALID_PARAMETER("id","integer");const s=new Set(this.notify.transactionIds||[]);s.add(i),this.notify.transactionIds=[...s].sort((o,a)=>o>a?1:o<a?-1:0),this.notified=!1}addHistoryNote(i,s){this.history.notes||(this.history.notes=[]),i.when||(i.when=new Date().toISOString()),s&&(this.history.notes=this.history.notes.filter(a=>a.what!==i.what||a.when&&a.when>i.when));let o=!0;for(const a of this.history.notes){let c=!0;for(const[l,u]of Object.entries(a))if(u!==i[l]){c=!1;break}if(c&&(o=!1),!o)break}if(o){this.history.notes.push(i);const a=c=>`${c.when} ${c.what}`;this.history.notes.sort((c,l)=>a(c)<a(l)?-1:a(c)>a(l)?1:0)}}async updateStorage(i,s){this.updated_at=new Date,this.updateApi(),this.id===0&&await i.insertProvenTxReq(this.api);const o={...this.api};await i.updateProvenTxReq(this.id,o,s)}async updateStorageDynamicProperties(i,s){this.updated_at=new Date,this.updateApi();const o={updated_at:this.api.updated_at,provenTxId:this.api.provenTxId,status:this.api.status,history:this.api.history,notify:this.api.notify,notified:this.api.notified,attempts:this.api.attempts,batch:this.api.batch};i.isStorageProvider()?await i.updateProvenTxReqDynamics(this.id,o,s):await i.runAsStorageProvider(async c=>{await c.updateProvenTxReqDynamics(this.id,o,s)})}async insertOrMerge(i,s){return await i.transaction(async a=>{let c=this.toApi();const{req:l,isNew:u}=await i.findOrInsertProvenTxReq(c,a);if(u)return new vd(l);{const d=new vd(l);return d.mergeNotifyTransactionIds(c),d.mergeHistory(c,void 0,!0),await d.updateStorage(i,a),d}},s)}get status(){return this.api.status}set status(i){i!==this.api.status&&(this.addHistoryNote({what:"status",status_was:this.api.status,status_now:i}),this.api.status=i)}get provenTxReqId(){return this.api.provenTxReqId}set provenTxReqId(i){this.api.provenTxReqId=i}get created_at(){return this.api.created_at}set created_at(i){this.api.created_at=i}get updated_at(){return this.api.updated_at}set updated_at(i){this.api.updated_at=i}get txid(){return this.api.txid}set txid(i){this.api.txid=i}get inputBEEF(){return this.api.inputBEEF}set inputBEEF(i){this.api.inputBEEF=i}get rawTx(){return this.api.rawTx}set rawTx(i){this.api.rawTx=i}get attempts(){return this.api.attempts}set attempts(i){this.api.attempts=i}get provenTxId(){return this.api.provenTxId}set provenTxId(i){this.api.provenTxId=i}get notified(){return this.api.notified}set notified(i){this.api.notified=i}get batch(){return this.api.batch}set batch(i){this.api.batch=i}get id(){return this.api.provenTxReqId}set id(i){this.api.provenTxReqId=i}get entityName(){return"provenTxReq"}get entityTable(){return"proven_tx_reqs"}equals(i,s){const o=this.toApi();if(o.txid!=i.txid||!(0,t.arraysEqual)(o.rawTx,i.rawTx)||!o.inputBEEF&&i.inputBEEF||o.inputBEEF&&!i.inputBEEF||o.inputBEEF&&i.inputBEEF&&!(0,t.arraysEqual)(o.inputBEEF,i.inputBEEF)||o.batch!=i.batch)return!1;if(s){if(o.provenTxReqId!==s.provenTxReq.idMap[(0,t.verifyId)(i.provenTxReqId)]||!o.provenTxId&&i.provenTxId||o.provenTxId&&!i.provenTxId||i.provenTxId&&o.provenTxId!==s.provenTx.idMap[i.provenTxId])return!1}else if(o.attempts!=i.attempts||o.history!=i.history||o.notify!=i.notify||o.provenTxReqId!==i.provenTxReqId||o.provenTxId!==i.provenTxId)return!1;return!0}static async mergeFind(i,s,o,a,c){const l=(0,t.verifyOneOrNone)(await i.findProvenTxReqs({partial:{txid:o.txid},trx:c}));return{found:!!l,eo:new vd(l||{...o}),eiId:(0,t.verifyId)(o.provenTxReqId)}}mapNotifyTransactionIds(i){const s=this.notify.transactionIds||[];this.notify.transactionIds=[];for(const o of s){const a=i.transaction.idMap[o];a&&this.addNotifyTransactionId(a)}}mergeNotifyTransactionIds(i,s){var o;const a=new vd(i);if(a.notify.transactionIds){(o=this.notify).transactionIds||(o.transactionIds=[]);for(const c of a.notify.transactionIds){const l=s?s.transaction.idMap[c]:c;l&&this.addNotifyTransactionId(l)}}}mergeHistory(i,s,o){const a=new vd(i);if(a.history.notes)for(const c of a.history.notes)this.addHistoryNote(c)}static isTerminalStatus(i){return t.sdk.ProvenTxReqTerminalStatus.some(s=>s===i)}async mergeNew(i,s,o,a){this.provenTxId&&(this.provenTxId=o.provenTx.idMap[this.provenTxId]),this.mapNotifyTransactionIds(o),this.provenTxReqId=0,this.provenTxReqId=await i.insertProvenTxReq(this.toApi(),a)}async mergeExisting(i,s,o,a,c){if(!this.batch&&o.batch)this.batch=o.batch;else if(this.batch&&o.batch&&this.batch!==o.batch)throw new t.sdk.WERR_INTERNAL("ProvenTxReq merge batch not equal.");return this.mergeHistory(o,a,!0),this.mergeNotifyTransactionIds(o,a),this.updated_at=new Date(Math.max(o.updated_at.getTime(),this.updated_at.getTime())),await i.updateProvenTxReq(this.id,this.toApi(),c),!1}};return L1.EntityProvenTxReq=n,L1}var D1={},LF;function y1e(){if(LF)return D1;LF=1,Object.defineProperty(D1,"__esModule",{value:!0}),D1.MergeEntity=void 0;const t=Fn();let e=class{constructor(r,i,s){this.stateArray=r,this.find=i,this.esm=s,this.idMap=s.idMap}updateSyncMap(r,i,s){const o=(0,t.verifyId)(i),a=(0,t.verifyId)(s);if(r[o]===void 0)r[o]=a;else if(r[o]!==a)throw new t.sdk.WERR_INTERNAL(`updateSyncMap map[${i}] can't override ${r[o]} with ${a}`)}async merge(r,i,s,o,a){let c=0,l=0;if(!this.stateArray)return{inserts:c,updates:l};for(const u of this.stateArray){this.esm.maxUpdated_at=(0,t.maxDate)(this.esm.maxUpdated_at,u.updated_at);try{const{found:d,eo:h,eiId:f}=await this.find(i,s,u,o,a);d?await h.mergeExisting(i,r,u,o,a)&&l++:(await h.mergeNew(i,s,o,a),c++),f>-1&&this.updateSyncMap(this.idMap,f,h.id)}catch(d){throw d}}return{inserts:c,updates:l}}};return D1.MergeEntity=e,D1}var B1={},DF;function v1e(){if(DF)return B1;DF=1,Object.defineProperty(B1,"__esModule",{value:!0}),B1.EntityOutputBasket=void 0;const t=Fn(),e=Es();let n=class zj extends e.EntityBase{constructor(i){const s=new Date;super(i||{basketId:0,created_at:s,updated_at:s,userId:0,name:"",numberOfDesiredUTXOs:0,minimumDesiredUTXOValue:0,isDeleted:!1})}get basketId(){return this.api.basketId}set basketId(i){this.api.basketId=i}get created_at(){return this.api.created_at}set created_at(i){this.api.created_at=i}get updated_at(){return this.api.updated_at}set updated_at(i){this.api.updated_at=i}get userId(){return this.api.userId}set userId(i){this.api.userId=i}get name(){return this.api.name}set name(i){this.api.name=i}get numberOfDesiredUTXOs(){return this.api.numberOfDesiredUTXOs}set numberOfDesiredUTXOs(i){this.api.numberOfDesiredUTXOs=i}get minimumDesiredUTXOValue(){return this.api.minimumDesiredUTXOValue}set minimumDesiredUTXOValue(i){this.api.minimumDesiredUTXOValue=i}get isDeleted(){return this.api.isDeleted}set isDeleted(i){this.api.isDeleted=i}get id(){return this.api.basketId}set id(i){this.api.basketId=i}get entityName(){return"outputBasket"}get entityTable(){return"output_baskets"}updateApi(){}equals(i,s){const o=this.api;if(o.name!=i.name||o.numberOfDesiredUTXOs!=i.numberOfDesiredUTXOs||o.minimumDesiredUTXOValue!=i.minimumDesiredUTXOValue)return!1;if(s){if(o.basketId!==s.outputBasket.idMap[(0,t.verifyId)(i.basketId)])return!1}else if(o.basketId!==i.basketId||o.userId!==i.userId)return!1;return!0}static async mergeFind(i,s,o,a,c){const l=(0,t.verifyOneOrNone)(await i.findOutputBaskets({partial:{name:o.name,userId:s},trx:c}));return{found:!!l,eo:new zj(l||{...o}),eiId:(0,t.verifyId)(o.basketId)}}async mergeNew(i,s,o,a){this.userId=s,this.name||(this.name="default"),this.basketId=0,this.basketId=await i.insertOutputBasket(this.toApi(),a)}async mergeExisting(i,s,o,a,c){let l=!1;return o.updated_at>this.updated_at&&(this.minimumDesiredUTXOValue=o.minimumDesiredUTXOValue,this.numberOfDesiredUTXOs=o.numberOfDesiredUTXOs,this.isDeleted=o.isDeleted,this.updated_at=new Date(Math.max(o.updated_at.getTime(),this.updated_at.getTime())),await i.updateOutputBasket(this.id,this.toApi(),c),l=!0),l}};return B1.EntityOutputBasket=n,B1}var F1={},BF;function b1e(){if(BF)return F1;BF=1,Object.defineProperty(F1,"__esModule",{value:!0}),F1.EntityUser=void 0;const t=Fn(),e=Es();let n=class Hj extends e.EntityBase{constructor(i){const s=new Date;super(i||{userId:0,created_at:s,updated_at:s,identityKey:"",activeStorage:""})}updateApi(){}get userId(){return this.api.userId}set userId(i){this.api.userId=i}get created_at(){return this.api.created_at}set created_at(i){this.api.created_at=i}get updated_at(){return this.api.updated_at}set updated_at(i){this.api.updated_at=i}get identityKey(){return this.api.identityKey}set identityKey(i){this.api.identityKey=i}get activeStorage(){return this.api.activeStorage}set activeStorage(i){this.api.activeStorage=i}get id(){return this.api.userId}set id(i){this.api.userId=i}get entityName(){return"user"}get entityTable(){return"users"}equals(i,s){const o=this.toApi();return!(o.identityKey!=i.identityKey||o.activeStorage!=i.activeStorage)}static async mergeFind(i,s,o,a){const c=(0,t.verifyOneOrNone)(await i.findUsers({partial:{identityKey:o.identityKey},trx:a}));if(c&&c.userId!=s)throw new t.sdk.WERR_INTERNAL("logic error, userIds don not match.");return{found:!!c,eo:new Hj(c||{...o}),eiId:(0,t.verifyId)(o.userId)}}async mergeNew(i,s,o,a){throw new t.sdk.WERR_INTERNAL("a sync chunk merge must never create a new user")}async mergeExisting(i,s,o,a,c){let l=!1;return(o.updated_at>this.updated_at||this.activeStorage===void 0&&o.activeStorage!==void 0)&&(this.activeStorage=o.activeStorage,this.updated_at=new Date(Math.max(o.updated_at.getTime(),this.updated_at.getTime())),await i.updateUser(this.id,this.toApi(),c),l=!0),l}};return F1.EntityUser=n,F1}var U1={},FF;function x1e(){if(FF)return U1;FF=1,Object.defineProperty(U1,"__esModule",{value:!0}),U1.EntityTxLabelMap=void 0;const t=Fn(),e=Es();let n=class Vj extends e.EntityBase{constructor(i){const s=new Date;super(i||{created_at:s,updated_at:s,transactionId:0,txLabelId:0,isDeleted:!1})}updateApi(){}get txLabelId(){return this.api.txLabelId}set txLabelId(i){this.api.txLabelId=i}get transactionId(){return this.api.transactionId}set transactionId(i){this.api.transactionId=i}get created_at(){return this.api.created_at}set created_at(i){this.api.created_at=i}get updated_at(){return this.api.updated_at}set updated_at(i){this.api.updated_at=i}get isDeleted(){return this.api.isDeleted}set isDeleted(i){this.api.isDeleted=i}get id(){throw new t.sdk.WERR_INVALID_OPERATION('entity has no "id" value')}get entityName(){return"txLabelMap"}get entityTable(){return"tx_labels_map"}equals(i,s){const o=this.toApi();return!(o.transactionId!==(s?s.transaction.idMap[(0,t.verifyId)(i.transactionId)]:i.transactionId)||o.txLabelId!==(s?s.txLabel.idMap[(0,t.verifyId)(i.txLabelId)]:i.txLabelId)||o.isDeleted!==i.isDeleted)}static async mergeFind(i,s,o,a,c){const l=a.transaction.idMap[o.transactionId],u=a.txLabel.idMap[o.txLabelId],d=(0,t.verifyOneOrNone)(await i.findTxLabelMaps({partial:{transactionId:l,txLabelId:u},trx:c}));return{found:!!d,eo:new Vj(d||{...o}),eiId:-1}}async mergeNew(i,s,o,a){this.transactionId=o.transaction.idMap[this.transactionId],this.txLabelId=o.txLabel.idMap[this.txLabelId],await i.insertTxLabelMap(this.toApi(),a)}async mergeExisting(i,s,o,a,c){let l=!1;return o.updated_at>this.updated_at&&(this.isDeleted=o.isDeleted,this.updated_at=new Date(Math.max(o.updated_at.getTime(),this.updated_at.getTime())),await i.updateTxLabelMap(this.transactionId,this.txLabelId,this.toApi(),c),l=!0),l}};return U1.EntityTxLabelMap=n,U1}var $1={},UF;function w1e(){if(UF)return $1;UF=1,Object.defineProperty($1,"__esModule",{value:!0}),$1.EntityTxLabel=void 0;const t=Fn(),e=Es();let n=class Wj extends e.EntityBase{constructor(i){const s=new Date;super(i||{txLabelId:0,created_at:s,updated_at:s,label:"",userId:0,isDeleted:!1})}updateApi(){}get txLabelId(){return this.api.txLabelId}set txLabelId(i){this.api.txLabelId=i}get created_at(){return this.api.created_at}set created_at(i){this.api.created_at=i}get updated_at(){return this.api.updated_at}set updated_at(i){this.api.updated_at=i}get label(){return this.api.label}set label(i){this.api.label=i}get userId(){return this.api.userId}set userId(i){this.api.userId=i}get isDeleted(){return this.api.isDeleted}set isDeleted(i){this.api.isDeleted=i}get id(){return this.api.txLabelId}set id(i){this.api.txLabelId=i}get entityName(){return"txLabel"}get entityTable(){return"tx_labels"}equals(i,s){const o=this.toApi();return!(o.label!=i.label||o.isDeleted!=i.isDeleted||!s&&o.userId!==i.userId)}static async mergeFind(i,s,o,a,c){const l=(0,t.verifyOneOrNone)(await i.findTxLabels({partial:{label:o.label,userId:s},trx:c}));return{found:!!l,eo:new Wj(l||{...o}),eiId:(0,t.verifyId)(o.txLabelId)}}async mergeNew(i,s,o,a){this.userId=s,this.txLabelId=0,this.txLabelId=await i.insertTxLabel(this.toApi(),a)}async mergeExisting(i,s,o,a,c){let l=!1;return o.updated_at>this.updated_at&&(this.isDeleted=o.isDeleted,this.updated_at=new Date(Math.max(o.updated_at.getTime(),this.updated_at.getTime())),await i.updateTxLabel(this.id,this.toApi(),c),l=!0),l}};return $1.EntityTxLabel=n,$1}var z1={},$F;function _1e(){if($F)return z1;$F=1,Object.defineProperty(z1,"__esModule",{value:!0}),z1.EntityOutputTag=void 0;const t=Fn(),e=Es();let n=class jj extends e.EntityBase{constructor(i){const s=new Date;super(i||{outputTagId:0,created_at:s,updated_at:s,tag:"",userId:0,isDeleted:!1})}updateApi(){}get outputTagId(){return this.api.outputTagId}set outputTagId(i){this.api.outputTagId=i}get created_at(){return this.api.created_at}set created_at(i){this.api.created_at=i}get updated_at(){return this.api.updated_at}set updated_at(i){this.api.updated_at=i}get tag(){return this.api.tag}set tag(i){this.api.tag=i}get userId(){return this.api.userId}set userId(i){this.api.userId=i}get isDeleted(){return this.api.isDeleted}set isDeleted(i){this.api.isDeleted=i}get id(){return this.api.outputTagId}set id(i){this.api.outputTagId=i}get entityName(){return"outputTag"}get entityTable(){return"output_tags"}equals(i,s){const o=this.toApi();return!(o.tag!=i.tag||o.isDeleted!=i.isDeleted||!s&&o.userId!==i.userId)}static async mergeFind(i,s,o,a,c){const l=(0,t.verifyOneOrNone)(await i.findOutputTags({partial:{tag:o.tag,userId:s},trx:c}));return{found:!!l,eo:new jj(l||{...o}),eiId:(0,t.verifyId)(o.outputTagId)}}async mergeNew(i,s,o,a){this.userId=s,this.outputTagId=0,this.outputTagId=await i.insertOutputTag(this.toApi(),a)}async mergeExisting(i,s,o,a,c){let l=!1;return o.updated_at>this.updated_at&&(this.isDeleted=o.isDeleted,this.updated_at=new Date(Math.max(o.updated_at.getTime(),this.updated_at.getTime())),await i.updateOutputTag(this.id,this.toApi(),c),l=!0),l}};return z1.EntityOutputTag=n,z1}var H1={},zF;function S1e(){if(zF)return H1;zF=1,Object.defineProperty(H1,"__esModule",{value:!0}),H1.EntityOutputTagMap=void 0;const t=Fn(),e=Es();let n=class qj extends e.EntityBase{constructor(i){const s=new Date;super(i||{created_at:s,updated_at:s,outputId:0,outputTagId:0,isDeleted:!1})}updateApi(){}get outputTagId(){return this.api.outputTagId}set outputTagId(i){this.api.outputTagId=i}get outputId(){return this.api.outputId}set outputId(i){this.api.outputId=i}get created_at(){return this.api.created_at}set created_at(i){this.api.created_at=i}get updated_at(){return this.api.updated_at}set updated_at(i){this.api.updated_at=i}get isDeleted(){return this.api.isDeleted}set isDeleted(i){this.api.isDeleted=i}get id(){throw new t.sdk.WERR_INVALID_OPERATION('entity has no "id" value')}get entityName(){return"outputTagMap"}get entityTable(){return"output_tags_map"}equals(i,s){const o=this.toApi();return!(o.outputId!==(s?s.output.idMap[(0,t.verifyId)(i.outputId)]:i.outputId)||o.outputTagId!==(s?s.outputTag.idMap[(0,t.verifyId)(i.outputTagId)]:i.outputTagId)||o.isDeleted!==i.isDeleted)}static async mergeFind(i,s,o,a,c){const l=a.output.idMap[o.outputId],u=a.outputTag.idMap[o.outputTagId],d=(0,t.verifyOneOrNone)(await i.findOutputTagMaps({partial:{outputId:l,outputTagId:u},trx:c}));return{found:!!d,eo:new qj(d||{...o}),eiId:-1}}async mergeNew(i,s,o,a){this.outputId=o.output.idMap[this.outputId],this.outputTagId=o.outputTag.idMap[this.outputTagId],await i.insertOutputTagMap(this.toApi(),a)}async mergeExisting(i,s,o,a,c){let l=!1;return o.updated_at>this.updated_at&&(this.isDeleted=o.isDeleted,this.updated_at=new Date(Math.max(o.updated_at.getTime(),this.updated_at.getTime())),await i.updateOutputTagMap(this.outputId,this.outputTagId,this.toApi(),c),l=!0),l}};return H1.EntityOutputTagMap=n,H1}var V1={},HF;function E1e(){if(HF)return V1;HF=1,Object.defineProperty(V1,"__esModule",{value:!0}),V1.EntityCommission=void 0;const t=Fn(),e=Es();let n=class Kj extends e.EntityBase{constructor(i){const s=new Date;super(i||{commissionId:0,created_at:s,updated_at:s,transactionId:0,userId:0,isRedeemed:!1,keyOffset:"",lockingScript:[],satoshis:0})}updateApi(){}get commissionId(){return this.api.commissionId}set commissionId(i){this.api.commissionId=i}get created_at(){return this.api.created_at}set created_at(i){this.api.created_at=i}get updated_at(){return this.api.updated_at}set updated_at(i){this.api.updated_at=i}get transactionId(){return this.api.transactionId}set transactionId(i){this.api.transactionId=i}get userId(){return this.api.userId}set userId(i){this.api.userId=i}get isRedeemed(){return this.api.isRedeemed}set isRedeemed(i){this.api.isRedeemed=i}get keyOffset(){return this.api.keyOffset}set keyOffset(i){this.api.keyOffset=i}get lockingScript(){return this.api.lockingScript}set lockingScript(i){this.api.lockingScript=i}get satoshis(){return this.api.satoshis}set satoshis(i){this.api.satoshis=i}get id(){return this.api.commissionId}set id(i){this.api.commissionId=i}get entityName(){return"commission"}get entityTable(){return"commissions"}equals(i,s){return!(this.isRedeemed!==i.isRedeemed||this.transactionId!==(s?s.transaction.idMap[i.transactionId]:i.transactionId)||this.keyOffset!==i.keyOffset||!(0,t.arraysEqual)(this.lockingScript,i.lockingScript)||this.satoshis!==i.satoshis)}static async mergeFind(i,s,o,a,c){const l=a.transaction.idMap[o.transactionId],u=(0,t.verifyOneOrNone)(await i.findCommissions({partial:{transactionId:l,userId:s},trx:c}));return{found:!!u,eo:new Kj(u||{...o}),eiId:(0,t.verifyId)(o.commissionId)}}async mergeNew(i,s,o,a){this.transactionId&&(this.transactionId=o.transaction.idMap[this.transactionId]),this.userId=s,this.commissionId=0,this.commissionId=await i.insertCommission(this.toApi(),a)}async mergeExisting(i,s,o,a,c){let l=!1;return o.updated_at>this.updated_at&&(this.isRedeemed=o.isRedeemed,this.updated_at=new Date(Math.max(o.updated_at.getTime(),this.updated_at.getTime())),await i.updateCommission(this.id,this.toApi(),c),l=!0),l}};return V1.EntityCommission=n,V1}var W1={},VF;function T1e(){if(VF)return W1;VF=1,Object.defineProperty(W1,"__esModule",{value:!0}),W1.EntityCertificate=void 0;const t=Fn(),e=Es();let n=class Gj extends e.EntityBase{constructor(i){const s=new Date;super(i||{certificateId:0,created_at:s,updated_at:s,userId:0,type:"",subject:"",verifier:void 0,serialNumber:"",certifier:"",revocationOutpoint:"",signature:"",isDeleted:!1})}updateApi(){}get certificateId(){return this.api.certificateId}set certificateId(i){this.api.certificateId=i}get created_at(){return this.api.created_at}set created_at(i){this.api.created_at=i}get updated_at(){return this.api.updated_at}set updated_at(i){this.api.updated_at=i}get userId(){return this.api.userId}set userId(i){this.api.userId=i}get type(){return this.api.type}set type(i){this.api.type=i}get subject(){return this.api.subject}set subject(i){this.api.subject=i}get verifier(){return this.api.verifier}set verifier(i){this.api.verifier=i}get serialNumber(){return this.api.serialNumber}set serialNumber(i){this.api.serialNumber=i}get certifier(){return this.api.certifier}set certifier(i){this.api.certifier=i}get revocationOutpoint(){return this.api.revocationOutpoint}set revocationOutpoint(i){this.api.revocationOutpoint=i}get signature(){return this.api.signature}set signature(i){this.api.signature=i}get isDeleted(){return this.api.isDeleted}set isDeleted(i){this.api.isDeleted=i}get id(){return this.api.certificateId}set id(i){this.api.certificateId=i}get entityName(){return"certificate"}get entityTable(){return"certificates"}equals(i,s){return!(this.type!==i.type||this.subject!==i.subject||this.serialNumber!==i.serialNumber||this.revocationOutpoint!==i.revocationOutpoint||this.signature!==i.signature||this.verifier!==i.verifier||this.isDeleted!==i.isDeleted)}static async mergeFind(i,s,o,a,c){const l=(0,t.verifyOneOrNone)(await i.findCertificates({partial:{serialNumber:o.serialNumber,certifier:o.certifier,userId:s},trx:c}));return{found:!!l,eo:new Gj(l||{...o}),eiId:(0,t.verifyId)(o.certificateId)}}async mergeNew(i,s,o,a){this.userId=s,this.certificateId=0,this.certificateId=await i.insertCertificate(this.toApi(),a)}async mergeExisting(i,s,o,a,c){let l=!1;return o.updated_at>this.updated_at&&(this.type=o.type,this.subject=o.subject,this.serialNumber=o.serialNumber,this.revocationOutpoint=o.revocationOutpoint,this.signature=o.signature,this.verifier=o.verifier,this.isDeleted=o.isDeleted,this.updated_at=new Date(Math.max(o.updated_at.getTime(),this.updated_at.getTime())),await i.updateCertificate(this.id,this.toApi(),c),l=!0),l}};return W1.EntityCertificate=n,W1}var j1={},WF;function I1e(){if(WF)return j1;WF=1,Object.defineProperty(j1,"__esModule",{value:!0}),j1.EntityCertificateField=void 0;const t=Fn(),e=Es();let n=class Xj extends e.EntityBase{constructor(i){const s=new Date;super(i||{created_at:s,updated_at:s,userId:0,certificateId:0,fieldName:"",fieldValue:"",masterKey:""})}updateApi(){}get userId(){return this.api.userId}set userId(i){this.api.userId=i}get certificateId(){return this.api.certificateId}set certificateId(i){this.api.certificateId=i}get created_at(){return this.api.created_at}set created_at(i){this.api.created_at=i}get updated_at(){return this.api.updated_at}set updated_at(i){this.api.updated_at=i}get fieldName(){return this.api.fieldName}set fieldName(i){this.api.fieldName=i}get fieldValue(){return this.api.fieldValue}set fieldValue(i){this.api.fieldValue=i}get masterKey(){return this.api.masterKey}set masterKey(i){this.api.masterKey=i}get id(){throw new t.sdk.WERR_INVALID_OPERATION('entity has no "id" value')}get entityName(){return"certificateField"}get entityTable(){return"certificate_fields"}equals(i,s){return!(this.certificateId!==(s?s.certificate.idMap[i.certificateId]:i.certificateId)||this.fieldName!==i.fieldName||this.fieldValue!==i.fieldValue||this.masterKey!==i.masterKey)}static async mergeFind(i,s,o,a,c){const l=a.certificate.idMap[o.certificateId],u=(0,t.verifyOneOrNone)(await i.findCertificateFields({partial:{certificateId:l,userId:s,fieldName:o.fieldName},trx:c}));return{found:!!u,eo:new Xj(u||{...o}),eiId:-1}}async mergeNew(i,s,o,a){this.certificateId=o.certificate.idMap[this.certificateId],this.userId=s,await i.insertCertificateField(this.toApi(),a)}async mergeExisting(i,s,o,a,c){let l=!1;return o.updated_at>this.updated_at&&(this.fieldValue=o.fieldValue,this.masterKey=o.masterKey,this.updated_at=new Date(Math.max(o.updated_at.getTime(),this.updated_at.getTime())),await i.updateCertificateField(this.certificateId,this.fieldName,this.toApi(),c),l=!0),l}};return j1.EntityCertificateField=n,j1}var q1={},jF;function P1e(){if(jF)return q1;jF=1,Object.defineProperty(q1,"__esModule",{value:!0}),q1.EntityTransaction=void 0;const t=sr(),e=Fn(),n=Es();let r=class Yj extends n.EntityBase{getBsvTx(){if(this.rawTx)return t.Transaction.fromBinary(this.rawTx)}getBsvTxIns(){const s=this.getBsvTx();return s?s.inputs:[]}async getInputs(s,o){const a=await s.findOutputs({partial:{userId:this.userId,spentBy:this.id},trx:o});for(const c of this.getBsvTxIns()){const l=(0,e.verifyOneOrNone)(await s.findOutputs({partial:{userId:this.userId,txid:c.sourceTXID,vout:c.sourceOutputIndex},trx:o}));l&&!a.some(u=>u.outputId===l.outputId)&&a.push(l)}return a}constructor(s){const o=new Date;super(s||{transactionId:0,created_at:o,updated_at:o,userId:0,txid:"",status:"unprocessed",reference:"",satoshis:0,description:"",isOutgoing:!1,rawTx:void 0,inputBEEF:void 0})}updateApi(){}get transactionId(){return this.api.transactionId}set transactionId(s){this.api.transactionId=s}get created_at(){return this.api.created_at}set created_at(s){this.api.created_at=s}get updated_at(){return this.api.updated_at}set updated_at(s){this.api.updated_at=s}get version(){return this.api.version}set version(s){this.api.version=s}get lockTime(){return this.api.lockTime}set lockTime(s){this.api.lockTime=s}get isOutgoing(){return this.api.isOutgoing}set isOutgoing(s){this.api.isOutgoing=s}get status(){return this.api.status}set status(s){this.api.status=s}get userId(){return this.api.userId}set userId(s){this.api.userId=s}get provenTxId(){return this.api.provenTxId}set provenTxId(s){this.api.provenTxId=s}get satoshis(){return this.api.satoshis}set satoshis(s){this.api.satoshis=s}get txid(){return this.api.txid}set txid(s){this.api.txid=s}get reference(){return this.api.reference}set reference(s){this.api.reference=s}get inputBEEF(){return this.api.inputBEEF}set inputBEEF(s){this.api.inputBEEF=s}get description(){return this.api.description}set description(s){this.api.description=s}get rawTx(){return this.api.rawTx}set rawTx(s){this.api.rawTx=s}get id(){return this.api.transactionId}set id(s){this.api.transactionId=s}get entityName(){return"transaction"}get entityTable(){return"transactions"}equals(s,o){const a=this.toApi();return!(a.transactionId!==(o?o.transaction.idMap[(0,e.verifyId)(s.transactionId)]:s.transactionId)||a.reference!==s.reference||a.version!==s.version||a.lockTime!==s.lockTime||a.isOutgoing!==s.isOutgoing||a.status!==s.status||a.satoshis!==s.satoshis||a.txid!==s.txid||a.description!==s.description||!(0,e.optionalArraysEqual)(a.rawTx,s.rawTx)||!(0,e.optionalArraysEqual)(a.inputBEEF,s.inputBEEF)||!a.provenTxId!=!s.provenTxId||s.provenTxId&&a.provenTxId!==(o?o.provenTx.idMap[(0,e.verifyId)(s.provenTxId)]:s.provenTxId))}static async mergeFind(s,o,a,c,l){const u=(0,e.verifyOneOrNone)(await s.findTransactions({partial:{reference:a.reference,userId:o},trx:l}));return{found:!!u,eo:new Yj(u||{...a}),eiId:(0,e.verifyId)(a.transactionId)}}async mergeNew(s,o,a,c){this.provenTxId&&(this.provenTxId=a.provenTx.idMap[this.provenTxId]),this.userId=o,this.transactionId=0,this.transactionId=await s.insertTransaction(this.toApi(),c)}async mergeExisting(s,o,a,c,l){let u=!1;return a.updated_at>this.updated_at&&(this.version=a.version,this.lockTime=a.lockTime,this.isOutgoing=a.isOutgoing,this.status=a.status,this.provenTxId=a.provenTxId?c.provenTx.idMap[a.provenTxId]:void 0,this.satoshis=a.satoshis,this.txid=a.txid,this.description=a.description,this.rawTx=a.rawTx,this.inputBEEF=a.inputBEEF,this.updated_at=new Date(Math.max(a.updated_at.getTime(),this.updated_at.getTime())),await s.updateTransaction(this.id,this.toApi(),l),u=!0),u}async getProvenTx(s,o){if(!this.provenTxId)return;const a=(0,e.verifyOneOrNone)(await s.findProvenTxs({partial:{provenTxId:this.provenTxId},trx:o}));if(a)return new n.EntityProvenTx(a)}};return q1.EntityTransaction=r,q1}var K1={},qF;function C1e(){if(qF)return K1;qF=1,Object.defineProperty(K1,"__esModule",{value:!0}),K1.EntityOutput=void 0;const t=Fn(),e=Es();let n=class Zj extends e.EntityBase{constructor(i){const s=new Date;super(i||{outputId:0,created_at:s,updated_at:s,userId:0,transactionId:0,spendable:!1,change:!1,satoshis:0,outputDescription:"",vout:0,type:"",providedBy:"you",purpose:"",txid:void 0,basketId:void 0,spentBy:void 0,derivationPrefix:void 0,derivationSuffix:void 0,senderIdentityKey:void 0,customInstructions:void 0,spendingDescription:void 0,scriptLength:void 0,scriptOffset:void 0,lockingScript:void 0})}updateApi(){}get outputId(){return this.api.outputId}set outputId(i){this.api.outputId=i}get created_at(){return this.api.created_at}set created_at(i){this.api.created_at=i}get updated_at(){return this.api.updated_at}set updated_at(i){this.api.updated_at=i}get userId(){return this.api.userId}set userId(i){this.api.userId=i}get transactionId(){return this.api.transactionId}set transactionId(i){this.api.transactionId=i}get basketId(){return this.api.basketId}set basketId(i){this.api.basketId=i}get spentBy(){return this.api.spentBy}set spentBy(i){this.api.spentBy=i}get vout(){return this.api.vout}set vout(i){this.api.vout=i}get satoshis(){return this.api.satoshis}set satoshis(i){this.api.satoshis=i}get outputDescription(){return this.api.outputDescription}set outputDescription(i){this.api.outputDescription=i}get spendable(){return this.api.spendable}set spendable(i){this.api.spendable=i}get change(){return this.api.change}set change(i){this.api.change=i}get txid(){return this.api.txid}set txid(i){this.api.txid=i}get type(){return this.api.type}set type(i){this.api.type=i}get providedBy(){return this.api.providedBy}set providedBy(i){this.api.providedBy=i}get purpose(){return this.api.purpose}set purpose(i){this.api.purpose=i}get spendingDescription(){return this.api.spendingDescription}set spendingDescription(i){this.api.spendingDescription=i}get derivationPrefix(){return this.api.derivationPrefix}set derivationPrefix(i){this.api.derivationPrefix=i}get derivationSuffix(){return this.api.derivationSuffix}set derivationSuffix(i){this.api.derivationSuffix=i}get senderIdentityKey(){return this.api.senderIdentityKey}set senderIdentityKey(i){this.api.senderIdentityKey=i}get customInstructions(){return this.api.customInstructions}set customInstructions(i){this.api.customInstructions=i}get lockingScript(){return this.api.lockingScript}set lockingScript(i){this.api.lockingScript=i}get scriptLength(){return this.api.scriptLength}set scriptLength(i){this.api.scriptLength=i}get scriptOffset(){return this.api.scriptOffset}set scriptOffset(i){this.api.scriptOffset=i}get id(){return this.api.outputId}set id(i){this.api.outputId=i}get entityName(){return"output"}get entityTable(){return"outputs"}equals(i,s){return!(this.transactionId!==(s?s.transaction.idMap[i.transactionId]:i.transactionId)||this.basketId!==(s&&i.basketId?s.outputBasket.idMap[i.basketId]:i.basketId)||this.spentBy!==(s&&i.spentBy?s.transaction.idMap[i.spentBy]:i.spentBy)||this.vout!==i.vout||this.satoshis!==i.satoshis||this.spendable!==i.spendable||this.change!==i.change||this.txid!==i.txid||this.type!==i.type||this.providedBy!==i.providedBy||this.purpose!==i.purpose||this.outputDescription!==i.outputDescription||this.spendingDescription!==i.spendingDescription||this.derivationPrefix!==i.derivationPrefix||this.derivationSuffix!==i.derivationSuffix||this.senderIdentityKey!==i.senderIdentityKey||this.customInstructions!==i.customInstructions||!(0,t.optionalArraysEqual)(this.lockingScript,i.lockingScript)||this.scriptLength!==i.scriptLength||this.scriptOffset!==i.scriptOffset)}static async mergeFind(i,s,o,a,c){const l=a.transaction.idMap[o.transactionId];o.basketId&&a.outputBasket.idMap[o.basketId];const u=(0,t.verifyOneOrNone)(await i.findOutputs({partial:{userId:s,transactionId:l,vout:o.vout},trx:c}));return{found:!!u,eo:new Zj(u||{...o}),eiId:(0,t.verifyId)(o.outputId)}}async mergeNew(i,s,o,a){this.userId=s,this.basketId=this.basketId?o.outputBasket.idMap[this.basketId]:void 0,this.transactionId=o.transaction.idMap[this.transactionId],this.spentBy=this.spentBy?o.transaction.idMap[this.spentBy]:void 0,this.outputId=0,this.outputId=await i.insertOutput(this.toApi(),a)}async mergeExisting(i,s,o,a,c){let l=!1;return o.updated_at>this.updated_at&&(this.spentBy=o.spentBy?a.transaction.idMap[o.spentBy]:void 0,this.spendable=o.spendable,this.change=o.change,this.type=o.type,this.providedBy=o.providedBy,this.purpose=o.purpose,this.outputDescription=o.outputDescription,this.spendingDescription=o.spendingDescription,this.senderIdentityKey=o.senderIdentityKey,this.customInstructions=o.customInstructions,this.scriptLength=o.scriptLength,this.scriptOffset=o.scriptOffset,this.lockingScript=o.lockingScript,this.updated_at=new Date(Math.max(o.updated_at.getTime(),this.updated_at.getTime())),await i.updateOutput(this.id,this.toApi(),c),l=!0),l}};return K1.EntityOutput=n,K1}var KF;function Es(){return KF||(KF=1,function(t){var e=Vp&&Vp.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,a)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=Vp&&Vp.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(h1e(),t),n(p1e(),t),n(m1e(),t),n(g1e(),t),n(y1e(),t),n(v1e(),t),n(b1e(),t),n(x1e(),t),n(w1e(),t),n(_1e(),t),n(S1e(),t),n(E1e(),t),n(T1e(),t),n(I1e(),t),n(P1e(),t),n(C1e(),t)}(Vp)),Vp}var GF;function M1e(){if(GF)return lc;GF=1;var t=lc&&lc.__createBinding||(Object.create?function(c,l,u,d){d===void 0&&(d=u);var h=Object.getOwnPropertyDescriptor(l,u);(!h||("get"in h?!l.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(c,d,h)}:function(c,l,u,d){d===void 0&&(d=u),c[d]=l[u]}),e=lc&&lc.__setModuleDefault||(Object.create?function(c,l){Object.defineProperty(c,"default",{enumerable:!0,value:l})}:function(c,l){c.default=l}),n=lc&&lc.__importStar||function(){var c=function(l){return c=Object.getOwnPropertyNames||function(u){var d=[];for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(d[d.length]=h);return d},c(l)};return function(l){if(l&&l.__esModule)return l;var u={};if(l!=null)for(var d=c(l),h=0;h<d.length;h++)d[h]!=="default"&&t(u,l,d[h]);return e(u,l),u}}();Object.defineProperty(lc,"__esModule",{value:!0}),lc.WalletStorageManager=void 0;const r=Es(),i=n(oh()),s=PP();class o{constructor(l){this.storage=l,this.isStorageProvider=l.isStorageProvider(),this.isAvailable=!1}}let a=class{constructor(l,u,d){this._stores=[],this._isAvailable=!1,this._readerCount=0,this._writerCount=0,this._isSingleWriter=!0,this._syncLocked=!1,this._storageProviderLocked=!1;const h=[...d||[]];u&&h.unshift(u),this._stores=h.map(f=>new o(f)),this._authId={identityKey:l}}isStorageProvider(){return!1}isAvailable(){return this._isAvailable}get isActiveEnabled(){return this._active!==void 0&&this._active.settings.storageIdentityKey===this._active.user.activeStorage&&this._conflictingActives!==void 0&&this._conflictingActives.length===0}canMakeAvailable(){return this._stores.length>0}async makeAvailable(){var l;if(this._isAvailable)return this._active.settings;if(this._active=void 0,this._backups=[],this._conflictingActives=[],this._stores.length<1)throw new i.WERR_INVALID_PARAMETER("active","valid. Must add active storage provider to wallet.");const u=[];for(const h of this._stores){if(!h.isAvailable||!h.settings||!h.user){h.settings=await h.storage.makeAvailable();const f=await h.storage.findOrInsertUser(this._authId.identityKey);h.user=f.user,h.isAvailable=!0}if(!this._active)this._active=h;else{const f=h.user.activeStorage,p=h.settings.storageIdentityKey;f===p&&!this.isActiveEnabled?(u.push(this._active),this._active=h):u.push(h)}}const d=(l=this._active.settings)===null||l===void 0?void 0:l.storageIdentityKey;for(const h of u)h.user.activeStorage!==d?this._conflictingActives.push(h):this._backups.push(h);return this._isAvailable=!0,this._authId.userId=this._active.user.userId,this._authId.isActive=this.isActiveEnabled,this._active.settings}verifyActive(){if(!this._active||!this._isAvailable)throw new i.WERR_INVALID_OPERATION("An active WalletStorageProvider must be added to this WalletStorageManager and makeAvailable must be called.");return this._active}async getAuth(l){if(this.isAvailable()||await this.makeAvailable(),l&&!this._authId.isActive)throw new i.WERR_NOT_ACTIVE;return this._authId}async getUserId(){return(await this.getAuth()).userId}getActive(){return this.verifyActive().storage}getActiveSettings(){return this.verifyActive().settings}getActiveUser(){return this.verifyActive().user}getActiveStore(){return this.verifyActive().settings.storageIdentityKey}getActiveStoreName(){return this.verifyActive().settings.storageName}getBackupStores(){return this.verifyActive(),this._backups.map(l=>l.settings.storageIdentityKey)}getConflictingStores(){return this.verifyActive(),this._conflictingActives.map(l=>l.settings.storageIdentityKey)}getAllStores(){return this.verifyActive(),this._stores.map(l=>l.settings.storageIdentityKey)}async getActiveForWriter(){for(this.isAvailable()||await this.makeAvailable();this._storageProviderLocked||this._syncLocked||this._isSingleWriter&&this._writerCount>0||this._readerCount>0;)await(0,s.wait)(100);return this._writerCount++,this.getActive()}async getActiveForReader(){for(this.isAvailable()||await this.makeAvailable();this._storageProviderLocked||this._syncLocked||this._isSingleWriter&&this._writerCount>0;)await(0,s.wait)(100);return this._readerCount++,this.getActive()}async getActiveForSync(){for(this.isAvailable()||await this.makeAvailable();this._syncLocked;)await(0,s.wait)(100);for(this._syncLocked=!0;this._storageProviderLocked||this._readerCount>0||this._writerCount>0;)await(0,s.wait)(100);return this.getActive()}async getActiveForStorageProvider(){for(this.isAvailable()||await this.makeAvailable();this._storageProviderLocked;)await(0,s.wait)(100);for(this._storageProviderLocked=!0;this._syncLocked||this._readerCount>0||this._writerCount>0;)await(0,s.wait)(100);if(!this.getActive().isStorageProvider())throw new i.WERR_INVALID_OPERATION('Active "WalletStorageProvider" does not support "StorageProvider" interface.');return this.getActive()}async runAsWriter(l){try{const u=await this.getActiveForWriter();return await l(u)}finally{this._writerCount--}}async runAsReader(l){try{const u=await this.getActiveForReader();return await l(u)}finally{this._readerCount--}}async runAsSync(l,u){try{const d=u||await this.getActiveForSync();return await l(d)}finally{u||(this._syncLocked=!1)}}async runAsStorageProvider(l){try{const u=await this.getActiveForStorageProvider();return await l(u)}finally{this._storageProviderLocked=!1}}isActiveStorageProvider(){return this.getActive().isStorageProvider()}async addWalletStorageProvider(l){await l.makeAvailable(),this._services&&l.setServices(this._services),this._stores.push(new o(l)),this._isAvailable=!1,await this.makeAvailable()}setServices(l){this._services=l;for(const u of this._stores)u.storage.setServices(l)}getServices(){if(!this._services)throw new i.WERR_INVALID_OPERATION("Must setServices first.");return this._services}getSettings(){return this.getActive().getSettings()}async migrate(l,u){return await this.runAsWriter(async d=>d.migrate(l,u))}async destroy(){if(!(this._stores.length<1))return await this.runAsWriter(async l=>{for(const u of this._stores)await u.storage.destroy()})}async findOrInsertUser(l){const u=await this.getAuth();if(l!=u.identityKey)throw new i.WERR_UNAUTHORIZED;return await this.runAsWriter(async d=>{const h=await d.findOrInsertUser(l);if(u.userId&&u.userId!==h.user.userId)throw new i.WERR_INTERNAL("userId may not change for given identityKey");return this._authId.userId=h.user.userId,h})}async abortAction(l){return i.validateAbortActionArgs(l),await this.runAsWriter(async u=>{const d=await this.getAuth(!0);return await u.abortAction(d,l)})}async createAction(l){return await this.runAsWriter(async u=>{const d=await this.getAuth(!0);return await u.createAction(d,l)})}async internalizeAction(l){return i.validateInternalizeActionArgs(l),await this.runAsWriter(async u=>{const d=await this.getAuth(!0);return await u.internalizeAction(d,l)})}async relinquishCertificate(l){return i.validateRelinquishCertificateArgs(l),await this.runAsWriter(async u=>{const d=await this.getAuth(!0);return await u.relinquishCertificate(d,l)})}async relinquishOutput(l){return i.validateRelinquishOutputArgs(l),await this.runAsWriter(async u=>{const d=await this.getAuth(!0);return await u.relinquishOutput(d,l)})}async processAction(l){return await this.runAsWriter(async u=>{const d=await this.getAuth(!0);return await u.processAction(d,l)})}async insertCertificate(l){return await this.runAsWriter(async u=>{const d=await this.getAuth(!0);return await u.insertCertificateAuth(d,l)})}async listActions(l){const u=await this.getAuth();return await this.runAsReader(async d=>await d.listActions(u,l))}async listCertificates(l){const u=await this.getAuth();return await this.runAsReader(async d=>await d.listCertificates(u,l))}async listOutputs(l){const u=await this.getAuth();return await this.runAsReader(async d=>await d.listOutputs(u,l))}async findCertificates(l){const u=await this.getAuth();return await this.runAsReader(async d=>await d.findCertificatesAuth(u,l))}async findOutputBaskets(l){const u=await this.getAuth();return await this.runAsReader(async d=>await d.findOutputBasketsAuth(u,l))}async findOutputs(l){const u=await this.getAuth();return await this.runAsReader(async d=>await d.findOutputsAuth(u,l))}async findProvenTxReqs(l){return await this.runAsReader(async u=>await u.findProvenTxReqs(l))}async syncFromReader(l,u,d,h=""){const f=await this.getAuth();if(l!==f.identityKey)throw new i.WERR_UNAUTHORIZED;const p=await u.makeAvailable();let g=0,m=0;return h=await this.runAsSync(async y=>{const b=y,x=this.getSettings();h+=`syncFromReader from ${p.storageName} to ${x.storageName}
`;let S=-1;for(;;){S++;const _=(await r.EntitySyncState.fromStorage(b,l,p)).makeRequestSyncChunkArgs(l,x.storageIdentityKey),I=await u.getSyncChunk(_);I.user&&(I.user.activeStorage=this._active.user.activeStorage);const C=await b.processSyncChunk(_,I);if(g+=C.inserts,m+=C.updates,h+=`chunk ${S} inserted ${C.inserts} updated ${C.updates} ${C.maxUpdated_at}
`,C.done)break}return h+=`syncFromReader complete: ${g} inserts, ${m} updates
`,h},d),{inserts:g,updates:m,log:h}}async syncToWriter(l,u,d,h=""){const f=l.identityKey,p=await u.makeAvailable();let g=0,m=0;return h=await this.runAsSync(async y=>{const b=y,x=b.getSettings();h+=`syncToWriter from ${x.storageName} to ${p.storageName}
`;let S=-1;for(;;){S++;const _=(await r.EntitySyncState.fromStorage(u,f,x)).makeRequestSyncChunkArgs(f,p.storageIdentityKey),I=await b.getSyncChunk(_);h+=r.EntitySyncState.syncChunkSummary(I);const C=await u.processSyncChunk(_,I);if(g+=C.inserts,m+=C.updates,h+=`chunk ${S} inserted ${C.inserts} updated ${C.updates} ${C.maxUpdated_at}
`,C.done)break}return h+=`syncToWriter complete: ${g} inserts, ${m} updates
`,h},d),{inserts:g,updates:m,log:h}}async updateBackups(l){const u=await this.getAuth(!0);return await this.runAsSync(async d=>{let h=`BACKUP CURRENT ACTIVE TO ${this._backups.length} STORES
`;for(const f of this._backups){const p=await this.syncToWriter(u,f.storage,d);h+=p.log}return h},l)}async setActive(l){this.isAvailable()||await this.makeAvailable();const u=this._stores.findIndex(p=>p.settings.storageIdentityKey===l);if(u<0)throw new i.WERR_INVALID_PARAMETER("storageIdentityKey",`registered with this "WalletStorageManager". ${l} does not match any managed store.`);const d=(await this.getAuth()).identityKey,h=this._stores[u];let f=`setActive to ${h.settings.storageName}`;return l===this.getActiveStore()&&this.isActiveEnabled?f+` unchanged
`:(f+=`
`,f+=await this.runAsSync(async p=>{let g="";if(this._conflictingActives.length>0){this._conflictingActives.push(this._active),this._conflictingActives=this._conflictingActives.filter(y=>!(y.settings.storageIdentityKey===l));for(const y of this._conflictingActives){g+=`MERGING STATE FROM CONFLICTING ACTIVES:
`;const b=await this.syncToWriter({identityKey:d,userId:h.user.userId,isActive:!1},h.storage,y.storage);g+=b.log}g+=`PROPAGATE MERGED ACTIVE STATE TO NON-ACTIVES
`}else g+=`BACKUP CURRENT ACTIVE STATE THEN SET NEW ACTIVE
`;const m=this._conflictingActives.length>0?h:this._active;await m.storage.setActive({identityKey:d,userId:m.user.userId},l);for(const y of this._stores)if(y.user.activeStorage=l,y.settings.storageIdentityKey!==m.settings.storageIdentityKey){const b=await this.syncToWriter({identityKey:d,userId:y.user.userId,isActive:!1},y.storage,m.storage);g+=b.log}return this._isAvailable=!1,await this.makeAvailable(),g}),f)}};return lc.WalletStorageManager=a,lc}var qg={},WE={},XF;function A1e(){if(XF)return WE;XF=1,Object.defineProperty(WE,"__esModule",{value:!0}),WE.getBeefForTransaction=n;const t=sr(),e=Fn();async function n(s,o,a){const c=Array.isArray(a.mergeToBeef)?t.Beef.fromBinary(a.mergeToBeef):a.mergeToBeef||new t.Beef;return await i(c,s,o,a,0),c}async function r(s,o,a){var c;s.getServices();const l=await e.EntityProvenTx.fromTxid(o,await s.getServices());return l.proven&&!a.ignoreStorage&&!a.ignoreNewProven&&(l.proven.provenTxId=await s.insertProvenTx(l.proven.toApi())),{proven:(c=l.proven)===null||c===void 0?void 0:c.toApi(),rawTx:l.rawTx}}async function i(s,o,a,c,l){const u=o.maxRecursionDepth;if(u&&u<=l)throw new e.sdk.WERR_INVALID_OPERATION(`Maximum BEEF depth exceeded. Limit is ${o.maxRecursionDepth}`);if(c.knownTxids&&c.knownTxids.indexOf(a)>-1)return s.mergeTxidOnly(a),s;if(!c.ignoreStorage){const f=await o.getValidBeefForTxid(a,s,c.trustSelf,c.knownTxids);if(f)return f}if(c.ignoreServices)throw new e.sdk.WERR_INVALID_PARAMETER(`txid ${a}`,`valid transaction on chain ${o.chain}`);const d=await r(o,a,c);if(d.proven&&c.minProofLevel&&c.minProofLevel>l&&(d.proven=void 0),d.proven)return s.mergeRawTx(d.proven.rawTx),s.mergeBump(new e.EntityProvenTx(d.proven).getMerklePath()),s;if(!d.rawTx)throw new e.sdk.WERR_INVALID_PARAMETER(`txid ${a}`,`valid transaction on chain ${o.chain}`);s.mergeRawTx(d.rawTx);const h=(0,e.asBsvSdkTx)(d.rawTx);for(const f of h.inputs){const p=(0,e.verifyTruthy)(f.sourceTXID);s.findTxid(p)||await i(s,o,p,c,l+1)}return s}return WE}var jE={},YF;function R1e(){if(YF)return jE;YF=1,Object.defineProperty(jE,"__esModule",{value:!0}),jE.processAction=n;const t=sr(),e=Fn();async function n(a,c,l){(0,e.stampLog)(l.log,"start storage processActionSdk");const u=(0,e.verifyId)(c.userId),d={sendWithResults:void 0};let h;const f=[...l.sendWith];if(l.isNewTx){const m=await i(a,u,l);if({req:h,log:l.log}=await s(a,u,m),!h)throw new e.sdk.WERR_INTERNAL;l.isNoSend&&!l.isSendWith?(0,e.stampLog)(l.log,"... storage processActionSdk newTx committed noSend"):(f.push(h.txid),(0,e.stampLog)(l.log,`... storage processActionSdk newTx committed sendWith ${h.txid}`))}const{swr:p,ndr:g}=await r(a,u,f,l.isDelayed);return d.sendWithResults=p,d.notDelayedResults=g,(0,e.stampLog)(l.log,"end storage processActionSdk"),d}async function r(a,c,l,u){let d=[],h;if(l.length<1)return{swr:d,ndr:h};const f=await a.getReqsAndBeefToShareWithWorld(l,[]),p=[],g=[];for(const P of f.details){let _="failed";P.status==="alreadySent"?_="unproven":P.status==="readyToSend"&&(_="sending",g.push(new e.EntityProvenTxReq(P.req))),p.push({txid:P.txid,getReq:P,status:_})}const m=g.map(P=>P.id),y=g.map(P=>P.notify.transactionIds||[]).flat();if(g.length>0&&!await f.beef.verify(await a.getServices().getChainTracker()))throw new e.sdk.WERR_INTERNAL("merged Beef failed validation.");const b=l.length>1?(0,e.randomBytesBase64)(16):void 0;if(u)return m.length>0&&await a.transaction(async P=>{await a.updateProvenTxReq(m,{status:"unsent",batch:b},P),await a.updateTransaction(y,{status:"sending"},P)}),S();if(m.length<1)return S();if(b){for(const P of g)P.batch=b;await a.updateProvenTxReq(m,{batch:b})}const x=await a.attemptToPostReqsToNetwork(g);for(const P of p){const _=P.txid,I=x.details.find(C=>C.txid===_);if(!I)throw new e.sdk.WERR_INTERNAL(`missing details for ${_}`);switch(P.ndr={txid:I.txid,status:"success",competingTxs:I.competingTxs},I.status){case"success":P.status="unproven";break;case"doubleSpend":P.status="failed",P.ndr.status="doubleSpend",I.competingTxs&&(P.ndr.competingBeef=await o(I.competingTxs,a));break;case"serviceError":P.status="sending",P.ndr.status="serviceError";break;case"invalidTx":P.status="failed",P.ndr.status="invalidTx";break;case"unknown":case"invalid":default:throw new e.sdk.WERR_INTERNAL(`processAction with notDelayed status ${I.status} should not occur.`)}}return S();function S(){d=[],h=u?void 0:[];for(const P of p)d.push({txid:P.txid,status:P.status}),P.ndr&&h&&h.push(P.ndr);return{swr:d,ndr:h}}}async function i(a,c,l){if(!l.reference||!l.txid||!l.rawTx)throw new e.sdk.WERR_INVALID_OPERATION("One or more expected params are undefined.");let u;try{u=t.Transaction.fromBinary(l.rawTx)}catch{throw new e.sdk.WERR_INVALID_OPERATION("Parsing serialized transaction failed.")}if(l.txid!==u.id("hex"))throw new e.sdk.WERR_INVALID_OPERATION("Hash of serialized transaction doesn't match expected txid");if(!(await a.getServices()).nLockTimeIsFinal(u))throw new e.sdk.WERR_INVALID_OPERATION(`This transaction is not final.
         Ensure that the transaction meets the rules for being a finalized
         which can be found at https://wiki.bitcoinsv.io/index.php/NLocktime_and_nSequence`);const d=(0,e.parseTxScriptOffsets)(l.rawTx),h=(0,e.verifyOne)(await a.findTransactions({partial:{userId:c,reference:l.reference}}));if(!h.isOutgoing)throw new e.sdk.WERR_INVALID_OPERATION("isOutgoing is not true");if(!h.inputBEEF)throw new e.sdk.WERR_INVALID_OPERATION;const f=t.Beef.fromBinary((0,e.asArray)(h.inputBEEF));if(h.status!=="unsigned"&&h.status!=="unprocessed")throw new e.sdk.WERR_INVALID_OPERATION(`invalid transaction status ${h.status}`);const p=(0,e.verifyId)(h.transactionId),g=await a.findOutputs({partial:{userId:c,transactionId:p}}),m=await a.findOutputs({partial:{userId:c,spentBy:p}}),y=(0,e.verifyOneOrNone)(await a.findCommissions({partial:{transactionId:p,userId:c}}));if(a.commissionSatoshis>0){if(!y)throw new e.sdk.WERR_INTERNAL;if(!u.outputs.some(I=>I.satoshis===y.satoshis&&I.lockingScript.toHex()===(0,e.asString)(y.lockingScript)))throw new e.sdk.WERR_INVALID_OPERATION("Transaction did not include an output to cover service fee.")}const b=e.EntityProvenTxReq.fromTxid(l.txid,l.rawTx,h.inputBEEF);b.addNotifyTransactionId(p);let x,S;if(l.isNoSend&&!l.isSendWith)S={req:"nosend",tx:"nosend"};else if(!l.isNoSend&&l.isDelayed)S={req:"unsent",tx:"unprocessed"};else if(!l.isNoSend&&!l.isDelayed)S={req:"unprocessed",tx:"unprocessed"},x={req:"unmined",tx:"unproven"};else throw new e.sdk.WERR_INTERNAL("logic error");b.status=S.req;const P={reference:l.reference,txid:l.txid,rawTx:l.rawTx,isSendWith:!!l.sendWith&&l.sendWith.length>0,isDelayed:l.isDelayed,isNoSend:l.isNoSend,tx:u,txScriptOffsets:d,transactionId:p,transaction:h,inputOutputs:m,outputOutputs:g,commission:y,beef:f,req:b,outputUpdates:[],transactionUpdate:{txid:l.txid,rawTx:void 0,inputBEEF:void 0,status:S.tx},postStatus:x};for(const _ of P.outputOutputs){const I=(0,e.verifyInteger)(_.vout),C=P.txScriptOffsets.outputs[I],A=(0,e.asString)(P.rawTx.slice(C.offset,C.offset+C.length));if(_.lockingScript&&A!==(0,e.asString)(_.lockingScript))throw new e.sdk.WERR_INVALID_OPERATION(`rawTx output locking script for vout ${I} not equal to expected output script.`);if(u.outputs[I].lockingScript.toHex()!==A)throw new e.sdk.WERR_INVALID_OPERATION(`parsed transaction output locking script for vout ${I} not equal to expected output script.`);const M={txid:P.txid,spendable:_.basketId!==void 0,scriptLength:C.length,scriptOffset:C.offset};C.length>(await a.getSettings()).maxOutputScript&&(M.lockingScript=void 0),P.outputUpdates.push({id:_.outputId,update:M})}return P}async function s(a,c,l){let u=l.log;u=(0,e.stampLog)(u,"start storage commitNewTxToStorage");let d;await a.transaction(async f=>{u=(0,e.stampLog)(u,"... storage commitNewTxToStorage storage transaction start"),d=await l.req.insertOrMerge(a,f),u=(0,e.stampLog)(u,"... storage commitNewTxToStorage req inserted");for(const p of l.outputUpdates)await a.updateOutput(p.id,p.update,f);u=(0,e.stampLog)(u,"... storage commitNewTxToStorage outputs updated"),await a.updateTransaction(l.transactionId,l.transactionUpdate,f),u=(0,e.stampLog)(u,"... storage commitNewTxToStorage storage transaction end")}),u=(0,e.stampLog)(u,"... storage commitNewTxToStorage storage transaction await done");const h={req:(0,e.verifyTruthy)(d),log:u};return u=(0,e.stampLog)(u,"end storage commitNewTxToStorage"),h}async function o(a,c){const l=new t.Beef,u={mergeToBeef:l,ignoreNewProven:!0};for(const d of a)await c.getBeefForTransaction(d,u);return l.toBinary()}return jE}var Hc={},ZF;function k1e(){if(ZF)return Hc;ZF=1;var t=Hc&&Hc.__createBinding||(Object.create?function(h,f,p,g){g===void 0&&(g=p);var m=Object.getOwnPropertyDescriptor(f,p);(!m||("get"in m?!f.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return f[p]}}),Object.defineProperty(h,g,m)}:function(h,f,p,g){g===void 0&&(g=p),h[g]=f[p]}),e=Hc&&Hc.__setModuleDefault||(Object.create?function(h,f){Object.defineProperty(h,"default",{enumerable:!0,value:f})}:function(h,f){h.default=f}),n=Hc&&Hc.__importStar||function(){var h=function(f){return h=Object.getOwnPropertyNames||function(p){var g=[];for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&(g[g.length]=m);return g},h(f)};return function(f){if(f&&f.__esModule)return f;var p={};if(f!=null)for(var g=h(f),m=0;m<g.length;m++)g[m]!=="default"&&t(p,f,g[m]);return e(p,f),p}}();Object.defineProperty(Hc,"__esModule",{value:!0}),Hc.attemptToPostReqsToNetwork=o;const r=sr(),i=n(oh()),s=PP();async function o(h,f,p){const{r:g,vreqs:m,txids:y}=await a(h,f,p),b=h.getServices(),x=await b.postBeef(g.beef,y);await c(y,m,x,h,p);const S=l(y,m,x);return await u(y,g,S,h,b,p),g}async function a(h,f,p){const g={status:"success",beef:new r.Beef,details:[],log:""},m=[];for(const y of f)try{const b=!y.rawTx,x=!y.notify.transactionIds||y.notify.transactionIds.length<1,S=!y.inputBEEF;if(b||x||S)y.addHistoryNote({when:new Date().toISOString(),what:"validateReqFailed",noRawTx:b,noTxIds:x,noInputBEEF:S}),y.status="invalid",await y.updateStorageDynamicProperties(h,p),g.details.push({txid:y.txid,req:y,status:"invalid"});else{const P={txid:y.txid,req:y,status:"unknown"};await h.mergeReqToBeefToShareExternally(y.api,g.beef,[],p),m.push(P),g.details.push(P)}}catch(b){const{code:x,message:S}=i.WalletError.fromUnknown(b);y.addHistoryNote({when:new Date().toISOString(),what:"validateReqError",txid:y.txid,code:x,message:S}),y.attempts++,y.attempts>6&&(y.status="invalid",g.details.push({txid:y.txid,req:y,status:"invalid"})),await y.updateStorageDynamicProperties(h,p)}return{r:g,vreqs:m,txids:m.map(y=>y.txid)}}async function c(h,f,p,g,m){for(const y of h){const b=f.find(S=>S.txid===y);if(!b)throw new i.WERR_INTERNAL;const x=[];for(const S of p){x.push(...S.notes||[]);const P=S.txidResults.find(_=>_.txid===y);P&&x.push(...P.notes||[])}for(const S of x)b.req.addHistoryNote(S);await b.req.updateStorageDynamicProperties(g,m)}}function l(h,f,p){const g={};for(const m of h){const y=f.find(x=>x.txid===m),b={txid:m,vreq:y,txidResults:[],status:"success",successCount:0,doubleSpendCount:0,statusErrorCount:0,serviceErrorCount:0,competingTxs:[]};g[m]=b;for(const x of p){const S=x.txidResults.find(P=>P.txid===m);S&&(b.txidResults.push(S),S.status==="success"?b.successCount++:S.doubleSpend?(b.doubleSpendCount++,S.competingTxs&&(b.competingTxs=[...S.competingTxs])):S.serviceError?b.serviceErrorCount++:b.statusErrorCount++),b.competingTxs.length>1&&(b.competingTxs=[...new Set(b.competingTxs)])}b.successCount>0&&b.doubleSpendCount===0?b.status="success":b.doubleSpendCount>0?b.status="doubleSpend":b.statusErrorCount>0?b.status="invalidTx":b.status="serviceError"}return g}async function u(h,f,p,g,m,y){for(const b of h){const x=p[b],S=x.vreq.req;await S.refreshFromStorage(g,y);const{successCount:P,doubleSpendCount:_,statusErrorCount:I,serviceErrorCount:C}=x,A={when:new Date().toISOString(),what:"aggregateResults",reqStatus:S.status,aggStatus:x.status,attempts:S.attempts,successCount:P,doubleSpendCount:_,statusErrorCount:I,serviceErrorCount:C};if(["completed","unmined"].indexOf(S.status)>=0)continue;x.status==="doubleSpend"&&m&&!y&&await d(x,f.beef,g,m);let M,k;switch(x.status){case"success":M="unmined",k="unproven";break;case"doubleSpend":M="doubleSpend",k="failed";break;case"invalidTx":M="invalid",k="failed";break;case"serviceError":M="sending",k="sending",S.attempts++;break;default:throw new i.WERR_INTERNAL(`unimplemented AggregateStatus ${x.status}`)}if(A.newReqStatus=M,A.newTxStatus=k,A.newAttempts=S.attempts,M&&(S.status=M),S.addHistoryNote(A),await S.updateStorageDynamicProperties(g,y),k){const B=S.notify.transactionIds;B&&await g.updateTransactionsStatus(B,k,y)}const O=f.details.find(B=>B.txid===b);O.status=x.status,O.competingTxs=x.competingTxs}}async function d(h,f,p,g){var m,y;const b=h.vreq.req,x={when:new Date().toISOString(),what:"confirmDoubleSpend"};let S=!1;for(let P=0;P<3;P++){const _=await g.getStatusForTxids([b.txid]);if(x[`getStatus${P}`]=`${_.status}${_.error?`${_.error.code}`:""},${(m=_.results[0])===null||m===void 0?void 0:m.status}`,_.status==="success"&&_.results[0].status!=="unknown"){S=!0;break}else await(0,s.wait)(1e3)}if(S)h.status="success",x.newStatus=h.status;else{const P=r.Transaction.fromBinary(b.rawTx),_=new Set(h.competingTxs);for(const I of P.inputs){const C=(y=f.findTxid(I.sourceTXID))===null||y===void 0?void 0:y.tx;if(!C)throw new i.WERR_INTERNAL(`beef lacks tx for ${I.sourceTXID}`);const A=C.outputs[I.sourceOutputIndex].lockingScript.toHex(),M=g.hashOutputScript(A),k=await g.getScriptHashHistory(M);if(k.status==="success")for(const O of k.history)O.txid!==I.sourceTXID&&O.txid!==h.txid&&_.add(O.txid)}h.competingTxs=[..._].slice(-24),x.competingTxs=h.competingTxs.join(",")}b.addHistoryNote(x)}return Hc}var qE={},JF;function O1e(){if(JF)return qE;JF=1,Object.defineProperty(qE,"__esModule",{value:!0}),qE.listCertificates=t;async function t(e,n,r,i){const s={limit:r.limit,offset:r.offset},o={userId:n.userId,isDeleted:!1};if(r.partial){const c=r.partial;c.type&&(o.type=c.type),c.subject&&(o.subject=c.subject),c.serialNumber&&(o.serialNumber=c.serialNumber),c.certifier&&(o.certifier=c.certifier),c.revocationOutpoint&&(o.revocationOutpoint=c.revocationOutpoint),c.signature&&(o.signature=c.signature)}return await e.transaction(async c=>{const l={partial:o,certifiers:r.certifiers,types:r.types,paged:s,trx:c},u=await e.findCertificates(l),h={totalCertificates:0,certificates:(await Promise.all(u.map(async f=>{const p=await e.findCertificateFields({partial:{certificateId:f.certificateId,userId:n.userId},trx:c});return{...f,fields:Object.fromEntries(p.map(g=>[g.fieldName,g.fieldValue])),masterKeyring:Object.fromEntries(p.map(g=>[g.fieldName,g.masterKey]))}}))).map(f=>({type:f.type,subject:f.subject,serialNumber:f.serialNumber,certifier:f.certifier,revocationOutpoint:f.revocationOutpoint,signature:f.signature,fields:f.fields,verifier:f.verifier,keyring:f.masterKeyring}))};return h.certificates.length<s.limit?h.totalCertificates=h.certificates.length:h.totalCertificates=await e.countCertificates(l),h})}return qE}var Vf={},uA={},QF;function Jj(){return QF||(QF=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.maxPossibleSatoshis=void 0,t.generateChangeSdk=n,t.validateGenerateChangeSdkResult=r,t.validateGenerateChangeSdkParams=s,t.generateChangeSdkMakeStorage=o,t.varUintSize=a,t.transactionInputSize=c,t.transactionOutputSize=l,t.transactionSize=u;const e=Fn();t.maxPossibleSatoshis=0x775f05a073fff;async function n(d,h,f){d.noLogging===!1&&i(d);const p={allocatedChangeInputs:[],changeOutputs:[],size:0,fee:0,satsPerKb:0};try{const g=s(d),m=d.feeModel.value||0,y=[...d.randomVals||[]],b=[],x=()=>{let Z=0;return!y||y.length===0?Z=Math.random():(Z=y.shift()||0,y.push(Z)),b.push(Z),Z},S=(Z,ie)=>{if(ie<Z)throw new e.sdk.WERR_INVALID_PARAMETER("max",`less than min (${Z}). max is (${ie})`);return Math.floor(x()*(ie-Z+1)+Z)},P=d.fixedInputs,_=d.fixedOutputs,I=()=>P.reduce((Z,ie)=>Z+ie.satoshis,0)+p.allocatedChangeInputs.reduce((Z,ie)=>Z+ie.satoshis,0),C=()=>_.reduce((Z,ie)=>Z+ie.satoshis,0),A=()=>p.changeOutputs.reduce((Z,ie)=>Z+ie.satoshis,0),M=()=>I()-C()-A(),k=(Z,ie)=>{const pe=[...P.map(ae=>ae.unlockingScriptLength),...Array(p.allocatedChangeInputs.length+(Z||0)).fill(d.changeUnlockingScriptLength)],ue=[..._.map(ae=>ae.lockingScriptLength),...Array(p.changeOutputs.length+(ie||0)).fill(d.changeLockingScriptLength)];return u(pe,ue)},O=(Z,ie)=>Math.ceil(k(Z,ie)/1e3*m),B=(Z,ie)=>{const pe=I()-C()-A()-O(Z,ie);return!Z&&!ie&&($=pe),pe};let $=0;B();const U=d.targetNetCount!==void 0,q=d.targetNetCount||0,K=()=>p.changeOutputs.length-p.allocatedChangeInputs.length,V=()=>U?K()-1<q:!1,G=async()=>{for(;p.allocatedChangeInputs.length>0;){const Z=p.allocatedChangeInputs.pop();Z&&await f(Z.outputId)}$=B()};for(;U&&q>K()||p.changeOutputs.length===0&&B()>0;)p.changeOutputs.push({satoshis:p.changeOutputs.length===0?d.changeFirstSatoshis:d.changeInitialSatoshis,lockingScriptLength:d.changeLockingScriptLength});if(await(async()=>{let Z=!1;const ie=async()=>{if(B()>0)return!0;let pe;!U&&p.changeOutputs.length===0&&(pe=-B(1));const ue=V()?1:0,le=-B(1,ue)+(ue===1?2*d.changeInitialSatoshis:0),ae=await h(le,pe);return ae?(p.allocatedChangeInputs.push(ae),!Z&&B()>0&&(ue==1||p.changeOutputs.length===0)&&p.changeOutputs.push({satoshis:Math.min(B(),p.changeOutputs.length===0?d.changeFirstSatoshis:d.changeInitialSatoshis),lockingScriptLength:d.changeLockingScriptLength}),!0):!1};for(;;){for(await G();B()<0&&await ie(););if(B()>=0||p.changeOutputs.length===0)break;for(Z=!0;p.changeOutputs.length>0&&B()<0;)p.changeOutputs.pop();if(B()<0)break}})(),B()<0&&g.hasMaxPossibleOutput!==void 0){if(_[g.hasMaxPossibleOutput].satoshis!==t.maxPossibleSatoshis)throw new e.sdk.WERR_INTERNAL;_[g.hasMaxPossibleOutput].satoshis+=B(),p.maxPossibleSatoshisAdjustment={fixedOutputIndex:g.hasMaxPossibleOutput,satoshis:_[g.hasMaxPossibleOutput].satoshis}}if(B()<0)throw new e.sdk.WERR_INSUFFICIENT_FUNDS(C()+O(),-$);if(p.changeOutputs.length===0&&$>0)throw new e.sdk.WERR_INSUFFICIENT_FUNDS(C()+O(),d.changeFirstSatoshis);for(;p.changeOutputs.length>0&&$>0;)if(p.changeOutputs.length===1)p.changeOutputs[0].satoshis+=$,$=0;else if(p.changeOutputs[0].satoshis<d.changeInitialSatoshis){const Z=Math.min($,d.changeInitialSatoshis-p.changeOutputs[0].satoshis);$-=Z,p.changeOutputs[0].satoshis+=Z}else{const Z=Math.max(1,Math.floor(S(2500,5e3)/1e4*$));$-=Z;const ie=S(0,p.changeOutputs.length-1);p.changeOutputs[ie].satoshis+=Z}p.size=k(),p.fee=M(),p.satsPerKb=m;const{ok:Q,log:se}=r(d,p);if(!Q)throw new e.sdk.WERR_INTERNAL(`generateChangeSdk error: ${se}`);return p.allocatedChangeInputs.length>4&&p.changeOutputs.length>4&&(console.log("generateChangeSdk_Capture_too_many_ins_and_outs"),i(d)),p}catch(g){throw e.sdk.WalletError.fromUnknown(g).code==="WERR_INSUFFICIENT_FUNDS",g}}function r(d,h){let f=!0,p="";const g=d.fixedInputs.reduce((x,S)=>x+S.satoshis,0)+h.allocatedChangeInputs.reduce((x,S)=>x+S.satoshis,0),m=d.fixedOutputs.reduce((x,S)=>x+S.satoshis,0)+h.changeOutputs.reduce((x,S)=>x+S.satoshis,0);h.fee&&Number.isInteger(h.fee)&&h.fee<0&&(p+=`basic fee error ${h.fee};`,f=!1);const y=g-m;y!==h.fee&&(p+=`exact fee error ${y} !== ${h.fee};`,f=!1);const b=Math.ceil((h.size||0)/1e3*(h.satsPerKb||0));return b!==h.fee&&(p+=`required fee error ${b} !== ${h.fee};`,f=!1),{ok:f,log:p}}function i(d,h){let f=JSON.stringify(d);console.log(`generateChangeSdk params length ${f.length}`);let p=-1;const g=99900;for(;p++,console.log(`generateChangeSdk params ${p} XXX${f.slice(0,g)}XXX`),f=f.slice(g),!(!f||p>100););}function s(d){if(!Array.isArray(d.fixedInputs))throw new e.sdk.WERR_INVALID_PARAMETER("fixedInputs","an array of objects");const h={};if(d.fixedInputs.forEach((f,p)=>{e.sdk.validateSatoshis(f.satoshis,`fixedInputs[${p}].satoshis`),e.sdk.validateInteger(f.unlockingScriptLength,`fixedInputs[${p}].unlockingScriptLength`,void 0,0)}),!Array.isArray(d.fixedOutputs))throw new e.sdk.WERR_INVALID_PARAMETER("fixedOutputs","an array of objects");if(d.fixedOutputs.forEach((f,p)=>{if(e.sdk.validateSatoshis(f.satoshis,`fixedOutputs[${p}].satoshis`),e.sdk.validateInteger(f.lockingScriptLength,`fixedOutputs[${p}].lockingScriptLength`,void 0,0),f.satoshis===t.maxPossibleSatoshis){if(h.hasMaxPossibleOutput!==void 0)throw new e.sdk.WERR_INVALID_PARAMETER(`fixedOutputs[${p}].satoshis`,"valid satoshis amount. Only one 'maxPossibleSatoshis' output allowed.");h.hasMaxPossibleOutput=p}}),d.feeModel=(0,e.validateStorageFeeModel)(d.feeModel),d.feeModel.model!=="sat/kb")throw new e.sdk.WERR_INVALID_PARAMETER("feeModel.model","'sat/kb'");return e.sdk.validateOptionalInteger(d.targetNetCount,"targetNetCount"),e.sdk.validateSatoshis(d.changeFirstSatoshis,"changeFirstSatoshis",1),e.sdk.validateSatoshis(d.changeInitialSatoshis,"changeInitialSatoshis",1),e.sdk.validateInteger(d.changeLockingScriptLength,"changeLockingScriptLength"),e.sdk.validateInteger(d.changeUnlockingScriptLength,"changeUnlockingScriptLength"),h}function o(d){const h=d.map(b=>({...b,spendable:!0}));h.sort((b,x)=>b.satoshis<x.satoshis?-1:b.satoshis>x.satoshis?1:b.outputId<x.outputId?-1:b.outputId>x.outputId?1:0);let f="";for(const b of h)f+=`change ${b.satoshis} ${b.outputId}
`;const p=()=>f,g=b=>(f+=` -> ${b.satoshis} sats, id ${b.outputId}
`,b.spendable=!1,b);return{allocateChangeInput:async(b,x)=>{if(f+=`allocate target ${b} exact ${x}`,x!==void 0){const _=h.find(I=>I.spendable&&I.satoshis===x);if(_)return g(_)}const S=h.find(_=>_.spendable&&_.satoshis>=b);if(S)return g(S);let P;for(let _=h.length-1;_>=0;_--)if(h[_].spendable){P=h[_];break}if(P)return g(P);f+=`
`},releaseChangeInput:async b=>{f+=`release id ${b}
`;const x=h.find(S=>S.outputId===b);if(!x)throw new e.sdk.WERR_INTERNAL(`unknown outputId ${b}`);if(x.spendable)throw new e.sdk.WERR_INTERNAL(`release of spendable outputId ${b}`);x.spendable=!0},getLog:p}}function a(d){if(d<0)throw new e.sdk.WERR_INVALID_PARAMETER("varUint","non-negative");return d<=252?1:d<=65535?3:d<=4294967295?5:9}function c(d){return 36+a(d)+d+4}function l(d){return a(d)+d+8}function u(d,h){return 4+a(d.length)+d.reduce((f,p)=>f+c(p),0)+a(h.length)+h.reduce((f,p)=>f+l(p),0)+4}}(uA)),uA}var e9;function N1e(){if(e9)return Vf;e9=1,Object.defineProperty(Vf,"__esModule",{value:!0}),Vf.setDisableDoubleSpendCheckForTest=i,Vf.createAction=s,Vf.offsetPubKey=y,Vf.lockScriptWithKeyOffsetFromPubKey=b,Vf.createStorageServiceChargeScript=x;const t=sr(),e=Fn(),n=Jj();let r=!0;function i(S){r=S}async function s(S,P,_,I){if(!_.isNewTx)throw new e.sdk.WERR_INTERNAL;const C=P.userId,{storageBeef:A,beef:M,xinputs:k}=await d(S,C,_),O=u(S,C,_),B="default",$=(0,e.verifyOne)(await S.findOutputBaskets({partial:{userId:C,name:B}}),`Invalid outputGeneration basket "${B}"`),U=await h(S,C,_,$),q=await S.countChangeInputs(C,$.basketId,!_.isDelayed),K=(0,e.validateStorageFeeModel)(S.feeModel),V=await l(S,C,_,A),G={xinputs:k,xoutputs:O,changeBasket:$,noSendChangeIn:U,availableChangeCount:q,feeModel:K,transactionId:V.transactionId},{allocatedChange:j,changeOutputs:Q,derivationPrefix:se,maxPossibleSatoshisAdjustment:Z}=await f(S,C,_,G);if(Z){const ye=Z;if(G.xoutputs[ye.fixedOutputIndex].satoshis!==n.maxPossibleSatoshis)throw new e.sdk.WERR_INTERNAL;G.xoutputs[ye.fixedOutputIndex].satoshis=ye.satoshis}const ie=Q.reduce((ye,Ae)=>ye+Ae.satoshis,0)-j.reduce((ye,Ae)=>ye+Ae.satoshis,0);await S.updateTransaction(V.transactionId,{satoshis:ie});const{outputs:pe,changeVouts:ue}=await c(S,C,_,G,Q),le=await g(S,C,_,j,M),ae=await a(S,C,_,G,j);return{reference:V.reference,version:V.version,lockTime:V.lockTime,inputs:ae,outputs:pe,derivationPrefix:se,inputBeef:le,noSendChangeOutputVouts:_.isNoSend?ue:void 0}}function o(S,P,_,I){const C=new Date;return{created_at:C,updated_at:C,outputId:0,userId:S,transactionId:P,satoshis:_,vout:I,basketId:void 0,change:!1,customInstructions:void 0,derivationPrefix:void 0,derivationSuffix:void 0,outputDescription:"",lockingScript:void 0,providedBy:"you",purpose:"",senderIdentityKey:void 0,spendable:!0,spendingDescription:void 0,spentBy:void 0,txid:void 0,type:""}}async function a(S,P,_,I,C){const A=[],M=[];for(const O of I.xinputs){const B=O.output;M.push({i:O,o:B}),B&&await S.updateOutput(B.outputId,{spendable:!1,spentBy:I.transactionId,spendingDescription:O.inputDescription})}for(const O of C)M.push({o:O,unlockLen:107});let k=-1;for(const{i:O,o:B,unlockLen:$}of M)if(k++,B){if(!O&&!$)throw new e.sdk.WERR_INTERNAL(`vin ${k} non-fixedInput without unlockLen`);const U=_.includeAllSourceTransactions&&_.isSignAction?await S.getRawTxOfKnownValidTransaction(B.txid):void 0,q={vin:k,sourceTxid:B.txid,sourceVout:B.vout,sourceSatoshis:B.satoshis,sourceLockingScript:(0,e.asString)(B.lockingScript),sourceTransaction:U,unlockingScriptLength:$||O.unlockingScriptLength,providedBy:O&&B.providedBy==="storage"?"you-and-storage":B.providedBy,type:B.type,spendingDescription:B.spendingDescription||void 0,derivationPrefix:B.derivationPrefix||void 0,derivationSuffix:B.derivationSuffix||void 0,senderIdentityKey:B.senderIdentityKey||void 0};A.push(q)}else{if(!O)throw new e.sdk.WERR_INTERNAL(`vin ${k} without output or xinput`);const U={vin:k,sourceTxid:O.outpoint.txid,sourceVout:O.outpoint.vout,sourceSatoshis:O.satoshis,sourceLockingScript:O.lockingScript.toHex(),unlockingScriptLength:O.unlockingScriptLength,providedBy:"you",type:"custom",spendingDescription:void 0,derivationPrefix:void 0,derivationSuffix:void 0,senderIdentityKey:void 0};A.push(U)}return A}async function c(S,P,_,I,C){var A;const M=[],k={};for(const U of I.xoutputs)U.basket!==void 0&&!k[U.basket]&&(k[U.basket]=await S.findOrInsertOutputBasket(P,U.basket));const O={};for(const U of I.xoutputs)for(const q of U.tags)O[q]=await S.findOrInsertOutputTag(P,q);const B=[];for(const U of I.xoutputs){const q=(0,e.asArray)(U.lockingScript);if(U.purpose==="service-charge"){const K=new Date;await S.insertCommission({userId:P,transactionId:I.transactionId,lockingScript:q,satoshis:U.satoshis,isRedeemed:!1,keyOffset:(0,e.verifyTruthy)(U.keyOffset),created_at:K,updated_at:K,commissionId:0});const V=o(P,I.transactionId,U.satoshis,U.vout);V.lockingScript=q,V.providedBy="storage",V.purpose="storage-commission",V.type="custom",V.spendable=!1,B.push({o:V,tags:[]})}else{const K=U.basket?k[U.basket].basketId:void 0,V=o(P,I.transactionId,U.satoshis,U.vout);V.lockingScript=q,V.basketId=K,V.customInstructions=U.customInstructions,V.outputDescription=U.outputDescription,V.providedBy=U.providedBy,V.purpose=U.purpose||"",V.type="custom",B.push({o:V,tags:U.tags})}}for(const U of C)U.spendable=!0,B.push({o:U,tags:[]});if(_.options.randomizeOutputs){const U=[],q=()=>{let j=0;return!U||U.length===0?j=Math.random():(j=U.shift()||0,U.push(j)),j},K=j=>{let Q=j.length,se,Z;for(;Q!==0;)Z=Math.floor(q()*Q),Q-=1,se=j[Q],j[Q]=j[Z],j[Z]=se;return j};let V=-1;const G=Array(B.length);for(let j=0;j<G.length;j++)G[j]=j;K(G);for(const j of B){if(V++,j.o.vout!==V)throw new e.sdk.WERR_INTERNAL(`new output ${V} has out of order vout ${j.o.vout}`);j.o.vout=G[V]}}const $=[];for(const{o:U,tags:q}of B){U.outputId=await S.insertOutput(U),U.change&&U.purpose==="change"&&U.providedBy==="storage"&&$.push(U.vout);for(const V of q){const G=O[V];await S.findOrInsertOutputTagMap((0,e.verifyId)(U.outputId),(0,e.verifyId)(G.outputTagId))}const K={vout:(0,e.verifyInteger)(U.vout),satoshis:(0,e.verifyTruthy)(U.satoshis),lockingScript:U.lockingScript?(0,e.asString)(U.lockingScript):"",providedBy:(0,e.verifyTruthy)(U.providedBy),purpose:U.purpose||void 0,basket:(A=Object.values(k).find(V=>V.basketId===U.basketId))===null||A===void 0?void 0:A.name,tags:q,outputDescription:U.outputDescription,derivationSuffix:U.derivationSuffix,customInstructions:U.customInstructions};M.push(K)}return{outputs:M,changeVouts:$}}async function l(S,P,_,I){const C=new Date,A={created_at:C,updated_at:C,transactionId:0,version:_.version,lockTime:_.lockTime,status:"unsigned",reference:(0,e.randomBytesBase64)(12),satoshis:0,userId:P,isOutgoing:!0,inputBEEF:I.toBinary(),description:_.description,txid:void 0,rawTx:void 0};A.transactionId=await S.insertTransaction(A);for(const M of _.labels){const k=await S.findOrInsertTxLabel(P,M);await S.findOrInsertTxLabelMap((0,e.verifyId)(A.transactionId),(0,e.verifyId)(k.txLabelId))}return A}function u(S,P,_){const I=[];let C=-1;for(const A of _.outputs){C++;const M={...A,vout:C,providedBy:"you",purpose:void 0,derivationSuffix:void 0,keyOffset:void 0};I.push(M)}if(S.commissionSatoshis>0&&S.commissionPubKeyHex){C++;const{script:A,keyOffset:M}=x(S.commissionPubKeyHex);I.push({lockingScript:A,satoshis:S.commissionSatoshis,outputDescription:"Storage Service Charge",basket:void 0,tags:[],vout:C,providedBy:"storage",purpose:"service-charge",keyOffset:M})}return I}async function d(S,P,_){const I=new t.Beef;if(_.inputs.length===0)return{storageBeef:I,beef:I,xinputs:[]};_.inputBEEF&&I.mergeBeef(_.inputBEEF);const C=_.inputs.map((O,B)=>({...O,vin:B,satoshis:-1,lockingScript:new t.Script})),A=_.options.trustSelf==="known",M={};for(const O of C)M[O.outpoint.txid]=!0;for(const O of I.txs)if(O.isTxidOnly){if(!A)throw new e.sdk.WERR_INVALID_PARAMETER("inputBEEF",`valid and contain complete proof data for ${O.txid}`);if(!M[O.txid]&&!await S.verifyKnownValidTransaction(O.txid))throw new e.sdk.WERR_INVALID_PARAMETER("inputBEEF",`valid and contain complete proof data for unknown ${O.txid}`)}for(const O of Object.keys(M)){let B=I.findTxid(O);if(!B&&A&&await S.verifyKnownValidTransaction(O)&&(B=I.mergeTxidOnly(O)),!B)throw new e.sdk.WERR_INVALID_PARAMETER("inputBEEF",`valid and contain proof data for possibly known ${O}`)}if(!await I.verify(await S.getServices().getChainTracker(),!0))throw console.log(`verifyInputBeef failed, inputBEEF failed to verify.
${I.toLogString()}
`),new e.sdk.WERR_INVALID_PARAMETER("inputBEEF","valid Beef when factoring options.trustSelf");const k=I.clone();for(const O of C){const{txid:B,vout:$}=O.outpoint,U=(0,e.verifyOneOrNone)(await S.findOutputs({partial:{userId:P,txid:B,vout:$}}));if(U){if(O.output=U,!Array.isArray(U.lockingScript)||!Number.isInteger(U.satoshis))throw new e.sdk.WERR_INVALID_PARAMETER(`${B}.${$}`,"output with valid lockingScript and satoshis");if(!r&&!U.spendable&&!_.isNoSend)throw new e.sdk.WERR_INVALID_PARAMETER(`${B}.${$}`,"spendable output unless noSend is true");O.satoshis=(0,e.verifyNumber)(U.satoshis),O.lockingScript=t.Script.fromBinary((0,e.asArray)(U.lockingScript))}else{let q=I.findTxid(B);if(q.isTxidOnly){const{rawTx:V,proven:G}=await S.getProvenOrRawTx(B);if(!V)throw new e.sdk.WERR_INVALID_PARAMETER("inputBEEF",`valid and contain proof data for ${B}`);q=I.mergeRawTx((0,e.asArray)(V)),G&&I.mergeBump(new e.EntityProvenTx(G).getMerklePath())}if($>=q.tx.outputs.length)throw new e.sdk.WERR_INVALID_PARAMETER(`${B}.${$}`,"valid outpoint");const K=q.tx.outputs[$];O.satoshis=(0,e.verifyTruthy)(K.satoshis),O.lockingScript=K.lockingScript}}return{beef:I,storageBeef:k,xinputs:C}}async function h(S,P,_,I){const C=[];if(!_.isNoSend)return[];const A=_.options.noSendChange;if(A&&A.length>0)for(const M of A){const k=(0,e.verifyOneOrNone)(await S.findOutputs({partial:{userId:P,txid:M.txid,vout:M.vout}}));if(!k||k.providedBy!=="storage"||k.purpose!=="change"||k.spendable===!1||Number.isInteger(k.spentBy)||!(0,e.verifyNumber)(k.satoshis)||k.basketId!==I.basketId)throw new e.sdk.WERR_INVALID_PARAMETER("noSendChange outpoint","valid");if(-1<C.findIndex(O=>O.outputId===k.outputId))throw new e.sdk.WERR_INVALID_PARAMETER("noSendChange outpoint","unique. Duplicates are not allowed.");C.push(k)}return C}async function f(S,P,_,I){const C={fixedInputs:I.xinputs.map(G=>({satoshis:G.satoshis,unlockingScriptLength:G.unlockingScriptLength})),fixedOutputs:I.xoutputs.map(G=>({satoshis:G.satoshis,lockingScriptLength:G.lockingScript.length/2})),feeModel:I.feeModel,changeInitialSatoshis:I.changeBasket.minimumDesiredUTXOValue,changeFirstSatoshis:Math.max(1,Math.round(I.changeBasket.minimumDesiredUTXOValue/4)),changeLockingScriptLength:25,changeUnlockingScriptLength:107,targetNetCount:I.changeBasket.numberOfDesiredUTXOs-I.availableChangeCount,randomVals:_.randomVals},A=[...I.noSendChangeIn],M={},k=async(G,j)=>{if(A.length>0){const ie=A.pop();return M[ie.outputId]=ie,await S.updateOutput(ie.outputId,{spendable:!1,spentBy:I.transactionId}),ie.spendable=!1,ie.spentBy=I.transactionId,{outputId:ie.outputId,satoshis:ie.satoshis}}const Q=I.changeBasket.basketId,se=await S.allocateChangeInput(P,Q,G,j,!_.isDelayed,I.transactionId);return se?(M[se.outputId]=se,{outputId:se.outputId,satoshis:se.satoshis}):void 0},O=async G=>{const j=I.noSendChangeIn.find(Q=>Q.outputId===G);if(j){A.push(j);return}await S.updateOutput(G,{spendable:!0,spentBy:void 0})},B=await(0,n.generateChangeSdk)(C,k,O),$=()=>{let G=0;return!_.randomVals||_.randomVals.length===0?G=Math.random():(G=_.randomVals.shift()||0,_.randomVals.push(G)),G},U=(G,j)=>Math.floor($()*(j-G+1)+G),q=G=>{let j=[];if(!_.randomVals||_.randomVals.length===0)j=(0,t.Random)(G);else for(let Q=0;Q<G;Q++)j.push(U(0,255));return t.Utils.toBase64(j)},K=q(16);return{maxPossibleSatoshisAdjustment:B.maxPossibleSatoshisAdjustment,allocatedChange:B.allocatedChangeInputs.map(G=>M[G.outputId]),changeOutputs:B.changeOutputs.map((G,j)=>({created_at:new Date,updated_at:new Date,outputId:0,userId:P,transactionId:I.transactionId,vout:C.fixedOutputs.length+j,satoshis:G.satoshis,basketId:I.changeBasket.basketId,spendable:!1,change:!0,type:"P2PKH",derivationPrefix:K,derivationSuffix:q(16),providedBy:"storage",purpose:"change",customInstructions:void 0,senderIdentityKey:void 0,outputDescription:"",txid:void 0,lockingScript:void 0,spentBy:void 0,spendingDescription:void 0})),derivationPrefix:K}}function p(S,P){if(P.options.returnTXIDOnly)return;const _={};for(const I of P.options.knownTxids)_[I]=!0;for(const I of S.txs.map(C=>C.txid))_[I]&&S.makeTxidOnly(I);return S.toBinary()}async function g(S,P,_,I,C){const A={trustSelf:void 0,knownTxids:_.options.knownTxids,mergeToBeef:C,ignoreStorage:!1,ignoreServices:!0,ignoreNewProven:!1,minProofLevel:void 0};if(!_.options.returnTXIDOnly){for(const M of I)!C.findTxid(M.txid)&&!_.options.knownTxids.find(k=>k===M.txid)&&await S.getBeefForTransaction(M.txid,A);return p(C,_)}}function m(S,P){let _;P!==void 0&&typeof P=="string"?P.length===64?_=t.PrivateKey.fromString(P,"hex"):_=t.PrivateKey.fromWif(P):(_=t.PrivateKey.fromRandom(),P=_.toWif());const I=S.mul(_).encode(!0,void 0),C=(0,e.sha256Hash)(I);return{hashedSecret:new t.BigNumber(C),keyOffset:P}}function y(S,P){const _=t.PublicKey.fromString(S),I=m(_,P),C=new t.Curve().g.mul(I.hashedSecret);return{offsetPubKey:new t.PublicKey(_.add(C)).toString(),keyOffset:I.keyOffset}}function b(S,P){const _=y(S,P),C=t.PublicKey.fromString(_.offsetPubKey).toHash();return{script:new t.P2PKH().lock(C).toHex(),keyOffset:_.keyOffset}}function x(S){return b(S)}return Vf}var KE={},t9;function L1e(){if(t9)return KE;t9=1,Object.defineProperty(KE,"__esModule",{value:!0}),KE.internalizeAction=n;const t=sr(),e=Fn();async function n(i,s,o){const a=new r(i,s,o);return await a.asyncSetup(),a.isMerge?await a.mergedInternalize():await a.newInternalize(),a.r}class r{constructor(s,o,a){this.storage=s,this.auth=o,this.args=a,this.vargs=e.sdk.validateInternalizeActionArgs(a),this.userId=o.userId,this.r={accepted:!0,isMerge:!1,txid:"",satoshis:0},this.ab=new t.Beef,this.tx=new t.Transaction,this.changeBasket={},this.baskets={},this.basketInsertions=[],this.walletPayments=[],this.eos=[]}get isMerge(){return this.r.isMerge}set isMerge(s){this.r.isMerge=s}get txid(){return this.r.txid}set txid(s){this.r.txid=s}get satoshis(){return this.r.satoshis}set satoshis(s){this.r.satoshis=s}async getBasket(s){let o=this.baskets[s];return o||(o=await this.storage.findOrInsertOutputBasket(this.userId,s),this.baskets[s]=o,o)}async asyncSetup(){({ab:this.ab,tx:this.tx,txid:this.txid}=await this.validateAtomicBeef(this.args.tx));for(const s of this.args.outputs){if(s.outputIndex<0||s.outputIndex>=this.tx.outputs.length)throw new e.sdk.WERR_INVALID_PARAMETER("outputIndex",`a valid output index in range 0 to ${this.tx.outputs.length-1}`);const o=this.tx.outputs[s.outputIndex];switch(s.protocol){case"basket insertion":{if(!s.insertionRemittance||s.paymentRemittance)throw new e.sdk.WERR_INVALID_PARAMETER("basket insertion","valid insertionRemittance and no paymentRemittance");this.basketInsertions.push({...s.insertionRemittance,txo:o,vout:s.outputIndex})}break;case"wallet payment":{if(s.insertionRemittance||!s.paymentRemittance)throw new e.sdk.WERR_INVALID_PARAMETER("wallet payment","valid paymentRemittance and no insertionRemittance");this.walletPayments.push({...s.paymentRemittance,txo:o,vout:s.outputIndex,ignore:!1})}break;default:throw new e.sdk.WERR_INTERNAL(`unexpected protocol ${s.protocol}`)}}if(this.changeBasket=(0,e.verifyOne)(await this.storage.findOutputBaskets({partial:{userId:this.userId,name:"default"}})),this.baskets={},this.etx=(0,e.verifyOneOrNone)(await this.storage.findTransactions({partial:{userId:this.userId,txid:this.txid}})),this.etx&&!(this.etx.status=="completed"||this.etx.status==="unproven"||this.etx.status==="nosend"))throw new e.sdk.WERR_INVALID_PARAMETER("tx",`target transaction of internalizeAction has invalid status ${this.etx.status}.`);if(this.isMerge=!!this.etx,this.isMerge){this.eos=await this.storage.findOutputs({partial:{userId:this.userId,txid:this.txid}});for(const s of this.eos){const o=this.basketInsertions.find(c=>c.vout===s.vout),a=this.walletPayments.find(c=>c.vout===s.vout);if(o&&a)throw new e.sdk.WERR_INVALID_PARAMETER("outputs","unique outputIndex values");o&&(o.eo=s),a&&(a.eo=s)}}for(const s of this.basketInsertions)this.isMerge&&s.eo&&s.eo.basketId===this.changeBasket.basketId&&(this.satoshis-=s.txo.satoshis);for(const s of this.walletPayments)this.isMerge?s.eo?s.eo.basketId===this.changeBasket.basketId?s.ignore=!0:this.satoshis+=s.txo.satoshis:this.satoshis+=s.txo.satoshis:this.satoshis+=s.txo.satoshis}async validateAtomicBeef(s){const o=t.Beef.fromBinary(s);if(!await o.verify(await this.storage.getServices().getChainTracker(),!1)||!o.atomicTxid)throw new e.sdk.WERR_INVALID_PARAMETER("tx","valid AtomicBEEF");const c=o.atomicTxid,l=o.findTxid(c);if(!l)throw new e.sdk.WERR_INVALID_PARAMETER("tx",`valid AtomicBEEF with newest txid of ${c}`);const u=l.tx;return{ab:o,tx:u,txid:c}}async findOrInsertTargetTransaction(s,o){const a=new Date,c={created_at:a,updated_at:a,transactionId:0,status:o,satoshis:s,version:this.tx.version,lockTime:this.tx.lockTime,reference:(0,e.randomBytesBase64)(7),userId:this.userId,isOutgoing:!1,description:this.args.description,inputBEEF:void 0,txid:this.txid,rawTx:void 0},l=await this.storage.findOrInsertTransaction(c);if(!l.isNew){if(!this.isMerge)throw new e.sdk.WERR_INVALID_PARAMETER("tx","target transaction of internalizeAction is undergoing active changes.");await this.storage.updateTransaction(l.tx.transactionId,{satoshis:l.tx.satoshis+s})}return l.tx}async mergedInternalize(){const s=this.etx.transactionId;await this.addLabels(s);for(const o of this.walletPayments)o.eo&&!o.ignore?await this.mergeWalletPaymentForOutput(s,o):o.ignore||await this.storeNewWalletPaymentForOutput(s,o);for(const o of this.basketInsertions)o.eo?await this.mergeBasketInsertionForOutput(s,o):await this.storeNewBasketInsertionForOutput(s,o)}async newInternalize(){this.etx=await this.findOrInsertTargetTransaction(this.satoshis,"unproven");const s=this.etx.transactionId,o=e.EntityProvenTxReq.fromTxid(this.txid,this.tx.toBinary(),this.args.tx);o.status="unmined",o.addHistoryNote({what:"internalizeAction",userId:this.userId}),o.addNotifyTransactionId(s),await this.storage.getProvenOrReq(this.txid,o.toApi()),await this.addLabels(s);for(const a of this.walletPayments)await this.storeNewWalletPaymentForOutput(s,a);for(const a of this.basketInsertions)await this.storeNewBasketInsertionForOutput(s,a)}async addLabels(s){for(const o of this.vargs.labels){const a=await this.storage.findOrInsertTxLabel(this.userId,o);await this.storage.findOrInsertTxLabelMap((0,e.verifyId)(s),(0,e.verifyId)(a.txLabelId))}}async addBasketTags(s,o){for(const a of s.tags||[])await this.storage.tagOutput({outputId:o,userId:this.userId},a)}async storeNewWalletPaymentForOutput(s,o){const a=new Date,c={created_at:a,updated_at:a,outputId:0,transactionId:s,userId:this.userId,spendable:!0,lockingScript:o.txo.lockingScript.toBinary(),vout:o.vout,basketId:this.changeBasket.basketId,satoshis:o.txo.satoshis,txid:this.txid,senderIdentityKey:o.senderIdentityKey,type:"P2PKH",providedBy:"storage",purpose:"change",derivationPrefix:o.derivationPrefix,derivationSuffix:o.derivationSuffix,change:!0,spentBy:void 0,customInstructions:void 0,outputDescription:"",spendingDescription:void 0};c.outputId=await this.storage.insertOutput(c),o.eo=c}async mergeWalletPaymentForOutput(s,o){const a=o.eo.outputId,c={basketId:this.changeBasket.basketId,type:"P2PKH",customInstructions:void 0,change:!0,providedBy:"storage",purpose:"change",senderIdentityKey:o.senderIdentityKey,derivationPrefix:o.derivationPrefix,derivationSuffix:o.derivationSuffix};await this.storage.updateOutput(a,c),o.eo={...o.eo,...c}}async mergeBasketInsertionForOutput(s,o){const a=o.eo.outputId,c={basketId:(await this.getBasket(o.basket)).basketId,type:"custom",customInstructions:o.customInstructions,change:!1,providedBy:"you",purpose:"",senderIdentityKey:void 0,derivationPrefix:void 0,derivationSuffix:void 0};await this.storage.updateOutput(a,c),o.eo={...o.eo,...c}}async storeNewBasketInsertionForOutput(s,o){const a=new Date,c={created_at:a,updated_at:a,outputId:0,transactionId:s,userId:this.userId,spendable:!0,lockingScript:o.txo.lockingScript.toBinary(),vout:o.vout,basketId:(await this.getBasket(o.basket)).basketId,satoshis:o.txo.satoshis,txid:this.txid,type:"custom",customInstructions:o.customInstructions,change:!1,spentBy:void 0,outputDescription:"",spendingDescription:void 0,providedBy:"you",purpose:"",senderIdentityKey:void 0,derivationPrefix:void 0,derivationSuffix:void 0};c.outputId=await this.storage.insertOutput(c),await this.addBasketTags(o,c.outputId),o.eo=c}}return KE}var G1={},X1={},GE={},n9;function D1e(){if(n9)return GE;n9=1,Object.defineProperty(GE,"__esModule",{value:!0}),GE.getSyncChunk=e;const t=Fn();async function e(i,s){const o={fromStorageIdentityKey:s.fromStorageIdentityKey,toStorageIdentityKey:s.toStorageIdentityKey,userIdentityKey:s.identityKey};let a=s.maxItems,c=s.maxRoughSize,l=0,u=!1;const d=(0,t.verifyTruthy)(await i.findUserByIdentityKey(s.identityKey));(!s.since||d.updated_at>new Date(s.since))&&(o.user=d);const h=[{name:"provenTx",maxDivider:100,preAdd:()=>{o.provenTxs=[]},addItem:p=>{o.provenTxs.push(p)},findItems:async(p,g)=>await p.getProvenTxsForUser(g)},{name:"outputBasket",maxDivider:1,preAdd:()=>{o.outputBaskets=[]},addItem:p=>{o.outputBaskets.push(p)},findItems:async(p,g)=>await p.findOutputBaskets({partial:{userId:g.userId},since:g.since,paged:g.paged})},{name:"outputTag",maxDivider:1,preAdd:()=>{o.outputTags=[]},addItem:p=>{o.outputTags.push(p)},findItems:async(p,g)=>await p.findOutputTags({partial:{userId:g.userId},since:g.since,paged:g.paged})},{name:"txLabel",maxDivider:1,preAdd:()=>{o.txLabels=[]},addItem:p=>{o.txLabels.push(p)},findItems:async(p,g)=>await p.findTxLabels({partial:{userId:g.userId},since:g.since,paged:g.paged})},{name:"transaction",maxDivider:25,preAdd:()=>{o.transactions=[]},addItem:p=>{o.transactions.push(p)},findItems:async(p,g)=>await p.findTransactions({partial:{userId:g.userId},since:g.since,paged:g.paged})},{name:"output",maxDivider:25,preAdd:()=>{o.outputs=[]},addItem:p=>{o.outputs.push(p)},findItems:async(p,g)=>await p.findOutputs({partial:{userId:g.userId},since:g.since,paged:g.paged})},{name:"txLabelMap",maxDivider:1,preAdd:()=>{o.txLabelMaps=[]},addItem:p=>{o.txLabelMaps.push(p)},findItems:async(p,g)=>await p.getTxLabelMapsForUser(g)},{name:"outputTagMap",maxDivider:1,preAdd:()=>{o.outputTagMaps=[]},addItem:p=>{o.outputTagMaps.push(p)},findItems:async(p,g)=>await p.getOutputTagMapsForUser(g)},{name:"certificate",maxDivider:25,preAdd:()=>{o.certificates=[]},addItem:p=>{o.certificates.push(p)},findItems:async(p,g)=>await p.findCertificates({partial:{userId:g.userId},since:g.since,paged:g.paged})},{name:"certificateField",maxDivider:25,preAdd:()=>{o.certificateFields=[]},addItem:p=>{o.certificateFields.push(p)},findItems:async(p,g)=>await p.findCertificateFields({partial:{userId:g.userId},since:g.since,paged:g.paged})},{name:"commission",maxDivider:25,preAdd:()=>{o.commissions=[]},addItem:p=>{o.commissions.push(p)},findItems:async(p,g)=>await p.findCommissions({partial:{userId:g.userId},since:g.since,paged:g.paged})},{name:"provenTxReq",maxDivider:100,preAdd:()=>{o.provenTxReqs=[]},addItem:p=>{o.provenTxReqs.push(p)},findItems:async(p,g)=>await p.getProvenTxReqsForUser(g)}],f=async p=>{if(l>=s.offsets.length){u=!0;return}let{offset:g,name:m}=s.offsets[l++];if(p.name!==m)throw new t.sdk.WERR_INVALID_PARAMETER("offsets",`in dependency order. '${p.name}' expected, found ${m}.`);let y=!1;for(;!u;){const b=Math.min(a,Math.max(10,s.maxItems/p.maxDivider));if(b<=0)break;const x=await p.findItems(i,{userId:d.userId,since:s.since,paged:{limit:b,offset:g}});if(r(x),y||(p.preAdd(),y=!0),x.length===0)break;for(const S of x)if(g++,p.addItem(S),a--,c-=JSON.stringify(S).length,a<=0||c<0){u=!0;break}}};for(;!u;)for(const p of h)await f(p);return o}function n(i){if(!(i instanceof Date))throw new t.sdk.WERR_INVALID_OPERATION("bad date")}function r(i){for(const s of i){n(s.created_at),n(s.updated_at);for(const o of Object.keys(s))if(s[o]===null)throw new t.sdk.WERR_INVALID_OPERATION}}return GE}var r9;function B1e(){if(r9)return X1;r9=1,Object.defineProperty(X1,"__esModule",{value:!0}),X1.StorageReader=void 0;const t=Fn(),e=D1e();let n=class{get dbtype(){var i;return(i=this._settings)===null||i===void 0?void 0:i.dbtype}constructor(i){this.chain=i.chain}isAvailable(){return!!this._settings}async makeAvailable(){return this._settings=await this.readSettings()}getSettings(){if(!this._settings)throw new t.sdk.WERR_INVALID_OPERATION('must call "makeAvailable" before accessing "settings"');return this._settings}isStorageProvider(){return!1}async findUserByIdentityKey(i){return(0,t.verifyOneOrNone)(await this.findUsers({partial:{identityKey:i}}))}async getSyncChunk(i){return(0,e.getSyncChunk)(this,i)}validateEntityDate(i){if(!this.dbtype)throw new t.sdk.WERR_INTERNAL("must call verifyReadyForDatabaseAccess first");let s=this.validateDate(i);switch(this.dbtype){case"MySQL":break;case"SQLite":s=s.toISOString();break;default:throw new t.sdk.WERR_INTERNAL(`Invalid dateScheme ${this.dbtype}`)}return s}validateOptionalEntityDate(i,s){if(!this.dbtype)throw new t.sdk.WERR_INTERNAL("must call verifyReadyForDatabaseAccess first");let o=this.validateOptionalDate(i);switch(!o&&s&&(o=new Date),this.dbtype){case"MySQL":break;case"SQLite":o&&(o=o.toISOString());break;default:throw new t.sdk.WERR_INTERNAL(`Invalid dateScheme ${this.dbtype}`)}return o}validateDate(i){let s;return i instanceof Date?s=i:s=new Date(i),s}validateOptionalDate(i){if(i!=null)return this.validateDate(i)}validateDateForWhere(i){if(!this.dbtype)throw new t.sdk.WERR_INTERNAL("must call verifyReadyForDatabaseAccess first");typeof i=="number"&&(i=(0,t.validateSecondsSinceEpoch)(i));const s=(0,t.verifyTruthy)(this.validateDate(i));let o;switch(this.dbtype){case"MySQL":o=s;break;case"SQLite":o=s.toISOString();break;default:throw new t.sdk.WERR_INTERNAL(`Invalid dateScheme ${this.dbtype}`)}return o}};return X1.StorageReader=n,X1}var i9;function F1e(){if(i9)return G1;i9=1,Object.defineProperty(G1,"__esModule",{value:!0}),G1.StorageReaderWriter=void 0;const t=Fn(),e=Es(),n=B1e();let r=class extends n.StorageReader{constructor(s){super(s)}async setActive(s,o){return await this.updateUser((0,t.verifyId)(s.userId),{activeStorage:o})}async findCertificateById(s,o){return(0,t.verifyOneOrNone)(await this.findCertificates({partial:{certificateId:s},trx:o}))}async findCommissionById(s,o){return(0,t.verifyOneOrNone)(await this.findCommissions({partial:{commissionId:s},trx:o}))}async findOutputById(s,o,a){return(0,t.verifyOneOrNone)(await this.findOutputs({partial:{outputId:s},noScript:a,trx:o}))}async findOutputBasketById(s,o){return(0,t.verifyOneOrNone)(await this.findOutputBaskets({partial:{basketId:s},trx:o}))}async findProvenTxById(s,o){return(0,t.verifyOneOrNone)(await this.findProvenTxs({partial:{provenTxId:s},trx:o}))}async findProvenTxReqById(s,o){return(0,t.verifyOneOrNone)(await this.findProvenTxReqs({partial:{provenTxReqId:s},trx:o}))}async findSyncStateById(s,o){return(0,t.verifyOneOrNone)(await this.findSyncStates({partial:{syncStateId:s},trx:o}))}async findTransactionById(s,o,a){return(0,t.verifyOneOrNone)(await this.findTransactions({partial:{transactionId:s},noRawTx:a,trx:o}))}async findTxLabelById(s,o){return(0,t.verifyOneOrNone)(await this.findTxLabels({partial:{txLabelId:s},trx:o}))}async findOutputTagById(s,o){return(0,t.verifyOneOrNone)(await this.findOutputTags({partial:{outputTagId:s},trx:o}))}async findUserById(s,o){return(0,t.verifyOneOrNone)(await this.findUsers({partial:{userId:s},trx:o}))}async findOrInsertUser(s,o){let a,c=!1;for(let l=0;;l++)try{if(a=(0,t.verifyOneOrNone)(await this.findUsers({partial:{identityKey:s},trx:o})),a)break;const u=new Date;a={created_at:u,updated_at:new Date("1971-01-01"),userId:0,identityKey:s,activeStorage:this.getSettings().storageIdentityKey},a.userId=await this.insertUser(a,o),c=!0,await this.insertOutputBasket({created_at:u,updated_at:new Date("1971-01-01"),basketId:0,userId:a.userId,name:"default",numberOfDesiredUTXOs:32,minimumDesiredUTXOValue:1e3,isDeleted:!1});break}catch(u){if(console.log(`findOrInsertUser catch: ${JSON.stringify(u).slice(0,512)}`),l>0)throw u}return{user:a,isNew:c}}async findOrInsertTransaction(s,o){let a,c=!1;for(let l=0;;l++)try{if(a=(0,t.verifyOneOrNone)(await this.findTransactions({partial:{userId:s.userId,txid:s.txid},trx:o})),a)break;s.transactionId=await this.insertTransaction(s,o),c=!0,a=s;break}catch(u){if(l>0)throw u}return{tx:a,isNew:c}}async findOrInsertOutputBasket(s,o,a){const c={name:o,userId:s};for(let l=0;;l++)try{const u=new Date;let d=(0,t.verifyOneOrNone)(await this.findOutputBaskets({partial:c,trx:a}));return d||(d={...c,minimumDesiredUTXOValue:0,numberOfDesiredUTXOs:0,basketId:0,created_at:u,updated_at:u,isDeleted:!1},d.basketId=await this.insertOutputBasket(d,a)),d.isDeleted&&await this.updateOutputBasket((0,t.verifyId)(d.basketId),{isDeleted:!1}),d}catch(u){if(l>0)throw u}}async findOrInsertTxLabel(s,o,a){const c={label:o,userId:s};for(let l=0;;l++)try{const u=new Date;let d=(0,t.verifyOneOrNone)(await this.findTxLabels({partial:c,trx:a}));return d||(d={...c,txLabelId:0,created_at:u,updated_at:u,isDeleted:!1},d.txLabelId=await this.insertTxLabel(d,a)),d.isDeleted&&await this.updateTxLabel((0,t.verifyId)(d.txLabelId),{isDeleted:!1}),d}catch(u){if(l>0)throw u}}async findOrInsertTxLabelMap(s,o,a){const c={transactionId:s,txLabelId:o};for(let l=0;;l++)try{const u=new Date;let d=(0,t.verifyOneOrNone)(await this.findTxLabelMaps({partial:c,trx:a}));return d||(d={...c,created_at:u,updated_at:u,isDeleted:!1},await this.insertTxLabelMap(d,a)),d.isDeleted&&await this.updateTxLabelMap(s,o,{isDeleted:!1}),d}catch(u){if(l>0)throw u}}async findOrInsertOutputTag(s,o,a){const c={tag:o,userId:s};for(let l=0;;l++)try{const u=new Date;let d=(0,t.verifyOneOrNone)(await this.findOutputTags({partial:c,trx:a}));return d||(d={...c,outputTagId:0,created_at:u,updated_at:u,isDeleted:!1},d.outputTagId=await this.insertOutputTag(d,a)),d.isDeleted&&await this.updateOutputTag((0,t.verifyId)(d.outputTagId),{isDeleted:!1}),d}catch(u){if(l>0)throw u}}async findOrInsertOutputTagMap(s,o,a){const c={outputId:s,outputTagId:o};for(let l=0;;l++)try{const u=new Date;let d=(0,t.verifyOneOrNone)(await this.findOutputTagMaps({partial:c,trx:a}));return d||(d={...c,created_at:u,updated_at:u,isDeleted:!1},await this.insertOutputTagMap(d,a)),d.isDeleted&&await this.updateOutputTagMap(s,o,{isDeleted:!1}),d}catch(u){if(l>0)throw u}}async findOrInsertSyncStateAuth(s,o,a){const c={userId:s.userId,storageIdentityKey:o,storageName:a};for(let l=0;;l++)try{const u=new Date;let d=(0,t.verifyOneOrNone)(await this.findSyncStates({partial:c}));return d?{syncState:d,isNew:!1}:(d={...c,created_at:u,updated_at:u,syncStateId:0,status:"unknown",init:!1,refNum:(0,t.randomBytesBase64)(12),syncMap:JSON.stringify((0,e.createSyncMap)())},await this.insertSyncState(d),{syncState:d,isNew:!0})}catch(u){if(l>0)throw u}}async findOrInsertProvenTxReq(s,o){let a,c=!1;for(let l=0;;l++)try{if(a=(0,t.verifyOneOrNone)(await this.findProvenTxReqs({partial:{txid:s.txid},trx:o})),a)break;s.provenTxReqId=await this.insertProvenTxReq(s,o),c=!0,a=s;break}catch(u){if(l>0)throw u}return{req:a,isNew:c}}async findOrInsertProvenTx(s,o){let a,c=!1;for(let l=0;;l++)try{if(a=(0,t.verifyOneOrNone)(await this.findProvenTxs({partial:{txid:s.txid},trx:o})),a)break;s.provenTxId=await this.insertProvenTx(s,o),c=!0,a=s;break}catch(u){if(l>0)throw u}return{proven:a,isNew:c}}async tagOutput(s,o,a){await this.transaction(async c=>{const l=(0,t.verifyOne)(await this.findOutputs({partial:s,noScript:!0,trx:c})),u=await this.findOrInsertOutputTag(l.userId,o,c);await this.findOrInsertOutputTagMap((0,t.verifyId)(l.outputId),(0,t.verifyId)(u.outputTagId),c)},a)}};return G1.StorageReaderWriter=r,G1}var s9;function U1e(){if(s9)return qg;s9=1,Object.defineProperty(qg,"__esModule",{value:!0}),qg.StorageProvider=void 0,qg.validateStorageFeeModel=d;const t=sr(),e=Fn(),n=A1e(),r=R1e(),i=k1e(),s=O1e(),o=N1e(),a=L1e(),c=F1e(),l=Es();let u=class Qj extends c.StorageReaderWriter{static defaultOptions(){return{feeModel:{model:"sat/kb",value:1},commissionSatoshis:0,commissionPubKeyHex:void 0}}static createStorageBaseOptions(f){return{...Qj.defaultOptions(),chain:f}}constructor(f){super(f),this.isDirty=!1,this.feeModel=f.feeModel,this.commissionPubKeyHex=f.commissionPubKeyHex,this.commissionSatoshis=f.commissionSatoshis}isStorageProvider(){return!0}setServices(f){this._services=f}getServices(){if(!this._services)throw new e.sdk.WERR_INVALID_OPERATION("Must setServices first.");return this._services}async abortAction(f,p){if(!f.userId)throw new e.sdk.WERR_INVALID_PARAMETER("auth.userId","valid");const g=f.userId;let m=p.reference,y;return await this.transaction(async x=>{let S=(0,e.verifyOneOrNone)(await this.findTransactions({partial:{reference:m,userId:g},noRawTx:!0,trx:x}));!S&&p.reference.length===64&&(y=m,m=void 0,S=(0,e.verifyOneOrNone)(await this.findTransactions({partial:{txid:y,userId:g},noRawTx:!0,trx:x})));const P=["completed","failed","sending","unproven"];if(!S||!S.isOutgoing||-1<P.findIndex(I=>I===S.status))throw new e.sdk.WERR_INVALID_PARAMETER("reference","an inprocess, outgoing action that has not been signed and shared to the network.");if(await this.updateTransactionStatus("failed",S.transactionId,g,m,x),S.txid){const I=await l.EntityProvenTxReq.fromStorageTxid(this,S.txid,x);I&&(I.addHistoryNote({what:"abortAction",reference:p.reference}),I.status="invalid",await I.updateStorageDynamicProperties(this,x))}return{aborted:!0}})}async internalizeAction(f,p){return await(0,a.internalizeAction)(this,f,p)}async getReqsAndBeefToShareWithWorld(f,p,g){const m={beef:new t.Beef,details:[]};for(const y of f){const b={txid:y,status:"unknown"};m.details.push(b);try{if(b.proven=(0,e.verifyOneOrNone)(await this.findProvenTxs({partial:{txid:y},trx:g})),b.proven)b.status="alreadySent";else{const x=["unmined","callback","unconfirmed","completed"],S=["sending","unsent","nosend","unprocessed"],P=["unknown","nonfinal","invalid","doubleSpend"];b.req=(0,e.verifyOneOrNone)(await this.findProvenTxReqs({partial:{txid:y},trx:g})),b.req?P.indexOf(b.req.status)>-1?(b.status="error",b.error=`ERR_INVALID_PARAMETER: ${y} is not ready to send.`):x.indexOf(b.req.status)>-1?b.status="alreadySent":S.indexOf(b.req.status)>-1?!b.req.rawTx||!b.req.inputBEEF?(b.status="error",b.error=`ERR_INTERNAL: ${y} req is missing rawTx or beef.`):b.status="readyToSend":(b.status="error",b.error=`ERR_INTERNAL: ${y} has unexpected req status ${b.req.status}`):(b.status="error",b.error=`ERR_UNKNOWN_TXID: ${y} was not found.`),b.status==="readyToSend"&&await this.mergeReqToBeefToShareExternally(b.req,m.beef,p,g)}}catch(x){const S=e.sdk.WalletError.fromUnknown(x);b.error=`${S.name}: ${S.message}`}}return m}async mergeReqToBeefToShareExternally(f,p,g,m){const{rawTx:y,inputBEEF:b}=f;if(!y||!b)throw new e.sdk.WERR_INTERNAL("req rawTx and beef must be valid.");p.mergeRawTx((0,e.asArray)(y)),p.mergeBeef((0,e.asArray)(b));const x=t.Transaction.fromBinary((0,e.asArray)(y));for(const S of x.inputs){if(!S.sourceTXID)throw new e.sdk.WERR_INTERNAL("req all transaction inputs must have valid sourceTXID");const P=S.sourceTXID;p.findTxid(P)||(g&&g.indexOf(P)>-1?p.mergeTxidOnly(P):await this.getValidBeefForKnownTxid(P,p,void 0,g,m))}}async getProvenOrReq(f,p,g){if(p&&f!==p.txid)throw new e.sdk.WERR_INVALID_PARAMETER("newReq","same txid");const m={proven:void 0,req:void 0};if(m.proven=(0,e.verifyOneOrNone)(await this.findProvenTxs({partial:{txid:f},trx:g})),m.proven)return m;for(let y=0;;y++)try{if(m.req=(0,e.verifyOneOrNone)(await this.findProvenTxReqs({partial:{txid:f},trx:g})),!m.req&&!p)break;if(!m.req&&p&&await this.insertProvenTxReq(p,g),m.req&&p){const b=new l.EntityProvenTxReq(m.req);b.mergeHistory(p,void 0,!0),b.mergeNotifyTransactionIds(p),await b.updateStorageDynamicProperties(this,g)}break}catch(b){if(y>0)throw b}return m}async updateTransactionsStatus(f,p,g){await this.transaction(async m=>{for(const y of f)await this.updateTransactionStatus(p,y,void 0,void 0,m)},g)}async updateTransactionStatus(f,p,g,m,y){if(!p&&!(g&&m))throw new e.sdk.WERR_MISSING_PARAMETER("either transactionId or userId and reference");await this.transaction(async b=>{const x={};p&&(x.transactionId=p),g&&(x.userId=g),m&&(x.reference=m);const S=(0,e.verifyOne)(await this.findTransactions({partial:x,noRawTx:!0,trx:b}));if(f!=="completed"&&S.status==="completed"||S.provenTxId)throw new e.sdk.WERR_INVALID_OPERATION('The status of a "completed" transaction cannot be changed.');if(f!=="failed"&&S.status==="failed")throw new e.sdk.WERR_INVALID_OPERATION('A "failed" transaction may not be un-failed by this method.');switch(f){case"failed":{const _=await new l.EntityTransaction(S).getInputs(this,b);for(const I of _)await this.updateOutput((0,e.verifyId)(I.outputId),{spendable:!0,spentBy:void 0},b)}break;case"nosend":case"unsigned":case"unprocessed":case"sending":case"unproven":case"completed":break;default:throw new e.sdk.WERR_INVALID_PARAMETER("status",`not be ${f}`)}await this.updateTransaction(S.transactionId,{status:f},b)},y)}async createAction(f,p){if(!f.userId)throw new e.sdk.WERR_UNAUTHORIZED;return await(0,o.createAction)(this,f,p)}async processAction(f,p){if(!f.userId)throw new e.sdk.WERR_UNAUTHORIZED;return await(0,r.processAction)(this,f,p)}async attemptToPostReqsToNetwork(f,p){return await(0,i.attemptToPostReqsToNetwork)(this,f,p)}async listCertificates(f,p){return await(0,s.listCertificates)(this,f,p)}async verifyKnownValidTransaction(f,p){const{proven:g,rawTx:m}=await this.getProvenOrRawTx(f,p);return g!=null||m!=null}async getValidBeefForKnownTxid(f,p,g,m,y){const b=await this.getValidBeefForTxid(f,p,g,m,y);if(!b)throw new e.sdk.WERR_INVALID_PARAMETER("txid",`${f} is not known to storage.`);return b}async getValidBeefForTxid(f,p,g,m,y){const b=p||new t.Beef,x=await this.getProvenOrRawTx(f,y);if(x.proven)if(g==="known")b.mergeTxidOnly(f);else{b.mergeRawTx(x.proven.rawTx);const S=new l.EntityProvenTx(x.proven).getMerklePath();return b.mergeBump(S),b}if(x.rawTx&&x.inputBEEF)if(g==="known")b.mergeTxidOnly(f);else{b.mergeRawTx(x.rawTx),b.mergeBeef(x.inputBEEF);const S=t.Transaction.fromBinary(x.rawTx);for(const P of S.inputs)b.findTxid(P.sourceTXID)||(m&&m.indexOf(P.sourceTXID)>-1?b.mergeTxidOnly(P.sourceTXID):await this.getValidBeefForKnownTxid(P.sourceTXID,b,g,m,y));return b}}async getBeefForTransaction(f,p){return await(0,n.getBeefForTransaction)(this,f,p)}async findMonitorEventById(f,p){return(0,e.verifyOneOrNone)(await this.findMonitorEvents({partial:{id:f},trx:p}))}async relinquishCertificate(f,p){const g=e.sdk.validateRelinquishCertificateArgs(p),m=(0,e.verifyOne)(await this.findCertificates({partial:{certifier:g.certifier,serialNumber:g.serialNumber,type:g.type}}));return await this.updateCertificate(m.certificateId,{isDeleted:!0})}async relinquishOutput(f,p){const g=e.sdk.validateRelinquishOutputArgs(p),{txid:m,vout:y}=e.sdk.parseWalletOutpoint(g.output),b=(0,e.verifyOne)(await this.findOutputs({partial:{txid:m,vout:y}}));return await this.updateOutput(b.outputId,{basketId:void 0})}async processSyncChunk(f,p){const g=(0,e.verifyTruthy)(await this.findUserByIdentityKey(f.identityKey));return await new l.EntitySyncState((0,e.verifyOne)(await this.findSyncStates({partial:{storageIdentityKey:f.fromStorageIdentityKey,userId:g.userId}}))).processSyncChunk(this,f,p)}async updateProvenTxReqWithNewProvenTx(f){const p=await l.EntityProvenTxReq.fromStorageId(this,f.provenTxReqId);let g;if(p.provenTxId)g=new l.EntityProvenTx((0,e.verifyOne)(await this.findProvenTxs({partial:{txid:f.txid}})));else{let y;if({proven:g,isNew:y}=await this.transaction(async b=>{const{proven:x,isNew:S}=await this.findOrInsertProvenTx({created_at:new Date,updated_at:new Date,provenTxId:0,txid:f.txid,height:f.height,index:f.index,merklePath:f.merklePath,rawTx:p.rawTx,blockHash:f.blockHash,merkleRoot:f.merkleRoot},b);return g=new l.EntityProvenTx(x),S&&(p.status="completed",p.provenTxId=g.provenTxId,await p.updateStorageDynamicProperties(this,b)),{proven:g,isNew:S}}),y){const b=p.notify.transactionIds||[];if(b.length>0){for(const x of b)try{await this.updateTransaction(x,{provenTxId:g.provenTxId,status:"completed"}),p.addHistoryNote({what:"notifyTxOfProof",transactionId:x})}catch(S){const{code:P,description:_}=e.sdk.WalletError.fromUnknown(S),{provenTxId:I}=g;p.addHistoryNote({what:"notifyTxOfProofError",id:x,provenTxId:I,code:P,description:_})}await p.updateStorageDynamicProperties(this)}}}return{status:p.status,history:p.apiHistory,provenTxId:g.provenTxId}}async confirmSpendableOutputs(){const f=[],p=await this.findUsers({partial:{}});for(const{userId:g}of p){const m=(0,e.verifyOne)(await this.findOutputBaskets({partial:{userId:g,name:"default"}})),y={userId:g,basketId:m.basketId,spendable:!0},b=await this.findOutputs({partial:y}),x=this.getServices();for(let S=b.length-1;S>=0;S--){const P=b[S];if((0,e.verifyId)(P.outputId),P.spendable){let _=!1;if(P.lockingScript&&P.lockingScript.length>0){const I=x.hashOutputScript((0,e.asString)(P.lockingScript));(await x.getUtxoStatus(I,void 0,`${P.txid}.${P.vout}`)).isUtxo===!0&&(_=!0)}_||f.push(P)}}}return{invalidSpendableOutputs:f}}async updateProvenTxReqDynamics(f,p,g){const m={};return p.updated_at&&(m.updated_at=p.updated_at),p.provenTxId&&(m.provenTxId=p.provenTxId),p.status&&(m.status=p.status),Number.isInteger(p.attempts)&&(m.attempts=p.attempts),p.notified!==void 0&&(m.notified=p.notified),p.batch&&(m.batch=p.batch),p.history&&(m.history=p.history),p.notify&&(m.notify=p.notify),await this.updateProvenTxReq(f,m,g)}};qg.StorageProvider=u;function d(h){const f={model:"sat/kb",value:1};if(typeof h=="object"){if(h.model!=="sat/kb")throw new e.sdk.WERR_INVALID_PARAMETER("StorageFeeModel.model",'"sat/kb"');typeof h.value=="number"&&(f.value=h.value)}return f}return qg}var Y1={},o9;function $1e(){if(o9)return Y1;o9=1,Object.defineProperty(Y1,"__esModule",{value:!0}),Y1.StorageSyncReader=void 0;const t=Fn();let e=class{constructor(r,i){this.auth=r,this.storage=i}async makeAvailable(){if(await this.storage.makeAvailable(),this.auth.userId===void 0){const r=await this.storage.findUserByIdentityKey(this.auth.identityKey);if(!r)throw new t.sdk.WERR_UNAUTHORIZED;this.auth.userId=r.userId}return this.storage.getSettings()}destroy(){return this.storage.destroy()}async getSyncChunk(r){if(this.auth.userId||await this.makeAvailable(),r.identityKey!==this.auth.identityKey)throw new t.sdk.WERR_UNAUTHORIZED;return await this.storage.getSyncChunk(r)}};return Y1.StorageSyncReader=e,Y1}var Wp={},dA={},a9;function z1e(){return a9||(a9=1,Object.defineProperty(dA,"__esModule",{value:!0})),dA}var fA={},l9;function H1e(){return l9||(l9=1,Object.defineProperty(fA,"__esModule",{value:!0})),fA}var hA={},c9;function V1e(){return c9||(c9=1,Object.defineProperty(hA,"__esModule",{value:!0})),hA}var pA={},u9;function W1e(){return u9||(u9=1,Object.defineProperty(pA,"__esModule",{value:!0})),pA}var mA={},d9;function j1e(){return d9||(d9=1,Object.defineProperty(mA,"__esModule",{value:!0})),mA}var gA={},f9;function q1e(){return f9||(f9=1,Object.defineProperty(gA,"__esModule",{value:!0})),gA}var yA={},h9;function K1e(){return h9||(h9=1,Object.defineProperty(yA,"__esModule",{value:!0})),yA}var Z1={},p9;function G1e(){return p9||(p9=1,Object.defineProperty(Z1,"__esModule",{value:!0}),Z1.transactionColumnsWithoutRawTx=void 0,Z1.transactionColumnsWithoutRawTx=["created_at","updated_at","transactionId","userId","provenTxId","status","reference","isOutgoing","satoshis","version","lockTime","description","txid"]),Z1}var vA={},m9;function X1e(){return m9||(m9=1,Object.defineProperty(vA,"__esModule",{value:!0})),vA}var J1={},g9;function Y1e(){return g9||(g9=1,Object.defineProperty(J1,"__esModule",{value:!0}),J1.outputColumnsWithoutLockingScript=void 0,J1.outputColumnsWithoutLockingScript=["created_at","updated_at","outputId","userId","transactionId","basketId","spendable","change","vout","satoshis","providedBy","purpose","type","outputDescription","txid","senderIdentityKey","derivationPrefix","derivationSuffix","customInstructions","spentBy","sequenceNumber","spendingDescription","scriptLength","scriptOffset"]),J1}var bA={},y9;function Z1e(){return y9||(y9=1,Object.defineProperty(bA,"__esModule",{value:!0})),bA}var xA={},v9;function J1e(){return v9||(v9=1,Object.defineProperty(xA,"__esModule",{value:!0})),xA}var wA={},b9;function Q1e(){return b9||(b9=1,Object.defineProperty(wA,"__esModule",{value:!0})),wA}var _A={},x9;function exe(){return x9||(x9=1,Object.defineProperty(_A,"__esModule",{value:!0})),_A}var SA={},w9;function txe(){return w9||(w9=1,Object.defineProperty(SA,"__esModule",{value:!0})),SA}var EA={},_9;function nxe(){return _9||(_9=1,Object.defineProperty(EA,"__esModule",{value:!0})),EA}var S9;function rxe(){return S9||(S9=1,function(t){var e=Wp&&Wp.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,a)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=Wp&&Wp.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(z1e(),t),n(H1e(),t),n(V1e(),t),n(W1e(),t),n(j1e(),t),n(q1e(),t),n(K1e(),t),n(G1e(),t),n(X1e(),t),n(Y1e(),t),n(Z1e(),t),n(J1e(),t),n(Q1e(),t),n(exe(),t),n(txe(),t),n(nxe(),t)}(Wp)),Wp}var Q1={},E9;function ixe(){if(E9)return Q1;E9=1,Object.defineProperty(Q1,"__esModule",{value:!0}),Q1.StorageClient=void 0;const t=sr(),e=Fn();let n=class{constructor(i,s){this.nextId=1,this.authClient=new t.AuthFetch(i),this.endpointUrl=s}isStorageProvider(){return!1}async rpcCall(i,s){try{const o=this.nextId++,a={jsonrpc:"2.0",method:i,params:s,id:o};let c;try{c=await this.authClient.fetch(this.endpointUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})}catch(u){throw u}if(!c.ok)throw new Error(`WalletStorageClient rpcCall: network error ${c.status} ${c.statusText}`);const l=await c.json();if(l.error){const{code:u,message:d,data:h}=l.error,f=new Error(`RPC Error: ${d}`);throw f.code=u,f.data=h,f}return l.result}catch(o){throw o}}isAvailable(){return!!this.settings}getSettings(){if(!this.settings)throw new e.sdk.WERR_INVALID_OPERATION("call makeAvailable at least once before getSettings");return this.settings}async makeAvailable(){return this.settings||(this.settings=await this.rpcCall("makeAvailable",[])),this.settings}async destroy(){return this.rpcCall("destroy",[])}async migrate(i,s){return this.rpcCall("migrate",[i])}getServices(){throw new e.sdk.WERR_INVALID_OPERATION("getServices() not implemented in remote client. This method typically is not used remotely.")}setServices(i){}async internalizeAction(i,s){return this.rpcCall("internalizeAction",[i,s])}async createAction(i,s){return this.rpcCall("createAction",[i,s])}async processAction(i,s){return this.rpcCall("processAction",[i,s])}async abortAction(i,s){return this.rpcCall("abortAction",[i,s])}async findOrInsertUser(i){return this.rpcCall("findOrInsertUser",[i])}async findOrInsertSyncStateAuth(i,s,o){const a=await this.rpcCall("findOrInsertSyncStateAuth",[i,s,o]);return a.syncState=this.validateEntity(a.syncState,["when"]),a}async insertCertificateAuth(i,s){return await this.rpcCall("insertCertificateAuth",[i,s])}async listActions(i,s){return await this.rpcCall("listActions",[i,s])}async listOutputs(i,s){return await this.rpcCall("listOutputs",[i,s])}async listCertificates(i,s){return await this.rpcCall("listCertificates",[i,s])}async findCertificatesAuth(i,s){const o=await this.rpcCall("findCertificatesAuth",[i,s]);if(this.validateEntities(o),s.includeFields)for(const a of o)a.fields&&this.validateEntities(a.fields);return o}async findOutputBasketsAuth(i,s){const o=await this.rpcCall("findOutputBaskets",[i,s]);return this.validateEntities(o),o}async findOutputsAuth(i,s){const o=await this.rpcCall("findOutputsAuth",[i,s]);return this.validateEntities(o),o}async findProvenTxReqs(i){const s=await this.rpcCall("findProvenTxReqs",[i]);return this.validateEntities(s),s}async relinquishCertificate(i,s){return this.rpcCall("relinquishCertificate",[i,s])}async relinquishOutput(i,s){return this.rpcCall("relinquishOutput",[i,s])}async processSyncChunk(i,s){return await this.rpcCall("processSyncChunk",[i,s])}async getSyncChunk(i){const s=await this.rpcCall("getSyncChunk",[i]);return s.certificateFields&&(s.certificateFields=this.validateEntities(s.certificateFields)),s.certificates&&(s.certificates=this.validateEntities(s.certificates)),s.commissions&&(s.commissions=this.validateEntities(s.commissions)),s.outputBaskets&&(s.outputBaskets=this.validateEntities(s.outputBaskets)),s.outputTagMaps&&(s.outputTagMaps=this.validateEntities(s.outputTagMaps)),s.outputTags&&(s.outputTags=this.validateEntities(s.outputTags)),s.outputs&&(s.outputs=this.validateEntities(s.outputs)),s.provenTxReqs&&(s.provenTxReqs=this.validateEntities(s.provenTxReqs)),s.provenTxs&&(s.provenTxs=this.validateEntities(s.provenTxs)),s.transactions&&(s.transactions=this.validateEntities(s.transactions)),s.txLabelMaps&&(s.txLabelMaps=this.validateEntities(s.txLabelMaps)),s.txLabels&&(s.txLabels=this.validateEntities(s.txLabels)),s.user&&(s.user=this.validateEntity(s.user)),s}async updateProvenTxReqWithNewProvenTx(i){return await this.rpcCall("updateProvenTxReqWithNewProvenTx",[i])}async setActive(i,s){return this.rpcCall("setActive",[i,s])}validateDate(i){let s;return i instanceof Date?s=i:s=new Date(i),s}validateEntity(i,s){if(i.created_at=this.validateDate(i.created_at),i.updated_at=this.validateDate(i.updated_at),s)for(const o of s)i[o]&&(i[o]=this.validateDate(i[o]));for(const o of Object.keys(i)){const a=i[o];a===null?i[o]=void 0:Buffer.isBuffer(a)&&(i[o]=Array.from(a))}return i}validateEntities(i,s){for(let o=0;o<i.length;o++)i[o]=this.validateEntity(i[o],s);return i}};return Q1.StorageClient=n,Q1}var T9;function sxe(){return T9||(T9=1,function(t){var e=Hp&&Hp.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,a)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=Hp&&Hp.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(M1e(),t),n(U1e(),t),n($1e(),t),n(rxe(),t),n(Es(),t),n(ixe(),t)}(Hp)),Hp}var cc={},XE={},I9;function oxe(){if(I9)return XE;I9=1,Object.defineProperty(XE,"__esModule",{value:!0}),XE.acquireDirectCertificate=t;async function t(e,n,r){var i;const s=new Date,o={certificateId:0,created_at:s,updated_at:s,userId:n.userId,type:r.type,subject:r.subject,verifier:r.keyringRevealer==="certifier"?r.certifier:r.keyringRevealer,serialNumber:r.serialNumber,certifier:r.certifier,revocationOutpoint:r.revocationOutpoint,signature:r.signature,fields:[],isDeleted:!1};for(const[c,l]of Object.entries(r.fields))(i=o.fields)===null||i===void 0||i.push({certificateId:0,created_at:s,updated_at:s,userId:n.userId,fieldName:c,fieldValue:l,masterKey:r.keyringForSubject[c]||""});return await e.storage.insertCertificate(o),{type:r.type,subject:r.subject,serialNumber:r.serialNumber,certifier:r.certifier,revocationOutpoint:r.revocationOutpoint,signature:r.signature,fields:r.fields}}return XE}var YE={},P9;function axe(){if(P9)return YE;P9=1,Object.defineProperty(YE,"__esModule",{value:!0}),YE.proveCertificate=n;const t=sr(),e=Fn();async function n(r,i,s){const o={partial:{type:s.type,serialNumber:s.serialNumber,certifier:s.certifier,subject:s.subject,revocationOutpoint:s.revocationOutpoint,signature:s.signature},certifiers:[],types:[],limit:2,offset:0,privileged:!1},a=await r.storage.listCertificates(o);if(a.certificates.length!=1)throw new e.sdk.WERR_INVALID_PARAMETER("args","a unique certificate match");const c=a.certificates[0];return{keyringForVerifier:await t.MasterCertificate.createKeyringForVerifier(r,c.certifier,s.verifier,c.fields,s.fieldsToReveal,c.keyring,c.serialNumber,s.privileged,s.privilegedReason)}}return YE}var jp={},ZE={},C9;function lxe(){if(C9)return ZE;C9=1,Object.defineProperty(ZE,"__esModule",{value:!0}),ZE.buildSignableTransaction=r;const t=sr(),e=Fn(),n=qO();function r(i,s,o){var a;const c=o.getClientChangeKeyPair(),l=s.inputBEEF?t.Beef.fromBinary(s.inputBEEF):void 0,{inputs:u,outputs:d}=i,h=new t.Transaction(s.version,[],[],s.lockTime),f=Array(d.length);for(let x=0;x<d.length;x++){const S=d.findIndex(P=>P.vout===x);if(S<0)throw new e.sdk.WERR_INVALID_PARAMETER("output.vout",`sequential. ${x} is missing`);f[x]=S}for(let x=0;x<d.length;x++){const S=f[x],P=d[S];if(x!==P.vout)throw new e.sdk.WERR_INVALID_PARAMETER("output.vout",`equal to array index. ${P.vout} !== ${x}`);const _=P.providedBy==="storage"&&P.purpose==="change",I=_?(0,n.makeChangeLock)(P,i,s,c,o):(0,e.asBsvSdkScript)(P.lockingScript),C={satoshis:P.satoshis,lockingScript:I,change:_};h.addOutput(C)}if(d.length===0){const x={satoshis:0,lockingScript:t.Script.fromASM("OP_FALSE OP_RETURN 42"),change:!1};h.addOutput(x)}const p=[];for(const x of u){const S=x.vin!==void 0&&x.vin<s.inputs.length?s.inputs[x.vin]:void 0;p.push({argsInput:S,storageInput:x})}p.sort((x,S)=>x.storageInput.vin<S.storageInput.vin?-1:x.storageInput.vin===S.storageInput.vin?0:1);const g=[];let m=0;for(const{storageInput:x,argsInput:S}of p)if(S){const _=typeof S.unlockingScript=="string"?(0,e.asBsvSdkScript)(S.unlockingScript):new t.Script,I=s.isSignAction?(a=l==null?void 0:l.findTxid(S.outpoint.txid))===null||a===void 0?void 0:a.tx:void 0,C={sourceTXID:S.outpoint.txid,sourceOutputIndex:S.outpoint.vout,sourceTransaction:I,unlockingScript:_,sequence:S.sequenceNumber};h.addInput(C)}else{if(x.type!=="P2PKH")throw new e.sdk.WERR_INVALID_PARAMETER("type",`vin ${x.vin}, "${x.type}" is not a supported unlocking script type.`);g.push({vin:h.inputs.length,derivationPrefix:(0,e.verifyTruthy)(x.derivationPrefix),derivationSuffix:(0,e.verifyTruthy)(x.derivationSuffix),unlockerPubKey:x.senderIdentityKey,sourceSatoshis:x.sourceSatoshis,lockingScript:x.sourceLockingScript});const P={sourceTXID:x.sourceTxid,sourceOutputIndex:x.sourceVout,sourceTransaction:x.sourceTransaction?t.Transaction.fromBinary(x.sourceTransaction):void 0,unlockingScript:new t.Script,sequence:4294967295};h.addInput(P),m+=(0,e.verifyTruthy)(x.sourceSatoshis)}const y=d.filter(x=>x.purpose==="change").reduce((x,S)=>x+S.satoshis,0),b=m-y;return{tx:h,amount:b,pdi:g,log:""}}return ZE}var M9;function qO(){if(M9)return jp;M9=1,Object.defineProperty(jp,"__esModule",{value:!0}),jp.createAction=r,jp.makeChangeLock=a,jp.completeSignedTransaction=c,jp.processAction=u;const t=sr();sr();const e=Fn(),n=lxe();async function r(d,h,f){var p;const g={};let m;if(f.isNewTx){if(m=await i(d,f),f.isSignAction)return s(m,d,f);m.tx=await c(m,{},d),g.txid=m.tx.id("hex"),g.noSendChange=(p=m.dcr.noSendChangeOutputVouts)===null||p===void 0?void 0:p.map(x=>`${g.txid}.${x}`),f.options.returnTXIDOnly||(g.tx=(0,e.makeAtomicBeef)(m.tx,m.dcr.inputBeef))}const{sendWithResults:y,notDelayedResults:b}=await u(m,d,h,f);return g.sendWithResults=y,g.notDelayedResults=b,g}async function i(d,h){const f=l(h),p=await d.storage.createAction(f),g=p.reference,{tx:m,amount:y,pdi:b}=(0,n.buildSignableTransaction)(p,h,d);return{reference:g,dcr:p,args:h,amount:y,tx:m,pdi:b}}function s(d,h,f){var p;if(!d.dcr.inputBeef)throw new e.sdk.WERR_INTERNAL("prior.dcr.inputBeef must be valid");const g=d.tx.id("hex"),m={noSendChange:f.isNoSend?(p=d.dcr.noSendChangeOutputVouts)===null||p===void 0?void 0:p.map(y=>`${g}.${y}`):void 0,signableTransaction:{reference:d.dcr.reference,tx:o(d.tx,d.dcr.inputBeef)}};return h.pendingSignActions[m.signableTransaction.reference]=d,m}function o(d,h){const f=new t.Beef;for(const p of d.inputs){if(!p.sourceTransaction)throw new e.sdk.WERR_INTERNAL("Every signableTransaction input must have a sourceTransaction");f.mergeRawTx(p.sourceTransaction.toBinary())}return f.mergeRawTx(d.toBinary()),f.toBinaryAtomic(d.id("hex"))}function a(d,h,f,p,g){const m=h.derivationPrefix,y=(0,e.verifyTruthy)(d.derivationSuffix);return new e.ScriptTemplateBRC29({derivationPrefix:m,derivationSuffix:y,keyDeriver:g.keyDeriver}).lock(p.privateKey,p.publicKey)}async function c(d,h,f){for(const[p,g]of Object.entries(h)){const m=Number(p),y=d.args.inputs[m],b=d.tx.inputs[m];if(!y||!b||y.unlockingScript||!Number.isInteger(y.unlockingScriptLength))throw new e.sdk.WERR_INVALID_PARAMETER("args","spend does not correspond to prior input with valid unlockingScriptLength.");if(g.unlockingScript.length/2>y.unlockingScriptLength)throw new e.sdk.WERR_INVALID_PARAMETER("args",`spend unlockingScript length ${g.unlockingScript.length} exceeds expected length ${y.unlockingScriptLength}`);b.unlockingScript=(0,e.asBsvSdkScript)(g.unlockingScript),g.sequenceNumber!==void 0&&(b.sequence=g.sequenceNumber)}for(const p of d.pdi){const g=new e.ScriptTemplateBRC29({derivationPrefix:p.derivationPrefix,derivationSuffix:p.derivationSuffix,keyDeriver:f.keyDeriver}),m=f.getClientChangeKeyPair(),y=m.privateKey,b=p.unlockerPubKey||m.publicKey,x=p.sourceSatoshis,S=(0,e.asBsvSdkScript)(p.lockingScript),P=g.unlock(y,b,x,S),_=d.tx.inputs[p.vin];_.unlockingScriptTemplate=P}return await d.tx.sign(),d.tx}function l(d){let h=d;if(!h.inputs.every(f=>f.unlockingScript===void 0)){h={...d,inputs:[]};for(const f of d.inputs){const p={...f,unlockingScriptLength:f.unlockingScript!==void 0?f.unlockingScript.length:f.unlockingScriptLength};delete p.unlockingScript,h.inputs.push(p)}}return h}async function u(d,h,f,p){const g={isNewTx:p.isNewTx,isSendWith:p.isSendWith,isNoSend:p.isNoSend,isDelayed:p.isDelayed,reference:d?d.reference:void 0,txid:d?d.tx.id("hex"):void 0,rawTx:d?d.tx.toBinary():void 0,sendWith:p.isSendWith?p.options.sendWith:[]};return await h.storage.processAction(g)}return jp}var Kg={},A9;function cxe(){if(A9)return Kg;A9=1,Object.defineProperty(Kg,"__esModule",{value:!0}),Kg.signAction=i,Kg.makeAtomicBeef=s,Kg.completeSignedTransaction=o;const t=sr(),e=Fn(),n=qO(),r=oh();async function i(c,l,u){const d=c.pendingSignActions[u.reference];if(!d)throw new e.sdk.WERR_NOT_IMPLEMENTED("recovery of out-of-session signAction reference data is not yet implemented.");if(!d.dcr.inputBeef)throw new e.sdk.WERR_INTERNAL("prior.dcr.inputBeef must be valid");const h=a(d.args,u);d.tx=await o(d,h.spends,c);const{sendWithResults:f,notDelayedResults:p}=await(0,n.processAction)(d,c,l,h);return{txid:d.tx.id("hex"),tx:h.options.returnTXIDOnly?void 0:s(d.tx,d.dcr.inputBeef),sendWithResults:f,notDelayedResults:p}}function s(c,l){return Array.isArray(l)&&(l=t.Beef.fromBinary(l)),l.mergeTransaction(c),l.toBinaryAtomic(c.id("hex"))}async function o(c,l,u){for(const[d,h]of Object.entries(l)){const f=Number(d),p=c.args.inputs[f],g=c.tx.inputs[f];if(!p||!g||p.unlockingScript||!Number.isInteger(p.unlockingScriptLength))throw new e.sdk.WERR_INVALID_PARAMETER("args","spend does not correspond to prior input with valid unlockingScriptLength.");if(h.unlockingScript.length/2>p.unlockingScriptLength)throw new e.sdk.WERR_INVALID_PARAMETER("args",`spend unlockingScript length ${h.unlockingScript.length} exceeds expected length ${p.unlockingScriptLength}`);g.unlockingScript=(0,e.asBsvSdkScript)(h.unlockingScript),h.sequenceNumber!==void 0&&(g.sequence=h.sequenceNumber)}for(const d of c.pdi){const h=new e.ScriptTemplateBRC29({derivationPrefix:d.derivationPrefix,derivationSuffix:d.derivationSuffix,keyDeriver:u.keyDeriver}),f=u.getClientChangeKeyPair(),p=f.privateKey,g=d.unlockerPubKey||f.publicKey,m=d.sourceSatoshis,y=(0,e.asBsvSdkScript)(d.lockingScript),b=h.unlock(p,g,m,y),x=c.tx.inputs[d.vin];x.unlockingScriptTemplate=b}return await c.tx.sign(),c.tx}function a(c,l){const u=l.options||(l.options={});return u.acceptDelayedBroadcast===void 0&&(u.acceptDelayedBroadcast=c.options.acceptDelayedBroadcast),u.returnTXIDOnly===void 0&&(u.returnTXIDOnly=c.options.returnTXIDOnly),u.noSend===void 0&&(u.noSend=c.options.noSend),u.sendWith===void 0&&(u.sendWith=c.options.sendWith),(0,r.validateSignActionArgs)(l)}return Kg}var JE={},R9;function uxe(){if(R9)return JE;R9=1,Object.defineProperty(JE,"__esModule",{value:!0}),JE.internalizeAction=n;const t=sr(),e=Fn();async function n(r,i,s){const o=e.sdk.validateInternalizeActionArgs(s),{ab:a,tx:c,txid:l}=await f(),u=[2,"3241645161d8"];for(const p of o.outputs){if(p.outputIndex<0||p.outputIndex>=c.outputs.length)throw new e.sdk.WERR_INVALID_PARAMETER("outputIndex",`a valid output index in range 0 to ${c.outputs.length-1}`);switch(p.protocol){case"basket insertion":break;case"wallet payment":h(p);break;default:throw new e.sdk.WERR_INTERNAL(`unexpected protocol ${p.protocol}`)}}return await r.storage.internalizeAction(s);function h(p,g){const m=p.paymentRemittance,y=c.outputs[p.outputIndex];if(!m)throw new e.sdk.WERR_INVALID_PARAMETER("paymentRemitance",`valid for protocol ${p.protocol}`);const b=`${m.derivationPrefix} ${m.derivationSuffix}`,x=r.keyDeriver.derivePrivateKey(u,b,m.senderIdentityKey),S=new t.P2PKH().lock(x.toAddress());if(y.lockingScript.toHex()!==S.toHex())throw new e.sdk.WERR_INVALID_PARAMETER("paymentRemitance","locked by script conforming to BRC-29")}async function f(){const p=t.Beef.fromBinary(o.tx);if(!await p.verify(await r.getServices().getChainTracker(),!1)||!p.atomicTxid)throw new e.sdk.WERR_INVALID_PARAMETER("tx","valid AtomicBEEF");const m=p.atomicTxid,y=p.findTxid(m);if(!y)throw new e.sdk.WERR_INVALID_PARAMETER("tx",`valid AtomicBEEF with newest txid of ${m}`);const b=y.tx;return{ab:p,tx:b,txid:m}}}return JE}var TA={},k9;function eq(){return k9||(k9=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WalletSettingsManager=t.TESTNET_DEFAULT_SETTINGS=t.DEFAULT_SETTINGS=void 0;const e=sr(),n="wallet settings";t.DEFAULT_SETTINGS={trustSettings:{trustLevel:2,trustedCertifiers:[{name:"Metanet Trust Services",description:"Registry for protocols, baskets, and certificates types",iconUrl:"https://bsvblockchain.org/favicon.ico",identityKey:"03daf815fe38f83da0ad83b5bedc520aa488aef5cbc93a93c67a7fe60406cbffe8",trust:4},{name:"SocialCert",description:"Certifies social media handles, phone numbers and emails",iconUrl:"https://socialcert.net/favicon.ico",trust:3,identityKey:"02cf6cdf466951d8dfc9e7c9367511d0007ed6fba35ed42d425cc412fd6cfd4a17"}]},theme:{mode:"dark"}};const r={"Babbage Trust Services":"03d0b36b5c98b000ec9ffed9a2cf005e279244edf6a19cf90545cdebe873162761",IdentiCert:"036dc48522aba1705afbb43df3c04dbd1da373b6154341a875bceaa2a3e7f21528",SocialCert:"02cf6cdf466951d8dfc9e7c9367511d0007ed6fba35ed42d425cc412fd6cfd4a17"};t.TESTNET_DEFAULT_SETTINGS={...t.DEFAULT_SETTINGS,trustSettings:{...t.DEFAULT_SETTINGS.trustSettings,trustedCertifiers:t.DEFAULT_SETTINGS.trustSettings.trustedCertifiers.map(s=>({...s,identityKey:r[s.name]||s.identityKey}))}};class i{constructor(o,a={defaultSettings:t.DEFAULT_SETTINGS}){this.wallet=o,this.config=a,this.kv=new e.LocalKVStore(o,n,!0)}async get(){return JSON.parse(await this.kv.get("settings",JSON.stringify(this.config.defaultSettings)))}async set(o){await this.kv.set("settings",JSON.stringify(o))}async delete(){await this.kv.remove("settings")}}t.WalletSettingsManager=i}(TA)),TA}var IA={},O9;function dxe(){return O9||(O9=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.parseResults=t.queryOverlay=t.transformVerifiableCertificatesWithTrust=void 0;const e=sr(),n=(s,o)=>{const a={},c={};o.forEach(u=>{const{subject:d,certifier:h}=u;if(!d||!h)return;if(!c[h]){const g=s.trustedCertifiers.find(m=>m.identityKey===h);if(!g)return;c[h]=g}const f={name:c[h].name,iconUrl:c[h].iconUrl||"",description:c[h].description,trust:c[h].trust},p={...u,signature:u.signature,decryptedFields:u.decryptedFields,publiclyRevealedKeyring:u.keyring,certifierInfo:f};a[d]||(a[d]={totalTrust:0,members:[]}),a[d].totalTrust+=f.trust,a[d].members.push(p)});const l=[];return Object.values(a).forEach(u=>{u.totalTrust>=s.trustLevel&&l.push(...u.members)}),l.sort((u,d)=>d.certifierInfo.trust-u.certifierInfo.trust),{totalCertificates:l.length,certificates:l}};t.transformVerifiableCertificatesWithTrust=n;const r=async(s,o)=>{const a=await o.query({service:"ls_identity",query:s});return await(0,t.parseResults)(a)};t.queryOverlay=r;const i=async s=>{if(s.type==="output-list"){const o=[];for(const a of s.outputs)try{const c=e.Transaction.fromBEEF(a.beef),l=e.PushDrop.decode(c.outputs[a.outputIndex].lockingScript),u=JSON.parse(e.Utils.toUTF8(l.fields[0])),d=new e.VerifiableCertificate(u.type,u.serialNumber,u.subject,u.certifier,u.revocationOutpoint,u.fields,u.keyring,u.signature),h=await d.decryptFields(new e.ProtoWallet("anyone"));await d.verify(),d.decryptedFields=h,o.push(d)}catch(c){console.error(c)}return o}return[]};t.parseResults=i}(IA)),IA}var N9;function fxe(){if(N9)return cc;N9=1;var t=cc&&cc.__createBinding||(Object.create?function(P,_,I,C){C===void 0&&(C=I);var A=Object.getOwnPropertyDescriptor(_,I);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[I]}}),Object.defineProperty(P,C,A)}:function(P,_,I,C){C===void 0&&(C=I),P[C]=_[I]}),e=cc&&cc.__setModuleDefault||(Object.create?function(P,_){Object.defineProperty(P,"default",{enumerable:!0,value:_})}:function(P,_){P.default=_}),n=cc&&cc.__importStar||function(){var P=function(_){return P=Object.getOwnPropertyNames||function(I){var C=[];for(var A in I)Object.prototype.hasOwnProperty.call(I,A)&&(C[C.length]=A);return C},P(_)};return function(_){if(_&&_.__esModule)return _;var I={};if(_!=null)for(var C=P(_),A=0;A<C.length;A++)C[A]!=="default"&&t(I,_,C[A]);return e(I,_),I}}();Object.defineProperty(cc,"__esModule",{value:!0}),cc.Wallet=void 0;const r=sr(),i=n(oh()),s=oxe(),o=axe(),a=qO(),c=cxe(),l=uxe(),u=eq(),d=dxe(),h=Jj(),f=oh(),p=PP(),g=kj();function m(P){return P.isWalletSigner}let y=class{constructor(_,I,C,A){this.includeAllSourceTransactions=!0,this.autoKnownTxids=!1,this.returnTxidOnly=!1,this.randomVals=void 0;const M=m(_)?{chain:_.chain,keyDeriver:_.keyDeriver,storage:_.storage,services:I,monitor:C,privilegedKeyManager:A}:_;if(M.storage._authId.identityKey!=M.keyDeriver.identityKey)throw new i.WERR_INVALID_PARAMETER("storage",`authenticated as the same identityKey (${M.storage._authId.identityKey}) as the keyDeriver (${M.keyDeriver.identityKey}).`);this.settingsManager=M.settingsManager||new u.WalletSettingsManager(this),this.chain=M.chain,this.lookupResolver=M.lookupResolver||new r.LookupResolver({networkPreset:(0,p.toWalletNetwork)(this.chain)}),this.keyDeriver=M.keyDeriver,this.storage=M.storage,this.proto=new r.ProtoWallet(M.keyDeriver),this.services=M.services,this.monitor=M.monitor,this.privilegedKeyManager=M.privilegedKeyManager,this.identityKey=this.keyDeriver.identityKey,this.pendingSignActions={},this.userParty=`user ${this.getClientChangeKeyPair().publicKey}`,this.beef=new r.BeefParty([this.userParty]),this.trustSelf="known",this.services&&this.storage.setServices(this.services)}async destroy(){await this.storage.destroy(),this.privilegedKeyManager&&await this.privilegedKeyManager.destroyKey()}getClientChangeKeyPair(){return{privateKey:this.keyDeriver.rootKey.toString(),publicKey:this.keyDeriver.rootKey.toPublicKey().toString()}}async getIdentityKey(){return(await this.getPublicKey({identityKey:!0})).publicKey}getPublicKey(_,I){if(_.privileged){if(!this.privilegedKeyManager)throw new Error("Privileged operations require the Wallet to be configured with a privileged key manager.");return this.privilegedKeyManager.getPublicKey(_)}return this.proto.getPublicKey(_)}revealCounterpartyKeyLinkage(_,I){if(_.privileged){if(!this.privilegedKeyManager)throw new Error("Privileged operations require the Wallet to be configured with a privileged key manager.");return this.privilegedKeyManager.revealCounterpartyKeyLinkage(_)}return this.proto.revealCounterpartyKeyLinkage(_)}revealSpecificKeyLinkage(_,I){if(_.privileged){if(!this.privilegedKeyManager)throw new Error("Privileged operations require the Wallet to be configured with a privileged key manager.");return this.privilegedKeyManager.revealSpecificKeyLinkage(_)}return this.proto.revealSpecificKeyLinkage(_)}encrypt(_,I){if(_.privileged){if(!this.privilegedKeyManager)throw new Error("Privileged operations require the Wallet to be configured with a privileged key manager.");return this.privilegedKeyManager.encrypt(_)}return this.proto.encrypt(_)}decrypt(_,I){if(_.privileged){if(!this.privilegedKeyManager)throw new Error("Privileged operations require the Wallet to be configured with a privileged key manager.");return this.privilegedKeyManager.decrypt(_)}return this.proto.decrypt(_)}createHmac(_,I){if(_.privileged){if(!this.privilegedKeyManager)throw new Error("Privileged operations require the Wallet to be configured with a privileged key manager.");return this.privilegedKeyManager.createHmac(_)}return this.proto.createHmac(_)}verifyHmac(_,I){if(_.privileged){if(!this.privilegedKeyManager)throw new Error("Privileged operations require the Wallet to be configured with a privileged key manager.");return this.privilegedKeyManager.verifyHmac(_)}return this.proto.verifyHmac(_)}createSignature(_,I){if(_.privileged){if(!this.privilegedKeyManager)throw new Error("Privileged operations require the Wallet to be configured with a privileged key manager.");return this.privilegedKeyManager.createSignature(_)}return this.proto.createSignature(_)}verifySignature(_,I){if(_.privileged){if(!this.privilegedKeyManager)throw new Error("Privileged operations require the Wallet to be configured with a privileged key manager.");return this.privilegedKeyManager.verifySignature(_)}return this.proto.verifySignature(_)}getServices(){if(!this.services)throw new i.WERR_INVALID_PARAMETER("services","valid in constructor arguments to be retreived here.");return this.services}getKnownTxids(_){if(_)for(const A of _)this.beef.mergeTxidOnly(A);return this.beef.sortTxs().valid}getStorageIdentity(){const _=this.storage.getSettings();return{storageIdentityKey:_.storageIdentityKey,storageName:_.storageName}}validateAuthAndArgs(_,I){const C=I(_),A={identityKey:this.identityKey};return{vargs:C,auth:A}}async listActions(_,I){i.validateOriginator(I);const{vargs:C}=this.validateAuthAndArgs(_,i.validateListActionsArgs);return await this.storage.listActions(C)}get storageParty(){return`storage ${this.getStorageIdentity().storageIdentityKey}`}async listOutputs(_,I){i.validateOriginator(I);const{vargs:C}=this.validateAuthAndArgs(_,i.validateListOutputsArgs);this.autoKnownTxids&&!C.knownTxids&&(C.knownTxids=this.getKnownTxids());const A=await this.storage.listOutputs(C);return A.BEEF&&(this.beef.mergeBeefFromParty(this.storageParty,A.BEEF),A.BEEF=this.verifyReturnedTxidOnlyBEEF(A.BEEF)),A}async listCertificates(_,I){i.validateOriginator(I);const{vargs:C}=this.validateAuthAndArgs(_,i.validateListCertificatesArgs);return await this.storage.listCertificates(C)}async acquireCertificate(_,I){if(i.validateOriginator(I),_.acquisitionProtocol==="direct"){const{auth:C,vargs:A}=this.validateAuthAndArgs(_,i.validateAcquireDirectCertificateArgs);A.subject=(await this.getPublicKey({identityKey:!0,privileged:_.privileged,privilegedReason:_.privilegedReason})).publicKey;try{await new r.MasterCertificate(A.type,A.serialNumber,A.subject,A.certifier,A.revocationOutpoint,A.fields,A.keyringForSubject,A.signature).verify(),await r.MasterCertificate.decryptFields(this,A.keyringForSubject,A.fields,A.certifier,A.privileged,A.privilegedReason)}catch(k){const O=i.WalletError.fromUnknown(k);throw new i.WERR_INVALID_PARAMETER("args",`valid encrypted and signed certificate and keyring from revealer. ${O.name}: ${O.message}`)}return await(0,s.acquireDirectCertificate)(this,C,A)}if(_.acquisitionProtocol==="issuance"){const{auth:C,vargs:A}=this.validateAuthAndArgs(_,i.validateAcquireIssuanceCertificateArgs),M=await(0,r.createNonce)(this,A.certifier),k=new r.AuthFetch(this),{certificateFields:O,masterKeyring:B}=await r.MasterCertificate.createCertificateFields(this,A.certifier,A.fields),$=await k.fetch(`${A.certifierUrl}/signCertificate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientNonce:M,type:A.type,fields:O,masterKeyring:B})});if($.headers.get("x-bsv-auth-identity-key")!==A.certifier)throw new Error(`Invalid certifier! Expected: ${A.certifier}, Received: ${$.headers.get("x-bsv-auth-identity-key")}`);const{certificate:U,serverNonce:q}=await $.json();if(!U)throw new Error("No certificate received from certifier!");if(!q)throw new Error("No serverNonce received from certifier!");const K=new r.Certificate(U.type,U.serialNumber,U.subject,U.certifier,U.revocationOutpoint,U.fields,U.signature);await(0,r.verifyNonce)(q,this,A.certifier);const{valid:V}=await this.verifyHmac({hmac:r.Utils.toArray(K.serialNumber,"base64"),data:r.Utils.toArray(M+q,"base64"),protocolID:[2,"certificate issuance"],keyID:q+M,counterparty:A.certifier});if(!V)throw new Error("Invalid serialNumber");if(K.type!==A.type)throw new Error(`Invalid certificate type! Expected: ${A.type}, Received: ${K.type}`);if(K.subject!==this.identityKey)throw new Error(`Invalid certificate subject! Expected: ${this.identityKey}, Received: ${K.subject}`);if(K.certifier!==A.certifier)throw new Error(`Invalid certifier! Expected: ${A.certifier}, Received: ${K.certifier}`);if(!K.revocationOutpoint)throw new Error("Invalid revocationOutpoint!");if(Object.keys(K.fields).length!==Object.keys(O).length)throw new Error("Fields mismatch! Objects have different numbers of keys.");for(const G of Object.keys(O)){if(!(G in K.fields))throw new Error(`Missing field: ${G} in certificate.fields`);if(K.fields[G]!==O[G])throw new Error(`Invalid field! Expected: ${O[G]}, Received: ${K.fields[G]}`)}return await K.verify(),await r.MasterCertificate.decryptFields(this,B,U.fields,A.certifier),await(0,s.acquireDirectCertificate)(this,C,{...U,keyringRevealer:"certifier",keyringForSubject:B,privileged:A.privileged})}throw new i.WERR_INVALID_PARAMETER("acquisitionProtocol",`valid.${_.acquisitionProtocol} is unrecognized.`)}async relinquishCertificate(_,I){return i.validateOriginator(I),this.validateAuthAndArgs(_,i.validateRelinquishCertificateArgs),await this.storage.relinquishCertificate(_),{relinquished:!0}}async proveCertificate(_,I){I=i.validateOriginator(I);const{auth:C,vargs:A}=this.validateAuthAndArgs(_,i.validateProveCertificateArgs);return await(0,o.proveCertificate)(this,C,A)}async discoverByIdentityKey(_,I){i.validateOriginator(I),this.validateAuthAndArgs(_,i.validateDiscoverByIdentityKeyArgs);const C=(await this.settingsManager.get()).trustSettings,A=await(0,d.queryOverlay)({identityKey:_.identityKey,certifiers:C.trustedCertifiers.map(M=>M.identityKey)},this.lookupResolver);return A?(0,d.transformVerifiableCertificatesWithTrust)(C,A):{totalCertificates:0,certificates:[]}}async discoverByAttributes(_,I){i.validateOriginator(I),this.validateAuthAndArgs(_,i.validateDiscoverByAttributesArgs);const C=(await this.settingsManager.get()).trustSettings,A=await(0,d.queryOverlay)({attributes:_.attributes,certifiers:C.trustedCertifiers.map(M=>M.identityKey)},this.lookupResolver);return A?(0,d.transformVerifiableCertificatesWithTrust)(C,A):{totalCertificates:0,certificates:[]}}verifyReturnedTxidOnly(_){if(this.returnTxidOnly)return _;const I=_.txs.filter(C=>C.isTxidOnly).map(C=>C.txid);for(const C of I){_.findTxid(C);const A=this.beef.findAtomicTransaction(C);if(!A)throw new i.WERR_INTERNAL;_.mergeTransaction(A)}for(const C of _.txs)if(C.isTxidOnly)throw new i.WERR_INTERNAL;return _}verifyReturnedTxidOnlyAtomicBEEF(_){if(this.returnTxidOnly)return _;const I=r.Beef.fromBinary(_);if(!I.atomicTxid)throw new i.WERR_INTERNAL;return this.verifyReturnedTxidOnly(I).toBinaryAtomic(I.atomicTxid)}verifyReturnedTxidOnlyBEEF(_){if(this.returnTxidOnly)return _;const I=r.Beef.fromBinary(_);return this.verifyReturnedTxidOnly(I).toBinary()}async createAction(_,I){var C;i.validateOriginator(I),_.options||(_.options={}),(C=_.options).trustSelf||(C.trustSelf=this.trustSelf),this.autoKnownTxids&&!_.options.knownTxids&&(_.options.knownTxids=this.getKnownTxids(_.options.knownTxids));const{auth:A,vargs:M}=this.validateAuthAndArgs(_,i.validateCreateActionArgs);M.labels.indexOf(f.specOpThrowReviewActions)>=0&&S(),M.includeAllSourceTransactions=this.includeAllSourceTransactions,this.randomVals&&this.randomVals.length>1&&(M.randomVals=[...this.randomVals]);const k=await(0,a.createAction)(this,A,M);return k.tx&&this.beef.mergeBeefFromParty(this.storageParty,k.tx),k.tx&&(k.tx=this.verifyReturnedTxidOnlyAtomicBEEF(k.tx)),M.isDelayed||b(k),k}async signAction(_,I){i.validateOriginator(I);const{auth:C,vargs:A}=this.validateAuthAndArgs(_,i.validateSignActionArgs),M=await(0,c.signAction)(this,C,_);return A.isDelayed||x(M),M.tx&&(M.tx=this.verifyReturnedTxidOnlyAtomicBEEF(M.tx)),M}async abortAction(_,I){i.validateOriginator(I);const{auth:C}=this.validateAuthAndArgs(_,i.validateAbortActionArgs);return await this.storage.abortAction(_)}async internalizeAction(_,I){i.validateOriginator(I);const{auth:C,vargs:A}=this.validateAuthAndArgs(_,i.validateInternalizeActionArgs);return await(0,l.internalizeAction)(this,C,_)}async relinquishOutput(_,I){i.validateOriginator(I);const{vargs:C}=this.validateAuthAndArgs(_,i.validateRelinquishOutputArgs);return await this.storage.relinquishOutput(_),{relinquished:!0}}async isAuthenticated(_,I){return i.validateOriginator(I),{authenticated:!0}}async waitForAuthentication(_,I){return i.validateOriginator(I),{authenticated:!0}}async getHeight(_,I){return i.validateOriginator(I),{height:await this.getServices().getHeight()}}async getHeaderForHeight(_,I){i.validateOriginator(I);const C=await this.getServices().getHeaderForHeight(_.height);return{header:r.Utils.toHex(C)}}async getNetwork(_,I){return i.validateOriginator(I),{network:(0,p.toWalletNetwork)(this.chain)}}async getVersion(_,I){return i.validateOriginator(I),{version:"wallet-brc100-1.0.0"}}async sweepTo(_){const I=(0,p.randomBytesBase64)(8),C=(0,p.randomBytesBase64)(8),A=this.keyDeriver,M=new g.ScriptTemplateBRC29({derivationPrefix:I,derivationSuffix:C,keyDeriver:A}),k="sweep",O=h.maxPossibleSatoshis,B=await this.createAction({outputs:[{lockingScript:M.lock(A.rootKey.toString(),_.identityKey).toHex(),satoshis:O,outputDescription:k,tags:["relinquish"],customInstructions:JSON.stringify({derivationPrefix:I,derivationSuffix:C,type:"BRC29"})}],options:{randomizeOutputs:!1,acceptDelayedBroadcast:!1},labels:[k],description:k});await _.internalizeAction({tx:B.tx,outputs:[{outputIndex:0,protocol:"wallet payment",paymentRemittance:{derivationPrefix:I,derivationSuffix:C,senderIdentityKey:this.identityKey}}],description:k,labels:[k]})}async balanceAndUtxos(_="default"){const I={total:0,utxos:[]};let C=0;for(;;){const A=await this.listOutputs({basket:_,limit:1e3,offset:C});if(A.totalOutputs===0)break;for(const M of A.outputs)I.total+=M.satoshis,I.utxos.push({satoshis:M.satoshis,outpoint:M.outpoint});C+=A.outputs.length}return I}async balance(){const _={basket:f.specOpWalletBalance};return(await this.listOutputs(_)).totalOutputs}async reviewSpendableOutputs(_=!1,I=!1,C){const A={...C||{},basket:f.specOpInvalidChange};return A.tags||(A.tags=[]),_&&A.tags.push("all"),I&&A.tags.push("release"),await this.listOutputs(A)}async setWalletChangeParams(_,I){const C={basket:f.specOpSetWalletChangeParams,tags:[_.toString(),I.toString()]};await this.listOutputs(C)}async listNoSendActions(_,I=!1){const{vargs:C}=this.validateAuthAndArgs(_,i.validateListActionsArgs);return C.labels.push(f.specOpNoSendActions),I&&C.labels.push("abort"),await this.storage.listActions(C)}async listFailedActions(_,I=!1){const{vargs:C}=this.validateAuthAndArgs(_,i.validateListActionsArgs);return C.labels.push(f.specOpFailedActions),I&&C.labels.push("unfail"),await this.storage.listActions(C)}};cc.Wallet=y;function b(P){const _=P.notDelayedResults,I=P.sendWithResults;if(!(!_||!I||I.every(C=>C.status==="unproven")))throw new i.WERR_REVIEW_ACTIONS(_,I,P.txid,P.tx,P.noSendChange)}function x(P){const _=P.notDelayedResults,I=P.sendWithResults;if(!(!_||!I||I.every(C=>C.status==="unproven")))throw new i.WERR_REVIEW_ACTIONS(_,I,P.txid,P.tx)}function S(){const _=r.Beef.fromBinary(r.Utils.fromBase58("gno9MC7VXii1KoCkc2nsVyYJpqzN3dhBzYATETJcys62emMKfpBof4R7GozwYEaSapUtnNvqQ57aaYYjm3U2dv9eUJ1sV46boHkQgppYmAz9YH8FdZduV8aJayPViaKcyPmbDhEw6UW8TM5iFZLXNs7HBnJHUKCeTdNK4FUEL7vAugxAV9WUUZ43BZjJk2SmSeps9TCXjt1Ci9fKWp3d9QSoYvTpxwzyUFHjRKtbUgwq55ZfkBp5bV2Bpz9qSuKywKewW7Hh4S1nCUScwwzpKDozb3zic1V9p2k8rQxoPsRxjUJ8bjhNDdsN8d7KukFuc3n47fXzdWttvnxwsujLJRGnQbgJuknQqx3KLf5kJXHzwjG6TzigZk2t24qeB6d3hbYiaDr2fFkUJBL3tukTHhfNkQYRXuz3kucVDzvejHyqJaF51mXG8BjMN5aQj91ZJXCaPVqkMWCzmvyaqmXMdRiJdSAynhXbQK91xf6RwdNhz1tg5f9B6oJJMhsi9UYSVymmax8VLKD9AKzBCBDcfyD83m3jyS1VgKGZn3SkQmr6bsoWq88L3GsMnnmYUGogvdAYarTqg3pzkjCMxHzmJBMN6ofnUk8c1sRTXQue7BbyUaN5uZu3KW6CmFsEfpuqVvnqFW93TU1jrPP2S8yz8AexAnARPCKE8Yz7RfVaT6RCavwQKL3u5iookwRWEZXW1QWmM37yJWHD87SjVynyg327a1CLwcBxmE2CB48QeNVGyQki4CTQMqw2o8TMhDPJej1g68oniAjBcxBLSCs7KGvK3k7AfrHbCMULX9CTibYhCjdFjbsbBoocqJpxxcvkMo1fEEiAzZuiBVZQDYktDdTVbhKHvYkW25HcYX75NJrpNAhm7AjFeKLzEVxqAQkMfvTufpESNRZF4kQqg2Rg8h2ajcKTd5cpEPwXCrZLHm4EaZEmZVbg3QNfGhn7BJu1bHMtLqPD4y8eJxm2uGrW6saf6qKYmmu64F8A667NbD4yskPRQ1S863VzwGpxxmgLc1Ta3R46jEqsAoRDoZVUaCgBBZG3Yg1CTgi1EVBMXU7qvY4n3h8o2FLCEMWY4KadnV3iD4FbcdCmg4yxBosNAZgbPjhgGjCimjh4YsLd9zymGLmivmz2ZBg5m3xaiXT9NN81X9C1JUujd")),C=_.txs.slice(-1)[0].txid;debugger;throw new i.WERR_REVIEW_ACTIONS([{txid:C,status:"doubleSpend",competingTxs:[C],competingBeef:_.toBinary()}],[{txid:C,status:"failed"}],C,_.toBinaryAtomic(C),[`${C}.0`])}return cc}var L9;function Fn(){return L9||(L9=1,function(t){var e=ac&&ac.__createBinding||(Object.create?function(s,o,a,c){c===void 0&&(c=a);var l=Object.getOwnPropertyDescriptor(o,a);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(s,c,l)}:function(s,o,a,c){c===void 0&&(c=a),s[c]=o[a]}),n=ac&&ac.__setModuleDefault||(Object.create?function(s,o){Object.defineProperty(s,"default",{enumerable:!0,value:o})}:function(s,o){s.default=o}),r=ac&&ac.__importStar||function(){var s=function(o){return s=Object.getOwnPropertyNames||function(a){var c=[];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(c[c.length]=l);return c},s(o)};return function(o){if(o&&o.__esModule)return o;var a={};if(o!=null)for(var c=s(o),l=0;l<c.length;l++)c[l]!=="default"&&e(a,o,c[l]);return n(a,o),a}}(),i=ac&&ac.__exportStar||function(s,o){for(var a in s)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&e(o,s,a)};Object.defineProperty(t,"__esModule",{value:!0}),t.sdk=void 0,t.sdk=r(oh()),i(Nj(),t),i(Xbe(),t),i(Ybe(),t),i(Lj(),t),i(Zbe(),t),i(Jbe(),t),i(Qbe(),t),i(e1e(),t),i(jO(),t),i(d1e(),t),i(WO(),t),i(f1e(),t),i(sxe(),t),i(fxe(),t)}(ac)),ac}var D9;function hxe(){if(D9)return Jb;D9=1,Object.defineProperty(Jb,"__esModule",{value:!0}),Jb.CurrencyConverter=void 0;const t=sr(),e=Aj(),n=Fn(),r=eq(),i=5*60*1e3,s=async()=>{var a;return(a=(await new r.WalletSettingsManager(new t.WalletClient).get()).currency)!==null&&a!==void 0?a:"SATS"};let o=class{constructor(){this.services=new n.Services("main"),this.exchangeRates={usdPerBsv:0,gbpPerUsd:0,eurPerUsd:0},this.preferredCurrency="USD"}async initialize(){await this.fetchExchangeRates(),this.preferredCurrency=await s(),setInterval(()=>this.fetchExchangeRates(),i)}getCurrencySymbol(){return{USD:"$",GBP:"",EUR:"",BSV:"BSV",SATS:"SATS"}[this.preferredCurrency]||this.preferredCurrency}async fetchExchangeRates(){try{const c=await this.services.getBsvExchangeRate(),l=await this.services.getFiatExchangeRate("GBP"),u=await this.services.getFiatExchangeRate("EUR");return this.exchangeRates={usdPerBsv:c,gbpPerUsd:l,eurPerUsd:u},this.exchangeRates}catch(c){throw console.error(c),new Error("Failed to fetch exchange rates.")}}async convertAmount(c,l){const u=c.toString(),d=await s();let h=parseFloat(u.replace(/[^0-9.-]+/g,"")),f=u.replace(/[\d.,\s]+/g,"").trim();f=f||(u.includes(".")?"BSV":"SATS");let p=this.convertCurrency(h,f,d);if(p===null)throw new Error("Unsupported currency or conversion error");return(0,e.formatAmountWithCurrency)(p,d,l)}async convertToSatoshis(c){const l=this.convertCurrency(c,this.preferredCurrency,"SATS");return l===null?(console.error("Unsupported currency or conversion error:",this.preferredCurrency),null):Math.ceil(l)}convertCurrency(c,l,u){if(l.toUpperCase()===u.toUpperCase())return c;let d;switch(l.toUpperCase()){case"SATS":d=c/1e8*this.exchangeRates.usdPerBsv;break;case"BSV":d=c*this.exchangeRates.usdPerBsv;break;case"GBP":d=c/this.exchangeRates.gbpPerUsd;break;case"EUR":d=c/this.exchangeRates.eurPerUsd;break;case"USD":d=c;break;default:throw new Error("Currency not supported!")}switch(u.toUpperCase()){case"GBP":return d*this.exchangeRates.gbpPerUsd;case"EUR":return d*this.exchangeRates.eurPerUsd;case"BSV":return d/this.exchangeRates.usdPerBsv;case"SATS":return d/this.exchangeRates.usdPerBsv*1e8;case"USD":return d;default:throw new Error("Currency not supported!")}}};return Jb.CurrencyConverter=o,Jb}var B9;function KO(){return B9||(B9=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatAmountWithCurrency=t.CurrencyConverter=void 0;var e=hxe();Object.defineProperty(t,"CurrencyConverter",{enumerable:!0,get:function(){return e.CurrencyConverter}});var n=Aj();Object.defineProperty(t,"formatAmountWithCurrency",{enumerable:!0,get:function(){return n.formatAmountWithCurrency}})}(XM)),XM}var QE={exports:{}},F9;function GO(){if(F9)return QE.exports;F9=1;var t=uu();function e(n,r,i){var s=typeof r=="function";t.useEffect(function(){var o,a=!0,c=n(function(){return a});return Promise.resolve(c).then(function(l){o=l}),function(){a=!1,s&&r(o)}},s?i:r)}return QE.exports=e,QE.exports.useAsyncEffect=e,QE.exports}const Jy={black:"#000",white:"#fff"},im={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},pxe={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},sm={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},mxe={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",A100:"#b388ff",A200:"#7c4dff",A400:"#651fff",A700:"#6200ea"},gxe={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},om={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},am={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},yxe={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",A100:"#84ffff",A200:"#18ffff",A400:"#00e5ff",A700:"#00b8d4"},vxe={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",A100:"#a7ffeb",A200:"#64ffda",A400:"#1de9b6",A700:"#00bfa5"},lm={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},bxe={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",A100:"#ccff90",A200:"#b2ff59",A400:"#76ff03",A700:"#64dd17"},xxe={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",A100:"#f4ff81",A200:"#eeff41",A400:"#c6ff00",A700:"#aeea00"},wxe={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",A100:"#ffff8d",A200:"#ffff00",A400:"#ffea00",A700:"#ffd600"},_xe={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",A100:"#ffe57f",A200:"#ffd740",A400:"#ffc400",A700:"#ffab00"},ay={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Sxe={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",A100:"#ff9e80",A200:"#ff6e40",A400:"#ff3d00",A700:"#dd2c00"},Exe={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723",A100:"#d7ccc8",A200:"#bcaaa4",A400:"#8d6e63",A700:"#5d4037"},tq={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Txe={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238",A100:"#cfd8dc",A200:"#b0bec5",A400:"#78909c",A700:"#455a64"},Ixe=Object.freeze(Object.defineProperty({__proto__:null,amber:_xe,blue:om,blueGrey:Txe,brown:Exe,common:Jy,cyan:yxe,deepOrange:Sxe,deepPurple:mxe,green:lm,grey:tq,indigo:gxe,lightBlue:am,lightGreen:bxe,lime:xxe,orange:ay,pink:pxe,purple:sm,red:im,teal:vxe,yellow:wxe},Symbol.toStringTag,{value:"Module"}));function Po(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}const Pxe=Object.freeze(Object.defineProperty({__proto__:null,default:Po},Symbol.toStringTag,{value:"Module"})),Kd="$$material";let gk;typeof document=="object"&&(gk=b$({key:"css",prepend:!0}));function nq(t){const{injectFirst:e,children:n}=t;return e&&gk?H.jsx(xJ,{value:gk,children:n}):n}function Cxe(t){return t==null||Object.keys(t).length===0}function Wx(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(Cxe(i)?n:i):e;return H.jsx(T$,{styles:r})}function XO(t,e){return WT(t,e)}const rq=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))},Mxe=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:Wx,StyledEngineProvider:nq,ThemeContext:lh,css:Io,default:XO,internal_processStyles:rq,keyframes:Zi},Symbol.toStringTag,{value:"Module"}));function Td(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function iq(t){if(N.isValidElement(t)||!Td(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=iq(t[n])}),e}function ki(t,e,n={clone:!0}){const r=n.clone?z({},t):t;return Td(t)&&Td(e)&&Object.keys(e).forEach(i=>{N.isValidElement(e[i])?r[i]=e[i]:Td(e[i])&&Object.prototype.hasOwnProperty.call(t,i)&&Td(t[i])?r[i]=ki(t[i],e[i],n):n.clone?r[i]=Td(e[i])?iq(e[i]):e[i]:r[i]=e[i]}),r}const Axe=Object.freeze(Object.defineProperty({__proto__:null,default:ki,isPlainObject:Td},Symbol.toStringTag,{value:"Module"})),Rxe=["values","unit","step"],kxe=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>z({},n,{[r.key]:r.val}),{})};function YO(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=t,i=rt(t,Rxe),s=kxe(e),o=Object.keys(s);function a(h){return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n})`}function c(h){return`@media (max-width:${(typeof e[h]=="number"?e[h]:h)-r/100}${n})`}function l(h,f){const p=o.indexOf(f);return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n}) and (max-width:${(p!==-1&&typeof e[o[p]]=="number"?e[o[p]]:f)-r/100}${n})`}function u(h){return o.indexOf(h)+1<o.length?l(h,o[o.indexOf(h)+1]):a(h)}function d(h){const f=o.indexOf(h);return f===0?a(o[1]):f===o.length-1?c(o[f]):l(h,o[o.indexOf(h)+1]).replace("@media","@media not all and")}return z({keys:o,values:s,up:a,down:c,between:l,only:u,not:d,unit:n},i)}const Oxe={borderRadius:4};function jx(t,e){return e?ki(t,e,{clone:!1}):t}const ZO={xs:0,sm:600,md:900,lg:1200,xl:1536},U9={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${ZO[t]}px)`};function ia(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const s=r.breakpoints||U9;return e.reduce((o,a,c)=>(o[s.up(s.keys[c])]=n(e[c]),o),{})}if(typeof e=="object"){const s=r.breakpoints||U9;return Object.keys(e).reduce((o,a)=>{if(Object.keys(s.values||ZO).indexOf(a)!==-1){const c=s.up(a);o[c]=n(e[a],a)}else{const c=a;o[c]=e[c]}return o},{})}return n(e)}function sq(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((r,i)=>{const s=t.up(i);return r[s]={},r},{}))||{}}function oq(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function Nxe(t,...e){const n=sq(t),r=[n,...e].reduce((i,s)=>ki(i,s),{});return oq(Object.keys(n),r)}function Lxe(t,e){if(typeof t!="object")return{};const n={},r=Object.keys(e);return Array.isArray(t)?r.forEach((i,s)=>{s<t.length&&(n[i]=!0)}):r.forEach(i=>{t[i]!=null&&(n[i]=!0)}),n}function Mm({values:t,breakpoints:e,base:n}){const r=n||Lxe(t,e),i=Object.keys(r);if(i.length===0)return t;let s;return i.reduce((o,a,c)=>(Array.isArray(t)?(o[a]=t[c]!=null?t[c]:t[s],s=c):typeof t=="object"?(o[a]=t[a]!=null?t[a]:t[s],s=a):o[a]=t,o),{})}function qe(t){if(typeof t!="string")throw new Error(Po(7));return t.charAt(0).toUpperCase()+t.slice(1)}const Dxe=Object.freeze(Object.defineProperty({__proto__:null,default:qe},Symbol.toStringTag,{value:"Module"}));function Qy(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function Q2(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=Qy(t,n)||r,e&&(i=e(i,r,t)),i}function Di(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,s=o=>{if(o[e]==null)return null;const a=o[e],c=o.theme,l=Qy(c,r)||{};return ia(o,a,d=>{let h=Q2(l,i,d);return d===h&&typeof d=="string"&&(h=Q2(l,i,`${e}${d==="default"?"":qe(d)}`,d)),n===!1?h:{[n]:h}})};return s.propTypes={},s.filterProps=[e],s}function Bxe(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const Fxe={m:"margin",p:"padding"},Uxe={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},$9={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},$xe=Bxe(t=>{if(t.length>2)if($9[t])t=$9[t];else return[t];const[e,n]=t.split(""),r=Fxe[e],i=Uxe[n]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),JO=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],QO=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...JO,...QO];function g_(t,e,n,r){var i;const s=(i=Qy(t,e,!1))!=null?i:n;return typeof s=="number"?o=>typeof o=="string"?o:s*o:Array.isArray(s)?o=>typeof o=="string"?o:s[o]:typeof s=="function"?s:()=>{}}function e4(t){return g_(t,"spacing",8)}function Bm(t,e){if(typeof e=="string"||e==null)return e;const n=Math.abs(e),r=t(n);return e>=0?r:typeof r=="number"?-r:`-${r}`}function zxe(t,e){return n=>t.reduce((r,i)=>(r[i]=Bm(e,n),r),{})}function Hxe(t,e,n,r){if(e.indexOf(n)===-1)return null;const i=$xe(n),s=zxe(i,r),o=t[n];return ia(t,o,s)}function aq(t,e){const n=e4(t.theme);return Object.keys(t).map(r=>Hxe(t,e,r,n)).reduce(jx,{})}function Ti(t){return aq(t,JO)}Ti.propTypes={};Ti.filterProps=JO;function Ii(t){return aq(t,QO)}Ii.propTypes={};Ii.filterProps=QO;function lq(t=8){if(t.mui)return t;const e=e4({spacing:t}),n=(...r)=>(r.length===0?[1]:r).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function CP(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),n=r=>Object.keys(r).reduce((i,s)=>e[s]?jx(i,e[s](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function cl(t){return typeof t!="number"?t:`${t}px solid`}function Il(t,e){return Di({prop:t,themeKey:"borders",transform:e})}const Vxe=Il("border",cl),Wxe=Il("borderTop",cl),jxe=Il("borderRight",cl),qxe=Il("borderBottom",cl),Kxe=Il("borderLeft",cl),Gxe=Il("borderColor"),Xxe=Il("borderTopColor"),Yxe=Il("borderRightColor"),Zxe=Il("borderBottomColor"),Jxe=Il("borderLeftColor"),Qxe=Il("outline",cl),ewe=Il("outlineColor"),MP=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=g_(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:Bm(e,r)});return ia(t,t.borderRadius,n)}return null};MP.propTypes={};MP.filterProps=["borderRadius"];CP(Vxe,Wxe,jxe,qxe,Kxe,Gxe,Xxe,Yxe,Zxe,Jxe,MP,Qxe,ewe);const AP=t=>{if(t.gap!==void 0&&t.gap!==null){const e=g_(t.theme,"spacing",8),n=r=>({gap:Bm(e,r)});return ia(t,t.gap,n)}return null};AP.propTypes={};AP.filterProps=["gap"];const RP=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=g_(t.theme,"spacing",8),n=r=>({columnGap:Bm(e,r)});return ia(t,t.columnGap,n)}return null};RP.propTypes={};RP.filterProps=["columnGap"];const kP=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=g_(t.theme,"spacing",8),n=r=>({rowGap:Bm(e,r)});return ia(t,t.rowGap,n)}return null};kP.propTypes={};kP.filterProps=["rowGap"];const twe=Di({prop:"gridColumn"}),nwe=Di({prop:"gridRow"}),rwe=Di({prop:"gridAutoFlow"}),iwe=Di({prop:"gridAutoColumns"}),swe=Di({prop:"gridAutoRows"}),owe=Di({prop:"gridTemplateColumns"}),awe=Di({prop:"gridTemplateRows"}),lwe=Di({prop:"gridTemplateAreas"}),cwe=Di({prop:"gridArea"});CP(AP,RP,kP,twe,nwe,rwe,iwe,swe,owe,awe,lwe,cwe);function Cy(t,e){return e==="grey"?e:t}const uwe=Di({prop:"color",themeKey:"palette",transform:Cy}),dwe=Di({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Cy}),fwe=Di({prop:"backgroundColor",themeKey:"palette",transform:Cy});CP(uwe,dwe,fwe);function Ca(t){return t<=1&&t!==0?`${t*100}%`:t}const hwe=Di({prop:"width",transform:Ca}),t4=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,i;const s=((r=t.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[n])||ZO[n];return s?((i=t.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${s}${t.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:Ca(n)}};return ia(t,t.maxWidth,e)}return null};t4.filterProps=["maxWidth"];const pwe=Di({prop:"minWidth",transform:Ca}),mwe=Di({prop:"height",transform:Ca}),gwe=Di({prop:"maxHeight",transform:Ca}),ywe=Di({prop:"minHeight",transform:Ca});Di({prop:"size",cssProperty:"width",transform:Ca});Di({prop:"size",cssProperty:"height",transform:Ca});const vwe=Di({prop:"boxSizing"});CP(hwe,t4,pwe,mwe,gwe,ywe,vwe);const wv={border:{themeKey:"borders",transform:cl},borderTop:{themeKey:"borders",transform:cl},borderRight:{themeKey:"borders",transform:cl},borderBottom:{themeKey:"borders",transform:cl},borderLeft:{themeKey:"borders",transform:cl},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:cl},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:MP},color:{themeKey:"palette",transform:Cy},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Cy},backgroundColor:{themeKey:"palette",transform:Cy},p:{style:Ii},pt:{style:Ii},pr:{style:Ii},pb:{style:Ii},pl:{style:Ii},px:{style:Ii},py:{style:Ii},padding:{style:Ii},paddingTop:{style:Ii},paddingRight:{style:Ii},paddingBottom:{style:Ii},paddingLeft:{style:Ii},paddingX:{style:Ii},paddingY:{style:Ii},paddingInline:{style:Ii},paddingInlineStart:{style:Ii},paddingInlineEnd:{style:Ii},paddingBlock:{style:Ii},paddingBlockStart:{style:Ii},paddingBlockEnd:{style:Ii},m:{style:Ti},mt:{style:Ti},mr:{style:Ti},mb:{style:Ti},ml:{style:Ti},mx:{style:Ti},my:{style:Ti},margin:{style:Ti},marginTop:{style:Ti},marginRight:{style:Ti},marginBottom:{style:Ti},marginLeft:{style:Ti},marginX:{style:Ti},marginY:{style:Ti},marginInline:{style:Ti},marginInlineStart:{style:Ti},marginInlineEnd:{style:Ti},marginBlock:{style:Ti},marginBlockStart:{style:Ti},marginBlockEnd:{style:Ti},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:AP},rowGap:{style:kP},columnGap:{style:RP},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Ca},maxWidth:{style:t4},minWidth:{transform:Ca},height:{transform:Ca},maxHeight:{transform:Ca},minHeight:{transform:Ca},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function bwe(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function xwe(t,e){return typeof t=="function"?t(e):t}function cq(){function t(n,r,i,s){const o={[n]:r,theme:i},a=s[n];if(!a)return{[n]:r};const{cssProperty:c=n,themeKey:l,transform:u,style:d}=a;if(r==null)return null;if(l==="typography"&&r==="inherit")return{[n]:r};const h=Qy(i,l)||{};return d?d(o):ia(o,r,p=>{let g=Q2(h,u,p);return p===g&&typeof p=="string"&&(g=Q2(h,u,`${n}${p==="default"?"":qe(p)}`,p)),c===!1?g:{[c]:g}})}function e(n){var r;const{sx:i,theme:s={}}=n||{};if(!i)return null;const o=(r=s.unstable_sxConfig)!=null?r:wv;function a(c){let l=c;if(typeof c=="function")l=c(s);else if(typeof c!="object")return c;if(!l)return null;const u=sq(s.breakpoints),d=Object.keys(u);let h=u;return Object.keys(l).forEach(f=>{const p=xwe(l[f],s);if(p!=null)if(typeof p=="object")if(o[f])h=jx(h,t(f,p,s,o));else{const g=ia({theme:s},p,m=>({[f]:m}));bwe(g,p)?h[f]=e({sx:p,theme:s}):h=jx(h,g)}else h=jx(h,t(f,p,s,o))}),oq(d,h)}return Array.isArray(i)?i.map(a):a(i)}return e}const ph=cq();ph.filterProps=["sx"];function uq(t,e){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(t).replace(/(\[[^\]]+\])/,"*:where($1)")]:e}:n.palette.mode===t?e:{}}const wwe=["breakpoints","palette","spacing","shape"];function Vm(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:s={}}=t,o=rt(t,wwe),a=YO(n),c=lq(i);let l=ki({breakpoints:a,direction:"ltr",components:{},palette:z({mode:"light"},r),spacing:c,shape:z({},Oxe,s)},o);return l.applyStyles=uq,l=e.reduce((u,d)=>ki(u,d),l),l.unstable_sxConfig=z({},wv,o==null?void 0:o.unstable_sxConfig),l.unstable_sx=function(d){return ph({sx:d,theme:this})},l}const _we=Object.freeze(Object.defineProperty({__proto__:null,default:Vm,private_createBreakpoints:YO,unstable_applyStyles:uq},Symbol.toStringTag,{value:"Module"}));function Swe(t){return Object.keys(t).length===0}function n4(t=null){const e=N.useContext(lh);return!e||Swe(e)?t:e}const Ewe=Vm();function y_(t=Ewe){return n4(t)}function Twe({styles:t,themeId:e,defaultTheme:n={}}){const r=y_(n),i=typeof t=="function"?t(e&&r[e]||r):t;return H.jsx(Wx,{styles:i})}const Iwe=["sx"],Pwe=t=>{var e,n;const r={systemProps:{},otherProps:{}},i=(e=t==null||(n=t.theme)==null?void 0:n.unstable_sxConfig)!=null?e:wv;return Object.keys(t).forEach(s=>{i[s]?r.systemProps[s]=t[s]:r.otherProps[s]=t[s]}),r};function _v(t){const{sx:e}=t,n=rt(t,Iwe),{systemProps:r,otherProps:i}=Pwe(n);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...o)=>{const a=e(...o);return Td(a)?z({},r,a):r}:s=z({},r,e),z({},i,{sx:s})}const Cwe=Object.freeze(Object.defineProperty({__proto__:null,default:ph,extendSxProp:_v,unstable_createStyleFunctionSx:cq,unstable_defaultSxConfig:wv},Symbol.toStringTag,{value:"Module"})),z9=t=>t,Mwe=()=>{let t=z9;return{configure(e){t=e},generate(e){return t(e)},reset(){t=z9}}},r4=Mwe(),Awe=["className","component"];function Rwe(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,s=XO("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(ph);return N.forwardRef(function(c,l){const u=y_(n),d=_v(c),{className:h,component:f="div"}=d,p=rt(d,Awe);return H.jsx(s,z({as:f,ref:l,className:Fe(h,i?i(r):r),theme:e&&u[e]||u},p))})}const kwe={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function xt(t,e,n="Mui"){const r=kwe[e];return r?`${n}-${r}`:`${r4.generate(t)}-${e}`}function wt(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=xt(t,i,n)}),r}var PA={exports:{}},Dr={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H9;function Owe(){if(H9)return Dr;H9=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),l=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.for("react.view_transition"),f=Symbol.for("react.client.reference");function p(g){if(typeof g=="object"&&g!==null){var m=g.$$typeof;switch(m){case t:switch(g=g.type,g){case n:case i:case r:case c:case l:case h:return g;default:switch(g=g&&g.$$typeof,g){case o:case a:case d:case u:return g;case s:return g;default:return m}}case e:return m}}}return Dr.ContextConsumer=s,Dr.ContextProvider=o,Dr.Element=t,Dr.ForwardRef=a,Dr.Fragment=n,Dr.Lazy=d,Dr.Memo=u,Dr.Portal=e,Dr.Profiler=i,Dr.StrictMode=r,Dr.Suspense=c,Dr.SuspenseList=l,Dr.isContextConsumer=function(g){return p(g)===s},Dr.isContextProvider=function(g){return p(g)===o},Dr.isElement=function(g){return typeof g=="object"&&g!==null&&g.$$typeof===t},Dr.isForwardRef=function(g){return p(g)===a},Dr.isFragment=function(g){return p(g)===n},Dr.isLazy=function(g){return p(g)===d},Dr.isMemo=function(g){return p(g)===u},Dr.isPortal=function(g){return p(g)===e},Dr.isProfiler=function(g){return p(g)===i},Dr.isStrictMode=function(g){return p(g)===r},Dr.isSuspense=function(g){return p(g)===c},Dr.isSuspenseList=function(g){return p(g)===l},Dr.isValidElementType=function(g){return typeof g=="string"||typeof g=="function"||g===n||g===i||g===r||g===c||g===l||typeof g=="object"&&g!==null&&(g.$$typeof===d||g.$$typeof===u||g.$$typeof===o||g.$$typeof===s||g.$$typeof===a||g.$$typeof===f||g.getModuleId!==void 0)},Dr.typeOf=p,Dr}var V9;function Nwe(){return V9||(V9=1,PA.exports=Owe()),PA.exports}var W9=Nwe();const Lwe=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function dq(t){const e=`${t}`.match(Lwe);return e&&e[1]||""}function fq(t,e=""){return t.displayName||t.name||dq(t)||e}function j9(t,e,n){const r=fq(e);return t.displayName||(r!==""?`${n}(${r})`:n)}function Dwe(t){if(t!=null){if(typeof t=="string")return t;if(typeof t=="function")return fq(t,"Component");if(typeof t=="object")switch(t.$$typeof){case W9.ForwardRef:return j9(t,t.render,"ForwardRef");case W9.Memo:return j9(t,t.type,"memo");default:return}}}const Bwe=Object.freeze(Object.defineProperty({__proto__:null,default:Dwe,getFunctionName:dq},Symbol.toStringTag,{value:"Module"})),Fwe=["ownerState"],Uwe=["variants"],$we=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function zwe(t){return Object.keys(t).length===0}function Hwe(t){return typeof t=="string"&&t.charCodeAt(0)>96}function CA(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const Vwe=Vm(),Wwe=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function eT({defaultTheme:t,theme:e,themeId:n}){return zwe(e)?t:e[n]||e}function jwe(t){return t?(e,n)=>n[t]:null}function NT(t,e){let{ownerState:n}=e,r=rt(e,Fwe);const i=typeof t=="function"?t(z({ownerState:n},r)):t;if(Array.isArray(i))return i.flatMap(s=>NT(s,z({ownerState:n},r)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:s=[]}=i;let a=rt(i,Uwe);return s.forEach(c=>{let l=!0;typeof c.props=="function"?l=c.props(z({ownerState:n},r,n)):Object.keys(c.props).forEach(u=>{(n==null?void 0:n[u])!==c.props[u]&&r[u]!==c.props[u]&&(l=!1)}),l&&(Array.isArray(a)||(a=[a]),a.push(typeof c.style=="function"?c.style(z({ownerState:n},r,n)):c.style))}),a}return i}function qwe(t={}){const{themeId:e,defaultTheme:n=Vwe,rootShouldForwardProp:r=CA,slotShouldForwardProp:i=CA}=t,s=o=>ph(z({},o,{theme:eT(z({},o,{defaultTheme:n,themeId:e}))}));return s.__mui_systemSx=!0,(o,a={})=>{rq(o,P=>P.filter(_=>!(_!=null&&_.__mui_systemSx)));const{name:c,slot:l,skipVariantsResolver:u,skipSx:d,overridesResolver:h=jwe(Wwe(l))}=a,f=rt(a,$we),p=u!==void 0?u:l&&l!=="Root"&&l!=="root"||!1,g=d||!1;let m,y=CA;l==="Root"||l==="root"?y=r:l?y=i:Hwe(o)&&(y=void 0);const b=XO(o,z({shouldForwardProp:y,label:m},f)),x=P=>typeof P=="function"&&P.__emotion_real!==P||Td(P)?_=>NT(P,z({},_,{theme:eT({theme:_.theme,defaultTheme:n,themeId:e})})):P,S=(P,..._)=>{let I=x(P);const C=_?_.map(x):[];c&&h&&C.push(k=>{const O=eT(z({},k,{defaultTheme:n,themeId:e}));if(!O.components||!O.components[c]||!O.components[c].styleOverrides)return null;const B=O.components[c].styleOverrides,$={};return Object.entries(B).forEach(([U,q])=>{$[U]=NT(q,z({},k,{theme:O}))}),h(k,$)}),c&&!p&&C.push(k=>{var O;const B=eT(z({},k,{defaultTheme:n,themeId:e})),$=B==null||(O=B.components)==null||(O=O[c])==null?void 0:O.variants;return NT({variants:$},z({},k,{theme:B}))}),g||C.push(s);const A=C.length-_.length;if(Array.isArray(P)&&A>0){const k=new Array(A).fill("");I=[...P,...k],I.raw=[...P.raw,...k]}const M=b(I,...C);return o.muiName&&(M.muiName=o.muiName),M};return b.withConfig&&(S.withConfig=b.withConfig),S}}const i4=qwe();function ev(t,e){const n=z({},e);return Object.keys(t).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=z({},t[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=t[r]||{},s=e[r];n[r]={},!s||!Object.keys(s)?n[r]=i:!i||!Object.keys(i)?n[r]=s:(n[r]=z({},s),Object.keys(i).forEach(o=>{n[r][o]=ev(i[o],s[o])}))}else n[r]===void 0&&(n[r]=t[r])}),n}function s4(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:ev(e.components[n].defaultProps,r)}function OP({props:t,name:e,defaultTheme:n,themeId:r}){let i=y_(n);return r&&(i=i[r]||i),s4({theme:i,name:e,props:t})}const fs=typeof window<"u"?N.useLayoutEffect:N.useEffect;function Kwe(t,e,n,r,i){const[s,o]=N.useState(()=>i&&n?n(t).matches:r?r(t).matches:e);return fs(()=>{let a=!0;if(!n)return;const c=n(t),l=()=>{a&&o(c.matches)};return l(),c.addListener(l),()=>{a=!1,c.removeListener(l)}},[t,n]),s}const hq=N.useSyncExternalStore;function Gwe(t,e,n,r,i){const s=N.useCallback(()=>e,[e]),o=N.useMemo(()=>{if(i&&n)return()=>n(t).matches;if(r!==null){const{matches:u}=r(t);return()=>u}return s},[s,t,r,i,n]),[a,c]=N.useMemo(()=>{if(n===null)return[s,()=>()=>{}];const u=n(t);return[()=>u.matches,d=>(u.addListener(d),()=>{u.removeListener(d)})]},[s,n,t]);return hq(c,a,o)}function pq(t,e={}){const n=n4(),r=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:i=!1,matchMedia:s=r?window.matchMedia:null,ssrMatchMedia:o=null,noSsr:a=!1}=s4({name:"MuiUseMediaQuery",props:e,theme:n});let c=typeof t=="function"?t(n):t;return c=c.replace(/^@media( ?)/m,""),(hq!==void 0?Gwe:Kwe)(c,i,s,o,a)}function Id(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}const Xwe=Object.freeze(Object.defineProperty({__proto__:null,default:Id},Symbol.toStringTag,{value:"Module"}));function o4(t,e=0,n=1){return Id(t,e,n)}function mq(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Ywe(t){const e=t.toString(16);return e.length===1?`0${e}`:e}function Gd(t){if(t.type)return t;if(t.charAt(0)==="#")return Gd(mq(t));const e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(Po(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error(Po(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:n,values:r,colorSpace:i}}function v_(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.indexOf("rgb")!==-1?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function Zwe(t){if(t.indexOf("#")===0)return t;const{values:e}=Gd(t);return`#${e.map((n,r)=>Ywe(r===3?Math.round(255*n):n)).join("")}`}function gq(t){t=Gd(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),o=(l,u=(l+n/30)%12)=>i-s*Math.max(Math.min(u-3,9-u,1),-1);let a="rgb";const c=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return t.type==="hsla"&&(a+="a",c.push(e[3])),v_({type:a,values:c})}function eI(t){t=Gd(t);let e=t.type==="hsl"||t.type==="hsla"?Gd(gq(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function Jwe(t,e){const n=eI(t),r=eI(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function yy(t,e){return t=Gd(t),e=o4(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,v_(t)}function yq(t,e){if(t=Gd(t),e=o4(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]*=1-e;return v_(t)}function vq(t,e){if(t=Gd(t),e=o4(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return v_(t)}function Qwe(t,e=.15){return eI(t)>.5?yq(t,e):vq(t,e)}function tI(...t){return t.reduce((e,n)=>n==null?e:function(...i){e.apply(this,i),n.apply(this,i)},()=>{})}function Sv(t,e=166){let n;function r(...i){const s=()=>{t.apply(this,i)};clearTimeout(n),n=setTimeout(s,e)}return r.clear=()=>{clearTimeout(n)},r}function e_e(t,e){return()=>null}function Dd(t,e){var n,r;return N.isValidElement(t)&&e.indexOf((n=t.type.muiName)!=null?n:(r=t.type)==null||(r=r._payload)==null||(r=r.value)==null?void 0:r.muiName)!==-1}function Fr(t){return t&&t.ownerDocument||document}function so(t){return Fr(t).defaultView||window}function t_e(t,e){return()=>null}function Mw(t,e){typeof t=="function"?t(e):t&&(t.current=e)}let q9=0;function n_e(t){const[e,n]=N.useState(t),r=t||e;return N.useEffect(()=>{e==null&&(q9+=1,n(`mui-${q9}`))},[e]),r}const K9=HT.useId;function _c(t){if(K9!==void 0){const e=K9();return t??e}return n_e(t)}function r_e(t,e,n,r,i){return null}function ta({controlled:t,default:e,name:n,state:r="value"}){const{current:i}=N.useRef(t!==void 0),[s,o]=N.useState(e),a=i?t:s,c=N.useCallback(l=>{i||o(l)},[]);return[a,c]}function Yr(t){const e=N.useRef(t);return fs(()=>{e.current=t}),N.useRef((...n)=>(0,e.current)(...n)).current}function or(...t){return N.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{Mw(n,e)})},t)}const G9={};function i_e(t,e){const n=N.useRef(G9);return n.current===G9&&(n.current=t(e)),n}const s_e=[];function o_e(t){N.useEffect(t,s_e)}class b_{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new b_}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}}function Ad(){const t=i_e(b_.create).current;return o_e(t.disposeEffect),t}let NP=!0,yk=!1;const a_e=new b_,l_e={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function c_e(t){const{type:e,tagName:n}=t;return!!(n==="INPUT"&&l_e[e]&&!t.readOnly||n==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function u_e(t){t.metaKey||t.altKey||t.ctrlKey||(NP=!0)}function MA(){NP=!1}function d_e(){this.visibilityState==="hidden"&&yk&&(NP=!0)}function f_e(t){t.addEventListener("keydown",u_e,!0),t.addEventListener("mousedown",MA,!0),t.addEventListener("pointerdown",MA,!0),t.addEventListener("touchstart",MA,!0),t.addEventListener("visibilitychange",d_e,!0)}function h_e(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch{}return NP||c_e(e)}function Ev(){const t=N.useCallback(i=>{i!=null&&f_e(i.ownerDocument)},[]),e=N.useRef(!1);function n(){return e.current?(yk=!0,a_e.start(100,()=>{yk=!1}),e.current=!1,!0):!1}function r(i){return h_e(i)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:r,onBlur:n,ref:t}}function bq(t){const e=t.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}let Gg;function xq(){if(Gg)return Gg;const t=document.createElement("div"),e=document.createElement("div");return e.style.width="10px",e.style.height="1px",t.appendChild(e),t.dir="rtl",t.style.fontSize="14px",t.style.width="4px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.overflow="scroll",document.body.appendChild(t),Gg="reverse",t.scrollLeft>0?Gg="default":(t.scrollLeft=1,t.scrollLeft===0&&(Gg="negative")),document.body.removeChild(t),Gg}function p_e(t,e){const n=t.scrollLeft;if(e!=="rtl")return n;switch(xq()){case"negative":return t.scrollWidth-t.clientWidth+n;case"reverse":return t.scrollWidth-t.clientWidth-n;default:return n}}const a4=t=>{const e=N.useRef({});return N.useEffect(()=>{e.current=t}),e.current};function wq(t){return N.Children.toArray(t).filter(e=>N.isValidElement(e))}const _q={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function _t(t,e,n=void 0){const r={};return Object.keys(t).forEach(i=>{r[i]=t[i].reduce((s,o)=>{if(o){const a=e(o);a!==""&&s.push(a),n&&n[o]&&s.push(n[o])}return s},[]).join(" ")}),r}function vc(t){return typeof t=="string"}function vy(t,e,n){return t===void 0||vc(t)?e:z({},e,{ownerState:z({},e.ownerState,n)})}function Am(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function X9(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function Sq(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:s}=t;if(!e){const f=Fe(n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),p=z({},n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),g=z({},n,i,r);return f.length>0&&(g.className=f),Object.keys(p).length>0&&(g.style=p),{props:g,internalRef:void 0}}const o=Am(z({},i,r)),a=X9(r),c=X9(i),l=e(o),u=Fe(l==null?void 0:l.className,n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),d=z({},l==null?void 0:l.style,n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),h=z({},l,n,c,a);return u.length>0&&(h.className=u),Object.keys(d).length>0&&(h.style=d),{props:h,internalRef:l.ref}}function Eq(t,e,n){return typeof t=="function"?t(e,n):t}const m_e=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function mi(t){var e;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:s=!1}=t,o=rt(t,m_e),a=s?{}:Eq(r,i),{props:c,internalRef:l}=Sq(z({},o,{externalSlotProps:a})),u=or(l,a==null?void 0:a.ref,(e=t.additionalProps)==null?void 0:e.ref);return vy(n,z({},c,{ref:u}),i)}function Zd(t){if(parseInt(N.version,10)>=19){var e;return(t==null||(e=t.props)==null?void 0:e.ref)||null}return(t==null?void 0:t.ref)||null}const Tq=N.createContext(null);function l4(){return N.useContext(Tq)}const g_e=typeof Symbol=="function"&&Symbol.for,y_e=g_e?Symbol.for("mui.nested"):"__THEME_NESTED__";function v_e(t,e){return typeof e=="function"?e(t):z({},t,e)}function b_e(t){const{children:e,theme:n}=t,r=l4(),i=N.useMemo(()=>{const s=r===null?n:v_e(r,n);return s!=null&&(s[y_e]=r!==null),s},[n,r]);return H.jsx(Tq.Provider,{value:i,children:e})}const x_e=["value"],Iq=N.createContext();function w_e(t){let{value:e}=t,n=rt(t,x_e);return H.jsx(Iq.Provider,z({value:e??!0},n))}const mu=()=>{const t=N.useContext(Iq);return t??!1},Pq=N.createContext(void 0);function __e({value:t,children:e}){return H.jsx(Pq.Provider,{value:t,children:e})}function S_e(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const i=e.components[n];return i.defaultProps?ev(i.defaultProps,r):!i.styleOverrides&&!i.variants?ev(i,r):r}function E_e({props:t,name:e}){const n=N.useContext(Pq);return S_e({props:t,name:e,theme:{components:n}})}const Y9={};function Z9(t,e,n,r=!1){return N.useMemo(()=>{const i=t&&e[t]||e;if(typeof n=="function"){const s=n(i),o=t?z({},e,{[t]:s}):s;return r?()=>o:o}return t?z({},e,{[t]:n}):z({},e,n)},[t,e,n,r])}function Cq(t){const{children:e,theme:n,themeId:r}=t,i=n4(Y9),s=l4()||Y9,o=Z9(r,i,n),a=Z9(r,s,n,!0),c=o.direction==="rtl";return H.jsx(b_e,{theme:a,children:H.jsx(lh.Provider,{value:o,children:H.jsx(w_e,{value:c,children:H.jsx(__e,{value:o==null?void 0:o.components,children:e})})})})}const c4="mode",u4="color-scheme",Mq="data-color-scheme";function T_e(t){const{defaultMode:e="light",defaultLightColorScheme:n="light",defaultDarkColorScheme:r="dark",modeStorageKey:i=c4,colorSchemeStorageKey:s=u4,attribute:o=Mq,colorSchemeNode:a="document.documentElement",nonce:c}=t||{};return H.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?c:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  var mode = localStorage.getItem('${i}') || '${e}';
  var colorScheme = '';
  if (mode === 'system') {
    // handle system mode
    var mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = localStorage.getItem('${s}-dark') || '${r}';
    } else {
      colorScheme = localStorage.getItem('${s}-light') || '${n}';
    }
  }
  if (mode === 'light') {
    colorScheme = localStorage.getItem('${s}-light') || '${n}';
  }
  if (mode === 'dark') {
    colorScheme = localStorage.getItem('${s}-dark') || '${r}';
  }
  if (colorScheme) {
    ${a}.setAttribute('${o}', colorScheme);
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function J9(t){if(typeof window<"u"&&t==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function Aq(t,e){if(t.mode==="light"||t.mode==="system"&&t.systemMode==="light")return e("light");if(t.mode==="dark"||t.mode==="system"&&t.systemMode==="dark")return e("dark")}function I_e(t){return Aq(t,e=>{if(e==="light")return t.lightColorScheme;if(e==="dark")return t.darkColorScheme})}function AA(t,e){if(typeof window>"u")return;let n;try{n=localStorage.getItem(t)||void 0,n||localStorage.setItem(t,e)}catch{}return n||e}function P_e(t){const{defaultMode:e="light",defaultLightColorScheme:n,defaultDarkColorScheme:r,supportedColorSchemes:i=[],modeStorageKey:s=c4,colorSchemeStorageKey:o=u4,storageWindow:a=typeof window>"u"?void 0:window}=t,c=i.join(","),[l,u]=N.useState(()=>{const m=AA(s,e),y=AA(`${o}-light`,n),b=AA(`${o}-dark`,r);return{mode:m,systemMode:J9(m),lightColorScheme:y,darkColorScheme:b}}),d=I_e(l),h=N.useCallback(m=>{u(y=>{if(m===y.mode)return y;const b=m??e;try{localStorage.setItem(s,b)}catch{}return z({},y,{mode:b,systemMode:J9(b)})})},[s,e]),f=N.useCallback(m=>{m?typeof m=="string"?m&&!c.includes(m)?console.error(`\`${m}\` does not exist in \`theme.colorSchemes\`.`):u(y=>{const b=z({},y);return Aq(y,x=>{try{localStorage.setItem(`${o}-${x}`,m)}catch{}x==="light"&&(b.lightColorScheme=m),x==="dark"&&(b.darkColorScheme=m)}),b}):u(y=>{const b=z({},y),x=m.light===null?n:m.light,S=m.dark===null?r:m.dark;if(x)if(!c.includes(x))console.error(`\`${x}\` does not exist in \`theme.colorSchemes\`.`);else{b.lightColorScheme=x;try{localStorage.setItem(`${o}-light`,x)}catch{}}if(S)if(!c.includes(S))console.error(`\`${S}\` does not exist in \`theme.colorSchemes\`.`);else{b.darkColorScheme=S;try{localStorage.setItem(`${o}-dark`,S)}catch{}}return b}):u(y=>{try{localStorage.setItem(`${o}-light`,n),localStorage.setItem(`${o}-dark`,r)}catch{}return z({},y,{lightColorScheme:n,darkColorScheme:r})})},[c,o,n,r]),p=N.useCallback(m=>{l.mode==="system"&&u(y=>{const b=m!=null&&m.matches?"dark":"light";return y.systemMode===b?y:z({},y,{systemMode:b})})},[l.mode]),g=N.useRef(p);return g.current=p,N.useEffect(()=>{const m=(...b)=>g.current(...b),y=window.matchMedia("(prefers-color-scheme: dark)");return y.addListener(m),m(y),()=>{y.removeListener(m)}},[]),N.useEffect(()=>{if(a){const m=y=>{const b=y.newValue;typeof y.key=="string"&&y.key.startsWith(o)&&(!b||c.match(b))&&(y.key.endsWith("light")&&f({light:b}),y.key.endsWith("dark")&&f({dark:b})),y.key===s&&(!b||["light","dark","system"].includes(b))&&h(b||e)};return a.addEventListener("storage",m),()=>{a.removeEventListener("storage",m)}}},[f,h,s,o,c,e,a]),z({},l,{colorScheme:d,setMode:h,setColorScheme:f})}const C_e=["colorSchemes","components","generateCssVars","cssVarPrefix"],M_e="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function A_e(t){const{themeId:e,theme:n={},attribute:r=Mq,modeStorageKey:i=c4,colorSchemeStorageKey:s=u4,defaultMode:o="light",defaultColorScheme:a,disableTransitionOnChange:c=!1,resolveTheme:l,excludeVariablesFromRoot:u}=t;(!n.colorSchemes||typeof a=="string"&&!n.colorSchemes[a]||typeof a=="object"&&!n.colorSchemes[a==null?void 0:a.light]||typeof a=="object"&&!n.colorSchemes[a==null?void 0:a.dark])&&console.error(`MUI: \`${a}\` does not exist in \`theme.colorSchemes\`.`);const d=N.createContext(void 0),h=()=>{const y=N.useContext(d);if(!y)throw new Error(Po(19));return y};function f(y){const{children:b,theme:x=n,modeStorageKey:S=i,colorSchemeStorageKey:P=s,attribute:_=r,defaultMode:I=o,defaultColorScheme:C=a,disableTransitionOnChange:A=c,storageWindow:M=typeof window>"u"?void 0:window,documentNode:k=typeof document>"u"?void 0:document,colorSchemeNode:O=typeof document>"u"?void 0:document.documentElement,colorSchemeSelector:B=":root",disableNestedContext:$=!1,disableStyleSheetGeneration:U=!1}=y,q=N.useRef(!1),K=l4(),V=N.useContext(d),G=!!V&&!$,j=x[e],Q=j||x,{colorSchemes:se={},components:Z={},generateCssVars:ie=()=>({vars:{},css:{}}),cssVarPrefix:pe}=Q,ue=rt(Q,C_e),le=Object.keys(se),ae=typeof C=="string"?C:C.light,_e=typeof C=="string"?C:C.dark,{mode:ye,setMode:Ae,systemMode:Oe,lightColorScheme:Be,darkColorScheme:ce,colorScheme:Ge,setColorScheme:Pe}=P_e({supportedColorSchemes:le,defaultLightColorScheme:ae,defaultDarkColorScheme:_e,modeStorageKey:S,colorSchemeStorageKey:P,defaultMode:I,storageWindow:M});let He=ye,Re=Ge;G&&(He=V.mode,Re=V.colorScheme);const je=He||(I==="system"?o:I),te=Re||(je==="dark"?_e:ae),{css:ee,vars:X}=ie(),we=z({},ue,{components:Z,colorSchemes:se,cssVarPrefix:pe,vars:X,getColorSchemeSelector:ge=>`[${_}="${ge}"] &`}),Ne={},We={};Object.entries(se).forEach(([ge,Se])=>{const{css:Ie,vars:me}=ie(ge);we.vars=ki(we.vars,me),ge===te&&(Object.keys(Se).forEach(oe=>{Se[oe]&&typeof Se[oe]=="object"?we[oe]=z({},we[oe],Se[oe]):we[oe]=Se[oe]}),we.palette&&(we.palette.colorScheme=ge));const Ee=typeof C=="string"?C:I==="dark"?C.dark:C.light;if(ge===Ee){if(u){const oe={};u(pe).forEach(ne=>{oe[ne]=Ie[ne],delete Ie[ne]}),Ne[`[${_}="${ge}"]`]=oe}Ne[`${B}, [${_}="${ge}"]`]=Ie}else We[`${B===":root"?"":B}[${_}="${ge}"]`]=Ie}),we.vars=ki(we.vars,X),N.useEffect(()=>{Re&&O&&O.setAttribute(_,Re)},[Re,_,O]),N.useEffect(()=>{let ge;if(A&&q.current&&k){const Se=k.createElement("style");Se.appendChild(k.createTextNode(M_e)),k.head.appendChild(Se),window.getComputedStyle(k.body),ge=setTimeout(()=>{k.head.removeChild(Se)},1)}return()=>{clearTimeout(ge)}},[Re,A,k]),N.useEffect(()=>(q.current=!0,()=>{q.current=!1}),[]);const xe=N.useMemo(()=>({allColorSchemes:le,colorScheme:Re,darkColorScheme:ce,lightColorScheme:Be,mode:He,setColorScheme:Pe,setMode:Ae,systemMode:Oe}),[le,Re,ce,Be,He,Pe,Ae,Oe]);let Ve=!0;(U||G&&(K==null?void 0:K.cssVarPrefix)===pe)&&(Ve=!1);const be=H.jsxs(N.Fragment,{children:[Ve&&H.jsxs(N.Fragment,{children:[H.jsx(Wx,{styles:{[B]:ee}}),H.jsx(Wx,{styles:Ne}),H.jsx(Wx,{styles:We})]}),H.jsx(Cq,{themeId:j?e:void 0,theme:l?l(we):we,children:b})]});return G?be:H.jsx(d.Provider,{value:xe,children:be})}const p=typeof a=="string"?a:a.light,g=typeof a=="string"?a:a.dark;return{CssVarsProvider:f,useColorScheme:h,getInitColorSchemeScript:y=>T_e(z({attribute:r,colorSchemeStorageKey:s,defaultMode:o,defaultLightColorScheme:p,defaultDarkColorScheme:g,modeStorageKey:i},y))}}function R_e(t=""){function e(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${i}${e(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${t?`${t}-`:""}${r}${e(...i)})`}const Q9=(t,e,n,r=[])=>{let i=t;e.forEach((s,o)=>{o===e.length-1?Array.isArray(i)?i[Number(s)]=n:i&&typeof i=="object"&&(i[s]=n):i&&typeof i=="object"&&(i[s]||(i[s]=r.includes(s)?[]:{}),i=i[s])})},k_e=(t,e,n)=>{function r(i,s=[],o=[]){Object.entries(i).forEach(([a,c])=>{(!n||n&&!n([...s,a]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?r(c,[...s,a],Array.isArray(c)?[...o,a]:o):e([...s,a],c,o))})}r(t)},O_e=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>t.includes(r))||t[t.length-1].toLowerCase().indexOf("opacity")>=0?e:`${e}px`:e;function RA(t,e){const{prefix:n,shouldSkipGeneratingVar:r}=e||{},i={},s={},o={};return k_e(t,(a,c,l)=>{if((typeof c=="string"||typeof c=="number")&&(!r||!r(a,c))){const u=`--${n?`${n}-`:""}${a.join("-")}`;Object.assign(i,{[u]:O_e(a,c)}),Q9(s,a,`var(${u})`,l),Q9(o,a,`var(${u}, ${c})`,l)}},a=>a[0]==="vars"),{css:i,vars:s,varsWithDefaults:o}}function Aw(t){"@babel/helpers - typeof";return Aw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Aw(t)}function N_e(t,e){if(Aw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Aw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function L_e(t){var e=N_e(t,"string");return Aw(e)=="symbol"?e:e+""}const D_e=["colorSchemes","components","defaultColorScheme"];function B_e(t,e){const{colorSchemes:n={},defaultColorScheme:r="light"}=t,i=rt(t,D_e),{vars:s,css:o,varsWithDefaults:a}=RA(i,e);let c=a;const l={},{[r]:u}=n,d=rt(n,[r].map(L_e));if(Object.entries(d||{}).forEach(([f,p])=>{const{vars:g,css:m,varsWithDefaults:y}=RA(p,e);c=ki(c,y),l[f]={css:m,vars:g}}),u){const{css:f,vars:p,varsWithDefaults:g}=RA(u,e);c=ki(c,g),l[r]={css:f,vars:p}}return{vars:c,generateCssVars:f=>{var p;if(!f){var g;const y=z({},o);return{css:y,vars:s,selector:(e==null||(g=e.getSelector)==null?void 0:g.call(e,f,y))||":root"}}const m=z({},l[f].css);return{css:m,vars:l[f].vars,selector:(e==null||(p=e.getSelector)==null?void 0:p.call(e,f,m))||":root"}}}}const F_e=["className","component","disableGutters","fixed","maxWidth","classes"],U_e=Vm(),$_e=i4("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${qe(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),z_e=t=>OP({props:t,name:"MuiContainer",defaultTheme:U_e}),H_e=(t,e)=>{const n=c=>xt(e,c),{classes:r,fixed:i,disableGutters:s,maxWidth:o}=t,a={root:["root",o&&`maxWidth${qe(String(o))}`,i&&"fixed",s&&"disableGutters"]};return _t(a,n,r)};function V_e(t={}){const{createStyledComponent:e=$_e,useThemeProps:n=z_e,componentName:r="MuiContainer"}=t,i=e(({theme:o,ownerState:a})=>z({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!a.disableGutters&&{paddingLeft:o.spacing(2),paddingRight:o.spacing(2),[o.breakpoints.up("sm")]:{paddingLeft:o.spacing(3),paddingRight:o.spacing(3)}}),({theme:o,ownerState:a})=>a.fixed&&Object.keys(o.breakpoints.values).reduce((c,l)=>{const u=l,d=o.breakpoints.values[u];return d!==0&&(c[o.breakpoints.up(u)]={maxWidth:`${d}${o.breakpoints.unit}`}),c},{}),({theme:o,ownerState:a})=>z({},a.maxWidth==="xs"&&{[o.breakpoints.up("xs")]:{maxWidth:Math.max(o.breakpoints.values.xs,444)}},a.maxWidth&&a.maxWidth!=="xs"&&{[o.breakpoints.up(a.maxWidth)]:{maxWidth:`${o.breakpoints.values[a.maxWidth]}${o.breakpoints.unit}`}}));return N.forwardRef(function(a,c){const l=n(a),{className:u,component:d="div",disableGutters:h=!1,fixed:f=!1,maxWidth:p="lg"}=l,g=rt(l,F_e),m=z({},l,{component:d,disableGutters:h,fixed:f,maxWidth:p}),y=H_e(m,r);return H.jsx(i,z({as:d,ownerState:m,className:Fe(y.root,u),ref:c},g))})}const W_e=(t,e)=>t.filter(n=>e.includes(n)),Tv=(t,e,n)=>{const r=t.keys[0];Array.isArray(e)?e.forEach((i,s)=>{n((o,a)=>{s<=t.keys.length-1&&(s===0?Object.assign(o,a):o[t.up(t.keys[s])]=a)},i)}):e&&typeof e=="object"?(Object.keys(e).length>t.keys.length?t.keys:W_e(t.keys,Object.keys(e))).forEach(s=>{if(t.keys.indexOf(s)!==-1){const o=e[s];o!==void 0&&n((a,c)=>{r===s?Object.assign(a,c):a[t.up(s)]=c},o)}}):(typeof e=="number"||typeof e=="string")&&n((i,s)=>{Object.assign(i,s)},e)};function Xd(t){return t?`Level${t}`:""}function x_(t){return t.unstable_level>0&&t.container}function Rq(t){return function(n){return`var(--Grid-${n}Spacing${Xd(t.unstable_level)})`}}function d4(t){return function(n){return t.unstable_level===0?`var(--Grid-${n}Spacing)`:`var(--Grid-${n}Spacing${Xd(t.unstable_level-1)})`}}function f4(t){return t.unstable_level===0?"var(--Grid-columns)":`var(--Grid-columns${Xd(t.unstable_level-1)})`}const j_e=({theme:t,ownerState:e})=>{const n=Rq(e),r={};return Tv(t.breakpoints,e.gridSize,(i,s)=>{let o={};s===!0&&(o={flexBasis:0,flexGrow:1,maxWidth:"100%"}),s==="auto"&&(o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof s=="number"&&(o={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${s} / ${f4(e)}${x_(e)?` + ${n("column")}`:""})`}),i(r,o)}),r},q_e=({theme:t,ownerState:e})=>{const n={};return Tv(t.breakpoints,e.gridOffset,(r,i)=>{let s={};i==="auto"&&(s={marginLeft:"auto"}),typeof i=="number"&&(s={marginLeft:i===0?"0px":`calc(100% * ${i} / ${f4(e)})`}),r(n,s)}),n},K_e=({theme:t,ownerState:e})=>{if(!e.container)return{};const n=x_(e)?{[`--Grid-columns${Xd(e.unstable_level)}`]:f4(e)}:{"--Grid-columns":12};return Tv(t.breakpoints,e.columns,(r,i)=>{r(n,{[`--Grid-columns${Xd(e.unstable_level)}`]:i})}),n},G_e=({theme:t,ownerState:e})=>{if(!e.container)return{};const n=d4(e),r=x_(e)?{[`--Grid-rowSpacing${Xd(e.unstable_level)}`]:n("row")}:{};return Tv(t.breakpoints,e.rowSpacing,(i,s)=>{var o;i(r,{[`--Grid-rowSpacing${Xd(e.unstable_level)}`]:typeof s=="string"?s:(o=t.spacing)==null?void 0:o.call(t,s)})}),r},X_e=({theme:t,ownerState:e})=>{if(!e.container)return{};const n=d4(e),r=x_(e)?{[`--Grid-columnSpacing${Xd(e.unstable_level)}`]:n("column")}:{};return Tv(t.breakpoints,e.columnSpacing,(i,s)=>{var o;i(r,{[`--Grid-columnSpacing${Xd(e.unstable_level)}`]:typeof s=="string"?s:(o=t.spacing)==null?void 0:o.call(t,s)})}),r},Y_e=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={};return Tv(t.breakpoints,e.direction,(r,i)=>{r(n,{flexDirection:i})}),n},Z_e=({ownerState:t})=>{const e=Rq(t),n=d4(t);return z({minWidth:0,boxSizing:"border-box"},t.container&&z({display:"flex",flexWrap:"wrap"},t.wrap&&t.wrap!=="wrap"&&{flexWrap:t.wrap},{margin:`calc(${e("row")} / -2) calc(${e("column")} / -2)`},t.disableEqualOverflow&&{margin:`calc(${e("row")} * -1) 0px 0px calc(${e("column")} * -1)`}),(!t.container||x_(t))&&z({padding:`calc(${n("row")} / 2) calc(${n("column")} / 2)`},(t.disableEqualOverflow||t.parentDisableEqualOverflow)&&{padding:`${n("row")} 0px 0px ${n("column")}`}))},J_e=t=>{const e=[];return Object.entries(t).forEach(([n,r])=>{r!==!1&&r!==void 0&&e.push(`grid-${n}-${String(r)}`)}),e},Q_e=(t,e="xs")=>{function n(r){return r===void 0?!1:typeof r=="string"&&!Number.isNaN(Number(r))||typeof r=="number"&&r>0}if(n(t))return[`spacing-${e}-${String(t)}`];if(typeof t=="object"&&!Array.isArray(t)){const r=[];return Object.entries(t).forEach(([i,s])=>{n(s)&&r.push(`spacing-${i}-${String(s)}`)}),r}return[]},eSe=t=>t===void 0?[]:typeof t=="object"?Object.entries(t).map(([e,n])=>`direction-${e}-${n}`):[`direction-xs-${String(t)}`],tSe=["className","children","columns","container","component","direction","wrap","spacing","rowSpacing","columnSpacing","disableEqualOverflow","unstable_level"],nSe=Vm(),rSe=i4("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,e)=>e.root});function iSe(t){return OP({props:t,name:"MuiGrid",defaultTheme:nSe})}function sSe(t={}){const{createStyledComponent:e=rSe,useThemeProps:n=iSe,componentName:r="MuiGrid"}=t,i=N.createContext(void 0),s=(c,l)=>{const{container:u,direction:d,spacing:h,wrap:f,gridSize:p}=c,g={root:["root",u&&"container",f!=="wrap"&&`wrap-xs-${String(f)}`,...eSe(d),...J_e(p),...u?Q_e(h,l.breakpoints.keys[0]):[]]};return _t(g,m=>xt(r,m),{})},o=e(K_e,X_e,G_e,j_e,Y_e,Z_e,q_e),a=N.forwardRef(function(l,u){var d,h,f,p,g,m,y,b;const x=y_(),S=n(l),P=_v(S),_=N.useContext(i),{className:I,children:C,columns:A=12,container:M=!1,component:k="div",direction:O="row",wrap:B="wrap",spacing:$=0,rowSpacing:U=$,columnSpacing:q=$,disableEqualOverflow:K,unstable_level:V=0}=P,G=rt(P,tSe);let j=K;V&&K!==void 0&&(j=l.disableEqualOverflow);const Q={},se={},Z={};Object.entries(G).forEach(([Ae,Oe])=>{x.breakpoints.values[Ae]!==void 0?Q[Ae]=Oe:x.breakpoints.values[Ae.replace("Offset","")]!==void 0?se[Ae.replace("Offset","")]=Oe:Z[Ae]=Oe});const ie=(d=l.columns)!=null?d:V?void 0:A,pe=(h=l.spacing)!=null?h:V?void 0:$,ue=(f=(p=l.rowSpacing)!=null?p:l.spacing)!=null?f:V?void 0:U,le=(g=(m=l.columnSpacing)!=null?m:l.spacing)!=null?g:V?void 0:q,ae=z({},P,{level:V,columns:ie,container:M,direction:O,wrap:B,spacing:pe,rowSpacing:ue,columnSpacing:le,gridSize:Q,gridOffset:se,disableEqualOverflow:(y=(b=j)!=null?b:_)!=null?y:!1,parentDisableEqualOverflow:_}),_e=s(ae,x);let ye=H.jsx(o,z({ref:u,as:k,ownerState:ae,className:Fe(_e.root,I)},Z,{children:N.Children.map(C,Ae=>{if(N.isValidElement(Ae)&&Dd(Ae,["Grid"])){var Oe,Be;return N.cloneElement(Ae,{unstable_level:(Oe=(Be=Ae.props)==null?void 0:Be.unstable_level)!=null?Oe:V+1})}return Ae})}));return j!==void 0&&j!==(_??!1)&&(ye=H.jsx(i.Provider,{value:j,children:ye})),ye});return a.muiName="Grid",a}const oSe=["component","direction","spacing","divider","children","className","useFlexGap"],aSe=Vm(),lSe=i4("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root});function cSe(t){return OP({props:t,name:"MuiStack",defaultTheme:aSe})}function uSe(t,e){const n=N.Children.toArray(t).filter(Boolean);return n.reduce((r,i,s)=>(r.push(i),s<n.length-1&&r.push(N.cloneElement(e,{key:`separator-${s}`})),r),[])}const dSe=t=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[t],fSe=({ownerState:t,theme:e})=>{let n=z({display:"flex",flexDirection:"column"},ia({theme:e},Mm({values:t.direction,breakpoints:e.breakpoints.values}),r=>({flexDirection:r})));if(t.spacing){const r=e4(e),i=Object.keys(e.breakpoints.values).reduce((c,l)=>((typeof t.spacing=="object"&&t.spacing[l]!=null||typeof t.direction=="object"&&t.direction[l]!=null)&&(c[l]=!0),c),{}),s=Mm({values:t.direction,base:i}),o=Mm({values:t.spacing,base:i});typeof s=="object"&&Object.keys(s).forEach((c,l,u)=>{if(!s[c]){const h=l>0?s[u[l-1]]:"column";s[c]=h}}),n=ki(n,ia({theme:e},o,(c,l)=>t.useFlexGap?{gap:Bm(r,c)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${dSe(l?s[l]:t.direction)}`]:Bm(r,c)}}))}return n=Nxe(e.breakpoints,n),n};function hSe(t={}){const{createStyledComponent:e=lSe,useThemeProps:n=cSe,componentName:r="MuiStack"}=t,i=()=>_t({root:["root"]},c=>xt(r,c),{}),s=e(fSe);return N.forwardRef(function(c,l){const u=n(c),d=_v(u),{component:h="div",direction:f="column",spacing:p=0,divider:g,children:m,className:y,useFlexGap:b=!1}=d,x=rt(d,oSe),S={direction:f,spacing:p,useFlexGap:b},P=i();return H.jsx(s,z({as:h,ownerState:S,ref:l,className:Fe(P.root,y)},x,{children:g?uSe(m,g):m}))})}const pSe=["defaultProps","mixins","overrides","palette","props","styleOverrides"],mSe=["type","mode"];function gSe(t){const{defaultProps:e={},mixins:n={},overrides:r={},palette:i={},props:s={},styleOverrides:o={}}=t,a=rt(t,pSe),c=z({},a,{components:{}});Object.keys(e).forEach(g=>{const m=c.components[g]||{};m.defaultProps=e[g],c.components[g]=m}),Object.keys(s).forEach(g=>{const m=c.components[g]||{};m.defaultProps=s[g],c.components[g]=m}),Object.keys(o).forEach(g=>{const m=c.components[g]||{};m.styleOverrides=o[g],c.components[g]=m}),Object.keys(r).forEach(g=>{const m=c.components[g]||{};m.styleOverrides=r[g],c.components[g]=m}),c.spacing=lq(t.spacing);const l=YO(t.breakpoints||{}),u=c.spacing;c.mixins=z({gutters:(g={})=>z({paddingLeft:u(2),paddingRight:u(2)},g,{[l.up("sm")]:z({paddingLeft:u(3),paddingRight:u(3)},g[l.up("sm")])})},n);const{type:d,mode:h}=i,f=rt(i,mSe),p=h||d||"light";return c.palette=z({text:{hint:p==="dark"?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.38)"},mode:p,type:p},f),c}function kq(t,e){return z({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}var hi={},kA={exports:{}},e7;function Oq(){return e7||(e7=1,function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(kA)),kA.exports}const ySe=_l(Pxe),vSe=_l(Xwe);var t7;function bSe(){if(t7)return hi;t7=1;var t=Oq();Object.defineProperty(hi,"__esModule",{value:!0}),hi.alpha=p,hi.blend=_,hi.colorChannel=void 0,hi.darken=m,hi.decomposeColor=o,hi.emphasize=S,hi.getContrastRatio=f,hi.getLuminance=h,hi.hexToRgb=i,hi.hslToRgb=d,hi.lighten=b,hi.private_safeAlpha=g,hi.private_safeColorChannel=void 0,hi.private_safeDarken=y,hi.private_safeEmphasize=P,hi.private_safeLighten=x,hi.recomposeColor=l,hi.rgbToHex=u;var e=t(ySe),n=t(vSe);function r(I,C=0,A=1){return(0,n.default)(I,C,A)}function i(I){I=I.slice(1);const C=new RegExp(`.{1,${I.length>=6?2:1}}`,"g");let A=I.match(C);return A&&A[0].length===1&&(A=A.map(M=>M+M)),A?`rgb${A.length===4?"a":""}(${A.map((M,k)=>k<3?parseInt(M,16):Math.round(parseInt(M,16)/255*1e3)/1e3).join(", ")})`:""}function s(I){const C=I.toString(16);return C.length===1?`0${C}`:C}function o(I){if(I.type)return I;if(I.charAt(0)==="#")return o(i(I));const C=I.indexOf("("),A=I.substring(0,C);if(["rgb","rgba","hsl","hsla","color"].indexOf(A)===-1)throw new Error((0,e.default)(9,I));let M=I.substring(C+1,I.length-1),k;if(A==="color"){if(M=M.split(" "),k=M.shift(),M.length===4&&M[3].charAt(0)==="/"&&(M[3]=M[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(k)===-1)throw new Error((0,e.default)(10,k))}else M=M.split(",");return M=M.map(O=>parseFloat(O)),{type:A,values:M,colorSpace:k}}const a=I=>{const C=o(I);return C.values.slice(0,3).map((A,M)=>C.type.indexOf("hsl")!==-1&&M!==0?`${A}%`:A).join(" ")};hi.colorChannel=a;const c=(I,C)=>{try{return a(I)}catch{return I}};hi.private_safeColorChannel=c;function l(I){const{type:C,colorSpace:A}=I;let{values:M}=I;return C.indexOf("rgb")!==-1?M=M.map((k,O)=>O<3?parseInt(k,10):k):C.indexOf("hsl")!==-1&&(M[1]=`${M[1]}%`,M[2]=`${M[2]}%`),C.indexOf("color")!==-1?M=`${A} ${M.join(" ")}`:M=`${M.join(", ")}`,`${C}(${M})`}function u(I){if(I.indexOf("#")===0)return I;const{values:C}=o(I);return`#${C.map((A,M)=>s(M===3?Math.round(255*A):A)).join("")}`}function d(I){I=o(I);const{values:C}=I,A=C[0],M=C[1]/100,k=C[2]/100,O=M*Math.min(k,1-k),B=(q,K=(q+A/30)%12)=>k-O*Math.max(Math.min(K-3,9-K,1),-1);let $="rgb";const U=[Math.round(B(0)*255),Math.round(B(8)*255),Math.round(B(4)*255)];return I.type==="hsla"&&($+="a",U.push(C[3])),l({type:$,values:U})}function h(I){I=o(I);let C=I.type==="hsl"||I.type==="hsla"?o(d(I)).values:I.values;return C=C.map(A=>(I.type!=="color"&&(A/=255),A<=.03928?A/12.92:((A+.055)/1.055)**2.4)),Number((.2126*C[0]+.7152*C[1]+.0722*C[2]).toFixed(3))}function f(I,C){const A=h(I),M=h(C);return(Math.max(A,M)+.05)/(Math.min(A,M)+.05)}function p(I,C){return I=o(I),C=r(C),(I.type==="rgb"||I.type==="hsl")&&(I.type+="a"),I.type==="color"?I.values[3]=`/${C}`:I.values[3]=C,l(I)}function g(I,C,A){try{return p(I,C)}catch{return I}}function m(I,C){if(I=o(I),C=r(C),I.type.indexOf("hsl")!==-1)I.values[2]*=1-C;else if(I.type.indexOf("rgb")!==-1||I.type.indexOf("color")!==-1)for(let A=0;A<3;A+=1)I.values[A]*=1-C;return l(I)}function y(I,C,A){try{return m(I,C)}catch{return I}}function b(I,C){if(I=o(I),C=r(C),I.type.indexOf("hsl")!==-1)I.values[2]+=(100-I.values[2])*C;else if(I.type.indexOf("rgb")!==-1)for(let A=0;A<3;A+=1)I.values[A]+=(255-I.values[A])*C;else if(I.type.indexOf("color")!==-1)for(let A=0;A<3;A+=1)I.values[A]+=(1-I.values[A])*C;return l(I)}function x(I,C,A){try{return b(I,C)}catch{return I}}function S(I,C=.15){return h(I)>.5?m(I,C):b(I,C)}function P(I,C,A){try{return S(I,C)}catch{return I}}function _(I,C,A,M=1){const k=(U,q)=>Math.round((U**(1/M)*(1-A)+q**(1/M)*A)**M),O=o(I),B=o(C),$=[k(O.values[0],B.values[0]),k(O.values[1],B.values[1]),k(O.values[2],B.values[2])];return l({type:"rgb",values:$})}return hi}var pt=bSe();const xSe=["mode","contrastThreshold","tonalOffset"],n7={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Jy.white,default:Jy.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},OA={text:{primary:Jy.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Jy.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function r7(t,e,n,r){const i=r.light||r,s=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=pt.lighten(t.main,i):e==="dark"&&(t.dark=pt.darken(t.main,s)))}function wSe(t="light"){return t==="dark"?{main:om[200],light:om[50],dark:om[400]}:{main:om[700],light:om[400],dark:om[800]}}function _Se(t="light"){return t==="dark"?{main:sm[200],light:sm[50],dark:sm[400]}:{main:sm[500],light:sm[300],dark:sm[700]}}function SSe(t="light"){return t==="dark"?{main:im[500],light:im[300],dark:im[700]}:{main:im[700],light:im[400],dark:im[800]}}function ESe(t="light"){return t==="dark"?{main:am[400],light:am[300],dark:am[700]}:{main:am[700],light:am[500],dark:am[900]}}function TSe(t="light"){return t==="dark"?{main:lm[400],light:lm[300],dark:lm[700]}:{main:lm[800],light:lm[500],dark:lm[900]}}function ISe(t="light"){return t==="dark"?{main:ay[400],light:ay[300],dark:ay[700]}:{main:"#ed6c02",light:ay[500],dark:ay[900]}}function PSe(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2}=t,i=rt(t,xSe),s=t.primary||wSe(e),o=t.secondary||_Se(e),a=t.error||SSe(e),c=t.info||ESe(e),l=t.success||TSe(e),u=t.warning||ISe(e);function d(g){return pt.getContrastRatio(g,OA.text.primary)>=n?OA.text.primary:n7.text.primary}const h=({color:g,name:m,mainShade:y=500,lightShade:b=300,darkShade:x=700})=>{if(g=z({},g),!g.main&&g[y]&&(g.main=g[y]),!g.hasOwnProperty("main"))throw new Error(Po(11,m?` (${m})`:"",y));if(typeof g.main!="string")throw new Error(Po(12,m?` (${m})`:"",JSON.stringify(g.main)));return r7(g,"light",b,r),r7(g,"dark",x,r),g.contrastText||(g.contrastText=d(g.main)),g},f={dark:OA,light:n7};return ki(z({common:z({},Jy),mode:e,primary:h({color:s,name:"primary"}),secondary:h({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:h({color:a,name:"error"}),warning:h({color:u,name:"warning"}),info:h({color:c,name:"info"}),success:h({color:l,name:"success"}),grey:tq,contrastThreshold:n,getContrastText:d,augmentColor:h,tonalOffset:r},f[e]),i)}const CSe=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function MSe(t){return Math.round(t*1e5)/1e5}const i7={textTransform:"uppercase"},s7='"Roboto", "Helvetica", "Arial", sans-serif';function h4(t,e){const n=typeof e=="function"?e(t):e,{fontFamily:r=s7,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:c=700,htmlFontSize:l=16,allVariants:u,pxToRem:d}=n,h=rt(n,CSe),f=i/14,p=d||(y=>`${y/l*f}rem`),g=(y,b,x,S,P)=>z({fontFamily:r,fontWeight:y,fontSize:p(b),lineHeight:x},r===s7?{letterSpacing:`${MSe(S/b)}em`}:{},P,u),m={h1:g(s,96,1.167,-1.5),h2:g(s,60,1.2,-.5),h3:g(o,48,1.167,0),h4:g(o,34,1.235,.25),h5:g(o,24,1.334,0),h6:g(a,20,1.6,.15),subtitle1:g(o,16,1.75,.15),subtitle2:g(a,14,1.57,.1),body1:g(o,16,1.5,.15),body2:g(o,14,1.43,.15),button:g(a,14,1.75,.4,i7),caption:g(o,12,1.66,.4),overline:g(o,12,2.66,1,i7),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return ki(z({htmlFontSize:l,pxToRem:p,fontFamily:r,fontSize:i,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:c},m),h,{clone:!1})}const ASe=.2,RSe=.14,kSe=.12;function ai(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${ASe})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${RSe})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${kSe})`].join(",")}const OSe=["none",ai(0,2,1,-1,0,1,1,0,0,1,3,0),ai(0,3,1,-2,0,2,2,0,0,1,5,0),ai(0,3,3,-2,0,3,4,0,0,1,8,0),ai(0,2,4,-1,0,4,5,0,0,1,10,0),ai(0,3,5,-1,0,5,8,0,0,1,14,0),ai(0,3,5,-1,0,6,10,0,0,1,18,0),ai(0,4,5,-2,0,7,10,1,0,2,16,1),ai(0,5,5,-3,0,8,10,1,0,3,14,2),ai(0,5,6,-3,0,9,12,1,0,3,16,2),ai(0,6,6,-3,0,10,14,1,0,4,18,3),ai(0,6,7,-4,0,11,15,1,0,4,20,3),ai(0,7,8,-4,0,12,17,2,0,5,22,4),ai(0,7,8,-4,0,13,19,2,0,5,24,4),ai(0,7,9,-4,0,14,21,2,0,5,26,4),ai(0,8,9,-5,0,15,22,2,0,6,28,5),ai(0,8,10,-5,0,16,24,2,0,6,30,5),ai(0,8,11,-5,0,17,26,2,0,6,32,5),ai(0,9,11,-5,0,18,28,2,0,7,34,6),ai(0,9,12,-6,0,19,29,2,0,7,36,6),ai(0,10,13,-6,0,20,31,3,0,8,38,7),ai(0,10,13,-6,0,21,33,3,0,8,40,7),ai(0,10,14,-6,0,22,35,3,0,8,42,7),ai(0,11,14,-7,0,23,36,3,0,9,44,8),ai(0,11,15,-7,0,24,38,3,0,9,46,8)],NSe=["duration","easing","delay"],Nq={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},p4={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function o7(t){return`${Math.round(t)}ms`}function LSe(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function DSe(t){const e=z({},Nq,t.easing),n=z({},p4,t.duration);return z({getAutoHeightDuration:LSe,create:(i=["all"],s={})=>{const{duration:o=n.standard,easing:a=e.easeInOut,delay:c=0}=s;return rt(s,NSe),(Array.isArray(i)?i:[i]).map(l=>`${l} ${typeof o=="string"?o:o7(o)} ${a} ${typeof c=="string"?c:o7(c)}`).join(",")}},t,{easing:e,duration:n})}const BSe={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},FSe=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Fm(t={},...e){const{mixins:n={},palette:r={},transitions:i={},typography:s={}}=t,o=rt(t,FSe);if(t.vars&&t.generateCssVars===void 0)throw new Error(Po(18));const a=PSe(r),c=Vm(t);let l=ki(c,{mixins:kq(c.breakpoints,n),palette:a,shadows:OSe.slice(),typography:h4(a,s),transitions:DSe(i),zIndex:z({},BSe)});return l=ki(l,o),l=e.reduce((u,d)=>ki(u,d),l),l.unstable_sxConfig=z({},wv,o==null?void 0:o.unstable_sxConfig),l.unstable_sx=function(d){return ph({sx:d,theme:this})},l}function USe(...t){return Fm(...t)}function $Se(t,...e){return Fm(ki({unstable_strictMode:!0},t),...e)}let a7=!1;function zSe(t){return a7||(console.warn(["MUI: createStyles from @mui/material/styles is deprecated.","Please use @mui/styles/createStyles"].join(`
`)),a7=!0),t}function l7(t){return String(parseFloat(t)).length===String(t).length}function m4(t){return String(t).match(/[\d.\-+]*\s*(.*)/)[1]||""}function _d(t){return parseFloat(t)}function HSe(t){return(e,n)=>{const r=m4(e);if(r===n)return e;let i=_d(e);r!=="px"&&(r==="em"||r==="rem")&&(i=_d(e)*_d(t));let s=i;if(n!=="px")if(n==="em")s=i/_d(t);else if(n==="rem")s=i/_d(t);else return e;return parseFloat(s.toFixed(5))+n}}function VSe({size:t,grid:e}){const n=t-t%e,r=n+e;return t-n<r-t?n:r}function WSe({lineHeight:t,pixels:e,htmlFontSize:n}){return e/(t*n)}function jSe({cssProperty:t,min:e,max:n,unit:r="rem",breakpoints:i=[600,900,1200],transform:s=null}){const o={[t]:`${e}${r}`},a=(n-e)/i[i.length-1];return i.forEach(c=>{let l=e+a*c;s!==null&&(l=s(l)),o[`@media (min-width:${c}px)`]={[t]:`${Math.round(l*1e4)/1e4}${r}`}}),o}function qSe(t,e={}){const{breakpoints:n=["sm","md","lg"],disableAlign:r=!1,factor:i=2,variants:s=["h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","caption","button","overline"]}=e,o=z({},t);o.typography=z({},o.typography);const a=o.typography,c=HSe(a.htmlFontSize),l=n.map(u=>o.breakpoints.values[u]);return s.forEach(u=>{const d=a[u];if(!d)return;const h=parseFloat(c(d.fontSize,"rem"));if(h<=1)return;const f=h,p=1+(f-1)/i;let{lineHeight:g}=d;if(!l7(g)&&!r)throw new Error(Po(6));l7(g)||(g=parseFloat(c(g,"rem"))/parseFloat(h));let m=null;r||(m=y=>VSe({size:y,grid:WSe({pixels:4,lineHeight:g,htmlFontSize:a.htmlFontSize})})),a[u]=z({},d,jSe({cssProperty:"fontSize",min:p,max:f,unit:"rem",breakpoints:l,transform:m}))}),o}const LP=Fm();function $s(){const t=y_(LP);return t[Kd]||t}function KSe({props:t,name:e}){return OP({props:t,name:e,defaultTheme:LP,themeId:Kd})}var qp={},NA={exports:{}},c7;function GSe(){return c7||(c7=1,function(t){function e(){return t.exports=e=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var s in i)({}).hasOwnProperty.call(i,s)&&(n[s]=i[s])}return n},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(null,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(NA)),NA.exports}var LA={exports:{}},u7;function XSe(){return u7||(u7=1,function(t){function e(n,r){if(n==null)return{};var i={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(r.indexOf(s)!==-1)continue;i[s]=n[s]}return i}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(LA)),LA.exports}const Lq=_l(Mxe),YSe=_l(Axe),ZSe=_l(Dxe),JSe=_l(Bwe),QSe=_l(_we),eEe=_l(Cwe);var d7;function tEe(){if(d7)return qp;d7=1;var t=Oq();Object.defineProperty(qp,"__esModule",{value:!0}),qp.default=S,qp.shouldForwardProp=p,qp.systemDefaultTheme=void 0;var e=t(GSe()),n=t(XSe()),r=d(Lq),i=YSe;t(ZSe),t(JSe);var s=t(QSe),o=t(eEe);const a=["ownerState"],c=["variants"],l=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function u(P){if(typeof WeakMap!="function")return null;var _=new WeakMap,I=new WeakMap;return(u=function(C){return C?I:_})(P)}function d(P,_){if(P&&P.__esModule)return P;if(P===null||typeof P!="object"&&typeof P!="function")return{default:P};var I=u(_);if(I&&I.has(P))return I.get(P);var C={__proto__:null},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in P)if(M!=="default"&&Object.prototype.hasOwnProperty.call(P,M)){var k=A?Object.getOwnPropertyDescriptor(P,M):null;k&&(k.get||k.set)?Object.defineProperty(C,M,k):C[M]=P[M]}return C.default=P,I&&I.set(P,C),C}function h(P){return Object.keys(P).length===0}function f(P){return typeof P=="string"&&P.charCodeAt(0)>96}function p(P){return P!=="ownerState"&&P!=="theme"&&P!=="sx"&&P!=="as"}const g=qp.systemDefaultTheme=(0,s.default)(),m=P=>P&&P.charAt(0).toLowerCase()+P.slice(1);function y({defaultTheme:P,theme:_,themeId:I}){return h(_)?P:_[I]||_}function b(P){return P?(_,I)=>I[P]:null}function x(P,_){let{ownerState:I}=_,C=(0,n.default)(_,a);const A=typeof P=="function"?P((0,e.default)({ownerState:I},C)):P;if(Array.isArray(A))return A.flatMap(M=>x(M,(0,e.default)({ownerState:I},C)));if(A&&typeof A=="object"&&Array.isArray(A.variants)){const{variants:M=[]}=A;let O=(0,n.default)(A,c);return M.forEach(B=>{let $=!0;typeof B.props=="function"?$=B.props((0,e.default)({ownerState:I},C,I)):Object.keys(B.props).forEach(U=>{(I==null?void 0:I[U])!==B.props[U]&&C[U]!==B.props[U]&&($=!1)}),$&&(Array.isArray(O)||(O=[O]),O.push(typeof B.style=="function"?B.style((0,e.default)({ownerState:I},C,I)):B.style))}),O}return A}function S(P={}){const{themeId:_,defaultTheme:I=g,rootShouldForwardProp:C=p,slotShouldForwardProp:A=p}=P,M=k=>(0,o.default)((0,e.default)({},k,{theme:y((0,e.default)({},k,{defaultTheme:I,themeId:_}))}));return M.__mui_systemSx=!0,(k,O={})=>{(0,r.internal_processStyles)(k,ue=>ue.filter(le=>!(le!=null&&le.__mui_systemSx)));const{name:B,slot:$,skipVariantsResolver:U,skipSx:q,overridesResolver:K=b(m($))}=O,V=(0,n.default)(O,l),G=U!==void 0?U:$&&$!=="Root"&&$!=="root"||!1,j=q||!1;let Q,se=p;$==="Root"||$==="root"?se=C:$?se=A:f(k)&&(se=void 0);const Z=(0,r.default)(k,(0,e.default)({shouldForwardProp:se,label:Q},V)),ie=ue=>typeof ue=="function"&&ue.__emotion_real!==ue||(0,i.isPlainObject)(ue)?le=>x(ue,(0,e.default)({},le,{theme:y({theme:le.theme,defaultTheme:I,themeId:_})})):ue,pe=(ue,...le)=>{let ae=ie(ue);const _e=le?le.map(ie):[];B&&K&&_e.push(Oe=>{const Be=y((0,e.default)({},Oe,{defaultTheme:I,themeId:_}));if(!Be.components||!Be.components[B]||!Be.components[B].styleOverrides)return null;const ce=Be.components[B].styleOverrides,Ge={};return Object.entries(ce).forEach(([Pe,He])=>{Ge[Pe]=x(He,(0,e.default)({},Oe,{theme:Be}))}),K(Oe,Ge)}),B&&!G&&_e.push(Oe=>{var Be;const ce=y((0,e.default)({},Oe,{defaultTheme:I,themeId:_})),Ge=ce==null||(Be=ce.components)==null||(Be=Be[B])==null?void 0:Be.variants;return x({variants:Ge},(0,e.default)({},Oe,{theme:ce}))}),j||_e.push(M);const ye=_e.length-le.length;if(Array.isArray(ue)&&ye>0){const Oe=new Array(ye).fill("");ae=[...ue,...Oe],ae.raw=[...ue.raw,...Oe]}const Ae=Z(ae,..._e);return k.muiName&&(Ae.muiName=k.muiName),Ae};return Z.withConfig&&(pe.withConfig=Z.withConfig),pe}}return qp}var nEe=tEe();const rEe=ah(nEe);function Iv(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const Bi=t=>Iv(t)&&t!=="classes",Ue=rEe({themeId:Kd,defaultTheme:LP,rootShouldForwardProp:Bi}),iEe=["theme"];function sEe(t){let{theme:e}=t,n=rt(t,iEe);const r=e[Kd];let i=r||e;return typeof e!="function"&&(r&&!r.vars?i=z({},r,{vars:null}):e&&!e.vars&&(i=z({},e,{vars:null}))),H.jsx(Cq,z({},n,{themeId:r?Kd:void 0,theme:i}))}function oEe(){throw new Error(Po(14))}function aEe(){throw new Error(Po(15))}function lEe(){throw new Error(Po(16))}function Dq(t){var e;return!!t[0].match(/(cssVarPrefix|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!((e=t[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const nI=t=>{let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,(e/100).toFixed(2)},cEe=["colorSchemes","cssVarPrefix","shouldSkipGeneratingVar"],uEe=["palette"],dEe=[...Array(25)].map((t,e)=>{if(e===0)return;const n=nI(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function fEe(t,e){e.forEach(n=>{t[n]||(t[n]={})})}function bt(t,e,n){!t[e]&&n&&(t[e]=n)}function Sx(t){return!t||!t.startsWith("hsl")?t:pt.hslToRgb(t)}function hd(t,e){`${e}Channel`in t||(t[`${e}Channel`]=pt.private_safeColorChannel(Sx(t[e]),`MUI: Can't create \`palette.${e}Channel\` because \`palette.${e}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().
To suppress this warning, you need to explicitly provide the \`palette.${e}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}const Vc=t=>{try{return t()}catch{}},hEe=(t="mui")=>R_e(t);function Bq(t={},...e){var n,r,i,s,o,a;const{colorSchemes:c={},cssVarPrefix:l="mui",shouldSkipGeneratingVar:u=Dq}=t,d=rt(t,cEe),h=hEe(l),f=Fm(z({},d,c.light&&{palette:(n=c.light)==null?void 0:n.palette})),{palette:p}=f,g=rt(f,uEe),{palette:m}=Fm({palette:z({mode:"dark"},(r=c.dark)==null?void 0:r.palette)});let y=z({},g,{cssVarPrefix:l,getCssVar:h,colorSchemes:z({},c,{light:z({},c.light,{palette:p,opacity:z({inputPlaceholder:.42,inputUnderline:.42,switchTrackDisabled:.12,switchTrack:.38},(i=c.light)==null?void 0:i.opacity),overlays:((s=c.light)==null?void 0:s.overlays)||[]}),dark:z({},c.dark,{palette:m,opacity:z({inputPlaceholder:.5,inputUnderline:.7,switchTrackDisabled:.2,switchTrack:.3},(o=c.dark)==null?void 0:o.opacity),overlays:((a=c.dark)==null?void 0:a.overlays)||dEe})})});Object.keys(y.colorSchemes).forEach(P=>{const _=y.colorSchemes[P].palette,I=C=>{const A=C.split("-"),M=A[1],k=A[2];return h(C,_[M][k])};if(P==="light"?(bt(_.common,"background","#fff"),bt(_.common,"onBackground","#000")):(bt(_.common,"background","#000"),bt(_.common,"onBackground","#fff")),fEe(_,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),P==="light"){bt(_.Alert,"errorColor",pt.private_safeDarken(_.error.light,.6)),bt(_.Alert,"infoColor",pt.private_safeDarken(_.info.light,.6)),bt(_.Alert,"successColor",pt.private_safeDarken(_.success.light,.6)),bt(_.Alert,"warningColor",pt.private_safeDarken(_.warning.light,.6)),bt(_.Alert,"errorFilledBg",I("palette-error-main")),bt(_.Alert,"infoFilledBg",I("palette-info-main")),bt(_.Alert,"successFilledBg",I("palette-success-main")),bt(_.Alert,"warningFilledBg",I("palette-warning-main")),bt(_.Alert,"errorFilledColor",Vc(()=>p.getContrastText(_.error.main))),bt(_.Alert,"infoFilledColor",Vc(()=>p.getContrastText(_.info.main))),bt(_.Alert,"successFilledColor",Vc(()=>p.getContrastText(_.success.main))),bt(_.Alert,"warningFilledColor",Vc(()=>p.getContrastText(_.warning.main))),bt(_.Alert,"errorStandardBg",pt.private_safeLighten(_.error.light,.9)),bt(_.Alert,"infoStandardBg",pt.private_safeLighten(_.info.light,.9)),bt(_.Alert,"successStandardBg",pt.private_safeLighten(_.success.light,.9)),bt(_.Alert,"warningStandardBg",pt.private_safeLighten(_.warning.light,.9)),bt(_.Alert,"errorIconColor",I("palette-error-main")),bt(_.Alert,"infoIconColor",I("palette-info-main")),bt(_.Alert,"successIconColor",I("palette-success-main")),bt(_.Alert,"warningIconColor",I("palette-warning-main")),bt(_.AppBar,"defaultBg",I("palette-grey-100")),bt(_.Avatar,"defaultBg",I("palette-grey-400")),bt(_.Button,"inheritContainedBg",I("palette-grey-300")),bt(_.Button,"inheritContainedHoverBg",I("palette-grey-A100")),bt(_.Chip,"defaultBorder",I("palette-grey-400")),bt(_.Chip,"defaultAvatarColor",I("palette-grey-700")),bt(_.Chip,"defaultIconColor",I("palette-grey-700")),bt(_.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),bt(_.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),bt(_.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),bt(_.LinearProgress,"primaryBg",pt.private_safeLighten(_.primary.main,.62)),bt(_.LinearProgress,"secondaryBg",pt.private_safeLighten(_.secondary.main,.62)),bt(_.LinearProgress,"errorBg",pt.private_safeLighten(_.error.main,.62)),bt(_.LinearProgress,"infoBg",pt.private_safeLighten(_.info.main,.62)),bt(_.LinearProgress,"successBg",pt.private_safeLighten(_.success.main,.62)),bt(_.LinearProgress,"warningBg",pt.private_safeLighten(_.warning.main,.62)),bt(_.Skeleton,"bg",`rgba(${I("palette-text-primaryChannel")} / 0.11)`),bt(_.Slider,"primaryTrack",pt.private_safeLighten(_.primary.main,.62)),bt(_.Slider,"secondaryTrack",pt.private_safeLighten(_.secondary.main,.62)),bt(_.Slider,"errorTrack",pt.private_safeLighten(_.error.main,.62)),bt(_.Slider,"infoTrack",pt.private_safeLighten(_.info.main,.62)),bt(_.Slider,"successTrack",pt.private_safeLighten(_.success.main,.62)),bt(_.Slider,"warningTrack",pt.private_safeLighten(_.warning.main,.62));const C=pt.private_safeEmphasize(_.background.default,.8);bt(_.SnackbarContent,"bg",C),bt(_.SnackbarContent,"color",Vc(()=>p.getContrastText(C))),bt(_.SpeedDialAction,"fabHoverBg",pt.private_safeEmphasize(_.background.paper,.15)),bt(_.StepConnector,"border",I("palette-grey-400")),bt(_.StepContent,"border",I("palette-grey-400")),bt(_.Switch,"defaultColor",I("palette-common-white")),bt(_.Switch,"defaultDisabledColor",I("palette-grey-100")),bt(_.Switch,"primaryDisabledColor",pt.private_safeLighten(_.primary.main,.62)),bt(_.Switch,"secondaryDisabledColor",pt.private_safeLighten(_.secondary.main,.62)),bt(_.Switch,"errorDisabledColor",pt.private_safeLighten(_.error.main,.62)),bt(_.Switch,"infoDisabledColor",pt.private_safeLighten(_.info.main,.62)),bt(_.Switch,"successDisabledColor",pt.private_safeLighten(_.success.main,.62)),bt(_.Switch,"warningDisabledColor",pt.private_safeLighten(_.warning.main,.62)),bt(_.TableCell,"border",pt.private_safeLighten(pt.private_safeAlpha(_.divider,1),.88)),bt(_.Tooltip,"bg",pt.private_safeAlpha(_.grey[700],.92))}else{bt(_.Alert,"errorColor",pt.private_safeLighten(_.error.light,.6)),bt(_.Alert,"infoColor",pt.private_safeLighten(_.info.light,.6)),bt(_.Alert,"successColor",pt.private_safeLighten(_.success.light,.6)),bt(_.Alert,"warningColor",pt.private_safeLighten(_.warning.light,.6)),bt(_.Alert,"errorFilledBg",I("palette-error-dark")),bt(_.Alert,"infoFilledBg",I("palette-info-dark")),bt(_.Alert,"successFilledBg",I("palette-success-dark")),bt(_.Alert,"warningFilledBg",I("palette-warning-dark")),bt(_.Alert,"errorFilledColor",Vc(()=>m.getContrastText(_.error.dark))),bt(_.Alert,"infoFilledColor",Vc(()=>m.getContrastText(_.info.dark))),bt(_.Alert,"successFilledColor",Vc(()=>m.getContrastText(_.success.dark))),bt(_.Alert,"warningFilledColor",Vc(()=>m.getContrastText(_.warning.dark))),bt(_.Alert,"errorStandardBg",pt.private_safeDarken(_.error.light,.9)),bt(_.Alert,"infoStandardBg",pt.private_safeDarken(_.info.light,.9)),bt(_.Alert,"successStandardBg",pt.private_safeDarken(_.success.light,.9)),bt(_.Alert,"warningStandardBg",pt.private_safeDarken(_.warning.light,.9)),bt(_.Alert,"errorIconColor",I("palette-error-main")),bt(_.Alert,"infoIconColor",I("palette-info-main")),bt(_.Alert,"successIconColor",I("palette-success-main")),bt(_.Alert,"warningIconColor",I("palette-warning-main")),bt(_.AppBar,"defaultBg",I("palette-grey-900")),bt(_.AppBar,"darkBg",I("palette-background-paper")),bt(_.AppBar,"darkColor",I("palette-text-primary")),bt(_.Avatar,"defaultBg",I("palette-grey-600")),bt(_.Button,"inheritContainedBg",I("palette-grey-800")),bt(_.Button,"inheritContainedHoverBg",I("palette-grey-700")),bt(_.Chip,"defaultBorder",I("palette-grey-700")),bt(_.Chip,"defaultAvatarColor",I("palette-grey-300")),bt(_.Chip,"defaultIconColor",I("palette-grey-300")),bt(_.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),bt(_.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),bt(_.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),bt(_.LinearProgress,"primaryBg",pt.private_safeDarken(_.primary.main,.5)),bt(_.LinearProgress,"secondaryBg",pt.private_safeDarken(_.secondary.main,.5)),bt(_.LinearProgress,"errorBg",pt.private_safeDarken(_.error.main,.5)),bt(_.LinearProgress,"infoBg",pt.private_safeDarken(_.info.main,.5)),bt(_.LinearProgress,"successBg",pt.private_safeDarken(_.success.main,.5)),bt(_.LinearProgress,"warningBg",pt.private_safeDarken(_.warning.main,.5)),bt(_.Skeleton,"bg",`rgba(${I("palette-text-primaryChannel")} / 0.13)`),bt(_.Slider,"primaryTrack",pt.private_safeDarken(_.primary.main,.5)),bt(_.Slider,"secondaryTrack",pt.private_safeDarken(_.secondary.main,.5)),bt(_.Slider,"errorTrack",pt.private_safeDarken(_.error.main,.5)),bt(_.Slider,"infoTrack",pt.private_safeDarken(_.info.main,.5)),bt(_.Slider,"successTrack",pt.private_safeDarken(_.success.main,.5)),bt(_.Slider,"warningTrack",pt.private_safeDarken(_.warning.main,.5));const C=pt.private_safeEmphasize(_.background.default,.98);bt(_.SnackbarContent,"bg",C),bt(_.SnackbarContent,"color",Vc(()=>m.getContrastText(C))),bt(_.SpeedDialAction,"fabHoverBg",pt.private_safeEmphasize(_.background.paper,.15)),bt(_.StepConnector,"border",I("palette-grey-600")),bt(_.StepContent,"border",I("palette-grey-600")),bt(_.Switch,"defaultColor",I("palette-grey-300")),bt(_.Switch,"defaultDisabledColor",I("palette-grey-600")),bt(_.Switch,"primaryDisabledColor",pt.private_safeDarken(_.primary.main,.55)),bt(_.Switch,"secondaryDisabledColor",pt.private_safeDarken(_.secondary.main,.55)),bt(_.Switch,"errorDisabledColor",pt.private_safeDarken(_.error.main,.55)),bt(_.Switch,"infoDisabledColor",pt.private_safeDarken(_.info.main,.55)),bt(_.Switch,"successDisabledColor",pt.private_safeDarken(_.success.main,.55)),bt(_.Switch,"warningDisabledColor",pt.private_safeDarken(_.warning.main,.55)),bt(_.TableCell,"border",pt.private_safeDarken(pt.private_safeAlpha(_.divider,1),.68)),bt(_.Tooltip,"bg",pt.private_safeAlpha(_.grey[700],.92))}hd(_.background,"default"),hd(_.background,"paper"),hd(_.common,"background"),hd(_.common,"onBackground"),hd(_,"divider"),Object.keys(_).forEach(C=>{const A=_[C];A&&typeof A=="object"&&(A.main&&bt(_[C],"mainChannel",pt.private_safeColorChannel(Sx(A.main))),A.light&&bt(_[C],"lightChannel",pt.private_safeColorChannel(Sx(A.light))),A.dark&&bt(_[C],"darkChannel",pt.private_safeColorChannel(Sx(A.dark))),A.contrastText&&bt(_[C],"contrastTextChannel",pt.private_safeColorChannel(Sx(A.contrastText))),C==="text"&&(hd(_[C],"primary"),hd(_[C],"secondary")),C==="action"&&(A.active&&hd(_[C],"active"),A.selected&&hd(_[C],"selected")))})}),y=e.reduce((P,_)=>ki(P,_),y);const b={prefix:l,shouldSkipGeneratingVar:u},{vars:x,generateCssVars:S}=B_e(y,b);return y.vars=x,y.generateCssVars=S,y.shouldSkipGeneratingVar=u,y.unstable_sxConfig=z({},wv,d==null?void 0:d.unstable_sxConfig),y.unstable_sx=function(_){return ph({sx:_,theme:this})},y}const Fq=t=>[...[...Array(24)].map((e,n)=>`--${t?`${t}-`:""}overlays-${n+1}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],ex={attribute:"data-mui-color-scheme",colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},pEe=Bq(),{CssVarsProvider:mEe,useColorScheme:gEe,getInitColorSchemeScript:yEe}=A_e({themeId:Kd,theme:pEe,attribute:ex.attribute,colorSchemeStorageKey:ex.colorSchemeStorageKey,modeStorageKey:ex.modeStorageKey,defaultColorScheme:{light:ex.defaultLightColorScheme,dark:ex.defaultDarkColorScheme},resolveTheme:t=>{const e=z({},t,{typography:h4(t.palette,t.typography)});return e.unstable_sx=function(r){return ph({sx:r,theme:this})},e},excludeVariablesFromRoot:Fq}),vEe=yEe;function bEe(){throw new Error(Po(20))}function Et(t){return E_e(t)}function Uq(t){return xt("MuiSvgIcon",t)}const xEe=wt("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]),wEe=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],_Ee=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${qe(e)}`,`fontSize${qe(n)}`]};return _t(i,Uq,r)},SEe=Ue("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${qe(n.color)}`],e[`fontSize${qe(n.fontSize)}`]]}})(({theme:t,ownerState:e})=>{var n,r,i,s,o,a,c,l,u,d,h,f,p;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:e.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=t.transitions)==null||(r=n.create)==null?void 0:r.call(n,"fill",{duration:(i=t.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((s=t.typography)==null||(o=s.pxToRem)==null?void 0:o.call(s,20))||"1.25rem",medium:((a=t.typography)==null||(c=a.pxToRem)==null?void 0:c.call(a,24))||"1.5rem",large:((l=t.typography)==null||(u=l.pxToRem)==null?void 0:u.call(l,35))||"2.1875rem"}[e.fontSize],color:(d=(h=(t.vars||t).palette)==null||(h=h[e.color])==null?void 0:h.main)!=null?d:{action:(f=(t.vars||t).palette)==null||(f=f.action)==null?void 0:f.active,disabled:(p=(t.vars||t).palette)==null||(p=p.action)==null?void 0:p.disabled,inherit:void 0}[e.color]}}),Rw=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiSvgIcon"}),{children:i,className:s,color:o="inherit",component:a="svg",fontSize:c="medium",htmlColor:l,inheritViewBox:u=!1,titleAccess:d,viewBox:h="0 0 24 24"}=r,f=rt(r,wEe),p=N.isValidElement(i)&&i.type==="svg",g=z({},r,{color:o,component:a,fontSize:c,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:h,hasSvgAsChild:p}),m={};u||(m.viewBox=h);const y=_Ee(g);return H.jsxs(SEe,z({as:a,className:Fe(y.root,s),focusable:"false",color:l,"aria-hidden":d?void 0:!0,role:d?"img":void 0,ref:n},m,f,p&&i.props,{ownerState:g,children:[p?i.props.children:i,d?H.jsx("title",{children:d}):null]}))});Rw.muiName="SvgIcon";function Wr(t,e){function n(r,i){return H.jsx(Rw,z({"data-testid":`${e}Icon`,ref:i},r,{children:t}))}return n.muiName=Rw.muiName,N.memo(N.forwardRef(n))}const EEe={configure:t=>{r4.configure(t)}},DP=t=>t.scrollTop;function Sc(t,e){var n,r;const{timeout:i,easing:s,style:o={}}=t;return{duration:(n=o.transitionDuration)!=null?n:typeof i=="number"?i:i[e.mode]||0,easing:(r=o.transitionTimingFunction)!=null?r:typeof s=="object"?s[e.mode]:s,delay:o.transitionDelay}}function $q(t){return xt("MuiCollapse",t)}const TEe=wt("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]),IEe=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],PEe=t=>{const{orientation:e,classes:n}=t,r={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return _t(r,$q,n)},CEe=Ue("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],n.state==="entered"&&e.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&e.hidden]}})(({theme:t,ownerState:e})=>z({height:0,overflow:"hidden",transition:t.transitions.create("height")},e.orientation==="horizontal"&&{height:"auto",width:0,transition:t.transitions.create("width")},e.state==="entered"&&z({height:"auto",overflow:"visible"},e.orientation==="horizontal"&&{width:"auto"}),e.state==="exited"&&!e.in&&e.collapsedSize==="0px"&&{visibility:"hidden"})),MEe=Ue("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,e)=>e.wrapper})(({ownerState:t})=>z({display:"flex",width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),AEe=Ue("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,e)=>e.wrapperInner})(({ownerState:t})=>z({width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),w_=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiCollapse"}),{addEndListener:i,children:s,className:o,collapsedSize:a="0px",component:c,easing:l,in:u,onEnter:d,onEntered:h,onEntering:f,onExit:p,onExited:g,onExiting:m,orientation:y="vertical",style:b,timeout:x=p4.standard,TransitionComponent:S=ao}=r,P=rt(r,IEe),_=z({},r,{orientation:y,collapsedSize:a}),I=PEe(_),C=$s(),A=Ad(),M=N.useRef(null),k=N.useRef(),O=typeof a=="number"?`${a}px`:a,B=y==="horizontal",$=B?"width":"height",U=N.useRef(null),q=or(n,U),K=ue=>le=>{if(ue){const ae=U.current;le===void 0?ue(ae):ue(ae,le)}},V=()=>M.current?M.current[B?"clientWidth":"clientHeight"]:0,G=K((ue,le)=>{M.current&&B&&(M.current.style.position="absolute"),ue.style[$]=O,d&&d(ue,le)}),j=K((ue,le)=>{const ae=V();M.current&&B&&(M.current.style.position="");const{duration:_e,easing:ye}=Sc({style:b,timeout:x,easing:l},{mode:"enter"});if(x==="auto"){const Ae=C.transitions.getAutoHeightDuration(ae);ue.style.transitionDuration=`${Ae}ms`,k.current=Ae}else ue.style.transitionDuration=typeof _e=="string"?_e:`${_e}ms`;ue.style[$]=`${ae}px`,ue.style.transitionTimingFunction=ye,f&&f(ue,le)}),Q=K((ue,le)=>{ue.style[$]="auto",h&&h(ue,le)}),se=K(ue=>{ue.style[$]=`${V()}px`,p&&p(ue)}),Z=K(g),ie=K(ue=>{const le=V(),{duration:ae,easing:_e}=Sc({style:b,timeout:x,easing:l},{mode:"exit"});if(x==="auto"){const ye=C.transitions.getAutoHeightDuration(le);ue.style.transitionDuration=`${ye}ms`,k.current=ye}else ue.style.transitionDuration=typeof ae=="string"?ae:`${ae}ms`;ue.style[$]=O,ue.style.transitionTimingFunction=_e,m&&m(ue)}),pe=ue=>{x==="auto"&&A.start(k.current||0,ue),i&&i(U.current,ue)};return H.jsx(S,z({in:u,onEnter:G,onEntered:Q,onEntering:j,onExit:se,onExited:Z,onExiting:ie,addEndListener:pe,nodeRef:U,timeout:x==="auto"?null:x},P,{children:(ue,le)=>H.jsx(CEe,z({as:c,className:Fe(I.root,o,{entered:I.entered,exited:!u&&O==="0px"&&I.hidden}[ue]),style:z({[B?"minWidth":"minHeight"]:O},b),ref:q},le,{ownerState:z({},_,{state:ue}),children:H.jsx(MEe,{ownerState:z({},_,{state:ue}),className:I.wrapper,ref:M,children:H.jsx(AEe,{ownerState:z({},_,{state:ue}),className:I.wrapperInner,children:s})})}))}))});w_.muiSupportAuto=!0;function zq(t){return xt("MuiPaper",t)}const REe=wt("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]),kEe=["className","component","elevation","square","variant"],OEe=t=>{const{square:e,elevation:n,variant:r,classes:i}=t,s={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return _t(s,zq,i)},NEe=Ue("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(({theme:t,ownerState:e})=>{var n;return z({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!e.square&&{borderRadius:t.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.divider}`},e.variant==="elevation"&&z({boxShadow:(t.vars||t).shadows[e.elevation]},!t.vars&&t.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${pt.alpha("#fff",nI(e.elevation))}, ${pt.alpha("#fff",nI(e.elevation))})`},t.vars&&{backgroundImage:(n=t.vars.overlays)==null?void 0:n[e.elevation]}))}),Da=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiPaper"}),{className:i,component:s="div",elevation:o=1,square:a=!1,variant:c="elevation"}=r,l=rt(r,kEe),u=z({},r,{component:s,elevation:o,square:a,variant:c}),d=OEe(u);return H.jsx(NEe,z({as:s,ownerState:u,className:Fe(d.root,i),ref:n},l))}),Hq=N.createContext({}),LEe=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],DEe=["component","slots","slotProps"],BEe=["component"];function rI(t,e){const{className:n,elementType:r,ownerState:i,externalForwardedProps:s,getSlotOwnerState:o,internalForwardedProps:a}=e,c=rt(e,LEe),{component:l,slots:u={[t]:void 0},slotProps:d={[t]:void 0}}=s,h=rt(s,DEe),f=u[t]||r,p=Eq(d[t],i),g=Sq(z({className:n},c,{externalForwardedProps:t==="root"?h:void 0,externalSlotProps:p})),{props:{component:m},internalRef:y}=g,b=rt(g.props,BEe),x=or(y,p==null?void 0:p.ref,e.ref),S=o?o(b):{},P=z({},i,S),_=t==="root"?m||l:m,I=vy(f,z({},t==="root"&&!l&&!u[t]&&a,t!=="root"&&!u[t]&&a,b,_&&{as:_},{ref:x}),P);return Object.keys(S).forEach(C=>{delete I[C]}),[f,I]}function Vq(t){return xt("MuiAccordion",t)}const Ex=wt("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),FEe=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],UEe=t=>{const{classes:e,square:n,expanded:r,disabled:i,disableGutters:s}=t;return _t({root:["root",!n&&"rounded",r&&"expanded",i&&"disabled",!s&&"gutters"],region:["region"]},Vq,e)},$Ee=Ue(Da,{name:"MuiAccordion",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${Ex.region}`]:e.region},e.root,!n.square&&e.rounded,!n.disableGutters&&e.gutters]}})(({theme:t})=>{const e={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],e),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],e)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${Ex.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${Ex.disabled}`]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}},({theme:t})=>({variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{[`&.${Ex.expanded}`]:{margin:"16px 0"}}}]})),zEe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiAccordion"}),{children:i,className:s,defaultExpanded:o=!1,disabled:a=!1,disableGutters:c=!1,expanded:l,onChange:u,square:d=!1,slots:h={},slotProps:f={},TransitionComponent:p,TransitionProps:g}=r,m=rt(r,FEe),[y,b]=ta({controlled:l,default:o,name:"Accordion",state:"expanded"}),x=N.useCallback(B=>{b(!y),u&&u(B,!y)},[y,u,b]),[S,...P]=N.Children.toArray(i),_=N.useMemo(()=>({expanded:y,disabled:a,disableGutters:c,toggle:x}),[y,a,c,x]),I=z({},r,{square:d,disabled:a,disableGutters:c,expanded:y}),C=UEe(I),A=z({transition:p},h),M=z({transition:g},f),[k,O]=rI("transition",{elementType:w_,externalForwardedProps:{slots:A,slotProps:M},ownerState:I});return H.jsxs($Ee,z({className:Fe(C.root,s),ref:n,ownerState:I,square:d},m,{children:[H.jsx(Hq.Provider,{value:_,children:S}),H.jsx(k,z({in:y,timeout:"auto"},O,{children:H.jsx("div",{"aria-labelledby":S.props.id,id:S.props["aria-controls"],role:"region",className:C.region,children:P})}))]}))});function Wq(t){return xt("MuiAccordionActions",t)}const HEe=wt("MuiAccordionActions",["root","spacing"]),VEe=["className","disableSpacing"],WEe=t=>{const{classes:e,disableSpacing:n}=t;return _t({root:["root",!n&&"spacing"]},Wq,e)},jEe=Ue("div",{name:"MuiAccordionActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",variants:[{props:t=>!t.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),qEe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiAccordionActions"}),{className:i,disableSpacing:s=!1}=r,o=rt(r,VEe),a=z({},r,{disableSpacing:s}),c=WEe(a);return H.jsx(jEe,z({className:Fe(c.root,i),ref:n,ownerState:a},o))});function jq(t){return xt("MuiAccordionDetails",t)}const KEe=wt("MuiAccordionDetails",["root"]),GEe=["className"],XEe=t=>{const{classes:e}=t;return _t({root:["root"]},jq,e)},YEe=Ue("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({padding:t.spacing(1,2,2)})),ZEe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiAccordionDetails"}),{className:i}=r,s=rt(r,GEe),o=r,a=XEe(o);return H.jsx(YEe,z({className:Fe(a.root,i),ref:n,ownerState:o},s))});function JEe(t){const{className:e,classes:n,pulsate:r=!1,rippleX:i,rippleY:s,rippleSize:o,in:a,onExited:c,timeout:l}=t,[u,d]=N.useState(!1),h=Fe(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),f={width:o,height:o,top:-(o/2)+s,left:-(o/2)+i},p=Fe(n.child,u&&n.childLeaving,r&&n.childPulsate);return!a&&!u&&d(!0),N.useEffect(()=>{if(!a&&c!=null){const g=setTimeout(c,l);return()=>{clearTimeout(g)}}},[c,a,l]),H.jsx("span",{className:h,style:f,children:H.jsx("span",{className:p})})}function QEe(t){return xt("MuiTouchRipple",t)}const Ia=wt("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),eTe=["center","classes","className"];let BP=t=>t,f7,h7,p7,m7;const vk=550,tTe=80,nTe=Zi(f7||(f7=BP`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),rTe=Zi(h7||(h7=BP`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),iTe=Zi(p7||(p7=BP`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),sTe=Ue("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),oTe=Ue(JEe,{name:"MuiTouchRipple",slot:"Ripple"})(m7||(m7=BP`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),Ia.rippleVisible,nTe,vk,({theme:t})=>t.transitions.easing.easeInOut,Ia.ripplePulsate,({theme:t})=>t.transitions.duration.shorter,Ia.child,Ia.childLeaving,rTe,vk,({theme:t})=>t.transitions.easing.easeInOut,Ia.childPulsate,iTe,({theme:t})=>t.transitions.easing.easeInOut),aTe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:o}=r,a=rt(r,eTe),[c,l]=N.useState([]),u=N.useRef(0),d=N.useRef(null);N.useEffect(()=>{d.current&&(d.current(),d.current=null)},[c]);const h=N.useRef(!1),f=Ad(),p=N.useRef(null),g=N.useRef(null),m=N.useCallback(S=>{const{pulsate:P,rippleX:_,rippleY:I,rippleSize:C,cb:A}=S;l(M=>[...M,H.jsx(oTe,{classes:{ripple:Fe(s.ripple,Ia.ripple),rippleVisible:Fe(s.rippleVisible,Ia.rippleVisible),ripplePulsate:Fe(s.ripplePulsate,Ia.ripplePulsate),child:Fe(s.child,Ia.child),childLeaving:Fe(s.childLeaving,Ia.childLeaving),childPulsate:Fe(s.childPulsate,Ia.childPulsate)},timeout:vk,pulsate:P,rippleX:_,rippleY:I,rippleSize:C},u.current)]),u.current+=1,d.current=A},[s]),y=N.useCallback((S={},P={},_=()=>{})=>{const{pulsate:I=!1,center:C=i||P.pulsate,fakeElement:A=!1}=P;if((S==null?void 0:S.type)==="mousedown"&&h.current){h.current=!1;return}(S==null?void 0:S.type)==="touchstart"&&(h.current=!0);const M=A?null:g.current,k=M?M.getBoundingClientRect():{width:0,height:0,left:0,top:0};let O,B,$;if(C||S===void 0||S.clientX===0&&S.clientY===0||!S.clientX&&!S.touches)O=Math.round(k.width/2),B=Math.round(k.height/2);else{const{clientX:U,clientY:q}=S.touches&&S.touches.length>0?S.touches[0]:S;O=Math.round(U-k.left),B=Math.round(q-k.top)}if(C)$=Math.sqrt((2*k.width**2+k.height**2)/3),$%2===0&&($+=1);else{const U=Math.max(Math.abs((M?M.clientWidth:0)-O),O)*2+2,q=Math.max(Math.abs((M?M.clientHeight:0)-B),B)*2+2;$=Math.sqrt(U**2+q**2)}S!=null&&S.touches?p.current===null&&(p.current=()=>{m({pulsate:I,rippleX:O,rippleY:B,rippleSize:$,cb:_})},f.start(tTe,()=>{p.current&&(p.current(),p.current=null)})):m({pulsate:I,rippleX:O,rippleY:B,rippleSize:$,cb:_})},[i,m,f]),b=N.useCallback(()=>{y({},{pulsate:!0})},[y]),x=N.useCallback((S,P)=>{if(f.clear(),(S==null?void 0:S.type)==="touchend"&&p.current){p.current(),p.current=null,f.start(0,()=>{x(S,P)});return}p.current=null,l(_=>_.length>0?_.slice(1):_),d.current=P},[f]);return N.useImperativeHandle(n,()=>({pulsate:b,start:y,stop:x}),[b,y,x]),H.jsx(sTe,z({className:Fe(Ia.root,s.root,o),ref:g},a,{children:H.jsx(PI,{component:null,exit:!0,children:c})}))});function qq(t){return xt("MuiButtonBase",t)}const Kq=wt("MuiButtonBase",["root","disabled","focusVisible"]),lTe=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],cTe=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,o=_t({root:["root",e&&"disabled",n&&"focusVisible"]},qq,i);return n&&r&&(o.root+=` ${r}`),o},uTe=Ue("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Kq.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Yi=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:o,className:a,component:c="button",disabled:l=!1,disableRipple:u=!1,disableTouchRipple:d=!1,focusRipple:h=!1,LinkComponent:f="a",onBlur:p,onClick:g,onContextMenu:m,onDragLeave:y,onFocus:b,onFocusVisible:x,onKeyDown:S,onKeyUp:P,onMouseDown:_,onMouseLeave:I,onMouseUp:C,onTouchEnd:A,onTouchMove:M,onTouchStart:k,tabIndex:O=0,TouchRippleProps:B,touchRippleRef:$,type:U}=r,q=rt(r,lTe),K=N.useRef(null),V=N.useRef(null),G=or(V,$),{isFocusVisibleRef:j,onFocus:Q,onBlur:se,ref:Z}=Ev(),[ie,pe]=N.useState(!1);l&&ie&&pe(!1),N.useImperativeHandle(i,()=>({focusVisible:()=>{pe(!0),K.current.focus()}}),[]);const[ue,le]=N.useState(!1);N.useEffect(()=>{le(!0)},[]);const ae=ue&&!u&&!l;N.useEffect(()=>{ie&&h&&!u&&ue&&V.current.pulsate()},[u,h,ie,ue]);function _e(ge,Se,Ie=d){return Yr(me=>(Se&&Se(me),!Ie&&V.current&&V.current[ge](me),!0))}const ye=_e("start",_),Ae=_e("stop",m),Oe=_e("stop",y),Be=_e("stop",C),ce=_e("stop",ge=>{ie&&ge.preventDefault(),I&&I(ge)}),Ge=_e("start",k),Pe=_e("stop",A),He=_e("stop",M),Re=_e("stop",ge=>{se(ge),j.current===!1&&pe(!1),p&&p(ge)},!1),je=Yr(ge=>{K.current||(K.current=ge.currentTarget),Q(ge),j.current===!0&&(pe(!0),x&&x(ge)),b&&b(ge)}),te=()=>{const ge=K.current;return c&&c!=="button"&&!(ge.tagName==="A"&&ge.href)},ee=N.useRef(!1),X=Yr(ge=>{h&&!ee.current&&ie&&V.current&&ge.key===" "&&(ee.current=!0,V.current.stop(ge,()=>{V.current.start(ge)})),ge.target===ge.currentTarget&&te()&&ge.key===" "&&ge.preventDefault(),S&&S(ge),ge.target===ge.currentTarget&&te()&&ge.key==="Enter"&&!l&&(ge.preventDefault(),g&&g(ge))}),we=Yr(ge=>{h&&ge.key===" "&&V.current&&ie&&!ge.defaultPrevented&&(ee.current=!1,V.current.stop(ge,()=>{V.current.pulsate(ge)})),P&&P(ge),g&&ge.target===ge.currentTarget&&te()&&ge.key===" "&&!ge.defaultPrevented&&g(ge)});let Ne=c;Ne==="button"&&(q.href||q.to)&&(Ne=f);const We={};Ne==="button"?(We.type=U===void 0?"button":U,We.disabled=l):(!q.href&&!q.to&&(We.role="button"),l&&(We["aria-disabled"]=l));const xe=or(n,Z,K),Ve=z({},r,{centerRipple:s,component:c,disabled:l,disableRipple:u,disableTouchRipple:d,focusRipple:h,tabIndex:O,focusVisible:ie}),be=cTe(Ve);return H.jsxs(uTe,z({as:Ne,className:Fe(be.root,a),ownerState:Ve,onBlur:Re,onClick:g,onContextMenu:Ae,onFocus:je,onKeyDown:X,onKeyUp:we,onMouseDown:ye,onMouseLeave:ce,onMouseUp:Be,onDragLeave:Oe,onTouchEnd:Pe,onTouchMove:He,onTouchStart:Ge,ref:xe,tabIndex:l?-1:O,type:U},We,q,{children:[o,ae?H.jsx(aTe,z({ref:G,center:s},B)):null]}))});function Gq(t){return xt("MuiAccordionSummary",t)}const xm=wt("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),dTe=["children","className","expandIcon","focusVisibleClassName","onClick"],fTe=t=>{const{classes:e,expanded:n,disabled:r,disableGutters:i}=t;return _t({root:["root",n&&"expanded",r&&"disabled",!i&&"gutters"],focusVisible:["focusVisible"],content:["content",n&&"expanded",!i&&"contentGutters"],expandIconWrapper:["expandIconWrapper",n&&"expanded"]},Gq,e)},hTe=Ue(Yi,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>{const e={duration:t.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],e),[`&.${xm.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${xm.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`&:hover:not(.${xm.disabled})`]:{cursor:"pointer"},variants:[{props:n=>!n.disableGutters,style:{[`&.${xm.expanded}`]:{minHeight:64}}}]}}),pTe=Ue("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(t,e)=>e.content})(({theme:t})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),[`&.${xm.expanded}`]:{margin:"20px 0"}}}]})),mTe=Ue("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(t,e)=>e.expandIconWrapper})(({theme:t})=>({display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),[`&.${xm.expanded}`]:{transform:"rotate(180deg)"}})),gTe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiAccordionSummary"}),{children:i,className:s,expandIcon:o,focusVisibleClassName:a,onClick:c}=r,l=rt(r,dTe),{disabled:u=!1,disableGutters:d,expanded:h,toggle:f}=N.useContext(Hq),p=y=>{f&&f(y),c&&c(y)},g=z({},r,{expanded:h,disabled:u,disableGutters:d}),m=fTe(g);return H.jsxs(hTe,z({focusRipple:!1,disableRipple:!0,disabled:u,component:"div","aria-expanded":h,className:Fe(m.root,s),focusVisibleClassName:Fe(m.focusVisible,a),onClick:p,ref:n,ownerState:g},l,{children:[H.jsx(pTe,{className:m.content,ownerState:g,children:i}),o&&H.jsx(mTe,{className:m.expandIconWrapper,ownerState:g,children:o})]}))});function Xq(t){return xt("MuiAlert",t)}const bk=wt("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function Yq(t){return xt("MuiIconButton",t)}const Zq=wt("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),yTe=["edge","children","className","color","disabled","disableFocusRipple","size"],vTe=t=>{const{classes:e,disabled:n,color:r,edge:i,size:s}=t,o={root:["root",n&&"disabled",r!=="default"&&`color${qe(r)}`,i&&`edge${qe(i)}`,`size${qe(s)}`]};return _t(o,Yq,e)},bTe=Ue(Yi,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="default"&&e[`color${qe(n.color)}`],n.edge&&e[`edge${qe(n.edge)}`],e[`size${qe(n.size)}`]]}})(({theme:t,ownerState:e})=>z({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:pt.alpha(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}),({theme:t,ownerState:e})=>{var n;const r=(n=(t.vars||t).palette)==null?void 0:n[e.color];return z({},e.color==="inherit"&&{color:"inherit"},e.color!=="inherit"&&e.color!=="default"&&z({color:r==null?void 0:r.main},!e.disableRipple&&{"&:hover":z({},r&&{backgroundColor:t.vars?`rgba(${r.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:pt.alpha(r.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),e.size==="small"&&{padding:5,fontSize:t.typography.pxToRem(18)},e.size==="large"&&{padding:12,fontSize:t.typography.pxToRem(28)},{[`&.${Zq.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})}),Zf=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiIconButton"}),{edge:i=!1,children:s,className:o,color:a="default",disabled:c=!1,disableFocusRipple:l=!1,size:u="medium"}=r,d=rt(r,yTe),h=z({},r,{edge:i,color:a,disabled:c,disableFocusRipple:l,size:u}),f=vTe(h);return H.jsx(bTe,z({className:Fe(f.root,o),centerRipple:!0,focusRipple:!l,disabled:c,ref:n},d,{ownerState:h,children:s}))}),xTe=Wr(H.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),wTe=Wr(H.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),_Te=Wr(H.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),STe=Wr(H.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),Jq=Wr(H.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),ETe=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],TTe=t=>{const{variant:e,color:n,severity:r,classes:i}=t,s={root:["root",`color${qe(n||r)}`,`${e}${qe(n||r)}`,`${e}`],icon:["icon"],message:["message"],action:["action"]};return _t(s,Xq,i)},ITe=Ue(Da,{name:"MuiAlert",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${qe(n.color||n.severity)}`]]}})(({theme:t})=>{const e=t.palette.mode==="light"?pt.darken:pt.lighten,n=t.palette.mode==="light"?pt.lighten:pt.darken;return z({},t.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter(([,r])=>r.main&&r.light).map(([r])=>({props:{colorSeverity:r,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert[`${r}Color`]:e(t.palette[r].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${r}StandardBg`]:n(t.palette[r].light,.9),[`& .${bk.icon}`]:t.vars?{color:t.vars.palette.Alert[`${r}IconColor`]}:{color:t.palette[r].main}}})),...Object.entries(t.palette).filter(([,r])=>r.main&&r.light).map(([r])=>({props:{colorSeverity:r,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert[`${r}Color`]:e(t.palette[r].light,.6),border:`1px solid ${(t.vars||t).palette[r].light}`,[`& .${bk.icon}`]:t.vars?{color:t.vars.palette.Alert[`${r}IconColor`]}:{color:t.palette[r].main}}})),...Object.entries(t.palette).filter(([,r])=>r.main&&r.dark).map(([r])=>({props:{colorSeverity:r,variant:"filled"},style:z({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert[`${r}FilledColor`],backgroundColor:t.vars.palette.Alert[`${r}FilledBg`]}:{backgroundColor:t.palette.mode==="dark"?t.palette[r].dark:t.palette[r].main,color:t.palette.getContrastText(t.palette[r].main)})}))]})}),PTe=Ue("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(t,e)=>e.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),CTe=Ue("div",{name:"MuiAlert",slot:"Message",overridesResolver:(t,e)=>e.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),g7=Ue("div",{name:"MuiAlert",slot:"Action",overridesResolver:(t,e)=>e.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),y7={success:H.jsx(xTe,{fontSize:"inherit"}),warning:H.jsx(wTe,{fontSize:"inherit"}),error:H.jsx(_Te,{fontSize:"inherit"}),info:H.jsx(STe,{fontSize:"inherit"})},MTe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiAlert"}),{action:i,children:s,className:o,closeText:a="Close",color:c,components:l={},componentsProps:u={},icon:d,iconMapping:h=y7,onClose:f,role:p="alert",severity:g="success",slotProps:m={},slots:y={},variant:b="standard"}=r,x=rt(r,ETe),S=z({},r,{color:c,severity:g,variant:b,colorSeverity:c||g}),P=TTe(S),_={slots:z({closeButton:l.CloseButton,closeIcon:l.CloseIcon},y),slotProps:z({},u,m)},[I,C]=rI("closeButton",{elementType:Zf,externalForwardedProps:_,ownerState:S}),[A,M]=rI("closeIcon",{elementType:Jq,externalForwardedProps:_,ownerState:S});return H.jsxs(ITe,z({role:p,elevation:0,ownerState:S,className:Fe(P.root,o),ref:n},x,{children:[d!==!1?H.jsx(PTe,{ownerState:S,className:P.icon,children:d||h[g]||y7[g]}):null,H.jsx(CTe,{ownerState:S,className:P.message,children:s}),i!=null?H.jsx(g7,{ownerState:S,className:P.action,children:i}):null,i==null&&f?H.jsx(g7,{ownerState:S,className:P.action,children:H.jsx(I,z({size:"small","aria-label":a,title:a,color:"inherit",onClick:f},C,{children:H.jsx(A,z({fontSize:"small"},M))}))}):null]}))});function Qq(t){return xt("MuiTypography",t)}const ATe=wt("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),RTe=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],kTe=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:s,classes:o}=t,a={root:["root",s,t.align!=="inherit"&&`align${qe(e)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return _t(a,Qq,o)},OTe=Ue("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${qe(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(({theme:t,ownerState:e})=>z({margin:0},e.variant==="inherit"&&{font:"inherit"},e.variant!=="inherit"&&t.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),v7={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},NTe={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},LTe=t=>NTe[t]||t,Ds=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiTypography"}),i=LTe(r.color),s=_v(z({},r,{color:i})),{align:o="inherit",className:a,component:c,gutterBottom:l=!1,noWrap:u=!1,paragraph:d=!1,variant:h="body1",variantMapping:f=v7}=s,p=rt(s,RTe),g=z({},s,{align:o,color:i,className:a,component:c,gutterBottom:l,noWrap:u,paragraph:d,variant:h,variantMapping:f}),m=c||(d?"p":f[h]||v7[h])||"span",y=kTe(g);return H.jsx(OTe,z({as:m,ref:n,ownerState:g,className:Fe(y.root,a)},p))});function eK(t){return xt("MuiAlertTitle",t)}const DTe=wt("MuiAlertTitle",["root"]),BTe=["className"],FTe=t=>{const{classes:e}=t;return _t({root:["root"]},eK,e)},UTe=Ue(Ds,{name:"MuiAlertTitle",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({fontWeight:t.typography.fontWeightMedium,marginTop:-2})),$Te=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiAlertTitle"}),{className:i}=r,s=rt(r,BTe),o=r,a=FTe(o);return H.jsx(UTe,z({gutterBottom:!0,component:"div",ownerState:o,ref:n,className:Fe(a.root,i)},s))});function tK(t){return xt("MuiAppBar",t)}const zTe=wt("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]),HTe=["className","color","enableColorOnDark","position"],VTe=t=>{const{color:e,position:n,classes:r}=t,i={root:["root",`color${qe(e)}`,`position${qe(n)}`]};return _t(i,tK,r)},tT=(t,e)=>t?`${t==null?void 0:t.replace(")","")}, ${e})`:e,WTe=Ue(Da,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${qe(n.position)}`],e[`color${qe(n.color)}`]]}})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[900];return z({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},e.position==="fixed"&&{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},e.position==="absolute"&&{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},e.position==="sticky"&&{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},e.position==="static"&&{position:"static"},e.position==="relative"&&{position:"relative"},!t.vars&&z({},e.color==="default"&&{backgroundColor:n,color:t.palette.getContrastText(n)},e.color&&e.color!=="default"&&e.color!=="inherit"&&e.color!=="transparent"&&{backgroundColor:t.palette[e.color].main,color:t.palette[e.color].contrastText},e.color==="inherit"&&{color:"inherit"},t.palette.mode==="dark"&&!e.enableColorOnDark&&{backgroundColor:null,color:null},e.color==="transparent"&&z({backgroundColor:"transparent",color:"inherit"},t.palette.mode==="dark"&&{backgroundImage:"none"})),t.vars&&z({},e.color==="default"&&{"--AppBar-background":e.enableColorOnDark?t.vars.palette.AppBar.defaultBg:tT(t.vars.palette.AppBar.darkBg,t.vars.palette.AppBar.defaultBg),"--AppBar-color":e.enableColorOnDark?t.vars.palette.text.primary:tT(t.vars.palette.AppBar.darkColor,t.vars.palette.text.primary)},e.color&&!e.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":e.enableColorOnDark?t.vars.palette[e.color].main:tT(t.vars.palette.AppBar.darkBg,t.vars.palette[e.color].main),"--AppBar-color":e.enableColorOnDark?t.vars.palette[e.color].contrastText:tT(t.vars.palette.AppBar.darkColor,t.vars.palette[e.color].contrastText)},!["inherit","transparent"].includes(e.color)&&{backgroundColor:"var(--AppBar-background)"},{color:e.color==="inherit"?"inherit":"var(--AppBar-color)"},e.color==="transparent"&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),jTe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiAppBar"}),{className:i,color:s="primary",enableColorOnDark:o=!1,position:a="fixed"}=r,c=rt(r,HTe),l=z({},r,{color:s,position:a,enableColorOnDark:o}),u=VTe(l);return H.jsx(WTe,z({square:!0,component:"header",ownerState:l,elevation:4,className:Fe(u.root,i,a==="fixed"&&"mui-fixed"),ref:n},c))});function b7(t){return typeof t.normalize<"u"?t.normalize("NFD").replace(/[\u0300-\u036f]/g,""):t}function nK(t={}){const{ignoreAccents:e=!0,ignoreCase:n=!0,limit:r,matchFrom:i="any",stringify:s,trim:o=!1}=t;return(a,{inputValue:c,getOptionLabel:l})=>{let u=o?c.trim():c;n&&(u=u.toLowerCase()),e&&(u=b7(u));const d=u?a.filter(h=>{let f=(s||l)(h);return n&&(f=f.toLowerCase()),e&&(f=b7(f)),i==="start"?f.indexOf(u)===0:f.indexOf(u)>-1}):a;return typeof r=="number"?d.slice(0,r):d}}function nT(t,e){for(let n=0;n<t.length;n+=1)if(e(t[n]))return n;return-1}const qTe=nK(),KTe=5,GTe=t=>{var e;return t.current!==null&&((e=t.current.parentElement)==null?void 0:e.contains(document.activeElement))},XTe=[];function rK(t){const{unstable_isActiveElementInListbox:e=GTe,unstable_classNamePrefix:n="Mui",autoComplete:r=!1,autoHighlight:i=!1,autoSelect:s=!1,blurOnSelect:o=!1,clearOnBlur:a=!t.freeSolo,clearOnEscape:c=!1,componentName:l="useAutocomplete",defaultValue:u=t.multiple?XTe:null,disableClearable:d=!1,disableCloseOnSelect:h=!1,disabled:f,disabledItemsFocusable:p=!1,disableListWrap:g=!1,filterOptions:m=qTe,filterSelectedOptions:y=!1,freeSolo:b=!1,getOptionDisabled:x,getOptionKey:S,getOptionLabel:P=at=>{var Je;return(Je=at.label)!=null?Je:at},groupBy:_,handleHomeEndKeys:I=!t.freeSolo,id:C,includeInputInList:A=!1,inputValue:M,isOptionEqualToValue:k=(at,Je)=>at===Je,multiple:O=!1,onChange:B,onClose:$,onHighlightChange:U,onInputChange:q,onOpen:K,open:V,openOnFocus:G=!1,options:j,readOnly:Q=!1,selectOnFocus:se=!t.freeSolo,value:Z}=t,ie=_c(C);let pe=P;pe=at=>{const Je=P(at);return typeof Je!="string"?String(Je):Je};const ue=N.useRef(!1),le=N.useRef(!0),ae=N.useRef(null),_e=N.useRef(null),[ye,Ae]=N.useState(null),[Oe,Be]=N.useState(-1),ce=i?0:-1,Ge=N.useRef(ce),[Pe,He]=ta({controlled:Z,default:u,name:l}),[Re,je]=ta({controlled:M,default:"",name:l,state:"inputValue"}),[te,ee]=N.useState(!1),X=N.useCallback((at,Je)=>{if(!(O?Pe.length<Je.length:Je!==null)&&!a)return;let Ht;if(O)Ht="";else if(Je==null)Ht="";else{const nn=pe(Je);Ht=typeof nn=="string"?nn:""}Re!==Ht&&(je(Ht),q&&q(at,Ht,"reset"))},[pe,Re,O,q,je,a,Pe]),[we,Ne]=ta({controlled:V,default:!1,name:l,state:"open"}),[We,xe]=N.useState(!0),Ve=!O&&Pe!=null&&Re===pe(Pe),be=we&&!Q,ge=be?m(j.filter(at=>!(y&&(O?Pe:[Pe]).some(Je=>Je!==null&&k(at,Je)))),{inputValue:Ve&&We?"":Re,getOptionLabel:pe}):[],Se=a4({filteredOptions:ge,value:Pe,inputValue:Re});N.useEffect(()=>{const at=Pe!==Se.value;te&&!at||b&&!at||X(null,Pe)},[Pe,X,te,Se.value,b]);const Ie=we&&ge.length>0&&!Q,me=Yr(at=>{at===-1?ae.current.focus():ye.querySelector(`[data-tag-index="${at}"]`).focus()});N.useEffect(()=>{O&&Oe>Pe.length-1&&(Be(-1),me(-1))},[Pe,O,Oe,me]);function Ee(at,Je){if(!_e.current||at<0||at>=ge.length)return-1;let At=at;for(;;){const Ht=_e.current.querySelector(`[data-option-index="${At}"]`),nn=p?!1:!Ht||Ht.disabled||Ht.getAttribute("aria-disabled")==="true";if(Ht&&Ht.hasAttribute("tabindex")&&!nn)return At;if(Je==="next"?At=(At+1)%ge.length:At=(At-1+ge.length)%ge.length,At===at)return-1}}const oe=Yr(({event:at,index:Je,reason:At="auto"})=>{if(Ge.current=Je,Je===-1?ae.current.removeAttribute("aria-activedescendant"):ae.current.setAttribute("aria-activedescendant",`${ie}-option-${Je}`),U&&U(at,Je===-1?null:ge[Je],At),!_e.current)return;const Ht=_e.current.querySelector(`[role="option"].${n}-focused`);Ht&&(Ht.classList.remove(`${n}-focused`),Ht.classList.remove(`${n}-focusVisible`));let nn=_e.current;if(_e.current.getAttribute("role")!=="listbox"&&(nn=_e.current.parentElement.querySelector('[role="listbox"]')),!nn)return;if(Je===-1){nn.scrollTop=0;return}const Vt=_e.current.querySelector(`[data-option-index="${Je}"]`);if(Vt&&(Vt.classList.add(`${n}-focused`),At==="keyboard"&&Vt.classList.add(`${n}-focusVisible`),nn.scrollHeight>nn.clientHeight&&At!=="mouse"&&At!=="touch")){const Tn=Vt,ve=nn.clientHeight+nn.scrollTop,tt=Tn.offsetTop+Tn.offsetHeight;tt>ve?nn.scrollTop=tt-nn.clientHeight:Tn.offsetTop-Tn.offsetHeight*(_?1.3:0)<nn.scrollTop&&(nn.scrollTop=Tn.offsetTop-Tn.offsetHeight*(_?1.3:0))}}),ne=Yr(({event:at,diff:Je,direction:At="next",reason:Ht="auto"})=>{if(!be)return;const Vt=Ee((()=>{const Tn=ge.length-1;if(Je==="reset")return ce;if(Je==="start")return 0;if(Je==="end")return Tn;const ve=Ge.current+Je;return ve<0?ve===-1&&A?-1:g&&Ge.current!==-1||Math.abs(Je)>1?0:Tn:ve>Tn?ve===Tn+1&&A?-1:g||Math.abs(Je)>1?Tn:0:ve})(),At);if(oe({index:Vt,reason:Ht,event:at}),r&&Je!=="reset")if(Vt===-1)ae.current.value=Re;else{const Tn=pe(ge[Vt]);ae.current.value=Tn,Tn.toLowerCase().indexOf(Re.toLowerCase())===0&&Re.length>0&&ae.current.setSelectionRange(Re.length,Tn.length)}}),de=()=>{const at=(Je,At)=>{const Ht=Je?pe(Je):"",nn=At?pe(At):"";return Ht===nn};if(Ge.current!==-1&&Se.filteredOptions&&Se.filteredOptions.length!==ge.length&&Se.inputValue===Re&&(O?Pe.length===Se.value.length&&Se.value.every((Je,At)=>pe(Pe[At])===pe(Je)):at(Se.value,Pe))){const Je=Se.filteredOptions[Ge.current];if(Je)return nT(ge,At=>pe(At)===pe(Je))}return-1},Te=N.useCallback(()=>{if(!be)return;const at=de();if(at!==-1){Ge.current=at;return}const Je=O?Pe[0]:Pe;if(ge.length===0||Je==null){ne({diff:"reset"});return}if(_e.current){if(Je!=null){const At=ge[Ge.current];if(O&&At&&nT(Pe,nn=>k(At,nn))!==-1)return;const Ht=nT(ge,nn=>k(nn,Je));Ht===-1?ne({diff:"reset"}):oe({index:Ht});return}if(Ge.current>=ge.length-1){oe({index:ge.length-1});return}oe({index:Ge.current})}},[ge.length,O?!1:Pe,y,ne,oe,be,Re,O]),ke=Yr(at=>{Mw(_e,at),at&&Te()});N.useEffect(()=>{Te()},[Te]);const he=at=>{we||(Ne(!0),xe(!0),K&&K(at))},Xe=(at,Je)=>{we&&(Ne(!1),$&&$(at,Je))},$e=(at,Je,At,Ht)=>{if(O){if(Pe.length===Je.length&&Pe.every((nn,Vt)=>nn===Je[Vt]))return}else if(Pe===Je)return;B&&B(at,Je,At,Ht),He(Je)},Qe=N.useRef(!1),ut=(at,Je,At="selectOption",Ht="options")=>{let nn=At,Vt=Je;if(O){Vt=Array.isArray(Pe)?Pe.slice():[];const Tn=nT(Vt,ve=>k(Je,ve));Tn===-1?Vt.push(Je):Ht!=="freeSolo"&&(Vt.splice(Tn,1),nn="removeOption")}X(at,Vt),$e(at,Vt,nn,{option:Je}),!h&&(!at||!at.ctrlKey&&!at.metaKey)&&Xe(at,nn),(o===!0||o==="touch"&&Qe.current||o==="mouse"&&!Qe.current)&&ae.current.blur()};function gt(at,Je){if(at===-1)return-1;let At=at;for(;;){if(Je==="next"&&At===Pe.length||Je==="previous"&&At===-1)return-1;const Ht=ye.querySelector(`[data-tag-index="${At}"]`);if(!Ht||!Ht.hasAttribute("tabindex")||Ht.disabled||Ht.getAttribute("aria-disabled")==="true")At+=Je==="next"?1:-1;else return At}}const Tt=(at,Je)=>{if(!O)return;Re===""&&Xe(at,"toggleInput");let At=Oe;Oe===-1?Re===""&&Je==="previous"&&(At=Pe.length-1):(At+=Je==="next"?1:-1,At<0&&(At=0),At===Pe.length&&(At=-1)),At=gt(At,Je),Be(At),me(At)},Kt=at=>{ue.current=!0,je(""),q&&q(at,"","clear"),$e(at,O?[]:null,"clear")},Zt=at=>Je=>{if(at.onKeyDown&&at.onKeyDown(Je),!Je.defaultMuiPrevented&&(Oe!==-1&&["ArrowLeft","ArrowRight"].indexOf(Je.key)===-1&&(Be(-1),me(-1)),Je.which!==229))switch(Je.key){case"Home":be&&I&&(Je.preventDefault(),ne({diff:"start",direction:"next",reason:"keyboard",event:Je}));break;case"End":be&&I&&(Je.preventDefault(),ne({diff:"end",direction:"previous",reason:"keyboard",event:Je}));break;case"PageUp":Je.preventDefault(),ne({diff:-5,direction:"previous",reason:"keyboard",event:Je}),he(Je);break;case"PageDown":Je.preventDefault(),ne({diff:KTe,direction:"next",reason:"keyboard",event:Je}),he(Je);break;case"ArrowDown":Je.preventDefault(),ne({diff:1,direction:"next",reason:"keyboard",event:Je}),he(Je);break;case"ArrowUp":Je.preventDefault(),ne({diff:-1,direction:"previous",reason:"keyboard",event:Je}),he(Je);break;case"ArrowLeft":Tt(Je,"previous");break;case"ArrowRight":Tt(Je,"next");break;case"Enter":if(Ge.current!==-1&&be){const At=ge[Ge.current],Ht=x?x(At):!1;if(Je.preventDefault(),Ht)return;ut(Je,At,"selectOption"),r&&ae.current.setSelectionRange(ae.current.value.length,ae.current.value.length)}else b&&Re!==""&&Ve===!1&&(O&&Je.preventDefault(),ut(Je,Re,"createOption","freeSolo"));break;case"Escape":be?(Je.preventDefault(),Je.stopPropagation(),Xe(Je,"escape")):c&&(Re!==""||O&&Pe.length>0)&&(Je.preventDefault(),Je.stopPropagation(),Kt(Je));break;case"Backspace":if(O&&!Q&&Re===""&&Pe.length>0){const At=Oe===-1?Pe.length-1:Oe,Ht=Pe.slice();Ht.splice(At,1),$e(Je,Ht,"removeOption",{option:Pe[At]})}break;case"Delete":if(O&&!Q&&Re===""&&Pe.length>0&&Oe!==-1){const At=Oe,Ht=Pe.slice();Ht.splice(At,1),$e(Je,Ht,"removeOption",{option:Pe[At]})}break}},Bt=at=>{ee(!0),G&&!ue.current&&he(at)},_n=at=>{if(e(_e)){ae.current.focus();return}ee(!1),le.current=!0,ue.current=!1,s&&Ge.current!==-1&&be?ut(at,ge[Ge.current],"blur"):s&&b&&Re!==""?ut(at,Re,"blur","freeSolo"):a&&X(at,Pe),Xe(at,"blur")},hn=at=>{const Je=at.target.value;Re!==Je&&(je(Je),xe(!1),q&&q(at,Je,"input")),Je===""?!d&&!O&&$e(at,null,"clear"):he(at)},bn=at=>{const Je=Number(at.currentTarget.getAttribute("data-option-index"));Ge.current!==Je&&oe({event:at,index:Je,reason:"mouse"})},Wn=at=>{oe({event:at,index:Number(at.currentTarget.getAttribute("data-option-index")),reason:"touch"}),Qe.current=!0},Un=at=>{const Je=Number(at.currentTarget.getAttribute("data-option-index"));ut(at,ge[Je],"selectOption"),Qe.current=!1},Jn=at=>Je=>{const At=Pe.slice();At.splice(at,1),$e(Je,At,"removeOption",{option:Pe[at]})},ci=at=>{we?Xe(at,"toggleInput"):he(at)},fr=at=>{at.currentTarget.contains(at.target)&&at.target.getAttribute("id")!==ie&&at.preventDefault()},Ur=at=>{at.currentTarget.contains(at.target)&&(ae.current.focus(),se&&le.current&&ae.current.selectionEnd-ae.current.selectionStart===0&&ae.current.select(),le.current=!1)},Zr=at=>{!f&&(Re===""||!we)&&ci(at)};let jr=b&&Re.length>0;jr=jr||(O?Pe.length>0:Pe!==null);let Pi=ge;return _&&(Pi=ge.reduce((at,Je,At)=>{const Ht=_(Je);return at.length>0&&at[at.length-1].group===Ht?at[at.length-1].options.push(Je):at.push({key:At,index:At,group:Ht,options:[Je]}),at},[])),f&&te&&_n(),{getRootProps:(at={})=>z({"aria-owns":Ie?`${ie}-listbox`:null},at,{onKeyDown:Zt(at),onMouseDown:fr,onClick:Ur}),getInputLabelProps:()=>({id:`${ie}-label`,htmlFor:ie}),getInputProps:()=>({id:ie,value:Re,onBlur:_n,onFocus:Bt,onChange:hn,onMouseDown:Zr,"aria-activedescendant":be?"":null,"aria-autocomplete":r?"both":"list","aria-controls":Ie?`${ie}-listbox`:void 0,"aria-expanded":Ie,autoComplete:"off",ref:ae,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:f}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:Kt}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:ci}),getTagProps:({index:at})=>z({key:at,"data-tag-index":at,tabIndex:-1},!Q&&{onDelete:Jn(at)}),getListboxProps:()=>({role:"listbox",id:`${ie}-listbox`,"aria-labelledby":`${ie}-label`,ref:ke,onMouseDown:at=>{at.preventDefault()}}),getOptionProps:({index:at,option:Je})=>{var At;const Ht=(O?Pe:[Pe]).some(Vt=>Vt!=null&&k(Je,Vt)),nn=x?x(Je):!1;return{key:(At=S==null?void 0:S(Je))!=null?At:pe(Je),tabIndex:-1,role:"option",id:`${ie}-option-${at}`,onMouseMove:bn,onClick:Un,onTouchStart:Wn,"data-option-index":at,"aria-disabled":nn,"aria-selected":Ht}},id:ie,inputValue:Re,value:Pe,dirty:jr,expanded:be&&ye,popupOpen:be,focused:te||Oe!==-1,anchorEl:ye,setAnchorEl:Ae,focusedTag:Oe,groupedOptions:Pi}}var tx={},x7;function YTe(){if(x7)return tx;x7=1,Object.defineProperty(tx,"__esModule",{value:!0}),tx.default=void 0;var t=r(uu()),e=Lq;function n(o){if(typeof WeakMap!="function")return null;var a=new WeakMap,c=new WeakMap;return(n=function(l){return l?c:a})(o)}function r(o,a){if(o&&o.__esModule)return o;if(o===null||typeof o!="object"&&typeof o!="function")return{default:o};var c=n(a);if(c&&c.has(o))return c.get(o);var l={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in o)if(d!=="default"&&Object.prototype.hasOwnProperty.call(o,d)){var h=u?Object.getOwnPropertyDescriptor(o,d):null;h&&(h.get||h.set)?Object.defineProperty(l,d,h):l[d]=o[d]}return l.default=o,c&&c.set(o,l),l}function i(o){return Object.keys(o).length===0}function s(o=null){const a=t.useContext(e.ThemeContext);return!a||i(a)?o:a}return tx.default=s,tx}var ZTe=YTe();const JTe=ah(ZTe);function QTe(t){return typeof t=="function"?t():t}const g4=N.forwardRef(function(e,n){const{children:r,container:i,disablePortal:s=!1}=e,[o,a]=N.useState(null),c=or(N.isValidElement(r)?Zd(r):null,n);if(fs(()=>{s||a(QTe(i)||document.body)},[i,s]),fs(()=>{if(o&&!s)return Mw(n,o),()=>{Mw(n,null)}},[n,o,s]),s){if(N.isValidElement(r)){const l={ref:c};return N.cloneElement(r,l)}return H.jsx(N.Fragment,{children:r})}return H.jsx(N.Fragment,{children:o&&tw.createPortal(r,o)})});function iK(t){return xt("MuiPopper",t)}wt("MuiPopper",["root"]);const e2e=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],t2e=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function n2e(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function xk(t){return typeof t=="function"?t():t}function r2e(t){return t.nodeType!==void 0}const i2e=t=>{const{classes:e}=t;return _t({root:["root"]},iK,e)},s2e={},o2e=N.forwardRef(function(e,n){var r;const{anchorEl:i,children:s,direction:o,disablePortal:a,modifiers:c,open:l,placement:u,popperOptions:d,popperRef:h,slotProps:f={},slots:p={},TransitionProps:g}=e,m=rt(e,e2e),y=N.useRef(null),b=or(y,n),x=N.useRef(null),S=or(x,h),P=N.useRef(S);fs(()=>{P.current=S},[S]),N.useImperativeHandle(h,()=>x.current,[]);const _=n2e(u,o),[I,C]=N.useState(_),[A,M]=N.useState(xk(i));N.useEffect(()=>{x.current&&x.current.forceUpdate()}),N.useEffect(()=>{i&&M(xk(i))},[i]),fs(()=>{if(!A||!l)return;const U=V=>{C(V.placement)};let q=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:V})=>{U(V)}}];c!=null&&(q=q.concat(c)),d&&d.modifiers!=null&&(q=q.concat(d.modifiers));const K=Are(A,y.current,z({placement:_},d,{modifiers:q}));return P.current(K),()=>{K.destroy(),P.current(null)}},[A,a,c,l,d,_]);const k={placement:I};g!==null&&(k.TransitionProps=g);const O=i2e(e),B=(r=p.root)!=null?r:"div",$=mi({elementType:B,externalSlotProps:f.root,externalForwardedProps:m,additionalProps:{role:"tooltip",ref:b},ownerState:e,className:O.root});return H.jsx(B,z({},$,{children:typeof s=="function"?s(k):s}))}),a2e=N.forwardRef(function(e,n){const{anchorEl:r,children:i,container:s,direction:o="ltr",disablePortal:a=!1,keepMounted:c=!1,modifiers:l,open:u,placement:d="bottom",popperOptions:h=s2e,popperRef:f,style:p,transition:g=!1,slotProps:m={},slots:y={}}=e,b=rt(e,t2e),[x,S]=N.useState(!0),P=()=>{S(!1)},_=()=>{S(!0)};if(!c&&!u&&(!g||x))return null;let I;if(s)I=s;else if(r){const M=xk(r);I=M&&r2e(M)?Fr(M).body:Fr(null).body}const C=!u&&c&&(!g||x)?"none":void 0,A=g?{in:u,onEnter:P,onExited:_}:void 0;return H.jsx(g4,{disablePortal:a,container:I,children:H.jsx(o2e,z({anchorEl:r,direction:o,disablePortal:a,modifiers:l,ref:n,open:g?!x:u,placement:d,popperOptions:h,popperRef:f,slotProps:m,slots:y},b,{style:z({position:"fixed",top:0,left:0,display:C},p),TransitionProps:A,children:i}))})}),l2e=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],c2e=Ue(a2e,{name:"MuiPopper",slot:"Root",overridesResolver:(t,e)=>e.root})({}),__=N.forwardRef(function(e,n){var r;const i=JTe(),s=Et({props:e,name:"MuiPopper"}),{anchorEl:o,component:a,components:c,componentsProps:l,container:u,disablePortal:d,keepMounted:h,modifiers:f,open:p,placement:g,popperOptions:m,popperRef:y,transition:b,slots:x,slotProps:S}=s,P=rt(s,l2e),_=(r=x==null?void 0:x.root)!=null?r:c==null?void 0:c.Root,I=z({anchorEl:o,container:u,disablePortal:d,keepMounted:h,modifiers:f,open:p,placement:g,popperOptions:m,popperRef:y,transition:b},P);return H.jsx(c2e,z({as:a,direction:i==null?void 0:i.direction,slots:{root:_},slotProps:S??l},I,{ref:n}))});function sK(t){return xt("MuiListSubheader",t)}const u2e=wt("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]),d2e=["className","color","component","disableGutters","disableSticky","inset"],f2e=t=>{const{classes:e,color:n,disableGutters:r,inset:i,disableSticky:s}=t,o={root:["root",n!=="default"&&`color${qe(n)}`,!r&&"gutters",i&&"inset",!s&&"sticky"]};return _t(o,sK,e)},h2e=Ue("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="default"&&e[`color${qe(n.color)}`],!n.disableGutters&&e.gutters,n.inset&&e.inset,!n.disableSticky&&e.sticky]}})(({theme:t,ownerState:e})=>z({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(t.vars||t).palette.text.secondary,fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(14)},e.color==="primary"&&{color:(t.vars||t).palette.primary.main},e.color==="inherit"&&{color:"inherit"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.inset&&{paddingLeft:72},!e.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(t.vars||t).palette.background.paper})),y4=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiListSubheader"}),{className:i,color:s="default",component:o="li",disableGutters:a=!1,disableSticky:c=!1,inset:l=!1}=r,u=rt(r,d2e),d=z({},r,{color:s,component:o,disableGutters:a,disableSticky:c,inset:l}),h=f2e(d);return H.jsx(h2e,z({as:o,className:Fe(h.root,i),ref:n,ownerState:d},u))});y4.muiSkipListHighlight=!0;const p2e=Wr(H.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function oK(t){return xt("MuiChip",t)}const pr=wt("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),m2e=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],g2e=t=>{const{classes:e,disabled:n,size:r,color:i,iconColor:s,onDelete:o,clickable:a,variant:c}=t,l={root:["root",c,n&&"disabled",`size${qe(r)}`,`color${qe(i)}`,a&&"clickable",a&&`clickableColor${qe(i)}`,o&&"deletable",o&&`deletableColor${qe(i)}`,`${c}${qe(i)}`],label:["label",`label${qe(r)}`],avatar:["avatar",`avatar${qe(r)}`,`avatarColor${qe(i)}`],icon:["icon",`icon${qe(r)}`,`iconColor${qe(s)}`],deleteIcon:["deleteIcon",`deleteIcon${qe(r)}`,`deleteIconColor${qe(i)}`,`deleteIcon${qe(c)}Color${qe(i)}`]};return _t(l,oK,e)},y2e=Ue("div",{name:"MuiChip",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{color:r,iconColor:i,clickable:s,onDelete:o,size:a,variant:c}=n;return[{[`& .${pr.avatar}`]:e.avatar},{[`& .${pr.avatar}`]:e[`avatar${qe(a)}`]},{[`& .${pr.avatar}`]:e[`avatarColor${qe(r)}`]},{[`& .${pr.icon}`]:e.icon},{[`& .${pr.icon}`]:e[`icon${qe(a)}`]},{[`& .${pr.icon}`]:e[`iconColor${qe(i)}`]},{[`& .${pr.deleteIcon}`]:e.deleteIcon},{[`& .${pr.deleteIcon}`]:e[`deleteIcon${qe(a)}`]},{[`& .${pr.deleteIcon}`]:e[`deleteIconColor${qe(r)}`]},{[`& .${pr.deleteIcon}`]:e[`deleteIcon${qe(c)}Color${qe(r)}`]},e.root,e[`size${qe(a)}`],e[`color${qe(r)}`],s&&e.clickable,s&&r!=="default"&&e[`clickableColor${qe(r)})`],o&&e.deletable,o&&r!=="default"&&e[`deletableColor${qe(r)}`],e[c],e[`${c}${qe(r)}`]]}})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?t.palette.grey[700]:t.palette.grey[300];return z({maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${pr.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${pr.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:n,fontSize:t.typography.pxToRem(12)},[`& .${pr.avatarColorPrimary}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},[`& .${pr.avatarColorSecondary}`]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},[`& .${pr.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},[`& .${pr.icon}`]:z({marginLeft:5,marginRight:-6},e.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},e.iconColor===e.color&&z({color:t.vars?t.vars.palette.Chip.defaultIconColor:n},e.color!=="default"&&{color:"inherit"})),[`& .${pr.deleteIcon}`]:z({WebkitTapHighlightColor:"transparent",color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.26)`:pt.alpha(t.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.4)`:pt.alpha(t.palette.text.primary,.4)}},e.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},e.color!=="default"&&{color:t.vars?`rgba(${t.vars.palette[e.color].contrastTextChannel} / 0.7)`:pt.alpha(t.palette[e.color].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[e.color].contrastText}})},e.size==="small"&&{height:24},e.color!=="default"&&{backgroundColor:(t.vars||t).palette[e.color].main,color:(t.vars||t).palette[e.color].contrastText},e.onDelete&&{[`&.${pr.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:pt.alpha(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},e.onDelete&&e.color!=="default"&&{[`&.${pr.focusVisible}`]:{backgroundColor:(t.vars||t).palette[e.color].dark}})},({theme:t,ownerState:e})=>z({},e.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:pt.alpha(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)},[`&.${pr.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:pt.alpha(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},"&:active":{boxShadow:(t.vars||t).shadows[1]}},e.clickable&&e.color!=="default"&&{[`&:hover, &.${pr.focusVisible}`]:{backgroundColor:(t.vars||t).palette[e.color].dark}}),({theme:t,ownerState:e})=>z({},e.variant==="outlined"&&{backgroundColor:"transparent",border:t.vars?`1px solid ${t.vars.palette.Chip.defaultBorder}`:`1px solid ${t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[700]}`,[`&.${pr.clickable}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${pr.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`& .${pr.avatar}`]:{marginLeft:4},[`& .${pr.avatarSmall}`]:{marginLeft:2},[`& .${pr.icon}`]:{marginLeft:4},[`& .${pr.iconSmall}`]:{marginLeft:2},[`& .${pr.deleteIcon}`]:{marginRight:5},[`& .${pr.deleteIconSmall}`]:{marginRight:3}},e.variant==="outlined"&&e.color!=="default"&&{color:(t.vars||t).palette[e.color].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.7)`:pt.alpha(t.palette[e.color].main,.7)}`,[`&.${pr.clickable}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:pt.alpha(t.palette[e.color].main,t.palette.action.hoverOpacity)},[`&.${pr.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.focusOpacity})`:pt.alpha(t.palette[e.color].main,t.palette.action.focusOpacity)},[`& .${pr.deleteIcon}`]:{color:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.7)`:pt.alpha(t.palette[e.color].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[e.color].main}}})),v2e=Ue("span",{name:"MuiChip",slot:"Label",overridesResolver:(t,e)=>{const{ownerState:n}=t,{size:r}=n;return[e.label,e[`label${qe(r)}`]]}})(({ownerState:t})=>z({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},t.variant==="outlined"&&{paddingLeft:11,paddingRight:11},t.size==="small"&&{paddingLeft:8,paddingRight:8},t.size==="small"&&t.variant==="outlined"&&{paddingLeft:7,paddingRight:7}));function w7(t){return t.key==="Backspace"||t.key==="Delete"}const aK=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiChip"}),{avatar:i,className:s,clickable:o,color:a="default",component:c,deleteIcon:l,disabled:u=!1,icon:d,label:h,onClick:f,onDelete:p,onKeyDown:g,onKeyUp:m,size:y="medium",variant:b="filled",tabIndex:x,skipFocusWhenDisabled:S=!1}=r,P=rt(r,m2e),_=N.useRef(null),I=or(_,n),C=G=>{G.stopPropagation(),p&&p(G)},A=G=>{G.currentTarget===G.target&&w7(G)&&G.preventDefault(),g&&g(G)},M=G=>{G.currentTarget===G.target&&(p&&w7(G)?p(G):G.key==="Escape"&&_.current&&_.current.blur()),m&&m(G)},k=o!==!1&&f?!0:o,O=k||p?Yi:c||"div",B=z({},r,{component:O,disabled:u,size:y,color:a,iconColor:N.isValidElement(d)&&d.props.color||a,onDelete:!!p,clickable:k,variant:b}),$=g2e(B),U=O===Yi?z({component:c||"div",focusVisibleClassName:$.focusVisible},p&&{disableRipple:!0}):{};let q=null;p&&(q=l&&N.isValidElement(l)?N.cloneElement(l,{className:Fe(l.props.className,$.deleteIcon),onClick:C}):H.jsx(p2e,{className:Fe($.deleteIcon),onClick:C}));let K=null;i&&N.isValidElement(i)&&(K=N.cloneElement(i,{className:Fe($.avatar,i.props.className)}));let V=null;return d&&N.isValidElement(d)&&(V=N.cloneElement(d,{className:Fe($.icon,d.props.className)})),H.jsxs(y2e,z({as:O,className:Fe($.root,s),disabled:k&&u?!0:void 0,onClick:f,onKeyDown:A,onKeyUp:M,ref:I,tabIndex:S&&u?-1:x,ownerState:B},U,P,{children:[K||V,H.jsx(v2e,{className:Fe($.label),ownerState:B,children:h}),q]}))}),b2e=["onChange","maxRows","minRows","style","value"];function rT(t){return parseInt(t,10)||0}const x2e={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function w2e(t){for(const e in t)return!1;return!0}function _7(t){return w2e(t)||t.outerHeightStyle===0&&!t.overflowing}const lK=N.forwardRef(function(e,n){const{onChange:r,maxRows:i,minRows:s=1,style:o,value:a}=e,c=rt(e,b2e),{current:l}=N.useRef(a!=null),u=N.useRef(null),d=or(n,u),h=N.useRef(null),f=N.useRef(null),p=N.useCallback(()=>{const x=u.current,S=f.current;if(!x||!S)return;const _=so(x).getComputedStyle(x);if(_.width==="0px")return{outerHeightStyle:0,overflowing:!1};S.style.width=_.width,S.value=x.value||e.placeholder||"x",S.value.slice(-1)===`
`&&(S.value+=" ");const I=_.boxSizing,C=rT(_.paddingBottom)+rT(_.paddingTop),A=rT(_.borderBottomWidth)+rT(_.borderTopWidth),M=S.scrollHeight;S.value="x";const k=S.scrollHeight;let O=M;s&&(O=Math.max(Number(s)*k,O)),i&&(O=Math.min(Number(i)*k,O)),O=Math.max(O,k);const B=O+(I==="border-box"?C+A:0),$=Math.abs(O-M)<=1;return{outerHeightStyle:B,overflowing:$}},[i,s,e.placeholder]),g=Yr(()=>{const x=u.current,S=p();if(!x||!S||_7(S))return!1;const P=S.outerHeightStyle;return h.current!=null&&h.current!==P}),m=N.useCallback(()=>{const x=u.current,S=p();if(!x||!S||_7(S))return;const P=S.outerHeightStyle;h.current!==P&&(h.current=P,x.style.height=`${P}px`),x.style.overflow=S.overflowing?"hidden":""},[p]),y=N.useRef(-1);fs(()=>{const x=Sv(m),S=u==null?void 0:u.current;if(!S)return;const P=so(S);P.addEventListener("resize",x);let _;return typeof ResizeObserver<"u"&&(_=new ResizeObserver(()=>{g()&&(_.unobserve(S),cancelAnimationFrame(y.current),m(),y.current=requestAnimationFrame(()=>{_.observe(S)}))}),_.observe(S)),()=>{x.clear(),cancelAnimationFrame(y.current),P.removeEventListener("resize",x),_&&_.disconnect()}},[p,m,g]),fs(()=>{m()});const b=x=>{l||m(),r&&r(x)};return H.jsxs(N.Fragment,{children:[H.jsx("textarea",z({value:a,onChange:b,ref:d,rows:s,style:o},c)),H.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:f,tabIndex:-1,style:z({},x2e.shadow,o,{paddingTop:0,paddingBottom:0})})]})});function Jd({props:t,states:e,muiFormControl:n}){return e.reduce((r,i)=>(r[i]=t[i],n&&typeof t[i]>"u"&&(r[i]=n[i]),r),{})}const FP=N.createContext(void 0);function Pl(){return N.useContext(FP)}function v4(t){return H.jsx(Twe,z({},t,{defaultTheme:LP,themeId:Kd}))}function S7(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function iI(t,e=!1){return t&&(S7(t.value)&&t.value!==""||e&&S7(t.defaultValue)&&t.defaultValue!=="")}function _2e(t){return t.startAdornment}function cK(t){return xt("MuiInputBase",t)}const Go=wt("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),S2e=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],UP=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,n.size==="small"&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e[`color${qe(n.color)}`],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},$P=(t,e)=>{const{ownerState:n}=t;return[e.input,n.size==="small"&&e.inputSizeSmall,n.multiline&&e.inputMultiline,n.type==="search"&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},E2e=t=>{const{classes:e,color:n,disabled:r,error:i,endAdornment:s,focused:o,formControl:a,fullWidth:c,hiddenLabel:l,multiline:u,readOnly:d,size:h,startAdornment:f,type:p}=t,g={root:["root",`color${qe(n)}`,r&&"disabled",i&&"error",c&&"fullWidth",o&&"focused",a&&"formControl",h&&h!=="medium"&&`size${qe(h)}`,u&&"multiline",f&&"adornedStart",s&&"adornedEnd",l&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled",p==="search"&&"inputTypeSearch",u&&"inputMultiline",h==="small"&&"inputSizeSmall",l&&"inputHiddenLabel",f&&"inputAdornedStart",s&&"inputAdornedEnd",d&&"readOnly"]};return _t(g,cK,e)},zP=Ue("div",{name:"MuiInputBase",slot:"Root",overridesResolver:UP})(({theme:t,ownerState:e})=>z({},t.typography.body1,{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Go.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"}},e.multiline&&z({padding:"4px 0 5px"},e.size==="small"&&{paddingTop:1}),e.fullWidth&&{width:"100%"})),HP=Ue("input",{name:"MuiInputBase",slot:"Input",overridesResolver:$P})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light",r=z({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),i={opacity:"0 !important"},s=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return z({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Go.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${Go.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},e.size==="small"&&{paddingTop:1},e.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},e.type==="search"&&{MozAppearance:"textfield"})}),T2e=H.jsx(v4,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),S_=N.forwardRef(function(e,n){var r;const i=Et({props:e,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:o,autoFocus:a,className:c,components:l={},componentsProps:u={},defaultValue:d,disabled:h,disableInjectingGlobalStyles:f,endAdornment:p,fullWidth:g=!1,id:m,inputComponent:y="input",inputProps:b={},inputRef:x,maxRows:S,minRows:P,multiline:_=!1,name:I,onBlur:C,onChange:A,onClick:M,onFocus:k,onKeyDown:O,onKeyUp:B,placeholder:$,readOnly:U,renderSuffix:q,rows:K,slotProps:V={},slots:G={},startAdornment:j,type:Q="text",value:se}=i,Z=rt(i,S2e),ie=b.value!=null?b.value:se,{current:pe}=N.useRef(ie!=null),ue=N.useRef(),le=N.useCallback(be=>{},[]),ae=or(ue,x,b.ref,le),[_e,ye]=N.useState(!1),Ae=Pl(),Oe=Jd({props:i,muiFormControl:Ae,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Oe.focused=Ae?Ae.focused:_e,N.useEffect(()=>{!Ae&&h&&_e&&(ye(!1),C&&C())},[Ae,h,_e,C]);const Be=Ae&&Ae.onFilled,ce=Ae&&Ae.onEmpty,Ge=N.useCallback(be=>{iI(be)?Be&&Be():ce&&ce()},[Be,ce]);fs(()=>{pe&&Ge({value:ie})},[ie,Ge,pe]);const Pe=be=>{if(Oe.disabled){be.stopPropagation();return}k&&k(be),b.onFocus&&b.onFocus(be),Ae&&Ae.onFocus?Ae.onFocus(be):ye(!0)},He=be=>{C&&C(be),b.onBlur&&b.onBlur(be),Ae&&Ae.onBlur?Ae.onBlur(be):ye(!1)},Re=(be,...ge)=>{if(!pe){const Se=be.target||ue.current;if(Se==null)throw new Error(Po(1));Ge({value:Se.value})}b.onChange&&b.onChange(be,...ge),A&&A(be,...ge)};N.useEffect(()=>{Ge(ue.current)},[]);const je=be=>{ue.current&&be.currentTarget===be.target&&ue.current.focus(),M&&M(be)};let te=y,ee=b;_&&te==="input"&&(K?ee=z({type:void 0,minRows:K,maxRows:K},ee):ee=z({type:void 0,maxRows:S,minRows:P},ee),te=lK);const X=be=>{Ge(be.animationName==="mui-auto-fill-cancel"?ue.current:{value:"x"})};N.useEffect(()=>{Ae&&Ae.setAdornedStart(!!j)},[Ae,j]);const we=z({},i,{color:Oe.color||"primary",disabled:Oe.disabled,endAdornment:p,error:Oe.error,focused:Oe.focused,formControl:Ae,fullWidth:g,hiddenLabel:Oe.hiddenLabel,multiline:_,size:Oe.size,startAdornment:j,type:Q}),Ne=E2e(we),We=G.root||l.Root||zP,xe=V.root||u.root||{},Ve=G.input||l.Input||HP;return ee=z({},ee,(r=V.input)!=null?r:u.input),H.jsxs(N.Fragment,{children:[!f&&T2e,H.jsxs(We,z({},xe,!vc(We)&&{ownerState:z({},we,xe.ownerState)},{ref:n,onClick:je},Z,{className:Fe(Ne.root,xe.className,c,U&&"MuiInputBase-readOnly"),children:[j,H.jsx(FP.Provider,{value:null,children:H.jsx(Ve,z({ownerState:we,"aria-invalid":Oe.error,"aria-describedby":s,autoComplete:o,autoFocus:a,defaultValue:d,disabled:Oe.disabled,id:m,onAnimationStart:X,name:I,placeholder:$,readOnly:U,required:Oe.required,rows:K,value:ie,onKeyDown:O,onKeyUp:B,type:Q},ee,!vc(Ve)&&{as:te,ownerState:z({},we,ee.ownerState)},{ref:ae,className:Fe(Ne.input,ee.className,U&&"MuiInputBase-readOnly"),onBlur:He,onChange:Re,onFocus:Pe}))}),p,q?q(z({},Oe,{startAdornment:j})):null]}))]})});function uK(t){return xt("MuiInput",t)}const Pd=z({},Go,wt("MuiInput",["root","underline","input"]));function dK(t){return xt("MuiOutlinedInput",t)}const hc=z({},Go,wt("MuiOutlinedInput",["root","notchedOutline","input"]));function fK(t){return xt("MuiFilledInput",t)}const Xo=z({},Go,wt("MuiFilledInput",["root","underline","input"])),b4=Wr(H.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function hK(t){return xt("MuiAutocomplete",t)}const Vn=wt("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var E7,T7;const I2e=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],P2e=["ref"],C2e=["key"],M2e=["key"],A2e=t=>{const{classes:e,disablePortal:n,expanded:r,focused:i,fullWidth:s,hasClearIcon:o,hasPopupIcon:a,inputFocused:c,popupOpen:l,size:u}=t,d={root:["root",r&&"expanded",i&&"focused",s&&"fullWidth",o&&"hasClearIcon",a&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",c&&"inputFocused"],tag:["tag",`tagSize${qe(u)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",l&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return _t(d,hK,e)},R2e=Ue("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{fullWidth:r,hasClearIcon:i,hasPopupIcon:s,inputFocused:o,size:a}=n;return[{[`& .${Vn.tag}`]:e.tag},{[`& .${Vn.tag}`]:e[`tagSize${qe(a)}`]},{[`& .${Vn.inputRoot}`]:e.inputRoot},{[`& .${Vn.input}`]:e.input},{[`& .${Vn.input}`]:o&&e.inputFocused},e.root,r&&e.fullWidth,s&&e.hasPopupIcon,i&&e.hasClearIcon]}})({[`&.${Vn.focused} .${Vn.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${Vn.clearIndicator}`]:{visibility:"visible"}},[`& .${Vn.tag}`]:{margin:3,maxWidth:"calc(100% - 6px)"},[`& .${Vn.inputRoot}`]:{[`.${Vn.hasPopupIcon}&, .${Vn.hasClearIcon}&`]:{paddingRight:30},[`.${Vn.hasPopupIcon}.${Vn.hasClearIcon}&`]:{paddingRight:56},[`& .${Vn.input}`]:{width:0,minWidth:30}},[`& .${Pd.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${Pd.root}.${Go.sizeSmall}`]:{[`& .${Pd.input}`]:{padding:"2px 4px 3px 0"}},[`& .${hc.root}`]:{padding:9,[`.${Vn.hasPopupIcon}&, .${Vn.hasClearIcon}&`]:{paddingRight:39},[`.${Vn.hasPopupIcon}.${Vn.hasClearIcon}&`]:{paddingRight:65},[`& .${Vn.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${Vn.endAdornment}`]:{right:9}},[`& .${hc.root}.${Go.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${Vn.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${Xo.root}`]:{paddingTop:19,paddingLeft:8,[`.${Vn.hasPopupIcon}&, .${Vn.hasClearIcon}&`]:{paddingRight:39},[`.${Vn.hasPopupIcon}.${Vn.hasClearIcon}&`]:{paddingRight:65},[`& .${Xo.input}`]:{padding:"7px 4px"},[`& .${Vn.endAdornment}`]:{right:9}},[`& .${Xo.root}.${Go.sizeSmall}`]:{paddingBottom:1,[`& .${Xo.input}`]:{padding:"2.5px 4px"}},[`& .${Go.hiddenLabel}`]:{paddingTop:8},[`& .${Xo.root}.${Go.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${Vn.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${Xo.root}.${Go.hiddenLabel}.${Go.sizeSmall}`]:{[`& .${Vn.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${Vn.input}`]:{flexGrow:1,textOverflow:"ellipsis",opacity:0},variants:[{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{[`& .${Vn.tag}`]:{margin:2,maxWidth:"calc(100% - 4px)"}}},{props:{inputFocused:!0},style:{[`& .${Vn.input}`]:{opacity:1}}},{props:{multiple:!0},style:{[`& .${Vn.inputRoot}`]:{flexWrap:"wrap"}}}]}),k2e=Ue("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(t,e)=>e.endAdornment})({position:"absolute",right:0,top:"50%",transform:"translate(0, -50%)"}),O2e=Ue(Zf,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(t,e)=>e.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),N2e=Ue(Zf,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:({ownerState:t},e)=>z({},e.popupIndicator,t.popupOpen&&e.popupIndicatorOpen)})({padding:2,marginRight:-2,variants:[{props:{popupOpen:!0},style:{transform:"rotate(180deg)"}}]}),L2e=Ue(__,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${Vn.option}`]:e.option},e.popper,n.disablePortal&&e.popperDisablePortal]}})(({theme:t})=>({zIndex:(t.vars||t).zIndex.modal,variants:[{props:{disablePortal:!0},style:{position:"absolute"}}]})),D2e=Ue(Da,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(t,e)=>e.paper})(({theme:t})=>z({},t.typography.body1,{overflow:"auto"})),B2e=Ue("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(t,e)=>e.loading})(({theme:t})=>({color:(t.vars||t).palette.text.secondary,padding:"14px 16px"})),F2e=Ue("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(t,e)=>e.noOptions})(({theme:t})=>({color:(t.vars||t).palette.text.secondary,padding:"14px 16px"})),U2e=Ue("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(t,e)=>e.listbox})(({theme:t})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${Vn.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[t.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${Vn.focused}`]:{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${Vn.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:pt.alpha(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${Vn.focused}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:pt.alpha(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},[`&.${Vn.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:pt.alpha(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}}}})),$2e=Ue(y4,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(t,e)=>e.groupLabel})(({theme:t})=>({backgroundColor:(t.vars||t).palette.background.paper,top:-8})),z2e=Ue("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(t,e)=>e.groupUl})({padding:0,[`& .${Vn.option}`]:{paddingLeft:24}}),H2e=N.forwardRef(function(e,n){var r,i,s,o;const a=Et({props:e,name:"MuiAutocomplete"}),{autoComplete:c=!1,autoHighlight:l=!1,autoSelect:u=!1,blurOnSelect:d=!1,ChipProps:h,className:f,clearIcon:p=E7||(E7=H.jsx(Jq,{fontSize:"small"})),clearOnBlur:g=!a.freeSolo,clearOnEscape:m=!1,clearText:y="Clear",closeText:b="Close",componentsProps:x={},defaultValue:S=a.multiple?[]:null,disableClearable:P=!1,disableCloseOnSelect:_=!1,disabled:I=!1,disabledItemsFocusable:C=!1,disableListWrap:A=!1,disablePortal:M=!1,filterSelectedOptions:k=!1,forcePopupIcon:O="auto",freeSolo:B=!1,fullWidth:$=!1,getLimitTagsText:U=Je=>`+${Je}`,getOptionLabel:q,groupBy:K,handleHomeEndKeys:V=!a.freeSolo,includeInputInList:G=!1,limitTags:j=-1,ListboxComponent:Q="ul",ListboxProps:se,loading:Z=!1,loadingText:ie="Loading",multiple:pe=!1,noOptionsText:ue="No options",openOnFocus:le=!1,openText:ae="Open",PaperComponent:_e=Da,PopperComponent:ye=__,popupIcon:Ae=T7||(T7=H.jsx(b4,{})),readOnly:Oe=!1,renderGroup:Be,renderInput:ce,renderOption:Ge,renderTags:Pe,selectOnFocus:He=!a.freeSolo,size:Re="medium",slotProps:je={}}=a,te=rt(a,I2e),{getRootProps:ee,getInputProps:X,getInputLabelProps:we,getPopupIndicatorProps:Ne,getClearProps:We,getTagProps:xe,getListboxProps:Ve,getOptionProps:be,value:ge,dirty:Se,expanded:Ie,id:me,popupOpen:Ee,focused:oe,focusedTag:ne,anchorEl:de,setAnchorEl:Te,inputValue:ke,groupedOptions:he}=rK(z({},a,{componentName:"Autocomplete"})),Xe=!P&&!I&&Se&&!Oe,$e=(!B||O===!0)&&O!==!1,{onMouseDown:Qe}=X(),{ref:ut}=se??{},gt=Ve(),{ref:Tt}=gt,Kt=rt(gt,P2e),Zt=or(Tt,ut),_n=q||(Je=>{var At;return(At=Je.label)!=null?At:Je}),hn=z({},a,{disablePortal:M,expanded:Ie,focused:oe,fullWidth:$,getOptionLabel:_n,hasClearIcon:Xe,hasPopupIcon:$e,inputFocused:ne===-1,popupOpen:Ee,size:Re}),bn=A2e(hn);let Wn;if(pe&&ge.length>0){const Je=At=>z({className:bn.tag,disabled:I},xe(At));Pe?Wn=Pe(ge,Je,hn):Wn=ge.map((At,Ht)=>{const nn=Je({index:Ht}),{key:Vt}=nn,Tn=rt(nn,C2e);return H.jsx(aK,z({label:_n(At),size:Re},Tn,h),Vt)})}if(j>-1&&Array.isArray(Wn)){const Je=Wn.length-j;!oe&&Je>0&&(Wn=Wn.splice(0,j),Wn.push(H.jsx("span",{className:bn.tag,children:U(Je)},Wn.length)))}const Jn=Be||(Je=>H.jsxs("li",{children:[H.jsx($2e,{className:bn.groupLabel,ownerState:hn,component:"div",children:Je.group}),H.jsx(z2e,{className:bn.groupUl,ownerState:hn,children:Je.children})]},Je.key)),fr=Ge||((Je,At)=>{const{key:Ht}=Je,nn=rt(Je,M2e);return H.jsx("li",z({},nn,{children:_n(At)}),Ht)}),Ur=(Je,At)=>{const Ht=be({option:Je,index:At});return fr(z({},Ht,{className:bn.option}),Je,{selected:Ht["aria-selected"],index:At,inputValue:ke},hn)},Zr=(r=je.clearIndicator)!=null?r:x.clearIndicator,jr=(i=je.paper)!=null?i:x.paper,Pi=(s=je.popper)!=null?s:x.popper,at=(o=je.popupIndicator)!=null?o:x.popupIndicator;return H.jsxs(N.Fragment,{children:[H.jsx(R2e,z({ref:n,className:Fe(bn.root,f),ownerState:hn},ee(te),{children:ce({id:me,disabled:I,fullWidth:!0,size:Re==="small"?"small":void 0,InputLabelProps:we(),InputProps:z({ref:Te,className:bn.inputRoot,startAdornment:Wn,onClick:Je=>{Je.target===Je.currentTarget&&Qe(Je)}},(Xe||$e)&&{endAdornment:H.jsxs(k2e,{className:bn.endAdornment,ownerState:hn,children:[Xe?H.jsx(O2e,z({},We(),{"aria-label":y,title:y,ownerState:hn},Zr,{className:Fe(bn.clearIndicator,Zr==null?void 0:Zr.className),children:p})):null,$e?H.jsx(N2e,z({},Ne(),{disabled:I,"aria-label":Ee?b:ae,title:Ee?b:ae,ownerState:hn},at,{className:Fe(bn.popupIndicator,at==null?void 0:at.className),children:Ae})):null]})}),inputProps:z({className:bn.input,disabled:I,readOnly:Oe},X())})})),de?H.jsx(L2e,z({as:ye,disablePortal:M,style:{width:de?de.clientWidth:null},ownerState:hn,role:"presentation",anchorEl:de,open:Ee},Pi,{className:Fe(bn.popper,Pi==null?void 0:Pi.className),children:H.jsxs(D2e,z({ownerState:hn,as:_e},jr,{className:Fe(bn.paper,jr==null?void 0:jr.className),children:[Z&&he.length===0?H.jsx(B2e,{className:bn.loading,ownerState:hn,children:ie}):null,he.length===0&&!B&&!Z?H.jsx(F2e,{className:bn.noOptions,ownerState:hn,role:"presentation",onMouseDown:Je=>{Je.preventDefault()},children:ue}):null,he.length>0?H.jsx(U2e,z({as:Q,className:bn.listbox,ownerState:hn},Kt,se,{ref:Zt,children:he.map((Je,At)=>K?Jn({key:Je.key,group:Je.group,children:Je.options.map((Ht,nn)=>Ur(Ht,Je.index+nn))}):Ur(Je,At))})):null]}))})):null]})}),V2e=Wr(H.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function pK(t){return xt("MuiAvatar",t)}const mK=wt("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]),W2e=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],j2e=t=>{const{classes:e,variant:n,colorDefault:r}=t;return _t({root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]},pK,e)},q2e=Ue("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],n.colorDefault&&e.colorDefault]}})(({theme:t})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:z({color:(t.vars||t).palette.background.default},t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:z({backgroundColor:t.palette.grey[400]},t.applyStyles("dark",{backgroundColor:t.palette.grey[600]})))}]})),K2e=Ue("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(t,e)=>e.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),G2e=Ue(V2e,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(t,e)=>e.fallback})({width:"75%",height:"75%"});function X2e({crossOrigin:t,referrerPolicy:e,src:n,srcSet:r}){const[i,s]=N.useState(!1);return N.useEffect(()=>{if(!n&&!r)return;s(!1);let o=!0;const a=new Image;return a.onload=()=>{o&&s("loaded")},a.onerror=()=>{o&&s("error")},a.crossOrigin=t,a.referrerPolicy=e,a.src=n,r&&(a.srcset=r),()=>{o=!1}},[t,e,n,r]),i}const gK=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiAvatar"}),{alt:i,children:s,className:o,component:a="div",slots:c={},slotProps:l={},imgProps:u,sizes:d,src:h,srcSet:f,variant:p="circular"}=r,g=rt(r,W2e);let m=null;const y=X2e(z({},u,{src:h,srcSet:f})),b=h||f,x=b&&y!=="error",S=z({},r,{colorDefault:!x,component:a,variant:p}),P=j2e(S),[_,I]=rI("img",{className:P.img,elementType:K2e,externalForwardedProps:{slots:c,slotProps:{img:z({},u,l.img)}},additionalProps:{alt:i,src:h,srcSet:f,sizes:d},ownerState:S});return x?m=H.jsx(_,z({},I)):s||s===0?m=s:b&&i?m=i[0]:m=H.jsx(G2e,{ownerState:S,className:P.fallback}),H.jsx(q2e,z({as:a,ownerState:S,className:Fe(P.root,o),ref:n},g,{children:m}))});function yK(t){return xt("MuiAvatarGroup",t)}const vK=wt("MuiAvatarGroup",["root","avatar"]),Y2e=["children","className","component","componentsProps","max","renderSurplus","slotProps","spacing","total","variant"],I7={small:-16,medium:null},Z2e=t=>{const{classes:e}=t;return _t({root:["root"],avatar:["avatar"]},yK,e)},J2e=Ue("div",{name:"MuiAvatarGroup",slot:"Root",overridesResolver:(t,e)=>z({[`& .${vK.avatar}`]:e.avatar},e.root)})(({theme:t,ownerState:e})=>{const n=e.spacing&&I7[e.spacing]!==void 0?I7[e.spacing]:-e.spacing;return{[`& .${mK.root}`]:{border:`2px solid ${(t.vars||t).palette.background.default}`,boxSizing:"content-box",marginLeft:n??-8,"&:last-child":{marginLeft:0}},display:"flex",flexDirection:"row-reverse"}}),Q2e=N.forwardRef(function(e,n){var r;const i=Et({props:e,name:"MuiAvatarGroup"}),{children:s,className:o,component:a="div",componentsProps:c={},max:l=5,renderSurplus:u,slotProps:d={},spacing:h="medium",total:f,variant:p="circular"}=i,g=rt(i,Y2e);let m=l<2?2:l;const y=z({},i,{max:l,spacing:h,component:a,variant:p}),b=Z2e(y),x=N.Children.toArray(s).filter(A=>N.isValidElement(A)),S=f||x.length;S===m&&(m+=1),m=Math.min(S+1,m);const P=Math.min(x.length,m-1),_=Math.max(S-m,S-P,0),I=u?u(_):`+${_}`,C=(r=d.additionalAvatar)!=null?r:c.additionalAvatar;return H.jsxs(J2e,z({as:a,ownerState:y,className:Fe(b.root,o),ref:n},g,{children:[_?H.jsx(gK,z({variant:p},C,{className:Fe(b.avatar,C==null?void 0:C.className),children:I})):null,x.slice(0,P).reverse().map(A=>N.cloneElement(A,{className:Fe(A.props.className,b.avatar),variant:A.props.variant||p}))]}))}),eIe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],tIe={entering:{opacity:1},entered:{opacity:1}},x4=N.forwardRef(function(e,n){const r=$s(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:o=!0,children:a,easing:c,in:l,onEnter:u,onEntered:d,onEntering:h,onExit:f,onExited:p,onExiting:g,style:m,timeout:y=i,TransitionComponent:b=ao}=e,x=rt(e,eIe),S=N.useRef(null),P=or(S,Zd(a),n),_=$=>U=>{if($){const q=S.current;U===void 0?$(q):$(q,U)}},I=_(h),C=_(($,U)=>{DP($);const q=Sc({style:m,timeout:y,easing:c},{mode:"enter"});$.style.webkitTransition=r.transitions.create("opacity",q),$.style.transition=r.transitions.create("opacity",q),u&&u($,U)}),A=_(d),M=_(g),k=_($=>{const U=Sc({style:m,timeout:y,easing:c},{mode:"exit"});$.style.webkitTransition=r.transitions.create("opacity",U),$.style.transition=r.transitions.create("opacity",U),f&&f($)}),O=_(p),B=$=>{s&&s(S.current,$)};return H.jsx(b,z({appear:o,in:l,nodeRef:S,onEnter:C,onEntered:A,onEntering:I,onExit:k,onExited:O,onExiting:M,addEndListener:B,timeout:y},x,{children:($,U)=>N.cloneElement(a,z({style:z({opacity:0,visibility:$==="exited"&&!l?"hidden":void 0},tIe[$],m,a.props.style),ref:P},U))}))});function bK(t){return xt("MuiBackdrop",t)}const nIe=wt("MuiBackdrop",["root","invisible"]),rIe=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],iIe=t=>{const{classes:e,invisible:n}=t;return _t({root:["root",n&&"invisible"]},bK,e)},sIe=Ue("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})(({ownerState:t})=>z({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})),w4=N.forwardRef(function(e,n){var r,i,s;const o=Et({props:e,name:"MuiBackdrop"}),{children:a,className:c,component:l="div",components:u={},componentsProps:d={},invisible:h=!1,open:f,slotProps:p={},slots:g={},TransitionComponent:m=x4,transitionDuration:y}=o,b=rt(o,rIe),x=z({},o,{component:l,invisible:h}),S=iIe(x),P=(r=p.root)!=null?r:d.root;return H.jsx(m,z({in:f,timeout:y},b,{children:H.jsx(sIe,z({"aria-hidden":!0},P,{as:(i=(s=g.root)!=null?s:u.Root)!=null?i:l,className:Fe(S.root,c,P==null?void 0:P.className),ownerState:z({},x,P==null?void 0:P.ownerState),classes:S,ref:n,children:a}))}))});function oIe(t){const{badgeContent:e,invisible:n=!1,max:r=99,showZero:i=!1}=t,s=a4({badgeContent:e,max:r});let o=n;n===!1&&e===0&&!i&&(o=!0);const{badgeContent:a,max:c=r}=o?s:t,l=a&&Number(a)>c?`${c}+`:a;return{badgeContent:a,invisible:o,max:c,displayValue:l}}function xK(t){return xt("MuiBadge",t)}const bd=wt("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),aIe=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],DA=10,BA=4,lIe=t=>{const{color:e,anchorOrigin:n,invisible:r,overlap:i,variant:s,classes:o={}}=t,a={root:["root"],badge:["badge",s,r&&"invisible",`anchorOrigin${qe(n.vertical)}${qe(n.horizontal)}`,`anchorOrigin${qe(n.vertical)}${qe(n.horizontal)}${qe(i)}`,`overlap${qe(i)}`,e!=="default"&&`color${qe(e)}`]};return _t(a,xK,o)},cIe=Ue("span",{name:"MuiBadge",slot:"Root",overridesResolver:(t,e)=>e.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),uIe=Ue("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.badge,e[n.variant],e[`anchorOrigin${qe(n.anchorOrigin.vertical)}${qe(n.anchorOrigin.horizontal)}${qe(n.overlap)}`],n.color!=="default"&&e[`color${qe(n.color)}`],n.invisible&&e.invisible]}})(({theme:t})=>{var e;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:DA*2,lineHeight:1,padding:"0 6px",height:DA*2,borderRadius:DA,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen}),variants:[...Object.keys(((e=t.vars)!=null?e:t).palette).filter(n=>{var r,i;return((r=t.vars)!=null?r:t).palette[n].main&&((i=t.vars)!=null?i:t).palette[n].contrastText}).map(n=>({props:{color:n},style:{backgroundColor:(t.vars||t).palette[n].main,color:(t.vars||t).palette[n].contrastText}})),{props:{variant:"dot"},style:{borderRadius:BA,height:BA*2,minWidth:BA*2,padding:0}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${bd.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${bd.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${bd.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${bd.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${bd.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${bd.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${bd.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${bd.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})}}]}}),dIe=N.forwardRef(function(e,n){var r,i,s,o,a,c;const l=Et({props:e,name:"MuiBadge"}),{anchorOrigin:u={vertical:"top",horizontal:"right"},className:d,component:h,components:f={},componentsProps:p={},children:g,overlap:m="rectangular",color:y="default",invisible:b=!1,max:x=99,badgeContent:S,slots:P,slotProps:_,showZero:I=!1,variant:C="standard"}=l,A=rt(l,aIe),{badgeContent:M,invisible:k,max:O,displayValue:B}=oIe({max:x,invisible:b,badgeContent:S,showZero:I}),$=a4({anchorOrigin:u,color:y,overlap:m,variant:C,badgeContent:S}),U=k||M==null&&C!=="dot",{color:q=y,overlap:K=m,anchorOrigin:V=u,variant:G=C}=U?$:l,j=G!=="dot"?B:void 0,Q=z({},l,{badgeContent:M,invisible:U,max:O,displayValue:j,showZero:I,anchorOrigin:V,color:q,overlap:K,variant:G}),se=lIe(Q),Z=(r=(i=P==null?void 0:P.root)!=null?i:f.Root)!=null?r:cIe,ie=(s=(o=P==null?void 0:P.badge)!=null?o:f.Badge)!=null?s:uIe,pe=(a=_==null?void 0:_.root)!=null?a:p.root,ue=(c=_==null?void 0:_.badge)!=null?c:p.badge,le=mi({elementType:Z,externalSlotProps:pe,externalForwardedProps:A,additionalProps:{ref:n,as:h},ownerState:Q,className:Fe(pe==null?void 0:pe.className,se.root,d)}),ae=mi({elementType:ie,externalSlotProps:ue,ownerState:Q,className:Fe(se.badge,ue==null?void 0:ue.className)});return H.jsxs(Z,z({},le,{children:[g,H.jsx(ie,z({},ae,{children:j}))]}))});function wK(t){return xt("MuiBottomNavigation",t)}const fIe=wt("MuiBottomNavigation",["root"]),hIe=["children","className","component","onChange","showLabels","value"],pIe=t=>{const{classes:e}=t;return _t({root:["root"]},wK,e)},mIe=Ue("div",{name:"MuiBottomNavigation",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({display:"flex",justifyContent:"center",height:56,backgroundColor:(t.vars||t).palette.background.paper})),gIe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiBottomNavigation"}),{children:i,className:s,component:o="div",onChange:a,showLabels:c=!1,value:l}=r,u=rt(r,hIe),d=z({},r,{component:o,showLabels:c}),h=pIe(d);return H.jsx(mIe,z({as:o,className:Fe(h.root,s),ref:n,ownerState:d},u,{children:N.Children.map(i,(f,p)=>{if(!N.isValidElement(f))return null;const g=f.props.value===void 0?p:f.props.value;return N.cloneElement(f,{selected:g===l,showLabel:f.props.showLabel!==void 0?f.props.showLabel:c,value:g,onChange:a})})}))});function _K(t){return xt("MuiBottomNavigationAction",t)}const _4=wt("MuiBottomNavigationAction",["root","iconOnly","selected","label"]),yIe=["className","icon","label","onChange","onClick","selected","showLabel","value"],vIe=t=>{const{classes:e,showLabel:n,selected:r}=t;return _t({root:["root",!n&&!r&&"iconOnly",r&&"selected"],label:["label",!n&&!r&&"iconOnly",r&&"selected"]},_K,e)},bIe=Ue(Yi,{name:"MuiBottomNavigationAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.showLabel&&!n.selected&&e.iconOnly]}})(({theme:t,ownerState:e})=>z({transition:t.transitions.create(["color","padding-top"],{duration:t.transitions.duration.short}),padding:"0px 12px",minWidth:80,maxWidth:168,color:(t.vars||t).palette.text.secondary,flexDirection:"column",flex:"1"},!e.showLabel&&!e.selected&&{paddingTop:14},!e.showLabel&&!e.selected&&!e.label&&{paddingTop:0},{[`&.${_4.selected}`]:{color:(t.vars||t).palette.primary.main}})),xIe=Ue("span",{name:"MuiBottomNavigationAction",slot:"Label",overridesResolver:(t,e)=>e.label})(({theme:t,ownerState:e})=>z({fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s"},!e.showLabel&&!e.selected&&{opacity:0,transitionDelay:"0s"},{[`&.${_4.selected}`]:{fontSize:t.typography.pxToRem(14)}})),wIe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiBottomNavigationAction"}),{className:i,icon:s,label:o,onChange:a,onClick:c,value:l}=r,u=rt(r,yIe),d=r,h=vIe(d),f=p=>{a&&a(p,l),c&&c(p)};return H.jsxs(bIe,z({ref:n,className:Fe(h.root,i),focusRipple:!0,onClick:f,ownerState:d},u,{children:[s,H.jsx(xIe,{className:h.label,ownerState:d,children:o})]}))}),SK=wt("MuiBox",["root"]),_Ie=Fm(),SIe=Rwe({themeId:Kd,defaultTheme:_Ie,defaultClassName:SK.root,generateClassName:r4.generate}),EIe=Wr(H.jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz"),TIe=["slots","slotProps"],IIe=Ue(Yi)(({theme:t})=>z({display:"flex",marginLeft:`calc(${t.spacing(1)} * 0.5)`,marginRight:`calc(${t.spacing(1)} * 0.5)`},t.palette.mode==="light"?{backgroundColor:t.palette.grey[100],color:t.palette.grey[700]}:{backgroundColor:t.palette.grey[700],color:t.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":z({},t.palette.mode==="light"?{backgroundColor:t.palette.grey[200]}:{backgroundColor:t.palette.grey[600]}),"&:active":z({boxShadow:t.shadows[0]},t.palette.mode==="light"?{backgroundColor:pt.emphasize(t.palette.grey[200],.12)}:{backgroundColor:pt.emphasize(t.palette.grey[600],.12)})})),PIe=Ue(EIe)({width:24,height:16});function CIe(t){const{slots:e={},slotProps:n={}}=t,r=rt(t,TIe),i=t;return H.jsx("li",{children:H.jsx(IIe,z({focusRipple:!0},r,{ownerState:i,children:H.jsx(PIe,z({as:e.CollapsedIcon,ownerState:i},n.collapsedIcon))}))})}function EK(t){return xt("MuiBreadcrumbs",t)}const TK=wt("MuiBreadcrumbs",["root","ol","li","separator"]),MIe=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],AIe=t=>{const{classes:e}=t;return _t({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},EK,e)},RIe=Ue(Ds,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(t,e)=>[{[`& .${TK.li}`]:e.li},e.root]})({}),kIe=Ue("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(t,e)=>e.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),OIe=Ue("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(t,e)=>e.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function NIe(t,e,n,r){return t.reduce((i,s,o)=>(o<t.length-1?i=i.concat(s,H.jsx(OIe,{"aria-hidden":!0,className:e,ownerState:r,children:n},`separator-${o}`)):i.push(s),i),[])}const LIe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiBreadcrumbs"}),{children:i,className:s,component:o="nav",slots:a={},slotProps:c={},expandText:l="Show path",itemsAfterCollapse:u=1,itemsBeforeCollapse:d=1,maxItems:h=8,separator:f="/"}=r,p=rt(r,MIe),[g,m]=N.useState(!1),y=z({},r,{component:o,expanded:g,expandText:l,itemsAfterCollapse:u,itemsBeforeCollapse:d,maxItems:h,separator:f}),b=AIe(y),x=mi({elementType:a.CollapsedIcon,externalSlotProps:c.collapsedIcon,ownerState:y}),S=N.useRef(null),P=I=>{const C=()=>{m(!0);const A=S.current.querySelector("a[href],button,[tabindex]");A&&A.focus()};return d+u>=I.length?I:[...I.slice(0,d),H.jsx(CIe,{"aria-label":l,slots:{CollapsedIcon:a.CollapsedIcon},slotProps:{collapsedIcon:x},onClick:C},"ellipsis"),...I.slice(I.length-u,I.length)]},_=N.Children.toArray(i).filter(I=>N.isValidElement(I)).map((I,C)=>H.jsx("li",{className:b.li,children:I},`child-${C}`));return H.jsx(RIe,z({ref:n,component:o,color:"text.secondary",className:Fe(b.root,s),ownerState:y},p,{children:H.jsx(kIe,{className:b.ol,ref:S,ownerState:y,children:NIe(g||h&&_.length<=h?_:P(_),b.separator,f,y)})}))});function IK(t){return xt("MuiButton",t)}const Tx=wt("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),S4=N.createContext({}),E4=N.createContext(void 0),DIe=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],BIe=t=>{const{color:e,disableElevation:n,fullWidth:r,size:i,variant:s,classes:o}=t,a={root:["root",s,`${s}${qe(e)}`,`size${qe(i)}`,`${s}Size${qe(i)}`,`color${qe(e)}`,n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${qe(i)}`],endIcon:["icon","endIcon",`iconSize${qe(i)}`]},c=_t(a,IK,o);return z({},o,c)},PK=t=>z({},t.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},t.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},t.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),FIe=Ue(Yi,{shouldForwardProp:t=>Bi(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${qe(n.color)}`],e[`size${qe(n.size)}`],e[`${n.variant}Size${qe(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})(({theme:t,ownerState:e})=>{var n,r;const i=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],s=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return z({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":z({textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:pt.alpha(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:pt.alpha(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:`1px solid ${(t.vars||t).palette[e.color].main}`,backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:pt.alpha(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:s,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}}),"&:active":z({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[8]}),[`&.${Tx.focusVisible}`]:z({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[6]}),[`&.${Tx.disabled}`]:z({color:(t.vars||t).palette.action.disabled},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},e.variant==="contained"&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},e.variant==="outlined"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main,border:t.vars?`1px solid rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:`1px solid ${pt.alpha(t.palette[e.color].main,.5)}`},e.variant==="contained"&&{color:t.vars?t.vars.palette.text.primary:(n=(r=t.palette).getContrastText)==null?void 0:n.call(r,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:i,boxShadow:(t.vars||t).shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:t})=>t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Tx.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Tx.disabled}`]:{boxShadow:"none"}}),UIe=Ue("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,e[`iconSize${qe(n.size)}`]]}})(({ownerState:t})=>z({display:"inherit",marginRight:8,marginLeft:-4},t.size==="small"&&{marginLeft:-2},PK(t))),$Ie=Ue("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,e[`iconSize${qe(n.size)}`]]}})(({ownerState:t})=>z({display:"inherit",marginRight:-4,marginLeft:8},t.size==="small"&&{marginRight:-2},PK(t))),zIe=N.forwardRef(function(e,n){const r=N.useContext(S4),i=N.useContext(E4),s=ev(r,e),o=Et({props:s,name:"MuiButton"}),{children:a,color:c="primary",component:l="button",className:u,disabled:d=!1,disableElevation:h=!1,disableFocusRipple:f=!1,endIcon:p,focusVisibleClassName:g,fullWidth:m=!1,size:y="medium",startIcon:b,type:x,variant:S="text"}=o,P=rt(o,DIe),_=z({},o,{color:c,component:l,disabled:d,disableElevation:h,disableFocusRipple:f,fullWidth:m,size:y,type:x,variant:S}),I=BIe(_),C=b&&H.jsx(UIe,{className:I.startIcon,ownerState:_,children:b}),A=p&&H.jsx($Ie,{className:I.endIcon,ownerState:_,children:p}),M=i||"";return H.jsxs(FIe,z({ownerState:_,className:Fe(r.className,I.root,u,M),component:l,disabled:d,focusRipple:!f,focusVisibleClassName:Fe(I.focusVisible,g),ref:n,type:x},P,{classes:I,children:[C,a,A]}))});function CK(t){return xt("MuiButtonGroup",t)}const _s=wt("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),HIe=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],VIe=(t,e)=>{const{ownerState:n}=t;return[{[`& .${_s.grouped}`]:e.grouped},{[`& .${_s.grouped}`]:e[`grouped${qe(n.orientation)}`]},{[`& .${_s.grouped}`]:e[`grouped${qe(n.variant)}`]},{[`& .${_s.grouped}`]:e[`grouped${qe(n.variant)}${qe(n.orientation)}`]},{[`& .${_s.grouped}`]:e[`grouped${qe(n.variant)}${qe(n.color)}`]},{[`& .${_s.firstButton}`]:e.firstButton},{[`& .${_s.lastButton}`]:e.lastButton},{[`& .${_s.middleButton}`]:e.middleButton},e.root,e[n.variant],n.disableElevation===!0&&e.disableElevation,n.fullWidth&&e.fullWidth,n.orientation==="vertical"&&e.vertical]},WIe=t=>{const{classes:e,color:n,disabled:r,disableElevation:i,fullWidth:s,orientation:o,variant:a}=t,c={root:["root",a,o==="vertical"&&"vertical",s&&"fullWidth",i&&"disableElevation"],grouped:["grouped",`grouped${qe(o)}`,`grouped${qe(a)}`,`grouped${qe(a)}${qe(o)}`,`grouped${qe(a)}${qe(n)}`,r&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return _t(c,CK,e)},jIe=Ue("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:VIe})(({theme:t,ownerState:e})=>z({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[2]},e.disableElevation&&{boxShadow:"none"},e.fullWidth&&{width:"100%"},e.orientation==="vertical"&&{flexDirection:"column"},{[`& .${_s.grouped}`]:z({minWidth:40,"&:hover":z({},e.variant==="contained"&&{boxShadow:"none"})},e.variant==="contained"&&{boxShadow:"none"}),[`& .${_s.firstButton},& .${_s.middleButton}`]:z({},e.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},e.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},e.variant==="text"&&e.orientation==="horizontal"&&{borderRight:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${_s.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="text"&&e.orientation==="vertical"&&{borderBottom:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${_s.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="text"&&e.color!=="inherit"&&{borderColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:pt.alpha(t.palette[e.color].main,.5)},e.variant==="outlined"&&e.orientation==="horizontal"&&{borderRightColor:"transparent"},e.variant==="outlined"&&e.orientation==="vertical"&&{borderBottomColor:"transparent"},e.variant==="contained"&&e.orientation==="horizontal"&&{borderRight:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${_s.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="contained"&&e.orientation==="vertical"&&{borderBottom:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${_s.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="contained"&&e.color!=="inherit"&&{borderColor:(t.vars||t).palette[e.color].dark},{"&:hover":z({},e.variant==="outlined"&&e.orientation==="horizontal"&&{borderRightColor:"currentColor"},e.variant==="outlined"&&e.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${_s.lastButton},& .${_s.middleButton}`]:z({},e.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},e.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},e.variant==="outlined"&&e.orientation==="horizontal"&&{marginLeft:-1},e.variant==="outlined"&&e.orientation==="vertical"&&{marginTop:-1})})),qIe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiButtonGroup"}),{children:i,className:s,color:o="primary",component:a="div",disabled:c=!1,disableElevation:l=!1,disableFocusRipple:u=!1,disableRipple:d=!1,fullWidth:h=!1,orientation:f="horizontal",size:p="medium",variant:g="outlined"}=r,m=rt(r,HIe),y=z({},r,{color:o,component:a,disabled:c,disableElevation:l,disableFocusRipple:u,disableRipple:d,fullWidth:h,orientation:f,size:p,variant:g}),b=WIe(y),x=N.useMemo(()=>({className:b.grouped,color:o,disabled:c,disableElevation:l,disableFocusRipple:u,disableRipple:d,fullWidth:h,size:p,variant:g}),[o,c,l,u,d,h,p,g,b.grouped]),S=wq(i),P=S.length,_=I=>{const C=I===0,A=I===P-1;return C&&A?"":C?b.firstButton:A?b.lastButton:b.middleButton};return H.jsx(jIe,z({as:a,role:"group",className:Fe(b.root,s),ref:n,ownerState:y},m,{children:H.jsx(S4.Provider,{value:x,children:S.map((I,C)=>H.jsx(E4.Provider,{value:_(C),children:I},C))})}))});function MK(t){return xt("MuiCard",t)}const KIe=wt("MuiCard",["root"]),GIe=["className","raised"],XIe=t=>{const{classes:e}=t;return _t({root:["root"]},MK,e)},YIe=Ue(Da,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({overflow:"hidden"})),ZIe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiCard"}),{className:i,raised:s=!1}=r,o=rt(r,GIe),a=z({},r,{raised:s}),c=XIe(a);return H.jsx(YIe,z({className:Fe(c.root,i),elevation:s?8:void 0,ref:n,ownerState:a},o))});function AK(t){return xt("MuiCardActionArea",t)}const LT=wt("MuiCardActionArea",["root","focusVisible","focusHighlight"]),JIe=["children","className","focusVisibleClassName"],QIe=t=>{const{classes:e}=t;return _t({root:["root"],focusHighlight:["focusHighlight"]},AK,e)},ePe=Ue(Yi,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${LT.focusHighlight}`]:{opacity:(t.vars||t).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${LT.focusVisible} .${LT.focusHighlight}`]:{opacity:(t.vars||t).palette.action.focusOpacity}})),tPe=Ue("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(t,e)=>e.focusHighlight})(({theme:t})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:t.transitions.create("opacity",{duration:t.transitions.duration.short})})),nPe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiCardActionArea"}),{children:i,className:s,focusVisibleClassName:o}=r,a=rt(r,JIe),c=r,l=QIe(c);return H.jsxs(ePe,z({className:Fe(l.root,s),focusVisibleClassName:Fe(o,l.focusVisible),ref:n,ownerState:c},a,{children:[i,H.jsx(tPe,{className:l.focusHighlight,ownerState:c})]}))});function RK(t){return xt("MuiCardActions",t)}const rPe=wt("MuiCardActions",["root","spacing"]),iPe=["disableSpacing","className"],sPe=t=>{const{classes:e,disableSpacing:n}=t;return _t({root:["root",!n&&"spacing"]},RK,e)},oPe=Ue("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})(({ownerState:t})=>z({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),aPe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiCardActions"}),{disableSpacing:i=!1,className:s}=r,o=rt(r,iPe),a=z({},r,{disableSpacing:i}),c=sPe(a);return H.jsx(oPe,z({className:Fe(c.root,s),ownerState:a,ref:n},o))});function kK(t){return xt("MuiCardContent",t)}const lPe=wt("MuiCardContent",["root"]),cPe=["className","component"],uPe=t=>{const{classes:e}=t;return _t({root:["root"]},kK,e)},dPe=Ue("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),fPe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiCardContent"}),{className:i,component:s="div"}=r,o=rt(r,cPe),a=z({},r,{component:s}),c=uPe(a);return H.jsx(dPe,z({as:s,className:Fe(c.root,i),ownerState:a,ref:n},o))});function OK(t){return xt("MuiCardHeader",t)}const wk=wt("MuiCardHeader",["root","avatar","action","content","title","subheader"]),hPe=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],pPe=t=>{const{classes:e}=t;return _t({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},OK,e)},mPe=Ue("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(t,e)=>z({[`& .${wk.title}`]:e.title,[`& .${wk.subheader}`]:e.subheader},e.root)})({display:"flex",alignItems:"center",padding:16}),gPe=Ue("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(t,e)=>e.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),yPe=Ue("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(t,e)=>e.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),vPe=Ue("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(t,e)=>e.content})({flex:"1 1 auto"}),bPe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiCardHeader"}),{action:i,avatar:s,className:o,component:a="div",disableTypography:c=!1,subheader:l,subheaderTypographyProps:u,title:d,titleTypographyProps:h}=r,f=rt(r,hPe),p=z({},r,{component:a,disableTypography:c}),g=pPe(p);let m=d;m!=null&&m.type!==Ds&&!c&&(m=H.jsx(Ds,z({variant:s?"body2":"h5",className:g.title,component:"span",display:"block"},h,{children:m})));let y=l;return y!=null&&y.type!==Ds&&!c&&(y=H.jsx(Ds,z({variant:s?"body2":"body1",className:g.subheader,color:"text.secondary",component:"span",display:"block"},u,{children:y}))),H.jsxs(mPe,z({className:Fe(g.root,o),as:a,ref:n,ownerState:p},f,{children:[s&&H.jsx(gPe,{className:g.avatar,ownerState:p,children:s}),H.jsxs(vPe,{className:g.content,ownerState:p,children:[m,y]}),i&&H.jsx(yPe,{className:g.action,ownerState:p,children:i})]}))});function NK(t){return xt("MuiCardMedia",t)}const xPe=wt("MuiCardMedia",["root","media","img"]),wPe=["children","className","component","image","src","style"],_Pe=t=>{const{classes:e,isMediaComponent:n,isImageComponent:r}=t;return _t({root:["root",n&&"media",r&&"img"]},NK,e)},SPe=Ue("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{isMediaComponent:r,isImageComponent:i}=n;return[e.root,r&&e.media,i&&e.img]}})(({ownerState:t})=>z({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},t.isMediaComponent&&{width:"100%"},t.isImageComponent&&{objectFit:"cover"})),EPe=["video","audio","picture","iframe","img"],TPe=["picture","img"],IPe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiCardMedia"}),{children:i,className:s,component:o="div",image:a,src:c,style:l}=r,u=rt(r,wPe),d=EPe.indexOf(o)!==-1,h=!d&&a?z({backgroundImage:`url("${a}")`},l):l,f=z({},r,{component:o,isMediaComponent:d,isImageComponent:TPe.indexOf(o)!==-1}),p=_Pe(f);return H.jsx(SPe,z({className:Fe(p.root,s),as:o,role:!d&&a?"img":void 0,ref:n,style:h,ownerState:f,src:d?a||c:void 0},u,{children:i}))});function PPe(t){return xt("PrivateSwitchBase",t)}wt("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const CPe=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],MPe=t=>{const{classes:e,checked:n,disabled:r,edge:i}=t,s={root:["root",n&&"checked",r&&"disabled",i&&`edge${qe(i)}`],input:["input"]};return _t(s,PPe,e)},APe=Ue(Yi)(({ownerState:t})=>z({padding:9,borderRadius:"50%"},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12})),RPe=Ue("input",{shouldForwardProp:Bi})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),T4=N.forwardRef(function(e,n){const{autoFocus:r,checked:i,checkedIcon:s,className:o,defaultChecked:a,disabled:c,disableFocusRipple:l=!1,edge:u=!1,icon:d,id:h,inputProps:f,inputRef:p,name:g,onBlur:m,onChange:y,onFocus:b,readOnly:x,required:S=!1,tabIndex:P,type:_,value:I}=e,C=rt(e,CPe),[A,M]=ta({controlled:i,default:!!a,name:"SwitchBase",state:"checked"}),k=Pl(),O=G=>{b&&b(G),k&&k.onFocus&&k.onFocus(G)},B=G=>{m&&m(G),k&&k.onBlur&&k.onBlur(G)},$=G=>{if(G.nativeEvent.defaultPrevented)return;const j=G.target.checked;M(j),y&&y(G,j)};let U=c;k&&typeof U>"u"&&(U=k.disabled);const q=_==="checkbox"||_==="radio",K=z({},e,{checked:A,disabled:U,disableFocusRipple:l,edge:u}),V=MPe(K);return H.jsxs(APe,z({component:"span",className:Fe(V.root,o),centerRipple:!0,focusRipple:!l,disabled:U,tabIndex:null,role:void 0,onFocus:O,onBlur:B,ownerState:K,ref:n},C,{children:[H.jsx(RPe,z({autoFocus:r,checked:i,defaultChecked:a,className:V.input,disabled:U,id:q?h:void 0,name:g,onChange:$,readOnly:x,ref:p,required:S,ownerState:K,tabIndex:P,type:_},_==="checkbox"&&I===void 0?{}:{value:I},f)),A?s:d]}))}),kPe=Wr(H.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),OPe=Wr(H.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),NPe=Wr(H.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function LK(t){return xt("MuiCheckbox",t)}const DT=wt("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),LPe=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],DPe=t=>{const{classes:e,indeterminate:n,color:r,size:i}=t,s={root:["root",n&&"indeterminate",`color${qe(r)}`,`size${qe(i)}`]},o=_t(s,LK,e);return z({},e,o)},BPe=Ue(T4,{shouldForwardProp:t=>Bi(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.indeterminate&&e.indeterminate,e[`size${qe(n.size)}`],n.color!=="default"&&e[`color${qe(n.color)}`]]}})(({theme:t,ownerState:e})=>z({color:(t.vars||t).palette.text.secondary},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${e.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:pt.alpha(e.color==="default"?t.palette.action.active:t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${DT.checked}, &.${DT.indeterminate}`]:{color:(t.vars||t).palette[e.color].main},[`&.${DT.disabled}`]:{color:(t.vars||t).palette.action.disabled}})),FPe=H.jsx(OPe,{}),UPe=H.jsx(kPe,{}),$Pe=H.jsx(NPe,{}),zPe=N.forwardRef(function(e,n){var r,i;const s=Et({props:e,name:"MuiCheckbox"}),{checkedIcon:o=FPe,color:a="primary",icon:c=UPe,indeterminate:l=!1,indeterminateIcon:u=$Pe,inputProps:d,size:h="medium",className:f}=s,p=rt(s,LPe),g=l?u:c,m=l?u:o,y=z({},s,{color:a,indeterminate:l,size:h}),b=DPe(y);return H.jsx(BPe,z({type:"checkbox",inputProps:z({"data-indeterminate":l},d),icon:N.cloneElement(g,{fontSize:(r=g.props.fontSize)!=null?r:h}),checkedIcon:N.cloneElement(m,{fontSize:(i=m.props.fontSize)!=null?i:h}),ownerState:y,ref:n,className:Fe(b.root,f)},p,{classes:b}))});function DK(t){return xt("MuiCircularProgress",t)}const HPe=wt("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]),VPe=["className","color","disableShrink","size","style","thickness","value","variant"];let VP=t=>t,P7,C7,M7,A7;const Wf=44,WPe=Zi(P7||(P7=VP`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),jPe=Zi(C7||(C7=VP`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),qPe=t=>{const{classes:e,variant:n,color:r,disableShrink:i}=t,s={root:["root",n,`color${qe(r)}`],svg:["svg"],circle:["circle",`circle${qe(n)}`,i&&"circleDisableShrink"]};return _t(s,DK,e)},KPe=Ue("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`color${qe(n.color)}`]]}})(({ownerState:t,theme:e})=>z({display:"inline-block"},t.variant==="determinate"&&{transition:e.transitions.create("transform")},t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main}),({ownerState:t})=>t.variant==="indeterminate"&&Io(M7||(M7=VP`
      animation: ${0} 1.4s linear infinite;
    `),WPe)),GPe=Ue("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(t,e)=>e.svg})({display:"block"}),XPe=Ue("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.circle,e[`circle${qe(n.variant)}`],n.disableShrink&&e.circleDisableShrink]}})(({ownerState:t,theme:e})=>z({stroke:"currentColor"},t.variant==="determinate"&&{transition:e.transitions.create("stroke-dashoffset")},t.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink&&Io(A7||(A7=VP`
      animation: ${0} 1.4s ease-in-out infinite;
    `),jPe)),YPe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiCircularProgress"}),{className:i,color:s="primary",disableShrink:o=!1,size:a=40,style:c,thickness:l=3.6,value:u=0,variant:d="indeterminate"}=r,h=rt(r,VPe),f=z({},r,{color:s,disableShrink:o,size:a,thickness:l,value:u,variant:d}),p=qPe(f),g={},m={},y={};if(d==="determinate"){const b=2*Math.PI*((Wf-l)/2);g.strokeDasharray=b.toFixed(3),y["aria-valuenow"]=Math.round(u),g.strokeDashoffset=`${((100-u)/100*b).toFixed(3)}px`,m.transform="rotate(-90deg)"}return H.jsx(KPe,z({className:Fe(p.root,i),style:z({width:a,height:a},m,c),ownerState:f,ref:n,role:"progressbar"},y,h,{children:H.jsx(GPe,{className:p.svg,ownerState:f,viewBox:`${Wf/2} ${Wf/2} ${Wf} ${Wf}`,children:H.jsx(XPe,{className:p.circle,style:g,ownerState:f,cx:Wf,cy:Wf,r:(Wf-l)/2,fill:"none",strokeWidth:l})})}))});function R7(t){return t.substring(2).toLowerCase()}function ZPe(t,e){return e.documentElement.clientWidth<t.clientX||e.documentElement.clientHeight<t.clientY}function BK(t){const{children:e,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:i,touchEvent:s="onTouchEnd"}=t,o=N.useRef(!1),a=N.useRef(null),c=N.useRef(!1),l=N.useRef(!1);N.useEffect(()=>(setTimeout(()=>{c.current=!0},0),()=>{c.current=!1}),[]);const u=or(Zd(e),a),d=Yr(p=>{const g=l.current;l.current=!1;const m=Fr(a.current);if(!c.current||!a.current||"clientX"in p&&ZPe(p,m))return;if(o.current){o.current=!1;return}let y;p.composedPath?y=p.composedPath().indexOf(a.current)>-1:y=!m.documentElement.contains(p.target)||a.current.contains(p.target),!y&&(n||!g)&&i(p)}),h=p=>g=>{l.current=!0;const m=e.props[p];m&&m(g)},f={ref:u};return s!==!1&&(f[s]=h(s)),N.useEffect(()=>{if(s!==!1){const p=R7(s),g=Fr(a.current),m=()=>{o.current=!0};return g.addEventListener(p,d),g.addEventListener("touchmove",m),()=>{g.removeEventListener(p,d),g.removeEventListener("touchmove",m)}}},[d,s]),r!==!1&&(f[r]=h(r)),N.useEffect(()=>{if(r!==!1){const p=R7(r),g=Fr(a.current);return g.addEventListener(p,d),()=>{g.removeEventListener(p,d)}}},[d,r]),H.jsx(N.Fragment,{children:N.cloneElement(e,f)})}const JPe=V_e({createStyledComponent:Ue("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${qe(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),useThemeProps:t=>Et({props:t,name:"MuiContainer"})});function QPe(t){return xt("MuiContainer",t)}const eCe=wt("MuiContainer",["root","disableGutters","fixed","maxWidthXs","maxWidthSm","maxWidthMd","maxWidthLg","maxWidthXl"]),FK=(t,e)=>z({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},e&&!t.vars&&{colorScheme:t.palette.mode}),UK=t=>z({color:(t.vars||t).palette.text.primary},t.typography.body1,{backgroundColor:(t.vars||t).palette.background.default,"@media print":{backgroundColor:(t.vars||t).palette.common.white}}),tCe=(t,e=!1)=>{var n;const r={};e&&t.colorSchemes&&Object.entries(t.colorSchemes).forEach(([o,a])=>{var c;r[t.getColorSchemeSelector(o).replace(/\s*&/,"")]={colorScheme:(c=a.palette)==null?void 0:c.mode}});let i=z({html:FK(t,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:t.typography.fontWeightBold},body:z({margin:0},UK(t),{"&::backdrop":{backgroundColor:(t.vars||t).palette.background.default}})},r);const s=(n=t.components)==null||(n=n.MuiCssBaseline)==null?void 0:n.styleOverrides;return s&&(i=[i,s]),i};function nCe(t){const e=Et({props:t,name:"MuiCssBaseline"}),{children:n,enableColorScheme:r=!1}=e;return H.jsxs(N.Fragment,{children:[H.jsx(v4,{styles:i=>tCe(i,r)}),n]})}const rCe={track:"#2b2b2b",thumb:"#6b6b6b",active:"#959595"};function iCe(t=rCe){return{scrollbarColor:`${t.thumb} ${t.track}`,"&::-webkit-scrollbar, & *::-webkit-scrollbar":{backgroundColor:t.track},"&::-webkit-scrollbar-thumb, & *::-webkit-scrollbar-thumb":{borderRadius:8,backgroundColor:t.thumb,minHeight:24,border:`3px solid ${t.track}`},"&::-webkit-scrollbar-thumb:focus, & *::-webkit-scrollbar-thumb:focus":{backgroundColor:t.active},"&::-webkit-scrollbar-thumb:active, & *::-webkit-scrollbar-thumb:active":{backgroundColor:t.active},"&::-webkit-scrollbar-thumb:hover, & *::-webkit-scrollbar-thumb:hover":{backgroundColor:t.active},"&::-webkit-scrollbar-corner, & *::-webkit-scrollbar-corner":{backgroundColor:t.track}}}function sCe(t){const e=Fr(t);return e.body===t?so(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function qx(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function k7(t){return parseInt(so(t).getComputedStyle(t).paddingRight,10)||0}function oCe(t){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(t.tagName)!==-1,r=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return n||r}function O7(t,e,n,r,i){const s=[e,n,...r];[].forEach.call(t.children,o=>{const a=s.indexOf(o)===-1,c=!oCe(o);a&&c&&qx(o,i)})}function FA(t,e){let n=-1;return t.some((r,i)=>e(r)?(n=i,!0):!1),n}function aCe(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(sCe(r)){const o=bq(Fr(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${k7(r)+o}px`;const a=Fr(r).querySelectorAll(".mui-fixed");[].forEach.call(a,c=>{n.push({value:c.style.paddingRight,property:"padding-right",el:c}),c.style.paddingRight=`${k7(c)+o}px`})}let s;if(r.parentNode instanceof DocumentFragment)s=Fr(r).body;else{const o=r.parentElement,a=so(r);s=(o==null?void 0:o.nodeName)==="HTML"&&a.getComputedStyle(o).overflowY==="scroll"?o:r}n.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{n.forEach(({value:s,el:o,property:a})=>{s?o.style.setProperty(a,s):o.style.removeProperty(a)})}}function lCe(t){const e=[];return[].forEach.call(t.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class $K{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,n){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&qx(e.modalRef,!1);const i=lCe(n);O7(n,e.mount,e.modalRef,i,!0);const s=FA(this.containers,o=>o.container===n);return s!==-1?(this.containers[s].modals.push(e),r):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:i}),r)}mount(e,n){const r=FA(this.containers,s=>s.modals.indexOf(e)!==-1),i=this.containers[r];i.restore||(i.restore=aCe(i,n))}remove(e,n=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const i=FA(this.containers,o=>o.modals.indexOf(e)!==-1),s=this.containers[i];if(s.modals.splice(s.modals.indexOf(e),1),this.modals.splice(r,1),s.modals.length===0)s.restore&&s.restore(),e.modalRef&&qx(e.modalRef,n),O7(s.container,e.mount,e.modalRef,s.hiddenSiblings,!1),this.containers.splice(i,1);else{const o=s.modals[s.modals.length-1];o.modalRef&&qx(o.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}const cCe=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function uCe(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:e}function dCe(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const e=r=>t.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=e(`[name="${t.name}"]:checked`);return n||(n=e(`[name="${t.name}"]`)),n!==t}function fCe(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||dCe(t))}function hCe(t){const e=[],n=[];return Array.from(t.querySelectorAll(cCe)).forEach((r,i)=>{const s=uCe(r);s===-1||!fCe(r)||(s===0?e.push(r):n.push({documentOrder:i,tabIndex:s,node:r}))}),n.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(e)}function pCe(){return!0}function zK(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:s=hCe,isEnabled:o=pCe,open:a}=t,c=N.useRef(!1),l=N.useRef(null),u=N.useRef(null),d=N.useRef(null),h=N.useRef(null),f=N.useRef(!1),p=N.useRef(null),g=or(Zd(e),p),m=N.useRef(null);N.useEffect(()=>{!a||!p.current||(f.current=!n)},[n,a]),N.useEffect(()=>{if(!a||!p.current)return;const x=Fr(p.current);return p.current.contains(x.activeElement)||(p.current.hasAttribute("tabIndex")||p.current.setAttribute("tabIndex","-1"),f.current&&p.current.focus()),()=>{i||(d.current&&d.current.focus&&(c.current=!0,d.current.focus()),d.current=null)}},[a]),N.useEffect(()=>{if(!a||!p.current)return;const x=Fr(p.current),S=I=>{m.current=I,!(r||!o()||I.key!=="Tab")&&x.activeElement===p.current&&I.shiftKey&&(c.current=!0,u.current&&u.current.focus())},P=()=>{const I=p.current;if(I===null)return;if(!x.hasFocus()||!o()||c.current){c.current=!1;return}if(I.contains(x.activeElement)||r&&x.activeElement!==l.current&&x.activeElement!==u.current)return;if(x.activeElement!==h.current)h.current=null;else if(h.current!==null)return;if(!f.current)return;let C=[];if((x.activeElement===l.current||x.activeElement===u.current)&&(C=s(p.current)),C.length>0){var A,M;const k=!!((A=m.current)!=null&&A.shiftKey&&((M=m.current)==null?void 0:M.key)==="Tab"),O=C[0],B=C[C.length-1];typeof O!="string"&&typeof B!="string"&&(k?B.focus():O.focus())}else I.focus()};x.addEventListener("focusin",P),x.addEventListener("keydown",S,!0);const _=setInterval(()=>{x.activeElement&&x.activeElement.tagName==="BODY"&&P()},50);return()=>{clearInterval(_),x.removeEventListener("focusin",P),x.removeEventListener("keydown",S,!0)}},[n,r,i,o,a,s]);const y=x=>{d.current===null&&(d.current=x.relatedTarget),f.current=!0,h.current=x.target;const S=e.props.onFocus;S&&S(x)},b=x=>{d.current===null&&(d.current=x.relatedTarget),f.current=!0};return H.jsxs(N.Fragment,{children:[H.jsx("div",{tabIndex:a?0:-1,onFocus:b,ref:l,"data-testid":"sentinelStart"}),N.cloneElement(e,{ref:g,onFocus:y}),H.jsx("div",{tabIndex:a?0:-1,onFocus:b,ref:u,"data-testid":"sentinelEnd"})]})}function mCe(t){return typeof t=="function"?t():t}function gCe(t){return t?t.props.hasOwnProperty("in"):!1}const yCe=new $K;function vCe(t){const{container:e,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,manager:i=yCe,closeAfterTransition:s=!1,onTransitionEnter:o,onTransitionExited:a,children:c,onClose:l,open:u,rootRef:d}=t,h=N.useRef({}),f=N.useRef(null),p=N.useRef(null),g=or(p,d),[m,y]=N.useState(!u),b=gCe(c);let x=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(x=!1);const S=()=>Fr(f.current),P=()=>(h.current.modalRef=p.current,h.current.mount=f.current,h.current),_=()=>{i.mount(P(),{disableScrollLock:r}),p.current&&(p.current.scrollTop=0)},I=Yr(()=>{const q=mCe(e)||S().body;i.add(P(),q),p.current&&_()}),C=N.useCallback(()=>i.isTopModal(P()),[i]),A=Yr(q=>{f.current=q,q&&(u&&C()?_():p.current&&qx(p.current,x))}),M=N.useCallback(()=>{i.remove(P(),x)},[x,i]);N.useEffect(()=>()=>{M()},[M]),N.useEffect(()=>{u?I():(!b||!s)&&M()},[u,M,b,s,I]);const k=q=>K=>{var V;(V=q.onKeyDown)==null||V.call(q,K),!(K.key!=="Escape"||K.which===229||!C())&&(n||(K.stopPropagation(),l&&l(K,"escapeKeyDown")))},O=q=>K=>{var V;(V=q.onClick)==null||V.call(q,K),K.target===K.currentTarget&&l&&l(K,"backdropClick")};return{getRootProps:(q={})=>{const K=Am(t);delete K.onTransitionEnter,delete K.onTransitionExited;const V=z({},K,q);return z({role:"presentation"},V,{onKeyDown:k(V),ref:g})},getBackdropProps:(q={})=>{const K=q;return z({"aria-hidden":!0},K,{onClick:O(K),open:u})},getTransitionProps:()=>{const q=()=>{y(!1),o&&o()},K=()=>{y(!0),a&&a(),s&&M()};return{onEnter:tI(q,c==null?void 0:c.props.onEnter),onExited:tI(K,c==null?void 0:c.props.onExited)}},rootRef:g,portalRef:A,isTopModal:C,exited:m,hasTransition:b}}function HK(t){return xt("MuiModal",t)}const bCe=wt("MuiModal",["root","hidden","backdrop"]),xCe=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],wCe=t=>{const{open:e,exited:n,classes:r}=t;return _t({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},HK,r)},_Ce=Ue("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})(({theme:t,ownerState:e})=>z({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})),SCe=Ue(w4,{name:"MuiModal",slot:"Backdrop",overridesResolver:(t,e)=>e.backdrop})({zIndex:-1}),WP=N.forwardRef(function(e,n){var r,i,s,o,a,c;const l=Et({name:"MuiModal",props:e}),{BackdropComponent:u=SCe,BackdropProps:d,className:h,closeAfterTransition:f=!1,children:p,container:g,component:m,components:y={},componentsProps:b={},disableAutoFocus:x=!1,disableEnforceFocus:S=!1,disableEscapeKeyDown:P=!1,disablePortal:_=!1,disableRestoreFocus:I=!1,disableScrollLock:C=!1,hideBackdrop:A=!1,keepMounted:M=!1,onBackdropClick:k,open:O,slotProps:B,slots:$}=l,U=rt(l,xCe),q=z({},l,{closeAfterTransition:f,disableAutoFocus:x,disableEnforceFocus:S,disableEscapeKeyDown:P,disablePortal:_,disableRestoreFocus:I,disableScrollLock:C,hideBackdrop:A,keepMounted:M}),{getRootProps:K,getBackdropProps:V,getTransitionProps:G,portalRef:j,isTopModal:Q,exited:se,hasTransition:Z}=vCe(z({},q,{rootRef:n})),ie=z({},q,{exited:se}),pe=wCe(ie),ue={};if(p.props.tabIndex===void 0&&(ue.tabIndex="-1"),Z){const{onEnter:Be,onExited:ce}=G();ue.onEnter=Be,ue.onExited=ce}const le=(r=(i=$==null?void 0:$.root)!=null?i:y.Root)!=null?r:_Ce,ae=(s=(o=$==null?void 0:$.backdrop)!=null?o:y.Backdrop)!=null?s:u,_e=(a=B==null?void 0:B.root)!=null?a:b.root,ye=(c=B==null?void 0:B.backdrop)!=null?c:b.backdrop,Ae=mi({elementType:le,externalSlotProps:_e,externalForwardedProps:U,getSlotProps:K,additionalProps:{ref:n,as:m},ownerState:ie,className:Fe(h,_e==null?void 0:_e.className,pe==null?void 0:pe.root,!ie.open&&ie.exited&&(pe==null?void 0:pe.hidden))}),Oe=mi({elementType:ae,externalSlotProps:ye,additionalProps:d,getSlotProps:Be=>V(z({},Be,{onClick:ce=>{k&&k(ce),Be!=null&&Be.onClick&&Be.onClick(ce)}})),className:Fe(ye==null?void 0:ye.className,d==null?void 0:d.className,pe==null?void 0:pe.backdrop),ownerState:ie});return!M&&!O&&(!Z||se)?null:H.jsx(g4,{ref:j,container:g,disablePortal:_,children:H.jsxs(le,z({},Ae,{children:[!A&&u?H.jsx(ae,z({},Oe)):null,H.jsx(zK,{disableEnforceFocus:S,disableAutoFocus:x,disableRestoreFocus:I,isEnabled:Q,open:O,children:N.cloneElement(p,ue)})]}))})});function VK(t){return xt("MuiDialog",t)}const BT=wt("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),WK=N.createContext({}),ECe=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],TCe=Ue(w4,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),ICe=t=>{const{classes:e,scroll:n,maxWidth:r,fullWidth:i,fullScreen:s}=t,o={root:["root"],container:["container",`scroll${qe(n)}`],paper:["paper",`paperScroll${qe(n)}`,`paperWidth${qe(String(r))}`,i&&"paperFullWidth",s&&"paperFullScreen"]};return _t(o,VK,e)},PCe=Ue(WP,{name:"MuiDialog",slot:"Root",overridesResolver:(t,e)=>e.root})({"@media print":{position:"absolute !important"}}),CCe=Ue("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.container,e[`scroll${qe(n.scroll)}`]]}})(({ownerState:t})=>z({height:"100%","@media print":{height:"auto"},outline:0},t.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},t.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),MCe=Ue(Da,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e[`scrollPaper${qe(n.scroll)}`],e[`paperWidth${qe(String(n.maxWidth))}`],n.fullWidth&&e.paperFullWidth,n.fullScreen&&e.paperFullScreen]}})(({theme:t,ownerState:e})=>z({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},e.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},e.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!e.maxWidth&&{maxWidth:"calc(100% - 64px)"},e.maxWidth==="xs"&&{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${BT.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.maxWidth&&e.maxWidth!=="xs"&&{maxWidth:`${t.breakpoints.values[e.maxWidth]}${t.breakpoints.unit}`,[`&.${BT.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.fullWidth&&{width:"calc(100% - 64px)"},e.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${BT.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),ACe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiDialog"}),i=$s(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":o,"aria-labelledby":a,BackdropComponent:c,BackdropProps:l,children:u,className:d,disableEscapeKeyDown:h=!1,fullScreen:f=!1,fullWidth:p=!1,maxWidth:g="sm",onBackdropClick:m,onClick:y,onClose:b,open:x,PaperComponent:S=Da,PaperProps:P={},scroll:_="paper",TransitionComponent:I=x4,transitionDuration:C=s,TransitionProps:A}=r,M=rt(r,ECe),k=z({},r,{disableEscapeKeyDown:h,fullScreen:f,fullWidth:p,maxWidth:g,scroll:_}),O=ICe(k),B=N.useRef(),$=V=>{B.current=V.target===V.currentTarget},U=V=>{y&&y(V),B.current&&(B.current=null,m&&m(V),b&&b(V,"backdropClick"))},q=_c(a),K=N.useMemo(()=>({titleId:q}),[q]);return H.jsx(PCe,z({className:Fe(O.root,d),closeAfterTransition:!0,components:{Backdrop:TCe},componentsProps:{backdrop:z({transitionDuration:C,as:c},l)},disableEscapeKeyDown:h,onClose:b,open:x,ref:n,onClick:U,ownerState:k},M,{children:H.jsx(I,z({appear:!0,in:x,timeout:C,role:"presentation"},A,{children:H.jsx(CCe,{className:Fe(O.container),onMouseDown:$,ownerState:k,children:H.jsx(MCe,z({as:S,elevation:24,role:"dialog","aria-describedby":o,"aria-labelledby":q},P,{className:Fe(O.paper,P.className),ownerState:k,children:H.jsx(WK.Provider,{value:K,children:u})}))})}))}))});function jK(t){return xt("MuiDialogActions",t)}const RCe=wt("MuiDialogActions",["root","spacing"]),kCe=["className","disableSpacing"],OCe=t=>{const{classes:e,disableSpacing:n}=t;return _t({root:["root",!n&&"spacing"]},jK,e)},NCe=Ue("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})(({ownerState:t})=>z({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),LCe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiDialogActions"}),{className:i,disableSpacing:s=!1}=r,o=rt(r,kCe),a=z({},r,{disableSpacing:s}),c=OCe(a);return H.jsx(NCe,z({className:Fe(c.root,i),ownerState:a,ref:n},o))});function qK(t){return xt("MuiDialogContent",t)}const DCe=wt("MuiDialogContent",["root","dividers"]);function KK(t){return xt("MuiDialogTitle",t)}const GK=wt("MuiDialogTitle",["root"]),BCe=["className","dividers"],FCe=t=>{const{classes:e,dividers:n}=t;return _t({root:["root",n&&"dividers"]},qK,e)},UCe=Ue("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dividers&&e.dividers]}})(({theme:t,ownerState:e})=>z({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},e.dividers?{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}:{[`.${GK.root} + &`]:{paddingTop:0}})),$Ce=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiDialogContent"}),{className:i,dividers:s=!1}=r,o=rt(r,BCe),a=z({},r,{dividers:s}),c=FCe(a);return H.jsx(UCe,z({className:Fe(c.root,i),ownerState:a,ref:n},o))});function XK(t){return xt("MuiDialogContentText",t)}const zCe=wt("MuiDialogContentText",["root"]),HCe=["children","className"],VCe=t=>{const{classes:e}=t,r=_t({root:["root"]},XK,e);return z({},e,r)},WCe=Ue(Ds,{shouldForwardProp:t=>Bi(t)||t==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(t,e)=>e.root})({}),jCe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiDialogContentText"}),{className:i}=r,s=rt(r,HCe),o=VCe(s);return H.jsx(WCe,z({component:"p",variant:"body1",color:"text.secondary",ref:n,ownerState:s,className:Fe(o.root,i)},r,{classes:o}))}),qCe=["className","id"],KCe=t=>{const{classes:e}=t;return _t({root:["root"]},KK,e)},GCe=Ue(Ds,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(t,e)=>e.root})({padding:"16px 24px",flex:"0 0 auto"}),XCe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiDialogTitle"}),{className:i,id:s}=r,o=rt(r,qCe),a=r,c=KCe(a),{titleId:l=s}=N.useContext(WK);return H.jsx(GCe,z({component:"h2",className:Fe(c.root,i),ownerState:a,ref:n,variant:"h6",id:s??l},o))});function YK(t){return xt("MuiDivider",t)}const _k=wt("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),YCe=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],ZCe=t=>{const{absolute:e,children:n,classes:r,flexItem:i,light:s,orientation:o,textAlign:a,variant:c}=t;return _t({root:["root",e&&"absolute",c,s&&"light",o==="vertical"&&"vertical",i&&"flexItem",n&&"withChildren",n&&o==="vertical"&&"withChildrenVertical",a==="right"&&o!=="vertical"&&"textAlignRight",a==="left"&&o!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",o==="vertical"&&"wrapperVertical"]},YK,r)},JCe=Ue("div",{name:"MuiDivider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.absolute&&e.absolute,e[n.variant],n.light&&e.light,n.orientation==="vertical"&&e.vertical,n.flexItem&&e.flexItem,n.children&&e.withChildren,n.children&&n.orientation==="vertical"&&e.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&e.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&e.textAlignLeft]}})(({theme:t,ownerState:e})=>z({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin"},e.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},e.light&&{borderColor:t.vars?`rgba(${t.vars.palette.dividerChannel} / 0.08)`:pt.alpha(t.palette.divider,.08)},e.variant==="inset"&&{marginLeft:72},e.variant==="middle"&&e.orientation==="horizontal"&&{marginLeft:t.spacing(2),marginRight:t.spacing(2)},e.variant==="middle"&&e.orientation==="vertical"&&{marginTop:t.spacing(1),marginBottom:t.spacing(1)},e.orientation==="vertical"&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},e.flexItem&&{alignSelf:"stretch",height:"auto"}),({ownerState:t})=>z({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}),({theme:t,ownerState:e})=>z({},e.children&&e.orientation!=="vertical"&&{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(t.vars||t).palette.divider}`,borderTopStyle:"inherit"}}),({theme:t,ownerState:e})=>z({},e.children&&e.orientation==="vertical"&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(t.vars||t).palette.divider}`,borderLeftStyle:"inherit"}}),({ownerState:t})=>z({},t.textAlign==="right"&&t.orientation!=="vertical"&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},t.textAlign==="left"&&t.orientation!=="vertical"&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})),QCe=Ue("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.wrapper,n.orientation==="vertical"&&e.wrapperVertical]}})(({theme:t,ownerState:e})=>z({display:"inline-block",paddingLeft:`calc(${t.spacing(1)} * 1.2)`,paddingRight:`calc(${t.spacing(1)} * 1.2)`},e.orientation==="vertical"&&{paddingTop:`calc(${t.spacing(1)} * 1.2)`,paddingBottom:`calc(${t.spacing(1)} * 1.2)`})),ZK=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiDivider"}),{absolute:i=!1,children:s,className:o,component:a=s?"div":"hr",flexItem:c=!1,light:l=!1,orientation:u="horizontal",role:d=a!=="hr"?"separator":void 0,textAlign:h="center",variant:f="fullWidth"}=r,p=rt(r,YCe),g=z({},r,{absolute:i,component:a,flexItem:c,light:l,orientation:u,role:d,textAlign:h,variant:f}),m=ZCe(g);return H.jsx(JCe,z({as:a,className:Fe(m.root,o),role:d,ref:n,ownerState:g},p,{children:s?H.jsx(QCe,{className:m.wrapper,ownerState:g,children:s}):null}))});ZK.muiSkipListHighlight=!0;const eMe=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function tMe(t,e,n){const r=e.getBoundingClientRect(),i=n&&n.getBoundingClientRect(),s=so(e);let o;if(e.fakeTransform)o=e.fakeTransform;else{const l=s.getComputedStyle(e);o=l.getPropertyValue("-webkit-transform")||l.getPropertyValue("transform")}let a=0,c=0;if(o&&o!=="none"&&typeof o=="string"){const l=o.split("(")[1].split(")")[0].split(",");a=parseInt(l[4],10),c=parseInt(l[5],10)}return t==="left"?i?`translateX(${i.right+a-r.left}px)`:`translateX(${s.innerWidth+a-r.left}px)`:t==="right"?i?`translateX(-${r.right-i.left-a}px)`:`translateX(-${r.left+r.width-a}px)`:t==="up"?i?`translateY(${i.bottom+c-r.top}px)`:`translateY(${s.innerHeight+c-r.top}px)`:i?`translateY(-${r.top-i.top+r.height-c}px)`:`translateY(-${r.top+r.height-c}px)`}function nMe(t){return typeof t=="function"?t():t}function iT(t,e,n){const r=nMe(n),i=tMe(t,e,r);i&&(e.style.webkitTransform=i,e.style.transform=i)}const JK=N.forwardRef(function(e,n){const r=$s(),i={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:a=!0,children:c,container:l,direction:u="down",easing:d=i,in:h,onEnter:f,onEntered:p,onEntering:g,onExit:m,onExited:y,onExiting:b,style:x,timeout:S=s,TransitionComponent:P=ao}=e,_=rt(e,eMe),I=N.useRef(null),C=or(Zd(c),I,n),A=V=>G=>{V&&(G===void 0?V(I.current):V(I.current,G))},M=A((V,G)=>{iT(u,V,l),DP(V),f&&f(V,G)}),k=A((V,G)=>{const j=Sc({timeout:S,style:x,easing:d},{mode:"enter"});V.style.webkitTransition=r.transitions.create("-webkit-transform",z({},j)),V.style.transition=r.transitions.create("transform",z({},j)),V.style.webkitTransform="none",V.style.transform="none",g&&g(V,G)}),O=A(p),B=A(b),$=A(V=>{const G=Sc({timeout:S,style:x,easing:d},{mode:"exit"});V.style.webkitTransition=r.transitions.create("-webkit-transform",G),V.style.transition=r.transitions.create("transform",G),iT(u,V,l),m&&m(V)}),U=A(V=>{V.style.webkitTransition="",V.style.transition="",y&&y(V)}),q=V=>{o&&o(I.current,V)},K=N.useCallback(()=>{I.current&&iT(u,I.current,l)},[u,l]);return N.useEffect(()=>{if(h||u==="down"||u==="right")return;const V=Sv(()=>{I.current&&iT(u,I.current,l)}),G=so(I.current);return G.addEventListener("resize",V),()=>{V.clear(),G.removeEventListener("resize",V)}},[u,h,l]),N.useEffect(()=>{h||K()},[h,K]),H.jsx(P,z({nodeRef:I,onEnter:M,onEntered:O,onEntering:k,onExit:$,onExited:U,onExiting:B,addEndListener:q,appear:a,in:h,timeout:S},_,{children:(V,G)=>N.cloneElement(c,z({ref:C,style:z({visibility:V==="exited"&&!h?"hidden":void 0},x,c.props.style)},G))}))});function QK(t){return xt("MuiDrawer",t)}const rMe=wt("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]),iMe=["BackdropProps"],sMe=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],eG=(t,e)=>{const{ownerState:n}=t;return[e.root,(n.variant==="permanent"||n.variant==="persistent")&&e.docked,e.modal]},oMe=t=>{const{classes:e,anchor:n,variant:r}=t,i={root:["root"],docked:[(r==="permanent"||r==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${qe(n)}`,r!=="temporary"&&`paperAnchorDocked${qe(n)}`]};return _t(i,QK,e)},aMe=Ue(WP,{name:"MuiDrawer",slot:"Root",overridesResolver:eG})(({theme:t})=>({zIndex:(t.vars||t).zIndex.drawer})),N7=Ue("div",{shouldForwardProp:Bi,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:eG})({flex:"0 0 auto"}),lMe=Ue(Da,{name:"MuiDrawer",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e[`paperAnchor${qe(n.anchor)}`],n.variant!=="temporary"&&e[`paperAnchorDocked${qe(n.anchor)}`]]}})(({theme:t,ownerState:e})=>z({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(t.vars||t).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},e.anchor==="left"&&{left:0},e.anchor==="top"&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},e.anchor==="right"&&{right:0},e.anchor==="bottom"&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},e.anchor==="left"&&e.variant!=="temporary"&&{borderRight:`1px solid ${(t.vars||t).palette.divider}`},e.anchor==="top"&&e.variant!=="temporary"&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`},e.anchor==="right"&&e.variant!=="temporary"&&{borderLeft:`1px solid ${(t.vars||t).palette.divider}`},e.anchor==="bottom"&&e.variant!=="temporary"&&{borderTop:`1px solid ${(t.vars||t).palette.divider}`})),tG={left:"right",right:"left",top:"down",bottom:"up"};function um(t){return["left","right"].indexOf(t)!==-1}function Ix({direction:t},e){return t==="rtl"&&um(e)?tG[e]:e}const nG=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiDrawer"}),i=$s(),s=mu(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:a="left",BackdropProps:c,children:l,className:u,elevation:d=16,hideBackdrop:h=!1,ModalProps:{BackdropProps:f}={},onClose:p,open:g=!1,PaperProps:m={},SlideProps:y,TransitionComponent:b=JK,transitionDuration:x=o,variant:S="temporary"}=r,P=rt(r.ModalProps,iMe),_=rt(r,sMe),I=N.useRef(!1);N.useEffect(()=>{I.current=!0},[]);const C=Ix({direction:s?"rtl":"ltr"},a),M=z({},r,{anchor:a,elevation:d,open:g,variant:S},_),k=oMe(M),O=H.jsx(lMe,z({elevation:S==="temporary"?d:0,square:!0},m,{className:Fe(k.paper,m.className),ownerState:M,children:l}));if(S==="permanent")return H.jsx(N7,z({className:Fe(k.root,k.docked,u),ownerState:M,ref:n},_,{children:O}));const B=H.jsx(b,z({in:g,direction:tG[C],timeout:x,appear:I.current},y,{children:O}));return S==="persistent"?H.jsx(N7,z({className:Fe(k.root,k.docked,u),ownerState:M,ref:n},_,{children:B})):H.jsx(aMe,z({BackdropProps:z({},c,f,{transitionDuration:x}),className:Fe(k.root,k.modal,u),open:g,ownerState:M,onClose:p,hideBackdrop:h,ref:n},_,P,{children:B}))});function rG(t){return xt("MuiFab",t)}const Sk=wt("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),cMe=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],uMe=t=>{const{color:e,variant:n,classes:r,size:i}=t,s={root:["root",n,`size${qe(i)}`,e==="inherit"?"colorInherit":e]},o=_t(s,rG,r);return z({},r,o)},dMe=Ue(Yi,{name:"MuiFab",slot:"Root",shouldForwardProp:t=>Bi(t)||t==="classes",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`size${qe(n.size)}`],n.color==="inherit"&&e.colorInherit,e[qe(n.size)],e[n.color]]}})(({theme:t,ownerState:e})=>{var n,r;return z({},t.typography.button,{minHeight:36,transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(t.vars||t).zIndex.fab,boxShadow:(t.vars||t).shadows[6],"&:active":{boxShadow:(t.vars||t).shadows[12]},color:t.vars?t.vars.palette.text.primary:(n=(r=t.palette).getContrastText)==null?void 0:n.call(r,t.palette.grey[300]),backgroundColor:(t.vars||t).palette.grey[300],"&:hover":{backgroundColor:(t.vars||t).palette.grey.A100,"@media (hover: none)":{backgroundColor:(t.vars||t).palette.grey[300]},textDecoration:"none"},[`&.${Sk.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]}},e.size==="small"&&{width:40,height:40},e.size==="medium"&&{width:48,height:48},e.variant==="extended"&&{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},e.variant==="extended"&&e.size==="small"&&{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34},e.variant==="extended"&&e.size==="medium"&&{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40},e.color==="inherit"&&{color:"inherit"})},({theme:t,ownerState:e})=>z({},e.color!=="inherit"&&e.color!=="default"&&(t.vars||t).palette[e.color]!=null&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}}}),({theme:t})=>({[`&.${Sk.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}})),I4=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiFab"}),{children:i,className:s,color:o="default",component:a="button",disabled:c=!1,disableFocusRipple:l=!1,focusVisibleClassName:u,size:d="large",variant:h="circular"}=r,f=rt(r,cMe),p=z({},r,{color:o,component:a,disabled:c,disableFocusRipple:l,size:d,variant:h}),g=uMe(p);return H.jsx(dMe,z({className:Fe(g.root,s),component:a,disabled:c,focusRipple:!l,focusVisibleClassName:Fe(g.focusVisible,u),ownerState:p,ref:n},f,{classes:g,children:i}))}),fMe=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],hMe=t=>{const{classes:e,disableUnderline:n}=t,i=_t({root:["root",!n&&"underline"],input:["input"]},fK,e);return z({},e,i)},pMe=Ue(zP,{shouldForwardProp:t=>Bi(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...UP(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{var n;const r=t.palette.mode==="light",i=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return z({position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s}},[`&.${Xo.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s},[`&.${Xo.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:a}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(n=(t.vars||t).palette[e.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Xo.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Xo.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Xo.disabled}, .${Xo.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${Xo.disabled}:before`]:{borderBottomStyle:"dotted"}},e.startAdornment&&{paddingLeft:12},e.endAdornment&&{paddingRight:12},e.multiline&&z({padding:"25px 12px 8px"},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9}))}),mMe=Ue(HP,{name:"MuiFilledInput",slot:"Input",overridesResolver:$P})(({theme:t,ownerState:e})=>z({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9},e.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),jP=N.forwardRef(function(e,n){var r,i,s,o;const a=Et({props:e,name:"MuiFilledInput"}),{components:c={},componentsProps:l,fullWidth:u=!1,inputComponent:d="input",multiline:h=!1,slotProps:f,slots:p={},type:g="text"}=a,m=rt(a,fMe),y=z({},a,{fullWidth:u,inputComponent:d,multiline:h,type:g}),b=hMe(a),x={root:{ownerState:y},input:{ownerState:y}},S=f??l?ki(x,f??l):x,P=(r=(i=p.root)!=null?i:c.Root)!=null?r:pMe,_=(s=(o=p.input)!=null?o:c.Input)!=null?s:mMe;return H.jsx(S_,z({slots:{root:P,input:_},componentsProps:S,fullWidth:u,inputComponent:d,multiline:h,ref:n,type:g},m,{classes:b}))});jP.muiName="Input";function iG(t){return xt("MuiFormControl",t)}const gMe=wt("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]),yMe=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],vMe=t=>{const{classes:e,margin:n,fullWidth:r}=t,i={root:["root",n!=="none"&&`margin${qe(n)}`,r&&"fullWidth"]};return _t(i,iG,e)},bMe=Ue("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:t},e)=>z({},e.root,e[`margin${qe(t.margin)}`],t.fullWidth&&e.fullWidth)})(({ownerState:t})=>z({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},t.margin==="normal"&&{marginTop:16,marginBottom:8},t.margin==="dense"&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})),sG=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiFormControl"}),{children:i,className:s,color:o="primary",component:a="div",disabled:c=!1,error:l=!1,focused:u,fullWidth:d=!1,hiddenLabel:h=!1,margin:f="none",required:p=!1,size:g="medium",variant:m="outlined"}=r,y=rt(r,yMe),b=z({},r,{color:o,component:a,disabled:c,error:l,fullWidth:d,hiddenLabel:h,margin:f,required:p,size:g,variant:m}),x=vMe(b),[S,P]=N.useState(()=>{let B=!1;return i&&N.Children.forEach(i,$=>{if(!Dd($,["Input","Select"]))return;const U=Dd($,["Select"])?$.props.input:$;U&&_2e(U.props)&&(B=!0)}),B}),[_,I]=N.useState(()=>{let B=!1;return i&&N.Children.forEach(i,$=>{Dd($,["Input","Select"])&&(iI($.props,!0)||iI($.props.inputProps,!0))&&(B=!0)}),B}),[C,A]=N.useState(!1);c&&C&&A(!1);const M=u!==void 0&&!c?u:C;let k;const O=N.useMemo(()=>({adornedStart:S,setAdornedStart:P,color:o,disabled:c,error:l,filled:_,focused:M,fullWidth:d,hiddenLabel:h,size:g,onBlur:()=>{A(!1)},onEmpty:()=>{I(!1)},onFilled:()=>{I(!0)},onFocus:()=>{A(!0)},registerEffect:k,required:p,variant:m}),[S,o,c,l,_,M,d,h,k,p,g,m]);return H.jsx(FP.Provider,{value:O,children:H.jsx(bMe,z({as:a,ownerState:b,className:Fe(x.root,s),ref:n},y,{children:i}))})}),oG=hSe({createStyledComponent:Ue("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root}),useThemeProps:t=>Et({props:t,name:"MuiStack"})}),xMe=wt("MuiStack",["root"]);function aG(t){return xt("MuiFormControlLabel",t)}const by=wt("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),wMe=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],_Me=t=>{const{classes:e,disabled:n,labelPlacement:r,error:i,required:s}=t,o={root:["root",n&&"disabled",`labelPlacement${qe(r)}`,i&&"error",s&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]};return _t(o,aG,e)},SMe=Ue("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${by.label}`]:e.label},e.root,e[`labelPlacement${qe(n.labelPlacement)}`]]}})(({theme:t,ownerState:e})=>z({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${by.disabled}`]:{cursor:"default"}},e.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},e.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},e.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${by.label}`]:{[`&.${by.disabled}`]:{color:(t.vars||t).palette.text.disabled}}})),EMe=Ue("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})(({theme:t})=>({[`&.${by.error}`]:{color:(t.vars||t).palette.error.main}})),TMe=N.forwardRef(function(e,n){var r,i;const s=Et({props:e,name:"MuiFormControlLabel"}),{className:o,componentsProps:a={},control:c,disabled:l,disableTypography:u,label:d,labelPlacement:h="end",required:f,slotProps:p={}}=s,g=rt(s,wMe),m=Pl(),y=(r=l??c.props.disabled)!=null?r:m==null?void 0:m.disabled,b=f??c.props.required,x={disabled:y,required:b};["checked","name","onChange","value","inputRef"].forEach(A=>{typeof c.props[A]>"u"&&typeof s[A]<"u"&&(x[A]=s[A])});const S=Jd({props:s,muiFormControl:m,states:["error"]}),P=z({},s,{disabled:y,labelPlacement:h,required:b,error:S.error}),_=_Me(P),I=(i=p.typography)!=null?i:a.typography;let C=d;return C!=null&&C.type!==Ds&&!u&&(C=H.jsx(Ds,z({component:"span"},I,{className:Fe(_.label,I==null?void 0:I.className),children:C}))),H.jsxs(SMe,z({className:Fe(_.root,o),ownerState:P,ref:n},g,{children:[N.cloneElement(c,x),b?H.jsxs(oG,{display:"block",children:[C,H.jsxs(EMe,{ownerState:P,"aria-hidden":!0,className:_.asterisk,children:["","*"]})]}):C]}))});function lG(t){return xt("MuiFormGroup",t)}const IMe=wt("MuiFormGroup",["root","row","error"]),PMe=["className","row"],CMe=t=>{const{classes:e,row:n,error:r}=t;return _t({root:["root",n&&"row",r&&"error"]},lG,e)},MMe=Ue("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.row&&e.row]}})(({ownerState:t})=>z({display:"flex",flexDirection:"column",flexWrap:"wrap"},t.row&&{flexDirection:"row"})),cG=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiFormGroup"}),{className:i,row:s=!1}=r,o=rt(r,PMe),a=Pl(),c=Jd({props:r,muiFormControl:a,states:["error"]}),l=z({},r,{row:s,error:c.error}),u=CMe(l);return H.jsx(MMe,z({className:Fe(u.root,i),ownerState:l,ref:n},o))});function uG(t){return xt("MuiFormHelperText",t)}const Ek=wt("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var L7;const AMe=["children","className","component","disabled","error","filled","focused","margin","required","variant"],RMe=t=>{const{classes:e,contained:n,size:r,disabled:i,error:s,filled:o,focused:a,required:c}=t,l={root:["root",i&&"disabled",s&&"error",r&&`size${qe(r)}`,n&&"contained",a&&"focused",o&&"filled",c&&"required"]};return _t(l,uG,e)},kMe=Ue("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e[`size${qe(n.size)}`],n.contained&&e.contained,n.filled&&e.filled]}})(({theme:t,ownerState:e})=>z({color:(t.vars||t).palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${Ek.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${Ek.error}`]:{color:(t.vars||t).palette.error.main}},e.size==="small"&&{marginTop:4},e.contained&&{marginLeft:14,marginRight:14})),dG=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiFormHelperText"}),{children:i,className:s,component:o="p"}=r,a=rt(r,AMe),c=Pl(),l=Jd({props:r,muiFormControl:c,states:["variant","size","disabled","error","filled","focused","required"]}),u=z({},r,{component:o,contained:l.variant==="filled"||l.variant==="outlined",variant:l.variant,size:l.size,disabled:l.disabled,error:l.error,filled:l.filled,focused:l.focused,required:l.required}),d=RMe(u);return H.jsx(kMe,z({as:o,ownerState:u,className:Fe(d.root,s),ref:n},a,{children:i===" "?L7||(L7=H.jsx("span",{className:"notranslate",children:""})):i}))});function fG(t){return xt("MuiFormLabel",t)}const My=wt("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),OMe=["children","className","color","component","disabled","error","filled","focused","required"],NMe=t=>{const{classes:e,color:n,focused:r,disabled:i,error:s,filled:o,required:a}=t,c={root:["root",`color${qe(n)}`,i&&"disabled",s&&"error",o&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",s&&"error"]};return _t(c,fG,e)},hG=Ue("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:t},e)=>z({},e.root,t.color==="secondary"&&e.colorSecondary,t.filled&&e.filled)})(({theme:t,ownerState:e})=>z({color:(t.vars||t).palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${My.focused}`]:{color:(t.vars||t).palette[e.color].main},[`&.${My.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${My.error}`]:{color:(t.vars||t).palette.error.main}})),LMe=Ue("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})(({theme:t})=>({[`&.${My.error}`]:{color:(t.vars||t).palette.error.main}})),pG=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiFormLabel"}),{children:i,className:s,component:o="label"}=r,a=rt(r,OMe),c=Pl(),l=Jd({props:r,muiFormControl:c,states:["color","required","focused","disabled","error","filled"]}),u=z({},r,{color:l.color||"primary",component:o,disabled:l.disabled,error:l.error,filled:l.filled,focused:l.focused,required:l.required}),d=NMe(u);return H.jsxs(hG,z({as:o,ownerState:u,className:Fe(d.root,s),ref:n},a,{children:[i,l.required&&H.jsxs(LMe,{ownerState:u,"aria-hidden":!0,className:d.asterisk,children:["","*"]})]}))}),D7=N.createContext();function mG(t){return xt("MuiGrid",t)}const DMe=[0,1,2,3,4,5,6,7,8,9,10],BMe=["column-reverse","column","row-reverse","row"],FMe=["nowrap","wrap-reverse","wrap"],nx=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],tv=wt("MuiGrid",["root","container","item","zeroMinWidth",...DMe.map(t=>`spacing-xs-${t}`),...BMe.map(t=>`direction-xs-${t}`),...FMe.map(t=>`wrap-xs-${t}`),...nx.map(t=>`grid-xs-${t}`),...nx.map(t=>`grid-sm-${t}`),...nx.map(t=>`grid-md-${t}`),...nx.map(t=>`grid-lg-${t}`),...nx.map(t=>`grid-xl-${t}`)]),UMe=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function Ay(t){const e=parseFloat(t);return`${e}${String(t).replace(String(e),"")||"px"}`}function $Me({theme:t,ownerState:e}){let n;return t.breakpoints.keys.reduce((r,i)=>{let s={};if(e[i]&&(n=e[i]),!n)return r;if(n===!0)s={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(n==="auto")s={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const o=Mm({values:e.columns,breakpoints:t.breakpoints.values}),a=typeof o=="object"?o[i]:o;if(a==null)return r;const c=`${Math.round(n/a*1e8)/1e6}%`;let l={};if(e.container&&e.item&&e.columnSpacing!==0){const u=t.spacing(e.columnSpacing);if(u!=="0px"){const d=`calc(${c} + ${Ay(u)})`;l={flexBasis:d,maxWidth:d}}}s=z({flexBasis:c,flexGrow:0,maxWidth:c},l)}return t.breakpoints.values[i]===0?Object.assign(r,s):r[t.breakpoints.up(i)]=s,r},{})}function zMe({theme:t,ownerState:e}){const n=Mm({values:e.direction,breakpoints:t.breakpoints.values});return ia({theme:t},n,r=>{const i={flexDirection:r};return r.indexOf("column")===0&&(i[`& > .${tv.item}`]={maxWidth:"none"}),i})}function gG({breakpoints:t,values:e}){let n="";Object.keys(e).forEach(i=>{n===""&&e[i]!==0&&(n=i)});const r=Object.keys(t).sort((i,s)=>t[i]-t[s]);return r.slice(0,r.indexOf(n))}function HMe({theme:t,ownerState:e}){const{container:n,rowSpacing:r}=e;let i={};if(n&&r!==0){const s=Mm({values:r,breakpoints:t.breakpoints.values});let o;typeof s=="object"&&(o=gG({breakpoints:t.breakpoints.values,values:s})),i=ia({theme:t},s,(a,c)=>{var l;const u=t.spacing(a);return u!=="0px"?{marginTop:`-${Ay(u)}`,[`& > .${tv.item}`]:{paddingTop:Ay(u)}}:(l=o)!=null&&l.includes(c)?{}:{marginTop:0,[`& > .${tv.item}`]:{paddingTop:0}}})}return i}function VMe({theme:t,ownerState:e}){const{container:n,columnSpacing:r}=e;let i={};if(n&&r!==0){const s=Mm({values:r,breakpoints:t.breakpoints.values});let o;typeof s=="object"&&(o=gG({breakpoints:t.breakpoints.values,values:s})),i=ia({theme:t},s,(a,c)=>{var l;const u=t.spacing(a);return u!=="0px"?{width:`calc(100% + ${Ay(u)})`,marginLeft:`-${Ay(u)}`,[`& > .${tv.item}`]:{paddingLeft:Ay(u)}}:(l=o)!=null&&l.includes(c)?{}:{width:"100%",marginLeft:0,[`& > .${tv.item}`]:{paddingLeft:0}}})}return i}function WMe(t,e,n={}){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[n[`spacing-xs-${String(t)}`]];const r=[];return e.forEach(i=>{const s=t[i];Number(s)>0&&r.push(n[`spacing-${i}-${String(s)}`])}),r}const jMe=Ue("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{container:r,direction:i,item:s,spacing:o,wrap:a,zeroMinWidth:c,breakpoints:l}=n;let u=[];r&&(u=WMe(o,l,e));const d=[];return l.forEach(h=>{const f=n[h];f&&d.push(e[`grid-${h}-${String(f)}`])}),[e.root,r&&e.container,s&&e.item,c&&e.zeroMinWidth,...u,i!=="row"&&e[`direction-xs-${String(i)}`],a!=="wrap"&&e[`wrap-xs-${String(a)}`],...d]}})(({ownerState:t})=>z({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},t.wrap!=="wrap"&&{flexWrap:t.wrap}),zMe,HMe,VMe,$Me);function qMe(t,e){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[`spacing-xs-${String(t)}`];const n=[];return e.forEach(r=>{const i=t[r];if(Number(i)>0){const s=`spacing-${r}-${String(i)}`;n.push(s)}}),n}const KMe=t=>{const{classes:e,container:n,direction:r,item:i,spacing:s,wrap:o,zeroMinWidth:a,breakpoints:c}=t;let l=[];n&&(l=qMe(s,c));const u=[];c.forEach(h=>{const f=t[h];f&&u.push(`grid-${h}-${String(f)}`)});const d={root:["root",n&&"container",i&&"item",a&&"zeroMinWidth",...l,r!=="row"&&`direction-xs-${String(r)}`,o!=="wrap"&&`wrap-xs-${String(o)}`,...u]};return _t(d,mG,e)},GMe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiGrid"}),{breakpoints:i}=$s(),s=_v(r),{className:o,columns:a,columnSpacing:c,component:l="div",container:u=!1,direction:d="row",item:h=!1,rowSpacing:f,spacing:p=0,wrap:g="wrap",zeroMinWidth:m=!1}=s,y=rt(s,UMe),b=f||p,x=c||p,S=N.useContext(D7),P=u?a||12:S,_={},I=z({},y);i.keys.forEach(M=>{y[M]!=null&&(_[M]=y[M],delete I[M])});const C=z({},s,{columns:P,container:u,direction:d,item:h,rowSpacing:b,columnSpacing:x,wrap:g,zeroMinWidth:m,spacing:p},_,{breakpoints:i.keys}),A=KMe(C);return H.jsx(D7.Provider,{value:P,children:H.jsx(jMe,z({ownerState:C,className:Fe(A.root,o),as:l,ref:n},I))})}),XMe=sSe({createStyledComponent:Ue("div",{name:"MuiGrid2",slot:"Root",overridesResolver:(t,e)=>e.root}),componentName:"MuiGrid2",useThemeProps:t=>Et({props:t,name:"MuiGrid2"})});function YMe(t){return xt("MuiGrid2",t)}const ZMe=[0,1,2,3,4,5,6,7,8,9,10],JMe=["column-reverse","column","row-reverse","row"],QMe=["nowrap","wrap-reverse","wrap"],rx=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],eAe=wt("MuiGrid2",["root","container","item","zeroMinWidth",...ZMe.map(t=>`spacing-xs-${t}`),...JMe.map(t=>`direction-xs-${t}`),...QMe.map(t=>`wrap-xs-${t}`),...rx.map(t=>`grid-xs-${t}`),...rx.map(t=>`grid-sm-${t}`),...rx.map(t=>`grid-md-${t}`),...rx.map(t=>`grid-lg-${t}`),...rx.map(t=>`grid-xl-${t}`)]),tAe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Tk(t){return`scale(${t}, ${t**2})`}const nAe={entering:{opacity:1,transform:Tk(1)},entered:{opacity:1,transform:"none"}},UA=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),nv=N.forwardRef(function(e,n){const{addEndListener:r,appear:i=!0,children:s,easing:o,in:a,onEnter:c,onEntered:l,onEntering:u,onExit:d,onExited:h,onExiting:f,style:p,timeout:g="auto",TransitionComponent:m=ao}=e,y=rt(e,tAe),b=Ad(),x=N.useRef(),S=$s(),P=N.useRef(null),_=or(P,Zd(s),n),I=U=>q=>{if(U){const K=P.current;q===void 0?U(K):U(K,q)}},C=I(u),A=I((U,q)=>{DP(U);const{duration:K,delay:V,easing:G}=Sc({style:p,timeout:g,easing:o},{mode:"enter"});let j;g==="auto"?(j=S.transitions.getAutoHeightDuration(U.clientHeight),x.current=j):j=K,U.style.transition=[S.transitions.create("opacity",{duration:j,delay:V}),S.transitions.create("transform",{duration:UA?j:j*.666,delay:V,easing:G})].join(","),c&&c(U,q)}),M=I(l),k=I(f),O=I(U=>{const{duration:q,delay:K,easing:V}=Sc({style:p,timeout:g,easing:o},{mode:"exit"});let G;g==="auto"?(G=S.transitions.getAutoHeightDuration(U.clientHeight),x.current=G):G=q,U.style.transition=[S.transitions.create("opacity",{duration:G,delay:K}),S.transitions.create("transform",{duration:UA?G:G*.666,delay:UA?K:K||G*.333,easing:V})].join(","),U.style.opacity=0,U.style.transform=Tk(.75),d&&d(U)}),B=I(h),$=U=>{g==="auto"&&b.start(x.current||0,U),r&&r(P.current,U)};return H.jsx(m,z({appear:i,in:a,nodeRef:P,onEnter:A,onEntered:M,onEntering:C,onExit:O,onExited:B,onExiting:k,addEndListener:$,timeout:g==="auto"?null:g},y,{children:(U,q)=>N.cloneElement(s,z({style:z({opacity:0,transform:Tk(.75),visibility:U==="exited"&&!a?"hidden":void 0},nAe[U],p,s.props.style),ref:_},q))}))});nv.muiSupportAuto=!0;const rAe=["initialWidth","width"],Jf=["xs","sm","md","lg","xl"],iAe=(t,e,n=!0)=>n?Jf.indexOf(t)<=Jf.indexOf(e):Jf.indexOf(t)<Jf.indexOf(e),sAe=(t,e,n=!1)=>n?Jf.indexOf(e)<=Jf.indexOf(t):Jf.indexOf(e)<Jf.indexOf(t),oAe=(t={})=>e=>{const{withTheme:n=!1,noSSR:r=!1,initialWidth:i}=t;function s(o){const a=$s(),c=o.theme||a,l=s4({theme:c,name:"MuiWithWidth",props:o}),{initialWidth:u,width:d}=l,h=rt(l,rAe),[f,p]=N.useState(!1);fs(()=>{p(!0)},[]);const m=c.breakpoints.keys.slice().reverse().reduce((b,x)=>{const S=pq(c.breakpoints.up(x));return!b&&S?x:b},null),y=z({width:d||(f||r?m:void 0)||u||i},n?{theme:c}:{},h);return y.width===void 0?null:H.jsx(e,z({},y))}return s};function aAe(t){const{children:e,only:n,width:r}=t,i=$s();let s=!0;if(n)if(Array.isArray(n))for(let o=0;o<n.length;o+=1){const a=n[o];if(r===a){s=!1;break}}else n&&r===n&&(s=!1);if(s)for(let o=0;o<i.breakpoints.keys.length;o+=1){const a=i.breakpoints.keys[o],c=t[`${a}Up`],l=t[`${a}Down`];if(c&&iAe(a,r)||l&&sAe(a,r)){s=!1;break}}return s?H.jsx(N.Fragment,{children:e}):null}const lAe=oAe()(aAe);function cAe(t){return xt("PrivateHiddenCss",t)}wt("PrivateHiddenCss",["root","xlDown","xlUp","onlyXl","lgDown","lgUp","onlyLg","mdDown","mdUp","onlyMd","smDown","smUp","onlySm","xsDown","xsUp","onlyXs"]);const uAe=["children","className","only"],dAe=t=>{const{classes:e,breakpoints:n}=t,r={root:["root",...n.map(({breakpoint:i,dir:s})=>s==="only"?`${s}${qe(i)}`:`${i}${qe(s)}`)]};return _t(r,cAe,e)},fAe=Ue("div",{name:"PrivateHiddenCss",slot:"Root"})(({theme:t,ownerState:e})=>{const n={display:"none"};return z({},e.breakpoints.map(({breakpoint:r,dir:i})=>i==="only"?{[t.breakpoints.only(r)]:n}:i==="up"?{[t.breakpoints.up(r)]:n}:{[t.breakpoints.down(r)]:n}).reduce((r,i)=>(Object.keys(i).forEach(s=>{r[s]=i[s]}),r),{}))});function hAe(t){const{children:e,className:n,only:r}=t,i=rt(t,uAe),s=$s(),o=[];for(let l=0;l<s.breakpoints.keys.length;l+=1){const u=s.breakpoints.keys[l],d=i[`${u}Up`],h=i[`${u}Down`];d&&o.push({breakpoint:u,dir:"up"}),h&&o.push({breakpoint:u,dir:"down"})}r&&(Array.isArray(r)?r:[r]).forEach(u=>{o.push({breakpoint:u,dir:"only"})});const a=z({},t,{breakpoints:o}),c=dAe(a);return H.jsx(fAe,{className:Fe(c.root,n),ownerState:a,children:e})}const pAe=["implementation","lgDown","lgUp","mdDown","mdUp","smDown","smUp","xlDown","xlUp","xsDown","xsUp"];function mAe(t){const{implementation:e="js",lgDown:n=!1,lgUp:r=!1,mdDown:i=!1,mdUp:s=!1,smDown:o=!1,smUp:a=!1,xlDown:c=!1,xlUp:l=!1,xsDown:u=!1,xsUp:d=!1}=t,h=rt(t,pAe);return e==="js"?H.jsx(lAe,z({lgDown:n,lgUp:r,mdDown:i,mdUp:s,smDown:o,smUp:a,xlDown:c,xlUp:l,xsDown:u,xsUp:d},h)):H.jsx(hAe,z({lgDown:n,lgUp:r,mdDown:i,mdUp:s,smDown:o,smUp:a,xlDown:c,xlUp:l,xsDown:u,xsUp:d},h))}function yG(t){return xt("MuiIcon",t)}const gAe=wt("MuiIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]),yAe=["baseClassName","className","color","component","fontSize"],vAe=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${qe(e)}`,`fontSize${qe(n)}`]};return _t(i,yG,r)},bAe=Ue("span",{name:"MuiIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${qe(n.color)}`],e[`fontSize${qe(n.fontSize)}`]]}})(({theme:t,ownerState:e})=>({userSelect:"none",width:"1em",height:"1em",overflow:"hidden",display:"inline-block",textAlign:"center",flexShrink:0,fontSize:{inherit:"inherit",small:t.typography.pxToRem(20),medium:t.typography.pxToRem(24),large:t.typography.pxToRem(36)}[e.fontSize],color:{primary:(t.vars||t).palette.primary.main,secondary:(t.vars||t).palette.secondary.main,info:(t.vars||t).palette.info.main,success:(t.vars||t).palette.success.main,warning:(t.vars||t).palette.warning.main,action:(t.vars||t).palette.action.active,error:(t.vars||t).palette.error.main,disabled:(t.vars||t).palette.action.disabled,inherit:void 0}[e.color]})),vG=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiIcon"}),{baseClassName:i="material-icons",className:s,color:o="inherit",component:a="span",fontSize:c="medium"}=r,l=rt(r,yAe),u=z({},r,{baseClassName:i,color:o,component:a,fontSize:c}),d=vAe(u);return H.jsx(bAe,z({as:a,className:Fe(i,"notranslate",d.root,s),ownerState:u,"aria-hidden":!0,ref:n},l))});vG.muiName="Icon";function bG(t){return xt("MuiImageList",t)}const xAe=wt("MuiImageList",["root","masonry","quilted","standard","woven"]),xG=N.createContext({}),wAe=["children","className","cols","component","rowHeight","gap","style","variant"],_Ae=t=>{const{classes:e,variant:n}=t;return _t({root:["root",n]},bG,e)},SAe=Ue("ul",{name:"MuiImageList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant]]}})(({ownerState:t})=>z({display:"grid",overflowY:"auto",listStyle:"none",padding:0,WebkitOverflowScrolling:"touch"},t.variant==="masonry"&&{display:"block"})),EAe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiImageList"}),{children:i,className:s,cols:o=2,component:a="ul",rowHeight:c="auto",gap:l=4,style:u,variant:d="standard"}=r,h=rt(r,wAe),f=N.useMemo(()=>({rowHeight:c,gap:l,variant:d}),[c,l,d]);N.useEffect(()=>{},[]);const p=z(d==="masonry"?{columnCount:o,columnGap:l}:{gridTemplateColumns:`repeat(${o}, 1fr)`,gap:l},u),g=z({},r,{component:a,gap:l,rowHeight:c,variant:d}),m=_Ae(g);return H.jsx(SAe,z({as:a,className:Fe(m.root,m[d],s),ref:n,style:p,ownerState:g},h,{children:H.jsx(xG.Provider,{value:f,children:i})}))});function wG(t){return xt("MuiImageListItem",t)}const Ik=wt("MuiImageListItem",["root","img","standard","woven","masonry","quilted"]),TAe=["children","className","cols","component","rows","style"],IAe=t=>{const{classes:e,variant:n}=t;return _t({root:["root",n],img:["img"]},wG,e)},PAe=Ue("li",{name:"MuiImageListItem",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${Ik.img}`]:e.img},e.root,e[n.variant]]}})(({ownerState:t})=>z({display:"block",position:"relative"},t.variant==="standard"&&{display:"flex",flexDirection:"column"},t.variant==="woven"&&{height:"100%",alignSelf:"center","&:nth-of-type(even)":{height:"70%"}},{[`& .${Ik.img}`]:z({objectFit:"cover",width:"100%",height:"100%",display:"block"},t.variant==="standard"&&{height:"auto",flexGrow:1})})),CAe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiImageListItem"}),{children:i,className:s,cols:o=1,component:a="li",rows:c=1,style:l}=r,u=rt(r,TAe),{rowHeight:d="auto",gap:h,variant:f}=N.useContext(xG);let p="auto";f==="woven"?p=void 0:d!=="auto"&&(p=d*c+h*(c-1));const g=z({},r,{cols:o,component:a,gap:h,rowHeight:d,rows:c,variant:f}),m=IAe(g);return H.jsx(PAe,z({as:a,className:Fe(m.root,m[f],s),ref:n,style:z({height:p,gridColumnEnd:f!=="masonry"?`span ${o}`:void 0,gridRowEnd:f!=="masonry"?`span ${c}`:void 0,marginBottom:f==="masonry"?h:void 0,breakInside:f==="masonry"?"avoid":void 0},l),ownerState:g},u,{children:N.Children.map(i,y=>N.isValidElement(y)?y.type==="img"||Dd(y,["Image"])?N.cloneElement(y,{className:Fe(m.img,y.props.className)}):y:null)}))});function _G(t){return xt("MuiImageListItemBar",t)}const MAe=wt("MuiImageListItemBar",["root","positionBottom","positionTop","positionBelow","titleWrap","titleWrapBottom","titleWrapTop","titleWrapBelow","titleWrapActionPosLeft","titleWrapActionPosRight","title","subtitle","actionIcon","actionIconActionPosLeft","actionIconActionPosRight"]),AAe=["actionIcon","actionPosition","className","subtitle","title","position"],RAe=t=>{const{classes:e,position:n,actionIcon:r,actionPosition:i}=t,s={root:["root",`position${qe(n)}`],titleWrap:["titleWrap",`titleWrap${qe(n)}`,r&&`titleWrapActionPos${qe(i)}`],title:["title"],subtitle:["subtitle"],actionIcon:["actionIcon",`actionIconActionPos${qe(i)}`]};return _t(s,_G,e)},kAe=Ue("div",{name:"MuiImageListItemBar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${qe(n.position)}`]]}})(({theme:t,ownerState:e})=>z({position:"absolute",left:0,right:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",fontFamily:t.typography.fontFamily},e.position==="bottom"&&{bottom:0},e.position==="top"&&{top:0},e.position==="below"&&{position:"relative",background:"transparent",alignItems:"normal"})),OAe=Ue("div",{name:"MuiImageListItemBar",slot:"TitleWrap",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.titleWrap,e[`titleWrap${qe(n.position)}`],n.actionIcon&&e[`titleWrapActionPos${qe(n.actionPosition)}`]]}})(({theme:t,ownerState:e})=>z({flexGrow:1,padding:"12px 16px",color:(t.vars||t).palette.common.white,overflow:"hidden"},e.position==="below"&&{padding:"6px 0 12px",color:"inherit"},e.actionIcon&&e.actionPosition==="left"&&{paddingLeft:0},e.actionIcon&&e.actionPosition==="right"&&{paddingRight:0})),NAe=Ue("div",{name:"MuiImageListItemBar",slot:"Title",overridesResolver:(t,e)=>e.title})(({theme:t})=>({fontSize:t.typography.pxToRem(16),lineHeight:"24px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})),LAe=Ue("div",{name:"MuiImageListItemBar",slot:"Subtitle",overridesResolver:(t,e)=>e.subtitle})(({theme:t})=>({fontSize:t.typography.pxToRem(12),lineHeight:1,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})),DAe=Ue("div",{name:"MuiImageListItemBar",slot:"ActionIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.actionIcon,e[`actionIconActionPos${qe(n.actionPosition)}`]]}})(({ownerState:t})=>z({},t.actionPosition==="left"&&{order:-1})),BAe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiImageListItemBar"}),{actionIcon:i,actionPosition:s="right",className:o,subtitle:a,title:c,position:l="bottom"}=r,u=rt(r,AAe),d=z({},r,{position:l,actionPosition:s}),h=RAe(d);return H.jsxs(kAe,z({ownerState:d,className:Fe(h.root,o),ref:n},u,{children:[H.jsxs(OAe,{ownerState:d,className:h.titleWrap,children:[H.jsx(NAe,{className:h.title,children:c}),a?H.jsx(LAe,{className:h.subtitle,children:a}):null]}),i?H.jsx(DAe,{ownerState:d,className:h.actionIcon,children:i}):null]}))}),FAe=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],UAe=t=>{const{classes:e,disableUnderline:n}=t,i=_t({root:["root",!n&&"underline"],input:["input"]},uK,e);return z({},e,i)},$Ae=Ue(zP,{shouldForwardProp:t=>Bi(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...UP(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{let r=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(r=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),z({position:"relative"},e.formControl&&{"label + &":{marginTop:16}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[e.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Pd.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Pd.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Pd.disabled}, .${Pd.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${Pd.disabled}:before`]:{borderBottomStyle:"dotted"}})}),zAe=Ue(HP,{name:"MuiInput",slot:"Input",overridesResolver:$P})({}),E_=N.forwardRef(function(e,n){var r,i,s,o;const a=Et({props:e,name:"MuiInput"}),{disableUnderline:c,components:l={},componentsProps:u,fullWidth:d=!1,inputComponent:h="input",multiline:f=!1,slotProps:p,slots:g={},type:m="text"}=a,y=rt(a,FAe),b=UAe(a),S={root:{ownerState:{disableUnderline:c}}},P=p??u?ki(p??u,S):S,_=(r=(i=g.root)!=null?i:l.Root)!=null?r:$Ae,I=(s=(o=g.input)!=null?o:l.Input)!=null?s:zAe;return H.jsx(S_,z({slots:{root:_,input:I},slotProps:P,fullWidth:d,inputComponent:h,multiline:f,ref:n,type:m},y,{classes:b}))});E_.muiName="Input";function P4(t){return xt("MuiInputAdornment",t)}const sI=wt("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var B7;const HAe=["children","className","component","disablePointerEvents","disableTypography","position","variant"],VAe=(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${qe(n.position)}`],n.disablePointerEvents===!0&&e.disablePointerEvents,e[n.variant]]},WAe=t=>{const{classes:e,disablePointerEvents:n,hiddenLabel:r,position:i,size:s,variant:o}=t,a={root:["root",n&&"disablePointerEvents",i&&`position${qe(i)}`,o,r&&"hiddenLabel",s&&`size${qe(s)}`]};return _t(a,P4,e)},jAe=Ue("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:VAe})(({theme:t,ownerState:e})=>z({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},e.variant==="filled"&&{[`&.${sI.positionStart}&:not(.${sI.hiddenLabel})`]:{marginTop:16}},e.position==="start"&&{marginRight:8},e.position==="end"&&{marginLeft:8},e.disablePointerEvents===!0&&{pointerEvents:"none"})),SG=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiInputAdornment"}),{children:i,className:s,component:o="div",disablePointerEvents:a=!1,disableTypography:c=!1,position:l,variant:u}=r,d=rt(r,HAe),h=Pl()||{};let f=u;u&&h.variant,h&&!f&&(f=h.variant);const p=z({},r,{hiddenLabel:h.hiddenLabel,size:h.size,disablePointerEvents:a,position:l,variant:f}),g=WAe(p);return H.jsx(FP.Provider,{value:null,children:H.jsx(jAe,z({as:o,ownerState:p,className:Fe(g.root,s),ref:n},d,{children:typeof i=="string"&&!c?H.jsx(Ds,{color:"text.secondary",children:i}):H.jsxs(N.Fragment,{children:[l==="start"?B7||(B7=H.jsx("span",{className:"notranslate",children:""})):null,i]})}))})}),qAe=Object.freeze(Object.defineProperty({__proto__:null,default:SG,getInputAdornmentUtilityClass:P4,inputAdornmentClasses:sI},Symbol.toStringTag,{value:"Module"}));function EG(t){return xt("MuiInputLabel",t)}const KAe=wt("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]),GAe=["disableAnimation","margin","shrink","variant","className"],XAe=t=>{const{classes:e,formControl:n,size:r,shrink:i,disableAnimation:s,variant:o,required:a}=t,c={root:["root",n&&"formControl",!s&&"animated",i&&"shrink",r&&r!=="normal"&&`size${qe(r)}`,o],asterisk:[a&&"asterisk"]},l=_t(c,EG,e);return z({},e,l)},YAe=Ue(pG,{shouldForwardProp:t=>Bi(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${My.asterisk}`]:e.asterisk},e.root,n.formControl&&e.formControl,n.size==="small"&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,n.focused&&e.focused,e[n.variant]]}})(({theme:t,ownerState:e})=>z({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},e.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},e.size==="small"&&{transform:"translate(0, 17px) scale(1)"},e.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!e.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},e.variant==="filled"&&z({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},e.shrink&&z({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},e.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),e.variant==="outlined"&&z({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},e.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),TG=N.forwardRef(function(e,n){const r=Et({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,shrink:s,className:o}=r,a=rt(r,GAe),c=Pl();let l=s;typeof l>"u"&&c&&(l=c.filled||c.focused||c.adornedStart);const u=Jd({props:r,muiFormControl:c,states:["size","variant","required","focused"]}),d=z({},r,{disableAnimation:i,formControl:c,shrink:l,size:u.size,variant:u.variant,required:u.required,focused:u.focused}),h=XAe(d);return H.jsx(YAe,z({"data-shrink":l,ownerState:d,ref:n,className:Fe(h.root,o)},a,{classes:h}))});function IG(t){return xt("MuiLinearProgress",t)}const ZAe=wt("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]),JAe=["className","color","value","valueBuffer","variant"];let Pv=t=>t,F7,U7,$7,z7,H7,V7;const Pk=4,QAe=Zi(F7||(F7=Pv`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),eRe=Zi(U7||(U7=Pv`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),tRe=Zi($7||($7=Pv`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),nRe=t=>{const{classes:e,variant:n,color:r}=t,i={root:["root",`color${qe(r)}`,n],dashed:["dashed",`dashedColor${qe(r)}`],bar1:["bar",`barColor${qe(r)}`,(n==="indeterminate"||n==="query")&&"bar1Indeterminate",n==="determinate"&&"bar1Determinate",n==="buffer"&&"bar1Buffer"],bar2:["bar",n!=="buffer"&&`barColor${qe(r)}`,n==="buffer"&&`color${qe(r)}`,(n==="indeterminate"||n==="query")&&"bar2Indeterminate",n==="buffer"&&"bar2Buffer"]};return _t(i,IG,e)},C4=(t,e)=>e==="inherit"?"currentColor":t.vars?t.vars.palette.LinearProgress[`${e}Bg`]:t.palette.mode==="light"?pt.lighten(t.palette[e].main,.62):pt.darken(t.palette[e].main,.5),rRe=Ue("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${qe(n.color)}`],e[n.variant]]}})(({ownerState:t,theme:e})=>z({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:C4(e,t.color)},t.color==="inherit"&&t.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},t.variant==="buffer"&&{backgroundColor:"transparent"},t.variant==="query"&&{transform:"rotate(180deg)"})),iRe=Ue("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.dashed,e[`dashedColor${qe(n.color)}`]]}})(({ownerState:t,theme:e})=>{const n=C4(e,t.color);return z({position:"absolute",marginTop:0,height:"100%",width:"100%"},t.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},Io(z7||(z7=Pv`
    animation: ${0} 3s infinite linear;
  `),tRe)),sRe=Ue("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e[`barColor${qe(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar1Indeterminate,n.variant==="determinate"&&e.bar1Determinate,n.variant==="buffer"&&e.bar1Buffer]}})(({ownerState:t,theme:e})=>z({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:t.color==="inherit"?"currentColor":(e.vars||e).palette[t.color].main},t.variant==="determinate"&&{transition:`transform .${Pk}s linear`},t.variant==="buffer"&&{zIndex:1,transition:`transform .${Pk}s linear`}),({ownerState:t})=>(t.variant==="indeterminate"||t.variant==="query")&&Io(H7||(H7=Pv`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),QAe)),oRe=Ue("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e[`barColor${qe(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar2Indeterminate,n.variant==="buffer"&&e.bar2Buffer]}})(({ownerState:t,theme:e})=>z({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},t.variant!=="buffer"&&{backgroundColor:t.color==="inherit"?"currentColor":(e.vars||e).palette[t.color].main},t.color==="inherit"&&{opacity:.3},t.variant==="buffer"&&{backgroundColor:C4(e,t.color),transition:`transform .${Pk}s linear`}),({ownerState:t})=>(t.variant==="indeterminate"||t.variant==="query")&&Io(V7||(V7=Pv`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),eRe)),PG=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiLinearProgress"}),{className:i,color:s="primary",value:o,valueBuffer:a,variant:c="indeterminate"}=r,l=rt(r,JAe),u=z({},r,{color:s,variant:c}),d=nRe(u),h=mu(),f={},p={bar1:{},bar2:{}};if((c==="determinate"||c==="buffer")&&o!==void 0){f["aria-valuenow"]=Math.round(o),f["aria-valuemin"]=0,f["aria-valuemax"]=100;let g=o-100;h&&(g=-g),p.bar1.transform=`translateX(${g}%)`}if(c==="buffer"&&a!==void 0){let g=(a||0)-100;h&&(g=-g),p.bar2.transform=`translateX(${g}%)`}return H.jsxs(rRe,z({className:Fe(d.root,i),ownerState:u,role:"progressbar"},f,{ref:n},l,{children:[c==="buffer"?H.jsx(iRe,{className:d.dashed,ownerState:u}):null,H.jsx(sRe,{className:d.bar1,ownerState:u,style:p.bar1}),c==="determinate"?null:H.jsx(oRe,{className:d.bar2,ownerState:u,style:p.bar2})]}))});function CG(t){return xt("MuiLink",t)}const MG=wt("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),AG={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},aRe=t=>AG[t]||t,lRe=({theme:t,ownerState:e})=>{const n=aRe(e.color),r=Qy(t,`palette.${n}`,!1)||e.color,i=Qy(t,`palette.${n}Channel`);return"vars"in t&&i?`rgba(${i} / 0.4)`:pt.alpha(r,.4)},cRe=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],uRe=t=>{const{classes:e,component:n,focusVisible:r,underline:i}=t,s={root:["root",`underline${qe(i)}`,n==="button"&&"button",r&&"focusVisible"]};return _t(s,CG,e)},dRe=Ue(Ds,{name:"MuiLink",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`underline${qe(n.underline)}`],n.component==="button"&&e.button]}})(({theme:t,ownerState:e})=>z({},e.underline==="none"&&{textDecoration:"none"},e.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},e.underline==="always"&&z({textDecoration:"underline"},e.color!=="inherit"&&{textDecorationColor:lRe({theme:t,ownerState:e})},{"&:hover":{textDecorationColor:"inherit"}}),e.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${MG.focusVisible}`]:{outline:"auto"}})),fRe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiLink"}),{className:i,color:s="primary",component:o="a",onBlur:a,onFocus:c,TypographyClasses:l,underline:u="always",variant:d="inherit",sx:h}=r,f=rt(r,cRe),{isFocusVisibleRef:p,onBlur:g,onFocus:m,ref:y}=Ev(),[b,x]=N.useState(!1),S=or(n,y),P=A=>{g(A),p.current===!1&&x(!1),a&&a(A)},_=A=>{m(A),p.current===!0&&x(!0),c&&c(A)},I=z({},r,{color:s,component:o,focusVisible:b,underline:u,variant:d}),C=uRe(I);return H.jsx(dRe,z({color:s,className:Fe(C.root,i),classes:l,component:o,onBlur:P,onFocus:_,ref:S,ownerState:I,variant:d,sx:[...Object.keys(AG).includes(s)?[]:[{color:s}],...Array.isArray(h)?h:[h]]},f))}),vl=N.createContext({});function RG(t){return xt("MuiList",t)}const hRe=wt("MuiList",["root","padding","dense","subheader"]),pRe=["children","className","component","dense","disablePadding","subheader"],mRe=t=>{const{classes:e,disablePadding:n,dense:r,subheader:i}=t;return _t({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},RG,e)},gRe=Ue("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})(({ownerState:t})=>z({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})),kG=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiList"}),{children:i,className:s,component:o="ul",dense:a=!1,disablePadding:c=!1,subheader:l}=r,u=rt(r,pRe),d=N.useMemo(()=>({dense:a}),[a]),h=z({},r,{component:o,dense:a,disablePadding:c}),f=mRe(h);return H.jsx(vl.Provider,{value:d,children:H.jsxs(gRe,z({as:o,className:Fe(f.root,s),ref:n,ownerState:h},u,{children:[l,i]}))})});function OG(t){return xt("MuiListItem",t)}const dm=wt("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);function NG(t){return xt("MuiListItemButton",t)}const fm=wt("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),yRe=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],vRe=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.alignItems==="flex-start"&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters]},bRe=t=>{const{alignItems:e,classes:n,dense:r,disabled:i,disableGutters:s,divider:o,selected:a}=t,l=_t({root:["root",r&&"dense",!s&&"gutters",o&&"divider",i&&"disabled",e==="flex-start"&&"alignItemsFlexStart",a&&"selected"]},NG,n);return z({},n,l)},xRe=Ue(Yi,{shouldForwardProp:t=>Bi(t)||t==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:vRe})(({theme:t,ownerState:e})=>z({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${fm.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:pt.alpha(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${fm.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:pt.alpha(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${fm.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:pt.alpha(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:pt.alpha(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${fm.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${fm.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},e.alignItems==="flex-start"&&{alignItems:"flex-start"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.dense&&{paddingTop:4,paddingBottom:4})),wRe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiListItemButton"}),{alignItems:i="center",autoFocus:s=!1,component:o="div",children:a,dense:c=!1,disableGutters:l=!1,divider:u=!1,focusVisibleClassName:d,selected:h=!1,className:f}=r,p=rt(r,yRe),g=N.useContext(vl),m=N.useMemo(()=>({dense:c||g.dense||!1,alignItems:i,disableGutters:l}),[i,g.dense,c,l]),y=N.useRef(null);fs(()=>{s&&y.current&&y.current.focus()},[s]);const b=z({},r,{alignItems:i,dense:m.dense,disableGutters:l,divider:u,selected:h}),x=bRe(b),S=or(y,n);return H.jsx(vl.Provider,{value:m,children:H.jsx(xRe,z({ref:S,href:p.href||p.to,component:(p.href||p.to)&&o==="div"?"button":o,focusVisibleClassName:Fe(x.focusVisible,d),ownerState:b,className:Fe(x.root,f)},p,{classes:x,children:a}))})});function LG(t){return xt("MuiListItemSecondaryAction",t)}const _Re=wt("MuiListItemSecondaryAction",["root","disableGutters"]),SRe=["className"],ERe=t=>{const{disableGutters:e,classes:n}=t;return _t({root:["root",e&&"disableGutters"]},LG,n)},TRe=Ue("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.disableGutters&&e.disableGutters]}})(({ownerState:t})=>z({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},t.disableGutters&&{right:0})),M4=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiListItemSecondaryAction"}),{className:i}=r,s=rt(r,SRe),o=N.useContext(vl),a=z({},r,{disableGutters:o.disableGutters}),c=ERe(a);return H.jsx(TRe,z({className:Fe(c.root,i),ownerState:a,ref:n},s))});M4.muiName="ListItemSecondaryAction";const IRe=["className"],PRe=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],CRe=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.alignItems==="flex-start"&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters,!n.disablePadding&&e.padding,n.button&&e.button,n.hasSecondaryAction&&e.secondaryAction]},MRe=t=>{const{alignItems:e,button:n,classes:r,dense:i,disabled:s,disableGutters:o,disablePadding:a,divider:c,hasSecondaryAction:l,selected:u}=t;return _t({root:["root",i&&"dense",!o&&"gutters",!a&&"padding",c&&"divider",s&&"disabled",n&&"button",e==="flex-start"&&"alignItemsFlexStart",l&&"secondaryAction",u&&"selected"],container:["container"]},OG,r)},ARe=Ue("div",{name:"MuiListItem",slot:"Root",overridesResolver:CRe})(({theme:t,ownerState:e})=>z({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!e.disablePadding&&z({paddingTop:8,paddingBottom:8},e.dense&&{paddingTop:4,paddingBottom:4},!e.disableGutters&&{paddingLeft:16,paddingRight:16},!!e.secondaryAction&&{paddingRight:48}),!!e.secondaryAction&&{[`& > .${fm.root}`]:{paddingRight:48}},{[`&.${dm.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${dm.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:pt.alpha(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${dm.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:pt.alpha(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${dm.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.alignItems==="flex-start"&&{alignItems:"flex-start"},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},e.button&&{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${dm.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:pt.alpha(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:pt.alpha(t.palette.primary.main,t.palette.action.selectedOpacity)}}},e.hasSecondaryAction&&{paddingRight:48})),RRe=Ue("li",{name:"MuiListItem",slot:"Container",overridesResolver:(t,e)=>e.container})({position:"relative"}),kRe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiListItem"}),{alignItems:i="center",autoFocus:s=!1,button:o=!1,children:a,className:c,component:l,components:u={},componentsProps:d={},ContainerComponent:h="li",ContainerProps:{className:f}={},dense:p=!1,disabled:g=!1,disableGutters:m=!1,disablePadding:y=!1,divider:b=!1,focusVisibleClassName:x,secondaryAction:S,selected:P=!1,slotProps:_={},slots:I={}}=r,C=rt(r.ContainerProps,IRe),A=rt(r,PRe),M=N.useContext(vl),k=N.useMemo(()=>({dense:p||M.dense||!1,alignItems:i,disableGutters:m}),[i,M.dense,p,m]),O=N.useRef(null);fs(()=>{s&&O.current&&O.current.focus()},[s]);const B=N.Children.toArray(a),$=B.length&&Dd(B[B.length-1],["ListItemSecondaryAction"]),U=z({},r,{alignItems:i,autoFocus:s,button:o,dense:k.dense,disabled:g,disableGutters:m,disablePadding:y,divider:b,hasSecondaryAction:$,selected:P}),q=MRe(U),K=or(O,n),V=I.root||u.Root||ARe,G=_.root||d.root||{},j=z({className:Fe(q.root,G.className,c),disabled:g},A);let Q=l||"li";return o&&(j.component=l||"div",j.focusVisibleClassName=Fe(dm.focusVisible,x),Q=Yi),$?(Q=!j.component&&!l?"div":Q,h==="li"&&(Q==="li"?Q="div":j.component==="li"&&(j.component="div")),H.jsx(vl.Provider,{value:k,children:H.jsxs(RRe,z({as:h,className:Fe(q.container,f),ref:K,ownerState:U},C,{children:[H.jsx(V,z({},G,!vc(V)&&{as:Q,ownerState:z({},U,G.ownerState)},j,{children:B})),B.pop()]}))})):H.jsx(vl.Provider,{value:k,children:H.jsxs(V,z({},G,{as:Q,ref:K},!vc(V)&&{ownerState:z({},U,G.ownerState)},j,{children:[B,S&&H.jsx(M4,{children:S})]}))})});function DG(t){return xt("MuiListItemAvatar",t)}const ORe=wt("MuiListItemAvatar",["root","alignItemsFlexStart"]),NRe=["className"],LRe=t=>{const{alignItems:e,classes:n}=t;return _t({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},DG,n)},DRe=Ue("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(({ownerState:t})=>z({minWidth:56,flexShrink:0},t.alignItems==="flex-start"&&{marginTop:8})),BRe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiListItemAvatar"}),{className:i}=r,s=rt(r,NRe),o=N.useContext(vl),a=z({},r,{alignItems:o.alignItems}),c=LRe(a);return H.jsx(DRe,z({className:Fe(c.root,i),ownerState:a,ref:n},s))});function BG(t){return xt("MuiListItemIcon",t)}const Ck=wt("MuiListItemIcon",["root","alignItemsFlexStart"]),FRe=["className"],URe=t=>{const{alignItems:e,classes:n}=t;return _t({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},BG,n)},$Re=Ue("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(({theme:t,ownerState:e})=>z({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex"},e.alignItems==="flex-start"&&{marginTop:8})),zRe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiListItemIcon"}),{className:i}=r,s=rt(r,FRe),o=N.useContext(vl),a=z({},r,{alignItems:o.alignItems}),c=URe(a);return H.jsx($Re,z({className:Fe(c.root,i),ownerState:a,ref:n},s))});function FG(t){return xt("MuiListItemText",t)}const kw=wt("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),HRe=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],VRe=t=>{const{classes:e,inset:n,primary:r,secondary:i,dense:s}=t;return _t({root:["root",n&&"inset",s&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},FG,e)},WRe=Ue("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${kw.primary}`]:e.primary},{[`& .${kw.secondary}`]:e.secondary},e.root,n.inset&&e.inset,n.primary&&n.secondary&&e.multiline,n.dense&&e.dense]}})(({ownerState:t})=>z({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},t.primary&&t.secondary&&{marginTop:6,marginBottom:6},t.inset&&{paddingLeft:56})),jRe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiListItemText"}),{children:i,className:s,disableTypography:o=!1,inset:a=!1,primary:c,primaryTypographyProps:l,secondary:u,secondaryTypographyProps:d}=r,h=rt(r,HRe),{dense:f}=N.useContext(vl);let p=c??i,g=u;const m=z({},r,{disableTypography:o,inset:a,primary:!!p,secondary:!!g,dense:f}),y=VRe(m);return p!=null&&p.type!==Ds&&!o&&(p=H.jsx(Ds,z({variant:f?"body2":"body1",className:y.primary,component:l!=null&&l.variant?void 0:"span",display:"block"},l,{children:p}))),g!=null&&g.type!==Ds&&!o&&(g=H.jsx(Ds,z({variant:"body2",className:y.secondary,color:"text.secondary",display:"block"},d,{children:g}))),H.jsxs(WRe,z({className:Fe(y.root,s),ownerState:m,ref:n},h,{children:[p,g]}))}),qRe=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function $A(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function W7(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function UG(t,e){if(e===void 0)return!0;let n=t.innerText;return n===void 0&&(n=t.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.indexOf(e.keys.join(""))===0}function ix(t,e,n,r,i,s){let o=!1,a=i(t,e,e?n:!1);for(;a;){if(a===t.firstChild){if(o)return!1;o=!0}const c=r?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!UG(a,s)||c)a=i(t,a,n);else return a.focus(),!0}return!1}const $G=N.forwardRef(function(e,n){const{actions:r,autoFocus:i=!1,autoFocusItem:s=!1,children:o,className:a,disabledItemsFocusable:c=!1,disableListWrap:l=!1,onKeyDown:u,variant:d="selectedMenu"}=e,h=rt(e,qRe),f=N.useRef(null),p=N.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});fs(()=>{i&&f.current.focus()},[i]),N.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(x,{direction:S})=>{const P=!f.current.style.width;if(x.clientHeight<f.current.clientHeight&&P){const _=`${bq(Fr(x))}px`;f.current.style[S==="rtl"?"paddingLeft":"paddingRight"]=_,f.current.style.width=`calc(100% + ${_})`}return f.current}}),[]);const g=x=>{const S=f.current,P=x.key,_=Fr(S).activeElement;if(P==="ArrowDown")x.preventDefault(),ix(S,_,l,c,$A);else if(P==="ArrowUp")x.preventDefault(),ix(S,_,l,c,W7);else if(P==="Home")x.preventDefault(),ix(S,null,l,c,$A);else if(P==="End")x.preventDefault(),ix(S,null,l,c,W7);else if(P.length===1){const I=p.current,C=P.toLowerCase(),A=performance.now();I.keys.length>0&&(A-I.lastTime>500?(I.keys=[],I.repeating=!0,I.previousKeyMatched=!0):I.repeating&&C!==I.keys[0]&&(I.repeating=!1)),I.lastTime=A,I.keys.push(C);const M=_&&!I.repeating&&UG(_,I);I.previousKeyMatched&&(M||ix(S,_,!1,c,$A,I))?x.preventDefault():I.previousKeyMatched=!1}u&&u(x)},m=or(f,n);let y=-1;N.Children.forEach(o,(x,S)=>{if(!N.isValidElement(x)){y===S&&(y+=1,y>=o.length&&(y=-1));return}x.props.disabled||(d==="selectedMenu"&&x.props.selected||y===-1)&&(y=S),y===S&&(x.props.disabled||x.props.muiSkipListHighlight||x.type.muiSkipListHighlight)&&(y+=1,y>=o.length&&(y=-1))});const b=N.Children.map(o,(x,S)=>{if(S===y){const P={};return s&&(P.autoFocus=!0),x.props.tabIndex===void 0&&d==="selectedMenu"&&(P.tabIndex=0),N.cloneElement(x,P)}return x});return H.jsx(kG,z({role:"menu",ref:m,className:a,onKeyDown:g,tabIndex:i?0:-1},h,{children:b}))});function zG(t){return xt("MuiPopover",t)}const KRe=wt("MuiPopover",["root","paper"]),GRe=["onEntering"],XRe=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],YRe=["slotProps"];function Mk(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.height/2:e==="bottom"&&(n=t.height),n}function Ak(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.width/2:e==="right"&&(n=t.width),n}function j7(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function zA(t){return typeof t=="function"?t():t}const ZRe=t=>{const{classes:e}=t;return _t({root:["root"],paper:["paper"]},zG,e)},HG=Ue(WP,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),A4=Ue(Da,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),VG=N.forwardRef(function(e,n){var r,i,s;const o=Et({props:e,name:"MuiPopover"}),{action:a,anchorEl:c,anchorOrigin:l={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:d="anchorEl",children:h,className:f,container:p,elevation:g=8,marginThreshold:m=16,open:y,PaperProps:b={},slots:x,slotProps:S,transformOrigin:P={vertical:"top",horizontal:"left"},TransitionComponent:_=nv,transitionDuration:I="auto",TransitionProps:{onEntering:C}={},disableScrollLock:A=!1}=o,M=rt(o.TransitionProps,GRe),k=rt(o,XRe),O=(r=S==null?void 0:S.paper)!=null?r:b,B=N.useRef(),$=or(B,O.ref),U=z({},o,{anchorOrigin:l,anchorReference:d,elevation:g,marginThreshold:m,externalPaperSlotProps:O,transformOrigin:P,TransitionComponent:_,transitionDuration:I,TransitionProps:M}),q=ZRe(U),K=N.useCallback(()=>{if(d==="anchorPosition")return u;const Be=zA(c),Ge=(Be&&Be.nodeType===1?Be:Fr(B.current).body).getBoundingClientRect();return{top:Ge.top+Mk(Ge,l.vertical),left:Ge.left+Ak(Ge,l.horizontal)}},[c,l.horizontal,l.vertical,u,d]),V=N.useCallback(Be=>({vertical:Mk(Be,P.vertical),horizontal:Ak(Be,P.horizontal)}),[P.horizontal,P.vertical]),G=N.useCallback(Be=>{const ce={width:Be.offsetWidth,height:Be.offsetHeight},Ge=V(ce);if(d==="none")return{top:null,left:null,transformOrigin:j7(Ge)};const Pe=K();let He=Pe.top-Ge.vertical,Re=Pe.left-Ge.horizontal;const je=He+ce.height,te=Re+ce.width,ee=so(zA(c)),X=ee.innerHeight-m,we=ee.innerWidth-m;if(m!==null&&He<m){const Ne=He-m;He-=Ne,Ge.vertical+=Ne}else if(m!==null&&je>X){const Ne=je-X;He-=Ne,Ge.vertical+=Ne}if(m!==null&&Re<m){const Ne=Re-m;Re-=Ne,Ge.horizontal+=Ne}else if(te>we){const Ne=te-we;Re-=Ne,Ge.horizontal+=Ne}return{top:`${Math.round(He)}px`,left:`${Math.round(Re)}px`,transformOrigin:j7(Ge)}},[c,d,K,V,m]),[j,Q]=N.useState(y),se=N.useCallback(()=>{const Be=B.current;if(!Be)return;const ce=G(Be);ce.top!==null&&(Be.style.top=ce.top),ce.left!==null&&(Be.style.left=ce.left),Be.style.transformOrigin=ce.transformOrigin,Q(!0)},[G]);N.useEffect(()=>(A&&window.addEventListener("scroll",se),()=>window.removeEventListener("scroll",se)),[c,A,se]);const Z=(Be,ce)=>{C&&C(Be,ce),se()},ie=()=>{Q(!1)};N.useEffect(()=>{y&&se()}),N.useImperativeHandle(a,()=>y?{updatePosition:()=>{se()}}:null,[y,se]),N.useEffect(()=>{if(!y)return;const Be=Sv(()=>{se()}),ce=so(c);return ce.addEventListener("resize",Be),()=>{Be.clear(),ce.removeEventListener("resize",Be)}},[c,y,se]);let pe=I;I==="auto"&&!_.muiSupportAuto&&(pe=void 0);const ue=p||(c?Fr(zA(c)).body:void 0),le=(i=x==null?void 0:x.root)!=null?i:HG,ae=(s=x==null?void 0:x.paper)!=null?s:A4,_e=mi({elementType:ae,externalSlotProps:z({},O,{style:j?O.style:z({},O.style,{opacity:0})}),additionalProps:{elevation:g,ref:$},ownerState:U,className:Fe(q.paper,O==null?void 0:O.className)}),ye=mi({elementType:le,externalSlotProps:(S==null?void 0:S.root)||{},externalForwardedProps:k,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:ue,open:y},ownerState:U,className:Fe(q.root,f)}),{slotProps:Ae}=ye,Oe=rt(ye,YRe);return H.jsx(le,z({},Oe,!vc(le)&&{slotProps:Ae,disableScrollLock:A},{children:H.jsx(_,z({appear:!0,in:y,onEntering:Z,onExited:ie,timeout:pe},M,{children:H.jsx(ae,z({},_e,{children:h}))}))}))});function WG(t){return xt("MuiMenu",t)}const JRe=wt("MuiMenu",["root","paper","list"]),QRe=["onEntering"],eke=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],tke={vertical:"top",horizontal:"right"},nke={vertical:"top",horizontal:"left"},rke=t=>{const{classes:e}=t;return _t({root:["root"],paper:["paper"],list:["list"]},WG,e)},ike=Ue(VG,{shouldForwardProp:t=>Bi(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),ske=Ue(A4,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),oke=Ue($G,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),jG=N.forwardRef(function(e,n){var r,i;const s=Et({props:e,name:"MuiMenu"}),{autoFocus:o=!0,children:a,className:c,disableAutoFocusItem:l=!1,MenuListProps:u={},onClose:d,open:h,PaperProps:f={},PopoverClasses:p,transitionDuration:g="auto",TransitionProps:{onEntering:m}={},variant:y="selectedMenu",slots:b={},slotProps:x={}}=s,S=rt(s.TransitionProps,QRe),P=rt(s,eke),_=mu(),I=z({},s,{autoFocus:o,disableAutoFocusItem:l,MenuListProps:u,onEntering:m,PaperProps:f,transitionDuration:g,TransitionProps:S,variant:y}),C=rke(I),A=o&&!l&&h,M=N.useRef(null),k=(V,G)=>{M.current&&M.current.adjustStyleForScrollbar(V,{direction:_?"rtl":"ltr"}),m&&m(V,G)},O=V=>{V.key==="Tab"&&(V.preventDefault(),d&&d(V,"tabKeyDown"))};let B=-1;N.Children.map(a,(V,G)=>{N.isValidElement(V)&&(V.props.disabled||(y==="selectedMenu"&&V.props.selected||B===-1)&&(B=G))});const $=(r=b.paper)!=null?r:ske,U=(i=x.paper)!=null?i:f,q=mi({elementType:b.root,externalSlotProps:x.root,ownerState:I,className:[C.root,c]}),K=mi({elementType:$,externalSlotProps:U,ownerState:I,className:C.paper});return H.jsx(ike,z({onClose:d,anchorOrigin:{vertical:"bottom",horizontal:_?"right":"left"},transformOrigin:_?tke:nke,slots:{paper:$,root:b.root},slotProps:{root:q,paper:K},open:h,ref:n,transitionDuration:g,TransitionProps:z({onEntering:k},S),ownerState:I},P,{classes:p,children:H.jsx(oke,z({onKeyDown:O,actions:M,autoFocus:o&&(B===-1||l),autoFocusItem:A,variant:y},u,{className:Fe(C.list,u.className),children:a}))}))});function qG(t){return xt("MuiMenuItem",t)}const ly=wt("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),ake=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],lke=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.divider&&e.divider,!n.disableGutters&&e.gutters]},cke=t=>{const{disabled:e,dense:n,divider:r,disableGutters:i,selected:s,classes:o}=t,c=_t({root:["root",n&&"dense",e&&"disabled",!i&&"gutters",r&&"divider",s&&"selected"]},qG,o);return z({},o,c)},uke=Ue(Yi,{shouldForwardProp:t=>Bi(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:lke})(({theme:t,ownerState:e})=>z({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ly.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:pt.alpha(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${ly.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:pt.alpha(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${ly.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:pt.alpha(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:pt.alpha(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${ly.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${ly.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${_k.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${_k.inset}`]:{marginLeft:52},[`& .${kw.root}`]:{marginTop:0,marginBottom:0},[`& .${kw.inset}`]:{paddingLeft:36},[`& .${Ck.root}`]:{minWidth:36}},!e.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},e.dense&&z({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{[`& .${Ck.root} svg`]:{fontSize:"1.25rem"}}))),KG=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:s="li",dense:o=!1,divider:a=!1,disableGutters:c=!1,focusVisibleClassName:l,role:u="menuitem",tabIndex:d,className:h}=r,f=rt(r,ake),p=N.useContext(vl),g=N.useMemo(()=>({dense:o||p.dense||!1,disableGutters:c}),[p.dense,o,c]),m=N.useRef(null);fs(()=>{i&&m.current&&m.current.focus()},[i]);const y=z({},r,{dense:g.dense,divider:a,disableGutters:c}),b=cke(r),x=or(m,n);let S;return r.disabled||(S=d!==void 0?d:-1),H.jsx(vl.Provider,{value:g,children:H.jsx(uke,z({ref:x,role:u,tabIndex:S,component:s,focusVisibleClassName:Fe(b.focusVisible,l),className:Fe(b.root,h)},f,{ownerState:y,classes:b}))})});function GG(t){return xt("MuiMobileStepper",t)}const dke=wt("MuiMobileStepper",["root","positionBottom","positionTop","positionStatic","dots","dot","dotActive","progress"]),fke=["activeStep","backButton","className","LinearProgressProps","nextButton","position","steps","variant"],hke=t=>{const{classes:e,position:n}=t,r={root:["root",`position${qe(n)}`],dots:["dots"],dot:["dot"],dotActive:["dotActive"],progress:["progress"]};return _t(r,GG,e)},pke=Ue(Da,{name:"MuiMobileStepper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${qe(n.position)}`]]}})(({theme:t,ownerState:e})=>z({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",background:(t.vars||t).palette.background.default,padding:8},e.position==="bottom"&&{position:"fixed",bottom:0,left:0,right:0,zIndex:(t.vars||t).zIndex.mobileStepper},e.position==="top"&&{position:"fixed",top:0,left:0,right:0,zIndex:(t.vars||t).zIndex.mobileStepper})),mke=Ue("div",{name:"MuiMobileStepper",slot:"Dots",overridesResolver:(t,e)=>e.dots})(({ownerState:t})=>z({},t.variant==="dots"&&{display:"flex",flexDirection:"row"})),gke=Ue("div",{name:"MuiMobileStepper",slot:"Dot",shouldForwardProp:t=>Iv(t)&&t!=="dotActive",overridesResolver:(t,e)=>{const{dotActive:n}=t;return[e.dot,n&&e.dotActive]}})(({theme:t,ownerState:e,dotActive:n})=>z({},e.variant==="dots"&&z({transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),backgroundColor:(t.vars||t).palette.action.disabled,borderRadius:"50%",width:8,height:8,margin:"0 2px"},n&&{backgroundColor:(t.vars||t).palette.primary.main}))),yke=Ue(PG,{name:"MuiMobileStepper",slot:"Progress",overridesResolver:(t,e)=>e.progress})(({ownerState:t})=>z({},t.variant==="progress"&&{width:"50%"})),vke=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiMobileStepper"}),{activeStep:i=0,backButton:s,className:o,LinearProgressProps:a,nextButton:c,position:l="bottom",steps:u,variant:d="dots"}=r,h=rt(r,fke),f=z({},r,{activeStep:i,position:l,variant:d});let p;d==="progress"&&(u===1?p=100:p=Math.ceil(i/(u-1)*100));const g=hke(f);return H.jsxs(pke,z({square:!0,elevation:0,className:Fe(g.root,o),ref:n,ownerState:f},h,{children:[s,d==="text"&&H.jsxs(N.Fragment,{children:[i+1," / ",u]}),d==="dots"&&H.jsx(mke,{ownerState:f,className:g.dots,children:[...new Array(u)].map((m,y)=>H.jsx(gke,{className:Fe(g.dot,y===i&&g.dotActive),ownerState:f,dotActive:y===i},y))}),d==="progress"&&H.jsx(yke,z({ownerState:f,className:g.progress,variant:"determinate",value:p},a)),c]}))});function R4(t){return xt("MuiNativeSelect",t)}const qP=wt("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),bke=["className","disabled","error","IconComponent","inputRef","variant"],xke=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:s,error:o}=t,a={select:["select",n,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${qe(n)}`,s&&"iconOpen",r&&"disabled"]};return _t(a,R4,e)},XG=({ownerState:t,theme:e})=>z({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":z({},e.vars?{backgroundColor:`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:e.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${qP.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},t.variant==="filled"&&{"&&&":{paddingRight:32}},t.variant==="outlined"&&{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}),wke=Ue("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Bi,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],n.error&&e.error,{[`&.${qP.multiple}`]:e.multiple}]}})(XG),YG=({ownerState:t,theme:e})=>z({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${qP.disabled}`]:{color:(e.vars||e).palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},t.variant==="filled"&&{right:7},t.variant==="outlined"&&{right:7}),_ke=Ue("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${qe(n.variant)}`],n.open&&e.iconOpen]}})(YG),ZG=N.forwardRef(function(e,n){const{className:r,disabled:i,error:s,IconComponent:o,inputRef:a,variant:c="standard"}=e,l=rt(e,bke),u=z({},e,{disabled:i,variant:c,error:s}),d=xke(u);return H.jsxs(N.Fragment,{children:[H.jsx(wke,z({ownerState:u,className:Fe(d.select,r),disabled:i,ref:a||n},l)),e.multiple?null:H.jsx(_ke,{as:o,ownerState:u,className:d.icon})]})}),Ske=["className","children","classes","IconComponent","input","inputProps","variant"],Eke=["root"],Tke=t=>{const{classes:e}=t;return _t({root:["root"]},R4,e)},Ike=H.jsx(E_,{}),JG=N.forwardRef(function(e,n){const r=Et({name:"MuiNativeSelect",props:e}),{className:i,children:s,classes:o={},IconComponent:a=b4,input:c=Ike,inputProps:l}=r,u=rt(r,Ske),d=Pl(),h=Jd({props:r,muiFormControl:d,states:["variant"]}),f=z({},r,{classes:o}),p=Tke(f),g=rt(o,Eke);return H.jsx(N.Fragment,{children:N.cloneElement(c,z({inputComponent:ZG,inputProps:z({children:s,classes:g,IconComponent:a,variant:h.variant,type:void 0},l,c?c.props.inputProps:{}),ref:n},u,{className:Fe(p.root,c.props.className,i)}))})});JG.muiName="Select";function QG(t){const{children:e,defer:n=!1,fallback:r=null}=t,[i,s]=N.useState(!1);return fs(()=>{n||s(!0)},[n]),N.useEffect(()=>{n&&s(!0)},[n]),H.jsx(N.Fragment,{children:i?e:r})}var q7;const Pke=["children","classes","className","label","notched"],Cke=Ue("fieldset",{shouldForwardProp:Bi})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Mke=Ue("legend",{shouldForwardProp:Bi})(({ownerState:t,theme:e})=>z({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},t.withLabel&&z({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})})));function Ake(t){const{className:e,label:n,notched:r}=t,i=rt(t,Pke),s=n!=null&&n!=="",o=z({},t,{notched:r,withLabel:s});return H.jsx(Cke,z({"aria-hidden":!0,className:e,ownerState:o},i,{children:H.jsx(Mke,{ownerState:o,children:s?H.jsx("span",{children:n}):q7||(q7=H.jsx("span",{className:"notranslate",children:""}))})}))}const Rke=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],kke=t=>{const{classes:e}=t,r=_t({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},dK,e);return z({},e,r)},Oke=Ue(zP,{shouldForwardProp:t=>Bi(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:UP})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return z({position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${hc.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${hc.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${hc.focused} .${hc.notchedOutline}`]:{borderColor:(t.vars||t).palette[e.color].main,borderWidth:2},[`&.${hc.error} .${hc.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${hc.disabled} .${hc.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}},e.startAdornment&&{paddingLeft:14},e.endAdornment&&{paddingRight:14},e.multiline&&z({padding:"16.5px 14px"},e.size==="small"&&{padding:"8.5px 14px"}))}),Nke=Ue(Ake,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(t,e)=>e.notchedOutline})(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),Lke=Ue(HP,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:$P})(({theme:t,ownerState:e})=>z({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{padding:"8.5px 14px"},e.multiline&&{padding:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0})),KP=N.forwardRef(function(e,n){var r,i,s,o,a;const c=Et({props:e,name:"MuiOutlinedInput"}),{components:l={},fullWidth:u=!1,inputComponent:d="input",label:h,multiline:f=!1,notched:p,slots:g={},type:m="text"}=c,y=rt(c,Rke),b=kke(c),x=Pl(),S=Jd({props:c,muiFormControl:x,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),P=z({},c,{color:S.color||"primary",disabled:S.disabled,error:S.error,focused:S.focused,formControl:x,fullWidth:u,hiddenLabel:S.hiddenLabel,multiline:f,size:S.size,type:m}),_=(r=(i=g.root)!=null?i:l.Root)!=null?r:Oke,I=(s=(o=g.input)!=null?o:l.Input)!=null?s:Lke;return H.jsx(S_,z({slots:{root:_,input:I},renderSuffix:C=>H.jsx(Nke,{ownerState:P,className:b.notchedOutline,label:h!=null&&h!==""&&S.required?a||(a=H.jsxs(N.Fragment,{children:[h,"","*"]})):h,notched:typeof p<"u"?p:!!(C.startAdornment||C.filled||C.focused)}),fullWidth:u,inputComponent:d,multiline:f,ref:n,type:m},y,{classes:z({},b,{notchedOutline:null})}))});KP.muiName="Input";function eX(t){return xt("MuiPagination",t)}const Dke=wt("MuiPagination",["root","ul","outlined","text"]),Bke=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function tX(t={}){const{boundaryCount:e=1,componentName:n="usePagination",count:r=1,defaultPage:i=1,disabled:s=!1,hideNextButton:o=!1,hidePrevButton:a=!1,onChange:c,page:l,showFirstButton:u=!1,showLastButton:d=!1,siblingCount:h=1}=t,f=rt(t,Bke),[p,g]=ta({controlled:l,default:i,name:n,state:"page"}),m=(A,M)=>{l||g(M),c&&c(A,M)},y=(A,M)=>{const k=M-A+1;return Array.from({length:k},(O,B)=>A+B)},b=y(1,Math.min(e,r)),x=y(Math.max(r-e+1,e+1),r),S=Math.max(Math.min(p-h,r-e-h*2-1),e+2),P=Math.min(Math.max(p+h,e+h*2+2),x.length>0?x[0]-2:r-1),_=[...u?["first"]:[],...a?[]:["previous"],...b,...S>e+2?["start-ellipsis"]:e+1<r-e?[e+1]:[],...y(S,P),...P<r-e-1?["end-ellipsis"]:r-e>e?[r-e]:[],...x,...o?[]:["next"],...d?["last"]:[]],I=A=>{switch(A){case"first":return 1;case"previous":return p-1;case"next":return p+1;case"last":return r;default:return null}},C=_.map(A=>typeof A=="number"?{onClick:M=>{m(M,A)},type:"page",page:A,selected:A===p,disabled:s,"aria-current":A===p?"true":void 0}:{onClick:M=>{m(M,I(A))},type:A,page:I(A),selected:!1,disabled:s||A.indexOf("ellipsis")===-1&&(A==="next"||A==="last"?p>=r:p<=1)});return z({items:C},f)}function nX(t){return xt("MuiPaginationItem",t)}const Ta=wt("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),Rk=Wr(H.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),kk=Wr(H.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),K7=Wr(H.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),G7=Wr(H.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),Fke=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],rX=(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`size${qe(n.size)}`],n.variant==="text"&&e[`text${qe(n.color)}`],n.variant==="outlined"&&e[`outlined${qe(n.color)}`],n.shape==="rounded"&&e.rounded,n.type==="page"&&e.page,(n.type==="start-ellipsis"||n.type==="end-ellipsis")&&e.ellipsis,(n.type==="previous"||n.type==="next")&&e.previousNext,(n.type==="first"||n.type==="last")&&e.firstLast]},Uke=t=>{const{classes:e,color:n,disabled:r,selected:i,size:s,shape:o,type:a,variant:c}=t,l={root:["root",`size${qe(s)}`,c,o,n!=="standard"&&`color${qe(n)}`,n!=="standard"&&`${c}${qe(n)}`,r&&"disabled",i&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[a]],icon:["icon"]};return _t(l,nX,e)},$ke=Ue("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:rX})(({theme:t,ownerState:e})=>z({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,height:"auto",[`&.${Ta.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},e.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)})),zke=Ue(Yi,{name:"MuiPaginationItem",slot:"Root",overridesResolver:rX})(({theme:t,ownerState:e})=>z({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,[`&.${Ta.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${Ta.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},transition:t.transitions.create(["color","background-color"],{duration:t.transitions.duration.short}),"&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ta.selected}`]:{backgroundColor:(t.vars||t).palette.action.selected,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:pt.alpha(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},[`&.${Ta.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:pt.alpha(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},[`&.${Ta.disabled}`]:{opacity:1,color:(t.vars||t).palette.action.disabled,backgroundColor:(t.vars||t).palette.action.selected}}},e.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},e.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)},e.shape==="rounded"&&{borderRadius:(t.vars||t).shape.borderRadius}),({theme:t,ownerState:e})=>z({},e.variant==="text"&&{[`&.${Ta.selected}`]:z({},e.color!=="standard"&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}},[`&.${Ta.focusVisible}`]:{backgroundColor:(t.vars||t).palette[e.color].dark}},{[`&.${Ta.disabled}`]:{color:(t.vars||t).palette.action.disabled}})},e.variant==="outlined"&&{border:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Ta.selected}`]:z({},e.color!=="standard"&&{color:(t.vars||t).palette[e.color].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:pt.alpha(t.palette[e.color].main,.5)}`,backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.activatedOpacity})`:pt.alpha(t.palette[e.color].main,t.palette.action.activatedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:pt.alpha(t.palette[e.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ta.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:pt.alpha(t.palette[e.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity)}},{[`&.${Ta.disabled}`]:{borderColor:(t.vars||t).palette.action.disabledBackground,color:(t.vars||t).palette.action.disabled}})})),Hke=Ue("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(t,e)=>e.icon})(({theme:t,ownerState:e})=>z({fontSize:t.typography.pxToRem(20),margin:"0 -8px"},e.size==="small"&&{fontSize:t.typography.pxToRem(18)},e.size==="large"&&{fontSize:t.typography.pxToRem(22)})),iX=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiPaginationItem"}),{className:i,color:s="standard",component:o,components:a={},disabled:c=!1,page:l,selected:u=!1,shape:d="circular",size:h="medium",slots:f={},type:p="page",variant:g="text"}=r,m=rt(r,Fke),y=z({},r,{color:s,disabled:c,selected:u,shape:d,size:h,type:p,variant:g}),b=mu(),x=Uke(y),P=(b?{previous:f.next||a.next||G7,next:f.previous||a.previous||K7,last:f.first||a.first||Rk,first:f.last||a.last||kk}:{previous:f.previous||a.previous||K7,next:f.next||a.next||G7,first:f.first||a.first||Rk,last:f.last||a.last||kk})[p];return p==="start-ellipsis"||p==="end-ellipsis"?H.jsx($ke,{ref:n,ownerState:y,className:Fe(x.root,i),children:""}):H.jsxs(zke,z({ref:n,ownerState:y,component:o,disabled:c,className:Fe(x.root,i)},m,{children:[p==="page"&&l,P?H.jsx(Hke,{as:P,ownerState:y,className:x.icon}):null]}))}),Vke=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],Wke=t=>{const{classes:e,variant:n}=t;return _t({root:["root",n],ul:["ul"]},eX,e)},jke=Ue("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant]]}})({}),qke=Ue("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(t,e)=>e.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function Kke(t,e,n){return t==="page"?`${n?"":"Go to "}page ${e}`:`Go to ${t} page`}const Gke=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiPagination"}),{boundaryCount:i=1,className:s,color:o="standard",count:a=1,defaultPage:c=1,disabled:l=!1,getItemAriaLabel:u=Kke,hideNextButton:d=!1,hidePrevButton:h=!1,renderItem:f=C=>H.jsx(iX,z({},C)),shape:p="circular",showFirstButton:g=!1,showLastButton:m=!1,siblingCount:y=1,size:b="medium",variant:x="text"}=r,S=rt(r,Vke),{items:P}=tX(z({},r,{componentName:"Pagination"})),_=z({},r,{boundaryCount:i,color:o,count:a,defaultPage:c,disabled:l,getItemAriaLabel:u,hideNextButton:d,hidePrevButton:h,renderItem:f,shape:p,showFirstButton:g,showLastButton:m,siblingCount:y,size:b,variant:x}),I=Wke(_);return H.jsx(jke,z({"aria-label":"pagination navigation",className:Fe(I.root,s),ownerState:_,ref:n},S,{children:H.jsx(qke,{className:I.ul,ownerState:_,children:P.map((C,A)=>H.jsx("li",{children:f(z({},C,{color:o,"aria-label":u(C.type,C.page,C.selected),shape:p,size:b,variant:x}))},A))})}))}),Xke=Wr(H.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),Yke=Wr(H.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),Zke=Ue("span",{shouldForwardProp:Bi})({position:"relative",display:"flex"}),Jke=Ue(Xke)({transform:"scale(1)"}),Qke=Ue(Yke)(({theme:t,ownerState:e})=>z({left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest})},e.checked&&{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})}));function sX(t){const{checked:e=!1,classes:n={},fontSize:r}=t,i=z({},t,{checked:e});return H.jsxs(Zke,{className:n.root,ownerState:i,children:[H.jsx(Jke,{fontSize:r,className:n.background,ownerState:i}),H.jsx(Qke,{fontSize:r,className:n.dot,ownerState:i})]})}const oX=N.createContext(void 0);function aX(){return N.useContext(oX)}function lX(t){return xt("MuiRadio",t)}const Ok=wt("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),e3e=["checked","checkedIcon","color","icon","name","onChange","size","className"],t3e=t=>{const{classes:e,color:n,size:r}=t,i={root:["root",`color${qe(n)}`,r!=="medium"&&`size${qe(r)}`]};return z({},e,_t(i,lX,e))},n3e=Ue(T4,{shouldForwardProp:t=>Bi(t)||t==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size!=="medium"&&e[`size${qe(n.size)}`],e[`color${qe(n.color)}`]]}})(({theme:t,ownerState:e})=>z({color:(t.vars||t).palette.text.secondary},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${e.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:pt.alpha(e.color==="default"?t.palette.action.active:t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${Ok.checked}`]:{color:(t.vars||t).palette[e.color].main}},{[`&.${Ok.disabled}`]:{color:(t.vars||t).palette.action.disabled}}));function r3e(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}const X7=H.jsx(sX,{checked:!0}),Y7=H.jsx(sX,{}),i3e=N.forwardRef(function(e,n){var r,i;const s=Et({props:e,name:"MuiRadio"}),{checked:o,checkedIcon:a=X7,color:c="primary",icon:l=Y7,name:u,onChange:d,size:h="medium",className:f}=s,p=rt(s,e3e),g=z({},s,{color:c,size:h}),m=t3e(g),y=aX();let b=o;const x=tI(d,y&&y.onChange);let S=u;return y&&(typeof b>"u"&&(b=r3e(y.value,s.value)),typeof S>"u"&&(S=y.name)),H.jsx(n3e,z({type:"radio",icon:N.cloneElement(l,{fontSize:(r=Y7.props.fontSize)!=null?r:h}),checkedIcon:N.cloneElement(a,{fontSize:(i=X7.props.fontSize)!=null?i:h}),ownerState:g,classes:m,name:S,checked:b,onChange:x,ref:n,className:Fe(m.root,f)},p))});function cX(t){return xt("MuiRadioGroup",t)}const s3e=wt("MuiRadioGroup",["root","row","error"]),o3e=["actions","children","className","defaultValue","name","onChange","value"],a3e=t=>{const{classes:e,row:n,error:r}=t;return _t({root:["root",n&&"row",r&&"error"]},cX,e)},l3e=N.forwardRef(function(e,n){const{actions:r,children:i,className:s,defaultValue:o,name:a,onChange:c,value:l}=e,u=rt(e,o3e),d=N.useRef(null),h=a3e(e),[f,p]=ta({controlled:l,default:o,name:"RadioGroup"});N.useImperativeHandle(r,()=>({focus:()=>{let b=d.current.querySelector("input:not(:disabled):checked");b||(b=d.current.querySelector("input:not(:disabled)")),b&&b.focus()}}),[]);const g=or(n,d),m=_c(a),y=N.useMemo(()=>({name:m,onChange(b){p(b.target.value),c&&c(b,b.target.value)},value:f}),[m,c,p,f]);return H.jsx(oX.Provider,{value:y,children:H.jsx(cG,z({role:"radiogroup",ref:g,className:Fe(h.root,s)},u,{children:i}))})}),c3e=Wr(H.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),u3e=Wr(H.jsx("path",{d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}),"StarBorder");function uX(t){return xt("MuiRating",t)}const cy=wt("MuiRating",["root","sizeSmall","sizeMedium","sizeLarge","readOnly","disabled","focusVisible","visuallyHidden","pristine","label","labelEmptyValueActive","icon","iconEmpty","iconFilled","iconHover","iconFocus","iconActive","decimal"]),d3e=["value"],f3e=["className","defaultValue","disabled","emptyIcon","emptyLabelText","getLabelText","highlightSelectedOnly","icon","IconContainerComponent","max","name","onChange","onChangeActive","onMouseLeave","onMouseMove","precision","readOnly","size","value"];function h3e(t){const e=t.toString().split(".")[1];return e?e.length:0}function HA(t,e){if(t==null)return t;const n=Math.round(t/e)*e;return Number(n.toFixed(h3e(e)))}const p3e=t=>{const{classes:e,size:n,readOnly:r,disabled:i,emptyValueFocused:s,focusVisible:o}=t,a={root:["root",`size${qe(n)}`,i&&"disabled",o&&"focusVisible",r&&"readOnly"],label:["label","pristine"],labelEmptyValue:[s&&"labelEmptyValueActive"],icon:["icon"],iconEmpty:["iconEmpty"],iconFilled:["iconFilled"],iconHover:["iconHover"],iconFocus:["iconFocus"],iconActive:["iconActive"],decimal:["decimal"],visuallyHidden:["visuallyHidden"]};return _t(a,uX,e)},m3e=Ue("span",{name:"MuiRating",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${cy.visuallyHidden}`]:e.visuallyHidden},e.root,e[`size${qe(n.size)}`],n.readOnly&&e.readOnly]}})(({theme:t,ownerState:e})=>z({display:"inline-flex",position:"relative",fontSize:t.typography.pxToRem(24),color:"#faaf00",cursor:"pointer",textAlign:"left",width:"min-content",WebkitTapHighlightColor:"transparent",[`&.${cy.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${cy.focusVisible} .${cy.iconActive}`]:{outline:"1px solid #999"},[`& .${cy.visuallyHidden}`]:_q},e.size==="small"&&{fontSize:t.typography.pxToRem(18)},e.size==="large"&&{fontSize:t.typography.pxToRem(30)},e.readOnly&&{pointerEvents:"none"})),dX=Ue("label",{name:"MuiRating",slot:"Label",overridesResolver:({ownerState:t},e)=>[e.label,t.emptyValueFocused&&e.labelEmptyValueActive]})(({ownerState:t})=>z({cursor:"inherit"},t.emptyValueFocused&&{top:0,bottom:0,position:"absolute",outline:"1px solid #999",width:"100%"})),g3e=Ue("span",{name:"MuiRating",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.iconEmpty&&e.iconEmpty,n.iconFilled&&e.iconFilled,n.iconHover&&e.iconHover,n.iconFocus&&e.iconFocus,n.iconActive&&e.iconActive]}})(({theme:t,ownerState:e})=>z({display:"flex",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),pointerEvents:"none"},e.iconActive&&{transform:"scale(1.2)"},e.iconEmpty&&{color:(t.vars||t).palette.action.disabled})),y3e=Ue("span",{name:"MuiRating",slot:"Decimal",shouldForwardProp:t=>Iv(t)&&t!=="iconActive",overridesResolver:(t,e)=>{const{iconActive:n}=t;return[e.decimal,n&&e.iconActive]}})(({iconActive:t})=>z({position:"relative"},t&&{transform:"scale(1.2)"}));function v3e(t){const e=rt(t,d3e);return H.jsx("span",z({},e))}function Z7(t){const{classes:e,disabled:n,emptyIcon:r,focus:i,getLabelText:s,highlightSelectedOnly:o,hover:a,icon:c,IconContainerComponent:l,isActive:u,itemValue:d,labelProps:h,name:f,onBlur:p,onChange:g,onClick:m,onFocus:y,readOnly:b,ownerState:x,ratingValue:S,ratingValueRounded:P}=t,_=o?d===S:d<=S,I=d<=a,C=d<=i,A=d===P,M=_c(),k=H.jsx(g3e,{as:l,value:d,className:Fe(e.icon,_?e.iconFilled:e.iconEmpty,I&&e.iconHover,C&&e.iconFocus,u&&e.iconActive),ownerState:z({},x,{iconEmpty:!_,iconFilled:_,iconHover:I,iconFocus:C,iconActive:u}),children:r&&!_?r:c});return b?H.jsx("span",z({},h,{children:k})):H.jsxs(N.Fragment,{children:[H.jsxs(dX,z({ownerState:z({},x,{emptyValueFocused:void 0}),htmlFor:M},h,{children:[k,H.jsx("span",{className:e.visuallyHidden,children:s(d)})]})),H.jsx("input",{className:e.visuallyHidden,onFocus:y,onBlur:p,onChange:g,onClick:m,disabled:n,value:d,id:M,type:"radio",name:f,checked:A})]})}const b3e=H.jsx(c3e,{fontSize:"inherit"}),x3e=H.jsx(u3e,{fontSize:"inherit"});function w3e(t){return`${t} Star${t!==1?"s":""}`}const _3e=N.forwardRef(function(e,n){const r=Et({name:"MuiRating",props:e}),{className:i,defaultValue:s=null,disabled:o=!1,emptyIcon:a=x3e,emptyLabelText:c="Empty",getLabelText:l=w3e,highlightSelectedOnly:u=!1,icon:d=b3e,IconContainerComponent:h=v3e,max:f=5,name:p,onChange:g,onChangeActive:m,onMouseLeave:y,onMouseMove:b,precision:x=1,readOnly:S=!1,size:P="medium",value:_}=r,I=rt(r,f3e),C=_c(p),[A,M]=ta({controlled:_,default:s,name:"Rating"}),k=HA(A,x),O=mu(),[{hover:B,focus:$},U]=N.useState({hover:-1,focus:-1});let q=k;B!==-1&&(q=B),$!==-1&&(q=$);const{isFocusVisibleRef:K,onBlur:V,onFocus:G,ref:j}=Ev(),[Q,se]=N.useState(!1),Z=N.useRef(),ie=or(j,Z,n),pe=Ge=>{b&&b(Ge);const Pe=Z.current,{right:He,left:Re,width:je}=Pe.getBoundingClientRect();let te;O?te=(He-Ge.clientX)/je:te=(Ge.clientX-Re)/je;let ee=HA(f*te+x/2,x);ee=Id(ee,x,f),U(X=>X.hover===ee&&X.focus===ee?X:{hover:ee,focus:ee}),se(!1),m&&B!==ee&&m(Ge,ee)},ue=Ge=>{y&&y(Ge);const Pe=-1;U({hover:Pe,focus:Pe}),m&&B!==Pe&&m(Ge,Pe)},le=Ge=>{let Pe=Ge.target.value===""?null:parseFloat(Ge.target.value);B!==-1&&(Pe=B),M(Pe),g&&g(Ge,Pe)},ae=Ge=>{Ge.clientX===0&&Ge.clientY===0||(U({hover:-1,focus:-1}),M(null),g&&parseFloat(Ge.target.value)===k&&g(Ge,null))},_e=Ge=>{G(Ge),K.current===!0&&se(!0);const Pe=parseFloat(Ge.target.value);U(He=>({hover:He.hover,focus:Pe}))},ye=Ge=>{if(B!==-1)return;V(Ge),K.current===!1&&se(!1);const Pe=-1;U(He=>({hover:He.hover,focus:Pe}))},[Ae,Oe]=N.useState(!1),Be=z({},r,{defaultValue:s,disabled:o,emptyIcon:a,emptyLabelText:c,emptyValueFocused:Ae,focusVisible:Q,getLabelText:l,icon:d,IconContainerComponent:h,max:f,precision:x,readOnly:S,size:P}),ce=p3e(Be);return H.jsxs(m3e,z({ref:ie,onMouseMove:pe,onMouseLeave:ue,className:Fe(ce.root,i,S&&"MuiRating-readOnly"),ownerState:Be,role:S?"img":null,"aria-label":S?l(q):null},I,{children:[Array.from(new Array(f)).map((Ge,Pe)=>{const He=Pe+1,Re={classes:ce,disabled:o,emptyIcon:a,focus:$,getLabelText:l,highlightSelectedOnly:u,hover:B,icon:d,IconContainerComponent:h,name:C,onBlur:ye,onChange:le,onClick:ae,onFocus:_e,ratingValue:q,ratingValueRounded:k,readOnly:S,ownerState:Be},je=He===Math.ceil(q)&&(B!==-1||$!==-1);if(x<1){const te=Array.from(new Array(1/x));return H.jsx(y3e,{className:Fe(ce.decimal,je&&ce.iconActive),ownerState:Be,iconActive:je,children:te.map((ee,X)=>{const we=HA(He-1+(X+1)*x,x);return H.jsx(Z7,z({},Re,{isActive:!1,itemValue:we,labelProps:{style:te.length-1===X?{}:{width:we===q?`${(X+1)*x*100}%`:"0%",overflow:"hidden",position:"absolute"}}}),we)})},He)}return H.jsx(Z7,z({},Re,{isActive:je,itemValue:He}),He)}),!S&&!o&&H.jsxs(dX,{className:Fe(ce.label,ce.labelEmptyValue),ownerState:Be,children:[H.jsx("input",{className:ce.visuallyHidden,value:"",id:`${C}-empty`,type:"radio",name:C,checked:k==null,onFocus:()=>Oe(!0),onBlur:()=>Oe(!1),onChange:le}),H.jsx("span",{className:ce.visuallyHidden,children:c})]})]}))});function fX(t){return xt("MuiScopedCssBaseline",t)}const S3e=wt("MuiScopedCssBaseline",["root"]),E3e=["className","component","enableColorScheme"],T3e=t=>{const{classes:e}=t;return _t({root:["root"]},fX,e)},I3e=Ue("div",{name:"MuiScopedCssBaseline",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t,ownerState:e})=>{const n={};return e.enableColorScheme&&t.colorSchemes&&Object.entries(t.colorSchemes).forEach(([r,i])=>{var s;n[`&${t.getColorSchemeSelector(r).replace(/\s*&/,"")}`]={colorScheme:(s=i.palette)==null?void 0:s.mode}}),z({},FK(t,e.enableColorScheme),UK(t),{"& *, & *::before, & *::after":{boxSizing:"inherit"},"& strong, & b":{fontWeight:t.typography.fontWeightBold}},n)}),P3e=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiScopedCssBaseline"}),{className:i,component:s="div"}=r,o=rt(r,E3e),a=z({},r,{component:s}),c=T3e(a);return H.jsx(I3e,z({as:s,className:Fe(c.root,i),ref:n,ownerState:a},o))});function hX(t){return xt("MuiSelect",t)}const uy=wt("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var J7;const C3e=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],M3e=Ue("div",{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`&.${uy.select}`]:e.select},{[`&.${uy.select}`]:e[n.variant]},{[`&.${uy.error}`]:e.error},{[`&.${uy.multiple}`]:e.multiple}]}})(XG,{[`&.${uy.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),A3e=Ue("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${qe(n.variant)}`],n.open&&e.iconOpen]}})(YG),R3e=Ue("input",{shouldForwardProp:t=>Iv(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(t,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Q7(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}function k3e(t){return t==null||typeof t=="string"&&!t.trim()}const O3e=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:s,error:o}=t,a={select:["select",n,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${qe(n)}`,s&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return _t(a,hX,e)},N3e=N.forwardRef(function(e,n){var r;const{"aria-describedby":i,"aria-label":s,autoFocus:o,autoWidth:a,children:c,className:l,defaultOpen:u,defaultValue:d,disabled:h,displayEmpty:f,error:p=!1,IconComponent:g,inputRef:m,labelId:y,MenuProps:b={},multiple:x,name:S,onBlur:P,onChange:_,onClose:I,onFocus:C,onOpen:A,open:M,readOnly:k,renderValue:O,SelectDisplayProps:B={},tabIndex:$,value:U,variant:q="standard"}=e,K=rt(e,C3e),[V,G]=ta({controlled:U,default:d,name:"Select"}),[j,Q]=ta({controlled:M,default:u,name:"Select"}),se=N.useRef(null),Z=N.useRef(null),[ie,pe]=N.useState(null),{current:ue}=N.useRef(M!=null),[le,ae]=N.useState(),_e=or(n,m),ye=N.useCallback(Ee=>{Z.current=Ee,Ee&&pe(Ee)},[]),Ae=ie==null?void 0:ie.parentNode;N.useImperativeHandle(_e,()=>({focus:()=>{Z.current.focus()},node:se.current,value:V}),[V]),N.useEffect(()=>{u&&j&&ie&&!ue&&(ae(a?null:Ae.clientWidth),Z.current.focus())},[ie,a]),N.useEffect(()=>{o&&Z.current.focus()},[o]),N.useEffect(()=>{if(!y)return;const Ee=Fr(Z.current).getElementById(y);if(Ee){const oe=()=>{getSelection().isCollapsed&&Z.current.focus()};return Ee.addEventListener("click",oe),()=>{Ee.removeEventListener("click",oe)}}},[y]);const Oe=(Ee,oe)=>{Ee?A&&A(oe):I&&I(oe),ue||(ae(a?null:Ae.clientWidth),Q(Ee))},Be=Ee=>{Ee.button===0&&(Ee.preventDefault(),Z.current.focus(),Oe(!0,Ee))},ce=Ee=>{Oe(!1,Ee)},Ge=N.Children.toArray(c),Pe=Ee=>{const oe=Ge.find(ne=>ne.props.value===Ee.target.value);oe!==void 0&&(G(oe.props.value),_&&_(Ee,oe))},He=Ee=>oe=>{let ne;if(oe.currentTarget.hasAttribute("tabindex")){if(x){ne=Array.isArray(V)?V.slice():[];const de=V.indexOf(Ee.props.value);de===-1?ne.push(Ee.props.value):ne.splice(de,1)}else ne=Ee.props.value;if(Ee.props.onClick&&Ee.props.onClick(oe),V!==ne&&(G(ne),_)){const de=oe.nativeEvent||oe,Te=new de.constructor(de.type,de);Object.defineProperty(Te,"target",{writable:!0,value:{value:ne,name:S}}),_(Te,Ee)}x||Oe(!1,oe)}},Re=Ee=>{k||[" ","ArrowUp","ArrowDown","Enter"].indexOf(Ee.key)!==-1&&(Ee.preventDefault(),Oe(!0,Ee))},je=ie!==null&&j,te=Ee=>{!je&&P&&(Object.defineProperty(Ee,"target",{writable:!0,value:{value:V,name:S}}),P(Ee))};delete K["aria-invalid"];let ee,X;const we=[];let Ne=!1;(iI({value:V})||f)&&(O?ee=O(V):Ne=!0);const We=Ge.map(Ee=>{if(!N.isValidElement(Ee))return null;let oe;if(x){if(!Array.isArray(V))throw new Error(Po(2));oe=V.some(ne=>Q7(ne,Ee.props.value)),oe&&Ne&&we.push(Ee.props.children)}else oe=Q7(V,Ee.props.value),oe&&Ne&&(X=Ee.props.children);return N.cloneElement(Ee,{"aria-selected":oe?"true":"false",onClick:He(Ee),onKeyUp:ne=>{ne.key===" "&&ne.preventDefault(),Ee.props.onKeyUp&&Ee.props.onKeyUp(ne)},role:"option",selected:oe,value:void 0,"data-value":Ee.props.value})});Ne&&(x?we.length===0?ee=null:ee=we.reduce((Ee,oe,ne)=>(Ee.push(oe),ne<we.length-1&&Ee.push(", "),Ee),[]):ee=X);let xe=le;!a&&ue&&ie&&(xe=Ae.clientWidth);let Ve;typeof $<"u"?Ve=$:Ve=h?null:0;const be=B.id||(S?`mui-component-select-${S}`:void 0),ge=z({},e,{variant:q,value:V,open:je,error:p}),Se=O3e(ge),Ie=z({},b.PaperProps,(r=b.slotProps)==null?void 0:r.paper),me=_c();return H.jsxs(N.Fragment,{children:[H.jsx(M3e,z({ref:ye,tabIndex:Ve,role:"combobox","aria-controls":me,"aria-disabled":h?"true":void 0,"aria-expanded":je?"true":"false","aria-haspopup":"listbox","aria-label":s,"aria-labelledby":[y,be].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:Re,onMouseDown:h||k?null:Be,onBlur:te,onFocus:C},B,{ownerState:ge,className:Fe(B.className,Se.select,l),id:be,children:k3e(ee)?J7||(J7=H.jsx("span",{className:"notranslate",children:""})):ee})),H.jsx(R3e,z({"aria-invalid":p,value:Array.isArray(V)?V.join(","):V,name:S,ref:se,"aria-hidden":!0,onChange:Pe,tabIndex:-1,disabled:h,className:Se.nativeInput,autoFocus:o,ownerState:ge},K)),H.jsx(A3e,{as:g,className:Se.icon,ownerState:ge}),H.jsx(jG,z({id:`menu-${S||""}`,anchorEl:Ae,open:je,onClose:ce,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},b,{MenuListProps:z({"aria-labelledby":y,role:"listbox","aria-multiselectable":x?"true":void 0,disableListWrap:!0,id:me},b.MenuListProps),slotProps:z({},b.slotProps,{paper:z({},Ie,{style:z({minWidth:xe},Ie!=null?Ie.style:null)})}),children:We}))]})}),L3e=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],D3e=["root"],B3e=t=>{const{classes:e}=t;return e},k4={name:"MuiSelect",overridesResolver:(t,e)=>e.root,shouldForwardProp:t=>Bi(t)&&t!=="variant",slot:"Root"},F3e=Ue(E_,k4)(""),U3e=Ue(KP,k4)(""),$3e=Ue(jP,k4)(""),GP=N.forwardRef(function(e,n){const r=Et({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:s,classes:o={},className:a,defaultOpen:c=!1,displayEmpty:l=!1,IconComponent:u=b4,id:d,input:h,inputProps:f,label:p,labelId:g,MenuProps:m,multiple:y=!1,native:b=!1,onClose:x,onOpen:S,open:P,renderValue:_,SelectDisplayProps:I,variant:C="outlined"}=r,A=rt(r,L3e),M=b?ZG:N3e,k=Pl(),O=Jd({props:r,muiFormControl:k,states:["variant","error"]}),B=O.variant||C,$=z({},r,{variant:B,classes:o}),U=B3e($),q=rt(U,D3e),K=h||{standard:H.jsx(F3e,{ownerState:$}),outlined:H.jsx(U3e,{label:p,ownerState:$}),filled:H.jsx($3e,{ownerState:$})}[B],V=or(n,Zd(K));return H.jsx(N.Fragment,{children:N.cloneElement(K,z({inputComponent:M,inputProps:z({children:s,error:O.error,IconComponent:u,variant:B,type:void 0,multiple:y},b?{id:d}:{autoWidth:i,defaultOpen:c,displayEmpty:l,labelId:g,MenuProps:m,onClose:x,onOpen:S,open:P,renderValue:_,SelectDisplayProps:z({id:d},I)},f,{classes:f?ki(q,f.classes):q},h?h.props.inputProps:{})},(y&&b||l)&&B==="outlined"?{notched:!0}:{},{ref:V,className:Fe(K.props.className,a,U.root)},!h&&{variant:B},A))})});GP.muiName="Select";function pX(t){return xt("MuiSkeleton",t)}const z3e=wt("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]),H3e=["animation","className","component","height","style","variant","width"];let oI=t=>t,eU,tU,nU,rU;const V3e=t=>{const{classes:e,variant:n,animation:r,hasChildren:i,width:s,height:o}=t;return _t({root:["root",n,r,i&&"withChildren",i&&!s&&"fitContent",i&&!o&&"heightAuto"]},pX,e)},W3e=Zi(eU||(eU=oI`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`)),j3e=Zi(tU||(tU=oI`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`)),q3e=Ue("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],n.animation!==!1&&e[n.animation],n.hasChildren&&e.withChildren,n.hasChildren&&!n.width&&e.fitContent,n.hasChildren&&!n.height&&e.heightAuto]}})(({theme:t,ownerState:e})=>{const n=m4(t.shape.borderRadius)||"px",r=_d(t.shape.borderRadius);return z({display:"block",backgroundColor:t.vars?t.vars.palette.Skeleton.bg:yy(t.palette.text.primary,t.palette.mode==="light"?.11:.13),height:"1.2em"},e.variant==="text"&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${r}${n}/${Math.round(r/.6*10)/10}${n}`,"&:empty:before":{content:'"\\00a0"'}},e.variant==="circular"&&{borderRadius:"50%"},e.variant==="rounded"&&{borderRadius:(t.vars||t).shape.borderRadius},e.hasChildren&&{"& > *":{visibility:"hidden"}},e.hasChildren&&!e.width&&{maxWidth:"fit-content"},e.hasChildren&&!e.height&&{height:"auto"})},({ownerState:t})=>t.animation==="pulse"&&Io(nU||(nU=oI`
      animation: ${0} 2s ease-in-out 0.5s infinite;
    `),W3e),({ownerState:t,theme:e})=>t.animation==="wave"&&Io(rU||(rU=oI`
      position: relative;
      overflow: hidden;

      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */
      -webkit-mask-image: -webkit-radial-gradient(white, black);

      &::after {
        animation: ${0} 2s linear 0.5s infinite;
        background: linear-gradient(
          90deg,
          transparent,
          ${0},
          transparent
        );
        content: '';
        position: absolute;
        transform: translateX(-100%); /* Avoid flash during server-side hydration */
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
      }
    `),j3e,(e.vars||e).palette.action.hover)),K3e=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiSkeleton"}),{animation:i="pulse",className:s,component:o="span",height:a,style:c,variant:l="text",width:u}=r,d=rt(r,H3e),h=z({},r,{animation:i,component:o,variant:l,hasChildren:!!d.children}),f=V3e(h);return H.jsx(q3e,z({as:o,ref:n,className:Fe(f.root,s),ownerState:h},d,{style:z({width:u,height:a},c)}))});function G3e(t,e,n=(r,i)=>r===i){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}const X3e=2;function mX(t,e){return t-e}function iU(t,e){var n;const{index:r}=(n=t.reduce((i,s,o)=>{const a=Math.abs(e-s);return i===null||a<i.distance||a===i.distance?{distance:a,index:o}:i},null))!=null?n:{};return r}function sT(t,e){if(e.current!==void 0&&t.changedTouches){const n=t;for(let r=0;r<n.changedTouches.length;r+=1){const i=n.changedTouches[r];if(i.identifier===e.current)return{x:i.clientX,y:i.clientY}}return!1}return{x:t.clientX,y:t.clientY}}function aI(t,e,n){return(t-e)*100/(n-e)}function Y3e(t,e,n){return(n-e)*t+e}function Z3e(t){if(Math.abs(t)<1){const n=t.toExponential().split("e-"),r=n[0].split(".")[1];return(r?r.length:0)+parseInt(n[1],10)}const e=t.toString().split(".")[1];return e?e.length:0}function J3e(t,e,n){const r=Math.round((t-n)/e)*e+n;return Number(r.toFixed(Z3e(e)))}function sU({values:t,newValue:e,index:n}){const r=t.slice();return r[n]=e,r.sort(mX)}function oT({sliderRef:t,activeIndex:e,setActive:n}){var r,i;const s=Fr(t.current);if(!((r=t.current)!=null&&r.contains(s.activeElement))||Number(s==null||(i=s.activeElement)==null?void 0:i.getAttribute("data-index"))!==e){var o;(o=t.current)==null||o.querySelector(`[type="range"][data-index="${e}"]`).focus()}n&&n(e)}function aT(t,e){return typeof t=="number"&&typeof e=="number"?t===e:typeof t=="object"&&typeof e=="object"?G3e(t,e):!1}const Q3e={horizontal:{offset:t=>({left:`${t}%`}),leap:t=>({width:`${t}%`})},"horizontal-reverse":{offset:t=>({right:`${t}%`}),leap:t=>({width:`${t}%`})},vertical:{offset:t=>({bottom:`${t}%`}),leap:t=>({height:`${t}%`})}},eOe=t=>t;let lT;function oU(){return lT===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?lT=CSS.supports("touch-action","none"):lT=!0),lT}function tOe(t){const{"aria-labelledby":e,defaultValue:n,disabled:r=!1,disableSwap:i=!1,isRtl:s=!1,marks:o=!1,max:a=100,min:c=0,name:l,onChange:u,onChangeCommitted:d,orientation:h="horizontal",rootRef:f,scale:p=eOe,step:g=1,shiftStep:m=10,tabIndex:y,value:b}=t,x=N.useRef(void 0),[S,P]=N.useState(-1),[_,I]=N.useState(-1),[C,A]=N.useState(!1),M=N.useRef(0),[k,O]=ta({controlled:b,default:n??c,name:"Slider"}),B=u&&((be,ge,Se)=>{const Ie=be.nativeEvent||be,me=new Ie.constructor(Ie.type,Ie);Object.defineProperty(me,"target",{writable:!0,value:{value:ge,name:l}}),u(me,ge,Se)}),$=Array.isArray(k);let U=$?k.slice().sort(mX):[k];U=U.map(be=>be==null?c:Id(be,c,a));const q=o===!0&&g!==null?[...Array(Math.floor((a-c)/g)+1)].map((be,ge)=>({value:c+g*ge})):o||[],K=q.map(be=>be.value),{isFocusVisibleRef:V,onBlur:G,onFocus:j,ref:Q}=Ev(),[se,Z]=N.useState(-1),ie=N.useRef(null),pe=or(Q,ie),ue=or(f,pe),le=be=>ge=>{var Se;const Ie=Number(ge.currentTarget.getAttribute("data-index"));j(ge),V.current===!0&&Z(Ie),I(Ie),be==null||(Se=be.onFocus)==null||Se.call(be,ge)},ae=be=>ge=>{var Se;G(ge),V.current===!1&&Z(-1),I(-1),be==null||(Se=be.onBlur)==null||Se.call(be,ge)},_e=(be,ge)=>{const Se=Number(be.currentTarget.getAttribute("data-index")),Ie=U[Se],me=K.indexOf(Ie);let Ee=ge;if(q&&g==null){const oe=K[K.length-1];Ee>oe?Ee=oe:Ee<K[0]?Ee=K[0]:Ee=Ee<Ie?K[me-1]:K[me+1]}if(Ee=Id(Ee,c,a),$){i&&(Ee=Id(Ee,U[Se-1]||-1/0,U[Se+1]||1/0));const oe=Ee;Ee=sU({values:U,newValue:Ee,index:Se});let ne=Se;i||(ne=Ee.indexOf(oe)),oT({sliderRef:ie,activeIndex:ne})}O(Ee),Z(Se),B&&!aT(Ee,k)&&B(be,Ee,Se),d&&d(be,Ee)},ye=be=>ge=>{var Se;if(g!==null){const Ie=Number(ge.currentTarget.getAttribute("data-index")),me=U[Ie];let Ee=null;(ge.key==="ArrowLeft"||ge.key==="ArrowDown")&&ge.shiftKey||ge.key==="PageDown"?Ee=Math.max(me-m,c):((ge.key==="ArrowRight"||ge.key==="ArrowUp")&&ge.shiftKey||ge.key==="PageUp")&&(Ee=Math.min(me+m,a)),Ee!==null&&(_e(ge,Ee),ge.preventDefault())}be==null||(Se=be.onKeyDown)==null||Se.call(be,ge)};fs(()=>{if(r&&ie.current.contains(document.activeElement)){var be;(be=document.activeElement)==null||be.blur()}},[r]),r&&S!==-1&&P(-1),r&&se!==-1&&Z(-1);const Ae=be=>ge=>{var Se;(Se=be.onChange)==null||Se.call(be,ge),_e(ge,ge.target.valueAsNumber)},Oe=N.useRef(void 0);let Be=h;s&&h==="horizontal"&&(Be+="-reverse");const ce=({finger:be,move:ge=!1})=>{const{current:Se}=ie,{width:Ie,height:me,bottom:Ee,left:oe}=Se.getBoundingClientRect();let ne;Be.indexOf("vertical")===0?ne=(Ee-be.y)/me:ne=(be.x-oe)/Ie,Be.indexOf("-reverse")!==-1&&(ne=1-ne);let de;if(de=Y3e(ne,c,a),g)de=J3e(de,g,c);else{const ke=iU(K,de);de=K[ke]}de=Id(de,c,a);let Te=0;if($){ge?Te=Oe.current:Te=iU(U,de),i&&(de=Id(de,U[Te-1]||-1/0,U[Te+1]||1/0));const ke=de;de=sU({values:U,newValue:de,index:Te}),i&&ge||(Te=de.indexOf(ke),Oe.current=Te)}return{newValue:de,activeIndex:Te}},Ge=Yr(be=>{const ge=sT(be,x);if(!ge)return;if(M.current+=1,be.type==="mousemove"&&be.buttons===0){Pe(be);return}const{newValue:Se,activeIndex:Ie}=ce({finger:ge,move:!0});oT({sliderRef:ie,activeIndex:Ie,setActive:P}),O(Se),!C&&M.current>X3e&&A(!0),B&&!aT(Se,k)&&B(be,Se,Ie)}),Pe=Yr(be=>{const ge=sT(be,x);if(A(!1),!ge)return;const{newValue:Se}=ce({finger:ge,move:!0});P(-1),be.type==="touchend"&&I(-1),d&&d(be,Se),x.current=void 0,Re()}),He=Yr(be=>{if(r)return;oU()||be.preventDefault();const ge=be.changedTouches[0];ge!=null&&(x.current=ge.identifier);const Se=sT(be,x);if(Se!==!1){const{newValue:me,activeIndex:Ee}=ce({finger:Se});oT({sliderRef:ie,activeIndex:Ee,setActive:P}),O(me),B&&!aT(me,k)&&B(be,me,Ee)}M.current=0;const Ie=Fr(ie.current);Ie.addEventListener("touchmove",Ge,{passive:!0}),Ie.addEventListener("touchend",Pe,{passive:!0})}),Re=N.useCallback(()=>{const be=Fr(ie.current);be.removeEventListener("mousemove",Ge),be.removeEventListener("mouseup",Pe),be.removeEventListener("touchmove",Ge),be.removeEventListener("touchend",Pe)},[Pe,Ge]);N.useEffect(()=>{const{current:be}=ie;return be.addEventListener("touchstart",He,{passive:oU()}),()=>{be.removeEventListener("touchstart",He),Re()}},[Re,He]),N.useEffect(()=>{r&&Re()},[r,Re]);const je=be=>ge=>{var Se;if((Se=be.onMouseDown)==null||Se.call(be,ge),r||ge.defaultPrevented||ge.button!==0)return;ge.preventDefault();const Ie=sT(ge,x);if(Ie!==!1){const{newValue:Ee,activeIndex:oe}=ce({finger:Ie});oT({sliderRef:ie,activeIndex:oe,setActive:P}),O(Ee),B&&!aT(Ee,k)&&B(ge,Ee,oe)}M.current=0;const me=Fr(ie.current);me.addEventListener("mousemove",Ge,{passive:!0}),me.addEventListener("mouseup",Pe)},te=aI($?U[0]:c,c,a),ee=aI(U[U.length-1],c,a)-te,X=(be={})=>{const ge=Am(be),Se={onMouseDown:je(ge||{})},Ie=z({},ge,Se);return z({},be,{ref:ue},Ie)},we=be=>ge=>{var Se;(Se=be.onMouseOver)==null||Se.call(be,ge);const Ie=Number(ge.currentTarget.getAttribute("data-index"));I(Ie)},Ne=be=>ge=>{var Se;(Se=be.onMouseLeave)==null||Se.call(be,ge),I(-1)};return{active:S,axis:Be,axisProps:Q3e,dragging:C,focusedThumbIndex:se,getHiddenInputProps:(be={})=>{var ge;const Se=Am(be),Ie={onChange:Ae(Se||{}),onFocus:le(Se||{}),onBlur:ae(Se||{}),onKeyDown:ye(Se||{})},me=z({},Se,Ie);return z({tabIndex:y,"aria-labelledby":e,"aria-orientation":h,"aria-valuemax":p(a),"aria-valuemin":p(c),name:l,type:"range",min:t.min,max:t.max,step:t.step===null&&t.marks?"any":(ge=t.step)!=null?ge:void 0,disabled:r},be,me,{style:z({},_q,{direction:s?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:X,getThumbProps:(be={})=>{const ge=Am(be),Se={onMouseOver:we(ge||{}),onMouseLeave:Ne(ge||{})};return z({},be,ge,Se)},marks:q,open:_,range:$,rootRef:ue,trackLeap:ee,trackOffset:te,values:U,getThumbStyle:be=>({pointerEvents:S!==-1&&S!==be?"none":void 0})}}const nOe=t=>!t||!vc(t);function gX(t){return xt("MuiSlider",t)}const Ma=wt("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),rOe=t=>{const{open:e}=t;return{offset:Fe(e&&Ma.valueLabelOpen),circle:Ma.valueLabelCircle,label:Ma.valueLabelLabel}};function iOe(t){const{children:e,className:n,value:r}=t,i=rOe(t);return e?N.cloneElement(e,{className:Fe(e.props.className)},H.jsxs(N.Fragment,{children:[e.props.children,H.jsx("span",{className:Fe(i.offset,n),"aria-hidden":!0,children:H.jsx("span",{className:i.circle,children:H.jsx("span",{className:i.label,children:r})})})]})):null}const sOe=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","shiftStep","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"];function aU(t){return t}const yX=Ue("span",{name:"MuiSlider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${qe(n.color)}`],n.size!=="medium"&&e[`size${qe(n.size)}`],n.marked&&e.marked,n.orientation==="vertical"&&e.vertical,n.track==="inverted"&&e.trackInverted,n.track===!1&&e.trackFalse]}})(({theme:t})=>{var e;return{borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${Ma.disabled}`]:{pointerEvents:"none",cursor:"default",color:(t.vars||t).palette.grey[400]},[`&.${Ma.dragging}`]:{[`& .${Ma.thumb}, & .${Ma.track}`]:{transition:"none"}},variants:[...Object.keys(((e=t.vars)!=null?e:t).palette).filter(n=>{var r;return((r=t.vars)!=null?r:t).palette[n].main}).map(n=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}}),vX=Ue("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(t,e)=>e.rail})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),bX=Ue("span",{name:"MuiSlider",slot:"Track",overridesResolver:(t,e)=>e.track})(({theme:t})=>{var e;return{display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:t.transitions.create(["left","width","bottom","height"],{duration:t.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.keys(((e=t.vars)!=null?e:t).palette).filter(n=>{var r;return((r=t.vars)!=null?r:t).palette[n].main}).map(n=>({props:{color:n,track:"inverted"},style:z({},t.vars?{backgroundColor:t.vars.palette.Slider[`${n}Track`],borderColor:t.vars.palette.Slider[`${n}Track`]}:z({backgroundColor:pt.lighten(t.palette[n].main,.62),borderColor:pt.lighten(t.palette[n].main,.62)},t.applyStyles("dark",{backgroundColor:pt.darken(t.palette[n].main,.5)}),t.applyStyles("dark",{borderColor:pt.darken(t.palette[n].main,.5)})))}))]}}),xX=Ue("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.thumb,e[`thumbColor${qe(n.color)}`],n.size!=="medium"&&e[`thumbSize${qe(n.size)}`]]}})(({theme:t})=>{var e;return{position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:t.transitions.create(["box-shadow","left","bottom"],{duration:t.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(t.vars||t).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${Ma.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.keys(((e=t.vars)!=null?e:t).palette).filter(n=>{var r;return((r=t.vars)!=null?r:t).palette[n].main}).map(n=>({props:{color:n},style:{[`&:hover, &.${Ma.focusVisible}`]:z({},t.vars?{boxShadow:`0px 0px 0px 8px rgba(${t.vars.palette[n].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${pt.alpha(t.palette[n].main,.16)}`},{"@media (hover: none)":{boxShadow:"none"}}),[`&.${Ma.active}`]:z({},t.vars?{boxShadow:`0px 0px 0px 14px rgba(${t.vars.palette[n].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${pt.alpha(t.palette[n].main,.16)}`})}}))]}}),wX=Ue(iOe,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(t,e)=>e.valueLabel})(({theme:t})=>z({zIndex:1,whiteSpace:"nowrap"},t.typography.body2,{fontWeight:500,transition:t.transitions.create(["transform"],{duration:t.transitions.duration.shortest}),position:"absolute",backgroundColor:(t.vars||t).palette.grey[600],borderRadius:2,color:(t.vars||t).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${Ma.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${Ma.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:t.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]})),_X=Ue("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:t=>Iv(t)&&t!=="markActive",overridesResolver:(t,e)=>{const{markActive:n}=t;return[e.mark,n&&e.markActive]}})(({theme:t})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(t.vars||t).palette.background.paper,opacity:.8}}]})),SX=Ue("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:t=>Iv(t)&&t!=="markLabelActive",overridesResolver:(t,e)=>e.markLabel})(({theme:t})=>z({},t.typography.body2,{color:(t.vars||t).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(t.vars||t).palette.text.primary}}]})),oOe=t=>{const{disabled:e,dragging:n,marked:r,orientation:i,track:s,classes:o,color:a,size:c}=t,l={root:["root",e&&"disabled",n&&"dragging",r&&"marked",i==="vertical"&&"vertical",s==="inverted"&&"trackInverted",s===!1&&"trackFalse",a&&`color${qe(a)}`,c&&`size${qe(c)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",e&&"disabled",c&&`thumbSize${qe(c)}`,a&&`thumbColor${qe(a)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return _t(l,gX,o)},aOe=({children:t})=>t,lOe=N.forwardRef(function(e,n){var r,i,s,o,a,c,l,u,d,h,f,p,g,m,y,b,x,S,P,_,I,C,A,M;const k=Et({props:e,name:"MuiSlider"}),O=mu(),{"aria-label":B,"aria-valuetext":$,"aria-labelledby":U,component:q="span",components:K={},componentsProps:V={},color:G="primary",classes:j,className:Q,disableSwap:se=!1,disabled:Z=!1,getAriaLabel:ie,getAriaValueText:pe,marks:ue=!1,max:le=100,min:ae=0,orientation:_e="horizontal",shiftStep:ye=10,size:Ae="medium",step:Oe=1,scale:Be=aU,slotProps:ce,slots:Ge,track:Pe="normal",valueLabelDisplay:He="off",valueLabelFormat:Re=aU}=k,je=rt(k,sOe),te=z({},k,{isRtl:O,max:le,min:ae,classes:j,disabled:Z,disableSwap:se,orientation:_e,marks:ue,color:G,size:Ae,step:Oe,shiftStep:ye,scale:Be,track:Pe,valueLabelDisplay:He,valueLabelFormat:Re}),{axisProps:ee,getRootProps:X,getHiddenInputProps:we,getThumbProps:Ne,open:We,active:xe,axis:Ve,focusedThumbIndex:be,range:ge,dragging:Se,marks:Ie,values:me,trackOffset:Ee,trackLeap:oe,getThumbStyle:ne}=tOe(z({},te,{rootRef:n}));te.marked=Ie.length>0&&Ie.some(at=>at.label),te.dragging=Se,te.focusedThumbIndex=be;const de=oOe(te),Te=(r=(i=Ge==null?void 0:Ge.root)!=null?i:K.Root)!=null?r:yX,ke=(s=(o=Ge==null?void 0:Ge.rail)!=null?o:K.Rail)!=null?s:vX,he=(a=(c=Ge==null?void 0:Ge.track)!=null?c:K.Track)!=null?a:bX,Xe=(l=(u=Ge==null?void 0:Ge.thumb)!=null?u:K.Thumb)!=null?l:xX,$e=(d=(h=Ge==null?void 0:Ge.valueLabel)!=null?h:K.ValueLabel)!=null?d:wX,Qe=(f=(p=Ge==null?void 0:Ge.mark)!=null?p:K.Mark)!=null?f:_X,ut=(g=(m=Ge==null?void 0:Ge.markLabel)!=null?m:K.MarkLabel)!=null?g:SX,gt=(y=(b=Ge==null?void 0:Ge.input)!=null?b:K.Input)!=null?y:"input",Tt=(x=ce==null?void 0:ce.root)!=null?x:V.root,Kt=(S=ce==null?void 0:ce.rail)!=null?S:V.rail,Zt=(P=ce==null?void 0:ce.track)!=null?P:V.track,Bt=(_=ce==null?void 0:ce.thumb)!=null?_:V.thumb,_n=(I=ce==null?void 0:ce.valueLabel)!=null?I:V.valueLabel,hn=(C=ce==null?void 0:ce.mark)!=null?C:V.mark,bn=(A=ce==null?void 0:ce.markLabel)!=null?A:V.markLabel,Wn=(M=ce==null?void 0:ce.input)!=null?M:V.input,Un=mi({elementType:Te,getSlotProps:X,externalSlotProps:Tt,externalForwardedProps:je,additionalProps:z({},nOe(Te)&&{as:q}),ownerState:z({},te,Tt==null?void 0:Tt.ownerState),className:[de.root,Q]}),Jn=mi({elementType:ke,externalSlotProps:Kt,ownerState:te,className:de.rail}),ci=mi({elementType:he,externalSlotProps:Zt,additionalProps:{style:z({},ee[Ve].offset(Ee),ee[Ve].leap(oe))},ownerState:z({},te,Zt==null?void 0:Zt.ownerState),className:de.track}),fr=mi({elementType:Xe,getSlotProps:Ne,externalSlotProps:Bt,ownerState:z({},te,Bt==null?void 0:Bt.ownerState),className:de.thumb}),Ur=mi({elementType:$e,externalSlotProps:_n,ownerState:z({},te,_n==null?void 0:_n.ownerState),className:de.valueLabel}),Zr=mi({elementType:Qe,externalSlotProps:hn,ownerState:te,className:de.mark}),jr=mi({elementType:ut,externalSlotProps:bn,ownerState:te,className:de.markLabel}),Pi=mi({elementType:gt,getSlotProps:we,externalSlotProps:Wn,ownerState:te});return H.jsxs(Te,z({},Un,{children:[H.jsx(ke,z({},Jn)),H.jsx(he,z({},ci)),Ie.filter(at=>at.value>=ae&&at.value<=le).map((at,Je)=>{const At=aI(at.value,ae,le),Ht=ee[Ve].offset(At);let nn;return Pe===!1?nn=me.indexOf(at.value)!==-1:nn=Pe==="normal"&&(ge?at.value>=me[0]&&at.value<=me[me.length-1]:at.value<=me[0])||Pe==="inverted"&&(ge?at.value<=me[0]||at.value>=me[me.length-1]:at.value>=me[0]),H.jsxs(N.Fragment,{children:[H.jsx(Qe,z({"data-index":Je},Zr,!vc(Qe)&&{markActive:nn},{style:z({},Ht,Zr.style),className:Fe(Zr.className,nn&&de.markActive)})),at.label!=null?H.jsx(ut,z({"aria-hidden":!0,"data-index":Je},jr,!vc(ut)&&{markLabelActive:nn},{style:z({},Ht,jr.style),className:Fe(de.markLabel,jr.className,nn&&de.markLabelActive),children:at.label})):null]},Je)}),me.map((at,Je)=>{const At=aI(at,ae,le),Ht=ee[Ve].offset(At),nn=He==="off"?aOe:$e;return H.jsx(nn,z({},!vc(nn)&&{valueLabelFormat:Re,valueLabelDisplay:He,value:typeof Re=="function"?Re(Be(at),Je):Re,index:Je,open:We===Je||xe===Je||He==="on",disabled:Z},Ur,{children:H.jsx(Xe,z({"data-index":Je},fr,{className:Fe(de.thumb,fr.className,xe===Je&&de.active,be===Je&&de.focusVisible),style:z({},Ht,ne(Je),fr.style),children:H.jsx(gt,z({"data-index":Je,"aria-label":ie?ie(Je):B,"aria-valuenow":Be(at),"aria-labelledby":U,"aria-valuetext":pe?pe(Be(at),Je):$,value:me[Je]},Pi))}))}),Je)})]}))});function cOe(t={}){const{autoHideDuration:e=null,disableWindowBlurListener:n=!1,onClose:r,open:i,resumeHideDuration:s}=t,o=Ad();N.useEffect(()=>{if(!i)return;function y(b){b.defaultPrevented||(b.key==="Escape"||b.key==="Esc")&&(r==null||r(b,"escapeKeyDown"))}return document.addEventListener("keydown",y),()=>{document.removeEventListener("keydown",y)}},[i,r]);const a=Yr((y,b)=>{r==null||r(y,b)}),c=Yr(y=>{!r||y==null||o.start(y,()=>{a(null,"timeout")})});N.useEffect(()=>(i&&c(e),o.clear),[i,e,c,o]);const l=y=>{r==null||r(y,"clickaway")},u=o.clear,d=N.useCallback(()=>{e!=null&&c(s??e*.5)},[e,s,c]),h=y=>b=>{const x=y.onBlur;x==null||x(b),d()},f=y=>b=>{const x=y.onFocus;x==null||x(b),u()},p=y=>b=>{const x=y.onMouseEnter;x==null||x(b),u()},g=y=>b=>{const x=y.onMouseLeave;x==null||x(b),d()};return N.useEffect(()=>{if(!n&&i)return window.addEventListener("focus",d),window.addEventListener("blur",u),()=>{window.removeEventListener("focus",d),window.removeEventListener("blur",u)}},[n,i,d,u]),{getRootProps:(y={})=>{const b=z({},Am(t),Am(y));return z({role:"presentation"},y,b,{onBlur:h(b),onFocus:f(b),onMouseEnter:p(b),onMouseLeave:g(b)})},onClickAway:l}}function EX(t){return xt("MuiSnackbarContent",t)}const uOe=wt("MuiSnackbarContent",["root","message","action"]),dOe=["action","className","message","role"],fOe=t=>{const{classes:e}=t;return _t({root:["root"],action:["action"],message:["message"]},EX,e)},hOe=Ue(Da,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>{const e=t.palette.mode==="light"?.8:.98,n=pt.emphasize(t.palette.background.default,e);return z({},t.typography.body2,{color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(n),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),pOe=Ue("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(t,e)=>e.message})({padding:"8px 0"}),mOe=Ue("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(t,e)=>e.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),TX=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiSnackbarContent"}),{action:i,className:s,message:o,role:a="alert"}=r,c=rt(r,dOe),l=r,u=fOe(l);return H.jsxs(hOe,z({role:a,square:!0,elevation:6,className:Fe(u.root,s),ownerState:l,ref:n},c,{children:[H.jsx(pOe,{className:u.message,ownerState:l,children:o}),i?H.jsx(mOe,{className:u.action,ownerState:l,children:i}):null]}))});function IX(t){return xt("MuiSnackbar",t)}const gOe=wt("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]),yOe=["onEnter","onExited"],vOe=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],bOe=t=>{const{classes:e,anchorOrigin:n}=t,r={root:["root",`anchorOrigin${qe(n.vertical)}${qe(n.horizontal)}`]};return _t(r,IX,e)},lU=Ue("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`anchorOrigin${qe(n.anchorOrigin.vertical)}${qe(n.anchorOrigin.horizontal)}`]]}})(({theme:t,ownerState:e})=>{const n={left:"50%",right:"auto",transform:"translateX(-50%)"};return z({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},e.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},e.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},e.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[t.breakpoints.up("sm")]:z({},e.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},e.anchorOrigin.horizontal==="center"&&n,e.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},e.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),xOe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiSnackbar"}),i=$s(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{action:o,anchorOrigin:{vertical:a,horizontal:c}={vertical:"bottom",horizontal:"left"},autoHideDuration:l=null,children:u,className:d,ClickAwayListenerProps:h,ContentProps:f,disableWindowBlurListener:p=!1,message:g,open:m,TransitionComponent:y=nv,transitionDuration:b=s,TransitionProps:{onEnter:x,onExited:S}={}}=r,P=rt(r.TransitionProps,yOe),_=rt(r,vOe),I=z({},r,{anchorOrigin:{vertical:a,horizontal:c},autoHideDuration:l,disableWindowBlurListener:p,TransitionComponent:y,transitionDuration:b}),C=bOe(I),{getRootProps:A,onClickAway:M}=cOe(z({},I)),[k,O]=N.useState(!0),B=mi({elementType:lU,getSlotProps:A,externalForwardedProps:_,ownerState:I,additionalProps:{ref:n},className:[C.root,d]}),$=q=>{O(!0),S&&S(q)},U=(q,K)=>{O(!1),x&&x(q,K)};return!m&&k?null:H.jsx(BK,z({onClickAway:M},h,{children:H.jsx(lU,z({},B,{children:H.jsx(y,z({appear:!0,in:m,timeout:b,direction:a==="top"?"down":"up",onEnter:U,onExited:$},P,{children:u||H.jsx(TX,z({message:g,action:o},f))}))}))}))}),wOe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],_Oe={entering:{transform:"none"},entered:{transform:"none"}},PX=N.forwardRef(function(e,n){const r=$s(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:o=!0,children:a,easing:c,in:l,onEnter:u,onEntered:d,onEntering:h,onExit:f,onExited:p,onExiting:g,style:m,timeout:y=i,TransitionComponent:b=ao}=e,x=rt(e,wOe),S=N.useRef(null),P=or(S,Zd(a),n),_=$=>U=>{if($){const q=S.current;U===void 0?$(q):$(q,U)}},I=_(h),C=_(($,U)=>{DP($);const q=Sc({style:m,timeout:y,easing:c},{mode:"enter"});$.style.webkitTransition=r.transitions.create("transform",q),$.style.transition=r.transitions.create("transform",q),u&&u($,U)}),A=_(d),M=_(g),k=_($=>{const U=Sc({style:m,timeout:y,easing:c},{mode:"exit"});$.style.webkitTransition=r.transitions.create("transform",U),$.style.transition=r.transitions.create("transform",U),f&&f($)}),O=_(p),B=$=>{s&&s(S.current,$)};return H.jsx(b,z({appear:o,in:l,nodeRef:S,onEnter:C,onEntered:A,onEntering:I,onExit:k,onExited:O,onExiting:M,addEndListener:B,timeout:y},x,{children:($,U)=>N.cloneElement(a,z({style:z({transform:"scale(0)",visibility:$==="exited"&&!l?"hidden":void 0},_Oe[$],m,a.props.style),ref:P},U))}))});function CX(t){return xt("MuiSpeedDial",t)}const Px=wt("MuiSpeedDial",["root","fab","directionUp","directionDown","directionLeft","directionRight","actions","actionsClosed"]),SOe=["ref"],EOe=["ariaLabel","FabProps","children","className","direction","hidden","icon","onBlur","onClose","onFocus","onKeyDown","onMouseEnter","onMouseLeave","onOpen","open","openIcon","TransitionComponent","transitionDuration","TransitionProps"],TOe=["ref"],IOe=t=>{const{classes:e,open:n,direction:r}=t,i={root:["root",`direction${qe(r)}`],fab:["fab"],actions:["actions",!n&&"actionsClosed"]};return _t(i,CX,e)};function sx(t){if(t==="up"||t==="down")return"vertical";if(t==="right"||t==="left")return"horizontal"}const cT=32,uT=16,POe=Ue("div",{name:"MuiSpeedDial",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`direction${qe(n.direction)}`]]}})(({theme:t,ownerState:e})=>z({zIndex:(t.vars||t).zIndex.speedDial,display:"flex",alignItems:"center",pointerEvents:"none"},e.direction==="up"&&{flexDirection:"column-reverse",[`& .${Px.actions}`]:{flexDirection:"column-reverse",marginBottom:-32,paddingBottom:uT+cT}},e.direction==="down"&&{flexDirection:"column",[`& .${Px.actions}`]:{flexDirection:"column",marginTop:-32,paddingTop:uT+cT}},e.direction==="left"&&{flexDirection:"row-reverse",[`& .${Px.actions}`]:{flexDirection:"row-reverse",marginRight:-32,paddingRight:uT+cT}},e.direction==="right"&&{flexDirection:"row",[`& .${Px.actions}`]:{flexDirection:"row",marginLeft:-32,paddingLeft:uT+cT}})),COe=Ue(I4,{name:"MuiSpeedDial",slot:"Fab",overridesResolver:(t,e)=>e.fab})(()=>({pointerEvents:"auto"})),MOe=Ue("div",{name:"MuiSpeedDial",slot:"Actions",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.actions,!n.open&&e.actionsClosed]}})(({ownerState:t})=>z({display:"flex",pointerEvents:"auto"},!t.open&&{transition:"top 0s linear 0.2s",pointerEvents:"none"})),AOe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiSpeedDial"}),i=$s(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{ariaLabel:o,FabProps:{ref:a}={},children:c,className:l,direction:u="up",hidden:d=!1,icon:h,onBlur:f,onClose:p,onFocus:g,onKeyDown:m,onMouseEnter:y,onMouseLeave:b,onOpen:x,open:S,TransitionComponent:P=PX,transitionDuration:_=s,TransitionProps:I}=r,C=rt(r.FabProps,SOe),A=rt(r,EOe),[M,k]=ta({controlled:S,default:!1,name:"SpeedDial",state:"open"}),O=z({},r,{open:M,direction:u}),B=IOe(O),$=Ad(),U=N.useRef(0),q=N.useRef(),K=N.useRef([]);K.current=[K.current[0]];const V=N.useCallback(ae=>{K.current[0]=ae},[]),G=or(a,V),j=(ae,_e)=>ye=>{K.current[ae+1]=ye,_e&&_e(ye)},Q=ae=>{m&&m(ae);const _e=ae.key.replace("Arrow","").toLowerCase(),{current:ye=_e}=q;if(ae.key==="Escape"){k(!1),K.current[0].focus(),p&&p(ae,"escapeKeyDown");return}if(sx(_e)===sx(ye)&&sx(_e)!==void 0){ae.preventDefault();const Ae=_e===ye?1:-1,Oe=Id(U.current+Ae,0,K.current.length-1);K.current[Oe].focus(),U.current=Oe,q.current=ye}};N.useEffect(()=>{M||(U.current=0,q.current=void 0)},[M]);const se=ae=>{ae.type==="mouseleave"&&b&&b(ae),ae.type==="blur"&&f&&f(ae),$.clear(),ae.type==="blur"?$.start(0,()=>{k(!1),p&&p(ae,"blur")}):(k(!1),p&&p(ae,"mouseLeave"))},Z=ae=>{C.onClick&&C.onClick(ae),$.clear(),M?(k(!1),p&&p(ae,"toggle")):(k(!0),x&&x(ae,"toggle"))},ie=ae=>{ae.type==="mouseenter"&&y&&y(ae),ae.type==="focus"&&g&&g(ae),$.clear(),M||$.start(0,()=>{k(!0),x&&x(ae,{focus:"focus",mouseenter:"mouseEnter"}[ae.type])})},pe=o.replace(/^[^a-z]+|[^\w:.-]+/gi,""),ue=N.Children.toArray(c).filter(ae=>N.isValidElement(ae)),le=ue.map((ae,_e)=>{const ye=ae.props,{FabProps:{ref:Ae}={},tooltipPlacement:Oe}=ye,Be=rt(ye.FabProps,TOe),ce=Oe||(sx(u)==="vertical"?"left":"top");return N.cloneElement(ae,{FabProps:z({},Be,{ref:j(_e,Ae)}),delay:30*(M?_e:ue.length-_e),open:M,tooltipPlacement:ce,id:`${pe}-action-${_e}`})});return H.jsxs(POe,z({className:Fe(B.root,l),ref:n,role:"presentation",onKeyDown:Q,onBlur:se,onFocus:ie,onMouseEnter:ie,onMouseLeave:se,ownerState:O},A,{children:[H.jsx(P,z({in:!d,timeout:_,unmountOnExit:!0},I,{children:H.jsx(COe,z({color:"primary","aria-label":o,"aria-haspopup":"true","aria-expanded":M,"aria-controls":`${pe}-actions`},C,{onClick:Z,className:Fe(B.fab,C.className),ref:G,ownerState:O,children:N.isValidElement(h)&&Dd(h,["SpeedDialIcon"])?N.cloneElement(h,{open:M}):h}))})),H.jsx(MOe,{id:`${pe}-actions`,role:"menu","aria-orientation":sx(u),className:Fe(B.actions,!M&&B.actionsClosed),ownerState:O,children:le})]}))});function MX(t){return xt("MuiTooltip",t)}const Rd=wt("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),ROe=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function kOe(t){return Math.round(t*1e5)/1e5}const OOe=t=>{const{classes:e,disableInteractive:n,arrow:r,touch:i,placement:s}=t,o={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch",`tooltipPlacement${qe(s.split("-")[0])}`],arrow:["arrow"]};return _t(o,MX,e)},NOe=Ue(__,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.popper,!n.disableInteractive&&e.popperInteractive,n.arrow&&e.popperArrow,!n.open&&e.popperClose]}})(({theme:t,ownerState:e,open:n})=>z({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none"},!e.disableInteractive&&{pointerEvents:"auto"},!n&&{pointerEvents:"none"},e.arrow&&{[`&[data-popper-placement*="bottom"] .${Rd.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${Rd.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${Rd.arrow}`]:z({},e.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${Rd.arrow}`]:z({},e.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),LOe=Ue("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.tooltip,n.touch&&e.touch,n.arrow&&e.tooltipArrow,e[`tooltipPlacement${qe(n.placement.split("-")[0])}`]]}})(({theme:t,ownerState:e})=>z({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:pt.alpha(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium},e.arrow&&{position:"relative",margin:0},e.touch&&{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${kOe(16/14)}em`,fontWeight:t.typography.fontWeightRegular},{[`.${Rd.popper}[data-popper-placement*="left"] &`]:z({transformOrigin:"right center"},e.isRtl?z({marginLeft:"14px"},e.touch&&{marginLeft:"24px"}):z({marginRight:"14px"},e.touch&&{marginRight:"24px"})),[`.${Rd.popper}[data-popper-placement*="right"] &`]:z({transformOrigin:"left center"},e.isRtl?z({marginRight:"14px"},e.touch&&{marginRight:"24px"}):z({marginLeft:"14px"},e.touch&&{marginLeft:"24px"})),[`.${Rd.popper}[data-popper-placement*="top"] &`]:z({transformOrigin:"center bottom",marginBottom:"14px"},e.touch&&{marginBottom:"24px"}),[`.${Rd.popper}[data-popper-placement*="bottom"] &`]:z({transformOrigin:"center top",marginTop:"14px"},e.touch&&{marginTop:"24px"})})),DOe=Ue("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(t,e)=>e.arrow})(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:pt.alpha(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let dT=!1;const cU=new b_;let ox={x:0,y:0};function fT(t,e){return(n,...r)=>{e&&e(n,...r),t(n,...r)}}const AX=N.forwardRef(function(e,n){var r,i,s,o,a,c,l,u,d,h,f,p,g,m,y,b,x,S,P;const _=Et({props:e,name:"MuiTooltip"}),{arrow:I=!1,children:C,components:A={},componentsProps:M={},describeChild:k=!1,disableFocusListener:O=!1,disableHoverListener:B=!1,disableInteractive:$=!1,disableTouchListener:U=!1,enterDelay:q=100,enterNextDelay:K=0,enterTouchDelay:V=700,followCursor:G=!1,id:j,leaveDelay:Q=0,leaveTouchDelay:se=1500,onClose:Z,onOpen:ie,open:pe,placement:ue="bottom",PopperComponent:le,PopperProps:ae={},slotProps:_e={},slots:ye={},title:Ae,TransitionComponent:Oe=nv,TransitionProps:Be}=_,ce=rt(_,ROe),Ge=N.isValidElement(C)?C:H.jsx("span",{children:C}),Pe=$s(),He=mu(),[Re,je]=N.useState(),[te,ee]=N.useState(null),X=N.useRef(!1),we=$||G,Ne=Ad(),We=Ad(),xe=Ad(),Ve=Ad(),[be,ge]=ta({controlled:pe,default:!1,name:"Tooltip",state:"open"});let Se=be;const Ie=_c(j),me=N.useRef(),Ee=Yr(()=>{me.current!==void 0&&(document.body.style.WebkitUserSelect=me.current,me.current=void 0),Ve.clear()});N.useEffect(()=>Ee,[Ee]);const oe=Vt=>{cU.clear(),dT=!0,ge(!0),ie&&!Se&&ie(Vt)},ne=Yr(Vt=>{cU.start(800+Q,()=>{dT=!1}),ge(!1),Z&&Se&&Z(Vt),Ne.start(Pe.transitions.duration.shortest,()=>{X.current=!1})}),de=Vt=>{X.current&&Vt.type!=="touchstart"||(Re&&Re.removeAttribute("title"),We.clear(),xe.clear(),q||dT&&K?We.start(dT?K:q,()=>{oe(Vt)}):oe(Vt))},Te=Vt=>{We.clear(),xe.start(Q,()=>{ne(Vt)})},{isFocusVisibleRef:ke,onBlur:he,onFocus:Xe,ref:$e}=Ev(),[,Qe]=N.useState(!1),ut=Vt=>{he(Vt),ke.current===!1&&(Qe(!1),Te(Vt))},gt=Vt=>{Re||je(Vt.currentTarget),Xe(Vt),ke.current===!0&&(Qe(!0),de(Vt))},Tt=Vt=>{X.current=!0;const Tn=Ge.props;Tn.onTouchStart&&Tn.onTouchStart(Vt)},Kt=Vt=>{Tt(Vt),xe.clear(),Ne.clear(),Ee(),me.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Ve.start(V,()=>{document.body.style.WebkitUserSelect=me.current,de(Vt)})},Zt=Vt=>{Ge.props.onTouchEnd&&Ge.props.onTouchEnd(Vt),Ee(),xe.start(se,()=>{ne(Vt)})};N.useEffect(()=>{if(!Se)return;function Vt(Tn){(Tn.key==="Escape"||Tn.key==="Esc")&&ne(Tn)}return document.addEventListener("keydown",Vt),()=>{document.removeEventListener("keydown",Vt)}},[ne,Se]);const Bt=or(Zd(Ge),$e,je,n);!Ae&&Ae!==0&&(Se=!1);const _n=N.useRef(),hn=Vt=>{const Tn=Ge.props;Tn.onMouseMove&&Tn.onMouseMove(Vt),ox={x:Vt.clientX,y:Vt.clientY},_n.current&&_n.current.update()},bn={},Wn=typeof Ae=="string";k?(bn.title=!Se&&Wn&&!B?Ae:null,bn["aria-describedby"]=Se?Ie:null):(bn["aria-label"]=Wn?Ae:null,bn["aria-labelledby"]=Se&&!Wn?Ie:null);const Un=z({},bn,ce,Ge.props,{className:Fe(ce.className,Ge.props.className),onTouchStart:Tt,ref:Bt},G?{onMouseMove:hn}:{}),Jn={};U||(Un.onTouchStart=Kt,Un.onTouchEnd=Zt),B||(Un.onMouseOver=fT(de,Un.onMouseOver),Un.onMouseLeave=fT(Te,Un.onMouseLeave),we||(Jn.onMouseOver=de,Jn.onMouseLeave=Te)),O||(Un.onFocus=fT(gt,Un.onFocus),Un.onBlur=fT(ut,Un.onBlur),we||(Jn.onFocus=gt,Jn.onBlur=ut));const ci=N.useMemo(()=>{var Vt;let Tn=[{name:"arrow",enabled:!!te,options:{element:te,padding:4}}];return(Vt=ae.popperOptions)!=null&&Vt.modifiers&&(Tn=Tn.concat(ae.popperOptions.modifiers)),z({},ae.popperOptions,{modifiers:Tn})},[te,ae]),fr=z({},_,{isRtl:He,arrow:I,disableInteractive:we,placement:ue,PopperComponentProp:le,touch:X.current}),Ur=OOe(fr),Zr=(r=(i=ye.popper)!=null?i:A.Popper)!=null?r:NOe,jr=(s=(o=(a=ye.transition)!=null?a:A.Transition)!=null?o:Oe)!=null?s:nv,Pi=(c=(l=ye.tooltip)!=null?l:A.Tooltip)!=null?c:LOe,at=(u=(d=ye.arrow)!=null?d:A.Arrow)!=null?u:DOe,Je=vy(Zr,z({},ae,(h=_e.popper)!=null?h:M.popper,{className:Fe(Ur.popper,ae==null?void 0:ae.className,(f=(p=_e.popper)!=null?p:M.popper)==null?void 0:f.className)}),fr),At=vy(jr,z({},Be,(g=_e.transition)!=null?g:M.transition),fr),Ht=vy(Pi,z({},(m=_e.tooltip)!=null?m:M.tooltip,{className:Fe(Ur.tooltip,(y=(b=_e.tooltip)!=null?b:M.tooltip)==null?void 0:y.className)}),fr),nn=vy(at,z({},(x=_e.arrow)!=null?x:M.arrow,{className:Fe(Ur.arrow,(S=(P=_e.arrow)!=null?P:M.arrow)==null?void 0:S.className)}),fr);return H.jsxs(N.Fragment,{children:[N.cloneElement(Ge,Un),H.jsx(Zr,z({as:le??__,placement:ue,anchorEl:G?{getBoundingClientRect:()=>({top:ox.y,left:ox.x,right:ox.x,bottom:ox.y,width:0,height:0})}:Re,popperRef:_n,open:Re?Se:!1,id:Ie,transition:!0},Jn,Je,{popperOptions:ci,children:({TransitionProps:Vt})=>H.jsx(jr,z({timeout:Pe.transitions.duration.shorter},Vt,At,{children:H.jsxs(Pi,z({},Ht,{children:[Ae,I?H.jsx(at,z({},nn,{ref:ee})):null]}))}))}))]})});function RX(t){return xt("MuiSpeedDialAction",t)}const kX=wt("MuiSpeedDialAction",["fab","fabClosed","staticTooltip","staticTooltipClosed","staticTooltipLabel","tooltipPlacementLeft","tooltipPlacementRight"]),BOe=["className","delay","FabProps","icon","id","open","TooltipClasses","tooltipOpen","tooltipPlacement","tooltipTitle"],FOe=t=>{const{open:e,tooltipPlacement:n,classes:r}=t,i={fab:["fab",!e&&"fabClosed"],staticTooltip:["staticTooltip",`tooltipPlacement${qe(n)}`,!e&&"staticTooltipClosed"],staticTooltipLabel:["staticTooltipLabel"]};return _t(i,RX,r)},UOe=Ue(I4,{name:"MuiSpeedDialAction",slot:"Fab",skipVariantsResolver:!1,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.fab,!n.open&&e.fabClosed]}})(({theme:t,ownerState:e})=>z({margin:8,color:(t.vars||t).palette.text.secondary,backgroundColor:(t.vars||t).palette.background.paper,"&:hover":{backgroundColor:t.vars?t.vars.palette.SpeedDialAction.fabHoverBg:pt.emphasize(t.palette.background.paper,.15)},transition:`${t.transitions.create("transform",{duration:t.transitions.duration.shorter})}, opacity 0.8s`,opacity:1},!e.open&&{opacity:0,transform:"scale(0)"})),$Oe=Ue("span",{name:"MuiSpeedDialAction",slot:"StaticTooltip",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.staticTooltip,!n.open&&e.staticTooltipClosed,e[`tooltipPlacement${qe(n.tooltipPlacement)}`]]}})(({theme:t,ownerState:e})=>({position:"relative",display:"flex",alignItems:"center",[`& .${kX.staticTooltipLabel}`]:z({transition:t.transitions.create(["transform","opacity"],{duration:t.transitions.duration.shorter}),opacity:1},!e.open&&{opacity:0,transform:"scale(0.5)"},e.tooltipPlacement==="left"&&{transformOrigin:"100% 50%",right:"100%",marginRight:8},e.tooltipPlacement==="right"&&{transformOrigin:"0% 50%",left:"100%",marginLeft:8})})),zOe=Ue("span",{name:"MuiSpeedDialAction",slot:"StaticTooltipLabel",overridesResolver:(t,e)=>e.staticTooltipLabel})(({theme:t})=>z({position:"absolute"},t.typography.body1,{backgroundColor:(t.vars||t).palette.background.paper,borderRadius:(t.vars||t).shape.borderRadius,boxShadow:(t.vars||t).shadows[1],color:(t.vars||t).palette.text.secondary,padding:"4px 16px",wordBreak:"keep-all"})),HOe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiSpeedDialAction"}),{className:i,delay:s=0,FabProps:o={},icon:a,id:c,open:l,TooltipClasses:u,tooltipOpen:d=!1,tooltipPlacement:h="left",tooltipTitle:f}=r,p=rt(r,BOe),g=z({},r,{tooltipPlacement:h}),m=FOe(g),[y,b]=N.useState(d),x=()=>{b(!1)},S=()=>{b(!0)},P={transitionDelay:`${s}ms`},_=H.jsx(UOe,z({size:"small",className:Fe(m.fab,i),tabIndex:-1,role:"menuitem",ownerState:g},o,{style:z({},P,o.style),children:a}));return d?H.jsxs($Oe,z({id:c,ref:n,className:m.staticTooltip,ownerState:g},p,{children:[H.jsx(zOe,{style:P,id:`${c}-label`,className:m.staticTooltipLabel,ownerState:g,children:f}),N.cloneElement(_,{"aria-labelledby":`${c}-label`})]})):(!l&&y&&b(!1),H.jsx(AX,z({id:c,ref:n,title:f,placement:h,onClose:x,onOpen:S,open:l&&y,classes:u},p,{children:_})))}),VOe=Wr(H.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");function OX(t){return xt("MuiSpeedDialIcon",t)}const qf=wt("MuiSpeedDialIcon",["root","icon","iconOpen","iconWithOpenIconOpen","openIcon","openIconOpen"]),WOe=["className","icon","open","openIcon"],jOe=t=>{const{classes:e,open:n,openIcon:r}=t;return _t({root:["root"],icon:["icon",n&&"iconOpen",r&&n&&"iconWithOpenIconOpen"],openIcon:["openIcon",n&&"openIconOpen"]},OX,e)},qOe=Ue("span",{name:"MuiSpeedDialIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${qf.icon}`]:e.icon},{[`& .${qf.icon}`]:n.open&&e.iconOpen},{[`& .${qf.icon}`]:n.open&&n.openIcon&&e.iconWithOpenIconOpen},{[`& .${qf.openIcon}`]:e.openIcon},{[`& .${qf.openIcon}`]:n.open&&e.openIconOpen},e.root]}})(({theme:t,ownerState:e})=>({height:24,[`& .${qf.icon}`]:z({transition:t.transitions.create(["transform","opacity"],{duration:t.transitions.duration.short})},e.open&&z({transform:"rotate(45deg)"},e.openIcon&&{opacity:0})),[`& .${qf.openIcon}`]:z({position:"absolute",transition:t.transitions.create(["transform","opacity"],{duration:t.transitions.duration.short}),opacity:0,transform:"rotate(-45deg)"},e.open&&{transform:"rotate(0deg)",opacity:1})})),NX=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiSpeedDialIcon"}),{className:i,icon:s,openIcon:o}=r,a=rt(r,WOe),c=r,l=jOe(c);function u(d,h){return N.isValidElement(d)?N.cloneElement(d,{className:h}):d}return H.jsxs(qOe,z({className:Fe(l.root,i),ref:n,ownerState:c},a,{children:[o?u(o,l.openIcon):null,s?u(s,l.icon):H.jsx(VOe,{className:l.icon})]}))});NX.muiName="SpeedDialIcon";const mh=N.createContext({});function KOe(){return N.useContext(mh)}const Wm=N.createContext({});function GOe(){return N.useContext(Wm)}function LX(t){return xt("MuiStep",t)}const XOe=wt("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]),YOe=["active","children","className","component","completed","disabled","expanded","index","last"],ZOe=t=>{const{classes:e,orientation:n,alternativeLabel:r,completed:i}=t;return _t({root:["root",n,r&&"alternativeLabel",i&&"completed"]},LX,e)},JOe=Ue("div",{name:"MuiStep",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],n.alternativeLabel&&e.alternativeLabel,n.completed&&e.completed]}})(({ownerState:t})=>z({},t.orientation==="horizontal"&&{paddingLeft:8,paddingRight:8},t.alternativeLabel&&{flex:1,position:"relative"})),QOe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiStep"}),{active:i,children:s,className:o,component:a="div",completed:c,disabled:l,expanded:u=!1,index:d,last:h}=r,f=rt(r,YOe),{activeStep:p,connector:g,alternativeLabel:m,orientation:y,nonLinear:b}=N.useContext(mh);let[x=!1,S=!1,P=!1]=[i,c,l];p===d?x=i!==void 0?i:!0:!b&&p>d?S=c!==void 0?c:!0:!b&&p<d&&(P=l!==void 0?l:!0);const _=N.useMemo(()=>({index:d,last:h,expanded:u,icon:d+1,active:x,completed:S,disabled:P}),[d,h,u,x,S,P]),I=z({},r,{active:x,orientation:y,alternativeLabel:m,completed:S,disabled:P,expanded:u,component:a}),C=ZOe(I),A=H.jsxs(JOe,z({as:a,className:Fe(C.root,o),ref:n,ownerState:I},f,{children:[g&&m&&d!==0?g:null,s]}));return H.jsx(Wm.Provider,{value:_,children:g&&!m&&d!==0?H.jsxs(N.Fragment,{children:[g,A]}):A})}),e4e=Wr(H.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),t4e=Wr(H.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");function DX(t){return xt("MuiStepIcon",t)}const FT=wt("MuiStepIcon",["root","active","completed","error","text"]);var uU;const n4e=["active","className","completed","error","icon"],r4e=t=>{const{classes:e,active:n,completed:r,error:i}=t;return _t({root:["root",n&&"active",r&&"completed",i&&"error"],text:["text"]},DX,e)},VA=Ue(Rw,{name:"MuiStepIcon",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({display:"block",transition:t.transitions.create("color",{duration:t.transitions.duration.shortest}),color:(t.vars||t).palette.text.disabled,[`&.${FT.completed}`]:{color:(t.vars||t).palette.primary.main},[`&.${FT.active}`]:{color:(t.vars||t).palette.primary.main},[`&.${FT.error}`]:{color:(t.vars||t).palette.error.main}})),i4e=Ue("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(t,e)=>e.text})(({theme:t})=>({fill:(t.vars||t).palette.primary.contrastText,fontSize:t.typography.caption.fontSize,fontFamily:t.typography.fontFamily})),BX=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiStepIcon"}),{active:i=!1,className:s,completed:o=!1,error:a=!1,icon:c}=r,l=rt(r,n4e),u=z({},r,{active:i,completed:o,error:a}),d=r4e(u);if(typeof c=="number"||typeof c=="string"){const h=Fe(s,d.root);return a?H.jsx(VA,z({as:t4e,className:h,ref:n,ownerState:u},l)):o?H.jsx(VA,z({as:e4e,className:h,ref:n,ownerState:u},l)):H.jsxs(VA,z({className:h,ref:n,ownerState:u},l,{children:[uU||(uU=H.jsx("circle",{cx:"12",cy:"12",r:"12"})),H.jsx(i4e,{className:d.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:u,children:c})]}))}return c});function FX(t){return xt("MuiStepLabel",t)}const kd=wt("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),s4e=["children","className","componentsProps","error","icon","optional","slotProps","StepIconComponent","StepIconProps"],o4e=t=>{const{classes:e,orientation:n,active:r,completed:i,error:s,disabled:o,alternativeLabel:a}=t;return _t({root:["root",n,s&&"error",o&&"disabled",a&&"alternativeLabel"],label:["label",r&&"active",i&&"completed",s&&"error",o&&"disabled",a&&"alternativeLabel"],iconContainer:["iconContainer",r&&"active",i&&"completed",s&&"error",o&&"disabled",a&&"alternativeLabel"],labelContainer:["labelContainer",a&&"alternativeLabel"]},FX,e)},a4e=Ue("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation]]}})(({ownerState:t})=>z({display:"flex",alignItems:"center",[`&.${kd.alternativeLabel}`]:{flexDirection:"column"},[`&.${kd.disabled}`]:{cursor:"default"}},t.orientation==="vertical"&&{textAlign:"left",padding:"8px 0"})),l4e=Ue("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(t,e)=>e.label})(({theme:t})=>z({},t.typography.body2,{display:"block",transition:t.transitions.create("color",{duration:t.transitions.duration.shortest}),[`&.${kd.active}`]:{color:(t.vars||t).palette.text.primary,fontWeight:500},[`&.${kd.completed}`]:{color:(t.vars||t).palette.text.primary,fontWeight:500},[`&.${kd.alternativeLabel}`]:{marginTop:16},[`&.${kd.error}`]:{color:(t.vars||t).palette.error.main}})),c4e=Ue("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(t,e)=>e.iconContainer})(()=>({flexShrink:0,display:"flex",paddingRight:8,[`&.${kd.alternativeLabel}`]:{paddingRight:0}})),u4e=Ue("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(t,e)=>e.labelContainer})(({theme:t})=>({width:"100%",color:(t.vars||t).palette.text.secondary,[`&.${kd.alternativeLabel}`]:{textAlign:"center"}})),O4=N.forwardRef(function(e,n){var r;const i=Et({props:e,name:"MuiStepLabel"}),{children:s,className:o,componentsProps:a={},error:c=!1,icon:l,optional:u,slotProps:d={},StepIconComponent:h,StepIconProps:f}=i,p=rt(i,s4e),{alternativeLabel:g,orientation:m}=N.useContext(mh),{active:y,disabled:b,completed:x,icon:S}=N.useContext(Wm),P=l||S;let _=h;P&&!_&&(_=BX);const I=z({},i,{active:y,alternativeLabel:g,completed:x,disabled:b,error:c,orientation:m}),C=o4e(I),A=(r=d.label)!=null?r:a.label;return H.jsxs(a4e,z({className:Fe(C.root,o),ref:n,ownerState:I},p,{children:[P||_?H.jsx(c4e,{className:C.iconContainer,ownerState:I,children:H.jsx(_,z({completed:x,active:y,error:c,icon:P},f))}):null,H.jsxs(u4e,{className:C.labelContainer,ownerState:I,children:[s?H.jsx(l4e,z({ownerState:I},A,{className:Fe(C.label,A==null?void 0:A.className),children:s})):null,u]})]}))});O4.muiName="StepLabel";function UX(t){return xt("MuiStepButton",t)}const Nk=wt("MuiStepButton",["root","horizontal","vertical","touchRipple"]),d4e=["children","className","icon","optional"],f4e=t=>{const{classes:e,orientation:n}=t;return _t({root:["root",n],touchRipple:["touchRipple"]},UX,e)},h4e=Ue(Yi,{name:"MuiStepButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${Nk.touchRipple}`]:e.touchRipple},e.root,e[n.orientation]]}})(({ownerState:t})=>z({width:"100%",padding:"24px 16px",margin:"-24px -16px",boxSizing:"content-box"},t.orientation==="vertical"&&{justifyContent:"flex-start",padding:"8px",margin:"-8px"},{[`& .${Nk.touchRipple}`]:{color:"rgba(0, 0, 0, 0.3)"}})),p4e=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiStepButton"}),{children:i,className:s,icon:o,optional:a}=r,c=rt(r,d4e),{disabled:l,active:u}=N.useContext(Wm),{orientation:d}=N.useContext(mh),h=z({},r,{orientation:d}),f=f4e(h),p={icon:o,optional:a},g=Dd(i,["StepLabel"])?N.cloneElement(i,p):H.jsx(O4,z({},p,{children:i}));return H.jsx(h4e,z({focusRipple:!0,disabled:l,TouchRippleProps:{className:f.touchRipple},className:Fe(f.root,s),ref:n,ownerState:h,"aria-current":u?"step":void 0},c,{children:g}))});function $X(t){return xt("MuiStepConnector",t)}const m4e=wt("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]),g4e=["className"],y4e=t=>{const{classes:e,orientation:n,alternativeLabel:r,active:i,completed:s,disabled:o}=t,a={root:["root",n,r&&"alternativeLabel",i&&"active",s&&"completed",o&&"disabled"],line:["line",`line${qe(n)}`]};return _t(a,$X,e)},v4e=Ue("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],n.alternativeLabel&&e.alternativeLabel,n.completed&&e.completed]}})(({ownerState:t})=>z({flex:"1 1 auto"},t.orientation==="vertical"&&{marginLeft:12},t.alternativeLabel&&{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})),b4e=Ue("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.line,e[`line${qe(n.orientation)}`]]}})(({ownerState:t,theme:e})=>{const n=e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[600];return z({display:"block",borderColor:e.vars?e.vars.palette.StepConnector.border:n},t.orientation==="horizontal"&&{borderTopStyle:"solid",borderTopWidth:1},t.orientation==="vertical"&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})}),zX=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiStepConnector"}),{className:i}=r,s=rt(r,g4e),{alternativeLabel:o,orientation:a="horizontal"}=N.useContext(mh),{active:c,disabled:l,completed:u}=N.useContext(Wm),d=z({},r,{alternativeLabel:o,orientation:a,active:c,completed:u,disabled:l}),h=y4e(d);return H.jsx(v4e,z({className:Fe(h.root,i),ref:n,ownerState:d},s,{children:H.jsx(b4e,{className:h.line,ownerState:d})}))});function HX(t){return xt("MuiStepContent",t)}const x4e=wt("MuiStepContent",["root","last","transition"]),w4e=["children","className","TransitionComponent","transitionDuration","TransitionProps"],_4e=t=>{const{classes:e,last:n}=t;return _t({root:["root",n&&"last"],transition:["transition"]},HX,e)},S4e=Ue("div",{name:"MuiStepContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.last&&e.last]}})(({ownerState:t,theme:e})=>z({marginLeft:12,paddingLeft:20,paddingRight:8,borderLeft:e.vars?`1px solid ${e.vars.palette.StepContent.border}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[600]}`},t.last&&{borderLeft:"none"})),E4e=Ue(w_,{name:"MuiStepContent",slot:"Transition",overridesResolver:(t,e)=>e.transition})({}),T4e=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiStepContent"}),{children:i,className:s,TransitionComponent:o=w_,transitionDuration:a="auto",TransitionProps:c}=r,l=rt(r,w4e),{orientation:u}=N.useContext(mh),{active:d,last:h,expanded:f}=N.useContext(Wm),p=z({},r,{last:h}),g=_4e(p);let m=a;return a==="auto"&&!o.muiSupportAuto&&(m=void 0),H.jsx(S4e,z({className:Fe(g.root,s),ref:n,ownerState:p},l,{children:H.jsx(E4e,z({as:o,in:d||f,className:g.transition,ownerState:p,timeout:m,unmountOnExit:!0},c,{children:i}))}))});function VX(t){return xt("MuiStepper",t)}const I4e=wt("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]),P4e=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],C4e=t=>{const{orientation:e,nonLinear:n,alternativeLabel:r,classes:i}=t;return _t({root:["root",e,n&&"nonLinear",r&&"alternativeLabel"]},VX,i)},M4e=Ue("div",{name:"MuiStepper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],n.alternativeLabel&&e.alternativeLabel,n.nonLinear&&e.nonLinear]}})(({ownerState:t})=>z({display:"flex"},t.orientation==="horizontal"&&{flexDirection:"row",alignItems:"center"},t.orientation==="vertical"&&{flexDirection:"column"},t.alternativeLabel&&{alignItems:"flex-start"})),A4e=H.jsx(zX,{}),R4e=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiStepper"}),{activeStep:i=0,alternativeLabel:s=!1,children:o,className:a,component:c="div",connector:l=A4e,nonLinear:u=!1,orientation:d="horizontal"}=r,h=rt(r,P4e),f=z({},r,{nonLinear:u,alternativeLabel:s,orientation:d,component:c}),p=C4e(f),g=N.Children.toArray(o).filter(Boolean),m=g.map((b,x)=>N.cloneElement(b,z({index:x,last:x+1===g.length},b.props))),y=N.useMemo(()=>({activeStep:i,alternativeLabel:s,connector:l,nonLinear:u,orientation:d}),[i,s,l,u,d]);return H.jsx(mh.Provider,{value:y,children:H.jsx(M4e,z({as:c,ownerState:f,className:Fe(p.root,a),ref:n},h,{children:m}))})}),k4e=["anchor","classes","className","width","style"],O4e=Ue("div",{shouldForwardProp:Bi})(({theme:t,ownerState:e})=>z({position:"fixed",top:0,left:0,bottom:0,zIndex:t.zIndex.drawer-1},e.anchor==="left"&&{right:"auto"},e.anchor==="right"&&{left:"auto",right:0},e.anchor==="top"&&{bottom:"auto",right:0},e.anchor==="bottom"&&{top:"auto",bottom:0,right:0})),N4e=N.forwardRef(function(e,n){const{anchor:r,classes:i={},className:s,width:o,style:a}=e,c=rt(e,k4e),l=e;return H.jsx(O4e,z({className:Fe("PrivateSwipeArea-root",i.root,i[`anchor${qe(r)}`],s),ref:n,style:z({[um(r)?"width":"height"]:o},a),ownerState:l},c))}),L4e=["BackdropProps"],D4e=["anchor","disableBackdropTransition","disableDiscovery","disableSwipeToOpen","hideBackdrop","hysteresis","allowSwipeInChildren","minFlingVelocity","ModalProps","onClose","onOpen","open","PaperProps","SwipeAreaProps","swipeAreaWidth","transitionDuration","variant"],hT=3,dU=20;let pd=null;function WA(t,e,n){return t==="right"?n.body.offsetWidth-e[0].pageX:e[0].pageX}function jA(t,e,n){return t==="bottom"?n.innerHeight-e[0].clientY:e[0].clientY}function ax(t,e){return t?e.clientWidth:e.clientHeight}function fU(t,e,n,r){return Math.min(Math.max(n?e-t:r+e-t,0),r)}function B4e(t,e){const n=[];for(;t&&t!==e.parentElement;){const r=so(e).getComputedStyle(t);r.getPropertyValue("position")==="absolute"||r.getPropertyValue("overflow-x")==="hidden"||(t.clientWidth>0&&t.scrollWidth>t.clientWidth||t.clientHeight>0&&t.scrollHeight>t.clientHeight)&&n.push(t),t=t.parentElement}return n}function F4e({domTreeShapes:t,start:e,current:n,anchor:r}){const i={scrollPosition:{x:"scrollLeft",y:"scrollTop"},scrollLength:{x:"scrollWidth",y:"scrollHeight"},clientLength:{x:"clientWidth",y:"clientHeight"}};return t.some(s=>{let o=n>=e;(r==="top"||r==="left")&&(o=!o);const a=r==="left"||r==="right"?"x":"y",c=Math.round(s[i.scrollPosition[a]]),l=c>0,u=c+s[i.clientLength[a]]<s[i.scrollLength[a]];return!!(o&&u||!o&&l)})}const U4e=typeof navigator<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent),$4e=N.forwardRef(function(e,n){const r=Et({name:"MuiSwipeableDrawer",props:e}),i=$s(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:o="left",disableBackdropTransition:a=!1,disableDiscovery:c=!1,disableSwipeToOpen:l=U4e,hideBackdrop:u,hysteresis:d=.52,allowSwipeInChildren:h=!1,minFlingVelocity:f=450,ModalProps:{BackdropProps:p}={},onClose:g,onOpen:m,open:y=!1,PaperProps:b={},SwipeAreaProps:x,swipeAreaWidth:S=20,transitionDuration:P=s,variant:_="temporary"}=r,I=rt(r.ModalProps,L4e),C=rt(r,D4e),[A,M]=N.useState(!1),k=N.useRef({isSwiping:null}),O=N.useRef(),B=N.useRef(),$=N.useRef(),U=or(b.ref,$),q=N.useRef(!1),K=N.useRef();fs(()=>{K.current=null},[y]);const V=N.useCallback((Z,ie={})=>{const{mode:pe=null,changeTransition:ue=!0}=ie,le=Ix(i,o),ae=["right","bottom"].indexOf(le)!==-1?1:-1,_e=um(o),ye=_e?`translate(${ae*Z}px, 0)`:`translate(0, ${ae*Z}px)`,Ae=$.current.style;Ae.webkitTransform=ye,Ae.transform=ye;let Oe="";if(pe&&(Oe=i.transitions.create("all",Sc({easing:void 0,style:void 0,timeout:P},{mode:pe}))),ue&&(Ae.webkitTransition=Oe,Ae.transition=Oe),!a&&!u){const Be=B.current.style;Be.opacity=1-Z/ax(_e,$.current),ue&&(Be.webkitTransition=Oe,Be.transition=Oe)}},[o,a,u,i,P]),G=Yr(Z=>{if(!q.current)return;if(pd=null,q.current=!1,tw.flushSync(()=>{M(!1)}),!k.current.isSwiping){k.current.isSwiping=null;return}k.current.isSwiping=null;const ie=Ix(i,o),pe=um(o);let ue;pe?ue=WA(ie,Z.changedTouches,Fr(Z.currentTarget)):ue=jA(ie,Z.changedTouches,so(Z.currentTarget));const le=pe?k.current.startX:k.current.startY,ae=ax(pe,$.current),_e=fU(ue,le,y,ae),ye=_e/ae;if(Math.abs(k.current.velocity)>f&&(K.current=Math.abs((ae-_e)/k.current.velocity)*1e3),y){k.current.velocity>f||ye>d?g():V(0,{mode:"exit"});return}k.current.velocity<-f||1-ye>d?m():V(ax(pe,$.current),{mode:"enter"})}),j=(Z=!1)=>{if(!A){(Z||!(c&&h))&&tw.flushSync(()=>{M(!0)});const ie=um(o);!y&&$.current&&V(ax(ie,$.current)+(c?15:-20),{changeTransition:!1}),k.current.velocity=0,k.current.lastTime=null,k.current.lastTranslate=null,k.current.paperHit=!1,q.current=!0}},Q=Yr(Z=>{if(!$.current||!q.current||pd!==null&&pd!==k.current)return;j(!0);const ie=Ix(i,o),pe=um(o),ue=WA(ie,Z.touches,Fr(Z.currentTarget)),le=jA(ie,Z.touches,so(Z.currentTarget));if(y&&$.current.contains(Z.target)&&pd===null){const Oe=B4e(Z.target,$.current);if(F4e({domTreeShapes:Oe,start:pe?k.current.startX:k.current.startY,current:pe?ue:le,anchor:o})){pd=!0;return}pd=k.current}if(k.current.isSwiping==null){const Oe=Math.abs(ue-k.current.startX),Be=Math.abs(le-k.current.startY),ce=pe?Oe>Be&&Oe>hT:Be>Oe&&Be>hT;if(ce&&Z.cancelable&&Z.preventDefault(),ce===!0||(pe?Be>hT:Oe>hT)){if(k.current.isSwiping=ce,!ce){G(Z);return}k.current.startX=ue,k.current.startY=le,!c&&!y&&(pe?k.current.startX-=dU:k.current.startY-=dU)}}if(!k.current.isSwiping)return;const ae=ax(pe,$.current);let _e=pe?k.current.startX:k.current.startY;y&&!k.current.paperHit&&(_e=Math.min(_e,ae));const ye=fU(pe?ue:le,_e,y,ae);if(y)if(k.current.paperHit)ye===0&&(k.current.startX=ue,k.current.startY=le);else if(pe?ue<ae:le<ae)k.current.paperHit=!0,k.current.startX=ue,k.current.startY=le;else return;k.current.lastTranslate===null&&(k.current.lastTranslate=ye,k.current.lastTime=performance.now()+1);const Ae=(ye-k.current.lastTranslate)/(performance.now()-k.current.lastTime)*1e3;k.current.velocity=k.current.velocity*.4+Ae*.6,k.current.lastTranslate=ye,k.current.lastTime=performance.now(),Z.cancelable&&Z.preventDefault(),V(ye)}),se=Yr(Z=>{if(Z.defaultPrevented||Z.defaultMuiPrevented||y&&(u||!B.current.contains(Z.target))&&!$.current.contains(Z.target))return;const ie=Ix(i,o),pe=um(o),ue=WA(ie,Z.touches,Fr(Z.currentTarget)),le=jA(ie,Z.touches,so(Z.currentTarget));if(!y){var ae;if(l||!(Z.target===O.current||(ae=$.current)!=null&&ae.contains(Z.target)&&(typeof h=="function"?h(Z,O.current,$.current):h)))return;if(pe){if(ue>S)return}else if(le>S)return}Z.defaultMuiPrevented=!0,pd=null,k.current.startX=ue,k.current.startY=le,j()});return N.useEffect(()=>{if(_==="temporary"){const Z=Fr($.current);return Z.addEventListener("touchstart",se),Z.addEventListener("touchmove",Q,{passive:!y}),Z.addEventListener("touchend",G),()=>{Z.removeEventListener("touchstart",se),Z.removeEventListener("touchmove",Q,{passive:!y}),Z.removeEventListener("touchend",G)}}},[_,y,se,Q,G]),N.useEffect(()=>()=>{pd===k.current&&(pd=null)},[]),N.useEffect(()=>{y||M(!1)},[y]),H.jsxs(N.Fragment,{children:[H.jsx(nG,z({open:_==="temporary"&&A?!0:y,variant:_,ModalProps:z({BackdropProps:z({},p,{ref:B})},_==="temporary"&&{keepMounted:!0},I),hideBackdrop:u,PaperProps:z({},b,{style:z({pointerEvents:_==="temporary"&&!y&&!h?"none":""},b.style),ref:U}),anchor:o,transitionDuration:K.current||P,onClose:g,ref:n},C)),!l&&_==="temporary"&&H.jsx(QG,{children:H.jsx(N4e,z({anchor:o,ref:O,width:S},x))})]})});function WX(t){return xt("MuiSwitch",t)}const Qs=wt("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),z4e=["className","color","edge","size","sx"],H4e=t=>{const{classes:e,edge:n,size:r,color:i,checked:s,disabled:o}=t,a={root:["root",n&&`edge${qe(n)}`,`size${qe(r)}`],switchBase:["switchBase",`color${qe(i)}`,s&&"checked",o&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},c=_t(a,WX,e);return z({},e,c)},V4e=Ue("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.edge&&e[`edge${qe(n.edge)}`],e[`size${qe(n.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${Qs.thumb}`]:{width:16,height:16},[`& .${Qs.switchBase}`]:{padding:4,[`&.${Qs.checked}`]:{transform:"translateX(16px)"}}}}]}),W4e=Ue(T4,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.switchBase,{[`& .${Qs.input}`]:e.input},n.color!=="default"&&e[`color${qe(n.color)}`]]}})(({theme:t})=>({position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:`${t.palette.mode==="light"?t.palette.common.white:t.palette.grey[300]}`,transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),[`&.${Qs.checked}`]:{transform:"translateX(20px)"},[`&.${Qs.disabled}`]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:`${t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[600]}`},[`&.${Qs.checked} + .${Qs.track}`]:{opacity:.5},[`&.${Qs.disabled} + .${Qs.track}`]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:`${t.palette.mode==="light"?.12:.2}`},[`& .${Qs.input}`]:{left:"-100%",width:"300%"}}),({theme:t})=>({"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:pt.alpha(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter(([,e])=>e.main&&e.light).map(([e])=>({props:{color:e},style:{[`&.${Qs.checked}`]:{color:(t.vars||t).palette[e].main,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[e].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:pt.alpha(t.palette[e].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Qs.disabled}`]:{color:t.vars?t.vars.palette.Switch[`${e}DisabledColor`]:`${t.palette.mode==="light"?pt.lighten(t.palette[e].main,.62):pt.darken(t.palette[e].main,.55)}`}},[`&.${Qs.checked} + .${Qs.track}`]:{backgroundColor:(t.vars||t).palette[e].main}}}))]})),j4e=Ue("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(t,e)=>e.track})(({theme:t})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:`${t.palette.mode==="light"?t.palette.common.black:t.palette.common.white}`,opacity:t.vars?t.vars.opacity.switchTrack:`${t.palette.mode==="light"?.38:.3}`})),q4e=Ue("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(t,e)=>e.thumb})(({theme:t})=>({boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),K4e=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiSwitch"}),{className:i,color:s="primary",edge:o=!1,size:a="medium",sx:c}=r,l=rt(r,z4e),u=z({},r,{color:s,edge:o,size:a}),d=H4e(u),h=H.jsx(q4e,{className:d.thumb,ownerState:u});return H.jsxs(V4e,{className:Fe(d.root,i),sx:c,ownerState:u,children:[H.jsx(W4e,z({type:"checkbox",icon:h,checkedIcon:h,ref:n,ownerState:u},l,{classes:z({},d,{root:d.switchBase})})),H.jsx(j4e,{className:d.track,ownerState:u})]})});function jX(t){return xt("MuiTab",t)}const xd=wt("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),G4e=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],X4e=t=>{const{classes:e,textColor:n,fullWidth:r,wrapped:i,icon:s,label:o,selected:a,disabled:c}=t,l={root:["root",s&&o&&"labelIcon",`textColor${qe(n)}`,r&&"fullWidth",i&&"wrapped",a&&"selected",c&&"disabled"],iconWrapper:["iconWrapper"]};return _t(l,jX,e)},Y4e=Ue(Yi,{name:"MuiTab",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.label&&n.icon&&e.labelIcon,e[`textColor${qe(n.textColor)}`],n.fullWidth&&e.fullWidth,n.wrapped&&e.wrapped,{[`& .${xd.iconWrapper}`]:e.iconWrapper}]}})(({theme:t,ownerState:e})=>z({},t.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},e.label&&{flexDirection:e.iconPosition==="top"||e.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},e.icon&&e.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${xd.iconWrapper}`]:z({},e.iconPosition==="top"&&{marginBottom:6},e.iconPosition==="bottom"&&{marginTop:6},e.iconPosition==="start"&&{marginRight:t.spacing(1)},e.iconPosition==="end"&&{marginLeft:t.spacing(1)})},e.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${xd.selected}`]:{opacity:1},[`&.${xd.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.textColor==="primary"&&{color:(t.vars||t).palette.text.secondary,[`&.${xd.selected}`]:{color:(t.vars||t).palette.primary.main},[`&.${xd.disabled}`]:{color:(t.vars||t).palette.text.disabled}},e.textColor==="secondary"&&{color:(t.vars||t).palette.text.secondary,[`&.${xd.selected}`]:{color:(t.vars||t).palette.secondary.main},[`&.${xd.disabled}`]:{color:(t.vars||t).palette.text.disabled}},e.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},e.wrapped&&{fontSize:t.typography.pxToRem(12)})),Z4e=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiTab"}),{className:i,disabled:s=!1,disableFocusRipple:o=!1,fullWidth:a,icon:c,iconPosition:l="top",indicator:u,label:d,onChange:h,onClick:f,onFocus:p,selected:g,selectionFollowsFocus:m,textColor:y="inherit",value:b,wrapped:x=!1}=r,S=rt(r,G4e),P=z({},r,{disabled:s,disableFocusRipple:o,selected:g,icon:!!c,iconPosition:l,label:!!d,fullWidth:a,textColor:y,wrapped:x}),_=X4e(P),I=c&&d&&N.isValidElement(c)?N.cloneElement(c,{className:Fe(_.iconWrapper,c.props.className)}):c,C=M=>{!g&&h&&h(M,b),f&&f(M)},A=M=>{m&&!g&&h&&h(M,b),p&&p(M)};return H.jsxs(Y4e,z({focusRipple:!o,className:Fe(_.root,i),ref:n,role:"tab","aria-selected":g,disabled:s,onClick:C,onFocus:A,ownerState:P,tabIndex:g?0:-1},S,{children:[l==="top"||l==="start"?H.jsxs(N.Fragment,{children:[I,d]}):H.jsxs(N.Fragment,{children:[d,I]}),u]}))}),qX=N.createContext();function KX(t){return xt("MuiTable",t)}const J4e=wt("MuiTable",["root","stickyHeader"]),Q4e=["className","component","padding","size","stickyHeader"],eNe=t=>{const{classes:e,stickyHeader:n}=t;return _t({root:["root",n&&"stickyHeader"]},KX,e)},tNe=Ue("table",{name:"MuiTable",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.stickyHeader&&e.stickyHeader]}})(({theme:t,ownerState:e})=>z({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":z({},t.typography.body2,{padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},e.stickyHeader&&{borderCollapse:"separate"})),hU="table",nNe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiTable"}),{className:i,component:s=hU,padding:o="normal",size:a="medium",stickyHeader:c=!1}=r,l=rt(r,Q4e),u=z({},r,{component:s,padding:o,size:a,stickyHeader:c}),d=eNe(u),h=N.useMemo(()=>({padding:o,size:a,stickyHeader:c}),[o,a,c]);return H.jsx(qX.Provider,{value:h,children:H.jsx(tNe,z({as:s,role:s===hU?null:"table",ref:n,className:Fe(d.root,i),ownerState:u},l))})}),T_=N.createContext();function GX(t){return xt("MuiTableBody",t)}const rNe=wt("MuiTableBody",["root"]),iNe=["className","component"],sNe=t=>{const{classes:e}=t;return _t({root:["root"]},GX,e)},oNe=Ue("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"table-row-group"}),aNe={variant:"body"},pU="tbody",lNe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiTableBody"}),{className:i,component:s=pU}=r,o=rt(r,iNe),a=z({},r,{component:s}),c=sNe(a);return H.jsx(T_.Provider,{value:aNe,children:H.jsx(oNe,z({className:Fe(c.root,i),as:s,ref:n,role:s===pU?null:"rowgroup",ownerState:a},o))})});function XX(t){return xt("MuiTableCell",t)}const YX=wt("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),cNe=["align","className","component","padding","scope","size","sortDirection","variant"],uNe=t=>{const{classes:e,variant:n,align:r,padding:i,size:s,stickyHeader:o}=t,a={root:["root",n,o&&"stickyHeader",r!=="inherit"&&`align${qe(r)}`,i!=="normal"&&`padding${qe(i)}`,`size${qe(s)}`]};return _t(a,XX,e)},dNe=Ue("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`size${qe(n.size)}`],n.padding!=="normal"&&e[`padding${qe(n.padding)}`],n.align!=="inherit"&&e[`align${qe(n.align)}`],n.stickyHeader&&e.stickyHeader]}})(({theme:t,ownerState:e})=>z({},t.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?`1px solid ${t.vars.palette.TableCell.border}`:`1px solid
    ${t.palette.mode==="light"?pt.lighten(pt.alpha(t.palette.divider,1),.88):pt.darken(pt.alpha(t.palette.divider,1),.68)}`,textAlign:"left",padding:16},e.variant==="head"&&{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium},e.variant==="body"&&{color:(t.vars||t).palette.text.primary},e.variant==="footer"&&{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)},e.size==="small"&&{padding:"6px 16px",[`&.${YX.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},e.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},e.padding==="none"&&{padding:0},e.align==="left"&&{textAlign:"left"},e.align==="center"&&{textAlign:"center"},e.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},e.align==="justify"&&{textAlign:"justify"},e.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default})),lI=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiTableCell"}),{align:i="inherit",className:s,component:o,padding:a,scope:c,size:l,sortDirection:u,variant:d}=r,h=rt(r,cNe),f=N.useContext(qX),p=N.useContext(T_),g=p&&p.variant==="head";let m;o?m=o:m=g?"th":"td";let y=c;m==="td"?y=void 0:!y&&g&&(y="col");const b=d||p&&p.variant,x=z({},r,{align:i,component:m,padding:a||(f&&f.padding?f.padding:"normal"),size:l||(f&&f.size?f.size:"medium"),sortDirection:u,stickyHeader:b==="head"&&f&&f.stickyHeader,variant:b}),S=uNe(x);let P=null;return u&&(P=u==="asc"?"ascending":"descending"),H.jsx(dNe,z({as:m,ref:n,className:Fe(S.root,s),"aria-sort":P,scope:y,ownerState:x},h))});function ZX(t){return xt("MuiTableContainer",t)}const fNe=wt("MuiTableContainer",["root"]),hNe=["className","component"],pNe=t=>{const{classes:e}=t;return _t({root:["root"]},ZX,e)},mNe=Ue("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(t,e)=>e.root})({width:"100%",overflowX:"auto"}),gNe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiTableContainer"}),{className:i,component:s="div"}=r,o=rt(r,hNe),a=z({},r,{component:s}),c=pNe(a);return H.jsx(mNe,z({ref:n,as:s,className:Fe(c.root,i),ownerState:a},o))});function JX(t){return xt("MuiTableFooter",t)}const yNe=wt("MuiTableFooter",["root"]),vNe=["className","component"],bNe=t=>{const{classes:e}=t;return _t({root:["root"]},JX,e)},xNe=Ue("tfoot",{name:"MuiTableFooter",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"table-footer-group"}),wNe={variant:"footer"},mU="tfoot",_Ne=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiTableFooter"}),{className:i,component:s=mU}=r,o=rt(r,vNe),a=z({},r,{component:s}),c=bNe(a);return H.jsx(T_.Provider,{value:wNe,children:H.jsx(xNe,z({as:s,className:Fe(c.root,i),ref:n,role:s===mU?null:"rowgroup",ownerState:a},o))})});function QX(t){return xt("MuiTableHead",t)}const SNe=wt("MuiTableHead",["root"]),ENe=["className","component"],TNe=t=>{const{classes:e}=t;return _t({root:["root"]},QX,e)},INe=Ue("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"table-header-group"}),PNe={variant:"head"},gU="thead",CNe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiTableHead"}),{className:i,component:s=gU}=r,o=rt(r,ENe),a=z({},r,{component:s}),c=TNe(a);return H.jsx(T_.Provider,{value:PNe,children:H.jsx(INe,z({as:s,className:Fe(c.root,i),ref:n,role:s===gU?null:"rowgroup",ownerState:a},o))})});function eY(t){return xt("MuiToolbar",t)}const MNe=wt("MuiToolbar",["root","gutters","regular","dense"]),ANe=["className","component","disableGutters","variant"],RNe=t=>{const{classes:e,disableGutters:n,variant:r}=t;return _t({root:["root",!n&&"gutters",r]},eY,e)},kNe=Ue("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableGutters&&e.gutters,e[n.variant]]}})(({theme:t,ownerState:e})=>z({position:"relative",display:"flex",alignItems:"center"},!e.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},e.variant==="dense"&&{minHeight:48}),({theme:t,ownerState:e})=>e.variant==="regular"&&t.mixins.toolbar),tY=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiToolbar"}),{className:i,component:s="div",disableGutters:o=!1,variant:a="regular"}=r,c=rt(r,ANe),l=z({},r,{component:s,disableGutters:o,variant:a}),u=RNe(l);return H.jsx(kNe,z({as:s,className:Fe(u.root,i),ref:n,ownerState:l},c))}),nY=Wr(H.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),rY=Wr(H.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight"),ONe=["backIconButtonProps","count","disabled","getItemAriaLabel","nextIconButtonProps","onPageChange","page","rowsPerPage","showFirstButton","showLastButton","slots","slotProps"],NNe=N.forwardRef(function(e,n){var r,i,s,o,a,c,l,u;const{backIconButtonProps:d,count:h,disabled:f=!1,getItemAriaLabel:p,nextIconButtonProps:g,onPageChange:m,page:y,rowsPerPage:b,showFirstButton:x,showLastButton:S,slots:P={},slotProps:_={}}=e,I=rt(e,ONe),C=mu(),A=_e=>{m(_e,0)},M=_e=>{m(_e,y-1)},k=_e=>{m(_e,y+1)},O=_e=>{m(_e,Math.max(0,Math.ceil(h/b)-1))},B=(r=P.firstButton)!=null?r:Zf,$=(i=P.lastButton)!=null?i:Zf,U=(s=P.nextButton)!=null?s:Zf,q=(o=P.previousButton)!=null?o:Zf,K=(a=P.firstButtonIcon)!=null?a:Rk,V=(c=P.lastButtonIcon)!=null?c:kk,G=(l=P.nextButtonIcon)!=null?l:rY,j=(u=P.previousButtonIcon)!=null?u:nY,Q=C?$:B,se=C?U:q,Z=C?q:U,ie=C?B:$,pe=C?_.lastButton:_.firstButton,ue=C?_.nextButton:_.previousButton,le=C?_.previousButton:_.nextButton,ae=C?_.firstButton:_.lastButton;return H.jsxs("div",z({ref:n},I,{children:[x&&H.jsx(Q,z({onClick:A,disabled:f||y===0,"aria-label":p("first",y),title:p("first",y)},pe,{children:C?H.jsx(V,z({},_.lastButtonIcon)):H.jsx(K,z({},_.firstButtonIcon))})),H.jsx(se,z({onClick:M,disabled:f||y===0,color:"inherit","aria-label":p("previous",y),title:p("previous",y)},ue??d,{children:C?H.jsx(G,z({},_.nextButtonIcon)):H.jsx(j,z({},_.previousButtonIcon))})),H.jsx(Z,z({onClick:k,disabled:f||(h!==-1?y>=Math.ceil(h/b)-1:!1),color:"inherit","aria-label":p("next",y),title:p("next",y)},le??g,{children:C?H.jsx(j,z({},_.previousButtonIcon)):H.jsx(G,z({},_.nextButtonIcon))})),S&&H.jsx(ie,z({onClick:O,disabled:f||y>=Math.ceil(h/b)-1,"aria-label":p("last",y),title:p("last",y)},ae,{children:C?H.jsx(K,z({},_.firstButtonIcon)):H.jsx(V,z({},_.lastButtonIcon))}))]}))});function iY(t){return xt("MuiTablePagination",t)}const Ry=wt("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]);var yU;const LNe=["ActionsComponent","backIconButtonProps","className","colSpan","component","count","disabled","getItemAriaLabel","labelDisplayedRows","labelRowsPerPage","nextIconButtonProps","onPageChange","onRowsPerPageChange","page","rowsPerPage","rowsPerPageOptions","SelectProps","showFirstButton","showLastButton","slotProps","slots"],DNe=Ue(lI,{name:"MuiTablePagination",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({overflow:"auto",color:(t.vars||t).palette.text.primary,fontSize:t.typography.pxToRem(14),"&:last-child":{padding:0}})),BNe=Ue(tY,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:(t,e)=>z({[`& .${Ry.actions}`]:e.actions},e.toolbar)})(({theme:t})=>({minHeight:52,paddingRight:2,[`${t.breakpoints.up("xs")} and (orientation: landscape)`]:{minHeight:52},[t.breakpoints.up("sm")]:{minHeight:52,paddingRight:2},[`& .${Ry.actions}`]:{flexShrink:0,marginLeft:20}})),FNe=Ue("div",{name:"MuiTablePagination",slot:"Spacer",overridesResolver:(t,e)=>e.spacer})({flex:"1 1 100%"}),UNe=Ue("p",{name:"MuiTablePagination",slot:"SelectLabel",overridesResolver:(t,e)=>e.selectLabel})(({theme:t})=>z({},t.typography.body2,{flexShrink:0})),$Ne=Ue(GP,{name:"MuiTablePagination",slot:"Select",overridesResolver:(t,e)=>z({[`& .${Ry.selectIcon}`]:e.selectIcon,[`& .${Ry.select}`]:e.select},e.input,e.selectRoot)})({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8,[`& .${Ry.select}`]:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"}}),zNe=Ue(KG,{name:"MuiTablePagination",slot:"MenuItem",overridesResolver:(t,e)=>e.menuItem})({}),HNe=Ue("p",{name:"MuiTablePagination",slot:"DisplayedRows",overridesResolver:(t,e)=>e.displayedRows})(({theme:t})=>z({},t.typography.body2,{flexShrink:0}));function VNe({from:t,to:e,count:n}){return`${t}${e} of ${n!==-1?n:`more than ${e}`}`}function WNe(t){return`Go to ${t} page`}const jNe=t=>{const{classes:e}=t;return _t({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},iY,e)},qNe=N.forwardRef(function(e,n){var r;const i=Et({props:e,name:"MuiTablePagination"}),{ActionsComponent:s=NNe,backIconButtonProps:o,className:a,colSpan:c,component:l=lI,count:u,disabled:d=!1,getItemAriaLabel:h=WNe,labelDisplayedRows:f=VNe,labelRowsPerPage:p="Rows per page:",nextIconButtonProps:g,onPageChange:m,onRowsPerPageChange:y,page:b,rowsPerPage:x,rowsPerPageOptions:S=[10,25,50,100],SelectProps:P={},showFirstButton:_=!1,showLastButton:I=!1,slotProps:C={},slots:A={}}=i,M=rt(i,LNe),k=i,O=jNe(k),B=(r=C==null?void 0:C.select)!=null?r:P,$=B.native?"option":zNe;let U;(l===lI||l==="td")&&(U=c||1e3);const q=_c(B.id),K=_c(B.labelId),V=()=>u===-1?(b+1)*x:x===-1?u:Math.min(u,(b+1)*x);return H.jsx(DNe,z({colSpan:U,ref:n,as:l,ownerState:k,className:Fe(O.root,a)},M,{children:H.jsxs(BNe,{className:O.toolbar,children:[H.jsx(FNe,{className:O.spacer}),S.length>1&&H.jsx(UNe,{className:O.selectLabel,id:K,children:p}),S.length>1&&H.jsx($Ne,z({variant:"standard"},!B.variant&&{input:yU||(yU=H.jsx(S_,{}))},{value:x,onChange:y,id:q,labelId:K},B,{classes:z({},B.classes,{root:Fe(O.input,O.selectRoot,(B.classes||{}).root),select:Fe(O.select,(B.classes||{}).select),icon:Fe(O.selectIcon,(B.classes||{}).icon)}),disabled:d,children:S.map(G=>N.createElement($,z({},!vc($)&&{ownerState:k},{className:O.menuItem,key:G.label?G.label:G,value:G.value?G.value:G}),G.label?G.label:G))})),H.jsx(HNe,{className:O.displayedRows,children:f({from:u===0?0:b*x+1,to:V(),count:u===-1?-1:u,page:b})}),H.jsx(s,{className:O.actions,backIconButtonProps:o,count:u,nextIconButtonProps:g,onPageChange:m,page:b,rowsPerPage:x,showFirstButton:_,showLastButton:I,slotProps:C.actions,slots:A.actions,getItemAriaLabel:h,disabled:d})]})}))});function sY(t){return xt("MuiTableRow",t)}const Lk=wt("MuiTableRow",["root","selected","hover","head","footer"]),KNe=["className","component","hover","selected"],GNe=t=>{const{classes:e,selected:n,hover:r,head:i,footer:s}=t;return _t({root:["root",n&&"selected",r&&"hover",i&&"head",s&&"footer"]},sY,e)},XNe=Ue("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.head&&e.head,n.footer&&e.footer]}})(({theme:t})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${Lk.hover}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${Lk.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:pt.alpha(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:pt.alpha(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)}}})),vU="tr",YNe=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiTableRow"}),{className:i,component:s=vU,hover:o=!1,selected:a=!1}=r,c=rt(r,KNe),l=N.useContext(T_),u=z({},r,{component:s,hover:o,selected:a,head:l&&l.variant==="head",footer:l&&l.variant==="footer"}),d=GNe(u);return H.jsx(XNe,z({as:s,ref:n,className:Fe(d.root,i),role:s===vU?null:"row",ownerState:u},c))}),ZNe=Wr(H.jsx("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");function oY(t){return xt("MuiTableSortLabel",t)}const UT=wt("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc"]),JNe=["active","children","className","direction","hideSortIcon","IconComponent"],QNe=t=>{const{classes:e,direction:n,active:r}=t,i={root:["root",r&&"active"],icon:["icon",`iconDirection${qe(n)}`]};return _t(i,oY,e)},e5e=Ue(Yi,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.active&&e.active]}})(({theme:t})=>({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(t.vars||t).palette.text.secondary},"&:hover":{color:(t.vars||t).palette.text.secondary,[`& .${UT.icon}`]:{opacity:.5}},[`&.${UT.active}`]:{color:(t.vars||t).palette.text.primary,[`& .${UT.icon}`]:{opacity:1,color:(t.vars||t).palette.text.secondary}}})),t5e=Ue("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,e[`iconDirection${qe(n.direction)}`]]}})(({theme:t,ownerState:e})=>z({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:t.transitions.create(["opacity","transform"],{duration:t.transitions.duration.shorter}),userSelect:"none"},e.direction==="desc"&&{transform:"rotate(0deg)"},e.direction==="asc"&&{transform:"rotate(180deg)"})),n5e=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiTableSortLabel"}),{active:i=!1,children:s,className:o,direction:a="asc",hideSortIcon:c=!1,IconComponent:l=ZNe}=r,u=rt(r,JNe),d=z({},r,{active:i,direction:a,hideSortIcon:c,IconComponent:l}),h=QNe(d);return H.jsxs(e5e,z({className:Fe(h.root,o),component:"span",disableRipple:!0,ownerState:d,ref:n},u,{children:[s,c&&!i?null:H.jsx(t5e,{as:l,className:Fe(h.icon),ownerState:d})]}))});function r5e(t){return(1+Math.sin(Math.PI*t-Math.PI/2))/2}function i5e(t,e,n,r={},i=()=>{}){const{ease:s=r5e,duration:o=300}=r;let a=null;const c=e[t];let l=!1;const u=()=>{l=!0},d=h=>{if(l){i(new Error("Animation cancelled"));return}a===null&&(a=h);const f=Math.min(1,(h-a)/o);if(e[t]=s(f)*(n-c)+c,f>=1){requestAnimationFrame(()=>{i(null)});return}requestAnimationFrame(d)};return c===n?(i(new Error("Element already at target position")),u):(requestAnimationFrame(d),u)}const s5e=["onChange"],o5e={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function a5e(t){const{onChange:e}=t,n=rt(t,s5e),r=N.useRef(),i=N.useRef(null),s=()=>{r.current=i.current.offsetHeight-i.current.clientHeight};return fs(()=>{const o=Sv(()=>{const c=r.current;s(),c!==r.current&&e(r.current)}),a=so(i.current);return a.addEventListener("resize",o),()=>{o.clear(),a.removeEventListener("resize",o)}},[e]),N.useEffect(()=>{s(),e(r.current)},[e]),H.jsx("div",z({style:o5e},n,{ref:i}))}function aY(t){return xt("MuiTabScrollButton",t)}const lY=wt("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),l5e=["className","slots","slotProps","direction","orientation","disabled"],c5e=t=>{const{classes:e,orientation:n,disabled:r}=t;return _t({root:["root",n,r&&"disabled"]},aY,e)},u5e=Ue(Yi,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.orientation&&e[n.orientation]]}})(({ownerState:t})=>z({width:40,flexShrink:0,opacity:.8,[`&.${lY.disabled}`]:{opacity:0}},t.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${t.isRtl?-90:90}deg)`}})),cY=N.forwardRef(function(e,n){var r,i;const s=Et({props:e,name:"MuiTabScrollButton"}),{className:o,slots:a={},slotProps:c={},direction:l}=s,u=rt(s,l5e),d=mu(),h=z({isRtl:d},s),f=c5e(h),p=(r=a.StartScrollButtonIcon)!=null?r:nY,g=(i=a.EndScrollButtonIcon)!=null?i:rY,m=mi({elementType:p,externalSlotProps:c.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:h}),y=mi({elementType:g,externalSlotProps:c.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:h});return H.jsx(u5e,z({component:"div",className:Fe(f.root,o),ref:n,role:null,ownerState:h,tabIndex:null},u,{children:l==="left"?H.jsx(p,z({},m)):H.jsx(g,z({},y))}))});function uY(t){return xt("MuiTabs",t)}const $T=wt("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),d5e=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],bU=(t,e)=>t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t.firstChild,xU=(t,e)=>t===e?t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t.lastChild,pT=(t,e,n)=>{let r=!1,i=n(t,e);for(;i;){if(i===t.firstChild){if(r)return;r=!0}const s=i.disabled||i.getAttribute("aria-disabled")==="true";if(!i.hasAttribute("tabindex")||s)i=n(t,i);else{i.focus();return}}},f5e=t=>{const{vertical:e,fixed:n,hideScrollbar:r,scrollableX:i,scrollableY:s,centered:o,scrollButtonsHideMobile:a,classes:c}=t;return _t({root:["root",e&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",i&&"scrollableX",s&&"scrollableY"],flexContainer:["flexContainer",e&&"flexContainerVertical",o&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",a&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]},uY,c)},h5e=Ue("div",{name:"MuiTabs",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${$T.scrollButtons}`]:e.scrollButtons},{[`& .${$T.scrollButtons}`]:n.scrollButtonsHideMobile&&e.scrollButtonsHideMobile},e.root,n.vertical&&e.vertical]}})(({ownerState:t,theme:e})=>z({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},t.vertical&&{flexDirection:"column"},t.scrollButtonsHideMobile&&{[`& .${$T.scrollButtons}`]:{[e.breakpoints.down("sm")]:{display:"none"}}})),p5e=Ue("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.scroller,n.fixed&&e.fixed,n.hideScrollbar&&e.hideScrollbar,n.scrollableX&&e.scrollableX,n.scrollableY&&e.scrollableY]}})(({ownerState:t})=>z({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},t.fixed&&{overflowX:"hidden",width:"100%"},t.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},t.scrollableX&&{overflowX:"auto",overflowY:"hidden"},t.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),m5e=Ue("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.flexContainer,n.vertical&&e.flexContainerVertical,n.centered&&e.centered]}})(({ownerState:t})=>z({display:"flex"},t.vertical&&{flexDirection:"column"},t.centered&&{justifyContent:"center"})),g5e=Ue("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(t,e)=>e.indicator})(({ownerState:t,theme:e})=>z({position:"absolute",height:2,bottom:0,width:"100%",transition:e.transitions.create()},t.indicatorColor==="primary"&&{backgroundColor:(e.vars||e).palette.primary.main},t.indicatorColor==="secondary"&&{backgroundColor:(e.vars||e).palette.secondary.main},t.vertical&&{height:"100%",width:2,right:0})),y5e=Ue(a5e)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),wU={},v5e=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiTabs"}),i=$s(),s=mu(),{"aria-label":o,"aria-labelledby":a,action:c,centered:l=!1,children:u,className:d,component:h="div",allowScrollButtonsMobile:f=!1,indicatorColor:p="primary",onChange:g,orientation:m="horizontal",ScrollButtonComponent:y=cY,scrollButtons:b="auto",selectionFollowsFocus:x,slots:S={},slotProps:P={},TabIndicatorProps:_={},TabScrollButtonProps:I={},textColor:C="primary",value:A,variant:M="standard",visibleScrollbar:k=!1}=r,O=rt(r,d5e),B=M==="scrollable",$=m==="vertical",U=$?"scrollTop":"scrollLeft",q=$?"top":"left",K=$?"bottom":"right",V=$?"clientHeight":"clientWidth",G=$?"height":"width",j=z({},r,{component:h,allowScrollButtonsMobile:f,indicatorColor:p,orientation:m,vertical:$,scrollButtons:b,textColor:C,variant:M,visibleScrollbar:k,fixed:!B,hideScrollbar:B&&!k,scrollableX:B&&!$,scrollableY:B&&$,centered:l&&!B,scrollButtonsHideMobile:!f}),Q=f5e(j),se=mi({elementType:S.StartScrollButtonIcon,externalSlotProps:P.startScrollButtonIcon,ownerState:j}),Z=mi({elementType:S.EndScrollButtonIcon,externalSlotProps:P.endScrollButtonIcon,ownerState:j}),[ie,pe]=N.useState(!1),[ue,le]=N.useState(wU),[ae,_e]=N.useState(!1),[ye,Ae]=N.useState(!1),[Oe,Be]=N.useState(!1),[ce,Ge]=N.useState({overflow:"hidden",scrollbarWidth:0}),Pe=new Map,He=N.useRef(null),Re=N.useRef(null),je=()=>{const ne=He.current;let de;if(ne){const ke=ne.getBoundingClientRect();de={clientWidth:ne.clientWidth,scrollLeft:ne.scrollLeft,scrollTop:ne.scrollTop,scrollLeftNormalized:p_e(ne,s?"rtl":"ltr"),scrollWidth:ne.scrollWidth,top:ke.top,bottom:ke.bottom,left:ke.left,right:ke.right}}let Te;if(ne&&A!==!1){const ke=Re.current.children;if(ke.length>0){const he=ke[Pe.get(A)];Te=he?he.getBoundingClientRect():null}}return{tabsMeta:de,tabMeta:Te}},te=Yr(()=>{const{tabsMeta:ne,tabMeta:de}=je();let Te=0,ke;if($)ke="top",de&&ne&&(Te=de.top-ne.top+ne.scrollTop);else if(ke=s?"right":"left",de&&ne){const Xe=s?ne.scrollLeftNormalized+ne.clientWidth-ne.scrollWidth:ne.scrollLeft;Te=(s?-1:1)*(de[ke]-ne[ke]+Xe)}const he={[ke]:Te,[G]:de?de[G]:0};if(isNaN(ue[ke])||isNaN(ue[G]))le(he);else{const Xe=Math.abs(ue[ke]-he[ke]),$e=Math.abs(ue[G]-he[G]);(Xe>=1||$e>=1)&&le(he)}}),ee=(ne,{animation:de=!0}={})=>{de?i5e(U,He.current,ne,{duration:i.transitions.duration.standard}):He.current[U]=ne},X=ne=>{let de=He.current[U];$?de+=ne:(de+=ne*(s?-1:1),de*=s&&xq()==="reverse"?-1:1),ee(de)},we=()=>{const ne=He.current[V];let de=0;const Te=Array.from(Re.current.children);for(let ke=0;ke<Te.length;ke+=1){const he=Te[ke];if(de+he[V]>ne){ke===0&&(de=ne);break}de+=he[V]}return de},Ne=()=>{X(-1*we())},We=()=>{X(we())},xe=N.useCallback(ne=>{Ge({overflow:null,scrollbarWidth:ne})},[]),Ve=()=>{const ne={};ne.scrollbarSizeListener=B?H.jsx(y5e,{onChange:xe,className:Fe(Q.scrollableX,Q.hideScrollbar)}):null;const Te=B&&(b==="auto"&&(ae||ye)||b===!0);return ne.scrollButtonStart=Te?H.jsx(y,z({slots:{StartScrollButtonIcon:S.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:se},orientation:m,direction:s?"right":"left",onClick:Ne,disabled:!ae},I,{className:Fe(Q.scrollButtons,I.className)})):null,ne.scrollButtonEnd=Te?H.jsx(y,z({slots:{EndScrollButtonIcon:S.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:Z},orientation:m,direction:s?"left":"right",onClick:We,disabled:!ye},I,{className:Fe(Q.scrollButtons,I.className)})):null,ne},be=Yr(ne=>{const{tabsMeta:de,tabMeta:Te}=je();if(!(!Te||!de)){if(Te[q]<de[q]){const ke=de[U]+(Te[q]-de[q]);ee(ke,{animation:ne})}else if(Te[K]>de[K]){const ke=de[U]+(Te[K]-de[K]);ee(ke,{animation:ne})}}}),ge=Yr(()=>{B&&b!==!1&&Be(!Oe)});N.useEffect(()=>{const ne=Sv(()=>{He.current&&te()});let de;const Te=Xe=>{Xe.forEach($e=>{$e.removedNodes.forEach(Qe=>{var ut;(ut=de)==null||ut.unobserve(Qe)}),$e.addedNodes.forEach(Qe=>{var ut;(ut=de)==null||ut.observe(Qe)})}),ne(),ge()},ke=so(He.current);ke.addEventListener("resize",ne);let he;return typeof ResizeObserver<"u"&&(de=new ResizeObserver(ne),Array.from(Re.current.children).forEach(Xe=>{de.observe(Xe)})),typeof MutationObserver<"u"&&(he=new MutationObserver(Te),he.observe(Re.current,{childList:!0})),()=>{var Xe,$e;ne.clear(),ke.removeEventListener("resize",ne),(Xe=he)==null||Xe.disconnect(),($e=de)==null||$e.disconnect()}},[te,ge]),N.useEffect(()=>{const ne=Array.from(Re.current.children),de=ne.length;if(typeof IntersectionObserver<"u"&&de>0&&B&&b!==!1){const Te=ne[0],ke=ne[de-1],he={root:He.current,threshold:.99},Xe=gt=>{_e(!gt[0].isIntersecting)},$e=new IntersectionObserver(Xe,he);$e.observe(Te);const Qe=gt=>{Ae(!gt[0].isIntersecting)},ut=new IntersectionObserver(Qe,he);return ut.observe(ke),()=>{$e.disconnect(),ut.disconnect()}}},[B,b,Oe,u==null?void 0:u.length]),N.useEffect(()=>{pe(!0)},[]),N.useEffect(()=>{te()}),N.useEffect(()=>{be(wU!==ue)},[be,ue]),N.useImperativeHandle(c,()=>({updateIndicator:te,updateScrollButtons:ge}),[te,ge]);const Se=H.jsx(g5e,z({},_,{className:Fe(Q.indicator,_.className),ownerState:j,style:z({},ue,_.style)}));let Ie=0;const me=N.Children.map(u,ne=>{if(!N.isValidElement(ne))return null;const de=ne.props.value===void 0?Ie:ne.props.value;Pe.set(de,Ie);const Te=de===A;return Ie+=1,N.cloneElement(ne,z({fullWidth:M==="fullWidth",indicator:Te&&!ie&&Se,selected:Te,selectionFollowsFocus:x,onChange:g,textColor:C,value:de},Ie===1&&A===!1&&!ne.props.tabIndex?{tabIndex:0}:{}))}),Ee=ne=>{const de=Re.current,Te=Fr(de).activeElement;if(Te.getAttribute("role")!=="tab")return;let he=m==="horizontal"?"ArrowLeft":"ArrowUp",Xe=m==="horizontal"?"ArrowRight":"ArrowDown";switch(m==="horizontal"&&s&&(he="ArrowRight",Xe="ArrowLeft"),ne.key){case he:ne.preventDefault(),pT(de,Te,xU);break;case Xe:ne.preventDefault(),pT(de,Te,bU);break;case"Home":ne.preventDefault(),pT(de,null,bU);break;case"End":ne.preventDefault(),pT(de,null,xU);break}},oe=Ve();return H.jsxs(h5e,z({className:Fe(Q.root,d),ownerState:j,ref:n,as:h},O,{children:[oe.scrollButtonStart,oe.scrollbarSizeListener,H.jsxs(p5e,{className:Q.scroller,ownerState:j,style:{overflow:ce.overflow,[$?`margin${s?"Left":"Right"}`:"marginBottom"]:k?void 0:-ce.scrollbarWidth},ref:He,children:[H.jsx(m5e,{"aria-label":o,"aria-labelledby":a,"aria-orientation":m==="vertical"?"vertical":null,className:Q.flexContainer,ownerState:j,onKeyDown:Ee,ref:Re,role:"tablist",children:me}),ie&&Se]}),oe.scrollButtonEnd]}))});function N4(t){return xt("MuiTextField",t)}const dY=wt("MuiTextField",["root"]),b5e=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],x5e={standard:E_,filled:jP,outlined:KP},w5e=t=>{const{classes:e}=t;return _t({root:["root"]},N4,e)},_5e=Ue(sG,{name:"MuiTextField",slot:"Root",overridesResolver:(t,e)=>e.root})({}),fY=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:s=!1,children:o,className:a,color:c="primary",defaultValue:l,disabled:u=!1,error:d=!1,FormHelperTextProps:h,fullWidth:f=!1,helperText:p,id:g,InputLabelProps:m,inputProps:y,InputProps:b,inputRef:x,label:S,maxRows:P,minRows:_,multiline:I=!1,name:C,onBlur:A,onChange:M,onFocus:k,placeholder:O,required:B=!1,rows:$,select:U=!1,SelectProps:q,type:K,value:V,variant:G="outlined"}=r,j=rt(r,b5e),Q=z({},r,{autoFocus:s,color:c,disabled:u,error:d,fullWidth:f,multiline:I,required:B,select:U,variant:G}),se=w5e(Q),Z={};G==="outlined"&&(m&&typeof m.shrink<"u"&&(Z.notched=m.shrink),Z.label=S),U&&((!q||!q.native)&&(Z.id=void 0),Z["aria-describedby"]=void 0);const ie=_c(g),pe=p&&ie?`${ie}-helper-text`:void 0,ue=S&&ie?`${ie}-label`:void 0,le=x5e[G],ae=H.jsx(le,z({"aria-describedby":pe,autoComplete:i,autoFocus:s,defaultValue:l,fullWidth:f,multiline:I,name:C,rows:$,maxRows:P,minRows:_,type:K,value:V,id:ie,inputRef:x,onBlur:A,onChange:M,onFocus:k,placeholder:O,inputProps:y},Z,b));return H.jsxs(_5e,z({className:Fe(se.root,a),disabled:u,error:d,fullWidth:f,ref:n,required:B,color:c,variant:G,ownerState:Q},j,{children:[S!=null&&S!==""&&H.jsx(TG,z({htmlFor:ie,id:ue},m,{children:S})),U?H.jsx(GP,z({"aria-describedby":pe,id:ie,labelId:ue,value:V,input:ae},q,{children:o})):ae,p&&H.jsx(dG,z({id:pe},h,{children:p}))]}))}),S5e=Object.freeze(Object.defineProperty({__proto__:null,default:fY,getTextFieldUtilityClass:N4,textFieldClasses:dY},Symbol.toStringTag,{value:"Module"}));function hY(t){return xt("MuiToggleButton",t)}const wm=wt("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),pY=N.createContext({}),mY=N.createContext(void 0);function E5e(t,e){return e===void 0||t===void 0?!1:Array.isArray(e)?e.indexOf(t)>=0:t===e}const T5e=["value"],I5e=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],P5e=t=>{const{classes:e,fullWidth:n,selected:r,disabled:i,size:s,color:o}=t,a={root:["root",r&&"selected",i&&"disabled",n&&"fullWidth",`size${qe(s)}`,o]};return _t(a,hY,e)},C5e=Ue(Yi,{name:"MuiToggleButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`size${qe(n.size)}`]]}})(({theme:t,ownerState:e})=>{let n=e.color==="standard"?t.palette.text.primary:t.palette[e.color].main,r;return t.vars&&(n=e.color==="standard"?t.vars.palette.text.primary:t.vars.palette[e.color].main,r=e.color==="standard"?t.vars.palette.text.primaryChannel:t.vars.palette[e.color].mainChannel),z({},t.typography.button,{borderRadius:(t.vars||t).shape.borderRadius,padding:11,border:`1px solid ${(t.vars||t).palette.divider}`,color:(t.vars||t).palette.action.active},e.fullWidth&&{width:"100%"},{[`&.${wm.disabled}`]:{color:(t.vars||t).palette.action.disabled,border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:yy(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${wm.selected}`]:{color:n,backgroundColor:t.vars?`rgba(${r} / ${t.vars.palette.action.selectedOpacity})`:yy(n,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${r} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:yy(n,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${r} / ${t.vars.palette.action.selectedOpacity})`:yy(n,t.palette.action.selectedOpacity)}}}},e.size==="small"&&{padding:7,fontSize:t.typography.pxToRem(13)},e.size==="large"&&{padding:15,fontSize:t.typography.pxToRem(15)})}),M5e=N.forwardRef(function(e,n){const r=N.useContext(pY),{value:i}=r,s=rt(r,T5e),o=N.useContext(mY),a=ev(z({},s,{selected:E5e(e.value,i)}),e),c=Et({props:a,name:"MuiToggleButton"}),{children:l,className:u,color:d="standard",disabled:h=!1,disableFocusRipple:f=!1,fullWidth:p=!1,onChange:g,onClick:m,selected:y,size:b="medium",value:x}=c,S=rt(c,I5e),P=z({},c,{color:d,disabled:h,disableFocusRipple:f,fullWidth:p,size:b}),_=P5e(P),I=A=>{m&&(m(A,x),A.defaultPrevented)||g&&g(A,x)},C=o||"";return H.jsx(C5e,z({className:Fe(s.className,_.root,u,C),disabled:h,focusRipple:!f,ref:n,onClick:I,onChange:g,value:x,ownerState:P,"aria-pressed":y},S,{children:l}))});function gY(t){return xt("MuiToggleButtonGroup",t)}const ei=wt("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),A5e=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],R5e=t=>{const{classes:e,orientation:n,fullWidth:r,disabled:i}=t,s={root:["root",n==="vertical"&&"vertical",r&&"fullWidth"],grouped:["grouped",`grouped${qe(n)}`,i&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return _t(s,gY,e)},k5e=Ue("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${ei.grouped}`]:e.grouped},{[`& .${ei.grouped}`]:e[`grouped${qe(n.orientation)}`]},{[`& .${ei.firstButton}`]:e.firstButton},{[`& .${ei.lastButton}`]:e.lastButton},{[`& .${ei.middleButton}`]:e.middleButton},e.root,n.orientation==="vertical"&&e.vertical,n.fullWidth&&e.fullWidth]}})(({ownerState:t,theme:e})=>z({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius},t.orientation==="vertical"&&{flexDirection:"column"},t.fullWidth&&{width:"100%"},{[`& .${ei.grouped}`]:z({},t.orientation==="horizontal"?{[`&.${ei.selected} + .${ei.grouped}.${ei.selected}`]:{borderLeft:0,marginLeft:0}}:{[`&.${ei.selected} + .${ei.grouped}.${ei.selected}`]:{borderTop:0,marginTop:0}})},t.orientation==="horizontal"?{[`& .${ei.firstButton},& .${ei.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${ei.lastButton},& .${ei.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}}:{[`& .${ei.firstButton},& .${ei.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${ei.lastButton},& .${ei.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0}},t.orientation==="horizontal"?{[`& .${ei.lastButton}.${wm.disabled},& .${ei.middleButton}.${wm.disabled}`]:{borderLeft:"1px solid transparent"}}:{[`& .${ei.lastButton}.${wm.disabled},& .${ei.middleButton}.${wm.disabled}`]:{borderTop:"1px solid transparent"}})),O5e=N.forwardRef(function(e,n){const r=Et({props:e,name:"MuiToggleButtonGroup"}),{children:i,className:s,color:o="standard",disabled:a=!1,exclusive:c=!1,fullWidth:l=!1,onChange:u,orientation:d="horizontal",size:h="medium",value:f}=r,p=rt(r,A5e),g=z({},r,{disabled:a,fullWidth:l,orientation:d,size:h}),m=R5e(g),y=N.useCallback((I,C)=>{if(!u)return;const A=f&&f.indexOf(C);let M;f&&A>=0?(M=f.slice(),M.splice(A,1)):M=f?f.concat(C):[C],u(I,M)},[u,f]),b=N.useCallback((I,C)=>{u&&u(I,f===C?null:C)},[u,f]),x=N.useMemo(()=>({className:m.grouped,onChange:c?b:y,value:f,size:h,fullWidth:l,color:o,disabled:a}),[m.grouped,c,b,y,f,h,l,o,a]),S=wq(i),P=S.length,_=I=>{const C=I===0,A=I===P-1;return C&&A?"":C?m.firstButton:A?m.lastButton:m.middleButton};return H.jsx(k5e,z({role:"group",className:Fe(m.root,s),ref:n,ownerState:g},p,{children:H.jsx(pY.Provider,{value:x,children:S.map((I,C)=>H.jsx(mY.Provider,{value:_(C),children:I},C))})}))}),N5e=["getTrigger","target"];function L5e(t,e){const{disableHysteresis:n=!1,threshold:r=100,target:i}=e,s=t.current;return i&&(t.current=i.pageYOffset!==void 0?i.pageYOffset:i.scrollTop),!n&&s!==void 0&&t.current<s?!1:t.current>r}const D5e=typeof window<"u"?window:null;function B5e(t={}){const{getTrigger:e=L5e,target:n=D5e}=t,r=rt(t,N5e),i=N.useRef(),[s,o]=N.useState(()=>e(i,r));return N.useEffect(()=>{const a=()=>{o(e(i,z({target:n},r)))};return a(),n.addEventListener("scroll",a,{passive:!0}),()=>{n.removeEventListener("scroll",a,{passive:!0})}},[n,e,JSON.stringify(r)]),s}const F5e="5.17.1",U5e=5,$5e=17,z5e=1,H5e=null,V5e=null;/**
 * @mui/material v5.17.1
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */const W5e=Object.freeze(Object.defineProperty({__proto__:null,Accordion:zEe,AccordionActions:qEe,AccordionDetails:ZEe,AccordionSummary:gTe,Alert:MTe,AlertTitle:$Te,AppBar:jTe,Autocomplete:H2e,Avatar:gK,AvatarGroup:Q2e,Backdrop:w4,Badge:dIe,BottomNavigation:gIe,BottomNavigationAction:wIe,Box:SIe,Breadcrumbs:LIe,Button:zIe,ButtonBase:Yi,ButtonGroup:qIe,ButtonGroupButtonContext:E4,ButtonGroupContext:S4,Card:ZIe,CardActionArea:nPe,CardActions:aPe,CardContent:fPe,CardHeader:bPe,CardMedia:IPe,Checkbox:zPe,Chip:aK,CircularProgress:YPe,ClickAwayListener:BK,Collapse:w_,Container:JPe,CssBaseline:nCe,Dialog:ACe,DialogActions:LCe,DialogContent:$Ce,DialogContentText:jCe,DialogTitle:XCe,Divider:ZK,Drawer:nG,Experimental_CssVarsProvider:mEe,Fab:I4,Fade:x4,FilledInput:jP,FormControl:sG,FormControlLabel:TMe,FormGroup:cG,FormHelperText:dG,FormLabel:pG,FormLabelRoot:hG,GlobalStyles:v4,Grid:GMe,Grow:nv,Hidden:mAe,Icon:vG,IconButton:Zf,ImageList:EAe,ImageListItem:CAe,ImageListItemBar:BAe,Input:E_,InputAdornment:SG,InputBase:S_,InputLabel:TG,LinearProgress:PG,Link:fRe,List:kG,ListItem:kRe,ListItemAvatar:BRe,ListItemButton:wRe,ListItemIcon:zRe,ListItemSecondaryAction:M4,ListItemText:jRe,ListSubheader:y4,Menu:jG,MenuItem:KG,MenuList:$G,MobileStepper:vke,Modal:WP,ModalManager:$K,NativeSelect:JG,NoSsr:QG,OutlinedInput:KP,Pagination:Gke,PaginationItem:iX,Paper:Da,Popover:VG,PopoverPaper:A4,PopoverRoot:HG,Popper:__,Portal:g4,Radio:i3e,RadioGroup:l3e,Rating:_3e,ScopedCssBaseline:P3e,Select:GP,Skeleton:K3e,Slide:JK,Slider:lOe,SliderMark:_X,SliderMarkLabel:SX,SliderRail:vX,SliderRoot:yX,SliderThumb:xX,SliderTrack:bX,SliderValueLabel:wX,Snackbar:xOe,SnackbarContent:TX,SpeedDial:AOe,SpeedDialAction:HOe,SpeedDialIcon:NX,Stack:oG,Step:QOe,StepButton:p4e,StepConnector:zX,StepContent:T4e,StepContext:Wm,StepIcon:BX,StepLabel:O4,Stepper:R4e,StepperContext:mh,StyledEngineProvider:nq,SvgIcon:Rw,SwipeableDrawer:$4e,Switch:K4e,THEME_ID:Kd,Tab:Z4e,TabScrollButton:cY,Table:nNe,TableBody:lNe,TableCell:lI,TableContainer:gNe,TableFooter:_Ne,TableHead:CNe,TablePagination:qNe,TableRow:YNe,TableSortLabel:n5e,Tabs:v5e,TextField:fY,TextareaAutosize:lK,ThemeProvider:sEe,ToggleButton:M5e,ToggleButtonGroup:O5e,Toolbar:tY,Tooltip:AX,Typography:Ds,Unstable_Grid2:XMe,Unstable_TrapFocus:zK,Zoom:PX,accordionActionsClasses:HEe,accordionClasses:Ex,accordionDetailsClasses:KEe,accordionSummaryClasses:xm,adaptV4Theme:gSe,alertClasses:bk,alertTitleClasses:DTe,alpha:yy,appBarClasses:zTe,autocompleteClasses:Vn,avatarClasses:mK,avatarGroupClasses:vK,backdropClasses:nIe,badgeClasses:bd,bottomNavigationActionClasses:_4,bottomNavigationClasses:fIe,boxClasses:SK,breadcrumbsClasses:TK,buttonBaseClasses:Kq,buttonClasses:Tx,buttonGroupClasses:_s,capitalize:qe,cardActionAreaClasses:LT,cardActionsClasses:rPe,cardClasses:KIe,cardContentClasses:lPe,cardHeaderClasses:wk,cardMediaClasses:xPe,checkboxClasses:DT,chipClasses:pr,circularProgressClasses:HPe,collapseClasses:TEe,colors:Ixe,containerClasses:eCe,createChainedFunction:tI,createFilterOptions:nK,createMuiTheme:USe,createStyles:zSe,createSvgIcon:Wr,createTheme:Fm,css:Io,darkScrollbar:iCe,darken:yq,debounce:Sv,decomposeColor:Gd,deprecatedPropType:e_e,dialogActionsClasses:RCe,dialogClasses:BT,dialogContentClasses:DCe,dialogContentTextClasses:zCe,dialogTitleClasses:GK,dividerClasses:_k,drawerClasses:rMe,duration:p4,easing:Nq,emphasize:Qwe,experimentalStyled:Ue,experimental_extendTheme:Bq,experimental_sx:bEe,fabClasses:Sk,filledInputClasses:Xo,formControlClasses:gMe,formControlLabelClasses:by,formGroupClasses:IMe,formHelperTextClasses:Ek,formLabelClasses:My,generateUtilityClass:xt,generateUtilityClasses:wt,getAccordionActionsUtilityClass:Wq,getAccordionDetailsUtilityClass:jq,getAccordionSummaryUtilityClass:Gq,getAccordionUtilityClass:Vq,getAlertTitleUtilityClass:eK,getAlertUtilityClass:Xq,getAppBarUtilityClass:tK,getAutocompleteUtilityClass:hK,getAvatarGroupUtilityClass:yK,getAvatarUtilityClass:pK,getBackdropUtilityClass:bK,getBadgeUtilityClass:xK,getBottomNavigationActionUtilityClass:_K,getBottomNavigationUtilityClass:wK,getBreadcrumbsUtilityClass:EK,getButtonBaseUtilityClass:qq,getButtonGroupUtilityClass:CK,getButtonUtilityClass:IK,getCardActionAreaUtilityClass:AK,getCardActionsUtilityClass:RK,getCardContentUtilityClass:kK,getCardHeaderUtilityClass:OK,getCardMediaUtilityClass:NK,getCardUtilityClass:MK,getCheckboxUtilityClass:LK,getChipUtilityClass:oK,getCircularProgressUtilityClass:DK,getCollapseUtilityClass:$q,getContainerUtilityClass:QPe,getContrastRatio:Jwe,getDialogActionsUtilityClass:jK,getDialogContentTextUtilityClass:XK,getDialogContentUtilityClass:qK,getDialogTitleUtilityClass:KK,getDialogUtilityClass:VK,getDividerUtilityClass:YK,getDrawerUtilityClass:QK,getFabUtilityClass:rG,getFilledInputUtilityClass:fK,getFormControlLabelUtilityClasses:aG,getFormControlUtilityClasses:iG,getFormGroupUtilityClass:lG,getFormHelperTextUtilityClasses:uG,getFormLabelUtilityClasses:fG,getGrid2UtilityClass:YMe,getGridUtilityClass:mG,getIconButtonUtilityClass:Yq,getIconUtilityClass:yG,getImageListItemBarUtilityClass:_G,getImageListItemUtilityClass:wG,getImageListUtilityClass:bG,getInitColorSchemeScript:vEe,getInputAdornmentUtilityClass:P4,getInputBaseUtilityClass:cK,getInputLabelUtilityClasses:EG,getInputUtilityClass:uK,getLinearProgressUtilityClass:IG,getLinkUtilityClass:CG,getListItemAvatarUtilityClass:DG,getListItemButtonUtilityClass:NG,getListItemIconUtilityClass:BG,getListItemSecondaryActionClassesUtilityClass:LG,getListItemTextUtilityClass:FG,getListItemUtilityClass:OG,getListSubheaderUtilityClass:sK,getListUtilityClass:RG,getLuminance:eI,getMenuItemUtilityClass:qG,getMenuUtilityClass:WG,getMobileStepperUtilityClass:GG,getModalUtilityClass:HK,getNativeSelectUtilityClasses:R4,getOffsetLeft:Ak,getOffsetTop:Mk,getOutlinedInputUtilityClass:dK,getOverlayAlpha:nI,getPaginationItemUtilityClass:nX,getPaginationUtilityClass:eX,getPaperUtilityClass:zq,getPopoverUtilityClass:zG,getPopperUtilityClass:iK,getRadioGroupUtilityClass:cX,getRadioUtilityClass:lX,getRatingUtilityClass:uX,getScopedCssBaselineUtilityClass:fX,getSelectUtilityClasses:hX,getSkeletonUtilityClass:pX,getSliderUtilityClass:gX,getSnackbarContentUtilityClass:EX,getSnackbarUtilityClass:IX,getSpeedDialActionUtilityClass:RX,getSpeedDialIconUtilityClass:OX,getSpeedDialUtilityClass:CX,getStepButtonUtilityClass:UX,getStepConnectorUtilityClass:$X,getStepContentUtilityClass:HX,getStepIconUtilityClass:DX,getStepLabelUtilityClass:FX,getStepUtilityClass:LX,getStepperUtilityClass:VX,getSvgIconUtilityClass:Uq,getSwitchUtilityClass:WX,getTabScrollButtonUtilityClass:aY,getTabUtilityClass:jX,getTableBodyUtilityClass:GX,getTableCellUtilityClass:XX,getTableContainerUtilityClass:ZX,getTableFooterUtilityClass:JX,getTableHeadUtilityClass:QX,getTablePaginationUtilityClass:iY,getTableRowUtilityClass:sY,getTableSortLabelUtilityClass:oY,getTableUtilityClass:KX,getTabsUtilityClass:uY,getTextFieldUtilityClass:N4,getToggleButtonGroupUtilityClass:gY,getToggleButtonUtilityClass:hY,getToolbarUtilityClass:eY,getTooltipUtilityClass:MX,getTouchRippleUtilityClass:QEe,getTypographyUtilityClass:Qq,grid2Classes:eAe,gridClasses:tv,hexToRgb:mq,hslToRgb:gq,iconButtonClasses:Zq,iconClasses:gAe,imageListClasses:xAe,imageListItemBarClasses:MAe,imageListItemClasses:Ik,inputAdornmentClasses:sI,inputBaseClasses:Go,inputClasses:Pd,inputLabelClasses:KAe,isMuiElement:Dd,keyframes:Zi,lighten:vq,linearProgressClasses:ZAe,linkClasses:MG,listClasses:hRe,listItemAvatarClasses:ORe,listItemButtonClasses:fm,listItemClasses:dm,listItemIconClasses:Ck,listItemSecondaryActionClasses:_Re,listItemTextClasses:kw,listSubheaderClasses:u2e,major:U5e,makeStyles:oEe,menuClasses:JRe,menuItemClasses:ly,minor:$5e,mobileStepperClasses:dke,modalClasses:bCe,nativeSelectClasses:qP,outlinedInputClasses:hc,ownerDocument:Fr,ownerWindow:so,paginationClasses:Dke,paginationItemClasses:Ta,paperClasses:REe,patch:z5e,popoverClasses:KRe,preReleaseLabel:H5e,preReleaseNumber:V5e,private_createMixins:kq,private_createTypography:h4,private_excludeVariablesFromRoot:Fq,radioClasses:Ok,radioGroupClasses:s3e,ratingClasses:cy,recomposeColor:v_,requirePropFactory:t_e,responsiveFontSizes:qSe,rgbToHex:Zwe,scopedCssBaselineClasses:S3e,selectClasses:uy,setRef:Mw,shouldSkipGeneratingVar:Dq,skeletonClasses:z3e,sliderClasses:Ma,snackbarClasses:gOe,snackbarContentClasses:uOe,speedDialActionClasses:kX,speedDialClasses:Px,speedDialIconClasses:qf,stackClasses:xMe,stepButtonClasses:Nk,stepClasses:XOe,stepConnectorClasses:m4e,stepContentClasses:x4e,stepIconClasses:FT,stepLabelClasses:kd,stepperClasses:I4e,styled:Ue,svgIconClasses:xEe,switchClasses:Qs,tabClasses:xd,tabScrollButtonClasses:lY,tableBodyClasses:rNe,tableCellClasses:YX,tableClasses:J4e,tableContainerClasses:fNe,tableFooterClasses:yNe,tableHeadClasses:SNe,tablePaginationClasses:Ry,tableRowClasses:Lk,tableSortLabelClasses:UT,tabsClasses:$T,textFieldClasses:dY,toggleButtonClasses:wm,toggleButtonGroupClasses:ei,toolbarClasses:MNe,tooltipClasses:Rd,touchRippleClasses:Ia,typographyClasses:ATe,unstable_ClassNameGenerator:EEe,unstable_composeClasses:_t,unstable_createMuiStrictModeTheme:$Se,unstable_getUnit:m4,unstable_toUnitless:_d,unstable_useEnhancedEffect:fs,unstable_useId:_c,unsupportedProp:r_e,useAutocomplete:rK,useColorScheme:gEe,useControlled:ta,useEventCallback:Yr,useForkRef:or,useFormControl:Pl,useIsFocusVisible:Ev,useMediaQuery:pq,usePagination:tX,useRadioGroup:aX,useScrollTrigger:B5e,useStepContext:GOe,useStepperContext:KOe,useTheme:$s,useThemeProps:KSe,version:F5e,withStyles:aEe,withTheme:lEe},Symbol.toStringTag,{value:"Module"})),j5e=_l(W5e);var _U;function q5e(){if(_U)return gg;_U=1;var t=gg&&gg.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(gg,"__esModule",{value:!0});const e=jk(),n=uu(),r=KO(),i=t(GO()),s=j5e,o=({paymentAmount:a,formatOptions:c})=>{const[l,u]=(0,n.useState)({formattedAmount:""}),d=new r.CurrencyConverter;return(0,i.default)(async()=>{try{await d.initialize();const h=await d.convertAmount(a,c);u(h)}catch(h){console.error("Failed to convert amount:",h)}},[a,c]),(0,e.jsx)(s.Tooltip,{title:l.hoverText,children:(0,e.jsx)(s.Typography,{children:l.formattedAmount})})};return gg.default=o,gg}var Xg={};const K5e=_l(S5e),G5e=_l(qAe);var SU;function X5e(){if(SU)return Xg;SU=1;var t=Xg&&Xg.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Xg,"__esModule",{value:!0});const e=jk(),n=uu(),r=t(K5e),i=t(G5e),s=KO(),o=t(GO()),a=({onSatoshisChange:c})=>{const[l,u]=(0,n.useState)(""),[d,h]=(0,n.useState)("$"),f=new s.CurrencyConverter;(0,o.default)(async()=>{await f.initialize(),h(f.getCurrencySymbol())},[]);const p=(0,n.useCallback)(async g=>{const m=g.target.value.replace(/[^0-9.]/g,"");if(m!==l){u(m);const y=await f.convertToSatoshis(m);c(y)}},[]);return(0,e.jsx)(r.default,{label:"Enter Amount",variant:"outlined",value:l,onChange:p,InputProps:{startAdornment:(0,e.jsx)(i.default,{position:"start",children:d})},sx:{backgroundColor:"white"},fullWidth:!0})};return Xg.default=a,Xg}var Yg={},EU;function Y5e(){if(EU)return Yg;EU=1;var t=Yg&&Yg.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Yg,"__esModule",{value:!0});const e=uu(),n=KO(),r=t(GO()),i=(s,o)=>{const[a,c]=(0,e.useState)(""),[l,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)(null),f=new n.CurrencyConverter;return(0,e.useEffect)(()=>{(async()=>{try{await f.initialize(),u(!0)}catch(g){h(g)}})()},[]),(0,r.default)(async()=>{if(l)try{const p=await f.convertAmount(s.toString(),o);c(p.formattedAmount)}catch(p){h(p)}},[s,o,l]),{displayAmount:a,error:d}};return Yg.default=i,Yg}var TU;function Z5e(){return TU||(TU=1,function(t){var e=Zb&&Zb.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(t,"__esModule",{value:!0}),t.useCurrencyDisplay=t.AmountInputField=t.AmountDisplay=void 0;var n=q5e();Object.defineProperty(t,"AmountDisplay",{enumerable:!0,get:function(){return e(n).default}});var r=X5e();Object.defineProperty(t,"AmountInputField",{enumerable:!0,get:function(){return e(r).default}});var i=Y5e();Object.defineProperty(t,"useCurrencyDisplay",{enumerable:!0,get:function(){return e(i).default}})}(Zb)),Zb}var J5e=Z5e();async function Q5e(t,e,n){const r=yc.fromBEEF(t),i=r.outputs[e],o=Zy.decode(i.lockingScript).fields,a={txid:r.id("hex"),outputIndex:e};for(const c of n)switch(c){case"fileUrl":a.fileUrl=gn(dt(o[0]));break;case"name":a.name=gn(dt(o[1]));break;case"description":a.description=gn(dt(o[2]));break;case"satoshis":a.satoshis=parseInt(gn(dt(o[3])),10);break;case"creatorPublicKey":a.creatorPublicKey=gn(dt(o[4]));break;case"size":a.size=parseInt(gn(dt(o[5])),10);break;case"retentionPeriod":a.retentionPeriod=parseInt(gn(dt(o[6])),10);break;case"coverUrl":a.coverUrl=gn(dt(o[7]));break}return a}async function cI(t,e){return Promise.all(t.map(({beef:n,outputIndex:r})=>Q5e(n,r,e)))}const e6e=["name","satoshis","coverUrl","txid","outputIndex","retentionPeriod"],t6e=[{value:"name",label:"Name"}],n6e=()=>{const[t,e]=N.useState([]),[n,r]=N.useState(!0),[i,s]=N.useState(""),[o,a]=N.useState("name"),c=new mv({networkPreset:window.location.hostname==="localhost"?"local":"mainnet"}),l=async d=>{r(!0);try{let h=null;if(d&&o==="name"?h=await c.query({service:"ls_market",query:{type:"findByName",value:{name:i}}}):h=await c.query({service:"ls_market",query:"findStore"}),h.type!=="output-list")throw new Error("Lookup answer must be an output-list");const f=await cI(h.outputs,e6e);e(f)}catch(h){console.error("Error fetching files:",h)}finally{r(!1)}};N.useEffect(()=>{l()},[o]);const u=async()=>{l(i.trim())};return H.jsxs(jw,{maxWidth:"lg",sx:{mt:4,mb:4},children:[H.jsx(ir,{component:"span",variant:"h4",gutterBottom:!0,children:"Browse Files"}),H.jsxs(iu,{variant:"outlined",sx:{display:"flex",alignItems:"center",gap:1,p:2,mb:3},children:[H.jsx(Sve,{color:"action"}),H.jsx(dy,{select:!0,label:"Filter by",size:"small",value:o,onChange:d=>a(d.target.value),sx:{minWidth:120},children:t6e.map(d=>H.jsx(qse,{value:d.value,children:d.label},d.value))}),H.jsx(dy,{placeholder:"Search files",variant:"outlined",size:"small",value:i,onChange:d=>s(d.target.value),onKeyDown:d=>d.key==="Enter"&&u(),fullWidth:!0}),H.jsx(hl,{variant:"contained",onClick:u,children:"Search"})]}),H.jsx(eo,{container:!0,spacing:3,columns:{xs:1,sm:2,md:5},children:t.map(d=>H.jsx(eo,{size:{xs:1,sm:1,md:1},children:H.jsx(wz,{sx:{height:"100%",display:"flex",flexDirection:"column",p:1,"&:hover":{boxShadow:6}},children:H.jsxs(fie,{component:Sy,to:`/${d.txid}/${d.outputIndex}`,sx:{flexGrow:1},children:[H.jsx(LO,{src:d.coverUrl,alt:d.name,style:{width:"100%",aspectRatio:"4/3",objectFit:"cover",borderRadius:"4px"}}),H.jsxs(_z,{children:[H.jsx(ir,{component:"span",variant:"h6",noWrap:!0,gutterBottom:!0,sx:{fontWeight:"bold"},children:d.name}),H.jsxs(ir,{component:"div",variant:"body1",sx:{display:"flex",alignItems:"center",mt:1},children:["Price:",H.jsx(Ns,{component:"span",sx:{fontWeight:"medium",display:"inline-block"},children:H.jsx(J5e.AmountDisplay,{paymentAmount:d.satoshis,formatOptions:{decimalPlaces:2}})})]}),H.jsxs(ir,{component:"span",variant:"body2",color:"text.secondary",sx:{mt:.5},children:["Expires:"," ",new Date(d.retentionPeriod).toLocaleDateString()]})]})]})})},`${d.txid}.${d.outputIndex}`))})]})};function r6e(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const i6e=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,s6e=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,o6e={};function IU(t,e){return(o6e.jsx?s6e:i6e).test(t)}const a6e=/[ \t\n\f\r]/g;function l6e(t){return typeof t=="object"?t.type==="text"?PU(t.value):!1:PU(t)}function PU(t){return t.replace(a6e,"")===""}class I_{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}I_.prototype.normal={};I_.prototype.property={};I_.prototype.space=void 0;function yY(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new I_(n,r,e)}function Dk(t){return t.toLowerCase()}class sa{constructor(e,n){this.attribute=n,this.property=e}}sa.prototype.attribute="";sa.prototype.booleanish=!1;sa.prototype.boolean=!1;sa.prototype.commaOrSpaceSeparated=!1;sa.prototype.commaSeparated=!1;sa.prototype.defined=!1;sa.prototype.mustUseProperty=!1;sa.prototype.number=!1;sa.prototype.overloadedBoolean=!1;sa.prototype.property="";sa.prototype.spaceSeparated=!1;sa.prototype.space=void 0;let c6e=0;const Dn=jm(),Ki=jm(),vY=jm(),kt=jm(),Gr=jm(),ky=jm(),Ea=jm();function jm(){return 2**++c6e}const Bk=Object.freeze(Object.defineProperty({__proto__:null,boolean:Dn,booleanish:Ki,commaOrSpaceSeparated:Ea,commaSeparated:ky,number:kt,overloadedBoolean:vY,spaceSeparated:Gr},Symbol.toStringTag,{value:"Module"})),qA=Object.keys(Bk);class L4 extends sa{constructor(e,n,r,i){let s=-1;if(super(e,n),CU(this,"space",i),typeof r=="number")for(;++s<qA.length;){const o=qA[s];CU(this,qA[s],(r&Bk[o])===Bk[o])}}}L4.prototype.defined=!0;function CU(t,e,n){n&&(t[e]=n)}function Cv(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new L4(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[Dk(r)]=r,n[Dk(s.attribute)]=r}return new I_(e,n,t.space)}const bY=Cv({properties:{ariaActiveDescendant:null,ariaAtomic:Ki,ariaAutoComplete:null,ariaBusy:Ki,ariaChecked:Ki,ariaColCount:kt,ariaColIndex:kt,ariaColSpan:kt,ariaControls:Gr,ariaCurrent:null,ariaDescribedBy:Gr,ariaDetails:null,ariaDisabled:Ki,ariaDropEffect:Gr,ariaErrorMessage:null,ariaExpanded:Ki,ariaFlowTo:Gr,ariaGrabbed:Ki,ariaHasPopup:null,ariaHidden:Ki,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Gr,ariaLevel:kt,ariaLive:null,ariaModal:Ki,ariaMultiLine:Ki,ariaMultiSelectable:Ki,ariaOrientation:null,ariaOwns:Gr,ariaPlaceholder:null,ariaPosInSet:kt,ariaPressed:Ki,ariaReadOnly:Ki,ariaRelevant:null,ariaRequired:Ki,ariaRoleDescription:Gr,ariaRowCount:kt,ariaRowIndex:kt,ariaRowSpan:kt,ariaSelected:Ki,ariaSetSize:kt,ariaSort:null,ariaValueMax:kt,ariaValueMin:kt,ariaValueNow:kt,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function xY(t,e){return e in t?t[e]:e}function wY(t,e){return xY(t,e.toLowerCase())}const u6e=Cv({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ky,acceptCharset:Gr,accessKey:Gr,action:null,allow:null,allowFullScreen:Dn,allowPaymentRequest:Dn,allowUserMedia:Dn,alt:null,as:null,async:Dn,autoCapitalize:null,autoComplete:Gr,autoFocus:Dn,autoPlay:Dn,blocking:Gr,capture:null,charSet:null,checked:Dn,cite:null,className:Gr,cols:kt,colSpan:null,content:null,contentEditable:Ki,controls:Dn,controlsList:Gr,coords:kt|ky,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Dn,defer:Dn,dir:null,dirName:null,disabled:Dn,download:vY,draggable:Ki,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Dn,formTarget:null,headers:Gr,height:kt,hidden:Dn,high:kt,href:null,hrefLang:null,htmlFor:Gr,httpEquiv:Gr,id:null,imageSizes:null,imageSrcSet:null,inert:Dn,inputMode:null,integrity:null,is:null,isMap:Dn,itemId:null,itemProp:Gr,itemRef:Gr,itemScope:Dn,itemType:Gr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Dn,low:kt,manifest:null,max:null,maxLength:kt,media:null,method:null,min:null,minLength:kt,multiple:Dn,muted:Dn,name:null,nonce:null,noModule:Dn,noValidate:Dn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Dn,optimum:kt,pattern:null,ping:Gr,placeholder:null,playsInline:Dn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Dn,referrerPolicy:null,rel:Gr,required:Dn,reversed:Dn,rows:kt,rowSpan:kt,sandbox:Gr,scope:null,scoped:Dn,seamless:Dn,selected:Dn,shadowRootClonable:Dn,shadowRootDelegatesFocus:Dn,shadowRootMode:null,shape:null,size:kt,sizes:null,slot:null,span:kt,spellCheck:Ki,src:null,srcDoc:null,srcLang:null,srcSet:null,start:kt,step:null,style:null,tabIndex:kt,target:null,title:null,translate:null,type:null,typeMustMatch:Dn,useMap:null,value:Ki,width:kt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Gr,axis:null,background:null,bgColor:null,border:kt,borderColor:null,bottomMargin:kt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Dn,declare:Dn,event:null,face:null,frame:null,frameBorder:null,hSpace:kt,leftMargin:kt,link:null,longDesc:null,lowSrc:null,marginHeight:kt,marginWidth:kt,noResize:Dn,noHref:Dn,noShade:Dn,noWrap:Dn,object:null,profile:null,prompt:null,rev:null,rightMargin:kt,rules:null,scheme:null,scrolling:Ki,standby:null,summary:null,text:null,topMargin:kt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:kt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Dn,disableRemotePlayback:Dn,prefix:null,property:null,results:kt,security:null,unselectable:null},space:"html",transform:wY}),d6e=Cv({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Ea,accentHeight:kt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:kt,amplitude:kt,arabicForm:null,ascent:kt,attributeName:null,attributeType:null,azimuth:kt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:kt,by:null,calcMode:null,capHeight:kt,className:Gr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:kt,diffuseConstant:kt,direction:null,display:null,dur:null,divisor:kt,dominantBaseline:null,download:Dn,dx:null,dy:null,edgeMode:null,editable:null,elevation:kt,enableBackground:null,end:null,event:null,exponent:kt,externalResourcesRequired:null,fill:null,fillOpacity:kt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ky,g2:ky,glyphName:ky,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:kt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:kt,horizOriginX:kt,horizOriginY:kt,id:null,ideographic:kt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:kt,k:kt,k1:kt,k2:kt,k3:kt,k4:kt,kernelMatrix:Ea,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:kt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:kt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:kt,overlineThickness:kt,paintOrder:null,panose1:null,path:null,pathLength:kt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Gr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:kt,pointsAtY:kt,pointsAtZ:kt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ea,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ea,rev:Ea,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ea,requiredFeatures:Ea,requiredFonts:Ea,requiredFormats:Ea,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:kt,specularExponent:kt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:kt,strikethroughThickness:kt,string:null,stroke:null,strokeDashArray:Ea,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:kt,strokeOpacity:kt,strokeWidth:null,style:null,surfaceScale:kt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ea,tabIndex:kt,tableValues:null,target:null,targetX:kt,targetY:kt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ea,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:kt,underlineThickness:kt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:kt,values:null,vAlphabetic:kt,vMathematical:kt,vectorEffect:null,vHanging:kt,vIdeographic:kt,version:null,vertAdvY:kt,vertOriginX:kt,vertOriginY:kt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:kt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:xY}),_Y=Cv({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),SY=Cv({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:wY}),EY=Cv({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),f6e={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},h6e=/[A-Z]/g,MU=/-[a-z]/g,p6e=/^data[-\w.:]+$/i;function m6e(t,e){const n=Dk(e);let r=e,i=sa;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&p6e.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(MU,y6e);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!MU.test(s)){let o=s.replace(h6e,g6e);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=L4}return new i(r,e)}function g6e(t){return"-"+t.toLowerCase()}function y6e(t){return t.charAt(1).toUpperCase()}const v6e=yY([bY,u6e,_Y,SY,EY],"html"),D4=yY([bY,d6e,_Y,SY,EY],"svg");function b6e(t){return t.join(" ").trim()}var Zg={},KA,AU;function x6e(){if(AU)return KA;AU=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,a=/^\s+|\s+$/g,c=`
`,l="/",u="*",d="",h="comment",f="declaration";KA=function(g,m){if(typeof g!="string")throw new TypeError("First argument must be a string");if(!g)return[];m=m||{};var y=1,b=1;function x(B){var $=B.match(e);$&&(y+=$.length);var U=B.lastIndexOf(c);b=~U?B.length-U:b+B.length}function S(){var B={line:y,column:b};return function($){return $.position=new P(B),C(),$}}function P(B){this.start=B,this.end={line:y,column:b},this.source=m.source}P.prototype.content=g;function _(B){var $=new Error(m.source+":"+y+":"+b+": "+B);if($.reason=B,$.filename=m.source,$.line=y,$.column=b,$.source=g,!m.silent)throw $}function I(B){var $=B.exec(g);if($){var U=$[0];return x(U),g=g.slice(U.length),$}}function C(){I(n)}function A(B){var $;for(B=B||[];$=M();)$!==!1&&B.push($);return B}function M(){var B=S();if(!(l!=g.charAt(0)||u!=g.charAt(1))){for(var $=2;d!=g.charAt($)&&(u!=g.charAt($)||l!=g.charAt($+1));)++$;if($+=2,d===g.charAt($-1))return _("End of comment missing");var U=g.slice(2,$-2);return b+=2,x(U),g=g.slice($),b+=2,B({type:h,comment:U})}}function k(){var B=S(),$=I(r);if($){if(M(),!I(i))return _("property missing ':'");var U=I(s),q=B({type:f,property:p($[0].replace(t,d)),value:U?p(U[0].replace(t,d)):d});return I(o),q}}function O(){var B=[];A(B);for(var $;$=k();)$!==!1&&(B.push($),A(B));return B}return C(),O()};function p(g){return g?g.replace(a,d):d}return KA}var RU;function w6e(){if(RU)return Zg;RU=1;var t=Zg&&Zg.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Zg,"__esModule",{value:!0}),Zg.default=n;var e=t(x6e());function n(r,i){var s=null;if(!r||typeof r!="string")return s;var o=(0,e.default)(r),a=typeof i=="function";return o.forEach(function(c){if(c.type==="declaration"){var l=c.property,u=c.value;a?i(l,u,c):u&&(s=s||{},s[l]=u)}}),s}return Zg}var lx={},kU;function _6e(){if(kU)return lx;kU=1,Object.defineProperty(lx,"__esModule",{value:!0}),lx.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(l){return!l||n.test(l)||t.test(l)},o=function(l,u){return u.toUpperCase()},a=function(l,u){return"".concat(u,"-")},c=function(l,u){return u===void 0&&(u={}),s(l)?l:(l=l.toLowerCase(),u.reactCompat?l=l.replace(i,a):l=l.replace(r,a),l.replace(e,o))};return lx.camelCase=c,lx}var cx,OU;function S6e(){if(OU)return cx;OU=1;var t=cx&&cx.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=t(w6e()),n=_6e();function r(i,s){var o={};return!i||typeof i!="string"||(0,e.default)(i,function(a,c){a&&c&&(o[(0,n.camelCase)(a,s)]=c)}),o}return r.default=r,cx=r,cx}var E6e=S6e();const T6e=ah(E6e),TY=IY("end"),B4=IY("start");function IY(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function I6e(t){const e=B4(t),n=TY(t);if(e&&n)return{start:e,end:n}}function Kx(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?NU(t.position):"start"in t||"end"in t?NU(t):"line"in t||"column"in t?Fk(t):""}function Fk(t){return LU(t&&t.line)+":"+LU(t&&t.column)}function NU(t){return Fk(t&&t.start)+"-"+Fk(t&&t.end)}function LU(t){return t&&typeof t=="number"?t:1}class lo extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?s.ruleId=r:(s.source=r.slice(0,c),s.ruleId=r.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=Kx(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}lo.prototype.file="";lo.prototype.name="";lo.prototype.reason="";lo.prototype.message="";lo.prototype.stack="";lo.prototype.column=void 0;lo.prototype.line=void 0;lo.prototype.ancestors=void 0;lo.prototype.cause=void 0;lo.prototype.fatal=void 0;lo.prototype.place=void 0;lo.prototype.ruleId=void 0;lo.prototype.source=void 0;const F4={}.hasOwnProperty,P6e=new Map,C6e=/[A-Z]/g,M6e=new Set(["table","tbody","thead","tfoot","tr"]),A6e=new Set(["td","th"]),PY="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function R6e(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=U6e(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=F6e(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?D4:v6e,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=CY(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function CY(t,e,n){if(e.type==="element")return k6e(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return O6e(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return L6e(t,e,n);if(e.type==="mdxjsEsm")return N6e(t,e);if(e.type==="root")return D6e(t,e,n);if(e.type==="text")return B6e(t,e)}function k6e(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=D4,t.schema=i),t.ancestors.push(e);const s=AY(t,e.tagName,!1),o=$6e(t,e);let a=$4(t,e);return M6e.has(e.tagName)&&(a=a.filter(function(c){return typeof c=="string"?!l6e(c):!0})),MY(t,o,s,e),U4(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function O6e(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}Ow(t,e.position)}function N6e(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Ow(t,e.position)}function L6e(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=D4,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:AY(t,e.name,!0),o=z6e(t,e),a=$4(t,e);return MY(t,o,s,e),U4(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function D6e(t,e,n){const r={};return U4(r,$4(t,e)),t.create(e,t.Fragment,r,n)}function B6e(t,e){return e.value}function MY(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function U4(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function F6e(t,e,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:e;return a?l(s,o,a):l(s,o)}}function U6e(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),c=B4(r);return e(i,s,o,a,{columnNumber:c?c.column-1:void 0,fileName:t,lineNumber:c?c.line:void 0},void 0)}}function $6e(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&F4.call(e.properties,i)){const s=H6e(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&A6e.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function z6e(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else Ow(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else Ow(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function $4(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:P6e;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const l=i.get(c)||0;o=c+"-"+l,i.set(c,l+1)}}const a=CY(t,s,o);a!==void 0&&n.push(a)}return n}function H6e(t,e,n){const r=m6e(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?r6e(n):b6e(n)),r.property==="style"){let i=typeof n=="object"?n:V6e(t,String(n));return t.stylePropertyNameCase==="css"&&(i=W6e(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?f6e[r.property]||r.property:r.attribute,n]}}function V6e(t,e){try{return T6e(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new lo("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=PY+"#cannot-parse-style-attribute",i}}function AY(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=IU(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=IU(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return F4.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);Ow(t)}function Ow(t,e){const n=new lo("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=PY+"#cannot-handle-mdx-estrees-without-createevaluater",n}function W6e(t){const e={};let n;for(n in t)F4.call(t,n)&&(e[j6e(n)]=t[n]);return e}function j6e(t){let e=t.replace(C6e,q6e);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function q6e(t){return"-"+t.toLowerCase()}const GA={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},K6e={};function G6e(t,e){const n=K6e,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return RY(t,r,i)}function RY(t,e,n){if(X6e(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return DU(t.children,e,n)}return Array.isArray(t)?DU(t,e,n):""}function DU(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=RY(t[i],e,n);return r.join("")}function X6e(t){return!!(t&&typeof t=="object")}const BU=document.createElement("i");function z4(t){const e="&"+t+";";BU.innerHTML=e;const n=BU.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function cu(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function ul(t,e){return t.length>0?(cu(t,t.length,0,e),t):e}const FU={}.hasOwnProperty;function Y6e(t){const e={};let n=-1;for(;++n<t.length;)Z6e(e,t[n]);return e}function Z6e(t,e){let n;for(n in e){const i=(FU.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){FU.call(i,o)||(i[o]=[]);const a=s[o];J6e(i[o],Array.isArray(a)?a:a?[a]:[])}}}function J6e(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);cu(t,0,0,r)}function kY(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Oy(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Xc=gh(/[A-Za-z]/),Aa=gh(/[\dA-Za-z]/),Q6e=gh(/[#-'*+\--9=?A-Z^-~]/);function Uk(t){return t!==null&&(t<32||t===127)}const $k=gh(/\d/),e8e=gh(/[\dA-Fa-f]/),t8e=gh(/[!-/:-@[-`{-~]/);function wn(t){return t!==null&&t<-2}function na(t){return t!==null&&(t<0||t===32)}function wr(t){return t===-2||t===-1||t===32}const n8e=gh(new RegExp("\\p{P}|\\p{S}","u")),r8e=gh(/\s/);function gh(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Mv(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&Aa(t.charCodeAt(n+1))&&Aa(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function Xr(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(c){return wr(c)?(t.enter(n),a(c)):e(c)}function a(c){return wr(c)&&s++<i?(t.consume(c),a):(t.exit(n),e(c))}}const i8e={tokenize:s8e};function s8e(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Xr(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const c=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return wn(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const o8e={tokenize:a8e},UU={tokenize:l8e};function a8e(t){const e=this,n=[];let r=0,i,s,o;return a;function a(x){if(r<n.length){const S=n[r];return e.containerState=S[1],t.attempt(S[0].continuation,c,l)(x)}return l(x)}function c(x){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&b();const S=e.events.length;let P=S,_;for(;P--;)if(e.events[P][0]==="exit"&&e.events[P][1].type==="chunkFlow"){_=e.events[P][1].end;break}y(r);let I=S;for(;I<e.events.length;)e.events[I][1].end={..._},I++;return cu(e.events,P+1,0,e.events.slice(S)),e.events.length=I,l(x)}return a(x)}function l(x){if(r===n.length){if(!i)return h(x);if(i.currentConstruct&&i.currentConstruct.concrete)return p(x);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(UU,u,d)(x)}function u(x){return i&&b(),y(r),h(x)}function d(x){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,p(x)}function h(x){return e.containerState={},t.attempt(UU,f,p)(x)}function f(x){return r++,n.push([e.currentConstruct,e.containerState]),h(x)}function p(x){if(x===null){i&&b(),y(0),t.consume(x);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),g(x)}function g(x){if(x===null){m(t.exit("chunkFlow"),!0),y(0),t.consume(x);return}return wn(x)?(t.consume(x),m(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(x),g)}function m(x,S){const P=e.sliceStream(x);if(S&&P.push(null),x.previous=s,s&&(s.next=x),s=x,i.defineSkip(x.start),i.write(P),e.parser.lazy[x.start.line]){let _=i.events.length;for(;_--;)if(i.events[_][1].start.offset<o&&(!i.events[_][1].end||i.events[_][1].end.offset>o))return;const I=e.events.length;let C=I,A,M;for(;C--;)if(e.events[C][0]==="exit"&&e.events[C][1].type==="chunkFlow"){if(A){M=e.events[C][1].end;break}A=!0}for(y(r),_=I;_<e.events.length;)e.events[_][1].end={...M},_++;cu(e.events,C+1,0,e.events.slice(I)),e.events.length=_}}function y(x){let S=n.length;for(;S-- >x;){const P=n[S];e.containerState=P[1],P[0].exit.call(e,t)}n.length=x}function b(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function l8e(t,e,n){return Xr(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function $U(t){if(t===null||na(t)||r8e(t))return 1;if(n8e(t))return 2}function H4(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const zk={name:"attention",resolveAll:c8e,tokenize:u8e};function c8e(t,e){let n=-1,r,i,s,o,a,c,l,u;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;c=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const d={...t[r][1].end},h={...t[n][1].start};zU(d,-c),zU(h,c),o={type:c>1?"strongSequence":"emphasisSequence",start:d,end:{...t[r][1].end}},a={type:c>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:h},s={type:c>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:c>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},l=[],t[r][1].end.offset-t[r][1].start.offset&&(l=ul(l,[["enter",t[r][1],e],["exit",t[r][1],e]])),l=ul(l,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),l=ul(l,H4(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),l=ul(l,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(u=2,l=ul(l,[["enter",t[n][1],e],["exit",t[n][1],e]])):u=0,cu(t,r-1,n-r+3,l),n=r+l.length-u-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function u8e(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=$U(r);let s;return o;function o(c){return s=c,t.enter("attentionSequence"),a(c)}function a(c){if(c===s)return t.consume(c),a;const l=t.exit("attentionSequence"),u=$U(c),d=!u||u===2&&i||n.includes(c),h=!i||i===2&&u||n.includes(r);return l._open=!!(s===42?d:d&&(i||!h)),l._close=!!(s===42?h:h&&(u||!d)),e(c)}}function zU(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const d8e={name:"autolink",tokenize:f8e};function f8e(t,e,n){let r=0;return i;function i(f){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(f){return Xc(f)?(t.consume(f),o):f===64?n(f):l(f)}function o(f){return f===43||f===45||f===46||Aa(f)?(r=1,a(f)):l(f)}function a(f){return f===58?(t.consume(f),r=0,c):(f===43||f===45||f===46||Aa(f))&&r++<32?(t.consume(f),a):(r=0,l(f))}function c(f){return f===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):f===null||f===32||f===60||Uk(f)?n(f):(t.consume(f),c)}function l(f){return f===64?(t.consume(f),u):Q6e(f)?(t.consume(f),l):n(f)}function u(f){return Aa(f)?d(f):n(f)}function d(f){return f===46?(t.consume(f),r=0,u):f===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):h(f)}function h(f){if((f===45||Aa(f))&&r++<63){const p=f===45?h:d;return t.consume(f),p}return n(f)}}const XP={partial:!0,tokenize:h8e};function h8e(t,e,n){return r;function r(s){return wr(s)?Xr(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||wn(s)?e(s):n(s)}}const OY={continuation:{tokenize:m8e},exit:g8e,name:"blockQuote",tokenize:p8e};function p8e(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return wr(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function m8e(t,e,n){const r=this;return i;function i(o){return wr(o)?Xr(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(OY,e,n)(o)}}function g8e(t){t.exit("blockQuote")}const NY={name:"characterEscape",tokenize:y8e};function y8e(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return t8e(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const LY={name:"characterReference",tokenize:v8e};function v8e(t,e,n){const r=this;let i=0,s,o;return a;function a(d){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),c}function c(d){return d===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(d),t.exit("characterReferenceMarkerNumeric"),l):(t.enter("characterReferenceValue"),s=31,o=Aa,u(d))}function l(d){return d===88||d===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(d),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=e8e,u):(t.enter("characterReferenceValue"),s=7,o=$k,u(d))}function u(d){if(d===59&&i){const h=t.exit("characterReferenceValue");return o===Aa&&!z4(r.sliceSerialize(h))?n(d):(t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(d)&&i++<s?(t.consume(d),u):n(d)}}const HU={partial:!0,tokenize:x8e},VU={concrete:!0,name:"codeFenced",tokenize:b8e};function b8e(t,e,n){const r=this,i={partial:!0,tokenize:P};let s=0,o=0,a;return c;function c(_){return l(_)}function l(_){const I=r.events[r.events.length-1];return s=I&&I[1].type==="linePrefix"?I[2].sliceSerialize(I[1],!0).length:0,a=_,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(_)}function u(_){return _===a?(o++,t.consume(_),u):o<3?n(_):(t.exit("codeFencedFenceSequence"),wr(_)?Xr(t,d,"whitespace")(_):d(_))}function d(_){return _===null||wn(_)?(t.exit("codeFencedFence"),r.interrupt?e(_):t.check(HU,g,S)(_)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),h(_))}function h(_){return _===null||wn(_)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),d(_)):wr(_)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Xr(t,f,"whitespace")(_)):_===96&&_===a?n(_):(t.consume(_),h)}function f(_){return _===null||wn(_)?d(_):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),p(_))}function p(_){return _===null||wn(_)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),d(_)):_===96&&_===a?n(_):(t.consume(_),p)}function g(_){return t.attempt(i,S,m)(_)}function m(_){return t.enter("lineEnding"),t.consume(_),t.exit("lineEnding"),y}function y(_){return s>0&&wr(_)?Xr(t,b,"linePrefix",s+1)(_):b(_)}function b(_){return _===null||wn(_)?t.check(HU,g,S)(_):(t.enter("codeFlowValue"),x(_))}function x(_){return _===null||wn(_)?(t.exit("codeFlowValue"),b(_)):(t.consume(_),x)}function S(_){return t.exit("codeFenced"),e(_)}function P(_,I,C){let A=0;return M;function M(U){return _.enter("lineEnding"),_.consume(U),_.exit("lineEnding"),k}function k(U){return _.enter("codeFencedFence"),wr(U)?Xr(_,O,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(U):O(U)}function O(U){return U===a?(_.enter("codeFencedFenceSequence"),B(U)):C(U)}function B(U){return U===a?(A++,_.consume(U),B):A>=o?(_.exit("codeFencedFenceSequence"),wr(U)?Xr(_,$,"whitespace")(U):$(U)):C(U)}function $(U){return U===null||wn(U)?(_.exit("codeFencedFence"),I(U)):C(U)}}}function x8e(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const XA={name:"codeIndented",tokenize:_8e},w8e={partial:!0,tokenize:S8e};function _8e(t,e,n){const r=this;return i;function i(l){return t.enter("codeIndented"),Xr(t,s,"linePrefix",5)(l)}function s(l){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?c(l):wn(l)?t.attempt(w8e,o,c)(l):(t.enter("codeFlowValue"),a(l))}function a(l){return l===null||wn(l)?(t.exit("codeFlowValue"),o(l)):(t.consume(l),a)}function c(l){return t.exit("codeIndented"),e(l)}}function S8e(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):wn(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):Xr(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):wn(o)?i(o):n(o)}}const E8e={name:"codeText",previous:I8e,resolve:T8e,tokenize:P8e};function T8e(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function I8e(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function P8e(t,e,n){let r=0,i,s;return o;function o(d){return t.enter("codeText"),t.enter("codeTextSequence"),a(d)}function a(d){return d===96?(t.consume(d),r++,a):(t.exit("codeTextSequence"),c(d))}function c(d){return d===null?n(d):d===32?(t.enter("space"),t.consume(d),t.exit("space"),c):d===96?(s=t.enter("codeTextSequence"),i=0,u(d)):wn(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),c):(t.enter("codeTextData"),l(d))}function l(d){return d===null||d===32||d===96||wn(d)?(t.exit("codeTextData"),c(d)):(t.consume(d),l)}function u(d){return d===96?(t.consume(d),i++,u):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(d)):(s.type="codeTextData",l(d))}}class C8e{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&ux(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),ux(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),ux(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);ux(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);ux(this.left,n.reverse())}}}function ux(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function DY(t){const e={};let n=-1,r,i,s,o,a,c,l;const u=new C8e(t);for(;++n<u.length;){for(;n in e;)n=e[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,M8e(u,n)),n=e[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=u.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...u.get(i)[1].start},a=u.slice(i,n),a.unshift(r),u.splice(i,n-i+1,a))}}return cu(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!l}function M8e(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,c=[],l={};let u,d,h=-1,f=n,p=0,g=0;const m=[g];for(;f;){for(;t.get(++i)[1]!==f;);s.push(i),f._tokenizer||(u=r.sliceStream(f),f.next||u.push(null),d&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=f,f=f.next}for(f=n;++h<a.length;)a[h][0]==="exit"&&a[h-1][0]==="enter"&&a[h][1].type===a[h-1][1].type&&a[h][1].start.line!==a[h][1].end.line&&(g=h+1,m.push(g),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):m.pop(),h=m.length;h--;){const y=a.slice(m[h],m[h+1]),b=s.pop();c.push([b,b+y.length-1]),t.splice(b,2,y)}for(c.reverse(),h=-1;++h<c.length;)l[p+c[h][0]]=p+c[h][1],p+=c[h][1]-c[h][0]-1;return l}const A8e={resolve:k8e,tokenize:O8e},R8e={partial:!0,tokenize:N8e};function k8e(t){return DY(t),t}function O8e(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):wn(a)?t.check(R8e,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function N8e(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Xr(t,s,"linePrefix")}function s(o){if(o===null||wn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function BY(t,e,n,r,i,s,o,a,c){const l=c||Number.POSITIVE_INFINITY;let u=0;return d;function d(y){return y===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(y),t.exit(s),h):y===null||y===32||y===41||Uk(y)?n(y):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),g(y))}function h(y){return y===62?(t.enter(s),t.consume(y),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),f(y))}function f(y){return y===62?(t.exit("chunkString"),t.exit(a),h(y)):y===null||y===60||wn(y)?n(y):(t.consume(y),y===92?p:f)}function p(y){return y===60||y===62||y===92?(t.consume(y),f):f(y)}function g(y){return!u&&(y===null||y===41||na(y))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(y)):u<l&&y===40?(t.consume(y),u++,g):y===41?(t.consume(y),u--,g):y===null||y===32||y===40||Uk(y)?n(y):(t.consume(y),y===92?m:g)}function m(y){return y===40||y===41||y===92?(t.consume(y),g):g(y)}}function FY(t,e,n,r,i,s){const o=this;let a=0,c;return l;function l(f){return t.enter(r),t.enter(i),t.consume(f),t.exit(i),t.enter(s),u}function u(f){return a>999||f===null||f===91||f===93&&!c||f===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(f):f===93?(t.exit(s),t.enter(i),t.consume(f),t.exit(i),t.exit(r),e):wn(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===null||f===91||f===93||wn(f)||a++>999?(t.exit("chunkString"),u(f)):(t.consume(f),c||(c=!wr(f)),f===92?h:d)}function h(f){return f===91||f===92||f===93?(t.consume(f),a++,d):d(f)}}function UY(t,e,n,r,i,s){let o;return a;function a(h){return h===34||h===39||h===40?(t.enter(r),t.enter(i),t.consume(h),t.exit(i),o=h===40?41:h,c):n(h)}function c(h){return h===o?(t.enter(i),t.consume(h),t.exit(i),t.exit(r),e):(t.enter(s),l(h))}function l(h){return h===o?(t.exit(s),c(o)):h===null?n(h):wn(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),Xr(t,l,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(h))}function u(h){return h===o||h===null||wn(h)?(t.exit("chunkString"),l(h)):(t.consume(h),h===92?d:u)}function d(h){return h===o||h===92?(t.consume(h),u):u(h)}}function Gx(t,e){let n;return r;function r(i){return wn(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):wr(i)?Xr(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const L8e={name:"definition",tokenize:B8e},D8e={partial:!0,tokenize:F8e};function B8e(t,e,n){const r=this;let i;return s;function s(f){return t.enter("definition"),o(f)}function o(f){return FY.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function a(f){return i=Oy(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(t.enter("definitionMarker"),t.consume(f),t.exit("definitionMarker"),c):n(f)}function c(f){return na(f)?Gx(t,l)(f):l(f)}function l(f){return BY(t,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function u(f){return t.attempt(D8e,d,d)(f)}function d(f){return wr(f)?Xr(t,h,"whitespace")(f):h(f)}function h(f){return f===null||wn(f)?(t.exit("definition"),r.parser.defined.push(i),e(f)):n(f)}}function F8e(t,e,n){return r;function r(a){return na(a)?Gx(t,i)(a):n(a)}function i(a){return UY(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return wr(a)?Xr(t,o,"whitespace")(a):o(a)}function o(a){return a===null||wn(a)?e(a):n(a)}}const U8e={name:"hardBreakEscape",tokenize:$8e};function $8e(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return wn(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const z8e={name:"headingAtx",resolve:H8e,tokenize:V8e};function H8e(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},cu(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function V8e(t,e,n){let r=0;return i;function i(u){return t.enter("atxHeading"),s(u)}function s(u){return t.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(t.consume(u),o):u===null||na(u)?(t.exit("atxHeadingSequence"),a(u)):n(u)}function a(u){return u===35?(t.enter("atxHeadingSequence"),c(u)):u===null||wn(u)?(t.exit("atxHeading"),e(u)):wr(u)?Xr(t,a,"whitespace")(u):(t.enter("atxHeadingText"),l(u))}function c(u){return u===35?(t.consume(u),c):(t.exit("atxHeadingSequence"),a(u))}function l(u){return u===null||u===35||na(u)?(t.exit("atxHeadingText"),a(u)):(t.consume(u),l)}}const W8e=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],WU=["pre","script","style","textarea"],j8e={concrete:!0,name:"htmlFlow",resolveTo:G8e,tokenize:X8e},q8e={partial:!0,tokenize:Z8e},K8e={partial:!0,tokenize:Y8e};function G8e(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function X8e(t,e,n){const r=this;let i,s,o,a,c;return l;function l(Z){return u(Z)}function u(Z){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(Z),d}function d(Z){return Z===33?(t.consume(Z),h):Z===47?(t.consume(Z),s=!0,g):Z===63?(t.consume(Z),i=3,r.interrupt?e:j):Xc(Z)?(t.consume(Z),o=String.fromCharCode(Z),m):n(Z)}function h(Z){return Z===45?(t.consume(Z),i=2,f):Z===91?(t.consume(Z),i=5,a=0,p):Xc(Z)?(t.consume(Z),i=4,r.interrupt?e:j):n(Z)}function f(Z){return Z===45?(t.consume(Z),r.interrupt?e:j):n(Z)}function p(Z){const ie="CDATA[";return Z===ie.charCodeAt(a++)?(t.consume(Z),a===ie.length?r.interrupt?e:O:p):n(Z)}function g(Z){return Xc(Z)?(t.consume(Z),o=String.fromCharCode(Z),m):n(Z)}function m(Z){if(Z===null||Z===47||Z===62||na(Z)){const ie=Z===47,pe=o.toLowerCase();return!ie&&!s&&WU.includes(pe)?(i=1,r.interrupt?e(Z):O(Z)):W8e.includes(o.toLowerCase())?(i=6,ie?(t.consume(Z),y):r.interrupt?e(Z):O(Z)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(Z):s?b(Z):x(Z))}return Z===45||Aa(Z)?(t.consume(Z),o+=String.fromCharCode(Z),m):n(Z)}function y(Z){return Z===62?(t.consume(Z),r.interrupt?e:O):n(Z)}function b(Z){return wr(Z)?(t.consume(Z),b):M(Z)}function x(Z){return Z===47?(t.consume(Z),M):Z===58||Z===95||Xc(Z)?(t.consume(Z),S):wr(Z)?(t.consume(Z),x):M(Z)}function S(Z){return Z===45||Z===46||Z===58||Z===95||Aa(Z)?(t.consume(Z),S):P(Z)}function P(Z){return Z===61?(t.consume(Z),_):wr(Z)?(t.consume(Z),P):x(Z)}function _(Z){return Z===null||Z===60||Z===61||Z===62||Z===96?n(Z):Z===34||Z===39?(t.consume(Z),c=Z,I):wr(Z)?(t.consume(Z),_):C(Z)}function I(Z){return Z===c?(t.consume(Z),c=null,A):Z===null||wn(Z)?n(Z):(t.consume(Z),I)}function C(Z){return Z===null||Z===34||Z===39||Z===47||Z===60||Z===61||Z===62||Z===96||na(Z)?P(Z):(t.consume(Z),C)}function A(Z){return Z===47||Z===62||wr(Z)?x(Z):n(Z)}function M(Z){return Z===62?(t.consume(Z),k):n(Z)}function k(Z){return Z===null||wn(Z)?O(Z):wr(Z)?(t.consume(Z),k):n(Z)}function O(Z){return Z===45&&i===2?(t.consume(Z),q):Z===60&&i===1?(t.consume(Z),K):Z===62&&i===4?(t.consume(Z),Q):Z===63&&i===3?(t.consume(Z),j):Z===93&&i===5?(t.consume(Z),G):wn(Z)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(q8e,se,B)(Z)):Z===null||wn(Z)?(t.exit("htmlFlowData"),B(Z)):(t.consume(Z),O)}function B(Z){return t.check(K8e,$,se)(Z)}function $(Z){return t.enter("lineEnding"),t.consume(Z),t.exit("lineEnding"),U}function U(Z){return Z===null||wn(Z)?B(Z):(t.enter("htmlFlowData"),O(Z))}function q(Z){return Z===45?(t.consume(Z),j):O(Z)}function K(Z){return Z===47?(t.consume(Z),o="",V):O(Z)}function V(Z){if(Z===62){const ie=o.toLowerCase();return WU.includes(ie)?(t.consume(Z),Q):O(Z)}return Xc(Z)&&o.length<8?(t.consume(Z),o+=String.fromCharCode(Z),V):O(Z)}function G(Z){return Z===93?(t.consume(Z),j):O(Z)}function j(Z){return Z===62?(t.consume(Z),Q):Z===45&&i===2?(t.consume(Z),j):O(Z)}function Q(Z){return Z===null||wn(Z)?(t.exit("htmlFlowData"),se(Z)):(t.consume(Z),Q)}function se(Z){return t.exit("htmlFlow"),e(Z)}}function Y8e(t,e,n){const r=this;return i;function i(o){return wn(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function Z8e(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(XP,e,n)}}const J8e={name:"htmlText",tokenize:Q8e};function Q8e(t,e,n){const r=this;let i,s,o;return a;function a(j){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(j),c}function c(j){return j===33?(t.consume(j),l):j===47?(t.consume(j),P):j===63?(t.consume(j),x):Xc(j)?(t.consume(j),C):n(j)}function l(j){return j===45?(t.consume(j),u):j===91?(t.consume(j),s=0,p):Xc(j)?(t.consume(j),b):n(j)}function u(j){return j===45?(t.consume(j),f):n(j)}function d(j){return j===null?n(j):j===45?(t.consume(j),h):wn(j)?(o=d,K(j)):(t.consume(j),d)}function h(j){return j===45?(t.consume(j),f):d(j)}function f(j){return j===62?q(j):j===45?h(j):d(j)}function p(j){const Q="CDATA[";return j===Q.charCodeAt(s++)?(t.consume(j),s===Q.length?g:p):n(j)}function g(j){return j===null?n(j):j===93?(t.consume(j),m):wn(j)?(o=g,K(j)):(t.consume(j),g)}function m(j){return j===93?(t.consume(j),y):g(j)}function y(j){return j===62?q(j):j===93?(t.consume(j),y):g(j)}function b(j){return j===null||j===62?q(j):wn(j)?(o=b,K(j)):(t.consume(j),b)}function x(j){return j===null?n(j):j===63?(t.consume(j),S):wn(j)?(o=x,K(j)):(t.consume(j),x)}function S(j){return j===62?q(j):x(j)}function P(j){return Xc(j)?(t.consume(j),_):n(j)}function _(j){return j===45||Aa(j)?(t.consume(j),_):I(j)}function I(j){return wn(j)?(o=I,K(j)):wr(j)?(t.consume(j),I):q(j)}function C(j){return j===45||Aa(j)?(t.consume(j),C):j===47||j===62||na(j)?A(j):n(j)}function A(j){return j===47?(t.consume(j),q):j===58||j===95||Xc(j)?(t.consume(j),M):wn(j)?(o=A,K(j)):wr(j)?(t.consume(j),A):q(j)}function M(j){return j===45||j===46||j===58||j===95||Aa(j)?(t.consume(j),M):k(j)}function k(j){return j===61?(t.consume(j),O):wn(j)?(o=k,K(j)):wr(j)?(t.consume(j),k):A(j)}function O(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(t.consume(j),i=j,B):wn(j)?(o=O,K(j)):wr(j)?(t.consume(j),O):(t.consume(j),$)}function B(j){return j===i?(t.consume(j),i=void 0,U):j===null?n(j):wn(j)?(o=B,K(j)):(t.consume(j),B)}function $(j){return j===null||j===34||j===39||j===60||j===61||j===96?n(j):j===47||j===62||na(j)?A(j):(t.consume(j),$)}function U(j){return j===47||j===62||na(j)?A(j):n(j)}function q(j){return j===62?(t.consume(j),t.exit("htmlTextData"),t.exit("htmlText"),e):n(j)}function K(j){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),V}function V(j){return wr(j)?Xr(t,G,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):G(j)}function G(j){return t.enter("htmlTextData"),o(j)}}const V4={name:"labelEnd",resolveAll:rLe,resolveTo:iLe,tokenize:sLe},eLe={tokenize:oLe},tLe={tokenize:aLe},nLe={tokenize:lLe};function rLe(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&cu(t,0,t.length,n),t}function iLe(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const c={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},l={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},u={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",c,e],["enter",l,e]],a=ul(a,t.slice(s+1,s+r+3)),a=ul(a,[["enter",u,e]]),a=ul(a,H4(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=ul(a,[["exit",u,e],t[o-2],t[o-1],["exit",l,e]]),a=ul(a,t.slice(o+1)),a=ul(a,[["exit",c,e]]),cu(t,s,t.length,a),t}function sLe(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(h){return s?s._inactive?d(h):(o=r.parser.defined.includes(Oy(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(h),t.exit("labelMarker"),t.exit("labelEnd"),c):n(h)}function c(h){return h===40?t.attempt(eLe,u,o?u:d)(h):h===91?t.attempt(tLe,u,o?l:d)(h):o?u(h):d(h)}function l(h){return t.attempt(nLe,u,d)(h)}function u(h){return e(h)}function d(h){return s._balanced=!0,n(h)}}function oLe(t,e,n){return r;function r(d){return t.enter("resource"),t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),i}function i(d){return na(d)?Gx(t,s)(d):s(d)}function s(d){return d===41?u(d):BY(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return na(d)?Gx(t,c)(d):u(d)}function a(d){return n(d)}function c(d){return d===34||d===39||d===40?UY(t,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):u(d)}function l(d){return na(d)?Gx(t,u)(d):u(d)}function u(d){return d===41?(t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),t.exit("resource"),e):n(d)}}function aLe(t,e,n){const r=this;return i;function i(a){return FY.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(Oy(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function lLe(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const cLe={name:"labelStartImage",resolveAll:V4.resolveAll,tokenize:uLe};function uLe(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const dLe={name:"labelStartLink",resolveAll:V4.resolveAll,tokenize:fLe};function fLe(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const YA={name:"lineEnding",tokenize:hLe};function hLe(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),Xr(t,e,"linePrefix")}}const zT={name:"thematicBreak",tokenize:pLe};function pLe(t,e,n){let r=0,i;return s;function s(l){return t.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(t.enter("thematicBreakSequence"),c(l)):r>=3&&(l===null||wn(l))?(t.exit("thematicBreak"),e(l)):n(l)}function c(l){return l===i?(t.consume(l),r++,c):(t.exit("thematicBreakSequence"),wr(l)?Xr(t,a,"whitespace")(l):a(l))}}const qo={continuation:{tokenize:vLe},exit:xLe,name:"list",tokenize:yLe},mLe={partial:!0,tokenize:wLe},gLe={partial:!0,tokenize:bLe};function yLe(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(f){const p=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:$k(f)){if(r.containerState.type||(r.containerState.type=p,t.enter(p,{_container:!0})),p==="listUnordered")return t.enter("listItemPrefix"),f===42||f===45?t.check(zT,n,l)(f):l(f);if(!r.interrupt||f===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),c(f)}return n(f)}function c(f){return $k(f)&&++o<10?(t.consume(f),c):(!r.interrupt||o<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(t.exit("listItemValue"),l(f)):n(f)}function l(f){return t.enter("listItemMarker"),t.consume(f),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,t.check(XP,r.interrupt?n:u,t.attempt(mLe,h,d))}function u(f){return r.containerState.initialBlankLine=!0,s++,h(f)}function d(f){return wr(f)?(t.enter("listItemPrefixWhitespace"),t.consume(f),t.exit("listItemPrefixWhitespace"),h):n(f)}function h(f){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(f)}}function vLe(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(XP,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Xr(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!wr(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(gLe,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Xr(t,t.attempt(qo,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function bLe(t,e,n){const r=this;return Xr(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function xLe(t){t.exit(this.containerState.type)}function wLe(t,e,n){const r=this;return Xr(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!wr(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const jU={name:"setextUnderline",resolveTo:_Le,tokenize:SLe};function _Le(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function SLe(t,e,n){const r=this;let i;return s;function s(l){let u=r.events.length,d;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){d=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(t.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return t.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(t.consume(l),a):(t.exit("setextHeadingLineSequence"),wr(l)?Xr(t,c,"lineSuffix")(l):c(l))}function c(l){return l===null||wn(l)?(t.exit("setextHeadingLine"),e(l)):n(l)}}const ELe={tokenize:TLe};function TLe(t){const e=this,n=t.attempt(XP,r,t.attempt(this.parser.constructs.flowInitial,i,Xr(t,t.attempt(this.parser.constructs.flow,i,t.attempt(A8e,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const ILe={resolveAll:zY()},PLe=$Y("string"),CLe=$Y("text");function $Y(t){return{resolveAll:zY(t==="text"?MLe:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(u){return l(u)?s(u):a(u)}function a(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),c}function c(u){return l(u)?(n.exit("data"),s(u)):(n.consume(u),c)}function l(u){if(u===null)return!0;const d=i[u];let h=-1;if(d)for(;++h<d.length;){const f=d[h];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function zY(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function MLe(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,c;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)c=!0,a++;else if(l!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const l={type:n===t.length||c||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...l.start},r.start.offset===r.end.offset?Object.assign(r,l):(t.splice(n,0,["enter",l,e],["exit",l,e]),n+=2)}n++}return t}const ALe={42:qo,43:qo,45:qo,48:qo,49:qo,50:qo,51:qo,52:qo,53:qo,54:qo,55:qo,56:qo,57:qo,62:OY},RLe={91:L8e},kLe={[-2]:XA,[-1]:XA,32:XA},OLe={35:z8e,42:zT,45:[jU,zT],60:j8e,61:jU,95:zT,96:VU,126:VU},NLe={38:LY,92:NY},LLe={[-5]:YA,[-4]:YA,[-3]:YA,33:cLe,38:LY,42:zk,60:[d8e,J8e],91:dLe,92:[U8e,NY],93:V4,95:zk,96:E8e},DLe={null:[zk,ILe]},BLe={null:[42,95]},FLe={null:[]},ULe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:BLe,contentInitial:RLe,disable:FLe,document:ALe,flow:OLe,flowInitial:kLe,insideSpan:DLe,string:NLe,text:LLe},Symbol.toStringTag,{value:"Module"}));function $Le(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const c={attempt:I(P),check:I(_),consume:b,enter:x,exit:S,interrupt:I(_,{interrupt:!0})},l={code:null,containerState:{},defineSkip:g,events:[],now:p,parser:t,previous:null,sliceSerialize:h,sliceStream:f,write:d};let u=e.tokenize.call(l,c);return e.resolveAll&&s.push(e),l;function d(k){return o=ul(o,k),m(),o[o.length-1]!==null?[]:(C(e,0),l.events=H4(s,l.events,l),l.events)}function h(k,O){return HLe(f(k),O)}function f(k){return zLe(o,k)}function p(){const{_bufferIndex:k,_index:O,line:B,column:$,offset:U}=r;return{_bufferIndex:k,_index:O,line:B,column:$,offset:U}}function g(k){i[k.line]=k.column,M()}function m(){let k;for(;r._index<o.length;){const O=o[r._index];if(typeof O=="string")for(k=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===k&&r._bufferIndex<O.length;)y(O.charCodeAt(r._bufferIndex));else y(O)}}function y(k){u=u(k)}function b(k){wn(k)?(r.line++,r.column=1,r.offset+=k===-3?2:1,M()):k!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=k}function x(k,O){const B=O||{};return B.type=k,B.start=p(),l.events.push(["enter",B,l]),a.push(B),B}function S(k){const O=a.pop();return O.end=p(),l.events.push(["exit",O,l]),O}function P(k,O){C(k,O.from)}function _(k,O){O.restore()}function I(k,O){return B;function B($,U,q){let K,V,G,j;return Array.isArray($)?se($):"tokenize"in $?se([$]):Q($);function Q(ue){return le;function le(ae){const _e=ae!==null&&ue[ae],ye=ae!==null&&ue.null,Ae=[...Array.isArray(_e)?_e:_e?[_e]:[],...Array.isArray(ye)?ye:ye?[ye]:[]];return se(Ae)(ae)}}function se(ue){return K=ue,V=0,ue.length===0?q:Z(ue[V])}function Z(ue){return le;function le(ae){return j=A(),G=ue,ue.partial||(l.currentConstruct=ue),ue.name&&l.parser.constructs.disable.null.includes(ue.name)?pe():ue.tokenize.call(O?Object.assign(Object.create(l),O):l,c,ie,pe)(ae)}}function ie(ue){return k(G,j),U}function pe(ue){return j.restore(),++V<K.length?Z(K[V]):q}}}function C(k,O){k.resolveAll&&!s.includes(k)&&s.push(k),k.resolve&&cu(l.events,O,l.events.length-O,k.resolve(l.events.slice(O),l)),k.resolveTo&&(l.events=k.resolveTo(l.events,l))}function A(){const k=p(),O=l.previous,B=l.currentConstruct,$=l.events.length,U=Array.from(a);return{from:$,restore:q};function q(){r=k,l.previous=O,l.currentConstruct=B,l.events.length=$,a=U,M()}}function M(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function zLe(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function HLe(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function VLe(t){const r={constructs:Y6e([ULe,...(t||{}).extensions||[]]),content:i(i8e),defined:[],document:i(o8e),flow:i(ELe),lazy:{},string:i(PLe),text:i(CLe)};return r;function i(s){return o;function o(a){return $Le(r,s,a)}}}function WLe(t){for(;!DY(t););return t}const qU=/[\0\t\n\r]/g;function jLe(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const c=[];let l,u,d,h,f;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),d=0,e="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(qU.lastIndex=d,l=qU.exec(s),h=l&&l.index!==void 0?l.index:s.length,f=s.charCodeAt(h),!l){e=s.slice(d);break}if(f===10&&d===h&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),d<h&&(c.push(s.slice(d,h)),t+=h-d),f){case 0:{c.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,c.push(-2);t++<u;)c.push(-1);break}case 10:{c.push(-4),t=1;break}default:r=!0,t=1}d=h+1}return a&&(r&&c.push(-5),e&&c.push(e),c.push(null)),c}}const qLe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function KLe(t){return t.replace(qLe,GLe)}function GLe(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return kY(n.slice(s?2:1),s?16:10)}return z4(n)||t}const HY={}.hasOwnProperty;function XLe(t,e,n){return typeof e!="string"&&(n=e,e=void 0),YLe(n)(WLe(VLe(n).document().write(jLe()(t,e,!0))))}function YLe(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(je),autolinkProtocol:A,autolinkEmail:A,atxHeading:s(Ge),blockQuote:s(ye),characterEscape:A,characterReference:A,codeFenced:s(Ae),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ae,o),codeText:s(Oe,o),codeTextData:A,data:A,codeFlowValue:A,definition:s(Be),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(ce),hardBreakEscape:s(Pe),hardBreakTrailing:s(Pe),htmlFlow:s(He,o),htmlFlowData:A,htmlText:s(He,o),htmlTextData:A,image:s(Re),label:o,link:s(je),listItem:s(ee),listItemValue:h,listOrdered:s(te,d),listUnordered:s(te),paragraph:s(X),reference:Z,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Ge),strong:s(we),thematicBreak:s(We)},exit:{atxHeading:c(),atxHeadingSequence:P,autolink:c(),autolinkEmail:_e,autolinkProtocol:ae,blockQuote:c(),characterEscapeValue:M,characterReferenceMarkerHexadecimal:pe,characterReferenceMarkerNumeric:pe,characterReferenceValue:ue,characterReference:le,codeFenced:c(m),codeFencedFence:g,codeFencedFenceInfo:f,codeFencedFenceMeta:p,codeFlowValue:M,codeIndented:c(y),codeText:c(U),codeTextData:M,data:M,definition:c(),definitionDestinationString:S,definitionLabelString:b,definitionTitleString:x,emphasis:c(),hardBreakEscape:c(O),hardBreakTrailing:c(O),htmlFlow:c(B),htmlFlowData:M,htmlText:c($),htmlTextData:M,image:c(K),label:G,labelText:V,lineEnding:k,link:c(q),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:ie,resourceDestinationString:j,resourceTitleString:Q,resource:se,setextHeading:c(C),setextHeadingLineSequence:I,setextHeadingText:_,strong:c(),thematicBreak:c()}};VY(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(xe){let Ve={type:"root",children:[]};const be={stack:[Ve],tokenStack:[],config:e,enter:a,exit:l,buffer:o,resume:u,data:n},ge=[];let Se=-1;for(;++Se<xe.length;)if(xe[Se][1].type==="listOrdered"||xe[Se][1].type==="listUnordered")if(xe[Se][0]==="enter")ge.push(Se);else{const Ie=ge.pop();Se=i(xe,Ie,Se)}for(Se=-1;++Se<xe.length;){const Ie=e[xe[Se][0]];HY.call(Ie,xe[Se][1].type)&&Ie[xe[Se][1].type].call(Object.assign({sliceSerialize:xe[Se][2].sliceSerialize},be),xe[Se][1])}if(be.tokenStack.length>0){const Ie=be.tokenStack[be.tokenStack.length-1];(Ie[1]||KU).call(be,void 0,Ie[0])}for(Ve.position={start:jf(xe.length>0?xe[0][1].start:{line:1,column:1,offset:0}),end:jf(xe.length>0?xe[xe.length-2][1].end:{line:1,column:1,offset:0})},Se=-1;++Se<e.transforms.length;)Ve=e.transforms[Se](Ve)||Ve;return Ve}function i(xe,Ve,be){let ge=Ve-1,Se=-1,Ie=!1,me,Ee,oe,ne;for(;++ge<=be;){const de=xe[ge];switch(de[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{de[0]==="enter"?Se++:Se--,ne=void 0;break}case"lineEndingBlank":{de[0]==="enter"&&(me&&!ne&&!Se&&!oe&&(oe=ge),ne=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ne=void 0}if(!Se&&de[0]==="enter"&&de[1].type==="listItemPrefix"||Se===-1&&de[0]==="exit"&&(de[1].type==="listUnordered"||de[1].type==="listOrdered")){if(me){let Te=ge;for(Ee=void 0;Te--;){const ke=xe[Te];if(ke[1].type==="lineEnding"||ke[1].type==="lineEndingBlank"){if(ke[0]==="exit")continue;Ee&&(xe[Ee][1].type="lineEndingBlank",Ie=!0),ke[1].type="lineEnding",Ee=Te}else if(!(ke[1].type==="linePrefix"||ke[1].type==="blockQuotePrefix"||ke[1].type==="blockQuotePrefixWhitespace"||ke[1].type==="blockQuoteMarker"||ke[1].type==="listItemIndent"))break}oe&&(!Ee||oe<Ee)&&(me._spread=!0),me.end=Object.assign({},Ee?xe[Ee][1].start:de[1].end),xe.splice(Ee||ge,0,["exit",me,de[2]]),ge++,be++}if(de[1].type==="listItemPrefix"){const Te={type:"listItem",_spread:!1,start:Object.assign({},de[1].start),end:void 0};me=Te,xe.splice(ge,0,["enter",Te,de[2]]),ge++,be++,oe=void 0,ne=!0}}}return xe[Ve][1]._spread=Ie,be}function s(xe,Ve){return be;function be(ge){a.call(this,xe(ge),ge),Ve&&Ve.call(this,ge)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(xe,Ve,be){this.stack[this.stack.length-1].children.push(xe),this.stack.push(xe),this.tokenStack.push([Ve,be||void 0]),xe.position={start:jf(Ve.start),end:void 0}}function c(xe){return Ve;function Ve(be){xe&&xe.call(this,be),l.call(this,be)}}function l(xe,Ve){const be=this.stack.pop(),ge=this.tokenStack.pop();if(ge)ge[0].type!==xe.type&&(Ve?Ve.call(this,xe,ge[0]):(ge[1]||KU).call(this,xe,ge[0]));else throw new Error("Cannot close `"+xe.type+"` ("+Kx({start:xe.start,end:xe.end})+"): its not open");be.position.end=jf(xe.end)}function u(){return G6e(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(xe){if(this.data.expectingFirstListItemValue){const Ve=this.stack[this.stack.length-2];Ve.start=Number.parseInt(this.sliceSerialize(xe),10),this.data.expectingFirstListItemValue=void 0}}function f(){const xe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.lang=xe}function p(){const xe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.meta=xe}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function m(){const xe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=xe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const xe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=xe.replace(/(\r?\n|\r)$/g,"")}function b(xe){const Ve=this.resume(),be=this.stack[this.stack.length-1];be.label=Ve,be.identifier=Oy(this.sliceSerialize(xe)).toLowerCase()}function x(){const xe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.title=xe}function S(){const xe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.url=xe}function P(xe){const Ve=this.stack[this.stack.length-1];if(!Ve.depth){const be=this.sliceSerialize(xe).length;Ve.depth=be}}function _(){this.data.setextHeadingSlurpLineEnding=!0}function I(xe){const Ve=this.stack[this.stack.length-1];Ve.depth=this.sliceSerialize(xe).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function A(xe){const be=this.stack[this.stack.length-1].children;let ge=be[be.length-1];(!ge||ge.type!=="text")&&(ge=Ne(),ge.position={start:jf(xe.start),end:void 0},be.push(ge)),this.stack.push(ge)}function M(xe){const Ve=this.stack.pop();Ve.value+=this.sliceSerialize(xe),Ve.position.end=jf(xe.end)}function k(xe){const Ve=this.stack[this.stack.length-1];if(this.data.atHardBreak){const be=Ve.children[Ve.children.length-1];be.position.end=jf(xe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Ve.type)&&(A.call(this,xe),M.call(this,xe))}function O(){this.data.atHardBreak=!0}function B(){const xe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=xe}function $(){const xe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=xe}function U(){const xe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=xe}function q(){const xe=this.stack[this.stack.length-1];if(this.data.inReference){const Ve=this.data.referenceType||"shortcut";xe.type+="Reference",xe.referenceType=Ve,delete xe.url,delete xe.title}else delete xe.identifier,delete xe.label;this.data.referenceType=void 0}function K(){const xe=this.stack[this.stack.length-1];if(this.data.inReference){const Ve=this.data.referenceType||"shortcut";xe.type+="Reference",xe.referenceType=Ve,delete xe.url,delete xe.title}else delete xe.identifier,delete xe.label;this.data.referenceType=void 0}function V(xe){const Ve=this.sliceSerialize(xe),be=this.stack[this.stack.length-2];be.label=KLe(Ve),be.identifier=Oy(Ve).toLowerCase()}function G(){const xe=this.stack[this.stack.length-1],Ve=this.resume(),be=this.stack[this.stack.length-1];if(this.data.inReference=!0,be.type==="link"){const ge=xe.children;be.children=ge}else be.alt=Ve}function j(){const xe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.url=xe}function Q(){const xe=this.resume(),Ve=this.stack[this.stack.length-1];Ve.title=xe}function se(){this.data.inReference=void 0}function Z(){this.data.referenceType="collapsed"}function ie(xe){const Ve=this.resume(),be=this.stack[this.stack.length-1];be.label=Ve,be.identifier=Oy(this.sliceSerialize(xe)).toLowerCase(),this.data.referenceType="full"}function pe(xe){this.data.characterReferenceType=xe.type}function ue(xe){const Ve=this.sliceSerialize(xe),be=this.data.characterReferenceType;let ge;be?(ge=kY(Ve,be==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ge=z4(Ve);const Se=this.stack[this.stack.length-1];Se.value+=ge}function le(xe){const Ve=this.stack.pop();Ve.position.end=jf(xe.end)}function ae(xe){M.call(this,xe);const Ve=this.stack[this.stack.length-1];Ve.url=this.sliceSerialize(xe)}function _e(xe){M.call(this,xe);const Ve=this.stack[this.stack.length-1];Ve.url="mailto:"+this.sliceSerialize(xe)}function ye(){return{type:"blockquote",children:[]}}function Ae(){return{type:"code",lang:null,meta:null,value:""}}function Oe(){return{type:"inlineCode",value:""}}function Be(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ce(){return{type:"emphasis",children:[]}}function Ge(){return{type:"heading",depth:0,children:[]}}function Pe(){return{type:"break"}}function He(){return{type:"html",value:""}}function Re(){return{type:"image",title:null,url:"",alt:null}}function je(){return{type:"link",title:null,url:"",children:[]}}function te(xe){return{type:"list",ordered:xe.type==="listOrdered",start:null,spread:xe._spread,children:[]}}function ee(xe){return{type:"listItem",spread:xe._spread,checked:null,children:[]}}function X(){return{type:"paragraph",children:[]}}function we(){return{type:"strong",children:[]}}function Ne(){return{type:"text",value:""}}function We(){return{type:"thematicBreak"}}}function jf(t){return{line:t.line,column:t.column,offset:t.offset}}function VY(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?VY(t,r):ZLe(t,r)}}function ZLe(t,e){let n;for(n in e)if(HY.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function KU(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Kx({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Kx({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Kx({start:e.start,end:e.end})+") is still open")}function JLe(t){const e=this;e.parser=n;function n(r){return XLe(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function QLe(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function eDe(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function tDe(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function nDe(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function rDe(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function iDe(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=Mv(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,c);const l={type:"element",tagName:"sup",properties:{},children:[c]};return t.patch(e,l),t.applyData(e,l)}function sDe(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function oDe(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function WY(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function aDe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return WY(t,e);const i={src:Mv(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function lDe(t,e){const n={src:Mv(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function cDe(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function uDe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return WY(t,e);const i={href:Mv(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function dDe(t,e){const n={href:Mv(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function fDe(t,e,n){const r=t.all(e),i=n?hDe(n):jY(e),s={},o=[];if(typeof e.checked=="boolean"){const u=r[0];let d;u&&u.type==="element"&&u.tagName==="p"?d=u:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const u=r[a];(i||a!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?o.push(...u.children):o.push(u)}const c=r[r.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,l),t.applyData(e,l)}function hDe(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=jY(n[r])}return e}function jY(t){const e=t.spread;return e??t.children.length>1}function pDe(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function mDe(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function gDe(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function yDe(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function vDe(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=B4(e.children[1]),c=TY(e.children[e.children.length-1]);a&&c&&(o.position={start:a,end:c}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function bDe(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let c=-1;const l=[];for(;++c<a;){const d=e.children[c],h={},f=o?o[c]:void 0;f&&(h.align=f);let p={type:"element",tagName:s,properties:h,children:[]};d&&(p.children=t.all(d),t.patch(d,p),p=t.applyData(d,p)),l.push(p)}const u={type:"element",tagName:"tr",properties:{},children:t.wrap(l,!0)};return t.patch(e,u),t.applyData(e,u)}function xDe(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const GU=9,XU=32;function wDe(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(YU(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(YU(e.slice(i),i>0,!1)),s.join("")}function YU(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===GU||s===XU;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===GU||s===XU;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function _De(t,e){const n={type:"text",value:wDe(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function SDe(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const EDe={blockquote:QLe,break:eDe,code:tDe,delete:nDe,emphasis:rDe,footnoteReference:iDe,heading:sDe,html:oDe,imageReference:aDe,image:lDe,inlineCode:cDe,linkReference:uDe,link:dDe,listItem:fDe,list:pDe,paragraph:mDe,root:gDe,strong:yDe,table:vDe,tableCell:xDe,tableRow:bDe,text:_De,thematicBreak:SDe,toml:mT,yaml:mT,definition:mT,footnoteDefinition:mT};function mT(){}const qY=-1,YP=0,Xx=1,uI=2,W4=3,j4=4,q4=5,K4=6,KY=7,GY=8,ZU=typeof self=="object"?self:globalThis,TDe=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case YP:case qY:return n(o,i);case Xx:{const a=n([],i);for(const c of o)a.push(r(c));return a}case uI:{const a=n({},i);for(const[c,l]of o)a[r(c)]=r(l);return a}case W4:return n(new Date(o),i);case j4:{const{source:a,flags:c}=o;return n(new RegExp(a,c),i)}case q4:{const a=n(new Map,i);for(const[c,l]of o)a.set(r(c),r(l));return a}case K4:{const a=n(new Set,i);for(const c of o)a.add(r(c));return a}case KY:{const{name:a,message:c}=o;return n(new ZU[a](c),i)}case GY:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new ZU[s](o),i)};return r},JU=t=>TDe(new Map,t)(0),Jg="",{toString:IDe}={},{keys:PDe}=Object,dx=t=>{const e=typeof t;if(e!=="object"||!t)return[YP,e];const n=IDe.call(t).slice(8,-1);switch(n){case"Array":return[Xx,Jg];case"Object":return[uI,Jg];case"Date":return[W4,Jg];case"RegExp":return[j4,Jg];case"Map":return[q4,Jg];case"Set":return[K4,Jg];case"DataView":return[Xx,n]}return n.includes("Array")?[Xx,n]:n.includes("Error")?[KY,n]:[uI,n]},gT=([t,e])=>t===YP&&(e==="function"||e==="symbol"),CDe=(t,e,n,r)=>{const i=(o,a)=>{const c=r.push(o)-1;return n.set(a,c),c},s=o=>{if(n.has(o))return n.get(o);let[a,c]=dx(o);switch(a){case YP:{let u=o;switch(c){case"bigint":a=GY,u=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+c);u=null;break;case"undefined":return i([qY],o)}return i([a,u],o)}case Xx:{if(c){let h=o;return c==="DataView"?h=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(h=new Uint8Array(o)),i([c,[...h]],o)}const u=[],d=i([a,u],o);for(const h of o)u.push(s(h));return d}case uI:{if(c)switch(c){case"BigInt":return i([c,o.toString()],o);case"Boolean":case"Number":case"String":return i([c,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const u=[],d=i([a,u],o);for(const h of PDe(o))(t||!gT(dx(o[h])))&&u.push([s(h),s(o[h])]);return d}case W4:return i([a,o.toISOString()],o);case j4:{const{source:u,flags:d}=o;return i([a,{source:u,flags:d}],o)}case q4:{const u=[],d=i([a,u],o);for(const[h,f]of o)(t||!(gT(dx(h))||gT(dx(f))))&&u.push([s(h),s(f)]);return d}case K4:{const u=[],d=i([a,u],o);for(const h of o)(t||!gT(dx(h)))&&u.push(s(h));return d}}const{message:l}=o;return i([a,{name:c,message:l}],o)};return s},QU=(t,{json:e,lossy:n}={})=>{const r=[];return CDe(!(e||n),!!e,new Map,r)(t),r},dI=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?JU(QU(t,e)):structuredClone(t):(t,e)=>JU(QU(t,e));function MDe(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function ADe(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function RDe(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||MDe,r=t.options.footnoteBackLabel||ADe,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let c=-1;for(;++c<t.footnoteOrder.length;){const l=t.footnoteById.get(t.footnoteOrder[c]);if(!l)continue;const u=t.all(l),d=String(l.identifier).toUpperCase(),h=Mv(d.toLowerCase());let f=0;const p=[],g=t.footnoteCounts.get(d);for(;g!==void 0&&++f<=g;){p.length>0&&p.push({type:"text",value:" "});let b=typeof n=="string"?n:n(c,f);typeof b=="string"&&(b={type:"text",value:b}),p.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+h+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,f),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const m=u[u.length-1];if(m&&m.type==="element"&&m.tagName==="p"){const b=m.children[m.children.length-1];b&&b.type==="text"?b.value+=" ":m.children.push({type:"text",value:" "}),m.children.push(...p)}else u.push(...p);const y={type:"element",tagName:"li",properties:{id:e+"fn-"+h},children:t.wrap(u,!0)};t.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...dI(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const XY=function(t){if(t==null)return LDe;if(typeof t=="function")return ZP(t);if(typeof t=="object")return Array.isArray(t)?kDe(t):ODe(t);if(typeof t=="string")return NDe(t);throw new Error("Expected function, string, or object as test")};function kDe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=XY(t[n]);return ZP(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function ODe(t){const e=t;return ZP(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function NDe(t){return ZP(e);function e(n){return n&&n.type===t}}function ZP(t){return e;function e(n,r,i){return!!(DDe(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function LDe(){return!0}function DDe(t){return t!==null&&typeof t=="object"&&"type"in t}const YY=[],BDe=!0,e$=!1,FDe="skip";function UDe(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=XY(i),o=r?-1:1;a(t,void 0,[])();function a(c,l,u){const d=c&&typeof c=="object"?c:{};if(typeof d.type=="string"){const f=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(c.type+(f?"<"+f+">":""))+")"})}return h;function h(){let f=YY,p,g,m;if((!e||s(c,l,u[u.length-1]||void 0))&&(f=$De(n(c,u)),f[0]===e$))return f;if("children"in c&&c.children){const y=c;if(y.children&&f[0]!==FDe)for(g=(r?y.children.length:-1)+o,m=u.concat(y);g>-1&&g<y.children.length;){const b=y.children[g];if(p=a(b,g,m)(),p[0]===e$)return p;g=typeof p[1]=="number"?p[1]:g+o}}return f}}}function $De(t){return Array.isArray(t)?t:typeof t=="number"?[BDe,t]:t==null?YY:[t]}function ZY(t,e,n,r){let i,s,o;typeof e=="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),UDe(t,s,a,i);function a(c,l){const u=l[l.length-1],d=u?u.children.indexOf(c):void 0;return o(c,d,u)}}const Hk={}.hasOwnProperty,zDe={};function HDe(t,e){const n=e||zDe,r=new Map,i=new Map,s=new Map,o={...EDe,...n.handlers},a={all:l,applyData:WDe,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:c,options:n,patch:VDe,wrap:qDe};return ZY(t,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const d=u.type==="definition"?r:i,h=String(u.identifier).toUpperCase();d.has(h)||d.set(h,u)}}),a;function c(u,d){const h=u.type,f=a.handlers[h];if(Hk.call(a.handlers,h)&&f)return f(a,u,d);if(a.options.passThrough&&a.options.passThrough.includes(h)){if("children"in u){const{children:g,...m}=u,y=dI(m);return y.children=a.all(u),y}return dI(u)}return(a.options.unknownHandler||jDe)(a,u,d)}function l(u){const d=[];if("children"in u){const h=u.children;let f=-1;for(;++f<h.length;){const p=a.one(h[f],u);if(p){if(f&&h[f-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=t$(p.value)),!Array.isArray(p)&&p.type==="element")){const g=p.children[0];g&&g.type==="text"&&(g.value=t$(g.value))}Array.isArray(p)?d.push(...p):d.push(p)}}}return d}}function VDe(t,e){t.position&&(e.position=I6e(t))}function WDe(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,dI(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function jDe(t,e){const n=e.data||{},r="value"in e&&!(Hk.call(n,"hProperties")||Hk.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function qDe(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function t$(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function n$(t,e){const n=HDe(t,e),r=n.one(t,void 0),i=RDe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function KDe(t,e){return t&&"run"in t?async function(n,r){const i=n$(n,{file:r,...e});await t.run(i,r)}:function(n,r){return n$(n,{file:r,...t||e})}}function r$(t){if(t)throw t}var ZA,i$;function GDe(){if(i$)return ZA;i$=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(l){return typeof Array.isArray=="function"?Array.isArray(l):e.call(l)==="[object Array]"},s=function(l){if(!l||e.call(l)!=="[object Object]")return!1;var u=t.call(l,"constructor"),d=l.constructor&&l.constructor.prototype&&t.call(l.constructor.prototype,"isPrototypeOf");if(l.constructor&&!u&&!d)return!1;var h;for(h in l);return typeof h>"u"||t.call(l,h)},o=function(l,u){n&&u.name==="__proto__"?n(l,u.name,{enumerable:!0,configurable:!0,value:u.newValue,writable:!0}):l[u.name]=u.newValue},a=function(l,u){if(u==="__proto__")if(t.call(l,u)){if(r)return r(l,u).value}else return;return l[u]};return ZA=function c(){var l,u,d,h,f,p,g=arguments[0],m=1,y=arguments.length,b=!1;for(typeof g=="boolean"&&(b=g,g=arguments[1]||{},m=2),(g==null||typeof g!="object"&&typeof g!="function")&&(g={});m<y;++m)if(l=arguments[m],l!=null)for(u in l)d=a(g,u),h=a(l,u),g!==h&&(b&&h&&(s(h)||(f=i(h)))?(f?(f=!1,p=d&&i(d)?d:[]):p=d&&s(d)?d:{},o(g,{name:u,newValue:c(b,p,h)})):typeof h<"u"&&o(g,{name:u,newValue:h}));return g},ZA}var XDe=GDe();const JA=ah(XDe);function Vk(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function YDe(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(c,...l){const u=t[++s];let d=-1;if(c){o(c);return}for(;++d<i.length;)(l[d]===null||l[d]===void 0)&&(l[d]=i[d]);i=l,u?ZDe(u,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function ZDe(t,e){let n;return r;function r(...o){const a=t.length>o.length;let c;a&&o.push(i);try{c=t.apply(this,o)}catch(l){const u=l;if(a&&n)throw u;return i(u)}a||(c&&c.then&&typeof c.then=="function"?c.then(s,i):c instanceof Error?i(c):s(c))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const jc={basename:JDe,dirname:QDe,extname:eBe,join:tBe,sep:"/"};function JDe(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');P_(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function QDe(t){if(P_(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function eBe(t){P_(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function tBe(...t){let e=-1,n;for(;++e<t.length;)P_(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":nBe(n)}function nBe(t){P_(t);const e=t.codePointAt(0)===47;let n=rBe(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function rBe(t,e){let n="",r=0,i=-1,s=0,o=-1,a,c;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function P_(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const iBe={cwd:sBe};function sBe(){return"/"}function Wk(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function oBe(t){if(typeof t=="string")t=new URL(t);else if(!Wk(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return aBe(t)}function aBe(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const QA=["history","path","basename","stem","extname","dirname"];class JY{constructor(e){let n;e?Wk(e)?n={path:e}:typeof e=="string"||lBe(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":iBe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<QA.length;){const s=QA[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)QA.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?jc.basename(this.path):void 0}set basename(e){tR(e,"basename"),eR(e,"basename"),this.path=jc.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?jc.dirname(this.path):void 0}set dirname(e){s$(this.basename,"dirname"),this.path=jc.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?jc.extname(this.path):void 0}set extname(e){if(eR(e,"extname"),s$(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=jc.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Wk(e)&&(e=oBe(e)),tR(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?jc.basename(this.path,this.extname):void 0}set stem(e){tR(e,"stem"),eR(e,"stem"),this.path=jc.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new lo(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function eR(t,e){if(t&&t.includes(jc.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+jc.sep+"`")}function tR(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function s$(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function lBe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const cBe=function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},uBe={}.hasOwnProperty;class G4 extends cBe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=YDe()}copy(){const e=new G4;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(JA(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(iR("data",this.frozen),this.namespace[e]=n,this):uBe.call(this.namespace,e)&&this.namespace[e]||void 0:e?(iR("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=yT(e),r=this.parser||this.Parser;return nR("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),nR("process",this.parser||this.Parser),rR("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=yT(e),c=r.parse(a);r.run(c,a,function(u,d,h){if(u||!d||!h)return l(u);const f=d,p=r.stringify(f,h);hBe(p)?h.value=p:h.result=p,l(u,h)});function l(u,d){u||!d?o(u):s?s(d):n(void 0,d)}}}processSync(e){let n=!1,r;return this.freeze(),nR("processSync",this.parser||this.Parser),rR("processSync",this.compiler||this.Compiler),this.process(e,i),a$("processSync","process",n),r;function i(s,o){n=!0,r$(s),r=o}}run(e,n,r){o$(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const c=yT(n);i.run(e,c,l);function l(u,d,h){const f=d||e;u?a(u):o?o(f):r(void 0,f,h)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),a$("runSync","run",r),i;function s(o,a){r$(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=yT(n),i=this.compiler||this.Compiler;return rR("stringify",i),o$(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(iR("use",this.frozen),e!=null)if(typeof e=="function")c(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(l){if(typeof l=="function")c(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[u,...d]=l;c(u,d)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=JA(!0,i.settings,l.settings))}function a(l){let u=-1;if(l!=null)if(Array.isArray(l))for(;++u<l.length;){const d=l[u];s(d)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function c(l,u){let d=-1,h=-1;for(;++d<r.length;)if(r[d][0]===l){h=d;break}if(h===-1)r.push([l,...u]);else if(u.length>0){let[f,...p]=u;const g=r[h][1];Vk(g)&&Vk(f)&&(f=JA(!0,g,f)),r[h]=[l,f,...p]}}}}const dBe=new G4().freeze();function nR(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function rR(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function iR(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function o$(t){if(!Vk(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function a$(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function yT(t){return fBe(t)?t:new JY(t)}function fBe(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function hBe(t){return typeof t=="string"||pBe(t)}function pBe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const mBe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",l$=[],c$={allowDangerousHtml:!0},gBe=/^(https?|ircs?|mailto|xmpp)$/i,yBe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function vBe(t){const e=bBe(t),n=xBe(t);return wBe(e.runSync(e.parse(n),n),t)}function bBe(t){const e=t.rehypePlugins||l$,n=t.remarkPlugins||l$,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...c$}:c$;return dBe().use(JLe).use(n).use(KDe,r).use(e)}function xBe(t){const e=t.children||"",n=new JY;return typeof e=="string"&&(n.value=e),n}function wBe(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,c=e.urlTransform||_Be;for(const u of yBe)Object.hasOwn(e,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+mBe+u.id,void 0);return e.className&&(t={type:"element",tagName:"div",properties:{className:e.className},children:t.type==="root"?t.children:[t]}),ZY(t,l),R6e(t,{Fragment:H.Fragment,components:i,ignoreInvalidStyle:!0,jsx:H.jsx,jsxs:H.jsxs,passKeys:!0,passNode:!0});function l(u,d,h){if(u.type==="raw"&&h&&typeof d=="number")return o?h.children.splice(d,1):h.children[d]={type:"text",value:u.value},d;if(u.type==="element"){let f;for(f in GA)if(Object.hasOwn(GA,f)&&Object.hasOwn(u.properties,f)){const p=u.properties[f],g=GA[f];(g===null||g.includes(u.tagName))&&(u.properties[f]=c(String(p||""),f,u))}}if(u.type==="element"){let f=n?!n.includes(u.tagName):s?s.includes(u.tagName):!1;if(!f&&r&&typeof d=="number"&&(f=!r(u,d,h)),f&&h&&typeof d=="number")return a&&u.children?h.children.splice(d,1,...u.children):h.children.splice(d,1),d}}}function _Be(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||gBe.test(t.slice(0,e))?t:""}const SBe=["fileUrl","name","description","satoshis","creatorPublicKey","size","txid","outputIndex","retentionPeriod","coverUrl"],EBe=()=>{const{txid:t,outputIndex:e}=Qoe(),[n,r]=N.useState(null),[i,s]=N.useState(!0),[o,a]=N.useState(null),c=new mv({networkPreset:window.location.hostname==="localhost"?"local":"mainnet"});N.useEffect(()=>{t&&e&&(async()=>{try{const h=await c.query({service:"ls_market",query:{type:"findDetails",value:{txid:t,outputIndex:parseInt(e||"0",10)}}});if(h.type!=="output-list")throw new Error("Lookup answer must be an output-list");const f=await cI(h.outputs,SBe);r(f[0])}catch(h){throw new Error(`Error fetching details: ${h}`)}finally{s(!1)}})()},[t,e]);const l=async()=>{try{if(!n)return;s(!0);const d=n.fileUrl;if(!d)throw new Error("No fileUrl available to purchase!");console.log("File url:",d);const h=new gP("auto","localohst"),f=new yP(h),p=`${Z2.keyServer}/purchase/${d}`;let g;try{g=await f.fetch(p,{method:"POST",body:JSON.stringify({fileUrl:d}),headers:{"Content-Type":"application/json"}})}catch(A){throw new Error(`Failed to complete purchase: ${A}`)}if(!g)throw new Error("Failed to complete purchase");const m=await g.json(),y=m.encryptionKey;if(!y)throw m.description?new Error(m.description):new Error("Purchase was successful, but no encryptionKey was returned.");const b=new WW,{data:x,mimeType:S}=await b.download(d);console.log("Downloaded file from UHRP, mimeType:",S);const _=new mP(y,"hex").decrypt(x),I=new Blob([Uint8Array.from(_)],{type:"model/stl"}),C=URL.createObjectURL(I);a(C)}catch(d){console.error("Error during purchase:",d)}finally{s(!1)}},u=async()=>{if(!o)return;const d=document.createElement("a");d.href=o,d.download=`${(n==null?void 0:n.name)||"download"}.stl`,document.body.appendChild(d),d.click(),document.body.removeChild(d)};return i?H.jsxs(Ns,{textAlign:"center",mt:8,children:[H.jsx(XT,{}),H.jsx(ir,{mt:2,children:"Loading..."})]}):n?H.jsxs(jw,{sx:{mt:4,mb:4},children:[H.jsx(iu,{variant:"outlined",sx:{p:3,mb:4},children:H.jsxs(eo,{container:!0,spacing:3,columns:{xs:1,md:12},children:[H.jsx(eo,{size:{xs:1,md:5},children:H.jsx(Ns,{sx:{width:"100%",aspectRatio:"4/3",overflow:"hidden",borderRadius:1},children:H.jsx(LO,{src:n.coverUrl,alt:n.name,style:{width:"100%",height:"100%",objectFit:"cover"}})})}),H.jsxs(eo,{size:{xs:1,md:7},children:[H.jsx(ir,{variant:"h4",children:n.name}),H.jsxs(ir,{variant:"body2",sx:{mb:4},gutterBottom:!0,children:[H.jsx("strong",{children:"Uploader"})," ",n.creatorPublicKey]}),H.jsxs(eo,{container:!0,spacing:2,children:[H.jsxs(eo,{size:{xs:1,sm:6},children:[H.jsxs(ir,{children:[H.jsx("strong",{children:"Cost:"})," ",n.satoshis," sat"]}),H.jsxs(ir,{children:[H.jsx("strong",{children:"Size:"})," ",n.size," bytes"]}),H.jsxs(ir,{children:[H.jsx("strong",{children:"Purchases:"})," 0"]})]}),H.jsx(eo,{size:{xs:1,sm:6},children:H.jsxs(ir,{children:[H.jsx("strong",{children:"Expires:"})," ",new Date(n.retentionPeriod).toLocaleString()]})})]})]}),H.jsx(eo,{size:{xs:1,md:8},children:H.jsxs(iu,{variant:"outlined",sx:{p:2,mt:3},children:[H.jsx(ir,{variant:"h6",gutterBottom:!0,children:"Description"}),H.jsx(Ns,{maxHeight:200,overflow:"auto",children:H.jsx(vBe,{children:n.description})})]})}),H.jsx(eo,{size:{xs:1,md:4},children:H.jsx(Ns,{sx:{textAlign:"center",mt:4},children:o?H.jsx(hl,{variant:"contained",color:"secondary",size:"medium",onClick:u,sx:{px:6,borderRadius:2},children:"Download File"}):H.jsx(hl,{variant:"contained",size:"large",onClick:l,disabled:i,sx:{px:6,borderRadius:2},children:i?"Purchasing...":"Purchase File"})})})]})}),H.jsx(JT,{open:i,sx:{zIndex:1300,color:"#fff"},children:H.jsxs(Ns,{textAlign:"center",children:[H.jsx(XT,{color:"inherit"}),H.jsx(ir,{mt:2,children:"Processing purchase..."})]})})]}):H.jsx(ir,{variant:"h6",color:"error",textAlign:"center",mt:8,children:"Unable to load details. Please try again."})},TBe=["fileUrl","name","satoshis","coverUrl","txid","outputIndex","retentionPeriod"],IBe=["name","satoshis","txid","outputIndex","retentionPeriod"],PBe=()=>{const[t,e]=N.useState(0),[n,r]=N.useState([]),[i,s]=N.useState([]),[o,a]=N.useState(!1),c=new gP("auto","localhost"),l=new yP(c),u=new Zy(c),d=new mv({networkPreset:window.location.hostname==="localhost"?"local":"mainnet"});N.useEffect(()=>{(async()=>{a(!0);try{let m=await c.getPublicKey({identityKey:!0});const y=await l.fetch(`${Z2.keyServer}/balance`,{method:"POST",body:JSON.stringify(m),headers:{"Content-Type":"application/json"}});if(!y)throw new Error("Error fetching account balance");const{balance:b}=await y.json();e(b||0);const x=await d.query({service:"ls_market",query:{type:"findUploaderFiles",value:{publicKey:m.publicKey.toString()}}});if(x.type!=="output-list")throw new Error("Lookup answer must be a output-list");const S=await d.query({service:"ls_market",query:{type:"findUploaderFilesExpired",value:{publicKey:m.publicKey.toString()}}});if(S.type!=="output-list")throw new Error("Lookup answer must be a output-list");const P=await cI(x.outputs,TBe),_=await cI(S.outputs,IBe);console.log(P),r(P),s(_)}catch(m){console.error("Error fetching account data:",m)}finally{a(!1)}})()},[]);const h=async()=>{a(!0);try{const g=await c.getPublicKey({identityKey:!0}),m=await l.fetch(`${Z2.keyServer}/withdraw`,{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json"}});if(!m.ok){console.error("Error parsing balance result");return}const y=await m.json(),b=await c.internalizeAction({tx:dt(y.transaction,"base64"),outputs:[{paymentRemittance:{derivationPrefix:y.derivationPrefix,derivationSuffix:y.derivationSuffix,senderIdentityKey:y.senderIdentityKey},outputIndex:0,protocol:"wallet payment"}],description:`Withdraw from MetaMarket to ${(await c.getPublicKey({identityKey:!0})).publicKey}`});console.log("Withdraw successful!",b),e(0)}catch(g){console.error("Error when withdrawing:",g)}finally{a(!1)}},f=async(g,m)=>{a(!0);try{const y=await d.query({service:"ls_market",query:{type:"findDetails",value:{txid:g,outputIndex:m}}});if(y.type!=="output-list")throw new Error("Lookup answer must be an output-list");if(y.outputs.length!=1)throw new Error("Must be a single existing UTXO");const b=y.outputs[0].beef,x=`${g}.${m}`,{signableTransaction:S}=await c.createAction({inputBEEF:b,inputs:[{outpoint:x,unlockingScriptLength:74,inputDescription:"metamarket upload token"}],description:"spending token from metamarket UHRP"});if(!S)throw new Error("Token must be spendable");const P=u.unlock([0,"signing"],"1","anyone",void 0,!0),_=yc.fromAtomicBEEF(S.tx),I=await P.sign(_,0),C=await c.signAction({reference:S.reference,spends:{0:{unlockingScript:I.toHex()}}});console.log(C);const A=await d.query({service:"ls_market",query:{type:"deleteFile",value:{txid:g,outputIndex:m}}});if(y.type!="output-list")throw new Error("Lookup answer must be an output-list");console.log("Removed file:",g),r(M=>M.filter(k=>!(k.txid===g&&k.outputIndex===m))),s(M=>M.filter(k=>!(k.txid===g&&k.outputIndex===m)))}catch(y){console.error("Delete file error:",y)}finally{a(!1)}},p=({name:g,satoshis:m,txid:y,outputIndex:b,retentionPeriod:x,coverUrl:S,timesBought:P})=>H.jsx(eo,{size:{xs:12,sm:6,md:4},children:H.jsxs(wz,{sx:{p:1,display:"flex",flexDirection:"column",height:"100%"},children:[S&&H.jsx(LO,{src:S,alt:g,style:{width:"100%",aspectRatio:"4/3",objectFit:"cover",borderRadius:4}}),H.jsxs(_z,{sx:{flexGrow:1,pt:S?2:0},children:[H.jsx(ir,{variant:"h6",noWrap:!0,gutterBottom:!0,children:g}),H.jsxs(ir,{variant:"body2",children:["Cost: ",m," sats"]}),H.jsxs(ir,{variant:"body2",children:["Expires: ",new Date(x).toLocaleString()]})]}),H.jsx(gie,{children:H.jsx(hl,{size:"small",onClick:()=>f(y,b),disabled:o,children:"Remove"})})]})});return H.jsxs(jw,{sx:{mt:4},children:[H.jsx(ir,{variant:"h4",gutterBottom:!0,children:"Your Account"}),o&&H.jsx(Ese,{sx:{mb:2}}),H.jsxs(iu,{variant:"outlined",sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:2,mb:4},children:[H.jsxs(Ns,{children:[H.jsx(ir,{variant:"subtitle2",children:"Balance"}),H.jsxs(ir,{variant:"h3",children:[t," sats"]})]}),H.jsx(hl,{variant:"contained",disabled:o||t<=0,onClick:h,children:"Withdraw"})]}),H.jsxs(iu,{variant:"outlined",sx:{p:2,mb:4},children:[H.jsx(ir,{variant:"h6",gutterBottom:!0,children:"Expired Files"}),i.length?H.jsx(eo,{container:!0,spacing:2,children:i.map(g=>H.jsx(p,{...g},`${g.txid}.${g.outputIndex}`))}):H.jsx(ir,{color:"text.secondary",children:"You have no expired files."})]}),H.jsx(ir,{variant:"h6",gutterBottom:!0,children:"Your Uploaded Files"}),H.jsx(eo,{container:!0,spacing:3,children:n.map(g=>H.jsx(p,{...g},`${g.txid}.${g.outputIndex}`))})]})},CBe=()=>H.jsx(Fae,{children:H.jsx(mae,{children:H.jsxs(ey,{path:"/",element:H.jsx(Gae,{}),children:[H.jsx(ey,{index:!0,element:H.jsx(n6e,{})}),H.jsx(ey,{path:"upload-file",element:H.jsx(_ve,{})}),H.jsx(ey,{path:":txid/:outputIndex",element:H.jsx(EBe,{})}),H.jsx(ey,{path:"account",element:H.jsx(PBe,{})})]})})}),MBe=t=>`${8*t}px`,ABe=II({palette:{mode:"dark",primary:{main:"#00d1b2"},secondary:{main:"#7e57c2"},background:{default:"#121212",paper:"#242424"},error:{main:"#ff3860"}},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',h4:{fontWeight:700},button:{textTransform:"none"}},spacing:MBe}),QY=document.getElementById("root");if(QY===null)throw new Error("Failed to find the root element");const RBe=NZ.createRoot(QY);RBe.render(H.jsxs(vte,{theme:ABe,children:[H.jsx(Mle,{position:"top-center",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),H.jsx(Eie,{}),H.jsx(CBe,{})]}));
